var fx=Object.defineProperty;var dx=(e,t,n)=>t in e?fx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var de=(e,t,n)=>(dx(e,typeof t!="symbol"?t+"":t,n),n),yv=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var ee=(e,t,n)=>(yv(e,t,"read from private field"),n?n.call(e):t.get(e)),Xe=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},bt=(e,t,n,r)=>(yv(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);var Pn=(e,t,n)=>(yv(e,t,"access private method"),n);import{u as hx,a as px}from"../chunk/index-55948043.js";import{r as na,g as js,o as j1,a as Lu,i as Vo,w as at,b as ke,c as Na,u as be,p as nd,n as Sn,d as rd,e as Iu,f as Ee,h as gx,j,k as $e,l as A0,m as X2,q as xn,T as G1,s as P0,v as L0,t as Q2,F as $n,x as mx,y as Ho,z as e5,A as vx,C as _x,B as yx,D as He,E as dn,G as Jt,H as Un,I as Ct,J as Ge,K as an,L as Df,M as Ar,N as Mf,O as t5,P as Xp,Q as n5,R as W1,S as bx,U as wx,V as Sx,W as xx,X as Ex,Y as kx,Z as r5,_ as a5,$ as i5,a0 as o5,a1 as s5,a2 as Cx,a3 as fa,a4 as Tx,a5 as Ax,a6 as Px,a7 as Lx,a8 as Ix}from"../chunk/xcs-vue-family-70642f71.js";import{c as Rx,f as Ox,i as ga,a as Gs,d as q1,b as En,e as Tr,g as Ve,s as It,k as gf,p as hu,h as pu,j as Dx,l as Kv,m as Us,n as Ay,o as lr,q as ut,r as ma,v as l5,t as Mx,u as ri,w as Nx,x as Fx,y as $x,z as Bx,A as u5,B as Cs,C as Ux,D as Vx,_ as wt,E as Sp,F as nf,M as Hx,V as zx,H as Zv,G as jx,S as Py,I as xp,J as Gx,K as Ly,T as Sf,L as ad,N as Wx,O as bv,P as qx,Q as Yx,R as Kx,U as Zx,W as Jx,X as Xx,Y as Qx}from"../chunk/xcs-canvas-5c2592d6.js";const wn=e=>e!=null,Nf=e=>typeof e=="function",id=e=>e!==null&&typeof e=="object",c5=e=>id(e)&&Nf(e.then)&&Nf(e.catch),f5=e=>typeof e=="number"||/^\d+(\.\d+)?$/.test(e),eE=()=>Ru?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function Jv(){}const Xt=Object.assign,Ru=typeof window<"u";function Iy(e,t){const n=t.split(".");let r=e;return n.forEach(i=>{var l;r=id(r)&&(l=r[i])!=null?l:""}),r}function Vs(e,t,n){return t.reduce((r,i)=>((!n||e[i]!==void 0)&&(r[i]=e[i]),r),{})}const xf=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Ry=e=>Array.isArray(e)?e:[e],mr=null,dt=[Number,String],Wt={type:Boolean,default:!0},$o=e=>({type:e,required:!0}),Qp=()=>({type:Array,default:()=>[]}),tE=e=>({type:Number,default:e}),sr=e=>({type:dt,default:e}),Bt=e=>({type:String,default:e});var Ou=typeof window<"u";function Ff(e){return Ou?requestAnimationFrame(e):-1}function mf(e){Ff(()=>Ff(e))}var nE=e=>e===window,Oy=(e,t)=>({top:0,left:0,right:e,bottom:t,width:e,height:t}),Hi=e=>{const t=be(e);if(nE(t)){const n=t.innerWidth,r=t.innerHeight;return Oy(n,r)}return t!=null&&t.getBoundingClientRect?t.getBoundingClientRect():Oy(0,0)};function Ws(e){const t=Iu(e,null);if(t){const n=js(),{link:r,unlink:i,internalChildren:l}=t;r(n),j1(()=>i(n));const s=Ee(()=>l.indexOf(n));return{parent:t,index:s}}return{parent:null,index:ke(-1)}}function rE(e){const t=[],n=r=>{Array.isArray(r)&&r.forEach(i=>{var l;gx(i)&&(t.push(i),(l=i.component)!=null&&l.subTree&&(t.push(i.component.subTree),n(i.component.subTree.children)),i.children&&n(i.children))})};return n(e),t}var Dy=(e,t)=>{const n=e.indexOf(t);return n===-1?e.findIndex(r=>t.key!==void 0&&t.key!==null&&r.type===t.type&&r.key===t.key):n};function aE(e,t,n){const r=rE(e.subTree.children);n.sort((l,s)=>Dy(r,l.vnode)-Dy(r,s.vnode));const i=n.map(l=>l.proxy);t.sort((l,s)=>{const c=i.indexOf(l),h=i.indexOf(s);return c-h})}function Du(e){const t=na([]),n=na([]),r=js();return{children:t,linkChildren:l=>{nd(e,Object.assign({link:h=>{h.proxy&&(n.push(h),t.push(h.proxy),aE(r,t,n))},unlink:h=>{const p=n.indexOf(h);t.splice(p,1),n.splice(p,1)},children:t,internalChildren:n},l))}}}function I0(e){let t;Na(()=>{e(),Sn(()=>{t=!0})}),rd(()=>{t&&e()})}function li(e,t,n={}){if(!Ou)return;const{target:r=window,passive:i=!1,capture:l=!1}=n;let s=!1,c;const h=_=>{if(s)return;const b=be(_);b&&!c&&(b.addEventListener(e,t,{capture:l,passive:i}),c=!0)},p=_=>{if(s)return;const b=be(_);b&&c&&(b.removeEventListener(e,t,l),c=!1)};j1(()=>p(r)),Lu(()=>p(r)),I0(()=>h(r));let g;return Vo(r)&&(g=at(r,(_,b)=>{p(b),h(_)})),()=>{g==null||g(),p(r),s=!0}}function iE(e,t,n={}){if(!Ou)return;const{eventName:r="click"}=n;li(r,l=>{(Array.isArray(e)?e:[e]).every(h=>{const p=be(h);return p&&!p.contains(l.target)})&&t(l)},{target:document})}var Ep,wv;function oE(){if(!Ep&&(Ep=ke(0),wv=ke(0),Ou)){const e=()=>{Ep.value=window.innerWidth,wv.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:Ep,height:wv}}var sE=/scroll|auto|overlay/i,d5=Ou?window:void 0;function lE(e){return e.tagName!=="HTML"&&e.tagName!=="BODY"&&e.nodeType===1}function h5(e,t=d5){let n=e;for(;n&&n!==t&&lE(n);){const{overflowY:r}=window.getComputedStyle(n);if(sE.test(r))return n;n=n.parentNode}return t}function p5(e,t=d5){const n=ke();return Na(()=>{e.value&&(n.value=h5(e.value,t))}),n}var kp;function uE(){if(!kp&&(kp=ke("visible"),Ou)){const e=()=>{kp.value=document.hidden?"hidden":"visible"};e(),window.addEventListener("visibilitychange",e)}return kp}var g5=Symbol("van-field");function Y1(e){const t=Iu(g5,null);t&&!t.customValue.value&&(t.customValue.value=e,at(e,()=>{t.resetValidation(),t.validateWithTrigger("onChange")}))}function K1(e){const t="scrollTop"in e?e.scrollTop:e.pageYOffset;return Math.max(t,0)}function Xv(e,t){"scrollTop"in e?e.scrollTop=t:e.scrollTo(e.scrollX,t)}function Z1(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function J1(e){Xv(window,e),Xv(document.body,e)}function My(e,t){if(e===window)return 0;const n=t?K1(t):Z1();return Hi(e).top+n}const cE=eE();function fE(){cE&&J1(Z1())}const X1=e=>e.stopPropagation();function oi(e,t){(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault(),t&&X1(e)}function e0(e){const t=be(e);if(!t)return!1;const n=window.getComputedStyle(t),r=n.display==="none",i=t.offsetParent===null&&n.position!=="fixed";return r||i}const{width:R0,height:Q1}=oE();function Jn(e){if(wn(e))return f5(e)?`${e}px`:String(e)}function m5(e){if(wn(e)){if(Array.isArray(e))return{width:Jn(e[0]),height:Jn(e[1])};const t=Jn(e);return{width:t,height:t}}}function e_(e){const t={};return e!==void 0&&(t.zIndex=+e),t}let Sv;function dE(){if(!Sv){const e=document.documentElement,t=e.style.fontSize||window.getComputedStyle(e).fontSize;Sv=parseFloat(t)}return Sv}function hE(e){return e=e.replace(/rem/g,""),+e*dE()}function pE(e){return e=e.replace(/vw/g,""),+e*R0.value/100}function gE(e){return e=e.replace(/vh/g,""),+e*Q1.value/100}function t_(e){if(typeof e=="number")return e;if(Ru){if(e.includes("rem"))return hE(e);if(e.includes("vw"))return pE(e);if(e.includes("vh"))return gE(e)}return parseFloat(e)}const mE=/-(\w)/g,v5=e=>e.replace(mE,(t,n)=>n.toUpperCase()),vE=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,""),Fs=(e,t,n)=>Math.min(Math.max(e,t),n);function Ny(e,t,n){const r=e.indexOf(t);return r===-1?e:t==="-"&&r!==0?e.slice(0,r):e.slice(0,r+1)+e.slice(r).replace(n,"")}function _E(e,t=!0,n=!0){t?e=Ny(e,".",/\./g):e=e.split(".")[0],n?e=Ny(e,"-",/-/g):e=e.replace(/-/,"");const r=t?/[^-0-9.]/g:/[^-0-9]/g;return e.replace(r,"")}function yE(e,t){return Math.round((e+t)*1e10)/1e10}const{hasOwnProperty:bE}=Object.prototype;function wE(e,t,n){const r=t[n];wn(r)&&(!bE.call(e,n)||!id(r)?e[n]=r:e[n]=_5(Object(e[n]),r))}function _5(e,t){return Object.keys(t).forEach(n=>{wE(e,t,n)}),e}var SE={name:"姓名",tel:"电话",save:"保存",confirm:"确认",cancel:"取消",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(e,t)=>`${e}年${t}月`,rangePrompt:e=>`最多选择 ${e} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:e=>`${e}折`,condition:e=>`满${e}元可用`},vanCouponCell:{title:"优惠券",count:e=>`${e}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}};const Fy=ke("zh-CN"),$y=na({"zh-CN":SE}),xE={messages(){return $y[Fy.value]},use(e,t){Fy.value=e,this.add({[e]:t})},add(e={}){_5($y,e)}};var EE=xE;function kE(e){const t=v5(e)+".";return(n,...r)=>{const i=EE.messages(),l=Iy(i,t+n)||Iy(i,n);return Nf(l)?l(...r):l}}function Qv(e,t){return t?typeof t=="string"?` ${e}--${t}`:Array.isArray(t)?t.reduce((n,r)=>n+Qv(e,r),""):Object.keys(t).reduce((n,r)=>n+(t[r]?Qv(e,r):""),""):""}function CE(e){return(t,n)=>(t&&typeof t!="string"&&(n=t,t=""),t=t?`${e}__${t}`:e,`${t}${Qv(t,n)}`)}function At(e){const t=`van-${e}`;return[t,CE(t),kE(t)]}const Mu="van-hairline",TE=`${Mu}--top`,AE=`${Mu}--left`,rG=`${Mu}--bottom`,PE=`${Mu}--surround`,y5=`${Mu}--top-bottom`,LE=`${Mu}-unset--top-bottom`,t0="van-haptics-feedback",IE=Symbol("van-form");function n_(e,{args:t=[],done:n,canceled:r}){if(e){const i=e.apply(null,t);c5(i)?i.then(l=>{l?n():r&&r()}).catch(Jv):i?n():r&&r()}else n()}function Qt(e){return e.install=t=>{const{name:n}=e;n&&(t.component(n,e),t.component(v5(`-${n}`),e))},e}const b5=Symbol();function r_(e){const t=Iu(b5,null);t&&at(t,n=>{n&&e()})}const RE=(e,t)=>{const n=ke(),r=()=>{n.value=Hi(e).height};return Na(()=>{if(Sn(r),t)for(let i=1;i<=3;i++)setTimeout(r,100*i)}),r_(()=>Sn(r)),at([R0,Q1],r),n};function OE(e,t){const n=RE(e,!0);return r=>j("div",{class:t("placeholder"),style:{height:n.value?`${n.value}px`:void 0}},[r()])}const[w5,By]=At("action-bar"),S5=Symbol(w5),DE={placeholder:Boolean,safeAreaInsetBottom:Wt};var ME=$e({name:w5,props:DE,setup(e,{slots:t}){const n=ke(),r=OE(n,By),{linkChildren:i}=Du(S5);i();const l=()=>{var s;return j("div",{ref:n,class:[By(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(s=t.default)==null?void 0:s.call(t)])};return()=>e.placeholder?r(l):l()}});const NE=Qt(ME);function Fa(e){const t=js();t&&Xt(t.proxy,e)}const O0={to:[String,Object],url:String,replace:Boolean};function x5({to:e,url:t,replace:n,$router:r}){e&&r?r[n?"replace":"push"](e):t&&(n?location.replace(t):location.href=t)}function a_(){const e=js().proxy;return()=>x5(e)}const[FE,Uy]=At("badge"),$E={dot:Boolean,max:dt,tag:Bt("div"),color:String,offset:Array,content:dt,showZero:Wt,position:Bt("top-right")};var BE=$e({name:FE,props:$E,setup(e,{slots:t}){const n=()=>{if(t.content)return!0;const{content:c,showZero:h}=e;return wn(c)&&c!==""&&(h||c!==0&&c!=="0")},r=()=>{const{dot:c,max:h,content:p}=e;if(!c&&n())return t.content?t.content():wn(h)&&f5(p)&&+p>+h?`${h}+`:p},i=c=>c.startsWith("-")?c.replace("-",""):`-${c}`,l=Ee(()=>{const c={background:e.color};if(e.offset){const[h,p]=e.offset,{position:g}=e,[_,b]=g.split("-");t.default?(typeof p=="number"?c[_]=Jn(_==="top"?p:-p):c[_]=_==="top"?Jn(p):i(p),typeof h=="number"?c[b]=Jn(b==="left"?h:-h):c[b]=b==="left"?Jn(h):i(h)):(c.marginTop=Jn(p),c.marginLeft=Jn(h))}return c}),s=()=>{if(n()||e.dot)return j("div",{class:Uy([e.position,{dot:e.dot,fixed:!!t.default}]),style:l.value},[r()])};return()=>{if(t.default){const{tag:c}=e;return j(c,{class:Uy("wrapper")},{default:()=>[t.default(),s()]})}return s()}}});const E5=Qt(BE);let k5=2e3;const UE=()=>++k5,VE=e=>{k5=e},[C5,HE]=At("config-provider"),T5=Symbol(C5),zE={tag:Bt("div"),theme:Bt("light"),zIndex:Number,themeVars:Object,themeVarsDark:Object,themeVarsLight:Object,iconPrefix:String};function jE(e){const t={};return Object.keys(e).forEach(n=>{t[`--van-${vE(n)}`]=e[n]}),t}var GE=$e({name:C5,props:zE,setup(e,{slots:t}){const n=Ee(()=>jE(Xt({},e.themeVars,e.theme==="dark"?e.themeVarsDark:e.themeVarsLight)));if(Ru){const r=()=>{document.documentElement.classList.add(`van-theme-${e.theme}`)},i=(l=e.theme)=>{document.documentElement.classList.remove(`van-theme-${l}`)};at(()=>e.theme,(l,s)=>{s&&i(s),r()},{immediate:!0}),rd(r),Lu(i),A0(i)}return nd(T5,e),X2(()=>{e.zIndex!==void 0&&VE(e.zIndex)}),()=>j(e.tag,{class:HE(),style:n.value},{default:()=>{var r;return[(r=t.default)==null?void 0:r.call(t)]}})}});const[WE,Vy]=At("icon"),qE=e=>e==null?void 0:e.includes("/"),YE={dot:Boolean,tag:Bt("i"),name:String,size:dt,badge:dt,color:String,badgeProps:Object,classPrefix:String};var KE=$e({name:WE,props:YE,setup(e,{slots:t}){const n=Iu(T5,null),r=Ee(()=>e.classPrefix||(n==null?void 0:n.iconPrefix)||Vy());return()=>{const{tag:i,dot:l,name:s,size:c,badge:h,color:p}=e,g=qE(s);return j(E5,xn({dot:l,tag:i,class:[r.value,g?"":`${r.value}-${s}`],style:{color:p,fontSize:Jn(c)},content:h},e.badgeProps),{default:()=>{var _;return[(_=t.default)==null?void 0:_.call(t),g&&j("img",{class:Vy("image"),src:s},null)]}})}}});const zi=Qt(KE),[ZE,Ef]=At("loading"),JE=Array(12).fill(null).map((e,t)=>j("i",{class:Ef("line",String(t+1))},null)),XE=j("svg",{class:Ef("circular"),viewBox:"25 25 50 50"},[j("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),QE={size:dt,type:Bt("circular"),color:String,vertical:Boolean,textSize:dt,textColor:String};var e8=$e({name:ZE,props:QE,setup(e,{slots:t}){const n=Ee(()=>Xt({color:e.color},m5(e.size))),r=()=>{const l=e.type==="spinner"?JE:XE;return j("span",{class:Ef("spinner",e.type),style:n.value},[t.icon?t.icon():l])},i=()=>{var l;if(t.default)return j("span",{class:Ef("text"),style:{fontSize:Jn(e.textSize),color:(l=e.textColor)!=null?l:e.color}},[t.default()])};return()=>{const{type:l,vertical:s}=e;return j("div",{class:Ef([l,{vertical:s}]),"aria-live":"polite","aria-busy":!0},[r(),i()])}}});const od=Qt(e8),[t8,iu]=At("button"),n8=Xt({},O0,{tag:Bt("button"),text:String,icon:String,type:Bt("default"),size:Bt("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:Bt("button"),loadingSize:dt,loadingText:String,loadingType:String,iconPosition:Bt("left")});var r8=$e({name:t8,props:n8,emits:["click"],setup(e,{emit:t,slots:n}){const r=a_(),i=()=>n.loading?n.loading():j(od,{size:e.loadingSize,type:e.loadingType,class:iu("loading")},null),l=()=>{if(e.loading)return i();if(n.icon)return j("div",{class:iu("icon")},[n.icon()]);if(e.icon)return j(zi,{name:e.icon,class:iu("icon"),classPrefix:e.iconPrefix},null)},s=()=>{let p;if(e.loading?p=e.loadingText:p=n.default?n.default():e.text,p)return j("span",{class:iu("text")},[p])},c=()=>{const{color:p,plain:g}=e;if(p){const _={color:g?p:"white"};return g||(_.background=p),p.includes("gradient")?_.border=0:_.borderColor=p,_}},h=p=>{e.loading?oi(p):e.disabled||(t("click",p),r())};return()=>{const{tag:p,type:g,size:_,block:b,round:x,plain:k,square:T,loading:P,disabled:A,hairline:L,nativeType:F,iconPosition:N}=e,W=[iu([g,_,{plain:k,block:b,round:x,square:T,loading:P,disabled:A,hairline:L}]),{[PE]:L}];return j(p,{type:F,class:W,style:c(),disabled:A,onClick:h},{default:()=>[j("div",{class:iu("content")},[N==="left"&&l(),s(),N==="right"&&l()])]})}}});const si=Qt(r8),[a8,i8]=At("action-bar-button"),o8=Xt({},O0,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var s8=$e({name:a8,props:o8,setup(e,{slots:t}){const n=a_(),{parent:r,index:i}=Ws(S5),l=Ee(()=>{if(r){const c=r.children[i.value-1];return!(c&&"isButton"in c)}}),s=Ee(()=>{if(r){const c=r.children[i.value+1];return!(c&&"isButton"in c)}});return Fa({isButton:!0}),()=>{const{type:c,icon:h,text:p,color:g,loading:_,disabled:b}=e;return j(si,{class:i8([c,{last:s.value,first:l.value}]),size:"large",type:c,icon:h,color:g,loading:_,disabled:b,onClick:n},{default:()=>[t.default?t.default():p]})}}});const Hy=Qt(s8),i_={show:Boolean,zIndex:dt,overlay:Wt,duration:dt,teleport:[String,Object],lockScroll:Wt,lazyRender:Wt,beforeClose:Function,overlayStyle:Object,overlayClass:mr,transitionAppear:Boolean,closeOnClickOverlay:Wt},l8=Object.keys(i_);function u8(e,t){return e>t?"horizontal":t>e?"vertical":""}function sd(){const e=ke(0),t=ke(0),n=ke(0),r=ke(0),i=ke(0),l=ke(0),s=ke(""),c=()=>s.value==="vertical",h=()=>s.value==="horizontal",p=()=>{n.value=0,r.value=0,i.value=0,l.value=0,s.value=""};return{move:b=>{const x=b.touches[0];n.value=(x.clientX<0?0:x.clientX)-e.value,r.value=x.clientY-t.value,i.value=Math.abs(n.value),l.value=Math.abs(r.value);const k=10;(!s.value||i.value<k&&l.value<k)&&(s.value=u8(i.value,l.value))},start:b=>{p(),e.value=b.touches[0].clientX,t.value=b.touches[0].clientY},reset:p,startX:e,startY:t,deltaX:n,deltaY:r,offsetX:i,offsetY:l,direction:s,isVertical:c,isHorizontal:h}}let rf=0;const zy="van-overflow-hidden";function c8(e,t){const n=sd(),r="01",i="10",l=g=>{n.move(g);const _=n.deltaY.value>0?i:r,b=h5(g.target,e.value),{scrollHeight:x,offsetHeight:k,scrollTop:T}=b;let P="11";T===0?P=k>=x?"00":"01":T+k>=x&&(P="10"),P!=="11"&&n.isVertical()&&!(parseInt(P,2)&parseInt(_,2))&&oi(g,!0)},s=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",l,{passive:!1}),rf||document.body.classList.add(zy),rf++},c=()=>{rf&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",l),rf--,rf||document.body.classList.remove(zy))},h=()=>t()&&s(),p=()=>t()&&c();I0(h),Lu(p),A0(p),at(t,g=>{g?s():c()})}function A5(e){const t=ke(!1);return at(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const[f8,d8]=At("overlay"),h8={show:Boolean,zIndex:dt,duration:dt,className:mr,lockScroll:Wt,lazyRender:Wt,customStyle:Object};var p8=$e({name:f8,props:h8,setup(e,{slots:t}){const n=ke(),r=A5(()=>e.show||!e.lazyRender),i=s=>{e.lockScroll&&oi(s,!0)},l=r(()=>{var s;const c=Xt(e_(e.zIndex),e.customStyle);return wn(e.duration)&&(c.animationDuration=`${e.duration}s`),P0(j("div",{ref:n,style:c,class:[d8(),e.className]},[(s=t.default)==null?void 0:s.call(t)]),[[L0,e.show]])});return li("touchmove",i,{target:n}),()=>j(G1,{name:"van-fade",appear:!0},{default:l})}});const g8=Qt(p8),m8=Xt({},i_,{round:Boolean,position:Bt("center"),closeIcon:Bt("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:Bt("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[v8,jy]=At("popup");var _8=$e({name:v8,inheritAttrs:!1,props:m8,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:n,slots:r}){let i,l;const s=ke(),c=ke(),h=A5(()=>e.show||!e.lazyRender),p=Ee(()=>{const W={zIndex:s.value};if(wn(e.duration)){const te=e.position==="center"?"animationDuration":"transitionDuration";W[te]=`${e.duration}s`}return W}),g=()=>{i||(i=!0,s.value=e.zIndex!==void 0?+e.zIndex:UE(),t("open"))},_=()=>{i&&n_(e.beforeClose,{done(){i=!1,t("close"),t("update:show",!1)}})},b=W=>{t("clickOverlay",W),e.closeOnClickOverlay&&_()},x=()=>{if(e.overlay)return j(g8,{show:e.show,class:e.overlayClass,zIndex:s.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:b},{default:r["overlay-content"]})},k=W=>{t("clickCloseIcon",W),_()},T=()=>{if(e.closeable)return j(zi,{role:"button",tabindex:0,name:e.closeIcon,class:[jy("close-icon",e.closeIconPosition),t0],classPrefix:e.iconPrefix,onClick:k},null)},P=()=>t("opened"),A=()=>t("closed"),L=W=>t("keydown",W),F=h(()=>{var W;const{round:te,position:G,safeAreaInsetTop:K,safeAreaInsetBottom:re}=e;return P0(j("div",xn({ref:c,style:p.value,role:"dialog",tabindex:0,class:[jy({round:te,[G]:G}),{"van-safe-area-top":K,"van-safe-area-bottom":re}],onKeydown:L},n),[(W=r.default)==null?void 0:W.call(r),T()]),[[L0,e.show]])}),N=()=>{const{position:W,transition:te,transitionAppear:G}=e,K=W==="center"?"van-fade":`van-popup-slide-${W}`;return j(G1,{name:te||K,appear:G,onAfterEnter:P,onAfterLeave:A},{default:F})};return at(()=>e.show,W=>{W&&!i&&(g(),n.tabindex===0&&Sn(()=>{var te;(te=c.value)==null||te.focus()})),!W&&i&&(i=!1,t("close"))}),Fa({popupRef:c}),c8(c,()=>e.show&&e.lockScroll),li("popstate",()=>{e.closeOnPopstate&&(_(),l=!1)}),Na(()=>{e.show&&g()}),rd(()=>{l&&(t("update:show",!0),l=!1)}),Lu(()=>{e.show&&e.teleport&&(_(),l=!0)}),nd(b5,()=>e.show),()=>e.teleport?j(Q2,{to:e.teleport},{default:()=>[x(),N()]}):j($n,null,[x(),N()])}});const Nu=Qt(_8),[y8,Bi,Gy]=At("picker"),P5=e=>e.find(t=>!t.disabled)||e[0];function b8(e,t){const n=e[0];if(n){if(Array.isArray(n))return"multiple";if(t.children in n)return"cascade"}return"default"}function e1(e,t){t=Fs(t,0,e.length);for(let n=t;n<e.length;n++)if(!e[n].disabled)return n;for(let n=t-1;n>=0;n--)if(!e[n].disabled)return n;return 0}const Wy=(e,t,n)=>t!==void 0&&!!e.find(r=>r[n.value]===t);function t1(e,t,n){const r=e.findIndex(l=>l[n.value]===t),i=e1(e,r);return e[i]}function w8(e,t,n){const r=[];let i={[t.children]:e},l=0;for(;i&&i[t.children];){const s=i[t.children],c=n.value[l];if(i=wn(c)?t1(s,c,t):void 0,!i&&s.length){const h=P5(s)[t.value];i=t1(s,h,t)}l++,r.push(s)}return r}function S8(e){const{transform:t}=window.getComputedStyle(e),n=t.slice(7,t.length-1).split(", ")[5];return Number(n)}function x8(e){return Xt({text:"text",value:"value",children:"children"},e)}const qy=200,Yy=300,E8=15,[L5,xv]=At("picker-column"),I5=Symbol(L5);var k8=$e({name:L5,props:{value:dt,fields:$o(Object),options:Qp(),readonly:Boolean,allowHtml:Boolean,optionHeight:$o(Number),swipeDuration:$o(dt),visibleOptionNum:$o(dt)},emits:["change","clickOption"],setup(e,{emit:t,slots:n}){let r,i,l,s,c;const h=ke(),p=ke(),g=ke(0),_=ke(0),b=sd(),x=()=>e.options.length,k=()=>e.optionHeight*(+e.visibleOptionNum-1)/2,T=re=>{const H=e1(e.options,re),J=-H*e.optionHeight,ie=()=>{const oe=e.options[H][e.fields.value];oe!==e.value&&t("change",oe)};r&&J!==g.value?c=ie:ie(),g.value=J},P=()=>e.readonly||!e.options.length,A=re=>{r||P()||(c=null,_.value=qy,T(re),t("clickOption",e.options[re]))},L=re=>Fs(Math.round(-re/e.optionHeight),0,x()-1),F=(re,H)=>{const J=Math.abs(re/H);re=g.value+J/.003*(re<0?-1:1);const ie=L(re);_.value=+e.swipeDuration,T(ie)},N=()=>{r=!1,_.value=0,c&&(c(),c=null)},W=re=>{if(!P()){if(b.start(re),r){const H=S8(p.value);g.value=Math.min(0,H-k())}_.value=0,i=g.value,l=Date.now(),s=i,c=null}},te=re=>{if(P())return;b.move(re),b.isVertical()&&(r=!0,oi(re,!0)),g.value=Fs(i+b.deltaY.value,-(x()*e.optionHeight),e.optionHeight);const H=Date.now();H-l>Yy&&(l=H,s=g.value)},G=()=>{if(P())return;const re=g.value-s,H=Date.now()-l;if(H<Yy&&Math.abs(re)>E8){F(re,H);return}const ie=L(g.value);_.value=qy,T(ie),setTimeout(()=>{r=!1},0)},K=()=>{const re={height:`${e.optionHeight}px`};return e.options.map((H,J)=>{const ie=H[e.fields.text],{disabled:oe}=H,le=H[e.fields.value],$={role:"button",style:re,tabindex:oe?-1:0,class:[xv("item",{disabled:oe,selected:le===e.value}),H.className],onClick:()=>A(J)},Y={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:ie};return j("li",$,[n.option?n.option(H,J):j("div",Y,null)])})};return Ws(I5),Fa({stopMomentum:N}),X2(()=>{const re=e.options.findIndex(ie=>ie[e.fields.value]===e.value),J=-e1(e.options,re)*e.optionHeight;g.value=J}),li("touchmove",te,{target:h}),()=>j("div",{ref:h,class:xv(),onTouchstartPassive:W,onTouchend:G,onTouchcancel:G},[j("ul",{ref:p,style:{transform:`translate3d(0, ${g.value+k()}px, 0)`,transitionDuration:`${_.value}ms`,transitionProperty:_.value?"all":"none"},class:xv("wrapper"),onTransitionend:N},[K()])])}});const[C8]=At("picker-toolbar"),D0={title:String,cancelButtonText:String,confirmButtonText:String},R5=["cancel","confirm","title","toolbar"],T8=Object.keys(D0);var O5=$e({name:C8,props:D0,emits:["confirm","cancel"],setup(e,{emit:t,slots:n}){const r=()=>{if(n.title)return n.title();if(e.title)return j("div",{class:[Bi("title"),"van-ellipsis"]},[e.title])},i=()=>t("cancel"),l=()=>t("confirm"),s=()=>{const h=e.cancelButtonText||Gy("cancel");return j("button",{type:"button",class:[Bi("cancel"),t0],onClick:i},[n.cancel?n.cancel():h])},c=()=>{const h=e.confirmButtonText||Gy("confirm");return j("button",{type:"button",class:[Bi("confirm"),t0],onClick:l},[n.confirm?n.confirm():h])};return()=>j("div",{class:Bi("toolbar")},[n.toolbar?n.toolbar():[s(),r(),c()]])}});function A8(e,t,n){let r=0;const i=e.scrollLeft,l=n===0?1:Math.round(n*1e3/16);function s(){e.scrollLeft+=(t-i)/l,++r<l&&Ff(s)}s()}function P8(e,t,n,r){let i=K1(e);const l=i<t,s=n===0?1:Math.round(n*1e3/16),c=(t-i)/s;function h(){i+=c,(l&&i>t||!l&&i<t)&&(i=t),Xv(e,i),l&&i<t||!l&&i>t?Ff(h):r&&Ff(r)}h()}let L8=0;function o_(){const e=js(),{name:t="unknown"}=(e==null?void 0:e.type)||{};return`${t}-${++L8}`}function I8(){const e=ke([]),t=[];return mx(()=>{e.value=[]}),[e,r=>(t[r]||(t[r]=i=>{e.value[r]=i}),t[r])]}function D5(e,t){if(!Ru||!window.IntersectionObserver)return;const n=new IntersectionObserver(l=>{t(l[0].intersectionRatio>0)},{root:document.body}),r=()=>{e.value&&n.observe(e.value)},i=()=>{e.value&&n.unobserve(e.value)};Lu(i),A0(i),I0(r)}const[R8,O8]=At("sticky"),D8={zIndex:dt,position:Bt("top"),container:Object,offsetTop:sr(0),offsetBottom:sr(0)};var M8=$e({name:R8,props:D8,emits:["scroll","change"],setup(e,{emit:t,slots:n}){const r=ke(),i=p5(r),l=na({fixed:!1,width:0,height:0,transform:0}),s=Ee(()=>t_(e.position==="top"?e.offsetTop:e.offsetBottom)),c=Ee(()=>{const{fixed:_,height:b,width:x}=l;if(_)return{width:`${x}px`,height:`${b}px`}}),h=Ee(()=>{if(!l.fixed)return;const _=Xt(e_(e.zIndex),{width:`${l.width}px`,height:`${l.height}px`,[e.position]:`${s.value}px`});return l.transform&&(_.transform=`translate3d(0, ${l.transform}px, 0)`),_}),p=_=>t("scroll",{scrollTop:_,isFixed:l.fixed}),g=()=>{if(!r.value||e0(r))return;const{container:_,position:b}=e,x=Hi(r),k=K1(window);if(l.width=x.width,l.height=x.height,b==="top")if(_){const T=Hi(_),P=T.bottom-s.value-l.height;l.fixed=s.value>x.top&&T.bottom>0,l.transform=P<0?P:0}else l.fixed=s.value>x.top;else{const{clientHeight:T}=document.documentElement;if(_){const P=Hi(_),A=T-P.top-s.value-l.height;l.fixed=T-s.value<x.bottom&&T>P.top,l.transform=A<0?-A:0}else l.fixed=T-s.value<x.bottom}p(k)};return at(()=>l.fixed,_=>t("change",_)),li("scroll",g,{target:i,passive:!0}),D5(r,g),()=>{var _;return j("div",{ref:r,style:c.value},[j("div",{class:O8({fixed:l.fixed}),style:h.value},[(_=n.default)==null?void 0:_.call(n)])])}}});const N8=Qt(M8),[F8,Ky]=At("tab");var $8=$e({name:F8,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:dt,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:Wt},setup(e,{slots:t}){const n=Ee(()=>{const i={},{type:l,color:s,disabled:c,isActive:h,activeColor:p,inactiveColor:g}=e;s&&l==="card"&&(i.borderColor=s,c||(h?i.backgroundColor=s:i.color=s));const b=h?p:g;return b&&(i.color=b),i}),r=()=>{const i=j("span",{class:Ky("text",{ellipsis:!e.scrollable})},[t.title?t.title():e.title]);return e.dot||wn(e.badge)&&e.badge!==""?j(E5,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[i]}):i};return()=>j("div",{id:e.id,role:"tab",class:[Ky([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:n.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[r()])}});const[M5,Cp]=At("swipe"),B8={loop:Wt,width:dt,height:dt,vertical:Boolean,autoplay:sr(0),duration:sr(500),touchable:Wt,lazyRender:Boolean,initialSwipe:sr(0),indicatorColor:String,showIndicators:Wt,stopPropagation:Wt},N5=Symbol(M5);var U8=$e({name:M5,props:B8,emits:["change","dragStart","dragEnd"],setup(e,{emit:t,slots:n}){const r=ke(),i=ke(),l=na({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let s=!1;const c=sd(),{children:h,linkChildren:p}=Du(N5),g=Ee(()=>h.length),_=Ee(()=>l[e.vertical?"height":"width"]),b=Ee(()=>e.vertical?c.deltaY.value:c.deltaX.value),x=Ee(()=>l.rect?(e.vertical?l.rect.height:l.rect.width)-_.value*g.value:0),k=Ee(()=>_.value?Math.ceil(Math.abs(x.value)/_.value):g.value),T=Ee(()=>g.value*_.value),P=Ee(()=>(l.active+g.value)%g.value),A=Ee(()=>{const ce=e.vertical?"vertical":"horizontal";return c.direction.value===ce}),L=Ee(()=>{const ce={transitionDuration:`${l.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${l.offset}px)`};if(_.value){const Ae=e.vertical?"height":"width",De=e.vertical?"width":"height";ce[Ae]=`${T.value}px`,ce[De]=e[De]?`${e[De]}px`:""}return ce}),F=ce=>{const{active:Ae}=l;return ce?e.loop?Fs(Ae+ce,-1,g.value):Fs(Ae+ce,0,k.value):Ae},N=(ce,Ae=0)=>{let De=ce*_.value;e.loop||(De=Math.min(De,-x.value));let ae=Ae-De;return e.loop||(ae=Fs(ae,x.value,0)),ae},W=({pace:ce=0,offset:Ae=0,emitChange:De})=>{if(g.value<=1)return;const{active:ae}=l,we=F(ce),Q=N(we,Ae);if(e.loop){if(h[0]&&Q!==x.value){const Re=Q<x.value;h[0].setOffset(Re?T.value:0)}if(h[g.value-1]&&Q!==0){const Re=Q>0;h[g.value-1].setOffset(Re?-T.value:0)}}l.active=we,l.offset=Q,De&&we!==ae&&t("change",P.value)},te=()=>{l.swiping=!0,l.active<=-1?W({pace:g.value}):l.active>=g.value&&W({pace:-g.value})},G=()=>{te(),c.reset(),mf(()=>{l.swiping=!1,W({pace:-1,emitChange:!0})})},K=()=>{te(),c.reset(),mf(()=>{l.swiping=!1,W({pace:1,emitChange:!0})})};let re;const H=()=>clearTimeout(re),J=()=>{H(),+e.autoplay>0&&g.value>1&&(re=setTimeout(()=>{K(),J()},+e.autoplay))},ie=(ce=+e.initialSwipe)=>{if(!r.value)return;const Ae=()=>{var De,ae;if(!e0(r)){const we={width:r.value.offsetWidth,height:r.value.offsetHeight};l.rect=we,l.width=+((De=e.width)!=null?De:we.width),l.height=+((ae=e.height)!=null?ae:we.height)}g.value&&(ce=Math.min(g.value-1,ce),ce===-1&&(ce=g.value-1)),l.active=ce,l.swiping=!0,l.offset=N(ce),h.forEach(we=>{we.setOffset(0)}),J()};e0(r)?Sn().then(Ae):Ae()},oe=()=>ie(l.active);let le;const $=ce=>{!e.touchable||ce.touches.length>1||(c.start(ce),s=!1,le=Date.now(),H(),te())},Y=ce=>{e.touchable&&l.swiping&&(c.move(ce),A.value&&(!e.loop&&(l.active===0&&b.value>0||l.active===g.value-1&&b.value<0)||(oi(ce,e.stopPropagation),W({offset:b.value}),s||(t("dragStart",{index:P.value}),s=!0))))},z=()=>{if(!e.touchable||!l.swiping)return;const ce=Date.now()-le,Ae=b.value/ce;if((Math.abs(Ae)>.25||Math.abs(b.value)>_.value/2)&&A.value){const ae=e.vertical?c.offsetY.value:c.offsetX.value;let we=0;e.loop?we=ae>0?b.value>0?-1:1:0:we=-Math[b.value>0?"ceil":"floor"](b.value/_.value),W({pace:we,emitChange:!0})}else b.value&&W({pace:0});s=!1,l.swiping=!1,t("dragEnd",{index:P.value}),J()},V=(ce,Ae={})=>{te(),c.reset(),mf(()=>{let De;e.loop&&ce===g.value?De=l.active===0?0:ce:De=ce%g.value,Ae.immediate?mf(()=>{l.swiping=!1}):l.swiping=!1,W({pace:De-l.active,emitChange:!0})})},ue=(ce,Ae)=>{const De=Ae===P.value,ae=De?{backgroundColor:e.indicatorColor}:void 0;return j("i",{style:ae,class:Cp("indicator",{active:De})},null)},xe=()=>{if(n.indicator)return n.indicator({active:P.value,total:g.value});if(e.showIndicators&&g.value>1)return j("div",{class:Cp("indicators",{vertical:e.vertical})},[Array(g.value).fill("").map(ue)])};return Fa({prev:G,next:K,state:l,resize:oe,swipeTo:V}),p({size:_,props:e,count:g,activeIndicator:P}),at(()=>e.initialSwipe,ce=>ie(+ce)),at(g,()=>ie(l.active)),at(()=>e.autoplay,J),at([R0,Q1],oe),at(uE(),ce=>{ce==="visible"?J():H()}),Na(ie),rd(()=>ie(l.active)),r_(()=>ie(l.active)),Lu(H),A0(H),li("touchmove",Y,{target:i}),()=>{var ce;return j("div",{ref:r,class:Cp()},[j("div",{ref:i,style:L.value,class:Cp("track",{vertical:e.vertical}),onTouchstartPassive:$,onTouchend:z,onTouchcancel:z},[(ce=n.default)==null?void 0:ce.call(n)]),xe()])}}});const V8=Qt(U8),[H8,Zy]=At("tabs");var z8=$e({name:H8,props:{count:$o(Number),inited:Boolean,animated:Boolean,duration:$o(dt),swipeable:Boolean,lazyRender:Boolean,currentIndex:$o(Number)},emits:["change"],setup(e,{emit:t,slots:n}){const r=ke(),i=c=>t("change",c),l=()=>{var c;const h=(c=n.default)==null?void 0:c.call(n);return e.animated||e.swipeable?j(V8,{ref:r,loop:!1,class:Zy("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:i},{default:()=>[h]}):h},s=c=>{const h=r.value;h&&h.state.active!==c&&h.swipeTo(c,{immediate:!e.inited})};return at(()=>e.currentIndex,s),Na(()=>{s(e.currentIndex)}),Fa({swipeRef:r}),()=>j("div",{class:Zy("content",{animated:e.animated||e.swipeable})},[l()])}});const[F5,Tp]=At("tabs"),j8={type:Bt("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:sr(0),duration:sr(.3),animated:Boolean,ellipsis:Wt,swipeable:Boolean,scrollspy:Boolean,offsetTop:sr(0),background:String,lazyRender:Wt,lineWidth:dt,lineHeight:dt,beforeChange:Function,swipeThreshold:sr(5),titleActiveColor:String,titleInactiveColor:String},$5=Symbol(F5);var G8=$e({name:F5,props:j8,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:t,slots:n}){let r,i,l;const s=ke(),c=ke(),h=ke(),p=ke(),g=o_(),_=p5(s),[b,x]=I8(),{children:k,linkChildren:T}=Du($5),P=na({inited:!1,position:"",lineStyle:{},currentIndex:-1}),A=Ee(()=>k.length>+e.swipeThreshold||!e.ellipsis||e.shrink),L=Ee(()=>({borderColor:e.color,background:e.background})),F=(ae,we)=>{var Q;return(Q=ae.name)!=null?Q:we},N=Ee(()=>{const ae=k[P.currentIndex];if(ae)return F(ae,P.currentIndex)}),W=Ee(()=>t_(e.offsetTop)),te=Ee(()=>e.sticky?W.value+r:0),G=ae=>{const we=c.value,Q=b.value;if(!A.value||!we||!Q||!Q[P.currentIndex])return;const Re=Q[P.currentIndex].$el,Me=Re.offsetLeft-(we.offsetWidth-Re.offsetWidth)/2;A8(we,Me,ae?0:+e.duration)},K=()=>{const ae=P.inited;Sn(()=>{const we=b.value;if(!we||!we[P.currentIndex]||e.type!=="line"||e0(s.value))return;const Q=we[P.currentIndex].$el,{lineWidth:Re,lineHeight:Me}=e,Ke=Q.offsetLeft+Q.offsetWidth/2,it={width:Jn(Re),backgroundColor:e.color,transform:`translateX(${Ke}px) translateX(-50%)`};if(ae&&(it.transitionDuration=`${e.duration}s`),wn(Me)){const ht=Jn(Me);it.height=ht,it.borderRadius=ht}P.lineStyle=it})},re=ae=>{const we=ae<P.currentIndex?-1:1;for(;ae>=0&&ae<k.length;){if(!k[ae].disabled)return ae;ae+=we}},H=(ae,we)=>{const Q=re(ae);if(!wn(Q))return;const Re=k[Q],Me=F(Re,Q),Ke=P.currentIndex!==null;P.currentIndex!==Q&&(P.currentIndex=Q,we||G(),K()),Me!==e.active&&(t("update:active",Me),Ke&&t("change",Me,Re.title)),l&&!e.scrollspy&&J1(Math.ceil(My(s.value)-W.value))},J=(ae,we)=>{const Q=k.find((Me,Ke)=>F(Me,Ke)===ae),Re=Q?k.indexOf(Q):0;H(Re,we)},ie=(ae=!1)=>{if(e.scrollspy){const we=k[P.currentIndex].$el;if(we&&_.value){const Q=My(we,_.value)-te.value;i=!0,P8(_.value,Q,ae?0:+e.duration,()=>{i=!1})}}},oe=(ae,we,Q)=>{const{title:Re,disabled:Me}=k[we],Ke=F(k[we],we);Me||(n_(e.beforeChange,{args:[Ke],done:()=>{H(we),ie()}}),x5(ae)),t("clickTab",{name:Ke,title:Re,event:Q,disabled:Me})},le=ae=>{l=ae.isFixed,t("scroll",ae)},$=ae=>{Sn(()=>{J(ae),ie(!0)})},Y=()=>{for(let ae=0;ae<k.length;ae++){const{top:we}=Hi(k[ae].$el);if(we>te.value)return ae===0?0:ae-1}return k.length-1},z=()=>{if(e.scrollspy&&!i){const ae=Y();H(ae)}},V=()=>k.map((ae,we)=>j($8,xn({key:ae.id,id:`${g}-${we}`,ref:x(we),type:e.type,color:e.color,style:ae.titleStyle,class:ae.titleClass,shrink:e.shrink,isActive:we===P.currentIndex,controls:ae.id,scrollable:A.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:Q=>oe(ae,we,Q)},Vs(ae,["dot","badge","title","disabled","showZeroBadge"])),{title:ae.$slots.title})),ue=()=>{if(e.type==="line"&&k.length)return j("div",{class:Tp("line"),style:P.lineStyle},null)},xe=()=>{var ae,we,Q;const{type:Re,border:Me,sticky:Ke}=e,it=[j("div",{ref:Ke?void 0:h,class:[Tp("wrap"),{[y5]:Re==="line"&&Me}]},[j("div",{ref:c,role:"tablist",class:Tp("nav",[Re,{shrink:e.shrink,complete:A.value}]),style:L.value,"aria-orientation":"horizontal"},[(ae=n["nav-left"])==null?void 0:ae.call(n),V(),ue(),(we=n["nav-right"])==null?void 0:we.call(n)])]),(Q=n["nav-bottom"])==null?void 0:Q.call(n)];return Ke?j("div",{ref:h},[it]):it};at([()=>e.color,R0],K),at(()=>e.active,ae=>{ae!==N.value&&J(ae)}),at(()=>k.length,()=>{P.inited&&(J(e.active),K(),Sn(()=>{G(!0)}))});const ce=()=>{J(e.active,!0),Sn(()=>{P.inited=!0,h.value&&(r=Hi(h.value).height),G(!0)})},Ae=(ae,we)=>t("rendered",ae,we);return Fa({resize:()=>{K(),Sn(()=>{var ae,we;return(we=(ae=p.value)==null?void 0:ae.swipeRef.value)==null?void 0:we.resize()})},scrollTo:$}),rd(K),r_(K),I0(ce),D5(s,K),li("scroll",z,{target:_,passive:!0}),T({id:g,props:e,setLine:K,onRendered:Ae,currentName:N,scrollIntoView:G}),()=>j("div",{ref:s,class:Tp([e.type])},[e.sticky?j(N8,{container:s.value,offsetTop:W.value,onScroll:le},{default:()=>[xe()]}):xe(),j(z8,{ref:p,count:k.length,inited:P.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:P.currentIndex,onChange:H},{default:()=>{var ae;return[(ae=n.default)==null?void 0:ae.call(n)]}})])}});const B5=Symbol(),aG=()=>Iu(B5,null),[W8,q8]=At("swipe-item");var Y8=$e({name:W8,setup(e,{slots:t}){let n;const r=na({offset:0,inited:!1,mounted:!1}),{parent:i,index:l}=Ws(N5);if(!i)return;const s=Ee(()=>{const p={},{vertical:g}=i.props;return i.size.value&&(p[g?"height":"width"]=`${i.size.value}px`),r.offset&&(p.transform=`translate${g?"Y":"X"}(${r.offset}px)`),p}),c=Ee(()=>{const{loop:p,lazyRender:g}=i.props;if(!g||n)return!0;if(!r.mounted)return!1;const _=i.activeIndicator.value,b=i.count.value-1,x=_===0&&p?b:_-1,k=_===b&&p?0:_+1;return n=l.value===_||l.value===x||l.value===k,n}),h=p=>{r.offset=p};return Na(()=>{Sn(()=>{r.mounted=!0})}),Fa({setOffset:h}),()=>{var p;return j("div",{class:q8(),style:s.value},[c.value?(p=t.default)==null?void 0:p.call(t):null])}}});const K8=Qt(Y8),[Z8,Ev]=At("tab"),J8=Xt({},O0,{dot:Boolean,name:dt,badge:dt,title:String,disabled:Boolean,titleClass:mr,titleStyle:[String,Object],showZeroBadge:Wt});var X8=$e({name:Z8,props:J8,setup(e,{slots:t}){const n=o_(),r=ke(!1),{parent:i,index:l}=Ws($5);if(!i)return;const s=()=>{var g;return(g=e.name)!=null?g:l.value},c=()=>{r.value=!0,i.props.lazyRender&&Sn(()=>{i.onRendered(s(),e.title)})},h=Ee(()=>{const g=s()===i.currentName.value;return g&&!r.value&&c(),g}),p=ke(!h.value);return at(h,g=>{g?p.value=!1:mf(()=>{p.value=!0})}),at(()=>e.title,()=>{i.setLine(),i.scrollIntoView()}),nd(B5,h),()=>{var g;const _=`${i.id}-${l.value}`,{animated:b,swipeable:x,scrollspy:k,lazyRender:T}=i.props;if(!t.default&&!b)return;const P=k||h.value;if(b||x)return j(K8,{id:n,role:"tabpanel",class:Ev("panel-wrapper",{inactive:p.value}),tabindex:h.value?0:-1,"aria-hidden":!h.value,"aria-labelledby":_},{default:()=>{var F;return[j("div",{class:Ev("panel")},[(F=t.default)==null?void 0:F.call(t)])]}});const L=r.value||k||!T?(g=t.default)==null?void 0:g.call(t):null;return Fa({id:n}),P0(j("div",{id:n,role:"tabpanel",class:Ev("panel"),tabindex:P?0:-1,"aria-labelledby":_},[L]),[[L0,P]])}}});const Q8=Qt(X8),ek=Qt(G8),[U5,kv]=At("picker-group"),V5=Symbol(U5),tk=Xt({tabs:Qp(),nextStepText:String},D0);$e({name:U5,props:tk,emits:["confirm","cancel"],setup(e,{emit:t,slots:n}){const r=ke(0),{children:i,linkChildren:l}=Du(V5);l();const s=()=>r.value<e.tabs.length-1&&e.nextStepText,c=()=>{s()?r.value++:t("confirm",i.map(p=>p.confirm()))},h=()=>t("cancel");return()=>{var p;const g=(p=n.default)==null?void 0:p.call(n),_=s()?e.nextStepText:e.confirmButtonText;return j("div",{class:kv()},[j(O5,{title:e.title,cancelButtonText:e.cancelButtonText,confirmButtonText:_,onConfirm:c,onCancel:h},Vs(n,R5)),j(ek,{active:r.value,"onUpdate:active":b=>r.value=b,class:kv("tabs"),shrink:!0,animated:!0,lazyRender:!1},{default:()=>[e.tabs.map((b,x)=>j(Q8,{title:b,titleClass:kv("tab-title")},{default:()=>[g==null?void 0:g[x]]}))]})])}}});const nk=Xt({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:sr(44),showToolbar:Wt,swipeDuration:sr(1e3),visibleOptionNum:sr(6)},D0),rk=Xt({},nk,{columns:Qp(),modelValue:Qp(),toolbarPosition:Bt("top"),columnsFieldNames:Object});var ak=$e({name:y8,props:rk,emits:["confirm","cancel","change","clickOption","update:modelValue"],setup(e,{emit:t,slots:n}){const r=ke(),i=ke(e.modelValue.slice(0)),{parent:l}=Ws(V5),{children:s,linkChildren:c}=Du(I5);c();const h=Ee(()=>x8(e.columnsFieldNames)),p=Ee(()=>t_(e.optionHeight)),g=Ee(()=>b8(e.columns,h.value)),_=Ee(()=>{const{columns:J}=e;switch(g.value){case"multiple":return J;case"cascade":return w8(J,h.value,i);default:return[J]}}),b=Ee(()=>_.value.some(J=>J.length)),x=Ee(()=>_.value.map((J,ie)=>t1(J,i.value[ie],h.value))),k=Ee(()=>_.value.map((J,ie)=>J.findIndex(oe=>oe[h.value.value]===i.value[ie]))),T=(J,ie)=>{if(i.value[J]!==ie){const oe=i.value.slice(0);oe[J]=ie,i.value=oe}},P=()=>({selectedValues:i.value.slice(0),selectedOptions:x.value,selectedIndexes:k.value}),A=(J,ie)=>{T(ie,J),g.value==="cascade"&&i.value.forEach((oe,le)=>{const $=_.value[le];Wy($,oe,h.value)||T(le,$.length?$[0][h.value.value]:void 0)}),Sn(()=>{t("change",Xt({columnIndex:ie},P()))})},L=(J,ie)=>t("clickOption",Xt({columnIndex:ie,currentOption:J},P())),F=()=>{s.forEach(ie=>ie.stopMomentum());const J=P();return Sn(()=>{t("confirm",J)}),J},N=()=>t("cancel",P()),W=()=>_.value.map((J,ie)=>j(k8,{value:i.value[ie],fields:h.value,options:J,readonly:e.readonly,allowHtml:e.allowHtml,optionHeight:p.value,swipeDuration:e.swipeDuration,visibleOptionNum:e.visibleOptionNum,onChange:oe=>A(oe,ie),onClickOption:oe=>L(oe,ie)},{option:n.option})),te=J=>{if(b.value){const ie={height:`${p.value}px`},oe={backgroundSize:`100% ${(J-p.value)/2}px`};return[j("div",{class:Bi("mask"),style:oe},null),j("div",{class:[LE,Bi("frame")],style:ie},null)]}},G=()=>{const J=p.value*+e.visibleOptionNum,ie={height:`${J}px`};return j("div",{ref:r,class:Bi("columns"),style:ie},[W(),te(J)])},K=()=>{if(e.showToolbar&&!l)return j(O5,xn(Vs(e,T8),{onConfirm:F,onCancel:N}),Vs(n,R5))};at(_,J=>{J.forEach((ie,oe)=>{ie.length&&!Wy(ie,i.value[oe],h.value)&&T(oe,P5(ie)[h.value.value])})},{immediate:!0});let re;return at(()=>e.modelValue,J=>{!xf(J,i.value)&&!xf(J,re)&&(i.value=J.slice(0),re=J.slice(0))},{deep:!0}),at(i,J=>{xf(J,e.modelValue)||(re=J.slice(0),t("update:modelValue",re))},{immediate:!0}),li("touchmove",oi,{target:r}),Fa({confirm:F,getSelectedOptions:()=>x.value}),()=>{var J,ie;return j("div",{class:Bi()},[e.toolbarPosition==="top"?K():null,e.loading?j(od,{class:Bi("loading")},null):null,(J=n["columns-top"])==null?void 0:J.call(n),G(),(ie=n["columns-bottom"])==null?void 0:ie.call(n),e.toolbarPosition==="bottom"?K():null])}}});const s_=Qt(ak),[ik,ou]=At("cell"),H5={tag:Bt("div"),icon:String,size:String,title:dt,value:dt,label:dt,center:Boolean,isLink:Boolean,border:Wt,required:Boolean,iconPrefix:String,valueClass:mr,labelClass:mr,titleClass:mr,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},ok=Xt({},H5,O0);var sk=$e({name:ik,props:ok,setup(e,{slots:t}){const n=a_(),r=()=>{if(t.label||wn(e.label))return j("div",{class:[ou("label"),e.labelClass]},[t.label?t.label():e.label])},i=()=>{var h;if(t.title||wn(e.title)){const p=(h=t.title)==null?void 0:h.call(t);return Array.isArray(p)&&p.length===0?void 0:j("div",{class:[ou("title"),e.titleClass],style:e.titleStyle},[p||j("span",null,[e.title]),r()])}},l=()=>{const h=t.value||t.default;if(h||wn(e.value))return j("div",{class:[ou("value"),e.valueClass]},[h?h():j("span",null,[e.value])])},s=()=>{if(t.icon)return t.icon();if(e.icon)return j(zi,{name:e.icon,class:ou("left-icon"),classPrefix:e.iconPrefix},null)},c=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const h=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return j(zi,{name:h,class:ou("right-icon")},null)}};return()=>{var h;const{tag:p,size:g,center:_,border:b,isLink:x,required:k}=e,T=(h=e.clickable)!=null?h:x,P={center:_,required:k,clickable:T,borderless:!b};return g&&(P[g]=!!g),j(p,{class:ou(P),role:T?"button":void 0,tabindex:T?0:void 0,onClick:n},{default:()=>{var A;return[s(),i(),l(),c(),(A=t.extra)==null?void 0:A.call(t)]}})}}});const Vn=Qt(sk);function z5(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function lk(e,t){if(z5(e)){if(t.required)return!1;if(t.validateEmpty===!1)return!0}return!(t.pattern&&!t.pattern.test(String(e)))}function uk(e,t){return new Promise(n=>{const r=t.validator(e,t);if(c5(r)){r.then(n);return}n(r)})}function Jy(e,t){const{message:n}=t;return Nf(n)?n(e,t):n||""}function ck({target:e}){e.composing=!0}function Xy({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function fk(e,t){const n=Z1();e.style.height="auto";let r=e.scrollHeight;if(id(t)){const{maxHeight:i,minHeight:l}=t;i!==void 0&&(r=Math.min(r,i)),l!==void 0&&(r=Math.max(r,l))}r&&(e.style.height=`${r}px`,J1(n))}function dk(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function Mi(e){return[...e].length}function Cv(e,t){return[...e].slice(0,t).join("")}const[hk,da]=At("field"),pk={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:dt,formatter:Function,clearIcon:Bt("clear"),modelValue:sr(""),inputAlign:String,placeholder:String,autocomplete:String,errorMessage:String,enterkeyhint:String,clearTrigger:Bt("focus"),formatTrigger:Bt("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},gk=Xt({},H5,pk,{rows:dt,type:Bt("text"),rules:Array,autosize:[Boolean,Object],labelWidth:dt,labelClass:mr,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var mk=$e({name:hk,props:gk,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:t,slots:n}){const r=o_(),i=na({status:"unvalidated",focused:!1,validateMessage:""}),l=ke(),s=ke(),c=ke(),{parent:h}=Ws(IE),p=()=>{var Q;return String((Q=e.modelValue)!=null?Q:"")},g=Q=>{if(wn(e[Q]))return e[Q];if(h&&wn(h.props[Q]))return h.props[Q]},_=Ee(()=>{const Q=g("readonly");if(e.clearable&&!Q){const Re=p()!=="",Me=e.clearTrigger==="always"||e.clearTrigger==="focus"&&i.focused;return Re&&Me}return!1}),b=Ee(()=>c.value&&n.input?c.value():e.modelValue),x=Q=>Q.reduce((Re,Me)=>Re.then(()=>{if(i.status==="failed")return;let{value:Ke}=b;if(Me.formatter&&(Ke=Me.formatter(Ke,Me)),!lk(Ke,Me)){i.status="failed",i.validateMessage=Jy(Ke,Me);return}if(Me.validator)return z5(Ke)&&Me.validateEmpty===!1?void 0:uk(Ke,Me).then(it=>{it&&typeof it=="string"?(i.status="failed",i.validateMessage=it):it===!1&&(i.status="failed",i.validateMessage=Jy(Ke,Me))})}),Promise.resolve()),k=()=>{i.status="unvalidated",i.validateMessage=""},T=()=>t("endValidate",{status:i.status,message:i.validateMessage}),P=(Q=e.rules)=>new Promise(Re=>{k(),Q?(t("startValidate"),x(Q).then(()=>{i.status==="failed"?(Re({name:e.name,message:i.validateMessage}),T()):(i.status="passed",Re(),T())})):Re()}),A=Q=>{if(h&&e.rules){const{validateTrigger:Re}=h.props,Me=Ry(Re).includes(Q),Ke=e.rules.filter(it=>it.trigger?Ry(it.trigger).includes(Q):Me);Ke.length&&P(Ke)}},L=Q=>{var Re;const{maxlength:Me}=e;if(wn(Me)&&Mi(Q)>+Me){const Ke=p();if(Ke&&Mi(Ke)===+Me)return Ke;const it=(Re=l.value)==null?void 0:Re.selectionEnd;if(i.focused&&it){const ht=[...Q],un=ht.length-+Me;return ht.splice(it-un,un),ht.join("")}return Cv(Q,+Me)}return Q},F=(Q,Re="onChange")=>{const Me=Q;Q=L(Q);const Ke=Mi(Me)-Mi(Q);if(e.type==="number"||e.type==="digit"){const ht=e.type==="number";Q=_E(Q,ht,ht)}let it=0;if(e.formatter&&Re===e.formatTrigger){const{formatter:ht,maxlength:un}=e;if(Q=ht(Q),wn(un)&&Mi(Q)>+un&&(Q=Cv(Q,+un)),l.value&&i.focused){const{selectionEnd:jr}=l.value,xt=Cv(Me,jr);it=Mi(ht(xt))-Mi(xt)}}if(l.value&&l.value.value!==Q)if(i.focused){let{selectionStart:ht,selectionEnd:un}=l.value;if(l.value.value=Q,wn(ht)&&wn(un)){const jr=Mi(Q);Ke?(ht-=Ke,un-=Ke):it&&(ht+=it,un+=it),l.value.setSelectionRange(Math.min(ht,jr),Math.min(un,jr))}}else l.value.value=Q;Q!==e.modelValue&&t("update:modelValue",Q)},N=Q=>{Q.target.composing||F(Q.target.value)},W=()=>{var Q;return(Q=l.value)==null?void 0:Q.blur()},te=()=>{var Q;return(Q=l.value)==null?void 0:Q.focus()},G=()=>{const Q=l.value;e.type==="textarea"&&e.autosize&&Q&&fk(Q,e.autosize)},K=Q=>{i.focused=!0,t("focus",Q),Sn(G),g("readonly")&&W()},re=Q=>{g("readonly")||(i.focused=!1,F(p(),"onBlur"),t("blur",Q),A("onBlur"),Sn(G),fE())},H=Q=>t("clickInput",Q),J=Q=>t("clickLeftIcon",Q),ie=Q=>t("clickRightIcon",Q),oe=Q=>{oi(Q),t("update:modelValue",""),t("clear",Q)},le=Ee(()=>{if(typeof e.error=="boolean")return e.error;if(h&&h.props.showError&&i.status==="failed")return!0}),$=Ee(()=>{const Q=g("labelWidth");if(Q)return{width:Jn(Q)}}),Y=Q=>{Q.keyCode===13&&(!(h&&h.props.submitOnEnter)&&e.type!=="textarea"&&oi(Q),e.type==="search"&&W()),t("keypress",Q)},z=()=>e.id||`${r}-input`,V=()=>i.status,ue=()=>{const Q=da("control",[g("inputAlign"),{error:le.value,custom:!!n.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(n.input)return j("div",{class:Q,onClick:H},[n.input()]);const Re={id:z(),ref:l,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:Q,disabled:g("disabled"),readonly:g("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,enterkeyhint:e.enterkeyhint,"aria-labelledby":e.label?`${r}-label`:void 0,onBlur:re,onFocus:K,onInput:N,onClick:H,onChange:Xy,onKeypress:Y,onCompositionend:Xy,onCompositionstart:ck};return e.type==="textarea"?j("textarea",Re,null):j("input",xn(dk(e.type),Re),null)},xe=()=>{const Q=n["left-icon"];if(e.leftIcon||Q)return j("div",{class:da("left-icon"),onClick:J},[Q?Q():j(zi,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},ce=()=>{const Q=n["right-icon"];if(e.rightIcon||Q)return j("div",{class:da("right-icon"),onClick:ie},[Q?Q():j(zi,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Ae=()=>{if(e.showWordLimit&&e.maxlength){const Q=Mi(p());return j("div",{class:da("word-limit")},[j("span",{class:da("word-num")},[Q]),Ho("/"),e.maxlength])}},De=()=>{if(h&&h.props.showErrorMessage===!1)return;const Q=e.errorMessage||i.validateMessage;if(Q){const Re=n["error-message"],Me=g("errorMessageAlign");return j("div",{class:da("error-message",Me)},[Re?Re({message:Q}):Q])}},ae=()=>{const Q=g("colon")?":":"";if(n.label)return[n.label(),Q];if(e.label)return j("label",{id:`${r}-label`,for:z()},[e.label+Q])},we=()=>[j("div",{class:da("body")},[ue(),_.value&&j(zi,{ref:s,name:e.clearIcon,class:da("clear")},null),ce(),n.button&&j("div",{class:da("button")},[n.button()])]),Ae(),De()];return Fa({blur:W,focus:te,validate:P,formValue:b,resetValidation:k,getValidationStatus:V}),nd(g5,{customValue:c,resetValidation:k,validateWithTrigger:A}),at(()=>e.modelValue,()=>{F(p()),k(),A("onChange"),Sn(G)}),Na(()=>{F(p(),e.formatTrigger),Sn(G)}),li("touchstart",oe,{target:Ee(()=>{var Q;return(Q=s.value)==null?void 0:Q.$el})}),()=>{const Q=g("disabled"),Re=g("labelAlign"),Me=xe(),Ke=()=>{const it=ae();return Re==="top"?[Me,it].filter(Boolean):it||[]};return j(Vn,{size:e.size,class:da({error:le.value,disabled:Q,[`label-${Re}`]:Re}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:$.value,valueClass:da("value"),titleClass:[da("label",[Re,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:Me&&Re!=="top"?()=>Me:null,title:Ke,value:we,extra:n.extra})}}});const j5=Qt(mk);let af=0;function vk(e){e?(af||document.body.classList.add("van-toast--unclickable"),af++):af&&(af--,af||document.body.classList.remove("van-toast--unclickable"))}const[_k,su]=At("toast"),yk=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],bk={icon:String,show:Boolean,type:Bt("text"),overlay:Boolean,message:dt,iconSize:dt,duration:tE(2e3),position:Bt("middle"),teleport:[String,Object],wordBreak:String,className:mr,iconPrefix:String,transition:Bt("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:mr,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var G5=$e({name:_k,props:bk,emits:["update:show"],setup(e,{emit:t,slots:n}){let r,i=!1;const l=()=>{const _=e.show&&e.forbidClick;i!==_&&(i=_,vk(i))},s=_=>t("update:show",_),c=()=>{e.closeOnClick&&s(!1)},h=()=>clearTimeout(r),p=()=>{const{icon:_,type:b,iconSize:x,iconPrefix:k,loadingType:T}=e;if(_||b==="success"||b==="fail")return j(zi,{name:_||b,size:x,class:su("icon"),classPrefix:k},null);if(b==="loading")return j(od,{class:su("loading"),size:x,type:T},null)},g=()=>{const{type:_,message:b}=e;if(n.message)return j("div",{class:su("text")},[n.message()]);if(wn(b)&&b!=="")return _==="html"?j("div",{key:0,class:su("text"),innerHTML:String(b)},null):j("div",{class:su("text")},[b])};return at(()=>[e.show,e.forbidClick],l),at(()=>[e.show,e.type,e.message,e.duration],()=>{h(),e.show&&e.duration>0&&(r=setTimeout(()=>{s(!1)},e.duration))}),Na(l),j1(l),()=>j(Nu,xn({class:[su([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:c,onClosed:h,"onUpdate:show":s},Vs(e,yk)),{default:()=>[p(),g()]})}});function W5(){const e=na({show:!1}),t=i=>{e.show=i},n=i=>{Xt(e,i,{transitionAppear:!0}),t(!0)},r=()=>t(!1);return Fa({open:n,close:r,toggle:t}),{open:n,close:r,state:e,toggle:t}}function q5(e){const t=e5(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}const wk={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let Ma=[],M0=!1,Qy=Xt({},wk);const Sk=new Map;function Y5(e){return id(e)?e:{message:e}}function xk(){const{instance:e,unmount:t}=q5({setup(){const n=ke(""),{open:r,state:i,close:l,toggle:s}=W5(),c=()=>{M0&&(Ma=Ma.filter(p=>p!==e),t())},h=()=>j(G5,xn(i,{onClosed:c,"onUpdate:show":s}),null);return at(n,p=>{i.message=p}),js().render=h,{open:r,close:l,message:n}}});return e}function Ek(){if(!Ma.length||M0){const e=xk();Ma.push(e)}return Ma[Ma.length-1]}function kf(e={}){if(!Ru)return{};const t=Ek(),n=Y5(e);return t.open(Xt({},Qy,Sk.get(n.type||Qy.type),n)),t}const l_=e=>t=>kf(Xt({type:e},Y5(t))),eb=l_("loading"),iG=l_("success"),oG=l_("fail"),kk=e=>{var t;Ma.length&&(e?(Ma.forEach(n=>{n.close()}),Ma=[]):M0?(t=Ma.shift())==null||t.close():Ma[0].close())},Ck=(e=!0)=>{M0=e},Tk=Qt(G5),[Ak,Tv]=At("switch"),Pk={size:dt,loading:Boolean,disabled:Boolean,modelValue:mr,activeColor:String,inactiveColor:String,activeValue:{type:mr,default:!0},inactiveValue:{type:mr,default:!1}};var Lk=$e({name:Ak,props:Pk,emits:["change","update:modelValue"],setup(e,{emit:t,slots:n}){const r=()=>e.modelValue===e.activeValue,i=()=>{if(!e.disabled&&!e.loading){const s=r()?e.inactiveValue:e.activeValue;t("update:modelValue",s),t("change",s)}},l=()=>{if(e.loading){const s=r()?e.activeColor:e.inactiveColor;return j(od,{class:Tv("loading"),color:s},null)}if(n.node)return n.node()};return Y1(()=>e.modelValue),()=>{var s;const{size:c,loading:h,disabled:p,activeColor:g,inactiveColor:_}=e,b=r(),x={fontSize:Jn(c),backgroundColor:b?g:_};return j("div",{role:"switch",class:Tv({on:b,loading:h,disabled:p}),style:x,tabindex:p?void 0:0,"aria-checked":b,onClick:i},[j("div",{class:Tv("node")},[l()]),(s=n.background)==null?void 0:s.call(n)])}}});const K5=Qt(Lk),[Z5,Ik]=At("radio-group"),Rk={disabled:Boolean,iconSize:dt,direction:String,modelValue:mr,checkedColor:String},J5=Symbol(Z5);var Ok=$e({name:Z5,props:Rk,emits:["change","update:modelValue"],setup(e,{emit:t,slots:n}){const{linkChildren:r}=Du(J5),i=l=>t("update:modelValue",l);return at(()=>e.modelValue,l=>t("change",l)),r({props:e,updateValue:i}),Y1(()=>e.modelValue),()=>{var l;return j("div",{class:Ik([e.direction]),role:"radiogroup"},[(l=n.default)==null?void 0:l.call(n)])}}});const Dk=Qt(Ok),X5={name:mr,shape:Bt("round"),disabled:Boolean,iconSize:dt,modelValue:mr,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var Mk=$e({props:Xt({},X5,{bem:$o(Function),role:String,parent:Object,checked:Boolean,bindGroup:Wt}),emits:["click","toggle"],setup(e,{emit:t,slots:n}){const r=ke(),i=_=>{if(e.parent&&e.bindGroup)return e.parent.props[_]},l=Ee(()=>i("disabled")||e.disabled),s=Ee(()=>i("direction")),c=Ee(()=>{const _=e.checkedColor||i("checkedColor");if(_&&e.checked&&!l.value)return{borderColor:_,backgroundColor:_}}),h=_=>{const{target:b}=_,x=r.value,k=x===b||(x==null?void 0:x.contains(b));!l.value&&(k||!e.labelDisabled)&&t("toggle"),t("click",_)},p=()=>{const{bem:_,shape:b,checked:x}=e,k=e.iconSize||i("iconSize");return j("div",{ref:r,class:_("icon",[b,{disabled:l.value,checked:x}]),style:{fontSize:Jn(k)}},[n.icon?n.icon({checked:x,disabled:l.value}):j(zi,{name:"success",style:c.value},null)])},g=()=>{if(n.default)return j("span",{class:e.bem("label",[e.labelPosition,{disabled:l.value}])},[n.default()])};return()=>{const _=e.labelPosition==="left"?[g(),p()]:[p(),g()];return j("div",{role:e.role,class:e.bem([{disabled:l.value,"label-disabled":e.labelDisabled},s.value]),tabindex:l.value?void 0:0,"aria-checked":e.checked,onClick:h},[_])}}});const[Nk,Fk]=At("radio");var $k=$e({name:Nk,props:X5,emits:["update:modelValue"],setup(e,{emit:t,slots:n}){const{parent:r}=Ws(J5),i=()=>(r?r.props.modelValue:e.modelValue)===e.name,l=()=>{r?r.updateValue(e.name):t("update:modelValue",e.name)};return()=>j(Mk,xn({bem:Fk,role:"radio",parent:r,checked:i(),onToggle:l},e),Vs(n,["default","icon"]))}});const Bk=Qt($k),[Uk,tb]=At("cell-group"),Vk={title:String,inset:Boolean,border:Wt};var Hk=$e({name:Uk,inheritAttrs:!1,props:Vk,setup(e,{slots:t,attrs:n}){const r=()=>{var l;return j("div",xn({class:[tb({inset:e.inset}),{[y5]:e.border&&!e.inset}]},n),[(l=t.default)==null?void 0:l.call(t)])},i=()=>j("div",{class:tb("title",{inset:e.inset})},[t.title?t.title():e.title]);return()=>e.title||t.title?j($n,null,[i(),r()]):r()}});const zk=Qt(Hk),Q5=Qt(GE),[jk,Ra,Ap]=At("dialog"),Gk=Xt({},i_,{title:String,theme:String,width:dt,message:[String,Function],callback:Function,allowHtml:Boolean,className:mr,transition:Bt("van-dialog-bounce"),messageAlign:String,closeOnPopstate:Wt,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:Wt,closeOnClickOverlay:Boolean}),Wk=[...l8,"transition","closeOnPopstate"];var ew=$e({name:jk,props:Gk,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:t,slots:n}){const r=ke(),i=na({confirm:!1,cancel:!1}),l=A=>t("update:show",A),s=A=>{var L;l(!1),(L=e.callback)==null||L.call(e,A)},c=A=>()=>{e.show&&(t(A),e.beforeClose?(i[A]=!0,n_(e.beforeClose,{args:[A],done(){s(A),i[A]=!1},canceled(){i[A]=!1}})):s(A))},h=c("cancel"),p=c("confirm"),g=vx(A=>{var L,F;if(A.target!==((F=(L=r.value)==null?void 0:L.popupRef)==null?void 0:F.value))return;({Enter:e.showConfirmButton?p:Jv,Escape:e.showCancelButton?h:Jv})[A.key](),t("keydown",A)},["enter","esc"]),_=()=>{const A=n.title?n.title():e.title;if(A)return j("div",{class:Ra("header",{isolated:!e.message&&!n.default})},[A])},b=A=>{const{message:L,allowHtml:F,messageAlign:N}=e,W=Ra("message",{"has-title":A,[N]:N}),te=Nf(L)?L():L;return F&&typeof te=="string"?j("div",{class:W,innerHTML:te},null):j("div",{class:W},[te])},x=()=>{if(n.default)return j("div",{class:Ra("content")},[n.default()]);const{title:A,message:L,allowHtml:F}=e;if(L){const N=!!(A||n.title);return j("div",{key:F?1:0,class:Ra("content",{isolated:!N})},[b(N)])}},k=()=>j("div",{class:[TE,Ra("footer")]},[e.showCancelButton&&j(si,{size:"large",text:e.cancelButtonText||Ap("cancel"),class:Ra("cancel"),style:{color:e.cancelButtonColor},loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:h},null),e.showConfirmButton&&j(si,{size:"large",text:e.confirmButtonText||Ap("confirm"),class:[Ra("confirm"),{[AE]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:p},null)]),T=()=>j(NE,{class:Ra("footer")},{default:()=>[e.showCancelButton&&j(Hy,{type:"warning",text:e.cancelButtonText||Ap("cancel"),class:Ra("cancel"),color:e.cancelButtonColor,loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:h},null),e.showConfirmButton&&j(Hy,{type:"danger",text:e.confirmButtonText||Ap("confirm"),class:Ra("confirm"),color:e.confirmButtonColor,loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:p},null)]}),P=()=>n.footer?n.footer():e.theme==="round-button"?T():k();return()=>{const{width:A,title:L,theme:F,message:N,className:W}=e;return j(Nu,xn({ref:r,role:"dialog",class:[Ra([F]),W],style:{width:Jn(A)},tabindex:0,"aria-labelledby":L||N,onKeydown:g,"onUpdate:show":l},Vs(e,Wk)),{default:()=>[_(),x(),P()]})}}});let $f;const qk={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let Yk=Xt({},qk);function Kk(){({instance:$f}=q5({setup(){const{state:t,toggle:n}=W5();return()=>j(ew,xn(t,{"onUpdate:show":n}),null)}}))}function Zk(e){return Ru?new Promise((t,n)=>{$f||Kk(),$f.open(Xt({},Yk,e,{callback:r=>{(r==="confirm"?t:n)(r)}}))}):Promise.resolve()}const Jk=e=>Zk(Xt({showCancelButton:!0},e)),sG=()=>{$f&&$f.toggle(!1)},Xk=Qt(ew),[Qk,Cf]=At("key"),eC=j("svg",{class:Cf("collapse-icon"),viewBox:"0 0 30 24"},[j("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"},null)]),tC=j("svg",{class:Cf("delete-icon"),viewBox:"0 0 32 22"},[j("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null)]);var Av=$e({name:Qk,props:{type:String,text:dt,color:String,wider:Boolean,large:Boolean,loading:Boolean},emits:["press"],setup(e,{emit:t,slots:n}){const r=ke(!1),i=sd(),l=p=>{i.start(p),r.value=!0},s=p=>{i.move(p),i.direction.value&&(r.value=!1)},c=p=>{r.value&&(n.default||oi(p),r.value=!1,t("press",e.text,e.type))},h=()=>{if(e.loading)return j(od,{class:Cf("loading-icon")},null);const p=n.default?n.default():e.text;switch(e.type){case"delete":return p||tC;case"extra":return p||eC;default:return p}};return()=>j("div",{class:Cf("wrapper",{wider:e.wider}),onTouchstartPassive:l,onTouchmovePassive:s,onTouchend:c,onTouchcancel:c},[j("div",{role:"button",tabindex:0,class:Cf([e.color,{large:e.large,active:r.value,delete:e.type==="delete"}])},[h()])])}});const[nC,To]=At("number-keyboard"),rC={show:Boolean,title:String,theme:Bt("default"),zIndex:dt,teleport:[String,Object],maxlength:sr(1/0),modelValue:Bt(""),transition:Wt,blurOnClose:Wt,showDeleteKey:Wt,randomKeyOrder:Boolean,closeButtonText:String,deleteButtonText:String,closeButtonLoading:Boolean,hideOnClickOutside:Wt,safeAreaInsetBottom:Wt,extraKey:{type:[String,Array],default:""}};function aC(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}var iC=$e({name:nC,inheritAttrs:!1,props:rC,emits:["show","hide","blur","input","close","delete","update:modelValue"],setup(e,{emit:t,slots:n,attrs:r}){const i=ke(),l=()=>{const P=Array(9).fill("").map((A,L)=>({text:L+1}));return e.randomKeyOrder&&aC(P),P},s=()=>[...l(),{text:e.extraKey,type:"extra"},{text:0},{text:e.showDeleteKey?e.deleteButtonText:"",type:e.showDeleteKey?"delete":""}],c=()=>{const P=l(),{extraKey:A}=e,L=Array.isArray(A)?A:[A];return L.length===1?P.push({text:0,wider:!0},{text:L[0],type:"extra"}):L.length===2&&P.push({text:L[0],type:"extra"},{text:0},{text:L[1],type:"extra"}),P},h=Ee(()=>e.theme==="custom"?c():s()),p=()=>{e.show&&t("blur")},g=()=>{t("close"),e.blurOnClose&&p()},_=()=>t(e.show?"show":"hide"),b=(P,A)=>{if(P===""){A==="extra"&&p();return}const L=e.modelValue;A==="delete"?(t("delete"),t("update:modelValue",L.slice(0,L.length-1))):A==="close"?g():L.length<+e.maxlength&&(t("input",P),t("update:modelValue",L+P))},x=()=>{const{title:P,theme:A,closeButtonText:L}=e,F=n["title-left"],N=L&&A==="default";if(P||N||F)return j("div",{class:To("header")},[F&&j("span",{class:To("title-left")},[F()]),P&&j("h2",{class:To("title")},[P]),N&&j("button",{type:"button",class:[To("close"),t0],onClick:g},[L])])},k=()=>h.value.map(P=>{const A={};return P.type==="delete"&&(A.default=n.delete),P.type==="extra"&&(A.default=n["extra-key"]),j(Av,{key:P.text,text:P.text,type:P.type,wider:P.wider,color:P.color,onPress:b},A)}),T=()=>{if(e.theme==="custom")return j("div",{class:To("sidebar")},[e.showDeleteKey&&j(Av,{large:!0,text:e.deleteButtonText,type:"delete",onPress:b},{delete:n.delete}),j(Av,{large:!0,text:e.closeButtonText,type:"close",color:"blue",loading:e.closeButtonLoading,onPress:b},null)])};return at(()=>e.show,P=>{e.transition||t(P?"show":"hide")}),e.hideOnClickOutside&&iE(i,p,{eventName:"touchstart"}),()=>{const P=x(),A=j(G1,{name:e.transition?"van-slide-up":""},{default:()=>[P0(j("div",xn({ref:i,style:e_(e.zIndex),class:To({unfit:!e.safeAreaInsetBottom,"with-title":!!P}),onAnimationend:_,onTouchstartPassive:X1},r),[P,j("div",{class:To("body")},[j("div",{class:To("keys")},[k()]),T()])]),[[L0,e.show]])]});return e.teleport?j(Q2,{to:e.teleport},{default:()=>[A]}):A}}});const oC=Qt(iC),[sC,of]=At("slider"),lC={min:sr(0),max:sr(100),step:sr(1),range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:dt,buttonSize:dt,activeColor:String,inactiveColor:String,modelValue:{type:[Number,Array],default:0}};var uC=$e({name:sC,props:lC,emits:["change","dragEnd","dragStart","update:modelValue"],setup(e,{emit:t,slots:n}){let r,i,l;const s=ke(),c=[ke(),ke()],h=ke(),p=sd(),g=Ee(()=>Number(e.max)-Number(e.min)),_=Ee(()=>{const H=e.vertical?"width":"height";return{background:e.inactiveColor,[H]:Jn(e.barHeight)}}),b=H=>e.range&&Array.isArray(H),x=()=>{const{modelValue:H,min:J}=e;return b(H)?`${(H[1]-H[0])*100/g.value}%`:`${(H-Number(J))*100/g.value}%`},k=()=>{const{modelValue:H,min:J}=e;return b(H)?`${(H[0]-Number(J))*100/g.value}%`:"0%"},T=Ee(()=>{const J={[e.vertical?"height":"width"]:x(),background:e.activeColor};h.value&&(J.transition="none");const ie=()=>e.vertical?e.reverse?"bottom":"top":e.reverse?"right":"left";return J[ie()]=k(),J}),P=H=>{const J=+e.min,ie=+e.max,oe=+e.step;H=Fs(H,J,ie);const le=Math.round((H-J)/oe)*oe;return yE(J,le)},A=H=>{var J,ie;const oe=(J=H[0])!=null?J:Number(e.min),le=(ie=H[1])!=null?ie:Number(e.max);return oe>le?[le,oe]:[oe,le]},L=(H,J)=>{b(H)?H=A(H).map(P):H=P(H),xf(H,e.modelValue)||t("update:modelValue",H),J&&!xf(H,l)&&t("change",H)},F=H=>{if(H.stopPropagation(),e.disabled||e.readonly)return;const{min:J,reverse:ie,vertical:oe,modelValue:le}=e,$=Hi(s),Y=()=>oe?ie?$.bottom-H.clientY:H.clientY-$.top:ie?$.right-H.clientX:H.clientX-$.left,z=oe?$.height:$.width,V=Number(J)+Y()/z*g.value;if(b(le)){const[ue,xe]=le,ce=(ue+xe)/2;V<=ce?L([V,xe],!0):L([ue,V],!0)}else L(V,!0)},N=H=>{e.disabled||e.readonly||(p.start(H),i=e.modelValue,b(i)?l=i.map(P):l=P(i),h.value="start")},W=H=>{if(e.disabled||e.readonly)return;h.value==="start"&&t("dragStart",H),oi(H,!0),p.move(H),h.value="dragging";const J=Hi(s),ie=e.vertical?p.deltaY.value:p.deltaX.value,oe=e.vertical?J.height:J.width;let le=ie/oe*g.value;if(e.reverse&&(le=-le),b(l)){const $=e.reverse?1-r:r;i[$]=l[$]+le}else i=l+le;L(i)},te=H=>{e.disabled||e.readonly||(h.value==="dragging"&&(L(i,!0),t("dragEnd",H)),h.value="")},G=H=>typeof H=="number"?of("button-wrapper",["left","right"][H]):of("button-wrapper",e.reverse?"left":"right"),K=(H,J)=>{if(typeof J=="number"){const ie=n[J===0?"left-button":"right-button"];if(ie)return ie({value:H})}return n.button?n.button({value:H}):j("div",{class:of("button"),style:m5(e.buttonSize)},null)},re=H=>{const J=typeof H=="number"?e.modelValue[H]:e.modelValue;return j("div",{ref:c[H??0],role:"slider",class:G(H),tabindex:e.disabled?void 0:0,"aria-valuemin":e.min,"aria-valuenow":J,"aria-valuemax":e.max,"aria-disabled":e.disabled||void 0,"aria-readonly":e.readonly||void 0,"aria-orientation":e.vertical?"vertical":"horizontal",onTouchstartPassive:ie=>{typeof H=="number"&&(r=H),N(ie)},onTouchend:te,onTouchcancel:te,onClick:X1},[K(J,H)])};return L(e.modelValue),Y1(()=>e.modelValue),c.forEach(H=>{li("touchmove",W,{target:H})}),()=>j("div",{ref:s,style:_.value,class:of({vertical:e.vertical,disabled:e.disabled}),onClick:F},[j("div",{class:of("bar"),style:T.value},[e.range?[re(0),re(1)]:re()])])}});const tw=Qt(uC),[nb,cC]=At("space"),fC={align:String,direction:{type:String,default:"horizontal"},size:{type:[Number,String,Array],default:8},wrap:Boolean,fill:Boolean};function nw(e=[]){const t=[];return e.forEach(n=>{Array.isArray(n)?t.push(...n):n.type===$n?t.push(...nw(n.children)):t.push(n)}),t.filter(n=>{var r;return!(n&&(n.type===_x||n.type===$n&&((r=n.children)==null?void 0:r.length)===0||n.type===yx&&n.children.trim()===""))})}var dC=$e({name:nb,props:fC,setup(e,{slots:t}){const n=Ee(()=>{var l;return(l=e.align)!=null?l:e.direction==="horizontal"?"center":""}),r=l=>typeof l=="number"?l+"px":l,i=l=>{const s={},c=`${r(Array.isArray(e.size)?e.size[0]:e.size)}`,h=`${r(Array.isArray(e.size)?e.size[1]:e.size)}`;return l?e.wrap?{marginBottom:h}:{}:(e.direction==="horizontal"&&(s.marginRight=c),(e.direction==="vertical"||e.wrap)&&(s.marginBottom=h),s)};return()=>{var l;const s=nw((l=t.default)==null?void 0:l.call(t));return j("div",{class:[cC({[e.direction]:e.direction,[`align-${n.value}`]:n.value,wrap:e.wrap,fill:e.fill})]},[s.map((c,h)=>j("div",{key:`item-${h}`,class:`${nb}-item`,style:i(h===s.length-1)},[c]))])}}});const hC=Qt(dC);const pC=["xlink:href"],gC=$e({__name:"SvgIcon",props:{prefix:null,color:null,size:null,name:null},setup(e){return(t,n)=>(He(),dn("svg",xn({"aria-hidden":"true",style:{"--svg-size":e.size||"24px","--svg-color":e.color}},t.$attrs),[Jt("use",{"xlink:href":`#${e.prefix??"icon"}-${e.name}`,fill:"currentColor"},null,8,pC)],16))}});const $a=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},qs=$a(gC,[["__scopeId","data-v-029770ef"]]),mC={key:0},vC=$e({__name:"WidgetButtonGroups",props:{name:null,label:null,value:null,handler:null,childs:null},setup(e){const t=e,{t:n}=Un(),r=i=>{console.log(i),t.handler(i)};return(i,l)=>{const s=qs,c=si,h=Vn;return He(),Ct(h,{center:""},{title:Ge(()=>[Jt("span",null,an(be(n)(e.label)),1)]),extra:Ge(()=>[(He(!0),dn($n,null,Df(e.childs,p=>{var g,_;return He(),Ct(c,{key:p.name,type:(g=p.widgetAttrs)!=null&&g.disabled?"default":"primary",plain:"",size:"small",loading:p.running,disabled:(_=p.widgetAttrs)==null?void 0:_.disabled,style:{"margin-left":"10px"},onClick:b=>r(p.name)},{default:Ge(()=>{var b,x;return[(b=p.widgetAttrs)!=null&&b.label?(He(),dn("span",mC,an(be(n)(p.widgetAttrs.label)),1)):Ar("",!0),(x=p.widgetAttrs)!=null&&x.icon?(He(),Ct(s,{key:1,name:p.widgetAttrs.icon,size:"20px"},null,8,["name"])):Ar("",!0)]}),_:2},1032,["type","loading","disabled","onClick"])}),128))]),_:1})}}}),_C=$e({__name:"WidgetDeviceInfo",props:{name:null,label:null,value:null,handler:null},setup(e){const{t}=Un();return(n,r)=>{const i=Vn;return He(),Ct(i,{title:be(t)(e.label),label:e.value,center:""},null,8,["title","label"])}}}),yC=(e,t,n,r)=>{var l;const i=(s,c)=>c instanceof Map?{dataType:"Map",value:Array.from(c.entries())}:c;return(l=window.MeApi)==null?void 0:l.fileHelper.autoSave2Tmp(JSON.stringify(n,i),e,t).then(s=>{r&&r(s)})},bC=e=>{var t;if(e)try{(t=window.MeApi)==null||t.app.openBrowser(e)}catch(n){console.log("[ openBrowser error ] > ",n)}},lG=async(e,t,n,r)=>{var s,c;if(await((s=window.MeApi)==null?void 0:s.app.getOsPlatform())==="Android")return!0;const l=await((c=window.MeApi)==null?void 0:c.permission.grantCameraPermission());return l!==void 0&&!l&&Jk({title:e,message:t,confirmButtonText:n,cancelButtonText:r}).then(()=>{var h;(h=window.MeApi)==null||h.permission.openAppPermissionPage()}),l==="undefined"?!1:l},uG=async()=>{var t;return await((t=window.MeApi)==null?void 0:t.app.getOsPlatform())==="iPhone"};var As;class rw{static saveTmp(){ee(this,As)&&ee(this,As).call(this)}static setSave(t){bt(this,As,t)}static removeSave(){bt(this,As,void 0)}}As=new WeakMap,Xe(rw,As,void 0);const cG=e=>{const t=Math.floor(e),n=String(Math.floor(t/3600)),r=t%3600,i=String(Math.floor(r/60)),l=String(r%60);return`${n.padStart(2,"0")} : ${i.padStart(2,"0")} : ${l.padStart(2,"0")}`},aw=(e,t)=>{const n=document.querySelectorAll(".tooltip-content");if(t)n.forEach(r=>{r.__vnode.props.class.includes(t)&&(r.style.visibility="visible")});else{console.log(" => e.target.__vnode",e.target.__vnode);const i=e.target.__vnode.ctx.parent.parent.parent.props.name;n.forEach(l=>{i===l.__vnode.ctx.props.name&&(l.style.visibility="visible")})}},iw=()=>{document.querySelectorAll(".tooltip-content").forEach(t=>{t.style.visibility="hidden"})},wC=$e({__name:"WidgetDevicePower",props:{ext:null,name:null,label:null,value:null,suffix:null,handler:null},setup(e){const t=e,{t:n}=Un(),r=Ee(()=>t.value),i=Ee(()=>{var c,h;const{ext:s}=t;return((h=(c=s==null?void 0:s.config)==null?void 0:c.supportUrls)==null?void 0:h.laserFaq)||""}),l=()=>{const s=t.suffix.widgetAttrs.href?t.suffix.widgetAttrs.href:i.value;console.log(s),bC(s)};return(s,c)=>{const h=Vn,p=si;return He(),Ct(h,{style:{padding:"0",margin:"0"}},{extra:Ge(()=>[be(r)>0?(He(),Ct(h,{key:0,center:"",title:be(n)(e.label),value:`${be(r)} W`},null,8,["title","value"])):(He(),Ct(h,{key:1,center:"",title:be(n)("device.setting.model"),value:be(n)("device.setting.unrecognized_laser_model"),onClick:l},{extra:Ge(()=>[j(p,{size:"small",plain:"",style:{"margin-left":"10px"}},{default:Ge(()=>[Ho(an(be(n)("device.setting.unrecognized_laser_faq")),1)]),_:1})]),_:1},8,["title","value"]))]),_:1})}}}),SC=$e({__name:"WidgetDeviceVersion",props:{name:null,label:null,value:null,suffix:null,handler:null},setup(e){const t=e,{t:n}=Un(),r=ke(!1),i=Ee(()=>t.value),l=async()=>{r.value=!0,await t.handler(t.suffix.name,t.suffix.widgetAttrs.value),r.value=!1};return(s,c)=>{const h=si,p=Vn;return He(),Ct(p,{title:be(n)(e.label),center:"",label:be(i)},{extra:Ge(()=>[j(h,{size:"small",type:"primary",plain:"",loading:r.value,style:{"margin-left":"10px"},onClick:l},{default:Ge(()=>[Ho(an(be(n)(e.suffix.label)),1)]),_:1},8,["loading"])]),_:1},8,["title","label"])}}});const xC={style:{padding:"20px 0"}},EC=$e({__name:"WidgetEdit",props:{name:null,label:null,value:null,maxLength:null,handler:null},setup(e){const t=e,{t:n}=Un(),r=ke(!1),i=ke(t.value),l=()=>{i.value&&t.handler(t.name,i.value)},s=()=>{i.value=t.value};return(c,h)=>{const p=qs,g=Vn,_=j5,b=Xk;return He(),dn("div",null,[j(g,{border:!1,title:be(n)(e.label),value:e.value,center:""},{"right-icon":Ge(()=>[j(p,{class:"ml-6",name:"editor",size:"12px",onClick:h[0]||(h[0]=x=>r.value=!0)})]),_:1},8,["title","value"]),j(b,{show:r.value,"onUpdate:show":h[2]||(h[2]=x=>r.value=x),title:be(n)(e.label),"show-cancel-button":"","confirm-button-disabled":!i.value,"confirm-button-text":be(n)("common.msg.ok"),"cancel-button-text":be(n)("common.msg.cancel"),onCancel:s,onConfirm:l},{default:Ge(()=>[Jt("div",xC,[j(_,{modelValue:i.value,"onUpdate:modelValue":h[1]||(h[1]=x=>i.value=x),maxlength:e.maxLength,class:"project-new-name-input",placeholder:be(n)("device.setting.name_is_empty")},null,8,["modelValue","maxlength","placeholder"])])]),_:1},8,["show","title","confirm-button-disabled","confirm-button-text","cancel-button-text"])])}}});function rb(e,t){const r=/^(?:[-]?(?=\.?\d?)(?:\d+)?(?:\.?\d*)(?:[eE][+-]?\d*)?)$/.test(e);if(t===void 0)return r;const[,i="",l=""]=e.split(/\.|[eE][+]?/);return r&&(i.length<=t||l.length>0)}function ab(e,{fractionDigits:t,min:n,max:r}={}){let i,l=e;if(e===".")i=0,l="0.";else{i=parseFloat(e);const s=i;isNaN(i)||(i=ow(i,{fractionDigits:t,min:n,max:r}),s!==i&&(l=String(i)))}return{num:i,value:l}}function ow(e,{fractionDigits:t,min:n,max:r}){let i=e;if(isNaN(i))return i;const l=t!==void 0&&t>=0;if(l&&(i=n0(i,t)),n!==void 0&&isFinite(n)){const s=l?Rx(n,t):n;i<s&&(i=n)}if(r!==void 0&&isFinite(r)){const s=l?Ox(r,t):r;i>s&&(i=s)}return Object.is(i,-0)&&(i=0),i}const kC=(e,t)=>{let r=e;if(t=Math.floor(Math.abs(t)),t>6&&(t=6),e.toString().indexOf("e")!==-1){const l=e.toString().split("e"),s=Number(l[1]);l[1]=(s+(s>=0?t:-t)).toString(),r=l.join("e")}else r=`${e}e${t}`;return Math.round(r)/Math.pow(10,t)},n0=(e,t)=>Number(kC(e,t).toFixed(t)),sw=(e,t)=>e*t,CC=(e,t)=>e/t,TC=(e,t,n)=>{const r=sw(e,t);return ga(n)?r:n0(r,n)},ib=(e,t,n)=>ga(e)||Gs(e)||isNaN(e)?e:TC(e,t,n),AC=$e({__name:"InputNumber",props:{id:{default:void 0},prefix:{default:void 0},suffix:{default:void 0},label:{default:""},modelValue:{default:void 0},max:{default:void 0},min:{default:void 0},scale:{default:1},fractionDigits:{default:void 0},placeholder:{default:""},allowNull:{type:Boolean,default:!1},disabled:{type:Boolean},onBlur:{type:Function,default:void 0},defaultValue:{default:0},domProps:{default:void 0}},emits:["update:model-value","change"],setup(e,{expose:t,emit:n}){const r=e,i={type:"number",inputMode:""},l=ke(null);Na(()=>{N(r.domProps)}),at(()=>r.domProps,()=>{N(r.domProps)});const s=Ee(()=>ib(r.max,r.scale,r.fractionDigits)),c=Ee(()=>ib(r.min,r.scale,r.fractionDigits)),h=Ee(()=>({fractionDigits:r.fractionDigits,max:s.value,min:c.value})),p=ke(A(r.modelValue).value);at(()=>r.modelValue,()=>{if(r.allowNull&&r.modelValue===null&&p.value==="")return;const{value:H,num:J}=A(r.modelValue);(p.value===""||Number(p.value)!==J)&&(p.value=H)});let g=!1;const _=H=>{if(H.target!==null&&!H.target.composing){const J=H.target.value??"";g=!0,b(J)}},b=q1(H=>{g&&(P(H,r.scale),g=!1)},0),x=H=>rb(H,r.fractionDigits)?H:p.value;let k=!1;const T=H=>{var J;if(k){k=!1;return}g&&(P(p.value,r.scale),g=!1),p.value=A(r.modelValue).value,(J=r.onBlur)==null||J.call(r,H)};function P(H,J){let ie;if(H===""&&r.allowNull)ie=null;else{const{value:oe,num:le}=ab(H,h.value);p.value=oe,isNaN(le)||(ie=ow(CC(le,J),{min:r.min,max:r.max}))}ie!==void 0&&ie!==r.modelValue&&(n("update:model-value",ie),n("change",ie,r.id))}function A(H){return L(H,r.scale,r.allowNull,r.defaultValue)}function L(H,J,ie,oe){if(H===null){if(ie)return{value:"",num:null};H=void 0}H===void 0&&(oe===null&&!ie||typeof oe=="number"&&!isFinite(oe)?H=oe:H=0);const le=String(sw(Number(H),J)),{value:$,num:Y}=ab(le,h.value);return{value:$,num:Y}}const F=()=>l.value?l.value.$el.querySelector("input"):null;function N(H){const J=F();if(J){H=Object.assign({},i,H);for(const ie in H){const oe=H[ie];oe!==void 0&&(J[ie]=oe)}}}function W(H,J,ie,oe){return H.slice(0,ie)+J+H.slice(oe)}const te=H=>{if(typeof H!="string")throw new TypeError("inserted text must be a string");const J=F();if(!J)return;const ie=J.selectionStart??0,oe=J.selectionEnd??0,le=J.value,$=!H&&ie===oe&&ie>0?ie-1:ie,Y=W(le,H,$,oe);rb(Y,r.fractionDigits)&&(p.value=Y,g=!0,Sn(()=>{const z=oe+(Y.length-le.length);J.setSelectionRange(z,z),k=!0,J.blur(),J.focus()}))};function G(){return te("")}function K(){var H;(H=l.value)==null||H.focus(),Sn(()=>{const J=F();if(J){const ie=p.value.length;J.setSelectionRange(ie,ie)}})}function re(){var H;(H=l.value)==null||H.blur()}return t({inputVal:p,insertText:te,deleteText:G,focus:K,blur:re}),(H,J)=>{const ie=j5;return He(),Ct(ie,xn({ref_key:"inputField",ref:l,modelValue:p.value,"onUpdate:modelValue":J[0]||(J[0]=oe=>p.value=oe),class:"input-number process-param-setting",formatter:x,label:r.label,placeholder:r.placeholder,"input-align":"right",disabled:e.disabled,type:"number"},H.$attrs,{onBlur:T,onInput:_}),Mf({_:2},[e.prefix?{name:"left-icon",fn:Ge(()=>[Ho(an(e.prefix),1)]),key:"0"}:void 0,e.suffix?{name:"right-icon",fn:Ge(()=>[Ho(an(e.suffix),1)]),key:"1"}:void 0]),1040,["modelValue","label","placeholder","disabled"])}}});const N0=$a(AC,[["__scopeId","data-v-e4c0b1c4"]]);var PC=!1;/*!
  * pinia v2.0.27
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let lw;const F0=e=>lw=e,uw=Symbol();function n1(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Tf;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Tf||(Tf={}));function LC(){const e=t5(!0),t=e.run(()=>ke({}));let n=[],r=[];const i=Xp({install(l){F0(i),i._a=l,l.provide(uw,i),l.config.globalProperties.$pinia=i,r.forEach(s=>n.push(s)),r=[]},use(l){return!this._a&&!PC?r.push(l):n.push(l),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const cw=()=>{};function ob(e,t,n,r=cw){e.push(t);const i=()=>{const l=e.indexOf(t);l>-1&&(e.splice(l,1),r())};return!n&&wx()&&Sx(i),i}function lu(e,...t){e.slice().forEach(n=>{n(...t)})}function r1(e,t){e instanceof Map&&t instanceof Map&&t.forEach((n,r)=>e.set(r,n)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];n1(i)&&n1(r)&&e.hasOwnProperty(n)&&!Vo(r)&&!W1(r)?e[n]=r1(i,r):e[n]=r}return e}const IC=Symbol();function RC(e){return!n1(e)||!e.hasOwnProperty(IC)}const{assign:Mo}=Object;function OC(e){return!!(Vo(e)&&e.effect)}function DC(e,t,n,r){const{state:i,actions:l,getters:s}=t,c=n.state.value[e];let h;function p(){c||(n.state.value[e]=i?i():{});const g=xx(n.state.value[e]);return Mo(g,l,Object.keys(s||{}).reduce((_,b)=>(_[b]=Xp(Ee(()=>{F0(n);const x=n._s.get(e);return s[b].call(x,x)})),_),{}))}return h=fw(e,p,t,n,r,!0),h.$reset=function(){const _=i?i():{};this.$patch(b=>{Mo(b,_)})},h}function fw(e,t,n={},r,i,l){let s;const c=Mo({actions:{}},n),h={deep:!0};let p,g,_=Xp([]),b=Xp([]),x;const k=r.state.value[e];!l&&!k&&(r.state.value[e]={}),ke({});let T;function P(G){let K;p=g=!1,typeof G=="function"?(G(r.state.value[e]),K={type:Tf.patchFunction,storeId:e,events:x}):(r1(r.state.value[e],G),K={type:Tf.patchObject,payload:G,storeId:e,events:x});const re=T=Symbol();Sn().then(()=>{T===re&&(p=!0)}),g=!0,lu(_,K,r.state.value[e])}const A=cw;function L(){s.stop(),_=[],b=[],r._s.delete(e)}function F(G,K){return function(){F0(r);const re=Array.from(arguments),H=[],J=[];function ie($){H.push($)}function oe($){J.push($)}lu(b,{args:re,name:G,store:W,after:ie,onError:oe});let le;try{le=K.apply(this&&this.$id===e?this:W,re)}catch($){throw lu(J,$),$}return le instanceof Promise?le.then($=>(lu(H,$),$)).catch($=>(lu(J,$),Promise.reject($))):(lu(H,le),le)}}const N={_p:r,$id:e,$onAction:ob.bind(null,b),$patch:P,$reset:A,$subscribe(G,K={}){const re=ob(_,G,K.detached,()=>H()),H=s.run(()=>at(()=>r.state.value[e],J=>{(K.flush==="sync"?g:p)&&G({storeId:e,type:Tf.direct,events:x},J)},Mo({},h,K)));return re},$dispose:L},W=na(N);r._s.set(e,W);const te=r._e.run(()=>(s=t5(),s.run(()=>t())));for(const G in te){const K=te[G];if(Vo(K)&&!OC(K)||W1(K))l||(k&&RC(K)&&(Vo(K)?K.value=k[G]:r1(K,k[G])),r.state.value[e][G]=K);else if(typeof K=="function"){const re=F(G,K);te[G]=re,c.actions[G]=K}}return Mo(W,te),Mo(n5(W),te),Object.defineProperty(W,"$state",{get:()=>r.state.value[e],set:G=>{P(K=>{Mo(K,G)})}}),r._p.forEach(G=>{Mo(W,s.run(()=>G({store:W,app:r._a,pinia:r,options:c})))}),k&&l&&n.hydrate&&n.hydrate(W.$state,k),p=!0,g=!0,W}function jo(e,t,n){let r,i;const l=typeof t=="function";typeof e=="string"?(r=e,i=l?n:t):(i=e,r=e.id);function s(c,h){const p=js();return c=c||p&&Iu(uw),c&&F0(c),c=lw,c._s.has(r)||(l?fw(r,t,i,c):DC(r,i,c)),c._s.get(r)}return s.$id=r,s}function fG(e){{e=n5(e);const t={};for(const n in e){const r=e[n];(Vo(r)||W1(r))&&(t[n]=bx(e,n))}return t}}const dw=jo("device-error",{state:()=>({visible:!1,errorModalList:[],errorIgnoreList:[]}),getters:{currentInfo(e){return En(e.errorModalList)?{msg:"",code:""}:e.errorModalList[0]}},actions:{addErrorModalList(e){this.errorModalList.some(n=>n.code===e.code)||this.errorModalList.push(e)},removeFirstError(){this.errorModalList.length>0&&(this.errorModalList=this.errorModalList.splice(1))},addErrorIgnoreList(e){!this.errorIgnoreList.includes(e)&&!En(e)&&this.errorIgnoreList.push(e)},clearErrorModalList(){this.errorModalList=[]},clearErrorIgnoreList(){this.errorIgnoreList=[]},pushDeviceError(e){const{code:t=""}=e;En(t)||this.errorIgnoreList.includes(t)||(this.addErrorModalList(e),this.visible=!0)}}});function hw(e,t){return function(){return e.apply(t,arguments)}}const{toString:pw}=Object.prototype,{getPrototypeOf:u_}=Object,c_=(e=>t=>{const n=pw.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Wi=e=>(e=e.toLowerCase(),t=>c_(t)===e),$0=e=>t=>typeof t===e,{isArray:Fu}=Array,Bf=$0("undefined");function MC(e){return e!==null&&!Bf(e)&&e.constructor!==null&&!Bf(e.constructor)&&zo(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const gw=Wi("ArrayBuffer");function NC(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&gw(e.buffer),t}const FC=$0("string"),zo=$0("function"),mw=$0("number"),f_=e=>e!==null&&typeof e=="object",$C=e=>e===!0||e===!1,$p=e=>{if(c_(e)!=="object")return!1;const t=u_(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},BC=Wi("Date"),UC=Wi("File"),VC=Wi("Blob"),HC=Wi("FileList"),zC=e=>f_(e)&&zo(e.pipe),jC=e=>{const t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||pw.call(e)===t||zo(e.toString)&&e.toString()===t)},GC=Wi("URLSearchParams"),WC=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ld(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),Fu(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const l=n?Object.getOwnPropertyNames(e):Object.keys(e),s=l.length;let c;for(r=0;r<s;r++)c=l[r],t.call(null,e[c],c,e)}}function vw(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const _w=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),yw=e=>!Bf(e)&&e!==_w;function a1(){const{caseless:e}=yw(this)&&this||{},t={},n=(r,i)=>{const l=e&&vw(t,i)||i;$p(t[l])&&$p(r)?t[l]=a1(t[l],r):$p(r)?t[l]=a1({},r):Fu(r)?t[l]=r.slice():t[l]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&ld(arguments[r],n);return t}const qC=(e,t,n,{allOwnKeys:r}={})=>(ld(t,(i,l)=>{n&&zo(i)?e[l]=hw(i,n):e[l]=i},{allOwnKeys:r}),e),YC=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),KC=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},ZC=(e,t,n,r)=>{let i,l,s;const c={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),l=i.length;l-- >0;)s=i[l],(!r||r(s,e,t))&&!c[s]&&(t[s]=e[s],c[s]=!0);e=n!==!1&&u_(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},JC=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},XC=e=>{if(!e)return null;if(Fu(e))return e;let t=e.length;if(!mw(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},QC=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&u_(Uint8Array)),eT=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const l=i.value;t.call(e,l[0],l[1])}},tT=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},nT=Wi("HTMLFormElement"),rT=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),sb=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),aT=Wi("RegExp"),bw=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};ld(n,(i,l)=>{t(i,l,e)!==!1&&(r[l]=i)}),Object.defineProperties(e,r)},iT=e=>{bw(e,(t,n)=>{if(zo(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(zo(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},oT=(e,t)=>{const n={},r=i=>{i.forEach(l=>{n[l]=!0})};return Fu(e)?r(e):r(String(e).split(t)),n},sT=()=>{},lT=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Pv="abcdefghijklmnopqrstuvwxyz",lb="0123456789",ww={DIGIT:lb,ALPHA:Pv,ALPHA_DIGIT:Pv+Pv.toUpperCase()+lb},uT=(e=16,t=ww.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function cT(e){return!!(e&&zo(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const fT=e=>{const t=new Array(10),n=(r,i)=>{if(f_(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const l=Fu(r)?[]:{};return ld(r,(s,c)=>{const h=n(s,i+1);!Bf(h)&&(l[c]=h)}),t[i]=void 0,l}}return r};return n(e,0)},he={isArray:Fu,isArrayBuffer:gw,isBuffer:MC,isFormData:jC,isArrayBufferView:NC,isString:FC,isNumber:mw,isBoolean:$C,isObject:f_,isPlainObject:$p,isUndefined:Bf,isDate:BC,isFile:UC,isBlob:VC,isRegExp:aT,isFunction:zo,isStream:zC,isURLSearchParams:GC,isTypedArray:QC,isFileList:HC,forEach:ld,merge:a1,extend:qC,trim:WC,stripBOM:YC,inherits:KC,toFlatObject:ZC,kindOf:c_,kindOfTest:Wi,endsWith:JC,toArray:XC,forEachEntry:eT,matchAll:tT,isHTMLForm:nT,hasOwnProperty:sb,hasOwnProp:sb,reduceDescriptors:bw,freezeMethods:iT,toObjectSet:oT,toCamelCase:rT,noop:sT,toFiniteNumber:lT,findKey:vw,global:_w,isContextDefined:yw,ALPHABET:ww,generateString:uT,isSpecCompliantForm:cT,toJSONObject:fT};function kt(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}he.inherits(kt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:he.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Sw=kt.prototype,xw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{xw[e]={value:e}});Object.defineProperties(kt,xw);Object.defineProperty(Sw,"isAxiosError",{value:!0});kt.from=(e,t,n,r,i,l)=>{const s=Object.create(Sw);return he.toFlatObject(e,s,function(h){return h!==Error.prototype},c=>c!=="isAxiosError"),kt.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,l&&Object.assign(s,l),s};const dT=null;function i1(e){return he.isPlainObject(e)||he.isArray(e)}function Ew(e){return he.endsWith(e,"[]")?e.slice(0,-2):e}function ub(e,t,n){return e?e.concat(t).map(function(i,l){return i=Ew(i),!n&&l?"["+i+"]":i}).join(n?".":""):t}function hT(e){return he.isArray(e)&&!e.some(i1)}const pT=he.toFlatObject(he,{},null,function(t){return/^is[A-Z]/.test(t)});function B0(e,t,n){if(!he.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=he.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,P){return!he.isUndefined(P[T])});const r=n.metaTokens,i=n.visitor||g,l=n.dots,s=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&he.isSpecCompliantForm(t);if(!he.isFunction(i))throw new TypeError("visitor must be a function");function p(k){if(k===null)return"";if(he.isDate(k))return k.toISOString();if(!h&&he.isBlob(k))throw new kt("Blob is not supported. Use a Buffer instead.");return he.isArrayBuffer(k)||he.isTypedArray(k)?h&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function g(k,T,P){let A=k;if(k&&!P&&typeof k=="object"){if(he.endsWith(T,"{}"))T=r?T:T.slice(0,-2),k=JSON.stringify(k);else if(he.isArray(k)&&hT(k)||(he.isFileList(k)||he.endsWith(T,"[]"))&&(A=he.toArray(k)))return T=Ew(T),A.forEach(function(F,N){!(he.isUndefined(F)||F===null)&&t.append(s===!0?ub([T],N,l):s===null?T:T+"[]",p(F))}),!1}return i1(k)?!0:(t.append(ub(P,T,l),p(k)),!1)}const _=[],b=Object.assign(pT,{defaultVisitor:g,convertValue:p,isVisitable:i1});function x(k,T){if(!he.isUndefined(k)){if(_.indexOf(k)!==-1)throw Error("Circular reference detected in "+T.join("."));_.push(k),he.forEach(k,function(A,L){(!(he.isUndefined(A)||A===null)&&i.call(t,A,he.isString(L)?L.trim():L,T,b))===!0&&x(A,T?T.concat(L):[L])}),_.pop()}}if(!he.isObject(e))throw new TypeError("data must be an object");return x(e),t}function cb(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function d_(e,t){this._pairs=[],e&&B0(e,this,t)}const kw=d_.prototype;kw.append=function(t,n){this._pairs.push([t,n])};kw.toString=function(t){const n=t?function(r){return t.call(this,r,cb)}:cb;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function gT(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Cw(e,t,n){if(!t)return e;const r=n&&n.encode||gT,i=n&&n.serialize;let l;if(i?l=i(t,n):l=he.isURLSearchParams(t)?t.toString():new d_(t,n).toString(r),l){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class mT{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){he.forEach(this.handlers,function(r){r!==null&&t(r)})}}const fb=mT,Tw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vT=typeof URLSearchParams<"u"?URLSearchParams:d_,_T=typeof FormData<"u"?FormData:null,yT=typeof Blob<"u"?Blob:null,bT=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),wT=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ai={isBrowser:!0,classes:{URLSearchParams:vT,FormData:_T,Blob:yT},isStandardBrowserEnv:bT,isStandardBrowserWebWorkerEnv:wT,protocols:["http","https","file","blob","url","data"]};function ST(e,t){return B0(e,new ai.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,l){return ai.isNode&&he.isBuffer(n)?(this.append(r,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},t))}function xT(e){return he.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ET(e){const t={},n=Object.keys(e);let r;const i=n.length;let l;for(r=0;r<i;r++)l=n[r],t[l]=e[l];return t}function Aw(e){function t(n,r,i,l){let s=n[l++];const c=Number.isFinite(+s),h=l>=n.length;return s=!s&&he.isArray(i)?i.length:s,h?(he.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!c):((!i[s]||!he.isObject(i[s]))&&(i[s]=[]),t(n,r,i[s],l)&&he.isArray(i[s])&&(i[s]=ET(i[s])),!c)}if(he.isFormData(e)&&he.isFunction(e.entries)){const n={};return he.forEachEntry(e,(r,i)=>{t(xT(r),i,n,0)}),n}return null}const kT={"Content-Type":void 0};function CT(e,t,n){if(he.isString(e))try{return(t||JSON.parse)(e),he.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const U0={transitional:Tw,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,l=he.isObject(t);if(l&&he.isHTMLForm(t)&&(t=new FormData(t)),he.isFormData(t))return i&&i?JSON.stringify(Aw(t)):t;if(he.isArrayBuffer(t)||he.isBuffer(t)||he.isStream(t)||he.isFile(t)||he.isBlob(t))return t;if(he.isArrayBufferView(t))return t.buffer;if(he.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return ST(t,this.formSerializer).toString();if((c=he.isFileList(t))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return B0(c?{"files[]":t}:t,h&&new h,this.formSerializer)}}return l||i?(n.setContentType("application/json",!1),CT(t)):t}],transformResponse:[function(t){const n=this.transitional||U0.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(t&&he.isString(t)&&(r&&!this.responseType||i)){const s=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(c){if(s)throw c.name==="SyntaxError"?kt.from(c,kt.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ai.classes.FormData,Blob:ai.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};he.forEach(["delete","get","head"],function(t){U0.headers[t]={}});he.forEach(["post","put","patch"],function(t){U0.headers[t]=he.merge(kT)});const h_=U0,TT=he.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),AT=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!n||t[n]&&TT[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},db=Symbol("internals");function sf(e){return e&&String(e).trim().toLowerCase()}function Bp(e){return e===!1||e==null?e:he.isArray(e)?e.map(Bp):String(e)}function PT(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}function LT(e){return/^[-_a-zA-Z]+$/.test(e.trim())}function Lv(e,t,n,r,i){if(he.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!he.isString(t)){if(he.isString(r))return t.indexOf(r)!==-1;if(he.isRegExp(r))return r.test(t)}}function IT(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function RT(e,t){const n=he.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,l,s){return this[r].call(this,t,i,l,s)},configurable:!0})})}class V0{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function l(c,h,p){const g=sf(h);if(!g)throw new Error("header name must be a non-empty string");const _=he.findKey(i,g);(!_||i[_]===void 0||p===!0||p===void 0&&i[_]!==!1)&&(i[_||h]=Bp(c))}const s=(c,h)=>he.forEach(c,(p,g)=>l(p,g,h));return he.isPlainObject(t)||t instanceof this.constructor?s(t,n):he.isString(t)&&(t=t.trim())&&!LT(t)?s(AT(t),n):t!=null&&l(n,t,r),this}get(t,n){if(t=sf(t),t){const r=he.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return PT(i);if(he.isFunction(n))return n.call(this,i,r);if(he.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=sf(t),t){const r=he.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Lv(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function l(s){if(s=sf(s),s){const c=he.findKey(r,s);c&&(!n||Lv(r,r[c],c,n))&&(delete r[c],i=!0)}}return he.isArray(t)?t.forEach(l):l(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const l=n[r];(!t||Lv(this,this[l],l,t,!0))&&(delete this[l],i=!0)}return i}normalize(t){const n=this,r={};return he.forEach(this,(i,l)=>{const s=he.findKey(r,l);if(s){n[s]=Bp(i),delete n[l];return}const c=t?IT(l):String(l).trim();c!==l&&delete n[l],n[c]=Bp(i),r[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return he.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&he.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[db]=this[db]={accessors:{}}).accessors,i=this.prototype;function l(s){const c=sf(s);r[c]||(RT(i,s),r[c]=!0)}return he.isArray(t)?t.forEach(l):l(t),this}}V0.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);he.freezeMethods(V0.prototype);he.freezeMethods(V0);const ji=V0;function Iv(e,t){const n=this||h_,r=t||n,i=ji.from(r.headers);let l=r.data;return he.forEach(e,function(c){l=c.call(n,l,i.normalize(),t?t.status:void 0)}),i.normalize(),l}function Pw(e){return!!(e&&e.__CANCEL__)}function ud(e,t,n){kt.call(this,e??"canceled",kt.ERR_CANCELED,t,n),this.name="CanceledError"}he.inherits(ud,kt,{__CANCEL__:!0});function OT(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new kt("Request failed with status code "+n.status,[kt.ERR_BAD_REQUEST,kt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const DT=ai.isStandardBrowserEnv?function(){return{write:function(n,r,i,l,s,c){const h=[];h.push(n+"="+encodeURIComponent(r)),he.isNumber(i)&&h.push("expires="+new Date(i).toGMTString()),he.isString(l)&&h.push("path="+l),he.isString(s)&&h.push("domain="+s),c===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function MT(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function NT(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function Lw(e,t){return e&&!MT(t)?NT(e,t):t}const FT=ai.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(l){let s=l;return t&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(s){const c=he.isString(s)?i(s):s;return c.protocol===r.protocol&&c.host===r.host}}():function(){return function(){return!0}}();function $T(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function BT(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,l=0,s;return t=t!==void 0?t:1e3,function(h){const p=Date.now(),g=r[l];s||(s=p),n[i]=h,r[i]=p;let _=l,b=0;for(;_!==i;)b+=n[_++],_=_%e;if(i=(i+1)%e,i===l&&(l=(l+1)%e),p-s<t)return;const x=g&&p-g;return x?Math.round(b*1e3/x):void 0}}function hb(e,t){let n=0;const r=BT(50,250);return i=>{const l=i.loaded,s=i.lengthComputable?i.total:void 0,c=l-n,h=r(c),p=l<=s;n=l;const g={loaded:l,total:s,progress:s?l/s:void 0,bytes:c,rate:h||void 0,estimated:h&&s&&p?(s-l)/h:void 0,event:i};g[t?"download":"upload"]=!0,e(g)}}const UT=typeof XMLHttpRequest<"u",VT=UT&&function(e){return new Promise(function(n,r){let i=e.data;const l=ji.from(e.headers).normalize(),s=e.responseType;let c;function h(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}he.isFormData(i)&&(ai.isStandardBrowserEnv||ai.isStandardBrowserWebWorkerEnv)&&l.setContentType(!1);let p=new XMLHttpRequest;if(e.auth){const x=e.auth.username||"",k=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";l.set("Authorization","Basic "+btoa(x+":"+k))}const g=Lw(e.baseURL,e.url);p.open(e.method.toUpperCase(),Cw(g,e.params,e.paramsSerializer),!0),p.timeout=e.timeout;function _(){if(!p)return;const x=ji.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),T={data:!s||s==="text"||s==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:x,config:e,request:p};OT(function(A){n(A),h()},function(A){r(A),h()},T),p=null}if("onloadend"in p?p.onloadend=_:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(_)},p.onabort=function(){p&&(r(new kt("Request aborted",kt.ECONNABORTED,e,p)),p=null)},p.onerror=function(){r(new kt("Network Error",kt.ERR_NETWORK,e,p)),p=null},p.ontimeout=function(){let k=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const T=e.transitional||Tw;e.timeoutErrorMessage&&(k=e.timeoutErrorMessage),r(new kt(k,T.clarifyTimeoutError?kt.ETIMEDOUT:kt.ECONNABORTED,e,p)),p=null},ai.isStandardBrowserEnv){const x=(e.withCredentials||FT(g))&&e.xsrfCookieName&&DT.read(e.xsrfCookieName);x&&l.set(e.xsrfHeaderName,x)}i===void 0&&l.setContentType(null),"setRequestHeader"in p&&he.forEach(l.toJSON(),function(k,T){p.setRequestHeader(T,k)}),he.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),s&&s!=="json"&&(p.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&p.addEventListener("progress",hb(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",hb(e.onUploadProgress)),(e.cancelToken||e.signal)&&(c=x=>{p&&(r(!x||x.type?new ud(null,e,p):x),p.abort(),p=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c)));const b=$T(g);if(b&&ai.protocols.indexOf(b)===-1){r(new kt("Unsupported protocol "+b+":",kt.ERR_BAD_REQUEST,e));return}p.send(i||null)})},Up={http:dT,xhr:VT};he.forEach(Up,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const HT={getAdapter:e=>{e=he.isArray(e)?e:[e];const{length:t}=e;let n,r;for(let i=0;i<t&&(n=e[i],!(r=he.isString(n)?Up[n.toLowerCase()]:n));i++);if(!r)throw r===!1?new kt(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(he.hasOwnProp(Up,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!he.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:Up};function Rv(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ud(null,e)}function pb(e){return Rv(e),e.headers=ji.from(e.headers),e.data=Iv.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),HT.getAdapter(e.adapter||h_.adapter)(e).then(function(r){return Rv(e),r.data=Iv.call(e,e.transformResponse,r),r.headers=ji.from(r.headers),r},function(r){return Pw(r)||(Rv(e),r&&r.response&&(r.response.data=Iv.call(e,e.transformResponse,r.response),r.response.headers=ji.from(r.response.headers))),Promise.reject(r)})}const gb=e=>e instanceof ji?e.toJSON():e;function Tu(e,t){t=t||{};const n={};function r(p,g,_){return he.isPlainObject(p)&&he.isPlainObject(g)?he.merge.call({caseless:_},p,g):he.isPlainObject(g)?he.merge({},g):he.isArray(g)?g.slice():g}function i(p,g,_){if(he.isUndefined(g)){if(!he.isUndefined(p))return r(void 0,p,_)}else return r(p,g,_)}function l(p,g){if(!he.isUndefined(g))return r(void 0,g)}function s(p,g){if(he.isUndefined(g)){if(!he.isUndefined(p))return r(void 0,p)}else return r(void 0,g)}function c(p,g,_){if(_ in t)return r(p,g);if(_ in e)return r(void 0,p)}const h={url:l,method:l,data:l,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c,headers:(p,g)=>i(gb(p),gb(g),!0)};return he.forEach(Object.keys(e).concat(Object.keys(t)),function(g){const _=h[g]||i,b=_(e[g],t[g],g);he.isUndefined(b)&&_!==c||(n[g]=b)}),n}const Iw="1.3.4",p_={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{p_[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const mb={};p_.transitional=function(t,n,r){function i(l,s){return"[Axios v"+Iw+"] Transitional option '"+l+"'"+s+(r?". "+r:"")}return(l,s,c)=>{if(t===!1)throw new kt(i(s," has been removed"+(n?" in "+n:"")),kt.ERR_DEPRECATED);return n&&!mb[s]&&(mb[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(l,s,c):!0}};function zT(e,t,n){if(typeof e!="object")throw new kt("options must be an object",kt.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const l=r[i],s=t[l];if(s){const c=e[l],h=c===void 0||s(c,l,e);if(h!==!0)throw new kt("option "+l+" must be "+h,kt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new kt("Unknown option "+l,kt.ERR_BAD_OPTION)}}const o1={assertOptions:zT,validators:p_},Ao=o1.validators;class r0{constructor(t){this.defaults=t,this.interceptors={request:new fb,response:new fb}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Tu(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:l}=n;r!==void 0&&o1.assertOptions(r,{silentJSONParsing:Ao.transitional(Ao.boolean),forcedJSONParsing:Ao.transitional(Ao.boolean),clarifyTimeoutError:Ao.transitional(Ao.boolean)},!1),i!==void 0&&o1.assertOptions(i,{encode:Ao.function,serialize:Ao.function},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s;s=l&&he.merge(l.common,l[n.method]),s&&he.forEach(["delete","get","head","post","put","patch","common"],k=>{delete l[k]}),n.headers=ji.concat(s,l);const c=[];let h=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(n)===!1||(h=h&&T.synchronous,c.unshift(T.fulfilled,T.rejected))});const p=[];this.interceptors.response.forEach(function(T){p.push(T.fulfilled,T.rejected)});let g,_=0,b;if(!h){const k=[pb.bind(this),void 0];for(k.unshift.apply(k,c),k.push.apply(k,p),b=k.length,g=Promise.resolve(n);_<b;)g=g.then(k[_++],k[_++]);return g}b=c.length;let x=n;for(_=0;_<b;){const k=c[_++],T=c[_++];try{x=k(x)}catch(P){T.call(this,P);break}}try{g=pb.call(this,x)}catch(k){return Promise.reject(k)}for(_=0,b=p.length;_<b;)g=g.then(p[_++],p[_++]);return g}getUri(t){t=Tu(this.defaults,t);const n=Lw(t.baseURL,t.url);return Cw(n,t.params,t.paramsSerializer)}}he.forEach(["delete","get","head","options"],function(t){r0.prototype[t]=function(n,r){return this.request(Tu(r||{},{method:t,url:n,data:(r||{}).data}))}});he.forEach(["post","put","patch"],function(t){function n(r){return function(l,s,c){return this.request(Tu(c||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:s}))}}r0.prototype[t]=n(),r0.prototype[t+"Form"]=n(!0)});const Vp=r0;class g_{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const r=this;this.promise.then(i=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](i);r._listeners=null}),this.promise.then=i=>{let l;const s=new Promise(c=>{r.subscribe(c),l=c}).then(i);return s.cancel=function(){r.unsubscribe(l)},s},t(function(l,s,c){r.reason||(r.reason=new ud(l,s,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new g_(function(i){t=i}),cancel:t}}}const jT=g_;function GT(e){return function(n){return e.apply(null,n)}}function WT(e){return he.isObject(e)&&e.isAxiosError===!0}const s1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(s1).forEach(([e,t])=>{s1[t]=e});const qT=s1;function Rw(e){const t=new Vp(e),n=hw(Vp.prototype.request,t);return he.extend(n,Vp.prototype,t,{allOwnKeys:!0}),he.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return Rw(Tu(e,i))},n}const Bn=Rw(h_);Bn.Axios=Vp;Bn.CanceledError=ud;Bn.CancelToken=jT;Bn.isCancel=Pw;Bn.VERSION=Iw;Bn.toFormData=B0;Bn.AxiosError=kt;Bn.Cancel=Bn.CanceledError;Bn.all=function(t){return Promise.all(t)};Bn.spread=GT;Bn.isAxiosError=WT;Bn.mergeConfig=Tu;Bn.AxiosHeaders=ji;Bn.formToJSON=e=>Aw(he.isHTMLForm(e)?new FormData(e):e);Bn.HttpStatusCode=qT;Bn.default=Bn;const Af=Bn,vb={prod:{url:"https://xcs-api.mblock.cc",common:"https://api.mblock.cc",aiPaint:"https://xart.xtool.com/"},test:{url:"https://xcs-api-test.makeblock.com",common:"https://api-test.makeblock.com",aiPaint:"https://test-web.makeblock.com/aigp/index.html"}},m_=()=>{let e=vb.prod,t="localMaterials";return localStorage.getItem("testEnv")&&(e=vb.test,t="localMaterials_testEnv"),{domain:e,LOCAL_MATERIALS:t}},YT="/v1",v_=()=>{const{domain:e}=m_();return e.url+YT};function __(e){return new Promise((t,n)=>{Af({method:"get",timeout:5e3,...e}).then(r=>{r.data.code===0?t(r.data.data):n(r.data)}).catch(r=>n(r))})}const dG=async e=>await __({baseURL:v_(),url:"/web/materials",params:e}),KT=async e=>await __({method:"post",baseURL:v_(),url:"/web/materials/increment",data:{data:e}}),ZT=async()=>await __({baseURL:v_(),url:"/public/data/type/material_category/items"}),y_="#2366ff",Ow="#fe0002",Dw="#444444",a0=y_,JT=100,XT=[Ow,"#ff7f56","#e1c000","#00c715","#00befe",y_,"#a958ff",Dw];var ra={},QT={get exports(){return ra},set exports(e){ra=e}},vu=typeof Reflect=="object"?Reflect:null,_b=vu&&typeof vu.apply=="function"?vu.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},Hp;vu&&typeof vu.ownKeys=="function"?Hp=vu.ownKeys:Object.getOwnPropertySymbols?Hp=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Hp=function(t){return Object.getOwnPropertyNames(t)};function eA(e){console&&console.warn&&console.warn(e)}var Mw=Number.isNaN||function(t){return t!==t};function zt(){zt.init.call(this)}QT.exports=zt;ra.once=aA;zt.EventEmitter=zt;zt.prototype._events=void 0;zt.prototype._eventsCount=0;zt.prototype._maxListeners=void 0;var yb=10;function H0(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(zt,"defaultMaxListeners",{enumerable:!0,get:function(){return yb},set:function(e){if(typeof e!="number"||e<0||Mw(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");yb=e}});zt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};zt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Mw(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Nw(e){return e._maxListeners===void 0?zt.defaultMaxListeners:e._maxListeners}zt.prototype.getMaxListeners=function(){return Nw(this)};zt.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",l=this._events;if(l!==void 0)i=i&&l.error===void 0;else if(!i)return!1;if(i){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var c=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw c.context=s,c}var h=l[t];if(h===void 0)return!1;if(typeof h=="function")_b(h,this,n);else for(var p=h.length,g=Vw(h,p),r=0;r<p;++r)_b(g[r],this,n);return!0};function Fw(e,t,n,r){var i,l,s;if(H0(n),l=e._events,l===void 0?(l=e._events=Object.create(null),e._eventsCount=0):(l.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),l=e._events),s=l[t]),s===void 0)s=l[t]=n,++e._eventsCount;else if(typeof s=="function"?s=l[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=Nw(e),i>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,eA(c)}return e}zt.prototype.addListener=function(t,n){return Fw(this,t,n,!1)};zt.prototype.on=zt.prototype.addListener;zt.prototype.prependListener=function(t,n){return Fw(this,t,n,!0)};function tA(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function $w(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=tA.bind(r);return i.listener=n,r.wrapFn=i,i}zt.prototype.once=function(t,n){return H0(n),this.on(t,$w(this,t,n)),this};zt.prototype.prependOnceListener=function(t,n){return H0(n),this.prependListener(t,$w(this,t,n)),this};zt.prototype.removeListener=function(t,n){var r,i,l,s,c;if(H0(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(l=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){c=r[s].listener,l=s;break}if(l<0)return this;l===0?r.shift():nA(r,l),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,c||n)}return this};zt.prototype.off=zt.prototype.removeListener;zt.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var l=Object.keys(r),s;for(i=0;i<l.length;++i)s=l[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function Bw(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?rA(i):Vw(i,i.length)}zt.prototype.listeners=function(t){return Bw(this,t,!0)};zt.prototype.rawListeners=function(t){return Bw(this,t,!1)};zt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Uw.call(e,t)};zt.prototype.listenerCount=Uw;function Uw(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}zt.prototype.eventNames=function(){return this._eventsCount>0?Hp(this._events):[]};function Vw(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function nA(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function rA(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function aA(e,t){return new Promise(function(n,r){function i(s){e.removeListener(t,l),r(s)}function l(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}Hw(e,t,l,{once:!0}),t!=="error"&&iA(e,i,{once:!0})})}function iA(e,t,n){typeof e.on=="function"&&Hw(e,"error",t,n)}function Hw(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(l){r.once&&e.removeEventListener(t,i),n(l)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var oA=(e=>(e.cylinder="get_cylinder_gcode",e.plane="get_process_gcode",e.feeding="get_feeding_gcode",e.expand="get_expand_gcode",e))(oA||{}),sA=(e=>(e.x="x",e.y="y",e.u="u",e))(sA||{}),ha=(e=>(e.BITMAP="BITMAP",e.VECTOR="VECTOR",e))(ha||{}),ta=(e=>(e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e.ERROR="ERROR",e.RECEIVE="RECEIVE",e))(ta||{}),zw=(e=>(e[e.READY=0]="READY",e[e.UPLOADING=1]="UPLOADING",e[e.WORKING=2]="WORKING",e[e.PAUSE=3]="PAUSE",e[e.ABORT=4]="ABORT",e[e.CANCEL=5]="CANCEL",e[e.DONE=6]="DONE",e))(zw||{}),Fn=(e=>(e.NOTE="note",e.HEAD="head",e.TAIL="tail",e.VECTOR_HEAD="vectorHead",e.VECTOR_TAIL="vectorTail",e.BITMAP_HEAD="bitmapHead",e.BITMAP_TAIL="bitmapTail",e))(Fn||{});const lA={VECTOR_CUTTING:10036991,VECTOR_ENGRAVING:16421416,FILL_VECTOR_ENGRAVING:16421416,BITMAP_ENGRAVING:16421416,KNIFE_CUTTING:2597107};var _u=(e=>(e.LASER_PLANE="LASER_PLANE",e.LASER_CYLINDER="LASER_CYLINDER",e.FREE_PLANE="FREE_PLANE",e.PASS_THROUGH="PASS_THROUGH",e.KNIFE_CUT="KNIFE_CUT",e.PRINTER_KNIFE_CUT="PRINTER_KNIFE_CUT",e.SUPER_LASER_PLANE="SUPER_LASER_PLANE",e.LASER_CONVEYOR_FEEDER="LASER_CONVEYOR_FEEDER",e.LASER_EXTENDER="LASER_EXTENDER",e.CURVE_PROCESS="CURVE_PROCESS",e))(_u||{}),jw=(e=>(e.OFFICIAL="official",e.CUSTOMIZE="customize",e))(jw||{}),b_=(e=>(e[e.text=0]="text",e[e.textWithArgs=1]="textWithArgs",e[e.textWidthEvent=2]="textWidthEvent",e))(b_||{});const uA={catch_data_empty:"device.process.catch_data_empty",no_elements:"device.process.no_elements",no_vector_elements:"device.process.no_vector_elements",element_out_zoom:"device.process.element_out_zoom",device_is_working:"device.process.device_is_working",request_status_fail:"device.process.request_status_fail",device_is_offline:"device.process.device_is_offline"};var cA=(e=>(e.ROLLER="roller",e.CATCH="catch",e))(cA||{}),Ts=(e=>(e.LEFT="left",e.RIGHT="right",e.TOP="top",e.BOTTOM="bottom",e))(Ts||{}),Gw=(e=>(e.P_IDLE="P_IDLE",e.P_WORK="P_WORK",e.UPGRADE="UPGRADE",e.P_SLEEP="P_SLEEP",e.P_ERROR="P_ERROR",e.P_WIFI_CONFIG="P_WIFI_CONFIG",e.P_TESTING="P_TESTING",e.P_MEASURE="P_MEASURE",e.P_WORKING=" P_WORKING",e.WORK="Work",e.P_PAUSE="P_PAUSE",e.P_WORK_DONE="P_WORK_DONE",e.P_USB_KEY_LOCK="P_USB_KEY_LOCK",e))(Gw||{}),l1=(e=>(e.OUTLINE="outline",e.RECT="rect",e.SCAN="scan",e))(l1||{}),fA=(e=>(e.totalTime="totalTime",e.visible="visible",e.isInProcessing="isInProcessing",e.isPaused="isPaused",e.pressButtonRemindVisible="pressButtonRemindVisible",e.isUploadingGCode="isUploadingGCode",e.isCalculatedGCode="isCalculatedGCode",e.cancelUploadLoading="cancelUploadLoading",e.uploadPercentage="uploadPercentage",e.cancelProcessingLoading="cancelProcessingLoading",e.pauseProcessingLoading="pauseProcessingLoading",e.isFinishProcessing="isFinishProcessing",e.isUploaded="isUploaded",e.isCanceled="isCanceled",e.stepName="stepName",e.gcodeExportVisible="gcodeExportVisible",e))(fA||{}),ni=(e=>(e.CURVE_MEASURE="CURVE_MEASURE",e.CURVE_MEASURE_CANCEL="CURVE_MEASURE_CANCEL",e.SET_CURVE_PREVIEW_DISABLED="SET_CURVE_PREVIEW_DISABLED",e.CURVE_PREVIEW="CURVE_PREVIEW",e.MARK_POSITION="MARK_POSITION",e.MARK_POSITION_DONE="MARK_POSITION_DONE",e.MARK_POSITION_CANCEL="MARK_POSITION_CANCEL",e.UPDATE_PROCESSING_AREA="UPDATE_PROCESSING_AREA",e.BATCH_UPDATE_PROCESSING_AREA="BATCH_UPDATE_PROCESSING_AREA",e.UPDATE_DEVICE_INFO="UPDATE_DEVICE_INFO",e.DEVICE_STATE_CHANGE="DEVICE_STATE_CHANGE",e.UPDATE_CANVAS_BACK_DROP="UPDATE_CANVAS_BACK_DROP",e.CLEAN_CANVAS_BACK_DROP="CLEAN_CANVAS_BACK_DROP",e.DESTROY_CANVAS_PLUGIN="DESTROY_CANVAS_PLUGIN",e.UPDATE_CANVAS_LOCAL_BACK_DROP="UPDATE_CANVAS_LOCAL_BACK_DROP",e.SET_HAS_CLOSE_IMG="SET_HAS_CLOSE_IMG",e.MOVE_CYLINDER="MOVE_CYLINDER",e.UPDATE_POWER="UPDATE_POWER",e.UPDATE_GMODE="UPDATE_GMODE",e.SET_KEEP_ALIVE_MESSAGE="SET_KEEP_ALIVE_MESSAGE",e.UPDATE_WALK_BORDER_PARAMS="UPDATE_WALK_BORDER_PARAMS",e.UPDATE_WALK_BORDER_TIP_MODAL_VISIBLE="UPDATE_WALK_BORDER_TIP_MODAL_VISIBLE",e.UPDATE_AUTO_FOCUS_REMAIN_MODAL_VISIBLE="UPDATE_AUTO_FOCUS_REMAIN_MODAL_VISIBLE",e.UPDATE_PROCESSING_STATE="UPDATE_PROCESSING_STATE",e.DEVICE_SETTING_MODAL_VISIBLE="DEVICE_SETTING_MODAL_VISIBLE",e.UPDATE_PROCESSING_MODE_DATA="UPDATE_PROCESSING_MODE_DATA",e.UPDATE_WIFI_CONFIG_CONNECTED="UPDATE_WIFI_CONFIG_CONNECTED",e.UPDATE_INIT_ORIGIN_STATUS="UPDATE_INIT_ORIGIN_STATUS",e))(ni||{}),Oo=(e=>(e.UPDATE_PROCESSING_AREA="UPDATE_PROCESSING_AREA",e.UPDATE_CANVAS_INIT_STATUS="UPDATE_CANVAS_INIT_STATUS",e.UPDATE_DISPLAYS_STATUS="UPDATE_DISPLAYS_STATUS",e.UPDATE_SELECTED_ATTR_STATUS="UPDATE_SELECTED_ATTR_STATUS",e.UPDATE_CYLINDER_STATUS="UPDATE_CYLINDER_STATUS",e.CLEAR_ALL_CYLINDER="CLEAR_ALL_CYLINDER",e.CANCEL_CURRENT_CYLINDER="CANCEL_CURRENT_CYLINDER",e.UPDATE_CURVE_PREVIEW_DISABLED="UPDATE_CURVE_PREVIEW_DISABLED",e))(Oo||{}),gr=(e=>(e.ETH="ETH",e.WIFI="WIFI",e.SERIAL="SERIAL",e))(gr||{}),sn=(e=>(e.D1Pro="D1Pro",e.D1="D1",e.D2="D2",e.M1="M1",e.P1="P1",e.P2="P2",e.F1="F1",e))(sn||{}),pt=(e=>(e.IDLE="IDLE",e.FRAME_READY="FRAME_READY",e.FRAME_WORKING="FRAME_WORKING",e.BEFORE_START="BEFORE_START",e.START_PROCESS="START_PROCESS",e.PAUSE_PROCESS="PAUSE_PROCESS",e.CANCEL_PROCESS="CANCEL_PROCESS",e.FINISH_PROCESS="FINISH_PROCESS",e.WORK="Work",e.SLEEP="SLEEP",e.DRAIN="drain",e.ERROR="error",e.MODE_CHANGE="MODE_CHANGE",e))(pt||{}),zp=(e=>(e.D1Pro="xTool_D1P_xxxxxx",e.D1="xTool_D1_xxxxxx",e.M1="xTool_M1_xxxxxx",e.P1="xTool_P1_xxxxxx",e.P2="xTool_P2_xxxxxx",e.F1="xTool_F1_xxxxxx",e.D2="xTool_S1_xxxxxx",e))(zp||{}),dA=(e=>(e.PREVIEW="PREVIEW",e.UPLOAD="UPLOAD",e.PROCESSING="PROCESSING",e))(dA||{}),$u=(e=>(e.VECTOR_CUTTING="VECTOR_CUTTING",e.VECTOR_ENGRAVING="VECTOR_ENGRAVING",e.FILL_VECTOR_ENGRAVING="FILL_VECTOR_ENGRAVING",e.BITMAP_ENGRAVING="BITMAP_ENGRAVING",e.KNIFE_CUTTING="KNIFE_CUTTING",e))($u||{}),u1=(e=>(e[e.greedy=0]="greedy",e[e.fastGreedy=1]="fastGreedy",e[e.scanning=2]="scanning",e[e.treeLike=3]="treeLike",e))(u1||{}),Ni=(e=>(e.LASER_PLANE="LASER_PLANE",e.LASER_CYLINDER="LASER_CYLINDER",e.FREE_PLANE="FREE_PLANE",e.PASS_THROUGH="PASS_THROUGH",e.SUPER_LASER_PLANE="SUPER_LASER_PLANE",e.KNIFE_CUT="KNIFE_CUT",e.PRINTER_KNIFE_CUT="PRINTER_KNIFE_CUT",e.LASER_CONVEYOR_FEEDER="LASER_CONVEYOR_FEEDER",e.CURVE_PROCESS="CURVE_PROCESS",e.LASER_CYLINDER_CURVED_SURFACE="LASER_CYLINDER_CURVED_SURFACE",e.LASER_EXTENDER="LASER_EXTENDER",e))(Ni||{}),Zn=(e=>(e.VECTOR_CUTTING="VECTOR_CUTTING",e.VECTOR_ENGRAVING="VECTOR_ENGRAVING",e.FILL_VECTOR_ENGRAVING="FILL_VECTOR_ENGRAVING",e.BITMAP_ENGRAVING="BITMAP_ENGRAVING",e.KNIFE_CUTTING="KNIFE_CUTTING",e))(Zn||{});const uu={[Zn.VECTOR_ENGRAVING]:{lineColor:16421416,fillColor:16421416,isFill:!1},[Zn.FILL_VECTOR_ENGRAVING]:{lineColor:16421416,fillColor:16421416,isFill:!0},[Zn.VECTOR_CUTTING]:{lineColor:10036991,fillColor:10036991,isFill:!1},[Zn.BITMAP_ENGRAVING]:{lineColor:16421416,fillColor:16421416,isFill:!0},[Zn.KNIFE_CUTTING]:{lineColor:2597107,fillColor:2597107,isFill:!1}};var bu,zr,wu,tt,Ps,Gf,Kn,Ls;class hA extends ra{constructor(n,r,i){super();de(this,"_canvasManager");Xe(this,bu,void 0);Xe(this,zr,void 0);Xe(this,wu,void 0);Xe(this,tt,{});Xe(this,Ps,{});Xe(this,Gf,{});Xe(this,Kn,"");Xe(this,Ls,[]);bt(this,bu,n),bt(this,zr,r),bt(this,wu,i)}get canvasManager(){return this._canvasManager}set canvasManager(n){this._canvasManager=n}set getSpeedScope(n){bt(this,wu,n)}get data(){return ee(this,tt)}get projectData(){const n=new Map;return Object.keys(ee(this,tt)).forEach(r=>{const i=Tr(ee(this,tt)[r]),l=Tr(i.displays),s=Ve(i,"mode"),c=Ve(i,"data");It(i,"data",{[s]:c});const h=new Map;Object.keys(l).forEach(p=>{h.set(p,l[p])}),It(i,"displays",h),n.set(r,i)}),n}set projectData(n){const r={};Tr(n).forEach((l,s)=>{var _;const c=Ve(l,"mode"),h=Ve(l,`data.${c}`),p=Ve(l,"displays"),g={};p.forEach((b,x)=>{const k=Ve(b,"type",""),T=Ve(b,"processingType","");k===ha.BITMAP&&T!==Zn.BITMAP_ENGRAVING&&It(b,"processingType",Zn.BITMAP_ENGRAVING);let P=Ve(b,"processIgnore",!1);const A=Ve(b,"data",{});Object.keys(A).forEach(L=>{var W;const F=A[L].parameter,N=(W=A[L])==null?void 0:W.processIgnore;N!==P&&N&&(P=N),Object.keys(F).forEach(te=>{["customize","official"].includes(te)&&(F[te]=Object.assign({},ee(this,zr)[L]||{},F[te]))})}),g[x]=b,It(b,"processIgnore",P)}),r[s]={mode:c,data:h,displays:g},(_=this.canvasManager)==null||_.canvasList.forEach((b,x)=>{x===s&&b.updateDisplayConfig({updateCanvasDisplay:!1,enableFill:!0,...uu[Zn.VECTOR_ENGRAVING]})})}),console.log(["=> dataSource set ProjectData",r,n]),bt(this,tt,Tr(r))}checkCustomProcessData(n,r){const i=Tr(n);return i.forEach(l=>{Ve(l,"displays").forEach(c=>{const h=Ve(c,"data",{});Object.keys(h).forEach(p=>{const g=Ve(h,`${p}.materialType`,"");!["customize","official"].includes(g)&&!r.some(_=>_.id===g)&&It(h,`${p}.materialType`,"customize")})})}),i}batchUpdateOfficialMaterial(n){Object.keys(ee(this,tt)).forEach(r=>{const i=Ve(ee(this,tt)[r],"data.material")||0,l=n.find(s=>s.id===i);i&&l&&(this.officialMaterial={id:r,value:l})})}get currentDeviceData(){return this.projectData.get(ee(this,Kn))}resetData(n){const r={};n.forEach(i=>{r[i.id]=this.setDefaultCanvasData(i.id),i.displays.forEach(l=>{const s=this.setDefaultDisplayData(i.id,l);It(r,`${i.id}.displays.${l.id}`,s)})}),bt(this,tt,Tr(r))}set officialMaterial(n){ee(this,Ps)[n.id]=n.value}getOfficialMaterial(){return ee(this,Ps)[ee(this,Kn)]}set customProcessData(n){ee(this,Gf)[n.id]=n}getCustomProcessData(n){const r=ee(this,Gf)[n];if(r){const{processingType:i=""}=r,l=gf(ee(this,zr)[i]);return hu(r,l)}return{}}batchUpdateCustomProcessData(n){n.forEach(r=>{this.customProcessData=r})}get canvasId(){return ee(this,Kn)}set canvasId(n){bt(this,Kn,n),this.setCanvas(n)}setCanvas(n){n&&!pu(ee(this,tt),n)&&(ee(this,tt)[n]=this.setDefaultCanvasData(n))}removeCanvas(n){n&&pu(ee(this,tt),n)&&delete ee(this,tt)[n]}setDefaultCanvasData(n){var s;const r=Ni.LASER_PLANE,i=Tr(ee(this,bu)[r])||{},l={mode:r,data:i,displays:{}};return(s=this.canvasManager)==null||s.canvasList.forEach((c,h)=>{h===n&&c.updateDisplayConfig({updateCanvasDisplay:!0,enableFill:!0,...uu[Zn.VECTOR_ENGRAVING]})}),l}get elements(){return ee(this,Ls)}set elements(n){bt(this,Ls,n),n.forEach(r=>{const i=`${ee(this,Kn)}.displays.${r.id}`;if(!pu(ee(this,tt),i)){const l=this.setDefaultDisplayData(ee(this,Kn),r);It(ee(this,tt),i,l)}})}setDefaultDisplayData(n,r){const{type:i,isFill:l}=r,s="customize";let c=i===ha.BITMAP?Zn.BITMAP_ENGRAVING:Zn.VECTOR_ENGRAVING;const h=Ve(ee(this,tt),`${n}.mode`,Ni.LASER_PLANE);[Ni.KNIFE_CUT,Ni.PRINTER_KNIFE_CUT].includes(h)&&i!==ha.BITMAP&&(c=Zn.KNIFE_CUTTING);const p={};Object.keys(ee(this,zr)).forEach(b=>{i===ha.BITMAP?b===Zn.BITMAP_ENGRAVING&&(p[b]={materialType:s,parameter:{customize:{...Tr(ee(this,zr)[b])}}}):b!==Zn.BITMAP_ENGRAVING&&(p[b]={materialType:s,parameter:{customize:{...Tr(ee(this,zr)[b])}}})});const g=Ve(ee(this,tt),`${n}.data.material`)||0,_=ee(this,Ps)[n];return g&&_&&_.id&&Object.keys(_.processingData).forEach(b=>{It(p,`${b}.materialType`,"official"),It(p,`${b}.parameter.official`,{...Tr(ee(this,zr)[b]),...hu(_.processingData[b],gf(ee(this,zr)[b]))})}),{isFill:l,type:i,processingType:c,data:p,processIgnore:!1}}setProcessDataValues(n,r){var h;let i={};const l={default:p=>{this.setProcessParamValues(p,n,r)},processIgnore:p=>{It(ee(this,tt),`${ee(this,Kn)}.displays.${p}.processIgnore`,r)},processingType:p=>{i=this.setProcessingType(p,r)},materialType:p=>{this.setMaterialType(p,r)},saveParam:p=>{this.saveParam(p,r)}},s=["processingType","materialType","saveParam"].includes(n),c=s?this.getDeviceFormValues():{};ee(this,Ls).forEach(({id:p})=>{if((l[n]||l.default)(p),s){const _=Ve(ee(this,tt),`${this.canvasId}.displays.${p}`,{});this.updateSpeed(c,_)}}),n==="processingType"&&!En(i)&&((h=this.canvasManager)==null||h.canvas.updateSelectedAttributes(i))}setProcessParamValues(n,r,i){const l=Ve(ee(this,tt),`${ee(this,Kn)}.displays.${n}`,{}),s=Ve(l,"processingType"),c=Ve(l,`data.${s}.materialType`);if(c!=="customize"){const _=Ve(l,`data.${s}.parameter.${c!=="official"?"customize":"official"}`,{});It(l,`data.${s}.materialType`,"customize"),It(l,`data.${s}.parameter.customize`,{..._,[r]:i})}else It(l,`data.${s}.parameter.customize.${r}`,i)}saveParam(n,r){const i=r.processingType;ga(i)||(this.setMaterialType(n,{materialType:r.id,data:r.data}),this.customProcessData=r)}setProcessingType(n,r){It(ee(this,tt),`${ee(this,Kn)}.displays.${n}.processingType`,r);const{isFill:i,fillColor:l,lineColor:s}=uu[r]||{};return{isFill:i,fillColor:l,lineColor:s}}setMaterialType(n,r){const{materialType:i,data:l}=r,s=Ve(ee(this,tt),`${ee(this,Kn)}.displays.${n}.processingType`)||"",c=Ve(ee(this,tt),`${ee(this,Kn)}.displays.${n}`,{}),h=Ve(c,`data.${s}.materialType`);let p=Ve(c,`data.${s}.parameter.customize`,{});h==="official"&&(p=Ve(c,`data.${s}.parameter.official`,{}));const g=gf(ee(this,zr)[s]);It(c,`data.${s}.materialType`,i),It(c,`data.${s}.parameter.customize`,{...hu(p,g),...hu(l,g)})}removeProcessingParam(n){Object.keys(ee(this,tt)).forEach(r=>{const i=Ve(ee(this,tt),`${r}.displays`,{});Object.keys(i).forEach(l=>{const s=Ve(i,`${l}.data`,{});Object.keys(s).forEach(c=>{Ve(s,`${c}.materialType`,"")===n&&It(s,`${c}.materialType`,"customize")})})})}assignProcessDataValues(n,r){const i=Object.assign({},n,r);return Object.keys(i).forEach(l=>{pu(n,l)&&!Dx(i[l],n[l])&&(i[l]=null)}),i}getProcessDataValues(){let n={};return ee(this,Ls).map(({id:r},i)=>{const l=Ve(ee(this,tt),`${ee(this,Kn)}.displays.${r}`,{}),s=Ve(l,"processIgnore"),c=Ve(l,"processingType"),h=Ve(l,`data.${c}.materialType`,""),p=["customize","official"].includes(h)?h:"customize",g=Ve(l,`data.${c}.parameter.${p}`)||{},_={processIgnore:s,processingType:c,materialType:h,...g};return(_==null?void 0:_.bitmapMode)==="Grayscale"&&(_.bitmapMode="grayscale"),i===0?n=_:n=this.assignProcessDataValues(n,_),_}),n}getSaveParamValues(){const n=this.getProcessDataValues(),r={};return Object.keys(n).forEach(i=>{["processIgnore","processingType","materialType"].includes(i)||(r[i]=n[i])}),r}getDeviceFormValues(){const n=Ve(ee(this,tt),`${this.canvasId}.mode`,""),r=Ve(ee(this,tt),`${this.canvasId}.data`,{});return{mode:n,...r}}setDeviceFormValues(n,r){const i={default:()=>{It(ee(this,tt),`${this.canvasId}.data.${n}`,r)},mode:()=>{this.setDeviceMode(r)},material:()=>{this.setMaterial(r)},diameter:()=>{It(ee(this,tt),`${this.canvasId}.data.diameter`,r),It(ee(this,tt),`${this.canvasId}.data.perimeter`,Us(r)?r*Math.PI:null)},perimeter:()=>{It(ee(this,tt),`${this.canvasId}.data.diameter`,Us(r)?r/Math.PI:null),It(ee(this,tt),`${this.canvasId}.data.perimeter`,r)}};if((i[n]||i.default)(n),["mode","material","rotaryAttachmentType","diameter","perimeter"].includes(n)){const s=this.getDeviceFormValues(),c=Ve(ee(this,tt),`${this.canvasId}.displays`,{});Object.keys(c).forEach(h=>{this.updateSpeed(s,c[h])})}}setMaterial(n){const{id:r,thickness:i=null,processingData:l}=n;let{diameter:s=null,perimeter:c=null}=n;s=s||null,c=s?s*Math.PI:null,r>0?this.officialMaterial={value:n,id:ee(this,Kn)}:delete ee(this,Ps)[ee(this,Kn)];const h=r,p=Ve(ee(this,tt),`${this.canvasId}.data`,{});Object.assign(p,{material:h,diameter:s,perimeter:c,thickness:i}),It(ee(this,tt),`${this.canvasId}.data`,p);const g=Ve(ee(this,tt),`${this.canvasId}.displays`,{});Object.keys(g).forEach(_=>{const b=Ve(g,`${_}.data`,{});Object.keys(b).forEach(x=>{const k=hu(l[x],gf(ee(this,zr)[x]));k&&r?(It(b,`${x}.materialType`,"official"),It(b,`${x}.parameter.official`,Object.assign(Tr(ee(this,zr)[x])||{},k))):(It(b,`${x}.materialType`,"customize"),delete b[`${x}.parameter.official`])})})}setDeviceMode({value:n,processingTypeList:r}){var x,k;const i=Tr(ee(this,bu)[n]||{}),l=Ve(ee(this,tt),`${this.canvasId}.data`)||{},{material:s=0,thickness:c=null,perimeter:h=null,diameter:p=null}=l;It(ee(this,tt),`${this.canvasId}.mode`,n),It(ee(this,tt),`${this.canvasId}.data`,Object.assign(i,{material:s,thickness:c,perimeter:h,diameter:p}));const g=Ve(ee(this,tt),`${this.canvasId}.displays`,{}),_=[];Object.keys(g).forEach(T=>{const A=Ve(g,`${T}.type`)===ha.BITMAP?ha.BITMAP:ha.VECTOR,L=Ve(g,`${T}.processingType`);if(A!==ha.BITMAP){const F=Kv(r,N=>N.imageType===A).map(N=>N.value);if(!En(F)&&!F.includes(L)){It(g,`${T}.processingType`,F[0]);const{isFill:N,fillColor:W,lineColor:te}=uu[F[0]]||{};_.push({id:T,config:{isFill:N,fillColor:W,lineColor:te}})}}}),(x=this.canvasManager)==null||x.canvas.updateMultiDisplayConfig(_);let b={updateCanvasDisplay:!1,enableFill:!0,...uu[Zn.VECTOR_ENGRAVING]};[Ni.KNIFE_CUT,Ni.PRINTER_KNIFE_CUT].includes(n)&&(b={updateCanvasDisplay:!1,enableFill:!1,...uu[Zn.KNIFE_CUTTING]}),(k=this.canvasManager)==null||k.canvas.updateDisplayConfig(b)}updateSpeed(n,r){const i=Ve(r,"processingType","");if(!i||[Ni.KNIFE_CUT,Ni.PRINTER_KNIFE_CUT].includes(n==null?void 0:n.mode)&&i===Zn.BITMAP_ENGRAVING)return;const l=Ve(r,`data.${i}.parameter`,{}),s=Ve(r,`data.${i}.materialType`,"customize");Object.keys(l).forEach(c=>{const h=ee(this,wu).call(this,n,{processingType:i}),p=Ve(l[c],"speed",1);let g=p;if(p>h.max)g=h.max;else if(p<h.max&&s!=="customize")if(s==="official"&&c==="official"){const _=this.getOfficialMaterial(),b=Ve(_,`processingData.${i}.speed`,p);g=Math.min(b,h.max)}else{const _=this.getCustomProcessData(s),b=Ve(_,"data.speed",p);g=Math.min(b,h.max)}It(l[c],"speed",g)})}get currentModeData(){return Ve(ee(this,tt),`${ee(this,Kn)}.data`)}setDisplays(n){const{sourceCanvasId:r,targetCanvasId:i,displayJSONs:l=[]}=n;En(l)||(l.forEach(s=>{const c=`${i}.displays.${s.id}`;if(pu(ee(this,tt),c))return;let h=Ve(ee(this,tt),`${r}.displays.${s.sourceId}`);ga(h)&&(h=Ve(ee(this,tt),`${i}.displays.${s.sourceId}`),ga(h)&&(h=this.setDefaultDisplayData(i,s))),It(ee(this,tt),c,Tr(h))}),console.log(["=> setDisplays",n,ee(this,tt)]))}dispose(){this.removeAllListeners()}}bu=new WeakMap,zr=new WeakMap,wu=new WeakMap,tt=new WeakMap,Ps=new WeakMap,Gf=new WeakMap,Kn=new WeakMap,Ls=new WeakMap;class vf extends ra{constructor(){super()}static init(t,n){this.clear();const r=new hA(t.deviceDataValues,t.elementDataValues,t.getSpeedScope.bind(t));r.canvasManager=n,this.dataSource=r,t.dataSource=r,console.log(["=> data source init"])}static update(t){this.dataSource&&(t.dataSource=this.dataSource,this.dataSource.getSpeedScope=t.getSpeedScope.bind(t))}static clear(){this.dataSource&&(this.dataSource.emit("reset"),this.dataSource.dispose(),this.dataSource=void 0)}}de(vf,"dataSource");function pA(e,t){t.forEach(n=>{Object.getOwnPropertyNames(n.prototype).forEach(r=>{Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(n.prototype,r)||Object.create(null))})})}const gA=function(e,t){if(!e||!t)return 0;const n=e.split("."),r=t.split(".");for(let i=0;i<n.length||i<r.length;++i){let l=0,s=0;if(i<n.length&&(l=parseInt(n[i])),i<r.length&&(s=parseInt(r[i])),l>s)return 1;if(l<s)return-1}return 0},c1=e=>new Promise(t=>{setTimeout(t,e)}),f1=()=>{const e=new AbortController;return{signal:e.signal,cancel(){e.abort()}}},mA="8080",d1=(e,t=mA)=>`http://${e}:${t}`,vA=Af.create({timeout:3e3}),h1=async(e,t,n)=>{const{url:r="",type:i="get",params:l,data:s,transformResult:c,...h}=e,{url:p,params:g,data:_,...b}=t||{};let x;Ay(_)?x=Object.assign({},s,_):x=_;const k={url:lr(p)?`${r+p}`:r,method:i,params:{...l,...g},data:x||s,...h,...b};try{let T=await vA(k).then(P=>P.data);if(Ay(T)&&"code"in T)if(T.code===0)T=T.data;else return r==="/device/machineInfo"?T:Promise.reject(T);return ut(c)?c(T):T}catch(T){return n===!0?T:Promise.reject(T)}},Pp=new Map;function _A(e,t){const n={cancel:r=>{const i=Pp.get(r);return ut(i)&&(i(),Pp.delete(r)),Promise.resolve("")}};return e.forEach(r=>{const{name:i,url:l="",type:s="get",params:c,timeout:h=3e3,list:p,port:g,transformResponse:_,headers:b,transformRequest:x,...k}=r;n[i]=async T=>{const P=A=>{let L=[];return A&&L.push(A),T!=null&&T.transformResponse&&(ma(T==null?void 0:T.transformResponse)?L=L.concat(T==null?void 0:T.transformResponse):L.push(T==null?void 0:T.transformResponse)),L};try{let A;if(ma(p)&&!En(p)){const L=p.map(N=>{const{url:W="",type:te="get",params:G,port:K,timeout:re=3e3,transformResponse:H,transformRequest:J,headers:ie}=N,oe={...G};return oe!=null&&oe.cmd&&typeof T=="string"&&(oe.cmd=`${oe.cmd} ${T}`),Af({baseURL:d1(t,K),url:W,method:te,timeout:re,params:oe,transformRequest:J,headers:ie,transformResponse:P(H),...k}).catch(le=>Promise.resolve(le))});A=(await Promise.all(L)).map(N=>N.data),ut(_)&&(A=_(A)),console.log({name:i,url:l,params:c,result:A})}else{const L={...c};L.cmd!==void 0&&typeof T=="string"&&(L.cmd?L.cmd=`${L.cmd} ${T}`:L.cmd=T);const F=Af.CancelToken,N=await Af({baseURL:d1(t,g),url:T!=null&&T.url?l+T.url:l,method:s,timeout:h,params:{...L,...T==null?void 0:T.params},data:(T==null?void 0:T.data)||s.toLocaleLowerCase()==="post"&&T,transformRequest:x,transformResponse:P(_),headers:b,cancelToken:new F(W=>{Pp.set(i,W)}),onDownloadProgress:W=>{ut(T==null?void 0:T.onDownloadProgress)&&(T==null||T.onDownloadProgress(W))},onUploadProgress:W=>{ut(T==null?void 0:T.onUploadProgress)&&(T==null||T.onUploadProgress(W))},...k});Pp.delete(i),A=N.data}return A}catch(A){return new Error(A)}}}),n}const w_=(e,t,n)=>{const r={};return e.forEach(i=>{const{name:l,list:s,port:c,transformResult:h,cmd:p,...g}=i,_=d1(t,c);r[l]=(b,x)=>{if((b==null?void 0:b.method)==="info")return Promise.resolve({baseUrl:_,...g});if(ma(s)&&!En(s)){const k=s.map(T=>{const P={baseURL:_,...g,...T};return p&&ut(n)?n(p,b,P):h1(P,b,x??!0)});return ut(h)?Promise.all(k).then(T=>h(T)):Promise.all(k)}else return p&&ut(n)?n(p,b,g):h1({baseURL:_,transformResult:h,...g},b,x)}}),r};function Ka(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function bb(e,t){for(var n="",r=0,i=-1,l=0,s,c=0;c<=e.length;++c){if(c<e.length)s=e.charCodeAt(c);else{if(s===47)break;s=47}if(s===47){if(!(i===c-1||l===1))if(i!==c-1&&l===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var h=n.lastIndexOf("/");if(h!==n.length-1){h===-1?(n="",r=0):(n=n.slice(0,h),r=n.length-1-n.lastIndexOf("/")),i=c,l=0;continue}}else if(n.length===2||n.length===1){n="",r=0,i=c,l=0;continue}}t&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+="/"+e.slice(i+1,c):n=e.slice(i+1,c),r=c-i-1;i=c,l=0}else s===46&&l!==-1?++l:l=-1}return n}function yA(e,t){var n=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+r:n+e+r:r}var yu={resolve:function(){for(var t="",n=!1,r,i=arguments.length-1;i>=-1&&!n;i--){var l;i>=0?l=arguments[i]:(r===void 0&&(r=process.cwd()),l=r),Ka(l),l.length!==0&&(t=l+"/"+t,n=l.charCodeAt(0)===47)}return t=bb(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(Ka(t),t.length===0)return".";var n=t.charCodeAt(0)===47,r=t.charCodeAt(t.length-1)===47;return t=bb(t,!n),t.length===0&&!n&&(t="."),t.length>0&&r&&(t+="/"),n?"/"+t:t},isAbsolute:function(t){return Ka(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,n=0;n<arguments.length;++n){var r=arguments[n];Ka(r),r.length>0&&(t===void 0?t=r:t+="/"+r)}return t===void 0?".":yu.normalize(t)},relative:function(t,n){if(Ka(t),Ka(n),t===n||(t=yu.resolve(t),n=yu.resolve(n),t===n))return"";for(var r=1;r<t.length&&t.charCodeAt(r)===47;++r);for(var i=t.length,l=i-r,s=1;s<n.length&&n.charCodeAt(s)===47;++s);for(var c=n.length,h=c-s,p=l<h?l:h,g=-1,_=0;_<=p;++_){if(_===p){if(h>p){if(n.charCodeAt(s+_)===47)return n.slice(s+_+1);if(_===0)return n.slice(s+_)}else l>p&&(t.charCodeAt(r+_)===47?g=_:_===0&&(g=0));break}var b=t.charCodeAt(r+_),x=n.charCodeAt(s+_);if(b!==x)break;b===47&&(g=_)}var k="";for(_=r+g+1;_<=i;++_)(_===i||t.charCodeAt(_)===47)&&(k.length===0?k+="..":k+="/..");return k.length>0?k+n.slice(s+g):(s+=g,n.charCodeAt(s)===47&&++s,n.slice(s))},_makeLong:function(t){return t},dirname:function(t){if(Ka(t),t.length===0)return".";for(var n=t.charCodeAt(0),r=n===47,i=-1,l=!0,s=t.length-1;s>=1;--s)if(n=t.charCodeAt(s),n===47){if(!l){i=s;break}}else l=!1;return i===-1?r?"/":".":r&&i===1?"//":t.slice(0,i)},basename:function(t,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');Ka(t);var r=0,i=-1,l=!0,s;if(n!==void 0&&n.length>0&&n.length<=t.length){if(n.length===t.length&&n===t)return"";var c=n.length-1,h=-1;for(s=t.length-1;s>=0;--s){var p=t.charCodeAt(s);if(p===47){if(!l){r=s+1;break}}else h===-1&&(l=!1,h=s+1),c>=0&&(p===n.charCodeAt(c)?--c===-1&&(i=s):(c=-1,i=h))}return r===i?i=h:i===-1&&(i=t.length),t.slice(r,i)}else{for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!l){r=s+1;break}}else i===-1&&(l=!1,i=s+1);return i===-1?"":t.slice(r,i)}},extname:function(t){Ka(t);for(var n=-1,r=0,i=-1,l=!0,s=0,c=t.length-1;c>=0;--c){var h=t.charCodeAt(c);if(h===47){if(!l){r=c+1;break}continue}i===-1&&(l=!1,i=c+1),h===46?n===-1?n=c:s!==1&&(s=1):n!==-1&&(s=-1)}return n===-1||i===-1||s===0||s===1&&n===i-1&&n===r+1?"":t.slice(n,i)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return yA("/",t)},parse:function(t){Ka(t);var n={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return n;var r=t.charCodeAt(0),i=r===47,l;i?(n.root="/",l=1):l=0;for(var s=-1,c=0,h=-1,p=!0,g=t.length-1,_=0;g>=l;--g){if(r=t.charCodeAt(g),r===47){if(!p){c=g+1;break}continue}h===-1&&(p=!1,h=g+1),r===46?s===-1?s=g:_!==1&&(_=1):s!==-1&&(_=-1)}return s===-1||h===-1||_===0||_===1&&s===h-1&&s===c+1?h!==-1&&(c===0&&i?n.base=n.name=t.slice(1,h):n.base=n.name=t.slice(c,h)):(c===0&&i?(n.name=t.slice(1,s),n.base=t.slice(1,h)):(n.name=t.slice(c,s),n.base=t.slice(c,h)),n.ext=t.slice(s,h)),c>0?n.dir=t.slice(0,c-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};yu.posix=yu;var bA=yu;const Ww=bA,qw=e=>{const t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});e.dispatchEvent(t)},wA=(e,t)=>{const n=document.createElement("a");n.setAttribute("download",t||"image.png"),n.setAttribute("href",e),n.setAttribute("target","_blank"),qw(n)},i0=(e,t)=>{const n=window.URL.createObjectURL(t);wA(n,e),window.URL.revokeObjectURL(n)},wb=e=>new Promise(async(t,n)=>{if(lr(e)){const l=await xA(e);e=new Blob([l])}const r=URL.createObjectURL(e),i=new Image;i.src=r,i.onload=()=>{URL.revokeObjectURL(r),t(i)},i.onerror=n}),p1=(e,t="text")=>{var n;if(lr(e)){const r=(n=window.MeApi)==null?void 0:n.fileHelper;return r?t==="text"?r.read2Str(e):r.read2Buffer(e):Promise.reject(`read file error. path: ${e}`)}return new Promise((r,i)=>{const l=new FileReader;l.onload=()=>{r(l.result)},l.onerror=()=>{i(`read file error. path: ${e}`)},t==="text"?l.readAsText(e):l.readAsArrayBuffer(e)})},z0=async e=>{var t;if(lr(e)){const n=(t=window.MeApi)==null?void 0:t.fileHelper;if(n){const r=await n.read2Buffer(e),i=new Blob([r]);return p1(i)}}return p1(e)},Sb=(e,t)=>typeof t=="object"&&t!==null&&t.dataType==="Map"&&t.value instanceof Array?new Map(t.value):t,SA=e=>{var t;if(lr(e)){const n=(t=window.MeApi)==null?void 0:t.fileHelper;if(n)return n.read2Str(e).then(r=>JSON.parse(r,Sb))}return z0(e).then(n=>JSON.parse(n,Sb))},xA=async e=>p1(e,"arraybuffer");class EA extends Error{}const kA=(e,t)=>{var i;console.log(["=> openFileDialog"]);const n=(i=window.MeApi)==null?void 0:i.fileHelper;if(n)return n.openDialog({filters:[{name:"file",extensions:e}],type:t});const r=()=>{let l=document.querySelector("#fileDialog");return l instanceof HTMLInputElement||(l=document.createElement("input"),l.id="fileDialog",l.style.position="absolute",l.style.visibility="hidden",l.style.top="-100%",l.setAttribute("type","file")),l};return new Promise((l,s)=>{let c=null,h=!1;const p=r(),g=()=>{p.value=""};e&&(ma(e)&&(e=`.${e.join(",.")}`),p.setAttribute("accept",e));const _=()=>{console.log(["=> openFileDialog: handleClick"]),h=!0},b=k=>{var T;if(console.log(["=> openFileDialog: handleChange",(T=k==null?void 0:k.target)==null?void 0:T.files]),clearTimeout(c),k){const P=k.target.files;if(P.length>0){l(P[0]),g();return}}g(),s(new EA("cancel open file."))},x=()=>{console.log(["= openFileDialog: window handleFocus"]),h&&(h=!1,clearTimeout(c),c=setTimeout(()=>{b()},1e3))};p.onchange=b,p.onclick=_,window.addEventListener("focus",x,{once:!0}),qw(p)})},CA=(e,t)=>{var r;const n=(r=window.MeApi)==null?void 0:r.fileHelper;if(n&&e)return n.rename(e,t)},xb=async(e,t,n=!1,r={})=>{var l;const i=(l=window.MeApi)==null?void 0:l.fileHelper;if(i)return t instanceof ArrayBuffer&&(t=new Uint8Array(t)),await i.save(e,t,{write:"utf8",save:{defaultPath:e,...r},saveAs:n});if(t instanceof ArrayBuffer){const s=new Blob([t]);i0(e,s)}else if(lr(t)){const s=new File([t],e);i0(e,s)}else console.warn(["=> not support save file content",{fp:e,content:t}])},TA=e=>{var t,n;return(t=window.MeApi)!=null&&t.path?(n=window.MeApi)==null?void 0:n.path.extname(e):Ww.extname(e)},Yw=(e,t)=>{var n,r;return(n=window.MeApi)!=null&&n.path?(r=window.MeApi)==null?void 0:r.path.basename(e,t):Ww.basename(e,t)},AA={id:0,power:0,name:{zh:"device.common.user_defined_material",en:"device.common.user_defined_material"},thickness:null,diameter:null,perimeter:null,processingData:{VECTOR_CUTTING:{power:1,speed:16,repeat:1,enableBreakPoint:!1,breakPointSize:.5,breakPointCount:2,breakPointPower:0},VECTOR_ENGRAVING:{power:1,speed:20,repeat:1},FILL_VECTOR_ENGRAVING:{power:1,speed:80,repeat:1,density:100,bitmapMode:"grayscale",bitmapScanMode:"zMode"},BITMAP_ENGRAVING:{power:1,speed:80,repeat:1,density:100,bitmapMode:"grayscale",bitmapScanMode:"zMode"},KNIFE_CUTTING:{cutPressure:45,speed:40,repeat:1}}},Kw=()=>JSON.parse(localStorage.getItem(m_().LOCAL_MATERIALS)||"[]"),Eb=e=>{localStorage.setItem(m_().LOCAL_MATERIALS,JSON.stringify(e))},PA=({identifier:e,power:t,materialList:n})=>{const{VECTOR_CUTTING:r,VECTOR_ENGRAVING:i,FILL_VECTOR_ENGRAVING:l,BITMAP_ENGRAVING:s,KNIFE_CUTTING:c}=$u,h=[];return n.forEach(({id:p,name:g,thickness:_,diameter:b,perimeter:x,machineParas:k})=>{var te,G,K,re,H,J,ie,oe;Gs(k)&&(k=[]);const T={},P=(le,$,Y)=>{if(ma(Y)){const z=Y.map(V=>k.find(ue=>ue.processingType.code===le&&ue.laserPower.code===V.toString()&&ue.deviceMode.code===$)).filter(V=>V);return En(z)?void 0:z.length===1?z[0]:z.find(V=>V.laserPower.code!=="2")}return k.find(z=>z.processingType.code===le&&z.laserPower.code===Y.toString()&&z.deviceMode.code===$)},A=P(r,e,t),L=P(i,e,t),F=P(l,e,t),N=P(s,e,t),W=P(c,e,t);A&&(T[r]={processingLightSource:(te=A==null?void 0:A.laserSource)==null?void 0:te.code,power:A.power,speed:A.speed,repeat:A.repeat}),L&&(T[i]={processingLightSource:(G=L==null?void 0:L.laserSource)==null?void 0:G.code,power:L.power,speed:L.speed,repeat:L.repeat}),F&&(T[l]={processingLightSource:(K=F==null?void 0:F.laserSource)==null?void 0:K.code,power:F.power,speed:F.speed,repeat:F.repeat,density:Number(((re=F.density)==null?void 0:re.name)||""),bitmapMode:(H=F.bitmapMode)==null?void 0:H.name}),N&&(T[s]={processingLightSource:(J=N==null?void 0:N.laserSource)==null?void 0:J.code,power:N.power,speed:N.speed,repeat:N.repeat,density:Number(((ie=N.density)==null?void 0:ie.name)||""),bitmapMode:(oe=N.bitmapMode)==null?void 0:oe.name,dpi:N.dpi,dotDuration:N.dotTime,powerMinMaxRange:[N.minPower,N.power]}),W&&(T[c]={cutPressure:W.cutPressure,speed:W.speed,repeat:W.repeat}),En(T)||h.push({id:p,name:g,thickness:_,diameter:b,perimeter:x,power:t,processingData:T})}),h},LA=(e,t)=>{const n=[];return t.forEach(r=>{let i=!1;e.forEach(l=>{r.processingData[l]&&(i=!0)}),i&&n.push(r)}),n},Au=()=>{var e;return(e=window.MeApi)==null?void 0:e.fileHelper},IA=async(e,t,n,r)=>{var l;const i=(l=window.MeApi)==null?void 0:l.fileHelper;if(i)return await i.saveXCS(e,t,n,r);{const s=new File([t],e);i0(e,s)}},hG=(e,t)=>{if(Au())return Au().shareXCS(e).then(n=>{t(n)})},pG=e=>{if(Au())return Au().deleteTmp().then(t=>{e&&e(t)})},gG=e=>{if(Au())return Au().getTmpProjectInfo().then(t=>{e(t)})},RA=new RegExp("^/var/mobile/Containers/Data/Application.*/tmp/project.tmp$"),mG=e=>RA.test(e),OA=new RegExp("^/var/mobile.*$"),DA=e=>OA.test(e),vG=e=>{if(DA(e)){const t=e.split("/"),n=t[t.length-1];return decodeURI(n.slice(0,-4))}return e},kb=(e,t)=>{if(e&&e.includes("/")){const n=e.split("/");let r=n[n.length-1];return t&&(r=r.slice(0,-4)),decodeURI(r)}return e},Ov=(e,t={x:1,y:1},n=!1,r=!0,i=0,l=0)=>{let s="";for(let c=0;c<e.length;c++){for(let h=0;h<e[c].length;h++){const p=n&&![0,e[c].length-1].includes(h);h?s+=p?"Q":"L":s+="M",s+=p?`${i+(e[c][h].x+e[c][h-1].x)/2/t.x} ${l+(e[c][h].y+e[c][h-1].y)/2/t.y} ${i+(e[c][h].x+e[c][h+1].x)/2/t.x} ${l+(e[c][h].y+e[c][h+1].y)/2/t.y}`:`${i+e[c][h].x/t.x}, ${l+e[c][h].y/t.y}`}r&&(s+="Z")}return s===""&&(s="M0,0"),s},MA=(e,t)=>{const{x:n=0,y:r=0,scaleX:i=1,scaleY:l=1}=t;for(let s=0;s<e.length;s++)for(let c=0;c<e[s].length;c++)e[s][c].x=n+e[s][c].x/i,e[s][c].y=r+e[s][c].y/l},Lp=e=>`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" style="stroke: #000000;fill: none;stroke-width: 1px;" xml:space="preserve">
    <path d="${e}" />
  </svg>`,Dv=e=>{if(!e)return"";const t=e.match(/<path\s+d="([^"]+)"/)||[];return t.length>1?t[1]:""};function Hs(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Pr(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function jp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jp=function(n){return typeof n}:jp=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},jp(e)}function ui(e){Pr(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||jp(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function NA(e,t){Pr(2,arguments);var n=ui(e).getTime(),r=Hs(t);return new Date(n+r)}var FA={};function j0(){return FA}function $A(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Gp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Gp=function(n){return typeof n}:Gp=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Gp(e)}function BA(e){return Pr(1,arguments),e instanceof Date||Gp(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function UA(e){if(Pr(1,arguments),!BA(e)&&typeof e!="number")return!1;var t=ui(e);return!isNaN(Number(t))}function VA(e,t){Pr(2,arguments);var n=Hs(t);return NA(e,-n)}var HA=864e5;function zA(e){Pr(1,arguments);var t=ui(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),i=n-r;return Math.floor(i/HA)+1}function o0(e){Pr(1,arguments);var t=1,n=ui(e),r=n.getUTCDay(),i=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function Zw(e){Pr(1,arguments);var t=ui(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=o0(r),l=new Date(0);l.setUTCFullYear(n,0,4),l.setUTCHours(0,0,0,0);var s=o0(l);return t.getTime()>=i.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}function jA(e){Pr(1,arguments);var t=Zw(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=o0(n);return r}var GA=6048e5;function WA(e){Pr(1,arguments);var t=ui(e),n=o0(t).getTime()-jA(t).getTime();return Math.round(n/GA)+1}function s0(e,t){var n,r,i,l,s,c,h,p;Pr(1,arguments);var g=j0(),_=Hs((n=(r=(i=(l=t==null?void 0:t.weekStartsOn)!==null&&l!==void 0?l:t==null||(s=t.locale)===null||s===void 0||(c=s.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&i!==void 0?i:g.weekStartsOn)!==null&&r!==void 0?r:(h=g.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&n!==void 0?n:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var b=ui(e),x=b.getUTCDay(),k=(x<_?7:0)+x-_;return b.setUTCDate(b.getUTCDate()-k),b.setUTCHours(0,0,0,0),b}function Jw(e,t){var n,r,i,l,s,c,h,p;Pr(1,arguments);var g=ui(e),_=g.getUTCFullYear(),b=j0(),x=Hs((n=(r=(i=(l=t==null?void 0:t.firstWeekContainsDate)!==null&&l!==void 0?l:t==null||(s=t.locale)===null||s===void 0||(c=s.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&i!==void 0?i:b.firstWeekContainsDate)!==null&&r!==void 0?r:(h=b.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(x>=1&&x<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=new Date(0);k.setUTCFullYear(_+1,0,x),k.setUTCHours(0,0,0,0);var T=s0(k,t),P=new Date(0);P.setUTCFullYear(_,0,x),P.setUTCHours(0,0,0,0);var A=s0(P,t);return g.getTime()>=T.getTime()?_+1:g.getTime()>=A.getTime()?_:_-1}function qA(e,t){var n,r,i,l,s,c,h,p;Pr(1,arguments);var g=j0(),_=Hs((n=(r=(i=(l=t==null?void 0:t.firstWeekContainsDate)!==null&&l!==void 0?l:t==null||(s=t.locale)===null||s===void 0||(c=s.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&i!==void 0?i:g.firstWeekContainsDate)!==null&&r!==void 0?r:(h=g.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&n!==void 0?n:1),b=Jw(e,t),x=new Date(0);x.setUTCFullYear(b,0,_),x.setUTCHours(0,0,0,0);var k=s0(x,t);return k}var YA=6048e5;function KA(e,t){Pr(1,arguments);var n=ui(e),r=s0(n,t).getTime()-qA(n,t).getTime();return Math.round(r/YA)+1}function $t(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var ZA={y:function(t,n){var r=t.getUTCFullYear(),i=r>0?r:1-r;return $t(n==="yy"?i%100:i,n.length)},M:function(t,n){var r=t.getUTCMonth();return n==="M"?String(r+1):$t(r+1,2)},d:function(t,n){return $t(t.getUTCDate(),n.length)},a:function(t,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(t,n){return $t(t.getUTCHours()%12||12,n.length)},H:function(t,n){return $t(t.getUTCHours(),n.length)},m:function(t,n){return $t(t.getUTCMinutes(),n.length)},s:function(t,n){return $t(t.getUTCSeconds(),n.length)},S:function(t,n){var r=n.length,i=t.getUTCMilliseconds(),l=Math.floor(i*Math.pow(10,r-3));return $t(l,n.length)}};const Po=ZA;var cu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},JA={G:function(t,n,r){var i=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(t,n,r){if(n==="yo"){var i=t.getUTCFullYear(),l=i>0?i:1-i;return r.ordinalNumber(l,{unit:"year"})}return Po.y(t,n)},Y:function(t,n,r,i){var l=Jw(t,i),s=l>0?l:1-l;if(n==="YY"){var c=s%100;return $t(c,2)}return n==="Yo"?r.ordinalNumber(s,{unit:"year"}):$t(s,n.length)},R:function(t,n){var r=Zw(t);return $t(r,n.length)},u:function(t,n){var r=t.getUTCFullYear();return $t(r,n.length)},Q:function(t,n,r){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return $t(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,n,r){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return $t(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,n,r){var i=t.getUTCMonth();switch(n){case"M":case"MM":return Po.M(t,n);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(t,n,r){var i=t.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return $t(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(t,n,r,i){var l=KA(t,i);return n==="wo"?r.ordinalNumber(l,{unit:"week"}):$t(l,n.length)},I:function(t,n,r){var i=WA(t);return n==="Io"?r.ordinalNumber(i,{unit:"week"}):$t(i,n.length)},d:function(t,n,r){return n==="do"?r.ordinalNumber(t.getUTCDate(),{unit:"date"}):Po.d(t,n)},D:function(t,n,r){var i=zA(t);return n==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):$t(i,n.length)},E:function(t,n,r){var i=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(t,n,r,i){var l=t.getUTCDay(),s=(l-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(s);case"ee":return $t(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(l,{width:"short",context:"formatting"});case"eeee":default:return r.day(l,{width:"wide",context:"formatting"})}},c:function(t,n,r,i){var l=t.getUTCDay(),s=(l-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(s);case"cc":return $t(s,n.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(l,{width:"narrow",context:"standalone"});case"cccccc":return r.day(l,{width:"short",context:"standalone"});case"cccc":default:return r.day(l,{width:"wide",context:"standalone"})}},i:function(t,n,r){var i=t.getUTCDay(),l=i===0?7:i;switch(n){case"i":return String(l);case"ii":return $t(l,n.length);case"io":return r.ordinalNumber(l,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(t,n,r){var i=t.getUTCHours(),l=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(t,n,r){var i=t.getUTCHours(),l;switch(i===12?l=cu.noon:i===0?l=cu.midnight:l=i/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(t,n,r){var i=t.getUTCHours(),l;switch(i>=17?l=cu.evening:i>=12?l=cu.afternoon:i>=4?l=cu.morning:l=cu.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(t,n,r){if(n==="ho"){var i=t.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return Po.h(t,n)},H:function(t,n,r){return n==="Ho"?r.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Po.H(t,n)},K:function(t,n,r){var i=t.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(i,{unit:"hour"}):$t(i,n.length)},k:function(t,n,r){var i=t.getUTCHours();return i===0&&(i=24),n==="ko"?r.ordinalNumber(i,{unit:"hour"}):$t(i,n.length)},m:function(t,n,r){return n==="mo"?r.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Po.m(t,n)},s:function(t,n,r){return n==="so"?r.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Po.s(t,n)},S:function(t,n){return Po.S(t,n)},X:function(t,n,r,i){var l=i._originalDate||t,s=l.getTimezoneOffset();if(s===0)return"Z";switch(n){case"X":return Tb(s);case"XXXX":case"XX":return Es(s);case"XXXXX":case"XXX":default:return Es(s,":")}},x:function(t,n,r,i){var l=i._originalDate||t,s=l.getTimezoneOffset();switch(n){case"x":return Tb(s);case"xxxx":case"xx":return Es(s);case"xxxxx":case"xxx":default:return Es(s,":")}},O:function(t,n,r,i){var l=i._originalDate||t,s=l.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Cb(s,":");case"OOOO":default:return"GMT"+Es(s,":")}},z:function(t,n,r,i){var l=i._originalDate||t,s=l.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Cb(s,":");case"zzzz":default:return"GMT"+Es(s,":")}},t:function(t,n,r,i){var l=i._originalDate||t,s=Math.floor(l.getTime()/1e3);return $t(s,n.length)},T:function(t,n,r,i){var l=i._originalDate||t,s=l.getTime();return $t(s,n.length)}};function Cb(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),l=r%60;if(l===0)return n+String(i);var s=t||"";return n+String(i)+s+$t(l,2)}function Tb(e,t){if(e%60===0){var n=e>0?"-":"+";return n+$t(Math.abs(e)/60,2)}return Es(e,t)}function Es(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e),l=$t(Math.floor(i/60),2),s=$t(i%60,2);return r+l+n+s}const XA=JA;var Ab=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Xw=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},QA=function(t,n){var r=t.match(/(P+)(p+)?/)||[],i=r[1],l=r[2];if(!l)return Ab(t,n);var s;switch(i){case"P":s=n.dateTime({width:"short"});break;case"PP":s=n.dateTime({width:"medium"});break;case"PPP":s=n.dateTime({width:"long"});break;case"PPPP":default:s=n.dateTime({width:"full"});break}return s.replace("{{date}}",Ab(i,n)).replace("{{time}}",Xw(l,n))},e9={p:Xw,P:QA};const t9=e9;var n9=["D","DD"],r9=["YY","YYYY"];function a9(e){return n9.indexOf(e)!==-1}function i9(e){return r9.indexOf(e)!==-1}function Pb(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var o9={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},s9=function(t,n,r){var i,l=o9[t];return typeof l=="string"?i=l:n===1?i=l.one:i=l.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};const l9=s9;function Mv(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var u9={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},c9={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},f9={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},d9={date:Mv({formats:u9,defaultWidth:"full"}),time:Mv({formats:c9,defaultWidth:"full"}),dateTime:Mv({formats:f9,defaultWidth:"full"})};const h9=d9;var p9={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},g9=function(t,n,r,i){return p9[t]};const m9=g9;function lf(e){return function(t,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&e.formattingValues){var l=e.defaultFormattingWidth||e.defaultWidth,s=n!=null&&n.width?String(n.width):l;i=e.formattingValues[s]||e.formattingValues[l]}else{var c=e.defaultWidth,h=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[h]||e.values[c]}var p=e.argumentCallback?e.argumentCallback(t):t;return i[p]}}var v9={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},_9={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},y9={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},b9={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},w9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},S9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},x9=function(t,n){var r=Number(t),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},E9={ordinalNumber:x9,era:lf({values:v9,defaultWidth:"wide"}),quarter:lf({values:_9,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:lf({values:y9,defaultWidth:"wide"}),day:lf({values:b9,defaultWidth:"wide"}),dayPeriod:lf({values:w9,defaultWidth:"wide",formattingValues:S9,defaultFormattingWidth:"wide"})};const k9=E9;function uf(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],l=t.match(i);if(!l)return null;var s=l[0],c=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(c)?T9(c,function(_){return _.test(s)}):C9(c,function(_){return _.test(s)}),p;p=e.valueCallback?e.valueCallback(h):h,p=n.valueCallback?n.valueCallback(p):p;var g=t.slice(s.length);return{value:p,rest:g}}}function C9(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function T9(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function A9(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var i=r[0],l=t.match(e.parsePattern);if(!l)return null;var s=e.valueCallback?e.valueCallback(l[0]):l[0];s=n.valueCallback?n.valueCallback(s):s;var c=t.slice(i.length);return{value:s,rest:c}}}var P9=/^(\d+)(th|st|nd|rd)?/i,L9=/\d+/i,I9={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},R9={any:[/^b/i,/^(a|c)/i]},O9={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},D9={any:[/1/i,/2/i,/3/i,/4/i]},M9={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},N9={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},F9={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$9={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},B9={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},U9={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},V9={ordinalNumber:A9({matchPattern:P9,parsePattern:L9,valueCallback:function(t){return parseInt(t,10)}}),era:uf({matchPatterns:I9,defaultMatchWidth:"wide",parsePatterns:R9,defaultParseWidth:"any"}),quarter:uf({matchPatterns:O9,defaultMatchWidth:"wide",parsePatterns:D9,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:uf({matchPatterns:M9,defaultMatchWidth:"wide",parsePatterns:N9,defaultParseWidth:"any"}),day:uf({matchPatterns:F9,defaultMatchWidth:"wide",parsePatterns:$9,defaultParseWidth:"any"}),dayPeriod:uf({matchPatterns:B9,defaultMatchWidth:"any",parsePatterns:U9,defaultParseWidth:"any"})};const H9=V9;var z9={code:"en-US",formatDistance:l9,formatLong:h9,formatRelative:m9,localize:k9,match:H9,options:{weekStartsOn:0,firstWeekContainsDate:1}};const j9=z9;var G9=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,W9=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,q9=/^'([^]*?)'?$/,Y9=/''/g,K9=/[a-zA-Z]/;function Qw(e,t,n){var r,i,l,s,c,h,p,g,_,b,x,k,T,P,A,L,F,N;Pr(2,arguments);var W=String(t),te=j0(),G=(r=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:te.locale)!==null&&r!==void 0?r:j9,K=Hs((l=(s=(c=(h=n==null?void 0:n.firstWeekContainsDate)!==null&&h!==void 0?h:n==null||(p=n.locale)===null||p===void 0||(g=p.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&c!==void 0?c:te.firstWeekContainsDate)!==null&&s!==void 0?s:(_=te.locale)===null||_===void 0||(b=_.options)===null||b===void 0?void 0:b.firstWeekContainsDate)!==null&&l!==void 0?l:1);if(!(K>=1&&K<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var re=Hs((x=(k=(T=(P=n==null?void 0:n.weekStartsOn)!==null&&P!==void 0?P:n==null||(A=n.locale)===null||A===void 0||(L=A.options)===null||L===void 0?void 0:L.weekStartsOn)!==null&&T!==void 0?T:te.weekStartsOn)!==null&&k!==void 0?k:(F=te.locale)===null||F===void 0||(N=F.options)===null||N===void 0?void 0:N.weekStartsOn)!==null&&x!==void 0?x:0);if(!(re>=0&&re<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!G.localize)throw new RangeError("locale must contain localize property");if(!G.formatLong)throw new RangeError("locale must contain formatLong property");var H=ui(e);if(!UA(H))throw new RangeError("Invalid time value");var J=$A(H),ie=VA(H,J),oe={firstWeekContainsDate:K,weekStartsOn:re,locale:G,_originalDate:H},le=W.match(W9).map(function($){var Y=$[0];if(Y==="p"||Y==="P"){var z=t9[Y];return z($,G.formatLong)}return $}).join("").match(G9).map(function($){if($==="''")return"'";var Y=$[0];if(Y==="'")return Z9($);var z=XA[Y];if(z)return!(n!=null&&n.useAdditionalWeekYearTokens)&&i9($)&&Pb($,t,String(e)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&a9($)&&Pb($,t,String(e)),z(ie,$,G.localize,oe);if(Y.match(K9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Y+"`");return $}).join("");return le}function Z9(e){var t=e.match(q9);return t?t[1].replace(Y9,"'"):e}const J9=60*60*24*30,X9=({prefixKey:e="",storage:t=localStorage}={})=>{const n=class{constructor(){de(this,"storage",t);de(this,"prefixKey",e)}getKey(r){return`${this.prefixKey}${r}`.toUpperCase()}set(r,i){const l=JSON.stringify(i);this.storage.setItem(this.getKey(r),l)}get(r,i=null){const l=this.storage.getItem(this.getKey(r));if(l)try{return JSON.parse(l)}catch{return i}return i}remove(r){this.storage.removeItem(this.getKey(r))}clear(){this.storage.clear()}setCookie(r,i,l=J9){document.cookie=`${this.getKey(r)}=${i}; Max-Age=${l}`}getCookie(r){const i=document.cookie.split("; ");for(let l=0,s=i.length;l<s;l++){const c=i[l].split("=");if(c[0]===this.getKey(r))return c[1]}return""}removeCookie(r){this.setCookie(r,1,-1)}clearCookie(){const r=document.cookie.match(/[^ =;]+(?==)/g);if(r)for(let i=r.length;i--;)document.cookie=r[i]+"=0;expire="+new Date(0).toUTCString()}};return new n};let Nv=null;const G0=()=>(Nv||(Nv=X9()),Nv),Q9=.0393700787;var g1=(e=>(e.MM="mm",e.IN="in",e))(g1||{}),e3=(e=>(e[e.MM=1]="MM",e[e.IN=Q9]="IN",e))(e3||{});const t3=e=>({mm:{fractionDigits:1,step:.1,scale:1,current:"mm"},in:{fractionDigits:3,step:.001,scale:e3.IN,current:"in"}})[e],n3="SETTING_UNIT",eP=e=>{localStorage.setItem(n3,e)},m1=()=>localStorage.getItem(n3)??"mm",tP=()=>{const e=m1();return Object.assign({},{scale:1,current:"mm",fractionDigits:1,step:.1},t3(e))},Lb={0:1,1:25.4,2:304.8,3:1609344,4:1,5:10,6:1e3,7:1e6,8:254e-7,9:.0254,10:914.4,11:1e-7,12:1e-6,13:.001,14:100,15:1e4,16:1e5,17:1e12,18:1496e11,19:94607e14,20:30857e15};function nP(e){return(e===void 0||!(e in Lb))&&(e=0),Lb[e]}var v1=function(e,t){return v1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},v1(e,t)};function W0(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");v1(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function _G(e,t,n,r){var i=arguments.length,l=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l}function _1(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l0(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,l=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)l.push(i.value)}catch(c){s={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return l}function u0(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,l;r<i;r++)(l||!(r in t))&&(l||(l=Array.prototype.slice.call(t,0,r)),l[r]=t[r]);return e.concat(l||Array.prototype.slice.call(t))}function Gi(e){return typeof e=="function"}function r3(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Fv=r3(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function y1(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var q0=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,l;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var c=_1(s),h=c.next();!h.done;h=c.next()){var p=h.value;p.remove(this)}}catch(T){t={error:T}}finally{try{h&&!h.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}else s.remove(this);var g=this.initialTeardown;if(Gi(g))try{g()}catch(T){l=T instanceof Fv?T.errors:[T]}var _=this._finalizers;if(_){this._finalizers=null;try{for(var b=_1(_),x=b.next();!x.done;x=b.next()){var k=x.value;try{Ib(k)}catch(T){l=l??[],T instanceof Fv?l=u0(u0([],l0(l)),l0(T.errors)):l.push(T)}}}catch(T){r={error:T}}finally{try{x&&!x.done&&(i=b.return)&&i.call(b)}finally{if(r)throw r.error}}}if(l)throw new Fv(l)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Ib(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&y1(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&y1(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),a3=q0.EMPTY;function i3(e){return e instanceof q0||e&&"closed"in e&&Gi(e.remove)&&Gi(e.add)&&Gi(e.unsubscribe)}function Ib(e){Gi(e)?e():e.unsubscribe()}var o3={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},b1={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=b1.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,u0([e,t],l0(n))):setTimeout.apply(void 0,u0([e,t],l0(n)))},clearTimeout:function(e){var t=b1.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function rP(e){b1.setTimeout(function(){throw e})}function Rb(){}function Wp(e){e()}var s3=function(e){W0(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,i3(n)&&n.add(r)):r.destination=sP,r}return t.create=function(n,r,i){return new w1(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(q0),aP=Function.prototype.bind;function $v(e,t){return aP.call(e,t)}var iP=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){Ip(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){Ip(r)}else Ip(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){Ip(n)}},e}(),w1=function(e){W0(t,e);function t(n,r,i){var l=e.call(this)||this,s;if(Gi(n)||!n)s={next:n??void 0,error:r??void 0,complete:i??void 0};else{var c;l&&o3.useDeprecatedNextContext?(c=Object.create(n),c.unsubscribe=function(){return l.unsubscribe()},s={next:n.next&&$v(n.next,c),error:n.error&&$v(n.error,c),complete:n.complete&&$v(n.complete,c)}):s=n}return l.destination=new iP(s),l}return t}(s3);function Ip(e){rP(e)}function oP(e){throw e}var sP={closed:!0,next:Rb,error:oP,complete:Rb},lP=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function uP(e){return e}function cP(e){return e.length===0?uP:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var Ob=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,l=dP(t)?t:new w1(t,n,r);return Wp(function(){var s=i,c=s.operator,h=s.source;l.add(c?c.call(l,h):h?i._subscribe(l):i._trySubscribe(l))}),l},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=Db(n),new n(function(i,l){var s=new w1({next:function(c){try{t(c)}catch(h){l(h),s.unsubscribe()}},error:l,complete:i});r.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[lP]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return cP(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=Db(t),new t(function(r,i){var l;n.subscribe(function(s){return l=s},function(s){return i(s)},function(){return r(l)})})},e.create=function(t){return new e(t)},e}();function Db(e){var t;return(t=e??o3.Promise)!==null&&t!==void 0?t:Promise}function fP(e){return e&&Gi(e.next)&&Gi(e.error)&&Gi(e.complete)}function dP(e){return e&&e instanceof s3||fP(e)&&i3(e)}var hP=r3(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),l3=function(e){W0(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new Mb(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new hP},t.prototype.next=function(n){var r=this;Wp(function(){var i,l;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=_1(r.currentObservers),c=s.next();!c.done;c=s.next()){var h=c.value;h.next(n)}}catch(p){i={error:p}}finally{try{c&&!c.done&&(l=s.return)&&l.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;Wp(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;Wp(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,l=i.hasError,s=i.isStopped,c=i.observers;return l||s?a3:(this.currentObservers=null,c.push(n),new q0(function(){r.currentObservers=null,y1(c,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,l=r.thrownError,s=r.isStopped;i?n.error(l):s&&n.complete()},t.prototype.asObservable=function(){var n=new Ob;return n.source=this,n},t.create=function(n,r){return new Mb(n,r)},t}(Ob),Mb=function(e){W0(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:a3},t}(l3);let u3=60*1e3;var c3=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(l){return l instanceof n?l:new n(function(s){s(l)})}return new(n||(n=Promise))(function(l,s){function c(g){try{p(r.next(g))}catch(_){s(_)}}function h(g){try{p(r.throw(g))}catch(_){s(_)}}function p(g){g.done?l(g.value):i(g.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};function pP(e=u3){return new Promise(t=>setTimeout(t,e))}function f3(e,t=u3,n=new mP("function did not complete within allowed time")){return c3(this,void 0,void 0,function*(){const r=Symbol("DELAY_EXPIRED"),i=yield Promise.race([e(),gP(t,r)]);if(i===r)throw n;return i})}const gP=(e,t)=>c3(void 0,void 0,void 0,function*(){return yield pP(e),t});class mP extends Error{constructor(){super(...arguments),this.isTimeout=!0}}globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;var Qa;class Bu extends ra{constructor(n){super();Xe(this,Qa,void 0);de(this,"subject",new l3);n&&(bt(this,Qa,new n),ee(this,Qa).addEventListener("error",r=>{console.log(["=> WorkerBasic error",r]),this.emit("error",r)}),ee(this,Qa).addEventListener("message",r=>{Ve(r.data,"reqId")?this.subject.next(r.data):this.emit("message",r.data)}))}get worker(){return ee(this,Qa)}request(n,r=0){if(!ee(this,Qa))return Promise.reject("worker is not define.");const i=()=>new Promise(l=>{var h;const s=l5();(h=ee(this,Qa))==null||h.postMessage({...n,reqId:s});const c=this.subject.subscribe(p=>{if(p.reqId===s)return c.unsubscribe(),p.error?Mx(p.error):l(p.data)})});return r>0?f3(i,r,new Error("worker request error")):i()}destroy(){var n;this.removeAllListeners(),(n=ee(this,Qa))==null||n.terminate()}}Qa=new WeakMap;function vP(){return new Worker(""+new URL("bitmapResizeWorker-0314d902.js",import.meta.url).href)}class _P extends Bu{constructor(){super(vP)}resize(t){return this.request({type:"resize",data:t})}imageProcess(t){return this.request({type:"imageProcess",data:t})}}var S_=(e=>(e.Grayscale="grayscale",e.Bayer="Bayer",e.Stucki="Stucki",e.Atkinson="Atkinson",e.Jarvis="Jarvis",e.Sierra="Sierra",e.Floyd="Floyd",e))(S_||{});class yP{async resize(t){var g,_;const{bitmapMode:n,extraPath:r,oWidth:i,oHeight:l,destWidth:s,destHeight:c}=t;let h=r;const p=await((_=(g=window.MeApi.app).getFetchFileHost)==null?void 0:_.call(g));return p&&r.startsWith(p)&&(h=r.replace(p,"")),h=await window.MeApi.wasmKit.bitmap_dataToGray(h),h=await window.MeApi.wasmKit.bitmap_resize(h,i,l,s,c),n.toLowerCase()!==S_.Grayscale&&(h=await window.MeApi.wasmKit.bitmap_calDataWithMode(n,h,s,c,127)),(p||"")+h}}function bP(){return new Worker(""+new URL("clipperWorker-7245940c.js",import.meta.url).href)}class wP extends Bu{constructor(){super(bP)}boolCalculate(t){return this.request({type:"boolCalculate",data:t})}scaleOffsetPoints(t){return this.request({type:"scaleOffsetPoints",data:t})}area(t){return this.request({type:"area",data:t})}}var d3={},x_={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={verbose:!1};e.default=t})(x_);var E_={},h3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(r){var i,l={};return r.forEach(function(s){var c=s[0],h=s[1];switch(h){case"$MEASUREMENT":{i="measurement";break}case"$INSUNITS":{i="insUnits";break}case"$EXTMIN":l.extMin={},i="extMin";break;case"$EXTMAX":l.extMax={},i="extMax";break;case"$DIMASZ":l.dimArrowSize={},i="dimArrowSize";break;default:switch(i){case"extMin":case"extMax":{switch(c){case 10:l[i].x=h;break;case 20:l[i].y=h;break;case 30:l[i].z=h,i=void 0;break}break}case"measurement":case"insUnits":{switch(c){case 70:{l[i]=h,i=void 0;break}}break}case"dimArrowSize":{switch(c){case 40:{l[i]=h,i=void 0;break}}break}}}}),l};e.default=t})(h3);var p3={},ci={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(x_);function n(c){return c&&c.__esModule?c:{default:c}}function r(){t.default.verbose&&console.info.apply(void 0,arguments)}function i(){t.default.verbose&&console.warn.apply(void 0,arguments)}function l(){console.error.apply(void 0,arguments)}var s={info:r,warn:i,error:l};e.default=s})(ci);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(ci);function n(p){return p&&p.__esModule?p:{default:p}}var r=function(g){var _=null,b=null;return g.reduce(function(x,k){var T=k[0],P=k[1];switch(T){case 2:x.name=P;break;case 3:x.description=P;break;case 70:x.flag=P;break;case 72:x.alignment=P;break;case 73:x.elementCount=parseInt(P);break;case 40:x.patternLength=P;break;case 49:_=Object.create({scales:[],offset:[]}),_.length=P,x.pattern.push(_);break;case 74:_.shape=P;break;case 75:_.shapeNumber=P;break;case 340:_.styleHandle=P;break;case 46:_.scales.push(P);break;case 50:_.rotation=P;break;case 44:b=Object.create({x:P,y:0}),_.offset.push(b);break;case 45:b.y=P;break;case 9:_.text=P;break}return x},{type:"LTYPE",pattern:[]})},i=function(g){return g.reduce(function(_,b){var x=b[0],k=b[1];switch(x){case 2:_.name=k;break;case 6:_.lineTypeName=k;break;case 62:_.colorNumber=k;break;case 70:_.flags=k;break;case 290:_.plot=parseInt(k)!==0;break;case 370:_.lineWeightEnum=k;break}return _},{type:"LAYER"})},l=function(g){return g.reduce(function(_,b){var x=b[0],k=b[1];switch(x){case 2:_.name=k;break;case 6:_.lineTypeName=k;break;case 40:_.fixedTextHeight=k;break;case 41:_.widthFactor=k;break;case 50:_.obliqueAngle=k;break;case 71:_.flags=k;break;case 42:_.lastHeightUsed=k;break;case 3:_.primaryFontFileName=k;break;case 4:_.bigFontFileName=k;break}return _},{type:"STYLE"})},s=function(g){return g.reduce(function(_,b){var x=b[0],k=b[1];switch(x){case 2:_.name=k;break;case 5:_.handle=k;break;case 70:_.flags=k;break;case 10:_.lowerLeft.x=parseFloat(k);break;case 20:_.lowerLeft.y=parseFloat(k);break;case 11:_.upperRight.x=parseFloat(k);break;case 21:_.upperRight.y=parseFloat(k);break;case 12:_.center.x=parseFloat(k);break;case 22:_.center.y=parseFloat(k);break;case 14:_.snapSpacing.x=parseFloat(k);break;case 24:_.snapSpacing.y=parseFloat(k);break;case 15:_.gridSpacing.x=parseFloat(k);break;case 25:_.gridSpacing.y=parseFloat(k);break;case 16:_.direction.x=parseFloat(k);break;case 26:_.direction.y=parseFloat(k);break;case 36:_.direction.z=parseFloat(k);break;case 17:_.target.x=parseFloat(k);break;case 27:_.target.y=parseFloat(k);break;case 37:_.target.z=parseFloat(k);break;case 45:_.height=parseFloat(k);break;case 50:_.snapAngle=parseFloat(k);break;case 51:_.angle=parseFloat(k);break;case 110:_.x=parseFloat(k);break;case 120:_.y=parseFloat(k);break;case 130:_.z=parseFloat(k);break;case 111:_.xAxisX=parseFloat(k);break;case 121:_.xAxisY=parseFloat(k);break;case 131:_.xAxisZ=parseFloat(k);break;case 112:_.xAxisX=parseFloat(k);break;case 122:_.xAxisY=parseFloat(k);break;case 132:_.xAxisZ=parseFloat(k);break;case 146:_.elevation=parseFloat(k);break}return _},{type:"VPORT",center:{},lowerLeft:{},upperRight:{},snap:{},snapSpacing:{},gridSpacing:{},direction:{},target:{}})},c=function(g,_,b){var x=[],k;return g.forEach(function(T){var P=T[0],A=T[1];(P===0||P===2)&&A===_?(k=[],x.push(k)):k.push(T)}),x.reduce(function(T,P){var A=b(P);return A.name?T[A.name]=A:t.default.warn("table row without name:",A),T},{})},h=function(g){var _=[],b;g.forEach(function(A){var L=A[1];L==="TABLE"?(b=[],_.push(b)):L==="ENDTAB"?_.push(b):b.push(A)});var x=[],k=[],T=[],P=[];return _.forEach(function(A){A[0][1]==="STYLE"?x=A:A[0][1]==="LTYPE"?P=A:A[0][1]==="LAYER"?k=A:A[0][1]==="VPORT"&&(T=A)}),{layers:c(k,"LAYER",i),styles:c(x,"STYLE",l),vports:c(T,"VPORT",s),ltypes:c(P,"LTYPE",r)}};e.default=h})(p3);var g3={},k_={},m3={},Xn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(r,i){switch(r){case 5:return{handle:i};case 6:return{lineTypeName:i};case 8:return{layer:i};case 48:return{lineTypeScale:i};case 60:return{visible:i===0};case 62:return{colorNumber:i};case 67:return i===0?{}:{paperSpace:i};case 68:return{viewportOn:i};case 69:return{viewport:i};case 210:return{extrusionX:i};case 220:return{extrusionY:i};case 230:return{extrusionZ:i};case 410:return{layout:i};default:return{}}};e.default=t})(Xn);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.process=e.default=e.TYPE=void 0;var t=n(Xn);function n(s){return s&&s.__esModule?s:{default:s}}var r="POINT";e.TYPE=r;var i=function(c){return c.reduce(function(h,p){var g=p[0],_=p[1];switch(g){case 10:h.x=_;break;case 20:h.y=_;break;case 30:h.z=_;break;case 39:h.thickness=_;break;default:Object.assign(h,(0,t.default)(g,_));break}return h},{type:r})};e.process=i;var l={TYPE:r,process:i};e.default=l})(m3);var v3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.process=e.default=e.TYPE=void 0;var t=n(Xn);function n(s){return s&&s.__esModule?s:{default:s}}var r="LINE";e.TYPE=r;var i=function(c){return c.reduce(function(h,p){var g=p[0],_=p[1];switch(g){case 10:h.start.x=_;break;case 20:h.start.y=_;break;case 30:h.start.z=_;break;case 39:h.thickness=_;break;case 11:h.end.x=_;break;case 21:h.end.y=_;break;case 31:h.end.z=_;break;default:Object.assign(h,(0,t.default)(g,_));break}return h},{type:r,start:{},end:{}})};e.process=i;var l={TYPE:r,process:i};e.default=l})(v3);var _3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.process=e.default=e.TYPE=void 0;var t=n(Xn);function n(s){return s&&s.__esModule?s:{default:s}}var r="LWPOLYLINE";e.TYPE=r;var i=function(c){var h;return c.reduce(function(p,g){var _=g[0],b=g[1];switch(_){case 70:p.closed=(b&1)===1;break;case 10:h={x:b,y:0},p.vertices.push(h);break;case 20:h.y=b;break;case 39:p.thickness=b;break;case 42:h.bulge=b;break;default:Object.assign(p,(0,t.default)(_,b));break}return p},{type:r,vertices:[]})};e.process=i;var l={TYPE:r,process:i};e.default=l})(_3);var y3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.process=e.default=e.TYPE=void 0;var t=n(Xn);function n(s){return s&&s.__esModule?s:{default:s}}var r="POLYLINE";e.TYPE=r;var i=function(c){return c.reduce(function(h,p){var g=p[0],_=p[1];switch(g){case 70:h.closed=(_&1)===1,h.polygonMesh=(_&16)===16,h.polyfaceMesh=(_&64)===64;break;case 39:h.thickness=_;break;default:Object.assign(h,(0,t.default)(g,_));break}return h},{type:r,vertices:[]})};e.process=i;var l={TYPE:r,process:i};e.default=l})(y3);var b3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.process=e.default=e.TYPE=void 0;var t="VERTEX";e.TYPE=t;var n=function(l){return l.reduce(function(s,c){var h=c[0],p=c[1];switch(h){case 10:s.x=p;break;case 20:s.y=p;break;case 30:s.z=p;break;case 42:s.bulge=p;break}return s},{})};e.process=n;var r={TYPE:t,process:n};e.default=r})(b3);var w3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.process=e.default=e.TYPE=void 0;var t=n(Xn);function n(s){return s&&s.__esModule?s:{default:s}}var r="CIRCLE";e.TYPE=r;var i=function(c){return c.reduce(function(h,p){var g=p[0],_=p[1];switch(g){case 10:h.x=_;break;case 20:h.y=_;break;case 30:h.z=_;break;case 40:h.r=_;break;default:Object.assign(h,(0,t.default)(g,_));break}return h},{type:r})};e.process=i;var l={TYPE:r,process:i};e.default=l})(w3);var S3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.process=e.default=e.TYPE=void 0;var t=n(Xn);function n(s){return s&&s.__esModule?s:{default:s}}var r="ARC";e.TYPE=r;var i=function(c){return c.reduce(function(h,p){var g=p[0],_=p[1];switch(g){case 10:h.x=_;break;case 20:h.y=_;break;case 30:h.z=_;break;case 39:h.thickness=_;break;case 40:h.r=_;break;case 50:h.startAngle=_/180*Math.PI;break;case 51:h.endAngle=_/180*Math.PI;break;default:Object.assign(h,(0,t.default)(g,_));break}return h},{type:r})};e.process=i;var l={TYPE:r,process:i};e.default=l})(S3);var x3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.process=e.default=e.TYPE=void 0;var t=n(Xn);function n(s){return s&&s.__esModule?s:{default:s}}var r="ELLIPSE";e.TYPE=r;var i=function(c){return c.reduce(function(h,p){var g=p[0],_=p[1];switch(g){case 10:h.x=_;break;case 11:h.majorX=_;break;case 20:h.y=_;break;case 21:h.majorY=_;break;case 30:h.z=_;break;case 31:h.majorZ=_;break;case 40:h.axisRatio=_;break;case 41:h.startAngle=_;break;case 42:h.endAngle=_;break;default:Object.assign(h,(0,t.default)(g,_));break}return h},{type:r})};e.process=i;var l={TYPE:r,process:i};e.default=l})(x3);var E3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.process=e.default=e.TYPE=void 0;var t=n(Xn);function n(s){return s&&s.__esModule?s:{default:s}}var r="SPLINE";e.TYPE=r;var i=function(c){var h;return c.reduce(function(p,g){var _=g[0],b=g[1];switch(_){case 10:h={x:b,y:0},p.controlPoints.push(h);break;case 20:h.y=b;break;case 30:h.z=b;break;case 40:p.knots.push(b);break;case 41:p.weights||(p.weights=[]),p.weights.push(b);break;case 42:p.knotTolerance=b;break;case 43:p.controlPointTolerance=b;break;case 44:p.fitTolerance=b;break;case 70:p.flag=b,p.closed=(b&1)===1;break;case 71:p.degree=b;break;case 72:p.numberOfKnots=b;break;case 73:p.numberOfControlPoints=b;break;case 74:p.numberOfFitPoints=b;break;default:Object.assign(p,(0,t.default)(_,b));break}return p},{type:r,controlPoints:[],knots:[]})};e.process=i;var l={TYPE:r,process:i};e.default=l})(E3);var k3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.process=e.default=e.TYPE=void 0;var t=n(Xn);function n(s){return s&&s.__esModule?s:{default:s}}var r="SOLID";e.TYPE=r;var i=function(c){return c.reduce(function(h,p){var g=p[0],_=p[1];switch(g){case 10:h.corners[0].x=_;break;case 20:h.corners[0].y=_;break;case 30:h.corners[0].z=_;break;case 11:h.corners[1].x=_;break;case 21:h.corners[1].y=_;break;case 31:h.corners[1].z=_;break;case 12:h.corners[2].x=_;break;case 22:h.corners[2].y=_;break;case 32:h.corners[2].z=_;break;case 13:h.corners[3].x=_;break;case 23:h.corners[3].y=_;break;case 33:h.corners[3].z=_;break;case 39:h.thickness=_;break;default:Object.assign(h,(0,t.default)(g,_));break}return h},{type:r,corners:[{},{},{},{}]})};e.process=i;var l={TYPE:r,process:i};e.default=l})(k3);var C3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.process=e.default=e.TYPE=void 0;var t=n(Xn);function n(T){return T&&T.__esModule?T:{default:T}}var r="HATCH";e.TYPE=r;var i="IDLE",l={},s=0,c=!1,h=null,p={references:[],entities:[]},g=null,_=function(P){return P.reduce(function(A,L){var F=L[0],N=L[1];switch(F){case 100:i="IDLE";break;case 2:A.patternName=N;break;case 10:i==="IDLE"?A.elevation.x=parseFloat(N):i==="POLYLINE"?(g=Object.create({x:parseFloat(N),y:0,bulge:0}),p.entities[0].points.push(g)):i==="SEED"?(h||(h={x:0,y:0},A.seeds.seeds.push(h)),h.x=parseFloat(N)):k(F,s,parseFloat(N));break;case 20:i==="IDLE"?A.elevation.y=parseFloat(N):i==="POLYLINE"?g.y=parseFloat(N):i==="SEED"?(h.y=parseFloat(N),h=null):k(F,s,parseFloat(N));break;case 30:A.elevation.z=parseFloat(N);break;case 63:A.fillColor=N;break;case 70:A.fillType=parseFloat(N)===1?"SOLID":"PATTERN";break;case 210:A.extrusionDir.x=parseFloat(N);break;case 220:A.extrusionDir.y=parseFloat(N);break;case 230:A.extrusionDir.z=parseFloat(N);break;case 91:A.boundary.count=parseFloat(N);break;case 92:if(p={references:[],entities:[]},A.boundary.loops.push(p),p.type=parseFloat(N),c=(p.type&2)===2,c){var W={type:"POLYLINE",points:[]};p.entities.push(W),i="POLYLINE"}break;case 93:i==="IDLE"&&(i="ENT"),p.count=parseFloat(N);break;case 11:case 21:case 40:case 50:case 51:case 74:case 94:case 95:case 96:k(F,s,parseFloat(N));break;case 42:c?g.bulge=parseFloat(N):k(F,s,parseFloat(N));break;case 72:s=parseFloat(N),p[c?"hasBulge":"edgeType"]=s,c||(l=x(s),p.entities.push(l));break;case 73:i==="IDLE"||c?p.entities[0].closed=N:k(F,s,parseFloat(N));break;case 75:i="IDLE",A.style=parseFloat(N);break;case 76:A.hatchType=parseFloat(N);break;case 97:i="IDLE",c=!1,p.sourceObjects=parseFloat(N);break;case 98:i="SEED",A.seeds.count=parseFloat(N);break;case 52:A.shadowPatternAngle=parseFloat(N);break;case 41:A.spacing=parseFloat(N);break;case 77:A.double=parseFloat(N)===1;break;case 78:A.pattern.lineCount=parseFloat(N);break;case 53:A.pattern.angle=parseFloat(N);break;case 43:A.pattern.x=parseFloat(N);break;case 44:A.pattern.y=parseFloat(N);break;case 45:A.pattern.offsetX=parseFloat(N);break;case 46:A.pattern.offsetY=parseFloat(N);break;case 79:A.pattern.dashCount=parseFloat(N);break;case 49:A.pattern.length.push(N);break;case 330:p.references.push(N);break;case 450:A.solidOrGradient=parseFloat(N)===0?"SOLID":"GRADIENT";break;case 453:A.color.count=parseFloat(N);break;case 460:A.color.rotation=N;break;case 461:A.color.gradient=N;break;case 462:A.color.tint=N;break;default:Object.assign(A,(0,t.default)(F,N));break}return A},{type:r,elevation:{},extrusionDir:{x:0,y:0,z:1},pattern:{length:[]},boundary:{loops:[]},seeds:{count:0,seeds:[]},color:{}})};e.process=_;var b={TYPE:r,process:_};e.default=b;function x(T){if(c)return{};switch(T){case 1:return{type:"LINE",start:{x:0,y:0},end:{x:0,y:0}};case 2:return{type:"ARC",center:{x:0,y:0},radius:0,startAngle:0,endAngle:0,counterClockWise:!1};case 3:return{type:"ELLIPSE",center:{x:0,y:0},startAngle:0,endAngle:0,counterClockWise:!1,major:{x:0,y:0},minor:0};case 4:return{type:"SPLINE",degree:0,rational:0,periodic:0,knots:{count:0,knots:[]},controlPoints:{count:0,point:{x:0,y:0}},weights:1}}return{}}function k(T,P,A){switch(T){case 10:switch(P){case 1:l.start.x=A;break;case 2:l.center.x=A;break;case 3:l.center.x=A;break;case 4:l.controlPoints.point.x=A;break}break;case 20:{switch(P){case 1:l.start.y=A;break;case 2:l.center.y=A;break;case 3:l.center.y=A;break;case 4:l.controlPoints.point.y=A;break}break}case 11:switch(P){case 1:l.end.x=A;break;case 3:l.major.x=A;break}break;case 21:{switch(P){case 1:l.end.y=A;break;case 3:l.major.y=A;break}break}case 40:switch(P){case 2:l.radius=A;break;case 3:l.minor=A;break;case 4:l.knots.knots.push(A);break}break;case 42:switch(P){case 4:l.weights=A;break}break;case 50:switch(P){case 2:l.startAngle=A;break;case 3:l.startAngle=A;break}break;case 51:switch(P){case 2:l.endAngle=A;break;case 3:l.endAngle=A;break}break;case 73:switch(P){case 2:l.counterClockWise=parseFloat(A)===1;break;case 3:l.counterClockWise=parseFloat(A)===1;break;case 4:l.rational=A;break}break;case 74:switch(P){case 4:l.periodic=A;break}break;case 94:switch(P){case 4:l.degree=A;break}break;case 95:switch(P){case 4:l.knots.count=A;break}break;case 96:switch(P){case 4:l.controlPoints.count=A;break}break}}})(C3);var C_={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.process=e.default=e.assign=e.TYPE=void 0;var t=n(Xn);function n(h){return h&&h.__esModule?h:{default:h}}var r="MTEXT";e.TYPE=r;var i={10:"x",20:"y",30:"z",40:"nominalTextHeight",41:"refRectangleWidth",71:"attachmentPoint",72:"drawingDirection",7:"styleName",11:"xAxisX",21:"xAxisY",31:"xAxisZ",42:"horizontalWidth",43:"verticalHeight",73:"lineSpacingStyle",44:"lineSpacingFactor",90:"backgroundFill",420:"bgColorRGB0",421:"bgColorRGB1",422:"bgColorRGB2",423:"bgColorRGB3",424:"bgColorRGB4",425:"bgColorRGB5",426:"bgColorRGB6",427:"bgColorRGB7",428:"bgColorRGB8",429:"bgColorRGB9",430:"bgColorName0",431:"bgColorName1",432:"bgColorName2",433:"bgColorName3",434:"bgColorName4",435:"bgColorName5",436:"bgColorName6",437:"bgColorName7",438:"bgColorName8",439:"bgColorName9",45:"fillBoxStyle",63:"bgFillColor",441:"bgFillTransparency",75:"columnType",76:"columnCount",78:"columnFlowReversed",79:"columnAutoheight",48:"columnWidth",49:"columnGutter",50:"columnHeights"},l=function(p){return p.reduce(function(g,_){var b=_[0],x=_[1];return s(g,b,x),g},{type:r,string:""})};e.process=l;var s=function(p,g,_){return i[g]!==void 0?p[i[g]]=_:g===1||g===3?p.string+=_:g===50?(p.xAxisX=Math.cos(_),p.xAxisY=Math.sin(_)):Object.assign(p,(0,t.default)(g,_)),p};e.assign=s;var c={TYPE:r,process:l,assign:s};e.default=c})(C_);var T_={},A_={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.process=e.default=e.assign=e.TYPE=void 0;var t=n(Xn);function n(h){return h&&h.__esModule?h:{default:h}}var r="TEXT";e.TYPE=r;var i={1:"string",10:"x",20:"y",30:"z",11:"x2",21:"y2",31:"z2",39:"thickness",40:"textHeight",41:"relScaleX",50:"rotation",51:"obliqueAngle",7:"styleName",71:"mirror",72:"hAlign",73:"vAlign"},l=function(p){return p.reduce(function(g,_){var b=_[0],x=_[1];return s(g,b,x),g},{type:r,string:""})};e.process=l;var s=function(p,g,_){i[g]!==void 0?p[i[g]]=_:Object.assign(p,(0,t.default)(g,_))};e.assign=s;var c={TYPE:r,process:l,assign:s};e.default=c})(A_);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.process=e.default=e.assign=e.TYPE=void 0;var t=i(Xn),n=C_,r=A_;function i(p){return p&&p.__esModule?p:{default:p}}var l="ATTDEF";e.TYPE=l;var s=function(g){return g.reduce(function(_,b){var x=b[0],k=b[1];return c(_,x,k),_},{type:l,subclassMarker:"AcDbText",thickness:0,scaleX:1,mtext:{},text:{}})};e.process=s;var c=function(g,_,b){switch(_){case 100:{g.subclassMarker=b;break}case 1:switch(g.subclassMarker){case"AcDbText":(0,r.assign)(g.text,_,b);break;case"AcDbMText":(0,n.assign)(g.mtext,_,b);break}break;case 2:switch(g.subclassMarker){case"AcDbAttributeDefinition":case"AcDbAttribute":g.tag=b;break;case"AcDbXrecord":g.attdefFlag=b;break}break;case 3:switch(g.subclassMarker){case"AcDbAttributeDefinition":g.prompt=b;break;case"AcDbMText":(0,n.assign)(g.mtext,_,b);break}break;case 7:switch(g.subclassMarker){case"AcDbAttributeDefinition":case"AcDbAttribute":(0,r.assign)(g.text,_,b);break;case"AcDbMText":(0,n.assign)(g.mtext,_,b);break}break;case 10:switch(g.subclassMarker){case"AcDbText":(0,r.assign)(g.text,_,b);break;case"AcDbMText":(0,n.assign)(g.mtext,_,b);break;case"AcDbXrecord":g.x=b;break}break;case 20:switch(g.subclassMarker){case"AcDbText":(0,r.assign)(g.text,_,b);break;case"AcDbMText":(0,n.assign)(g.mtext,_,b);break;case"AcDbXrecord":g.y=b;break}break;case 30:switch(g.subclassMarker){case"AcDbText":(0,r.assign)(g.text,_,b);break;case"AcDbMText":(0,n.assign)(g.mtext,_,b);break;case"AcDbXrecord":g.z=b;break}break;case 11:switch(g.subclassMarker){case"AcDbAttributeDefinition":case"AcDbAttribute":g.x2=b;break;case"AcDbMText":(0,n.assign)(g.mtext,_,b);break}break;case 21:switch(g.subclassMarker){case"AcDbAttributeDefinition":case"AcDbAttribute":g.y2=b;break;case"AcDbMText":(0,n.assign)(g.mtext,_,b);break}break;case 31:switch(g.subclassMarker){case"AcDbAttributeDefinition":case"AcDbAttribute":g.z2=b;break;case"AcDbMText":(0,n.assign)(g.mtext,_,b);break}break;case 39:(0,r.assign)(g.text,_,b);break;case 40:switch(g.subclassMarker){case"AcDbText":(0,r.assign)(g.text,_,b);break;case"AcDbMText":(0,n.assign)(g.mtext,_,b);break;case"AcDbXrecord":g.annotationScale=b;break}break;case 41:switch(g.subclassMarker){case"AcDbAttributeDefinition":case"AcDbAttribute":(0,r.assign)(g.text,_,b);break;case"AcDbMText":(0,n.assign)(g.mtext,_,b);break}break;case 42:case 43:case 44:case 45:(0,n.assign)(g.mtext,_,b);break;case 46:g.mtext.annotationHeight=b;break;case 48:case 49:(0,n.assign)(g.mtext,_,b);break;case 50:switch(g.subclassMarker){case"AcDbAttributeDefinition":case"AcDbAttribute":(0,r.assign)(g.text,_,b);break;case"AcDbMText":(0,n.assign)(g.mtext,_,b);break}break;case 51:(0,r.assign)(g.text,_,b);break;case 63:(0,n.assign)(g.mtext,_,b);break;case 70:switch(g.subclassMarker){case"AcDbAttributeDefinition":case"AcDbAttribute":g.attributeFlags=b;break;case"AcDbXrecord":typeof g.mTextFlag>"u"?g.mTextFlag=b:typeof g.isReallyLocked>"u"?g.isReallyLocked=b:g.secondaryAttdefCount=b;break}break;case 71:case 72:switch(g.subclassMarker){case"AcDbAttributeDefinition":case"AcDbAttribute":(0,r.assign)(g.text,_,b);break;case"AcDbMText":(0,n.assign)(g.mtext,_,b);break}break;case 73:switch(g.subclassMarker){case"AcDbAttributeDefinition":case"AcDbAttribute":g.fieldLength=b;break;case"AcDbMText":(0,n.assign)(g.mtext,_,b);break}break;case 74:(0,r.assign)(g.text,73,b);break;case 75:case 76:case 78:case 79:(0,n.assign)(g.mtext,_,b);break;case 90:(0,n.assign)(g.mtext,_,b);break;case 210:case 220:case 230:switch(g.subclassMarker){case"AcDbAttributeDefinition":case"AcDbAttribute":(0,r.assign)(g.mtext,_,b);break;case"AcDbMText":(0,n.assign)(g.mtext,_,b);break}break;case 280:switch(g.subclassMarker){case"AcDbAttributeDefinition":case"AcDbAttribute":g.lock=b;break;case"AcDbXrecord":g.clone=!0;break}break;case 340:g.attdefHandle=b;break;case 420:case 421:case 422:case 423:case 424:case 425:case 426:case 427:case 428:case 429:case 430:case 431:case 432:case 433:case 434:case 435:case 436:case 437:case 438:case 439:case 441:(0,n.assign)(g.mtext,_,b);break;default:Object.assign(g,(0,t.default)(_,b));break}};e.assign=c;var h={TYPE:l,process:s,assign:c};e.default=h})(T_);var T3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.process=e.default=e.TYPE=void 0;var t=T_,n="ATTRIB";e.TYPE=n;var r=function(s){return s.reduce(function(c,h){var p=h[0],g=h[1];return(0,t.assign)(c,p,g),c},{type:n,subclassMarker:"AcDbText",thickness:0,scaleX:1,mtext:{},text:{}})};e.process=r;var i={TYPE:n,process:r};e.default=i})(T3);var A3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.process=e.default=e.TYPE=void 0;var t=n(Xn);function n(s){return s&&s.__esModule?s:{default:s}}var r="INSERT";e.TYPE=r;var i=function(c){return c.reduce(function(h,p){var g=p[0],_=p[1];switch(g){case 2:h.block=_;break;case 10:h.x=_;break;case 20:h.y=_;break;case 30:h.z=_;break;case 41:h.scaleX=_;break;case 42:h.scaleY=_;break;case 43:h.scaleZ=_;break;case 44:h.columnSpacing=_;break;case 45:h.rowSpacing=_;break;case 50:h.rotation=_;break;case 70:h.columnCount=_;break;case 71:h.rowCount=_;break;case 210:h.extrusionX=_;break;case 220:h.extrusionY=_;break;case 230:h.extrusionZ=_;break;default:Object.assign(h,(0,t.default)(g,_));break}return h},{type:r})};e.process=i;var l={TYPE:r,process:i};e.default=l})(A3);var P3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.process=e.default=e.TYPE=void 0;var t=n(Xn);function n(s){return s&&s.__esModule?s:{default:s}}var r="3DFACE";e.TYPE=r;var i=function(c){return c.reduce(function(h,p){var g=p[0],_=p[1];switch(g){case 10:h.vertices[0].x=_;break;case 20:h.vertices[0].y=_;break;case 30:h.vertices[0].z=_;break;case 11:h.vertices[1].x=_;break;case 21:h.vertices[1].y=_;break;case 31:h.vertices[1].z=_;break;case 12:h.vertices[2].x=_;break;case 22:h.vertices[2].y=_;break;case 32:h.vertices[2].z=_;break;case 13:h.vertices[3].x=_;break;case 23:h.vertices[3].y=_;break;case 33:h.vertices[3].z=_;break;default:Object.assign(h,(0,t.default)(g,_));break}return h},{type:r,vertices:[{},{},{},{}]})};e.process=i;var l={TYPE:r,process:i};e.default=l})(P3);var L3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.process=e.default=e.TYPE=void 0;var t=n(Xn);function n(c){return c&&c.__esModule?c:{default:c}}var r="DIMENSION";e.TYPE=r;var i=function(h){return h.reduce(function(p,g){var _=g[0],b=g[1];switch(_){case 2:p.block=b;break;case 10:p.start.x=b;break;case 20:p.start.y=b;break;case 30:p.start.z=b;break;case 11:p.textMidpoint.x=b;break;case 21:p.textMidpoint.y=b;break;case 31:p.textMidpoint.z=b;break;case 13:p.measureStart.x=b;break;case 23:p.measureStart.y=b;break;case 33:p.measureStart.z=b;break;case 14:p.measureEnd.x=b;break;case 24:p.measureEnd.y=b;break;case 34:p.measureEnd.z=b;break;case 50:p.rotation=b;break;case 51:p.horizonRotation=b;break;case 52:p.extensionRotation=b;break;case 53:p.textRotation=b;break;case 70:{var x=l(b);x.ordinateType&&(p.ordinateType=!0),x.uniqueBlockReference&&(p.uniqueBlockReference=!0),x.userDefinedLocation&&(p.userDefinedLocation=!0),p.dimensionType=x.dimensionType;break}case 71:p.attachementPoint=b;break;case 210:p.extrudeDirection=p.extrudeDirection||{},p.extrudeDirection.x=b;break;case 220:p.extrudeDirection=p.extrudeDirection||{},p.extrudeDirection.y=b;break;case 230:p.extrudeDirection=p.extrudeDirection||{},p.extrudeDirection.z=b;break;default:Object.assign(p,(0,t.default)(_,b));break}return p},{type:r,start:{x:0,y:0,z:0},measureStart:{x:0,y:0,z:0},measureEnd:{x:0,y:0,z:0},textMidpoint:{x:0,y:0,z:0},attachementPoint:1,dimensionType:0})};e.process=i;function l(c){var h=!1,p=!1,g=!1;if(c>6){var _=c-32,b=c-64,x=c-32-64,k=c-32-128,T=c-32-64-128;_>=0&&_<=6?(h=!0,c=_):b>=0&&b<=6?(p=!0,c=b):x>=0&&x<=6?(h=!0,p=!0,c=x):k>=0&&k<=6?(h=!0,g=!0,c=k):T>=0&&T<=6&&(h=!0,p=!0,g=!0,c=T)}return{dimensionType:c,uniqueBlockReference:h,ordinateType:p,userDefinedLocation:g}}var s={TYPE:r,process:i};e.default=s})(L3);var I3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.process=e.default=e.TYPE=void 0;var t=n(Xn);function n(s){return s&&s.__esModule?s:{default:s}}var r="VIEWPORT";e.TYPE=r;var i=function(c){return c.reduce(function(h,p){var g=p[0],_=p[1];switch(g){case 1:h.layout=parseFloat(_);break;case 10:h.center.x=parseFloat(_);break;case 20:h.center.y=parseFloat(_);break;case 30:h.center.z=parseFloat(_);break;case 12:h.centerDCS.x=parseFloat(_);break;case 22:h.centerDCS.y=parseFloat(_);break;case 13:h.snap.x=parseFloat(_);break;case 23:h.snap.y=parseFloat(_);break;case 14:h.snapSpacing.x=parseFloat(_);break;case 24:h.snapSpacing.y=parseFloat(_);break;case 15:h.gridSpacing.x=parseFloat(_);break;case 25:h.gridSpacing.y=parseFloat(_);break;case 16:h.direction.x=parseFloat(_);break;case 26:h.direction.y=parseFloat(_);break;case 36:h.direction.z=parseFloat(_);break;case 17:h.target.x=parseFloat(_);break;case 27:h.target.y=parseFloat(_);break;case 37:h.target.z=parseFloat(_);break;case 40:h.width=parseFloat(_);break;case 41:h.height=parseFloat(_);break;case 50:h.snapAngle=parseFloat(_);break;case 51:h.angle=parseFloat(_);break;case 68:h.status=_;break;case 69:h.id=_;break;case 90:h.flags=_;break;case 110:h.x=parseFloat(_);break;case 120:h.y=parseFloat(_);break;case 130:h.z=parseFloat(_);break;case 111:h.xAxisX=parseFloat(_);break;case 121:h.xAxisY=parseFloat(_);break;case 131:h.xAxisZ=parseFloat(_);break;case 112:h.xAxisX=parseFloat(_);break;case 122:h.xAxisY=parseFloat(_);break;case 132:h.xAxisZ=parseFloat(_);break;case 146:h.elevation=parseFloat(_);break;case 281:h.render=_;break;default:Object.assign(h,(0,t.default)(g,_));break}return h},{type:r,center:{},centerDCS:{},snap:{},snapSpacing:{},gridSpacing:{},direction:{},target:{}})};e.process=i;var l={TYPE:r,process:i};e.default=l})(I3);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=W(ci),n=W(m3),r=W(v3),i=W(_3),l=W(y3),s=W(b3),c=W(w3),h=W(S3),p=W(x3),g=W(E3),_=W(k3),b=W(C3),x=W(C_),k=W(T_),T=W(T3),P=W(A3),A=W(P3),L=W(L3),F=W(A_),N=W(I3);function W(K){return K&&K.__esModule?K:{default:K}}var te=[n.default,r.default,i.default,l.default,s.default,c.default,h.default,p.default,g.default,_.default,b.default,x.default,k.default,T.default,F.default,P.default,L.default,A.default,N.default].reduce(function(K,re){return K[re.TYPE]=re,K},{}),G=function(re){var H=[],J=[],ie;re.forEach(function(le){var $=le[0];$===0&&(ie=[],J.push(ie)),ie.push(le)});var oe;return J.forEach(function(le){var $=le[0][1],Y=le.slice(1);if(te[$]!==void 0){var z=te[$].process(Y);$==="POLYLINE"?(oe=z,H.push(z)):$==="VERTEX"?oe?oe.vertices.push(z):t.default.error("ignoring invalid VERTEX entity"):$==="SEQEND"?oe=void 0:H.push(z)}else t.default.warn("unsupported type in ENTITIES section:",$)}),H};e.default=G})(k_);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(k_);function n(i){return i&&i.__esModule?i:{default:i}}var r=function(l){var s,c=[],h,p=[];return l.forEach(function(g){var _=g[0],b=g[1];if(b==="BLOCK")s="block",h={},p=[],c.push(h);else if(b==="ENDBLK")s==="entities"?h.entities=(0,t.default)(p):h.entities=[],p=void 0,s=void 0;else if(s==="block"&&_!==0)switch(_){case 1:h.xref=b;break;case 2:h.name=b;break;case 10:h.x=b;break;case 20:h.y=b;break;case 30:h.z=b;break;case 67:b!==0&&(h.paperSpace=b);break;case 410:h.layout=b;break}else s==="block"&&_===0?(s="entities",p.push(g)):s==="entities"&&p.push(g)}),c};e.default=r})(g3);var R3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(r){var i,l={layouts:[]},s={};return r.forEach(function(c,h){var p=c[0],g=c[1];if(p===0&&(i="IDLE"),g==="LAYOUT"&&(i="layout",s={},l.layouts.push(s)),i==="layout"&&p!==0)switch(p){case 100:g==="AcDbLayout"&&(i="AcDbLayout");break}if(i==="AcDbLayout"&&p!==0)switch(p){case 1:s.name=g;break;case 5:s.handle=g;break;case 10:s.minLimitX=parseFloat(g);break;case 20:s.minLimitY=parseFloat(g);break;case 11:s.maxLimitX=parseFloat(g);break;case 21:s.maxLimitY=parseFloat(g);break;case 12:s.x=parseFloat(g);break;case 22:s.y=parseFloat(g);break;case 32:s.z=parseFloat(g);break;case 14:s.minX=parseFloat(g);break;case 24:s.minY=parseFloat(g);break;case 34:s.minZ=parseFloat(g);break;case 15:s.maxX=parseFloat(g);break;case 25:s.maxY=parseFloat(g);break;case 35:s.maxZ=parseFloat(g);break;case 70:s.flag=g===1?"PSLTSCALE":"LIMCHECK";break;case 71:s.tabOrder=g;break;case 146:s.elevation=parseFloat(g);break;case 13:s.ucsX=parseFloat(g);break;case 23:s.ucsY=parseFloat(g);break;case 33:s.ucsZ=parseFloat(g);break;case 16:s.ucsXaxisX=parseFloat(g);break;case 26:s.ucsXaxisY=parseFloat(g);break;case 36:s.ucsXaxisZ=parseFloat(g);break;case 17:s.ucsYaxisX=parseFloat(g);break;case 27:s.ucsYaxisY=parseFloat(g);break;case 37:s.ucsYaxisZ=parseFloat(g);break;case 76:switch(g){case 0:s.ucsType="NOT ORTHOGRAPHIC";break;case 1:s.ucsType="TOP";break;case 2:s.ucsType="BOTTOM";break;case 3:s.ucsType="FRONT";break;case 4:s.ucsType="BACK";break;case 5:s.ucsType="LEFT";break;case 6:s.ucsType="RIGHT";break}break;case 330:s.tableRecord=g;break;case 331:s.lastActiveViewport=g;break;case 333:s.shadePlot=g;break}}),l};e.default=t})(R3);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=c(h3),n=c(p3),r=c(g3),i=c(k_),l=c(R3),s=c(ci);function c(P){return P&&P.__esModule?P:{default:P}}function h(P,A){var L=typeof Symbol<"u"&&P[Symbol.iterator]||P["@@iterator"];if(!L){if(Array.isArray(P)||(L=p(P))||A&&P&&typeof P.length=="number"){L&&(P=L);var F=0,N=function(){};return{s:N,n:function(){return F>=P.length?{done:!0}:{done:!1,value:P[F++]}},e:function(re){throw re},f:N}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var W=!0,te=!1,G;return{s:function(){L=L.call(P)},n:function(){var re=L.next();return W=re.done,re},e:function(re){te=!0,G=re},f:function(){try{!W&&L.return!=null&&L.return()}finally{if(te)throw G}}}}function p(P,A){if(P){if(typeof P=="string")return g(P,A);var L=Object.prototype.toString.call(P).slice(8,-1);if(L==="Object"&&P.constructor&&(L=P.constructor.name),L==="Map"||L==="Set")return Array.from(P);if(L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return g(P,A)}}function g(P,A){(A==null||A>P.length)&&(A=P.length);for(var L=0,F=new Array(A);L<A;L++)F[L]=P[L];return F}var _=function(A,L){return A>=10&&A<60||A>=210&&A<240?parseFloat(L,10):A>=60&&A<100?parseInt(L,10):L},b=function(A){var L="type",F,N=[],W=h(A),te;try{for(W.s();!(te=W.n()).done;){var G=te.value;L==="type"?(F=parseInt(G,10),L="value"):(N.push([F,_(F,G)]),L="type")}}catch(K){W.e(K)}finally{W.f()}return N},x=function(A){var L;return A.reduce(function(F,N){return N[0]===0&&N[1]==="SECTION"?L=[]:N[0]===0&&N[1]==="ENDSEC"?(F.push(L),L=void 0):L!==void 0&&L.push(N),F},[])},k=function(A,L){var F=L[0][1],N=L.slice(1);switch(F){case"HEADER":A.header=(0,t.default)(N);break;case"TABLES":A.tables=(0,n.default)(N);break;case"BLOCKS":A.blocks=(0,r.default)(N);break;case"ENTITIES":A.entities=(0,i.default)(N);break;case"OBJECTS":A.objects=(0,l.default)(N);break;default:s.default.warn("Unsupported section: ".concat(F))}return A},T=function(A){var L=A.split(/\r\n|\r|\n/g),F=b(L),N=x(F),W=N.reduce(k,{header:{},blocks:[],entities:[],objects:{layouts:[]},tables:{layers:{},styles:{},ltypes:{}}});return W};e.default=T})(E_);var cd={};function SP(){this.__data__=[],this.size=0}var xP=SP;function EP(e,t){return e===t||e!==e&&t!==t}var O3=EP,kP=O3;function CP(e,t){for(var n=e.length;n--;)if(kP(e[n][0],t))return n;return-1}var Y0=CP,TP=Y0,AP=Array.prototype,PP=AP.splice;function LP(e){var t=this.__data__,n=TP(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():PP.call(t,n,1),--this.size,!0}var IP=LP,RP=Y0;function OP(e){var t=this.__data__,n=RP(t,e);return n<0?void 0:t[n][1]}var DP=OP,MP=Y0;function NP(e){return MP(this.__data__,e)>-1}var FP=NP,$P=Y0;function BP(e,t){var n=this.__data__,r=$P(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var UP=BP,VP=xP,HP=IP,zP=DP,jP=FP,GP=UP;function Uu(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Uu.prototype.clear=VP;Uu.prototype.delete=HP;Uu.prototype.get=zP;Uu.prototype.has=jP;Uu.prototype.set=GP;var K0=Uu,WP=K0;function qP(){this.__data__=new WP,this.size=0}var YP=qP;function KP(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var ZP=KP;function JP(e){return this.__data__.get(e)}var XP=JP;function QP(e){return this.__data__.has(e)}var eL=QP,tL=typeof ri=="object"&&ri&&ri.Object===Object&&ri,D3=tL,nL=D3,rL=typeof self=="object"&&self&&self.Object===Object&&self,aL=nL||rL||Function("return this")(),fi=aL,iL=fi,oL=iL.Symbol,P_=oL,Nb=P_,M3=Object.prototype,sL=M3.hasOwnProperty,lL=M3.toString,cf=Nb?Nb.toStringTag:void 0;function uL(e){var t=sL.call(e,cf),n=e[cf];try{e[cf]=void 0;var r=!0}catch{}var i=lL.call(e);return r&&(t?e[cf]=n:delete e[cf]),i}var cL=uL,fL=Object.prototype,dL=fL.toString;function hL(e){return dL.call(e)}var pL=hL,Fb=P_,gL=cL,mL=pL,vL="[object Null]",_L="[object Undefined]",$b=Fb?Fb.toStringTag:void 0;function yL(e){return e==null?e===void 0?_L:vL:$b&&$b in Object(e)?gL(e):mL(e)}var Z0=yL;function bL(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var fd=bL,wL=Z0,SL=fd,xL="[object AsyncFunction]",EL="[object Function]",kL="[object GeneratorFunction]",CL="[object Proxy]";function TL(e){if(!SL(e))return!1;var t=wL(e);return t==EL||t==kL||t==xL||t==CL}var N3=TL,AL=fi,PL=AL["__core-js_shared__"],LL=PL,Bv=LL,Bb=function(){var e=/[^.]+$/.exec(Bv&&Bv.keys&&Bv.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function IL(e){return!!Bb&&Bb in e}var RL=IL,OL=Function.prototype,DL=OL.toString;function ML(e){if(e!=null){try{return DL.call(e)}catch{}try{return e+""}catch{}}return""}var F3=ML,NL=N3,FL=RL,$L=fd,BL=F3,UL=/[\\^$.*+?()[\]{}|]/g,VL=/^\[object .+?Constructor\]$/,HL=Function.prototype,zL=Object.prototype,jL=HL.toString,GL=zL.hasOwnProperty,WL=RegExp("^"+jL.call(GL).replace(UL,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qL(e){if(!$L(e)||FL(e))return!1;var t=NL(e)?WL:VL;return t.test(BL(e))}var YL=qL;function KL(e,t){return e==null?void 0:e[t]}var ZL=KL,JL=YL,XL=ZL;function QL(e,t){var n=XL(e,t);return JL(n)?n:void 0}var Ys=QL,eI=Ys,tI=fi,nI=eI(tI,"Map"),L_=nI,rI=Ys,aI=rI(Object,"create"),J0=aI,Ub=J0;function iI(){this.__data__=Ub?Ub(null):{},this.size=0}var oI=iI;function sI(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var lI=sI,uI=J0,cI="__lodash_hash_undefined__",fI=Object.prototype,dI=fI.hasOwnProperty;function hI(e){var t=this.__data__;if(uI){var n=t[e];return n===cI?void 0:n}return dI.call(t,e)?t[e]:void 0}var pI=hI,gI=J0,mI=Object.prototype,vI=mI.hasOwnProperty;function _I(e){var t=this.__data__;return gI?t[e]!==void 0:vI.call(t,e)}var yI=_I,bI=J0,wI="__lodash_hash_undefined__";function SI(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=bI&&t===void 0?wI:t,this}var xI=SI,EI=oI,kI=lI,CI=pI,TI=yI,AI=xI;function Vu(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Vu.prototype.clear=EI;Vu.prototype.delete=kI;Vu.prototype.get=CI;Vu.prototype.has=TI;Vu.prototype.set=AI;var PI=Vu,Vb=PI,LI=K0,II=L_;function RI(){this.size=0,this.__data__={hash:new Vb,map:new(II||LI),string:new Vb}}var OI=RI;function DI(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var MI=DI,NI=MI;function FI(e,t){var n=e.__data__;return NI(t)?n[typeof t=="string"?"string":"hash"]:n.map}var X0=FI,$I=X0;function BI(e){var t=$I(this,e).delete(e);return this.size-=t?1:0,t}var UI=BI,VI=X0;function HI(e){return VI(this,e).get(e)}var zI=HI,jI=X0;function GI(e){return jI(this,e).has(e)}var WI=GI,qI=X0;function YI(e,t){var n=qI(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var KI=YI,ZI=OI,JI=UI,XI=zI,QI=WI,eR=KI;function Hu(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Hu.prototype.clear=ZI;Hu.prototype.delete=JI;Hu.prototype.get=XI;Hu.prototype.has=QI;Hu.prototype.set=eR;var tR=Hu,nR=K0,rR=L_,aR=tR,iR=200;function oR(e,t){var n=this.__data__;if(n instanceof nR){var r=n.__data__;if(!rR||r.length<iR-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new aR(r)}return n.set(e,t),this.size=n.size,this}var sR=oR,lR=K0,uR=YP,cR=ZP,fR=XP,dR=eL,hR=sR;function zu(e){var t=this.__data__=new lR(e);this.size=t.size}zu.prototype.clear=uR;zu.prototype.delete=cR;zu.prototype.get=fR;zu.prototype.has=dR;zu.prototype.set=hR;var pR=zu;function gR(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var mR=gR,vR=Ys,_R=function(){try{var e=vR(Object,"defineProperty");return e({},"",{}),e}catch{}}(),yR=_R,Hb=yR;function bR(e,t,n){t=="__proto__"&&Hb?Hb(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var $3=bR,wR=$3,SR=O3,xR=Object.prototype,ER=xR.hasOwnProperty;function kR(e,t,n){var r=e[t];(!(ER.call(e,t)&&SR(r,n))||n===void 0&&!(t in e))&&wR(e,t,n)}var B3=kR,CR=B3,TR=$3;function AR(e,t,n,r){var i=!n;n||(n={});for(var l=-1,s=t.length;++l<s;){var c=t[l],h=r?r(n[c],e[c],c,n,e):void 0;h===void 0&&(h=e[c]),i?TR(n,c,h):CR(n,c,h)}return n}var Q0=AR;function PR(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var LR=PR;function IR(e){return e!=null&&typeof e=="object"}var dd=IR,RR=Z0,OR=dd,DR="[object Arguments]";function MR(e){return OR(e)&&RR(e)==DR}var NR=MR,zb=NR,FR=dd,U3=Object.prototype,$R=U3.hasOwnProperty,BR=U3.propertyIsEnumerable,UR=zb(function(){return arguments}())?zb:function(e){return FR(e)&&$R.call(e,"callee")&&!BR.call(e,"callee")},VR=UR,HR=Array.isArray,I_=HR,Uf={},zR={get exports(){return Uf},set exports(e){Uf=e}};function jR(){return!1}var GR=jR;(function(e,t){var n=fi,r=GR,i=t&&!t.nodeType&&t,l=i&&!0&&e&&!e.nodeType&&e,s=l&&l.exports===i,c=s?n.Buffer:void 0,h=c?c.isBuffer:void 0,p=h||r;e.exports=p})(zR,Uf);var WR=9007199254740991,qR=/^(?:0|[1-9]\d*)$/;function YR(e,t){var n=typeof e;return t=t??WR,!!t&&(n=="number"||n!="symbol"&&qR.test(e))&&e>-1&&e%1==0&&e<t}var KR=YR,ZR=9007199254740991;function JR(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ZR}var V3=JR,XR=Z0,QR=V3,eO=dd,tO="[object Arguments]",nO="[object Array]",rO="[object Boolean]",aO="[object Date]",iO="[object Error]",oO="[object Function]",sO="[object Map]",lO="[object Number]",uO="[object Object]",cO="[object RegExp]",fO="[object Set]",dO="[object String]",hO="[object WeakMap]",pO="[object ArrayBuffer]",gO="[object DataView]",mO="[object Float32Array]",vO="[object Float64Array]",_O="[object Int8Array]",yO="[object Int16Array]",bO="[object Int32Array]",wO="[object Uint8Array]",SO="[object Uint8ClampedArray]",xO="[object Uint16Array]",EO="[object Uint32Array]",rn={};rn[mO]=rn[vO]=rn[_O]=rn[yO]=rn[bO]=rn[wO]=rn[SO]=rn[xO]=rn[EO]=!0;rn[tO]=rn[nO]=rn[pO]=rn[rO]=rn[gO]=rn[aO]=rn[iO]=rn[oO]=rn[sO]=rn[lO]=rn[uO]=rn[cO]=rn[fO]=rn[dO]=rn[hO]=!1;function kO(e){return eO(e)&&QR(e.length)&&!!rn[XR(e)]}var CO=kO;function TO(e){return function(t){return e(t)}}var R_=TO,Pu={},AO={get exports(){return Pu},set exports(e){Pu=e}};(function(e,t){var n=D3,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,l=i&&i.exports===r,s=l&&n.process,c=function(){try{var h=i&&i.require&&i.require("util").types;return h||s&&s.binding&&s.binding("util")}catch{}}();e.exports=c})(AO,Pu);var PO=CO,LO=R_,jb=Pu,Gb=jb&&jb.isTypedArray,IO=Gb?LO(Gb):PO,RO=IO,OO=LR,DO=VR,MO=I_,NO=Uf,FO=KR,$O=RO,BO=Object.prototype,UO=BO.hasOwnProperty;function VO(e,t){var n=MO(e),r=!n&&DO(e),i=!n&&!r&&NO(e),l=!n&&!r&&!i&&$O(e),s=n||r||i||l,c=s?OO(e.length,String):[],h=c.length;for(var p in e)(t||UO.call(e,p))&&!(s&&(p=="length"||i&&(p=="offset"||p=="parent")||l&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||FO(p,h)))&&c.push(p);return c}var H3=VO,HO=Object.prototype;function zO(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||HO;return e===n}var O_=zO;function jO(e,t){return function(n){return e(t(n))}}var z3=jO,GO=z3,WO=GO(Object.keys,Object),qO=WO,YO=O_,KO=qO,ZO=Object.prototype,JO=ZO.hasOwnProperty;function XO(e){if(!YO(e))return KO(e);var t=[];for(var n in Object(e))JO.call(e,n)&&n!="constructor"&&t.push(n);return t}var QO=XO,eD=N3,tD=V3;function nD(e){return e!=null&&tD(e.length)&&!eD(e)}var j3=nD,rD=H3,aD=QO,iD=j3;function oD(e){return iD(e)?rD(e):aD(e)}var D_=oD,sD=Q0,lD=D_;function uD(e,t){return e&&sD(t,lD(t),e)}var cD=uD;function fD(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var dD=fD,hD=fd,pD=O_,gD=dD,mD=Object.prototype,vD=mD.hasOwnProperty;function _D(e){if(!hD(e))return gD(e);var t=pD(e),n=[];for(var r in e)r=="constructor"&&(t||!vD.call(e,r))||n.push(r);return n}var yD=_D,bD=H3,wD=yD,SD=j3;function xD(e){return SD(e)?bD(e,!0):wD(e)}var M_=xD,ED=Q0,kD=M_;function CD(e,t){return e&&ED(t,kD(t),e)}var TD=CD,c0={},AD={get exports(){return c0},set exports(e){c0=e}};(function(e,t){var n=fi,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,l=i&&i.exports===r,s=l?n.Buffer:void 0,c=s?s.allocUnsafe:void 0;function h(p,g){if(g)return p.slice();var _=p.length,b=c?c(_):new p.constructor(_);return p.copy(b),b}e.exports=h})(AD,c0);function PD(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var LD=PD;function ID(e,t){for(var n=-1,r=e==null?0:e.length,i=0,l=[];++n<r;){var s=e[n];t(s,n,e)&&(l[i++]=s)}return l}var RD=ID;function OD(){return[]}var G3=OD,DD=RD,MD=G3,ND=Object.prototype,FD=ND.propertyIsEnumerable,Wb=Object.getOwnPropertySymbols,$D=Wb?function(e){return e==null?[]:(e=Object(e),DD(Wb(e),function(t){return FD.call(e,t)}))}:MD,N_=$D,BD=Q0,UD=N_;function VD(e,t){return BD(e,UD(e),t)}var HD=VD;function zD(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var W3=zD,jD=z3,GD=jD(Object.getPrototypeOf,Object),q3=GD,WD=W3,qD=q3,YD=N_,KD=G3,ZD=Object.getOwnPropertySymbols,JD=ZD?function(e){for(var t=[];e;)WD(t,YD(e)),e=qD(e);return t}:KD,Y3=JD,XD=Q0,QD=Y3;function eM(e,t){return XD(e,QD(e),t)}var tM=eM,nM=W3,rM=I_;function aM(e,t,n){var r=t(e);return rM(e)?r:nM(r,n(e))}var K3=aM,iM=K3,oM=N_,sM=D_;function lM(e){return iM(e,sM,oM)}var uM=lM,cM=K3,fM=Y3,dM=M_;function hM(e){return cM(e,dM,fM)}var pM=hM,gM=Ys,mM=fi,vM=gM(mM,"DataView"),_M=vM,yM=Ys,bM=fi,wM=yM(bM,"Promise"),SM=wM,xM=Ys,EM=fi,kM=xM(EM,"Set"),CM=kM,TM=Ys,AM=fi,PM=TM(AM,"WeakMap"),LM=PM,S1=_M,x1=L_,E1=SM,k1=CM,C1=LM,Z3=Z0,ju=F3,qb="[object Map]",IM="[object Object]",Yb="[object Promise]",Kb="[object Set]",Zb="[object WeakMap]",Jb="[object DataView]",RM=ju(S1),OM=ju(x1),DM=ju(E1),MM=ju(k1),NM=ju(C1),ks=Z3;(S1&&ks(new S1(new ArrayBuffer(1)))!=Jb||x1&&ks(new x1)!=qb||E1&&ks(E1.resolve())!=Yb||k1&&ks(new k1)!=Kb||C1&&ks(new C1)!=Zb)&&(ks=function(e){var t=Z3(e),n=t==IM?e.constructor:void 0,r=n?ju(n):"";if(r)switch(r){case RM:return Jb;case OM:return qb;case DM:return Yb;case MM:return Kb;case NM:return Zb}return t});var F_=ks,FM=Object.prototype,$M=FM.hasOwnProperty;function BM(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&$M.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var UM=BM,VM=fi,HM=VM.Uint8Array,zM=HM,Xb=zM;function jM(e){var t=new e.constructor(e.byteLength);return new Xb(t).set(new Xb(e)),t}var $_=jM,GM=$_;function WM(e,t){var n=t?GM(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var qM=WM,YM=/\w*$/;function KM(e){var t=new e.constructor(e.source,YM.exec(e));return t.lastIndex=e.lastIndex,t}var ZM=KM,Qb=P_,e2=Qb?Qb.prototype:void 0,t2=e2?e2.valueOf:void 0;function JM(e){return t2?Object(t2.call(e)):{}}var XM=JM,QM=$_;function eN(e,t){var n=t?QM(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var tN=eN,nN=$_,rN=qM,aN=ZM,iN=XM,oN=tN,sN="[object Boolean]",lN="[object Date]",uN="[object Map]",cN="[object Number]",fN="[object RegExp]",dN="[object Set]",hN="[object String]",pN="[object Symbol]",gN="[object ArrayBuffer]",mN="[object DataView]",vN="[object Float32Array]",_N="[object Float64Array]",yN="[object Int8Array]",bN="[object Int16Array]",wN="[object Int32Array]",SN="[object Uint8Array]",xN="[object Uint8ClampedArray]",EN="[object Uint16Array]",kN="[object Uint32Array]";function CN(e,t,n){var r=e.constructor;switch(t){case gN:return nN(e);case sN:case lN:return new r(+e);case mN:return rN(e,n);case vN:case _N:case yN:case bN:case wN:case SN:case xN:case EN:case kN:return oN(e,n);case uN:return new r;case cN:case hN:return new r(e);case fN:return aN(e);case dN:return new r;case pN:return iN(e)}}var TN=CN,AN=fd,n2=Object.create,PN=function(){function e(){}return function(t){if(!AN(t))return{};if(n2)return n2(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),LN=PN,IN=LN,RN=q3,ON=O_;function DN(e){return typeof e.constructor=="function"&&!ON(e)?IN(RN(e)):{}}var MN=DN,NN=F_,FN=dd,$N="[object Map]";function BN(e){return FN(e)&&NN(e)==$N}var UN=BN,VN=UN,HN=R_,r2=Pu,a2=r2&&r2.isMap,zN=a2?HN(a2):VN,jN=zN,GN=F_,WN=dd,qN="[object Set]";function YN(e){return WN(e)&&GN(e)==qN}var KN=YN,ZN=KN,JN=R_,i2=Pu,o2=i2&&i2.isSet,XN=o2?JN(o2):ZN,QN=XN,eF=pR,tF=mR,nF=B3,rF=cD,aF=TD,iF=c0,oF=LD,sF=HD,lF=tM,uF=uM,cF=pM,fF=F_,dF=UM,hF=TN,pF=MN,gF=I_,mF=Uf,vF=jN,_F=fd,yF=QN,bF=D_,wF=M_,SF=1,xF=2,EF=4,J3="[object Arguments]",kF="[object Array]",CF="[object Boolean]",TF="[object Date]",AF="[object Error]",X3="[object Function]",PF="[object GeneratorFunction]",LF="[object Map]",IF="[object Number]",Q3="[object Object]",RF="[object RegExp]",OF="[object Set]",DF="[object String]",MF="[object Symbol]",NF="[object WeakMap]",FF="[object ArrayBuffer]",$F="[object DataView]",BF="[object Float32Array]",UF="[object Float64Array]",VF="[object Int8Array]",HF="[object Int16Array]",zF="[object Int32Array]",jF="[object Uint8Array]",GF="[object Uint8ClampedArray]",WF="[object Uint16Array]",qF="[object Uint32Array]",Zt={};Zt[J3]=Zt[kF]=Zt[FF]=Zt[$F]=Zt[CF]=Zt[TF]=Zt[BF]=Zt[UF]=Zt[VF]=Zt[HF]=Zt[zF]=Zt[LF]=Zt[IF]=Zt[Q3]=Zt[RF]=Zt[OF]=Zt[DF]=Zt[MF]=Zt[jF]=Zt[GF]=Zt[WF]=Zt[qF]=!0;Zt[AF]=Zt[X3]=Zt[NF]=!1;function qp(e,t,n,r,i,l){var s,c=t&SF,h=t&xF,p=t&EF;if(n&&(s=i?n(e,r,i,l):n(e)),s!==void 0)return s;if(!_F(e))return e;var g=gF(e);if(g){if(s=dF(e),!c)return oF(e,s)}else{var _=fF(e),b=_==X3||_==PF;if(mF(e))return iF(e,c);if(_==Q3||_==J3||b&&!i){if(s=h||b?{}:pF(e),!c)return h?lF(e,aF(s,e)):sF(e,rF(s,e))}else{if(!Zt[_])return i?e:{};s=hF(e,_,c)}}l||(l=new eF);var x=l.get(e);if(x)return x;l.set(e,s),yF(e)?e.forEach(function(P){s.add(qp(P,t,n,P,e,l))}):vF(e)&&e.forEach(function(P,A){s.set(A,qp(P,t,n,A,e,l))});var k=p?h?cF:uF:h?wF:bF,T=g?void 0:k(e);return tF(T||e,function(P,A){T&&(A=P,P=e[A]),nF(s,A,qp(P,t,n,A,e,l))}),s}var YF=qp,KF=YF,ZF=1,JF=4;function XF(e){return KF(e,ZF|JF)}var QF=XF;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(QF),n=r(ci);function r(s){return s&&s.__esModule?s:{default:s}}function i(s){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},i(s)}var l=function(c){var h=c.blocks.reduce(function(g,_){return g[_.name]=_,g},{}),p=function g(_,b){var x=[];return _.forEach(function(k){if(k.type==="INSERT"){var T=function(){var A,L,F,N,W,te=k,G=h[te.block];if(!G)return n.default.error("no block found for insert. block:",te.block),{v:void 0};var K=(A=te.rowCount)!==null&&A!==void 0?A:1,re=(L=te.columnCount)!==null&&L!==void 0?L:1,H=(F=te.rowSpacing)!==null&&F!==void 0?F:0,J=(N=te.columnSpacing)!==null&&N!==void 0?N:0,ie=(W=te.rotation)!==null&&W!==void 0?W:0,oe,le;if(K>1||re>1){var $=Math.cos(ie*Math.PI/180),Y=Math.sin(ie*Math.PI/180);oe={x:-Y*H,y:$*H},le={x:$*J,y:Y*J}}else oe={x:0,y:0},le={x:0,y:0};for(var z=0;z<K;z++)for(var V=0;V<re;V++){var ue={x:te.x+oe.x*z+le.x*V,y:te.y+oe.y*z+le.y*V,scaleX:te.scaleX,scaleY:te.scaleY,scaleZ:te.scaleZ,extrusionX:te.extrusionX,extrusionY:te.extrusionY,extrusionZ:te.extrusionZ,rotation:te.rotation},xe=b.slice(0);xe.push(ue);var ce=G.entities.map(function(Ae){var De=(0,t.default)(Ae);switch(De.layer=te.layer,De.type){case"LINE":{De.start.x-=G.x,De.start.y-=G.y,De.end.x-=G.x,De.end.y-=G.y;break}case"LWPOLYLINE":case"POLYLINE":{De.vertices.forEach(function(ae){ae.x-=G.x,ae.y-=G.y});break}case"CIRCLE":case"ELLIPSE":case"ARC":{De.x-=G.x,De.y-=G.y;break}case"SPLINE":{De.controlPoints.forEach(function(ae){ae.x-=G.x,ae.y-=G.y});break}}return De});x=x.concat(g(ce,xe))}}();if(i(T)==="object")return T.v}else{var P=(0,t.default)(k);P.transforms=b.slice().reverse(),x.push(P)}}),x};return p(c.entities,[])};e.default=l})(cd);var B_={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(r){return r.reduce(function(i,l){var s=l.layer;return i[s]||(i[s]=[]),i[s].push(l),i},{})};e.default=t})(B_);var U_={},hd={},eg={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;function t(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(p){return typeof p}:t=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},t(c)}function n(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function r(c,h){for(var p=0;p<h.length;p++){var g=h[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(c,g.key,g)}}function i(c,h,p){return h&&r(c.prototype,h),p&&r(c,p),c}var l=function(){function c(h,p){n(this,c),t(h)==="object"?(this.x=h.x,this.y=h.y):(this.x=h,this.y=p)}return i(c,[{key:"equals",value:function(p){return this.x===p.x&&this.y===p.y}},{key:"length",value:function(){return Math.sqrt(this.dot(this))}},{key:"neg",value:function(){return new c(-this.x,-this.y)}},{key:"add",value:function(p){return new c(this.x+p.x,this.y+p.y)}},{key:"sub",value:function(p){return new c(this.x-p.x,this.y-p.y)}},{key:"multiply",value:function(p){return new c(this.x*p,this.y*p)}},{key:"norm",value:function(){return this.multiply(1/this.length())}},{key:"dot",value:function(p){return this.x*p.x+this.y*p.y}}]),c}(),s=l;e.default=s})(eg);var pd={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;function t(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(p){return typeof p}:t=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},t(c)}function n(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function r(c,h){for(var p=0;p<h.length;p++){var g=h[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(c,g.key,g)}}function i(c,h,p){return h&&r(c.prototype,h),p&&r(c,p),c}var l=function(){function c(h,p,g){n(this,c),t(h)==="object"?(this.x=h.x,this.y=h.y,this.z=h.z):h===void 0?(this.x=0,this.y=0,this.z=0):(this.x=h,this.y=p,this.z=g)}return i(c,[{key:"equals",value:function(p,g){return g===void 0&&(g=0),Math.abs(this.x-p.x)<=g&&Math.abs(this.y-p.y)<=g&&Math.abs(this.z-p.z)<=g}},{key:"length",value:function(){return Math.sqrt(this.dot(this))}},{key:"neg",value:function(){return new c(-this.x,-this.y,-this.z)}},{key:"add",value:function(p){return new c(this.x+p.x,this.y+p.y,this.z+p.z)}},{key:"sub",value:function(p){return new c(this.x-p.x,this.y-p.y,this.z-p.z)}},{key:"multiply",value:function(p){return new c(this.x*p,this.y*p,this.z*p)}},{key:"norm",value:function(){return this.multiply(1/this.length())}},{key:"dot",value:function(p){return this.x*p.x+this.y*p.y+this.z*p.z}},{key:"cross",value:function(p){return new c(this.y*p.z-this.z*p.y,this.z*p.x-this.x*p.z,this.x*p.y-this.y*p.x)}}]),c}(),s=l;e.default=s})(pd);var e6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(eg);function n(p){return p&&p.__esModule?p:{default:p}}function r(p){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(_){return typeof _}:r=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},r(p)}function i(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function l(p,g){for(var _=0;_<g.length;_++){var b=g[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}function s(p,g,_){return g&&l(p.prototype,g),_&&l(p,_),p}var c=function(){function p(g,_){if(i(this,p),r(g)==="object"&&r(_)==="object"&&g.x!==void 0&&g.y!==void 0&&_.x!==void 0&&_.y!==void 0)this.min=new t.default(g),this.max=new t.default(_),this.valid=!0;else if(g===void 0&&_===void 0)this.min=new t.default(1/0,1/0),this.max=new t.default(-1/0,-1/0),this.valid=!1;else throw Error("Illegal construction - must use { x, y } objects")}return s(p,[{key:"equals",value:function(_){if(!this.valid)throw Error("Box2 is invalid");return this.min.equals(_.min)&&this.max.equals(_.max)}},{key:"expandByPoint",value:function(_){return this.min=new t.default(Math.min(this.min.x,_.x),Math.min(this.min.y,_.y)),this.max=new t.default(Math.max(this.max.x,_.x),Math.max(this.max.y,_.y)),this.valid=!0,this}},{key:"expandByPoints",value:function(_){var b=this;return _.forEach(function(x){b.expandByPoint(x)},this),this}},{key:"isPointInside",value:function(_){return _.x>=this.min.x&&_.y>=this.min.y&&_.x<=this.max.x&&_.y<=this.max.y}},{key:"width",get:function(){if(!this.valid)throw Error("Box2 is invalid");return this.max.x-this.min.x}},{key:"height",get:function(){if(!this.valid)throw Error("Box2 is invalid");return this.max.y-this.min.y}}]),p}();c.fromPoints=function(p){return new c().expandByPoints(p)};var h=c;e.default=h})(e6);var t6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(pd);function n(p){return p&&p.__esModule?p:{default:p}}function r(p){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(_){return typeof _}:r=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},r(p)}function i(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function l(p,g){for(var _=0;_<g.length;_++){var b=g[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}function s(p,g,_){return g&&l(p.prototype,g),_&&l(p,_),p}var c=function(){function p(g,_){if(i(this,p),r(g)==="object"&&r(_)==="object"&&g.x!==void 0&&g.y!==void 0&&g.z!==void 0&&_.x!==void 0&&_.y!==void 0&&_.z!==void 0)this.min=new t.default(g),this.max=new t.default(_),this.valid=!0;else if(g===void 0&&_===void 0)this.min=new t.default(1/0,1/0,1/0),this.max=new t.default(-1/0,-1/0,-1/0),this.valid=!1;else throw Error("Illegal construction - must use { x, y, z } objects")}return s(p,[{key:"equals",value:function(_){if(!this.valid)throw Error("Box3 is invalid");return this.min.equals(_.min)&&this.max.equals(_.max)}},{key:"expandByPoint",value:function(_){return this.min=new t.default(Math.min(this.min.x,_.x),Math.min(this.min.y,_.y),Math.min(this.min.z,_.z)),this.max=new t.default(Math.max(this.max.x,_.x),Math.max(this.max.y,_.y),Math.max(this.max.z,_.z)),this.valid=!0,this}},{key:"expandByPoints",value:function(_){var b=this;return _.forEach(function(x){b.expandByPoint(x)},this),this}},{key:"isPointInside",value:function(_){return _.x>=this.min.x&&_.y>=this.min.y&&_.z>=this.min.z&&_.x<=this.max.x&&_.y<=this.max.y&&_.z<=this.max.z}},{key:"width",get:function(){if(!this.valid)throw Error("Box3 is invalid");return this.max.x-this.min.x}},{key:"depth",get:function(){if(!this.valid)throw Error("Box3 is invalid");return this.max.y-this.min.y}},{key:"height",get:function(){if(!this.valid)throw Error("Box3 is invalid");return this.max.z-this.min.z}}]),p}();c.fromPoints=function(p){return new c().expandByPoints(p)};var h=c;e.default=h})(t6);var n6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;function t(s,c){if(!(s instanceof c))throw new TypeError("Cannot call a class as a function")}function n(s,c){for(var h=0;h<c.length;h++){var p=c[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(s,p.key,p)}}function r(s,c,h){return c&&n(s.prototype,c),h&&n(s,h),s}var i=function(){function s(c,h,p,g){t(this,s),this.a=c,this.b=h,this.c=p,this.d=g}return r(s,[{key:"distanceToPoint",value:function(h){var p=(this.a*h.x+this.b*h.y+this.c*h.z+this.d)/Math.sqrt(this.a*this.a+this.b*this.b+this.c*this.c);return p}},{key:"equals",value:function(h){return this.a===h.a&&this.b===h.b&&this.c===h.c&&this.d===h.d}},{key:"coPlanar",value:function(h){var p=this.a===h.a&&this.b===h.b&&this.c===h.c&&this.d===h.d,g=this.a===-h.a&&this.b===-h.b&&this.c===-h.c&&this.d===-h.d;return p||g}}]),s}();i.fromPointAndNormal=function(s,c){var h=c.x,p=c.y,g=c.z,_=-(s.x*h+s.y*p+s.z*g);return new i(c.x,c.y,c.z,_)},i.fromPoints=function(s){for(var c,h=0,p=s.length;h<p;++h){var g=s[(h+1)%p].sub(s[h]),_=s[(h+2)%p].sub(s[(h+1)%p]),b=g.cross(_);if(!(isNaN(b.length())||b.length()===0))if(!c)c=b.norm();else{var x=b.norm().equals(c,1e-6),k=b.neg().norm().equals(c,1e-6);if(!(x||k))throw Error("points not on a plane")}}if(!c)throw Error("points not on a plane");return i.fromPointAndNormal(s[0],c.norm())};var l=i;e.default=l})(n6);var r6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(pd);function n(h){return h&&h.__esModule?h:{default:h}}function r(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function i(h,p){for(var g=0;g<p.length;g++){var _=p[g];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,_.key,_)}}function l(h,p,g){return p&&i(h.prototype,p),g&&i(h,g),h}var s=function(){function h(p,g,_,b){r(this,h),this.x=p,this.y=g,this.z=_,this.w=b}return l(h,[{key:"applyToVec3",value:function(g){var _=g.x,b=g.y,x=g.z,k=this.x,T=this.y,P=this.z,A=this.w,L=A*_+T*x-P*b,F=A*b+P*_-k*x,N=A*x+k*b-T*_,W=-k*_-T*b-P*x;return new t.default(L*A+W*-k+F*-P-N*-T,F*A+W*-T+N*-k-L*-P,N*A+W*-P+L*-T-F*-k)}}]),h}();s.fromAxisAngle=function(h,p){var g=h.norm(),_=p/2,b=Math.sin(_);return new s(g.x*b,g.y*b,g.z*b,Math.cos(_))};var c=s;e.default=c})(r6);var a6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(eg);function n(x){return x&&x.__esModule?x:{default:x}}function r(x){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(T){return typeof T}:r=function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},r(x)}function i(x,k){if(!(x instanceof k))throw new TypeError("Cannot call a class as a function")}function l(x,k){for(var T=0;T<k.length;T++){var P=k[T];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}function s(x,k,T){return k&&l(x.prototype,k),T&&l(x,T),x}var c=function(k,T,P){var A=k.x,L=k.y,F=T.x,N=T.y,W=P.x,te=P.y,G=(te-L)*(F-A),K=(N-L)*(W-A);return G>K+Number.EPSILON?1:G+Number.EPSILON<K?-1:0},h=function(k,T){var P=k.a,A=k.b,L=T.a,F=T.b;return c(P,L,F)!==c(A,L,F)&&c(P,A,L)!==c(P,A,F)},p=function(k,T){var P=k.a.x,A=k.b.x,L=k.a.y,F=k.b.y,N=T.a.x,W=T.b.x,te=T.a.y,G=T.b.y,K=P-A,re=N-W,H=L-F,J=te-G,ie=K*J-H*re,oe=((P*F-L*A)*re-K*(N*G-te*W))/ie,le=((P*F-L*A)*J-H*(N*G-te*W))/ie;return isNaN(oe)||isNaN(le)?null:new t.default(oe,le)},g=function(k,T){return Math.sqrt(Math.pow(k.x-T.x,2)+Math.pow(k.y-T.y,2))},_=function(){function x(k,T){if(i(this,x),r(k)!=="object"||k.x===void 0||k.y===void 0)throw Error("expected first argument to have x and y properties");if(r(T)!=="object"||T.x===void 0||T.y===void 0)throw Error("expected second argument to have x and y properties");this.a=new t.default(k),this.b=new t.default(T)}return s(x,[{key:"length",value:function(){return this.a.sub(this.b).length()}},{key:"intersects",value:function(T){if(!(T instanceof x))throw new Error("expected argument to be an instance of vecks.Line2");return h(this,T)}},{key:"getIntersection",value:function(T){return this.intersects(T)?p(this,T):null}},{key:"containsPoint",value:function(T){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e-12;return Math.abs(g(this.a,this.b)-g(T,this.a)-g(T,this.b))<P}}]),x}(),b=_;e.default=b})(a6);var i6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(pd);function n(g){return g&&g.__esModule?g:{default:g}}function r(g){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(b){return typeof b}:r=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},r(g)}function i(g,_){if(!(g instanceof _))throw new TypeError("Cannot call a class as a function")}function l(g,_){for(var b=0;b<_.length;b++){var x=_[b];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}function s(g,_,b){return _&&l(g.prototype,_),b&&l(g,b),g}var c=function(_,b){return Math.sqrt(Math.pow(_.x-b.x,2)+Math.pow(_.y-b.y,2)+Math.pow(_.z-b.z,2))},h=function(){function g(_,b){if(i(this,g),r(_)!=="object"||_.x===void 0||_.y===void 0||_.z===void 0)throw Error("expected first argument to have x, y and z properties");if(r(b)!=="object"||b.x===void 0||b.y===void 0||b.y===void 0)throw Error("expected second argument to have x, y and z properties");this.a=new t.default(_),this.b=new t.default(b)}return s(g,[{key:"length",value:function(){return this.a.sub(this.b).length()}},{key:"containsPoint",value:function(b){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e-12;return Math.abs(c(this.a,this.b)-c(b,this.a)-c(b,this.b))<x}}]),g}(),p=h;e.default=p})(i6);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"V2",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"V3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"Box2",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Box3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"Plane3",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"Quaternion",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"Line2",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"Line3",{enumerable:!0,get:function(){return h.default}});var t=p(eg),n=p(pd),r=p(e6),i=p(t6),l=p(n6),s=p(r6),c=p(a6),h=p(i6);function p(g){return g&&g.__esModule?g:{default:g}}})(hd);var tg={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[[0,0,0],[255,0,0],[255,255,0],[0,255,0],[0,255,255],[0,0,255],[255,0,255],[255,255,255],[65,65,65],[128,128,128],[255,0,0],[255,170,170],[189,0,0],[189,126,126],[129,0,0],[129,86,86],[104,0,0],[104,69,69],[79,0,0],[79,53,53],[255,63,0],[255,191,170],[189,46,0],[189,141,126],[129,31,0],[129,96,86],[104,25,0],[104,78,69],[79,19,0],[79,59,53],[255,127,0],[255,212,170],[189,94,0],[189,157,126],[129,64,0],[129,107,86],[104,52,0],[104,86,69],[79,39,0],[79,66,53],[255,191,0],[255,234,170],[189,141,0],[189,173,126],[129,96,0],[129,118,86],[104,78,0],[104,95,69],[79,59,0],[79,73,53],[255,255,0],[255,255,170],[189,189,0],[189,189,126],[129,129,0],[129,129,86],[104,104,0],[104,104,69],[79,79,0],[79,79,53],[191,255,0],[234,255,170],[141,189,0],[173,189,126],[96,129,0],[118,129,86],[78,104,0],[95,104,69],[59,79,0],[73,79,53],[127,255,0],[212,255,170],[94,189,0],[157,189,126],[64,129,0],[107,129,86],[52,104,0],[86,104,69],[39,79,0],[66,79,53],[63,255,0],[191,255,170],[46,189,0],[141,189,126],[31,129,0],[96,129,86],[25,104,0],[78,104,69],[19,79,0],[59,79,53],[0,255,0],[170,255,170],[0,189,0],[126,189,126],[0,129,0],[86,129,86],[0,104,0],[69,104,69],[0,79,0],[53,79,53],[0,255,63],[170,255,191],[0,189,46],[126,189,141],[0,129,31],[86,129,96],[0,104,25],[69,104,78],[0,79,19],[53,79,59],[0,255,127],[170,255,212],[0,189,94],[126,189,157],[0,129,64],[86,129,107],[0,104,52],[69,104,86],[0,79,39],[53,79,66],[0,255,191],[170,255,234],[0,189,141],[126,189,173],[0,129,96],[86,129,118],[0,104,78],[69,104,95],[0,79,59],[53,79,73],[0,255,255],[170,255,255],[0,189,189],[126,189,189],[0,129,129],[86,129,129],[0,104,104],[69,104,104],[0,79,79],[53,79,79],[0,191,255],[170,234,255],[0,141,189],[126,173,189],[0,96,129],[86,118,129],[0,78,104],[69,95,104],[0,59,79],[53,73,79],[0,127,255],[170,212,255],[0,94,189],[126,157,189],[0,64,129],[86,107,129],[0,52,104],[69,86,104],[0,39,79],[53,66,79],[0,63,255],[170,191,255],[0,46,189],[126,141,189],[0,31,129],[86,96,129],[0,25,104],[69,78,104],[0,19,79],[53,59,79],[0,0,255],[170,170,255],[0,0,189],[126,126,189],[0,0,129],[86,86,129],[0,0,104],[69,69,104],[0,0,79],[53,53,79],[63,0,255],[191,170,255],[46,0,189],[141,126,189],[31,0,129],[96,86,129],[25,0,104],[78,69,104],[19,0,79],[59,53,79],[127,0,255],[212,170,255],[94,0,189],[157,126,189],[64,0,129],[107,86,129],[52,0,104],[86,69,104],[39,0,79],[66,53,79],[191,0,255],[234,170,255],[141,0,189],[173,126,189],[96,0,129],[118,86,129],[78,0,104],[95,69,104],[59,0,79],[73,53,79],[255,0,255],[255,170,255],[189,0,189],[189,126,189],[129,0,129],[129,86,129],[104,0,104],[104,69,104],[79,0,79],[79,53,79],[255,0,191],[255,170,234],[189,0,141],[189,126,173],[129,0,96],[129,86,118],[104,0,78],[104,69,95],[79,0,59],[79,53,73],[255,0,127],[255,170,212],[189,0,94],[189,126,157],[129,0,64],[129,86,107],[104,0,52],[104,69,86],[79,0,39],[79,53,66],[255,0,63],[255,170,191],[189,0,46],[189,126,141],[129,0,31],[129,86,96],[104,0,25],[104,69,78],[79,0,19],[79,53,59],[51,51,51],[80,80,80],[105,105,105],[130,130,130],[190,190,190],[255,255,255]];e.default=t})(tg);var V_={},o6={},s6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(r,i){return typeof i>"u"||+i==0?Math.round(r):(r=+r,i=+i,isNaN(r)||!(typeof i=="number"&&i%1===0)?NaN:(r=r.toString().split("e"),r=Math.round(+(r[0]+"e"+(r[1]?+r[1]-i:-i))),r=r.toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+i:i))))};e.default=t})(s6);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(s6);function n(i){return i&&i.__esModule?i:{default:i}}var r=function(l,s,c,h,p){var g=c.length,_=c[0].length;if(l<0||l>1)throw new Error("t out of bounds [0,1]: "+l);if(s<1)throw new Error("degree must be at least 1 (linear)");if(s>g-1)throw new Error("degree must be less than or equal to point count - 1");if(!p){p=[];for(var b=0;b<g;b++)p[b]=1}if(h){if(h.length!==g+s+1)throw new Error("bad knot vector length")}else{h=[];for(var x=0;x<g+s+1;x++)h[x]=x}var k=[s,h.length-1-s],T=h[k[0]],P=h[k[1]];l=l*(P-T)+T,l=Math.max(l,T),l=Math.min(l,P);var A;for(A=k[0];A<k[1]&&!(l>=h[A]&&l<=h[A+1]);A++);for(var L=[],F=0;F<g;F++){L[F]=[];for(var N=0;N<_;N++)L[F][N]=c[F][N]*p[F];L[F][_]=p[F]}for(var W,te=1;te<=s+1;te++)for(var G=A;G>A-s-1+te;G--){W=(l-h[G])/(h[G+s+1-te]-h[G]);for(var K=0;K<_+1;K++)L[G][K]=(1-W)*L[G-1][K]+W*L[G][K]}for(var re=[],H=0;H<_;H++)re[H]=(0,t.default)(L[A][H]/L[A][_],-9);return re};e.default=r})(o6);var l6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=hd,n=function(i,l,s,c){c||(c=5);var h,p,g;s<0?(h=Math.atan(-s)*4,p=new t.V2(i[0],i[1]),g=new t.V2(l[0],l[1])):(h=Math.atan(s)*4,p=new t.V2(l[0],l[1]),g=new t.V2(i[0],i[1]));var _=g.sub(p),b=_.length(),x=p.add(_.multiply(.5)),k=Math.abs(b/2/Math.tan(h/2)),T=_.norm(),P;if(h<Math.PI){var A=new t.V2(T.x*Math.cos(Math.PI/2)-T.y*Math.sin(Math.PI/2),T.y*Math.cos(Math.PI/2)+T.x*Math.sin(Math.PI/2));P=x.add(A.multiply(-k))}else{var L=new t.V2(T.x*Math.cos(Math.PI/2)-T.y*Math.sin(Math.PI/2),T.y*Math.cos(Math.PI/2)+T.x*Math.sin(Math.PI/2));P=x.add(L.multiply(k))}var F=Math.atan2(g.y-P.y,g.x-P.x)/Math.PI*180,N=Math.atan2(p.y-P.y,p.x-P.x)/Math.PI*180;N<F&&(N+=360);for(var W=g.sub(P).length(),te=Math.floor(F/c)*c+c,G=Math.ceil(N/c)*c-c,K=[],re=te;re<=G;re+=c)K.push(P.add(new t.V2(Math.cos(re/180*Math.PI)*W,Math.sin(re/180*Math.PI)*W)));return s<0&&K.reverse(),K.map(function(H){return[H.x,H.y]})};e.default=n})(l6);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.interpolateBSpline=e.default=void 0;var t=i(o6),n=i(ci),r=i(l6);function i(p){return p&&p.__esModule?p:{default:p}}var l=function(g,_){return g.map(function(b){return[b[0]*Math.cos(_)-b[1]*Math.sin(_),b[1]*Math.cos(_)+b[0]*Math.sin(_)]})},s=function(g,_,b,x,k,T,P){T<k&&(T+=Math.PI*2);for(var A=[],L=Math.PI*2/72,F=1e-6,N=k;N<T-F;N+=L)A.push([Math.cos(N)*b,Math.sin(N)*x]);return A.push([Math.cos(T)*b,Math.sin(T)*x]),P&&(A=l(A,P)),A=A.map(function(W){return[g+W[0],_+W[1]]}),A},c=function(g,_,b,x,k){for(var T=[],P=g.map(function(J){return[J.x,J.y]}),A=[b[_]],L=[b[_],b[b.length-1-_]],F=_+1;F<b.length-_;++F)A[A.length-1]!==b[F]&&A.push(b[F]);x=x||25;for(var N=1;N<A.length;++N)for(var W=A[N-1],te=A[N],G=0;G<=x;++G){var K=G/x*(te-W)+W,re=(K-L[0])/(L[1]-L[0]);re=Math.max(re,0),re=Math.min(re,1);var H=(0,t.default)(re,_,P,b,k);T.push(H)}return T};e.interpolateBSpline=c;var h=function(g,_){_=_||{};var b;if(g.type==="LINE"&&(b=[[g.start.x,g.start.y],[g.end.x,g.end.y]]),(g.type==="LWPOLYLINE"||g.type==="POLYLINE")&&(b=[],!(g.polygonMesh||g.polyfaceMesh)))if(g.vertices.length){g.closed&&(g.vertices=g.vertices.concat(g.vertices[0]));for(var x=0,k=g.vertices.length;x<k-1;++x){var T=[g.vertices[x].x,g.vertices[x].y],P=[g.vertices[x+1].x,g.vertices[x+1].y];b.push(T),g.vertices[x].bulge&&(b=b.concat((0,r.default)(T,P,g.vertices[x].bulge))),x===k-2&&b.push(P)}}else n.default.warn("Polyline entity with no vertices");if(g.type==="CIRCLE"&&(b=s(g.x,g.y,g.r,g.r,0,Math.PI*2),g.extrusionZ===-1&&(b=b.map(function(N){return[-N[0],N[1]]}))),g.type==="ELLIPSE"){var A=Math.sqrt(g.majorX*g.majorX+g.majorY*g.majorY),L=g.axisRatio*A,F=-Math.atan2(-g.majorY,g.majorX);b=s(g.x,g.y,A,L,g.startAngle,g.endAngle,F),g.extrusionZ===-1&&(b=b.map(function(N){return[-N[0],N[1]]}))}return g.type==="ARC"&&(b=s(g.x,g.y,g.r,g.r,g.startAngle,g.endAngle,void 0),g.extrusionZ===-1&&(b=b.map(function(N){return[-N[0],N[1]]}))),g.type==="SPLINE"&&(b=c(g.controlPoints,g.degree,g.knots,_.interpolationsPerSplineSegment,g.weights)),b||(n.default.warn("unsupported entity for converting to polyline:",g.type),[])};e.default=h})(V_);var u6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(r,i){return i.forEach(function(l){r=r.map(function(s){var c=[s[0],s[1]];if(l.scaleX&&(c[0]=c[0]*l.scaleX),l.scaleY&&(c[1]=c[1]*l.scaleY),l.rotation){var h=l.rotation/180*Math.PI;c=[c[0]*Math.cos(h)-c[1]*Math.sin(h),c[1]*Math.cos(h)+c[0]*Math.sin(h)]}return l.x&&(c[0]=c[0]+l.x),l.y&&(c[1]=c[1]+l.y),l.extrusionZ===-1&&(c[0]=-c[0]),c})}),r};e.default=t})(u6);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=hd,n=c(tg),r=c(cd),i=c(V_),l=c(u6),s=c(ci);function c(p){return p&&p.__esModule?p:{default:p}}var h=function(g){var _=(0,r.default)(g),b=_.map(function(k){var T=g.tables.layers[k.layer],P;if(T){var A="colorNumber"in k?k.colorNumber:T.colorNumber;P=n.default[A],P===void 0&&(s.default.warn("Color index",A,"invalid, defaulting to black"),P=[0,0,0])}else s.default.warn("no layer table for layer:"+k.layer),P=[0,0,0];return{rgb:P,vertices:(0,l.default)((0,i.default)(k),k.transforms)}}),x=new t.Box2;return b.forEach(function(k){k.vertices.forEach(function(T){x.expandByPoint({x:T[0],y:T[1]})})}),{bbox:x,polylines:b}};e.default=h})(U_);var H_={},c6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(tg),n=r(ci);function r(l){return l&&l.__esModule?l:{default:l}}var i=function(s,c){var h=s[c.layer];if(h){var p="colorNumber"in c&&c.colorNumber!==256,g=p?c.colorNumber:h.colorNumber,_=t.default[g];return _||(n.default.warn("Color index",g,"invalid, defaulting to black"),[0,0,0])}else return n.default.warn("no layer table for layer:"+c.layer),[0,0,0]};e.default=i})(c6);var f6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(r,i){return{x:r.x*Math.cos(i)-r.y*Math.sin(i),y:r.y*Math.cos(i)+r.x*Math.sin(i)}};e.default=t})(f6);var d6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(r){return r[0]===255&&r[1]===255&&r[2]===255?"rgb(0, 0, 0)":"rgb(".concat(r[0],", ").concat(r[1],", ").concat(r[2],")")};e.default=t})(d6);var h6={},p6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(r,i,l,s){for(var c=l,h=i,p=i.length,g=0,_=!1,b=0;b<p+r;b++)if(s>c[b]&&s<=c[b+1]){g=b,_=!0;break}if(!_)throw new Error("invalid new knot");for(var x=[],k=0;k<p+r+1;k++)k<=g?x[k]=c[k]:k===g+1?x[k]=s:x[k]=c[k-1];for(var T,P=[],A=0;A<p+1;A++)A<=g-r+1?T=1:g-r+2<=A&&A<=g?c[A+r-1]-c[A]===0?T=0:T=(s-c[A])/(c[A+r-1]-c[A]):T=0,T===0?P[A]=h[A-1]:T===1?P[A]=h[A]:P[A]={x:(1-T)*h[A-1].x+T*h[A].x,y:(1-T)*h[A-1].y+T*h[A].y};return{controlPoints:P,knots:x}};e.default=t})(p6);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.multiplicity=e.default=e.computeInsertions=e.checkPinned=void 0;var t=n(p6);function n(c){return c&&c.__esModule?c:{default:c}}var r=function(h,p){for(var g=1;g<h;++g)if(p[g]!==p[0])throw Error("not pinned. order: ".concat(h," knots: ").concat(p));for(var _=p.length-2;_>p.length-h-1;--_)if(p[_]!==p[p.length-1])throw Error("not pinned. order: ".concat(h," knots: ").concat(p))};e.checkPinned=r;var i=function(h,p){for(var g=1,_=p+1;_<h.length&&h[_]===h[p];++_)++g;return g};e.multiplicity=i;var l=function(h,p){for(var g=[],_=h;_<p.length-h;){for(var b=p[_],x=i(p,_),k=0;k<h-x-1;++k)g.push(b);_=_+x}return g};e.computeInsertions=l;var s=function(h,p,g){r(h,g);var _=l(h,g);return _.reduce(function(b,x){return(0,t.default)(h,b.controlPoints,b.knots,x)},{controlPoints:p,knots:g})};e.default=s})(h6);var g6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=hd;function n(p,g){return c(p)||s(p,g)||i(p,g)||r()}function r(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i(p,g){if(p){if(typeof p=="string")return l(p,g);var _=Object.prototype.toString.call(p).slice(8,-1);if(_==="Object"&&p.constructor&&(_=p.constructor.name),_==="Map"||_==="Set")return Array.from(p);if(_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return l(p,g)}}function l(p,g){(g==null||g>p.length)&&(g=p.length);for(var _=0,b=new Array(g);_<g;_++)b[_]=p[_];return b}function s(p,g){var _=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(_!=null){var b,x,k,T,P=[],A=!0,L=!1;try{if(k=(_=_.call(p)).next,g===0){if(Object(_)!==_)return;A=!1}else for(;!(A=(b=k.call(_)).done)&&(P.push(b.value),P.length!==g);A=!0);}catch(F){L=!0,x=F}finally{try{if(!A&&_.return!=null&&(T=_.return(),Object(T)!==T))return}finally{if(L)throw x}}return P}}function c(p){if(Array.isArray(p))return p}var h=function(g,_,b){var x="",k=b.map(function(A){var L=A.x||0,F=A.y||0,N=A.scaleX||1,W=A.scaleY||1,te=(A.rotation||0)/180*Math.PI,G=Math.cos,K=Math.sin,re,H,J,ie,oe,le;return A.extrusionZ===-1?(re=-N*G(te),H=N*K(te),J=W*K(te),ie=W*G(te),oe=-L,le=F):(re=N*G(te),H=N*K(te),J=-W*K(te),ie=W*G(te),oe=L,le=F),[re,H,J,ie,oe,le]}),T=new t.Box2;if(g.valid){var P=[{x:g.min.x,y:g.min.y},{x:g.max.x,y:g.min.y},{x:g.max.x,y:g.max.y},{x:g.min.x,y:g.max.y}];k.forEach(function(A){var L=n(A,6),F=L[0],N=L[1],W=L[2],te=L[3],G=L[4],K=L[5];P=P.map(function(re){return{x:re.x*F+re.y*W+G,y:re.x*N+re.y*te+K}})}),T=P.reduce(function(A,L){return A.expandByPoint(L)},new t.Box2)}return k.reverse(),k.forEach(function(A){var L=n(A,6),F=L[0],N=L[1],W=L[2],te=L[3],G=L[4],K=L[5];x+='<g transform="matrix('.concat(F," ").concat(N," ").concat(W," ").concat(te," ").concat(G," ").concat(K,')">')}),x+=_,k.forEach(function(A){x+="</g>"}),{bbox:T,element:x}};e.default=h})(g6);(function(e){function t($){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},t($)}Object.defineProperty(e,"__esModule",{value:!0}),e.piecewiseToPaths=e.default=void 0;var n=hd,r=x(V_),i=x(cd),l=x(c6),s=x(ci),c=x(f6),h=x(d6),p=b(h6),g=x(g6);function _($){if(typeof WeakMap!="function")return null;var Y=new WeakMap,z=new WeakMap;return(_=function(ue){return ue?z:Y})($)}function b($,Y){if(!Y&&$&&$.__esModule)return $;if($===null||t($)!=="object"&&typeof $!="function")return{default:$};var z=_(Y);if(z&&z.has($))return z.get($);var V={},ue=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var xe in $)if(xe!=="default"&&Object.prototype.hasOwnProperty.call($,xe)){var ce=ue?Object.getOwnPropertyDescriptor($,xe):null;ce&&(ce.get||ce.set)?Object.defineProperty(V,xe,ce):V[xe]=$[xe]}return V.default=$,z&&z.set($,V),V}function x($){return $&&$.__esModule?$:{default:$}}function k($,Y){return F($)||L($,Y)||P($,Y)||T()}function T(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P($,Y){if($){if(typeof $=="string")return A($,Y);var z=Object.prototype.toString.call($).slice(8,-1);if(z==="Object"&&$.constructor&&(z=$.constructor.name),z==="Map"||z==="Set")return Array.from($);if(z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z))return A($,Y)}}function A($,Y){(Y==null||Y>$.length)&&(Y=$.length);for(var z=0,V=new Array(Y);z<Y;z++)V[z]=$[z];return V}function L($,Y){var z=$==null?null:typeof Symbol<"u"&&$[Symbol.iterator]||$["@@iterator"];if(z!=null){var V,ue,xe,ce,Ae=[],De=!0,ae=!1;try{if(xe=(z=z.call($)).next,Y===0){if(Object(z)!==z)return;De=!1}else for(;!(De=(V=xe.call(z)).done)&&(Ae.push(V.value),Ae.length!==Y);De=!0);}catch(we){ae=!0,ue=we}finally{try{if(!De&&z.return!=null&&(ce=z.return(),Object(ce)!==ce))return}finally{if(ae)throw ue}}return Ae}}function F($){if(Array.isArray($))return $}var N=function(Y,z){var V=z.bbox,ue=z.element;return Y.extrusionZ===-1?{bbox:new n.Box2().expandByPoint({x:-V.min.x,y:V.min.y}).expandByPoint({x:-V.max.x,y:V.max.y}),element:`<g transform="matrix(-1 0 0 1 0 0)">
        `.concat(ue,`
      </g>`)}:{bbox:V,element:ue}},W=function(Y){var z=(0,r.default)(Y),V=z.reduce(function(xe,ce){var Ae=k(ce,2),De=Ae[0],ae=Ae[1];return xe.expandByPoint({x:De,y:ae})},new n.Box2),ue=z.reduce(function(xe,ce,Ae){return xe+=Ae===0?"M":"L",xe+=ce[0]+","+ce[1],xe},"");return(0,g.default)(V,'<path d="'.concat(ue,'" />'),Y.transforms)},te=function(Y){var z=new n.Box2().expandByPoint({x:Y.x+Y.r,y:Y.y+Y.r}).expandByPoint({x:Y.x-Y.r,y:Y.y-Y.r}),V='<circle cx="'.concat(Y.x,'" cy="').concat(Y.y,'" r="').concat(Y.r,'" />'),ue=N(Y,{bbox:z,element:V}),xe=ue.bbox,ce=ue.element;return(0,g.default)(xe,ce,Y.transforms)},G=function(Y,z,V,ue,xe,ce,Ae,De){var ae=Math.sqrt(V*V+ue*ue),we=xe*ae,Q=-Math.atan2(-ue,V),Re=K(Y,z,V,ue,xe,ce,Ae);if(Math.abs(ce-Ae)<1e-9||Math.abs(ce-Ae+Math.PI*2)<1e-9){var Me='<g transform="rotate('.concat(Q/Math.PI*180," ").concat(Y,", ").concat(z,`)">
      <ellipse cx="`).concat(Y,'" cy="').concat(z,'" rx="').concat(ae,'" ry="').concat(we,`" />
    </g>`);return{bbox:Re,element:Me}}else{var Ke=(0,c.default)({x:Math.cos(ce)*ae,y:Math.sin(ce)*we},Q),it={x:Y+Ke.x,y:z+Ke.y},ht=(0,c.default)({x:Math.cos(Ae)*ae,y:Math.sin(Ae)*we},Q),un={x:Y+ht.x,y:z+ht.y},jr=Ae<ce?Ae+Math.PI*2:Ae,xt=jr-ce<Math.PI?0:1,vr="M ".concat(it.x," ").concat(it.y," A ").concat(ae," ").concat(we," ").concat(Q/Math.PI*180," ").concat(xt," 1 ").concat(un.x," ").concat(un.y),Go='<path d="'.concat(vr,'" />');return{bbox:Re,element:Go}}},K=function(Y,z,V,ue,xe,ce,Ae,De){for(;ce<0;)ce+=Math.PI*2;for(;Ae<=ce;)Ae+=Math.PI*2;var ae=[];if(Math.abs(V)<1e-12||Math.abs(ue)<1e-12)for(var we=0;we<4;we++)ae.push(we/2*Math.PI);else ae[0]=Math.atan(-ue*xe/V)-Math.PI,ae[1]=Math.atan(V*xe/ue)-Math.PI,ae[2]=ae[0]-Math.PI,ae[3]=ae[1]-Math.PI;for(var Q=4;Q>=0;Q--){for(;ae[Q]<ce;)ae[Q]+=Math.PI*2;ae[Q]>Ae&&ae.splice(Q,1)}ae.push(ce),ae.push(Ae);var Re=ae.map(function(ht){return{x:Math.cos(ht),y:Math.sin(ht)}}),Me=[[V,-ue*xe],[ue,V*xe]],Ke=Re.map(function(ht){return{x:ht.x*Me[0][0]+ht.y*Me[0][1]+Y,y:ht.x*Me[1][0]+ht.y*Me[1][1]+z}}),it=Ke.reduce(function(ht,un){return ht.expandByPoint(un),ht},new n.Box2);return it},re=function(Y){var z=G(Y.x,Y.y,Y.majorX,Y.majorY,Y.axisRatio,Y.startAngle,Y.endAngle),V=z.bbox,ue=z.element,xe=N(Y,{bbox:V,element:ue}),ce=xe.bbox,Ae=xe.element;return(0,g.default)(ce,Ae,Y.transforms)},H=function(Y){var z=G(Y.x,Y.y,Y.r,0,1,Y.startAngle,Y.endAngle,Y.extrusionZ===-1),V=z.bbox,ue=z.element,xe=N(Y,{bbox:V,element:ue}),ce=xe.bbox,Ae=xe.element;return(0,g.default)(ce,Ae,Y.transforms)},J=function(Y,z,V){for(var ue=[],xe=0,ce=Y,Ae=[];ce<z.length-Y+1;){var De=(0,p.multiplicity)(z,ce),ae=V.slice(xe,xe+Y);Ae.length||Ae.push("M ".concat(ae[0].x," ").concat(ae[0].y)),Y===4?Ae.push("C ".concat(ae[1].x," ").concat(ae[1].y," ").concat(ae[2].x," ").concat(ae[2].y," ").concat(ae[3].x," ").concat(ae[3].y)):Y===3&&Ae.push("Q ".concat(ae[1].x," ").concat(ae[1].y," ").concat(ae[2].x," ").concat(ae[2].y)),xe+=De,ce+=De}var we=Ae.join(" ");return ue.push('<path d="'.concat(we,'" />')),ue};e.piecewiseToPaths=J;var ie=function(Y){var z=new n.Box2;Y.controlPoints.forEach(function(Ae){z=z.expandByPoint(Ae)});var V=Y.degree+1,ue=(0,p.default)(V,Y.controlPoints,Y.knots),xe=J(V,ue.knots,ue.controlPoints),ce="<g>".concat(xe.join(""),"</g>");return(0,g.default)(z,ce,Y.transforms)},oe=function(Y){switch(Y.type){case"CIRCLE":return te(Y);case"ELLIPSE":return re(Y);case"ARC":return H(Y);case"SPLINE":{var z=Y.weights&&Y.weights.some(function(V){return V!==1});if((Y.degree===2||Y.degree===3)&&!z)try{return ie(Y)}catch{return W(Y)}else return W(Y)}case"LINE":case"LWPOLYLINE":case"POLYLINE":return W(Y);default:return s.default.warn("entity type not supported in SVG rendering:",Y.type),null}},le=function(Y){var z=(0,i.default)(Y),V=z.reduce(function(Ae,De,ae){var we=(0,l.default)(Y.tables.layers,De),Q=oe(De);if(Q){var Re=Q.bbox,Me=Q.element;Re.valid&&(Ae.bbox.expandByPoint(Re.min),Ae.bbox.expandByPoint(Re.max)),Ae.elements.push('<g stroke="'.concat((0,h.default)(we),'">').concat(Me,"</g>"))}return Ae},{bbox:new n.Box2,elements:[]}),ue=V.bbox,xe=V.elements,ce=ue.valid?{x:ue.min.x,y:-ue.max.y,width:ue.max.x-ue.min.x,height:ue.max.y-ue.min.y}:{x:0,y:0,width:0,height:0};return`<?xml version="1.0"?>
<svg
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
  preserveAspectRatio="xMinYMin meet"
  viewBox="`.concat(ce.x," ").concat(ce.y," ").concat(ce.width," ").concat(ce.height,`"
  width="100%" height="100%"
>
  <g stroke="#000000" stroke-width="0.1%" fill="none" transform="matrix(1,0,0,-1,0,0)">
    `).concat(xe.join(`
`),`
  </g>
</svg>`)};e.default=le})(H_);var m6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=c(ci),n=c(E_),r=c(cd),i=c(H_),l=c(U_),s=c(B_);function c(T){return T&&T.__esModule?T:{default:T}}function h(T){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},h(T)}function p(T,P){if(!(T instanceof P))throw new TypeError("Cannot call a class as a function")}function g(T,P){for(var A=0;A<P.length;A++){var L=P[A];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(T,b(L.key),L)}}function _(T,P,A){return P&&g(T.prototype,P),A&&g(T,A),Object.defineProperty(T,"prototype",{writable:!1}),T}function b(T){var P=x(T,"string");return h(P)==="symbol"?P:String(P)}function x(T,P){if(h(T)!=="object"||T===null)return T;var A=T[Symbol.toPrimitive];if(A!==void 0){var L=A.call(T,P||"default");if(h(L)!=="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(T)}var k=function(){function T(P){if(p(this,T),typeof P!="string")throw Error("Helper constructor expects a DXF string");this._contents=P,this._parsed=null,this._denormalised=null}return _(T,[{key:"parse",value:function(){return this._parsed=(0,n.default)(this._contents),t.default.info("parsed:",this.parsed),this._parsed}},{key:"parsed",get:function(){return this._parsed===null&&this.parse(),this._parsed}},{key:"denormalise",value:function(){return this._denormalised=(0,r.default)(this.parsed),t.default.info("denormalised:",this._denormalised),this._denormalised}},{key:"denormalised",get:function(){return this._denormalised||this.denormalise(),this._denormalised}},{key:"group",value:function(){this._groups=(0,s.default)(this.denormalised)}},{key:"groups",get:function(){return this._groups||this.group(),this._groups}},{key:"toSVG",value:function(){return(0,i.default)(this.parsed)}},{key:"toPolylines",value:function(){return(0,l.default)(this.parsed)}}]),T}();e.default=k})(m6);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Helper",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"colors",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"config",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"denormalise",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"groupEntitiesByLayer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"parseString",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"toPolylines",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"toSVG",{enumerable:!0,get:function(){return s.default}});var t=p(x_),n=p(E_),r=p(cd),i=p(B_),l=p(U_),s=p(H_),c=p(tg),h=p(m6);function p(g){return g&&g.__esModule?g:{default:g}}})(d3);var T1=(e=>(e.OLD="old",e.NEW="new",e))(T1||{});const e$=function(e){if(typeof exports=="object"&&typeof module<"u")module.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t=this,t.DxfParser=e()}return e()}(function(){return function e(t,n,r){function i(c,h){if(!n[c]){if(!t[c]){var p=typeof require=="function"&&require;if(!h&&p)return p(c,!0);if(l)return l(c,!0);var g=new Error("Cannot find module '"+c+"'");throw g.code="MODULE_NOT_FOUND",g}var _=n[c]={exports:{}};t[c][0].call(_.exports,function(b){var x=t[c][1][b];return i(x||b)},_,_.exports,e,t,n,r)}return n[c].exports}for(var l=typeof require=="function"&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){t.exports=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215]},{}],2:[function(e,t,n){function r(s){this._pointer=0,this._data=s,this._eof=!1}r.prototype.next=function(){var s;if(!this.hasNext())throw this._eof?new Error("Cannot call 'next' after EOF group has been read"):new Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);return s={code:parseInt(this._data[this._pointer])},this._pointer++,s.value=i(s.code,this._data[this._pointer].trim()),this._pointer++,s.code===0&&s.value==="EOF"&&(this._eof=!0),this.lastReadGroup=s,s},r.prototype.peek=function(){if(!this.hasNext())throw this._eof?new Error("Cannot call 'next' after EOF group has been read"):new Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);var s={code:parseInt(this._data[this._pointer])};return s.value=i(s.code,this._data[this._pointer+1].trim()),s},r.prototype.rewind=function(s){s=s||1,this._pointer=this._pointer-s*2},r.prototype.hasNext=function(){return!(this._eof||this._pointer>this._data.length-2)},r.prototype.isEOF=function(){return this._eof};function i(s,c){return s<=9?c:s>=10&&s<=59?parseFloat(c):s>=60&&s<=99?parseInt(c):s>=100&&s<=109?c:s>=110&&s<=149?parseFloat(c):s>=160&&s<=179?parseInt(c):s>=210&&s<=239?parseFloat(c):s>=270&&s<=289?parseInt(c):s>=290&&s<=299?l(c):s>=300&&s<=369?c:s>=370&&s<=389?parseInt(c):s>=390&&s<=399?c:s>=400&&s<=409?parseInt(c):s>=410&&s<=419?c:s>=420&&s<=429?parseInt(c):s>=430&&s<=439?c:s>=440&&s<=459?parseInt(c):s>=460&&s<=469?parseFloat(c):s>=470&&s<=481||s===999||s>=1e3&&s<=1009?c:s>=1010&&s<=1059?parseFloat(c):s>=1060&&s<=1071?parseInt(c):(console.log("WARNING: Group code does not have a defined type: %j",{code:s,value:c}),c)}function l(s){return s==="0"?!1:s==="1"}t.exports=r},{}],3:[function(e,t,n){var r=e("./DxfArrayScanner.js"),i=e("./AutoCadColorIndex"),l={setLevel:()=>{},debug:()=>{},warn:_=>{console.warn(_)},trace:()=>{},info:()=>{}};l.setLevel("error");function s(_){_.registerEntityHandler(e("./entities/3dface")),_.registerEntityHandler(e("./entities/arc")),_.registerEntityHandler(e("./entities/attdef")),_.registerEntityHandler(e("./entities/circle")),_.registerEntityHandler(e("./entities/dimension")),_.registerEntityHandler(e("./entities/ellipse")),_.registerEntityHandler(e("./entities/insert")),_.registerEntityHandler(e("./entities/line")),_.registerEntityHandler(e("./entities/lwpolyline")),_.registerEntityHandler(e("./entities/mtext")),_.registerEntityHandler(e("./entities/point")),_.registerEntityHandler(e("./entities/polyline")),_.registerEntityHandler(e("./entities/solid")),_.registerEntityHandler(e("./entities/spline")),_.registerEntityHandler(e("./entities/hatch")),_.registerEntityHandler(e("./entities/text"))}function c(){this._entityHandlers={},s(this)}c.prototype.parse=function(_,b){throw new Error("read() not implemented. Use readSync()")},c.prototype.registerEntityHandler=function(_){var b=new _;this._entityHandlers[_.ForEntityName]=b},c.prototype.parseSync=function(_){return typeof _=="string"?this._parse(_):(console.error("Cannot read dxf source of type `"+typeof _),null)},c.prototype.parseStream=function(_,b){var x="",k=this;_.on("data",T),_.on("end",P),_.on("error",A);function T(L){x+=L}function P(){try{var L=k._parse(x)}catch(F){return b(F)}b(null,L)}function A(L){b(L)}},c.prototype._parse=function(_){var b,x,k={},T=0,P=_.split(/\r\n|\r|\n/g);if(b=new r(P),!b.hasNext())throw Error("Empty file");var A=this,L=function(){for(x=b.next();!b.isEOF();)if(x.code===0&&x.value==="SECTION"){if(x=b.next(),x.code!==2){console.error("Unexpected code %s after 0:SECTION",p(x)),x=b.next();continue}x.value==="HEADER"?(l.debug("> HEADER"),k.header=N(),l.debug("<")):x.value==="BLOCKS"?(l.debug("> BLOCKS"),k.blocks=W(),l.debug("<")):x.value==="ENTITIES"?(l.debug("> ENTITIES"),k.entities=le(!1),l.debug("<")):x.value==="TABLES"?(l.debug("> TABLES"),k.tables=G(),l.debug("<")):x.value==="EOF"?l.debug("EOF"):l.warn("Skipping section '"+x.value+"'")}else x=b.next()},F=function(z,V){return x.code===z&&x.value===V},N=function(){var z=null,V=null,ue={};for(x=b.next();;){if(F(0,"ENDSEC")){z&&(ue[z]=V);break}else x.code===9?(z&&(ue[z]=V),z=x.value):x.code===10?V={x:x.value}:x.code===20?V&&(V.y=x.value):x.code===30?V&&(V.z=x.value):V=x.value;x=b.next()}return x=b.next(),ue},W=function(){var z={},V;for(x=b.next();x.value!=="EOF"&&!F(0,"ENDSEC");)F(0,"BLOCK")?(l.debug("block {"),V=te(),l.debug("}"),Y(V),V.name?z[V.name]=V:l.error('block with handle "'+V.handle+'" is missing a name.')):(h(x),x=b.next());return z},te=function(){var z={};for(x=b.next();x.value!=="EOF";){switch(x.code){case 1:z.xrefPath=x.value,x=b.next();break;case 2:z.name=x.value,x=b.next();break;case 3:z.name2=x.value,x=b.next();break;case 5:z.handle=x.value,x=b.next();break;case 8:z.layer=x.value,x=b.next();break;case 10:z.position=$(),x=b.next();break;case 67:z.paperSpace=!!(x.value&&x.value==1),x=b.next();break;case 70:x.value!=0&&(z.type=x.value),x=b.next();break;case 100:x=b.next();break;case 330:z.ownerHandle=x.value,x=b.next();break;case 0:if(x.value=="ENDBLK")break;z.entities=le(!0);break;default:h(x),x=b.next()}if(F(0,"ENDBLK")){x=b.next();break}}return z},G=function(){var z={};for(x=b.next();x.value!=="EOF"&&!F(0,"ENDSEC");)if(F(0,"TABLE")){x=b.next();var V=oe[x.value];V?(l.debug(x.value+" Table {"),z[oe[x.value].tableName]=re(),l.debug("}")):l.debug("Unhandled Table "+x.value)}else x=b.next();return x=b.next(),z};const K="ENDTAB";var re=function(){var z=oe[x.value],V={},ue=0,xe;for(x=b.next();!F(0,K);)switch(x.code){case 5:V.handle=x.value,x=b.next();break;case 330:V.ownerHandle=x.value,x=b.next();break;case 100:x.value==="AcDbSymbolTable"||h(x),x=b.next();break;case 70:ue=x.value,x=b.next();break;case 0:x.value===z.dxfSymbolName?V[z.tableRecordsProperty]=z.parseTableRecords():(h(x),x=b.next());break;default:h(x),x=b.next()}var ce=V[z.tableRecordsProperty];return ce&&(ce.constructor===Array?xe=ce.length:typeof ce=="object"&&(xe=Object.keys(ce).length),ue!==xe&&l.warn("Parsed "+xe+" "+z.dxfSymbolName+"'s but expected "+ue)),x=b.next(),V},H=function(){var z=[],V={};for(l.debug("ViewPort {"),x=b.next();!F(0,K);)switch(x.code){case 2:V.name=x.value,x=b.next();break;case 10:V.lowerLeftCorner=$(),x=b.next();break;case 11:V.upperRightCorner=$(),x=b.next();break;case 12:V.center=$(),x=b.next();break;case 13:V.snapBasePoint=$(),x=b.next();break;case 14:V.snapSpacing=$(),x=b.next();break;case 15:V.gridSpacing=$(),x=b.next();break;case 16:V.viewDirectionFromTarget=$(),x=b.next();break;case 17:V.viewTarget=$(),x=b.next();break;case 42:V.lensLength=x.value,x=b.next();break;case 43:V.frontClippingPlane=x.value,x=b.next();break;case 44:V.backClippingPlane=x.value,x=b.next();break;case 45:V.viewHeight=x.value,x=b.next();break;case 50:V.snapRotationAngle=x.value,x=b.next();break;case 51:V.viewTwistAngle=x.value,x=b.next();break;case 79:V.orthographicType=x.value,x=b.next();break;case 110:V.ucsOrigin=$(),x=b.next();break;case 111:V.ucsXAxis=$(),x=b.next();break;case 112:V.ucsYAxis=$(),x=b.next();break;case 281:V.renderMode=x.value,x=b.next();break;case 292:V.defaultLightingOn=x.value,x=b.next();break;case 330:V.ownerHandle=x.value,x=b.next();break;case 63:case 421:case 431:V.ambientColor=x.value,x=b.next();break;case 0:x.value==="VPORT"&&(l.debug("}"),z.push(V),l.debug("ViewPort {"),V={},x=b.next());break;default:h(x),x=b.next();break}return l.debug("}"),z.push(V),z},J=function(){var z={},V,ue={},xe;for(l.debug("LType {"),x=b.next();!F(0,"ENDTAB");)switch(x.code){case 2:ue.name=x.value,V=x.value,x=b.next();break;case 3:ue.description=x.value,x=b.next();break;case 73:xe=x.value,xe>0&&(ue.pattern=[]),x=b.next();break;case 40:ue.patternLength=x.value,x=b.next();break;case 49:ue.pattern.push(x.value),x=b.next();break;case 0:l.debug("}"),xe>0&&xe!==ue.pattern.length&&l.warn("lengths do not match on LTYPE pattern"),z[V]=ue,ue={},l.debug("LType {"),x=b.next();break;default:x=b.next()}return l.debug("}"),z[V]=ue,z},ie=function(){var z={},V,ue={};for(l.debug("Layer {"),x=b.next();!F(0,"ENDTAB");)switch(x.code){case 2:ue.name=x.value,V=x.value,x=b.next();break;case 62:ue.visible=x.value>=0,ue.color=g(Math.abs(x.value)),x=b.next();break;case 70:ue.frozen=(x.value&1)!=0||(x.value&2)!=0,x=b.next();break;case 0:x.value==="LAYER"&&(l.debug("}"),z[V]=ue,l.debug("Layer {"),ue={},V=void 0,x=b.next());break;default:h(x),x=b.next();break}return l.debug("}"),z[V]=ue,z},oe={VPORT:{tableRecordsProperty:"viewPorts",tableName:"viewPort",dxfSymbolName:"VPORT",parseTableRecords:H},LTYPE:{tableRecordsProperty:"lineTypes",tableName:"lineType",dxfSymbolName:"LTYPE",parseTableRecords:J},LAYER:{tableRecordsProperty:"layers",tableName:"layer",dxfSymbolName:"LAYER",parseTableRecords:ie}},le=function(z){var V=[],ue=z?"ENDBLK":"ENDSEC";for(z||(x=b.next());;)if(x.code===0){if(x.value===ue)break;var xe,ce=A._entityHandlers[x.value];if(ce!=null)l.debug(x.value+" {"),xe=ce.parseEntity(b,x),x=b.lastReadGroup,l.debug("}");else{l.warn("Unhandled entity "+x.value),x=b.next();continue}Y(xe),V.push(xe)}else x=b.next();return ue=="ENDSEC"&&(x=b.next()),V},$=function(){var z={},V=x.code;if(z.x=x.value,V+=10,x=b.next(),x.code!=V)throw new Error("Expected code for point value to be "+V+" but got "+x.code+".");return z.y=x.value,V+=10,x=b.next(),x.code!=V?(b.rewind(),z):(z.z=x.value,z)},Y=function(z){if(!z)throw new TypeError("entity cannot be undefined or null");z.handle||(z.handle=T++)};return L(),k};function h(_){l.debug("unhandled group "+p(_))}function p(_){return _.code+":"+_.value}function g(_){return i[_]}t.exports=c},{"./AutoCadColorIndex":1,"./DxfArrayScanner.js":2,"./entities/3dface":5,"./entities/arc":6,"./entities/attdef":7,"./entities/circle":8,"./entities/dimension":9,"./entities/ellipse":10,"./entities/insert":11,"./entities/line":12,"./entities/lwpolyline":13,"./entities/mtext":14,"./entities/point":15,"./entities/polyline":16,"./entities/solid":17,"./entities/spline":18,"./entities/text":19,"./entities/hatch":118,loglevel:21}],4:[function(e,t,n){var r=e("./AutoCadColorIndex");n.getAcadColor=function(l){return r[l]};var i=n.getAcadColor;n.parsePoint=function(l){var s={};l.rewind();var c=l.next(),h=c.code;s.x=c.value,h+=10,c=l.next();var p=!1;if(c.code!=h){if(p=!0,c=l.next(),c.code!=h)throw new Error("Expected code for point value to be "+h+" but got "+c.code+".");s.y=c.value}else s.y=c.value;return p&&(l.rewind(),l.rewind()),s},n.checkCommonEntityProperties=function(l,s){switch(s.code){case 0:l.type=s.value;break;case 5:l.handle=s.value;break;case 6:l.lineType=s.value;break;case 8:l.layer=s.value;break;case 48:l.lineTypeScale=s.value;break;case 60:l.visible=s.value===0;break;case 62:l.colorIndex=s.value,l.color=i(Math.abs(s.value));break;case 67:l.inPaperSpace=s.value!==0;break;case 100:break;case 330:l.ownerHandle=s.value;break;case 347:l.materialObjectHandle=s.value;break;case 370:l.lineweight=s.value;break;case 420:l.color=s.value;break;case 1e3:l.extendedData=l.extendedData||{},l.extendedData.customStrings=l.extendedData.customStrings||[],l.extendedData.customStrings.push(s.value);break;case 1001:l.extendedData=l.extendedData||{},l.extendedData.applicationName=s.value;break;default:return!1}return!0}},{"./AutoCadColorIndex":1}],5:[function(e,t,n){e("../ParseHelpers"),t.exports=r;function r(){}r.ForEntityName="3DFACE",r.prototype.parseEntity=function(l,s){var c={type:s.value,vertices:[]};for(s=l.next();s!=="EOF"&&s.code!==0;){switch(s.code){case 70:c.shape=(s.value&1)===1,c.hasContinuousLinetypePattern=(s.value&128)===128;break;case 10:c.vertices=i(l,s),s=l.lastReadGroup;break;default:checkCommonEntityProperties(c);break}s=l.next()}return c};function i(l,s){var c=[],h,p=!1,g=!1,_=4;for(h=0;h<=_;h++){for(var b={};s!=="EOF"&&!(s.code===0||g);){switch(s.code){case 10:case 11:case 12:case 13:if(p){g=!0;continue}b.x=s.value,p=!0;break;case 20:case 21:case 22:case 23:b.y=s.value;break;case 30:case 31:case 32:case 33:b.z=s.value;break;default:return c}s=l.next()}c.push(b),p=!1,g=!1}return l.rewind(),c}},{"../ParseHelpers":4}],6:[function(e,t,n){var r=e("../ParseHelpers");t.exports=i;function i(){}i.ForEntityName="ARC",i.prototype.parseEntity=function(l,s){var c;for(c={type:s.value},s=l.next();s!=="EOF"&&s.code!==0;){switch(s.code){case 10:c.center=r.parsePoint(l);break;case 39:c.thickness=s.value;case 40:c.radius=s.value;break;case 50:c.startAngle=Math.PI/180*s.value;break;case 51:c.endAngle=Math.PI/180*s.value,c.angleLength=c.endAngle-c.startAngle;break;case 210:c.extrusionDirectionX=s.value;break;case 220:c.extrusionDirectionY=s.value;break;case 230:c.extrusionDirectionZ=s.value;break;default:r.checkCommonEntityProperties(c,s);break}s=l.next()}return c}},{"../ParseHelpers":4}],7:[function(e,t,n){var r=e("../ParseHelpers");t.exports=i;function i(){}i.ForEntityName="ATTDEF",i.prototype.parseEntity=function(l,s){var c={type:s.value,scale:1,textStyle:"STANDARD"};for(s=l.next();s!=="EOF"&&s.code!==0;){switch(s.code){case 1:c.text=s.value;break;case 2:c.tag=s.value;break;case 3:c.prompt=s.value;break;case 7:c.textStyle=s.value;break;case 10:c.startPoint=r.parsePoint(l);break;case 11:c.endPoint=r.parsePoint(l);break;case 39:c.thickness=s.value;break;case 40:c.textHeight=s.value;break;case 41:c.scale=s.value;break;case 50:c.rotation=s.value;break;case 51:c.obliqueAngle=s.value;break;case 70:c.invisible=!!(s.value&1),c.constant=!!(s.value&2),c.verificationRequired=!!(s.value&4),c.preset=!!(s.value&8);break;case 71:c.backwards=!!(s.value&2),c.mirrored=!!(s.value&4);break;case 72:c.horizontalJustification=s.value;break;case 73:c.fieldLength=s.value;break;case 74:c.verticalJustification=s.value;break;case 100:break;case 210:c.extrusionDirectionX=s.value;break;case 220:c.extrusionDirectionY=s.value;break;case 230:c.extrusionDirectionZ=s.value;break;default:r.checkCommonEntityProperties(c,s);break}s=l.next()}return c}},{"../ParseHelpers":4}],8:[function(e,t,n){var r=e("../ParseHelpers");t.exports=i;function i(){}i.ForEntityName="CIRCLE",i.prototype.parseEntity=function(l,s){var c,h;for(c={type:s.value},s=l.next();s!=="EOF"&&s.code!==0;){switch(s.code){case 10:c.center=r.parsePoint(l);break;case 40:c.radius=s.value;break;case 50:c.startAngle=Math.PI/180*s.value;break;case 51:h=Math.PI/180*s.value,h<c.startAngle?c.angleLength=h+2*Math.PI-c.startAngle:c.angleLength=h-c.startAngle,c.endAngle=h;break;case 210:c.directionX=s.value;break;case 220:c.directionY=s.value;break;case 230:c.directionZ=s.value;break;default:r.checkCommonEntityProperties(c,s);break}s=l.next()}return c}},{"../ParseHelpers":4}],9:[function(e,t,n){var r=e("../ParseHelpers");t.exports=i;function i(){}i.ForEntityName="DIMENSION",i.prototype.parseEntity=function(l,s){var c;for(c={type:s.value},s=l.next();s!=="EOF"&&s.code!==0;){switch(s.code){case 2:c.block=s.value;break;case 10:c.anchorPoint=r.parsePoint(l);break;case 11:c.middleOfText=r.parsePoint(l);break;case 71:c.attachmentPoint=s.value;break;case 42:c.actualMeasurement=s.value;break;case 1:c.text=s.value;break;case 50:c.angle=s.value;break;default:r.checkCommonEntityProperties(c,s);break}s=l.next()}return c}},{"../ParseHelpers":4}],10:[function(e,t,n){var r=e("../ParseHelpers");t.exports=i;function i(){}i.ForEntityName="ELLIPSE",i.prototype.parseEntity=function(l,s){var c;for(c={type:s.value},s=l.next();s!=="EOF"&&s.code!==0;){switch(s.code){case 10:c.center=r.parsePoint(l);break;case 11:c.majorAxisEndPoint=r.parsePoint(l);break;case 40:c.axisRatio=s.value;break;case 41:c.startAngle=s.value;break;case 42:c.endAngle=s.value;break;case 2:c.name=s.value;break;case 210:c.extrusionDirectionX=s.value;break;case 220:c.extrusionDirectionY=s.value;break;case 230:c.extrusionDirectionZ=s.value;break;default:r.checkCommonEntityProperties(c,s);break}s=l.next()}return c}},{"../ParseHelpers":4}],11:[function(e,t,n){var r=e("../ParseHelpers");t.exports=i;function i(){}i.ForEntityName="INSERT",i.prototype.parseEntity=function(l,s){var c;for(c={type:s.value},s=l.next();s!=="EOF"&&s.code!==0;){switch(s.code){case 2:c.name=s.value;break;case 41:c.xScale=s.value;break;case 42:c.yScale=s.value;break;case 43:c.zScale=s.value;break;case 10:c.position=r.parsePoint(l);break;case 50:c.rotation=s.value;break;case 70:c.columnCount=s.value;break;case 71:c.rowCount=s.value;break;case 44:c.columnSpacing=s.value;break;case 45:c.rowSpacing=s.value;break;case 210:c.extrusionDirection=r.parsePoint(l);break;default:r.checkCommonEntityProperties(c,s);break}s=l.next()}return c}},{"../ParseHelpers":4}],12:[function(e,t,n){var r=e("../ParseHelpers");t.exports=i;function i(){}i.ForEntityName="LINE",i.prototype.parseEntity=function(l,s){var c={type:s.value,vertices:[]};for(s=l.next();s!=="EOF"&&s.code!==0;){switch(s.code){case 10:c.vertices.unshift(r.parsePoint(l));break;case 11:c.vertices.push(r.parsePoint(l));break;case 210:c.extrusionDirection=r.parsePoint(l);break;case 100:break;default:r.checkCommonEntityProperties(c,s);break}s=l.next()}return c}},{"../ParseHelpers":4}],13:[function(e,t,n){var r=e("../ParseHelpers");t.exports=i;function i(){}i.ForEntityName="LWPOLYLINE",i.prototype.parseEntity=function(s,c){var h={type:c.value,vertices:[],flags:0},p=0;for(c=s.next();c!=="EOF"&&c.code!==0;){switch(c.code){case 38:h.elevation=c.value;break;case 39:h.depth=c.value;break;case 70:h.flags=c.value,h.shape=(c.value&1)===1,h.hasContinuousLinetypePattern=(c.value&128)===128;break;case 90:p=c.value;break;case 10:h.vertices=l(p,s);break;case 43:c.value!==0&&(h.width=c.value);break;case 210:h.extrusionDirectionX=c.value;break;case 220:h.extrusionDirectionY=c.value;break;case 230:h.extrusionDirectionZ=c.value;break;default:r.checkCommonEntityProperties(h,c);break}c=s.next()}return h};function l(s,c){if(!s||s<=0)throw Error("n must be greater than 0 verticies");var h=[],p,g=!1,_=!1,b=c.lastReadGroup;for(p=0;p<s;p++){for(var x={};b!=="EOF"&&!(b.code===0||_);){switch(b.code){case 10:if(g){_=!0;continue}x.x=b.value,g=!0;break;case 20:x.y=b.value;break;case 30:x.z=b.value;break;case 40:x.startWidth=b.value;break;case 41:x.endWidth=b.value;break;case 42:b.value!=0&&(x.bulge=b.value);break;default:return g&&h.push(x),h}b=c.next()}h.push(x),g=!1,_=!1}return c.rewind(),h}},{"../ParseHelpers":4}],14:[function(e,t,n){var r=e("../ParseHelpers");t.exports=i;function i(){}i.ForEntityName="MTEXT",i.prototype.parseEntity=function(l,s){var c={type:s.value};for(s=l.next();s!=="EOF"&&s.code!==0;){switch(s.code){case 1:c.text=s.value;break;case 3:c.text+=s.value;break;case 10:c.position=r.parsePoint(l);break;case 40:c.height=s.value;break;case 41:c.width=s.value;break;case 50:c.rotation=s.value;break;case 71:c.attachmentPoint=s.value;break;case 72:c.drawingDirection=s.value;break;default:r.checkCommonEntityProperties(c,s);break}s=l.next()}return c}},{"../ParseHelpers":4}],15:[function(e,t,n){var r=e("../ParseHelpers");t.exports=i;function i(){}i.ForEntityName="POINT",i.prototype.parseEntity=function(l,s){var c;for(c={type:s.value},s=l.next();s!=="EOF"&&s.code!==0;){switch(s.code){case 10:c.position=r.parsePoint(l);break;case 39:c.thickness=s.value;break;case 210:c.extrusionDirection=r.parsePoint(l);break;case 100:break;default:r.checkCommonEntityProperties(c,s);break}s=l.next()}return c}},{"../ParseHelpers":4}],16:[function(e,t,n){var r=e("../ParseHelpers"),i=e("./vertex");t.exports=l;function l(){}l.ForEntityName="POLYLINE",l.prototype.parseEntity=function(h,p){var g={type:p.value,vertices:[]};for(p=h.next();p!=="EOF"&&p.code!==0;){switch(p.code){case 10:case 20:case 30:case 39:g.thickness=p.value;break;case 40:case 41:break;case 70:g.shape=(p.value&1)!==0,g.includesCurveFitVertices=(p.value&2)!==0,g.includesSplineFitVertices=(p.value&4)!==0,g.is3dPolyline=(p.value&8)!==0,g.is3dPolygonMesh=(p.value&16)!==0,g.is3dPolygonMeshClosed=(p.value&32)!==0,g.isPolyfaceMesh=(p.value&64)!==0,g.hasContinuousLinetypePattern=(p.value&128)!==0;break;case 71:case 72:case 73:case 74:case 75:break;case 210:g.extrusionDirection=r.parsePoint(h);break;default:r.checkCommonEntityProperties(g,p);break}p=h.next()}return g.vertices=s(h,p),g};function s(h,p){for(var g=new i,_=[];!h.isEOF();)if(p.code===0){if(p.value==="VERTEX")_.push(g.parseEntity(h,p)),p=h.lastReadGroup;else if(p.value==="SEQEND"){c(h,p);break}}return _}function c(h,p){var g={type:p.value};for(p=h.next();p!="EOF"&&p.code!=0;)r.checkCommonEntityProperties(g,p),p=h.next();return g}},{"../ParseHelpers":4,"./vertex":20}],17:[function(e,t,n){var r=e("../ParseHelpers");t.exports=i;function i(){}i.ForEntityName="SOLID",i.prototype.parseEntity=function(l,s){var c;for(c={type:s.value},c.points=[],s=l.next();s!=="EOF"&&s.code!==0;){switch(s.code){case 10:c.points[0]=r.parsePoint(l);break;case 11:c.points[1]=r.parsePoint(l);break;case 12:c.points[2]=r.parsePoint(l);break;case 13:c.points[3]=r.parsePoint(l);break;case 210:c.extrusionDirection=r.parsePoint(l);break;default:r.checkCommonEntityProperties(c,s);break}s=l.next()}return c}},{"../ParseHelpers":4}],18:[function(e,t,n){var r=e("../ParseHelpers");t.exports=i;function i(){}i.ForEntityName="SPLINE",i.prototype.parseEntity=function(l,s){var c;for(c={type:s.value},s=l.next();s!=="EOF"&&s.code!==0;){switch(s.code){case 10:c.controlPoints||(c.controlPoints=[]),c.controlPoints.push(r.parsePoint(l));break;case 11:c.fitPoints||(c.fitPoints=[]),c.fitPoints.push(r.parsePoint(l));break;case 12:c.startTangent=r.parsePoint(l);break;case 13:c.endTangent=r.parsePoint(l);break;case 40:c.knotValues||(c.knotValues=[]),c.knotValues.push(s.value);break;case 70:s.value&1&&(c.closed=!0),s.value&2&&(c.periodic=!0),s.value&4&&(c.rational=!0),s.value&8&&(c.planar=!0),s.value&16&&(c.planar=!0,c.linear=!0);break;case 71:c.degreeOfSplineCurve=s.value;break;case 72:c.numberOfKnots=s.value;break;case 73:c.numberOfControlPoints=s.value;break;case 74:c.numberOfFitPoints=s.value;break;case 210:c.normalVector=r.parsePoint(l);break;default:r.checkCommonEntityProperties(c,s);break}s=l.next()}return c}},{"../ParseHelpers":4}],19:[function(e,t,n){var r=e("../ParseHelpers");t.exports=i;function i(){}i.ForEntityName="TEXT",i.prototype.parseEntity=function(l,s){var c;for(c={type:s.value},s=l.next();s!=="EOF"&&s.code!==0;){switch(s.code){case 10:c.startPoint=r.parsePoint(l);break;case 11:c.endPoint=r.parsePoint(l);break;case 40:c.textHeight=s.value;break;case 41:c.xScale=s.value;break;case 50:c.rotation=s.value;break;case 1:c.text=s.value;break;case 72:c.halign=s.value;break;case 73:c.valign=s.value;break;default:r.checkCommonEntityProperties(c,s);break}s=l.next()}return c}},{"../ParseHelpers":4}],118:[function(e,t,n){var r=e("../ParseHelpers");t.exports=i;function i(){}i.ForEntityName="HATCH",i.prototype.parseEntity=function(l,s){var c;for(c={type:s.value,paths:[]},s=l.next();s!=="EOF"&&s.code!==0;){switch(s.code){case 10:c.typeOfPath&&(c.typeOfPath[c.typeOfPath.length-1]==4?c.paths[c.paths.length-1].controlPoints[c.paths[c.paths.length-1].controlPoints.length-1].push(r.parsePoint(l)):c.typeOfPath[c.typeOfPath.length-1]==1&&(c.paths[c.paths.length-1].points||(c.paths[c.paths.length-1].points=[]),c.paths[c.paths.length-1].points.unshift(r.parsePoint(l))));break;case 11:c.paths[c.paths.length-1].points.push(r.parsePoint(l));break;case 40:c.typeOfPath&&c.typeOfPath[c.typeOfPath.length-1]==4&&c.paths[c.paths.length-1].knotValues[c.paths[c.paths.length-1].knotValues.length-1].push(s.value);break;case 70:c.solid=s.value;break;case 72:c.typeOfPath||(c.typeOfPath=[]),c.typeOfPath.push(s.value),c.paths.push({});break;case 92:break;case 93:break;case 94:c.paths[c.paths.length-1].degreeOfSplineCurve=s.value;break;case 95:c.paths[c.paths.length-1].numberOfKnots||(c.paths[c.paths.length-1].numberOfKnots=[]),c.paths[c.paths.length-1].numberOfKnots.push(s.value),c.paths[c.paths.length-1].knotValues?c.paths[c.paths.length-1].knotValues.push([]):c.paths[c.paths.length-1].knotValues=[[]];break;case 96:c.paths[c.paths.length-1].numberOfControlPoints||(c.paths[c.paths.length-1].numberOfControlPoints=[]),c.paths[c.paths.length-1].numberOfControlPoints.push(s.value),c.paths[c.paths.length-1].controlPoints?c.paths[c.paths.length-1].controlPoints.push([]):c.paths[c.paths.length-1].controlPoints=[[]];break;case 97:break;default:r.checkCommonEntityProperties(c,s);break}s=l.next()}return c}},{"../ParseHelpers":4}],20:[function(e,t,n){var r=e("../ParseHelpers");t.exports=i;function i(){}i.ForEntityName="VERTEX",i.prototype.parseEntity=function(l,s){var c={type:s.value,flags:0};for(s=l.next();s!=="EOF"&&s.code!==0;){switch(s.code){case 10:c.x=s.value;break;case 20:c.y=s.value;break;case 30:c.z=s.value;break;case 40:case 41:case 42:s.value!=0&&(c.bulge=s.value);break;case 70:c.flags=s.value,c.curveFittingVertex=(s.value&1)!==0,c.curveFitTangent=(s.value&2)!==0,c.splineVertex=(s.value&8)!==0,c.splineControlPoint=(s.value&16)!==0,c.threeDPolylineVertex=(s.value&32)!==0,c.threeDPolylineMesh=(s.value&64)!==0,c.polyfaceMeshVertex=(s.value&128)!==0;break;case 50:case 71:case 72:case 73:case 74:break;default:r.checkCommonEntityProperties(c,s);break}s=l.next()}return c}},{"../ParseHelpers":4}],21:[function(e,t,n){(function(r,i){typeof t=="object"&&t.exports&&typeof e=="function"?t.exports=i():r.log=i()})(this,function(){var r={},i=function(){},l="undefined";function s(k){return typeof console===l?!1:console[k]!==void 0?c(console,k):console.log!==void 0?c(console,"log"):i}function c(k,T){var P=k[T];if(typeof P.bind=="function")return P.bind(k);try{return Function.prototype.bind.call(P,k)}catch{return function(){return Function.prototype.apply.apply(P,[k,arguments])}}}function h(k,T){return function(){typeof console!==l&&(g(T),r[k].apply(r,arguments))}}var p=["trace","debug","info","warn","error"];function g(k){for(var T=0;T<p.length;T++){var P=p[T];r[P]=T<k?i:r.methodFactory(P,k)}}function _(k){var T=(p[k]||"silent").toUpperCase();try{window.localStorage.loglevel=T;return}catch{}try{window.document.cookie="loglevel="+T+";"}catch{}}function b(){var k;try{k=window.localStorage.loglevel}catch{}if(typeof k===l)try{k=/loglevel=([^;]+)/.exec(window.document.cookie)[1]}catch{}r.levels[k]===void 0&&(k="WARN"),r.setLevel(r.levels[k],!1)}r.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},r.methodFactory=function(k,T){return s(k)||h(k,T)},r.setLevel=function(k,T){if(typeof k=="string"&&r.levels[k.toUpperCase()]!==void 0&&(k=r.levels[k.toUpperCase()]),typeof k=="number"&&k>=0&&k<=r.levels.SILENT){if(T!==!1&&_(k),g(k),typeof console===l&&k<r.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+k},r.enableAll=function(k){r.setLevel(r.levels.TRACE,k)},r.disableAll=function(k){r.setLevel(r.levels.SILENT,k)};var x=typeof window!==l?window.log:void 0;return r.noConflict=function(){return typeof window!==l&&window.log===r&&(window.log=x),r},b(),r})},{}]},{},[3])(3)});function t$(e,t,n,r,i,A){var s,c,h,p,g=n.length,_=n[0].length;if(t<1)throw new Error("degree must be at least 1 (linear)");if(t>g-1)throw new Error("degree must be less than or equal to point count - 1");if(!i)for(i=[],s=0;s<g;s++)i[s]=1;if(r){if(r.length!==g+t+1)throw new Error("bad knot vector length")}else{var r=[];for(s=0;s<g+t+1;s++)r[s]=s}var b=[t,r.length-1-t],x=r[b[0]],k=r[b[1]];if(e=e*(k-x)+x,e<x||e>k)throw new Error("out of bounds");for(h=b[0];h<b[1]&&!(e>=r[h]&&e<=r[h+1]);h++);var T=[];for(s=0;s<g;s++){for(T[s]=[],c=0;c<_;c++)T[s][c]=n[s][c]*i[s];T[s][_]=i[s]}var P;for(p=1;p<=t+1;p++)for(s=h;s>h-t-1+p;s--)for(P=(e-r[s])/(r[s+t+1-p]-r[s]),c=0;c<_+1;c++)T[s][c]=(1-P)*T[s-1][c]+P*T[s][c];var A=A||[];for(s=0;s<_;s++)A[s]=T[h][s]/T[h][_];return A}class n${constructor(){}static interpolateBSpline(t,n,r,i){const l=[];let s=t.map(function(p){return[p.x,p.y]});if(t.length>500){let p=[],g=[0,0];s=[];for(let b=0,x=t.length;b<x;b++)t[b].x==g[0]&&t[b].y==g[1]||(g=[t[b].x,t[b].y],p.push(r[b]),s.push(g));const _=r[r.length-1];if(p.push(_),p.push(_),p.push(_),p.push(_),Math.abs(r.length-t.length)>100?r=p:s=t.map(function(b){return[b.x,b.y]}),r.length>1500)return s}const c=[r[n]],h=[r[n],r[r.length-1-n]];for(let p=n+1;p<r.length-n;++p)c[c.length-1]!==r[p]&&c.push(r[p]);i=i||10;for(let p=1;p<c.length;++p){const g=c[p-1],_=c[p];for(let b=0;b<=i;++b)try{const k=(b/i*(_-g)+g-h[0])/(h[1]-h[0]),T=t$(k,n,s,r);l.push(T)}catch{}}return l}}class r${constructor(){this.parser=new e$}async parse(t,n){const r=this;var i=new Date().getTime();try{this._dxf=r.parser.parseSync(t)}catch{return""}console.log("dxf parse:",new Date().getTime()-i);var l="";const s={英寸:25.4,英尺:304.8,毫米:1,厘米:10,米:1e3,分米:100,微米:.001,inch:25.4,foot:304.8,mm:1,cm:10,meter:1e3,decimeter:100,micron:.001,无单位:1},c=["无单位","英寸","英尺","英里","毫米","厘米","米","千米","微英寸","密耳","码","埃","纳米","微米","分米"];let h=1;this._dxf.header?(this._dxf.header.$DIMALTF||(this._dxf.header.$DIMALTF=1),h=n?s[n]:s[c[this._dxf.header.$INSUNITS]]||1):(this._dxf.header={},this._dxf.header.$DIMALTF=1),this._globalScale=1,this._globalScaleY=1;let p=this._globalScale;this._globalLineScale=p,this._lineTypes={},this._layers={},this._dxf.tables&&(this._dxf.tables.lineType&&(this._lineTypes=this._dxf.tables.lineType.lineTypes),this._dxf.tables.layer&&this._dxf.tables.layer.layers&&(this._layers=this._dxf.tables.layer.layers)),this._minX=9999,this._minY=9999,this._maxX=-9999,this._maxY=-9999,this._position={x:0,y:0},this._elems={};let g=[];for(let x=0,k=this._dxf.entities.length;x<k;x++){let T=await this.parseEntitle(this._dxf.entities[x]);g.push(T)}l+=g.join("");var _=this._maxX-this._minX,b=this._maxY-this._minY;return l=`<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="${_*h/p}mm" height="${b*h/p}mm"><g transform="translate(${-this._minX*h/p},${-this._minY*h/p}) scale(${h/p},-${h/p})" style="fill:none;">${l}</g></svg>`,l}checkLimits(t,n){t+=this._position.x,n+=this._position.y,t<this._minX&&(this._minX=t),t>this._maxX&&(this._maxX=t),n<this._minY&&(this._minY=n),n>this._maxY&&(this._maxY=n)}async parseInsert(t){let n=this._globalScale,r=this._dxf.blocks[t.name],i=[];if(r.entities){if(t.position){const l=t.rotation?"rotate("+t.rotation+",0,0)":"";if(l!=""){const s=t.xScale?`scale(${t.xScale},${t.yScale})`:"";i.push(`<g transform="translate(${(t.position.x*n).toFixed(5)}, ${(t.position.y*this._globalScaleY).toFixed(5)}) ${l} ${s}">`)}else{const s=t.xScale?`scale(${t.xScale},${t.yScale})`:"";i.push(`<g transform="translate(${(t.position.x*n).toFixed(5)}, ${(t.position.y*this._globalScaleY).toFixed(5)}) ${s}">`)}}else i.push("<g>");for(let l=0,s=r.entities.length;l<s;l++){let c=await this.parseEntitle(r.entities[l]);i.push(c)}return i.push("</g>"),i.join("")}}toRGB(t){return t==16777215?"#000000":`#${("00000"+t.toString(16)).substr(-6,6)}`}async parseEntitle(t){let n=this._lineTypes,r=this._layers[t.layer],i=this._globalScale,l=this._globalLineScale,s="";this._elems[t.type]?this._elems[t.type]++:this._elems[t.type]=1;let c="",h={x:0,y:0};t.position&&(h.x=t.position.x*i,h.y=t.position.y*this._globalScaleY),r&&r.color&&(t.color?t.color=this.toRGB(t.color):t.color=this.toRGB(r.color));let p="";if(t.lineType&&n[t.lineType]&&n[t.lineType].pattern){for(var g=0;g<n[t.lineType].pattern.length;g++)n[t.lineType].pattern[g]=Math.abs(n[t.lineType].pattern[g]);p="stroke-dasharray:"+n[t.lineType].pattern.join(",")+";"}let _=[];switch(t.type){case"INSERT":{let $=await this.parseInsert(t);_.push($)}break;case"SOLID":{let $=t.points;h.x*=i,h.y*=this._globalScaleY;let Y=$.length;for(let V=0;V<Y;V++)$[V].x*=i,$[V].y*=this._globalScaleY;let z=[];if(Y==4){for(let V=0;V<3;V++)z.push(V==0?"M":"L"),z.push($[V].x.toFixed(5)),z.push($[V].y.toFixed(5)),this.checkLimits($[V].x,$[V].y);z.push("Z");for(let V=1;V<4;V++)z.push(V==1?"M":"L"),z.push($[V].x.toFixed(5)),z.push($[V].y.toFixed(5)),this.checkLimits($[V].x,$[V].y);z.push("Z")}var b=t.color?t.color:"#000000";s="style='fill:"+b+";stroke:none;"+p+"'",_.push("<path "+c+" "+s+" d='"+z.join(" ")+"'/>")}break;case"LWPOLYLINE":{let $=t.vertices,Y=$.length,z=[];for(let ue=0;ue<Y;ue++)$[ue].x*=i,$[ue].y*=this._globalScaleY;for(let ue=0;ue<Y;ue++){if(z.push(ue==0?"M":"L"),z.push($[ue].x.toFixed(5)),z.push($[ue].y.toFixed(5)),$[ue].bulge){let xe=ue<Y-1?$[ue+1].x:$[0].x,ce=ue<Y-1?$[ue+1].y:$[0].y,Ae=$[ue].x-xe,De=$[ue].y-ce,ae=Math.sqrt(Ae*Ae+De*De),we=$[ue].bulge%(Math.PI*2),Q=(ae/2/Math.sin(Math.atan($[ue].bulge)*2)).toFixed(5);z.push("A"+Q+","+Q+","+(we*180/Math.PI).toFixed(5),Math.abs(we)>Math.PI/2?1:0,we>0?1:0,xe,ce)}this.checkLimits($[ue].x,$[ue].y)}let V=t.color?t.color:"#000000";s="style='stroke:"+V+";stroke-width:"+(.5*l).toFixed(5)+"px;"+p+"'",t.lineweight>=0&&(s="style='stroke:"+V+";stroke-width:"+(.5*l).toFixed(5)+"px;"+p+"'"),z=z.join(" ")+(t.closed==!0||t.shape==!0?"z":""),_.push("<path "+c+" "+s+" d='"+z+"'/>")}break;case"ARC":{var x=Math.abs(t.angleLength+Math.PI*2)%(Math.PI*2)>Math.PI,k=!1;t.radius*=i,t.center.x*=i,t.center.y*=this._globalScaleY;let $=t.center.x+t.radius*Math.cos(t.startAngle)*i,Y=t.center.y+t.radius*Math.sin(t.startAngle)*this._globalScaleY,z=t.center.x+t.radius*Math.cos(t.endAngle)*i,V=t.center.y+t.radius*Math.sin(t.endAngle)*this._globalScaleY;t.extrusionDirectionZ&&($*=t.extrusionDirectionZ,z*=t.extrusionDirectionZ,k=t.extrusionDirectionZ<0),k=this._globalScaleY<0?!k:k;var T=t.radius;this.checkLimits($,Y),this.checkLimits(z,V);var b=t.color?t.color:"#000000";s="style='stroke:"+b+";stroke-width:"+(.5*l).toFixed(5)+"px;"+p+"'",t.lineweight>=0&&(s="style='stroke:"+b+";stroke-width:"+(.5*l).toFixed(5)+"px;"+p+"'");let xe=this.drawArcByRadiusDeg($,Y,z,V,T,x,!k);_.push("<path "+c+" "+s+" d='"+xe+"'/>")}break;case"LINE":{if(t.vertices.length<2)break;let $=["M",(t.vertices[0].x*i).toFixed(5),(t.vertices[0].y*this._globalScaleY).toFixed(5),"L",(t.vertices[1].x*i).toFixed(5),(t.vertices[1].y*this._globalScaleY).toFixed(5)];this.checkLimits(t.vertices[0].x*i,t.vertices[0].y*this._globalScaleY),this.checkLimits(t.vertices[1].x*i,t.vertices[1].y*this._globalScaleY);let Y=t.color?t.color:"#000000";s="style='stroke:"+Y+";stroke-width:"+(.5*l).toFixed(5)+"px;"+p+"'",t.lineweight>=0&&(s="style='stroke:"+Y+";stroke-width:"+(.5*l).toFixed(5)+"px;"+p+"'"),_.push("<path "+c+" "+s+" d='"+$.join(" ")+"'/>")}break;case"CIRCLE":{t.center.x*=i,t.center.y*=this._globalScaleY,t.directionZ&&(t.center.x*=t.directionZ),t.radius*=i,this.checkLimits(t.center.x,t.center.y);var b=t.color?t.color:"#000000";s="style='stroke:"+b+";stroke-width:"+(.5*l).toFixed(5)+"px;"+p+"'",t.lineweight>=0&&(s="style='stroke:"+b+";stroke-width:"+(.5*l).toFixed(5)+"px;"+p+"'");let Y=t.center.x,z=t.center.y;var P=t.radius;_.push("<path "+s+" "+c+" d='M"+(Y-P)+" "+z+"a"+P+" "+P+" 0 1 0 "+2*P+" 0a"+P+" "+P+" 0 1 0 "+-2*P+" 0z'/>")}break;case"TEXT":break;case"SPLINE":{var A=[],L=[];t.periodic=!1;for(var g=0,F=t.periodic?t.numberOfControlPoints-3:t.numberOfControlPoints;g<F;g++)t.controlPoints[g].x*=i,t.controlPoints[g].y*=this._globalScaleY,L.push(t.controlPoints[g]);for(var N=[],g=0,W=t.periodic?L.length+4:t.numberOfKnots;g<W;g++)N.push(t.knotValues[g]);let $=n$.interpolateBSpline(L,t.degreeOfSplineCurve,N,L.length<40?20:10);if($.length==0)break;A.push("M"+$[0][0].toFixed(5)+","+$[0][1].toFixed(5)),this.checkLimits($[0][0],$[0][1]);for(var g=1;g<$.length;g++)A.push("L"+$[g][0].toFixed(5)+","+$[g][1].toFixed(5)),this.checkLimits($[g][0],$[g][1]);var b=t.color?t.color:"#000000";s="style='stroke:"+b+";stroke-width:"+(.5*l).toFixed(5)+"px;"+p+"'",t.lineweight>=0&&(s="style='stroke:"+b+";stroke-width:"+(.5*l).toFixed(5)+"px;"+p+"'"),_.push("<path "+s+" d='"+A.join(" ")+(t.closed==!0||t.shape==!0?"z":"")+"'/>")}break;case"HATCH":{for(var te=t.color?t.color:"#000000",A=[],G=0;G<t.paths.length;G++)if(t.typeOfPath[G]==4)for(var K=0;K<t.paths[G].numberOfKnots.length;K++){for(var L=[],g=0;g<t.paths[G].numberOfControlPoints[K];g++)L.push(t.paths[G].controlPoints[K][g]);for(var N=[],g=0;g<t.paths[G].numberOfKnots[K];g++)N.push(t.paths[G].knotValues[K][g]);if(A.push("M"+(L[0].x*i).toFixed(5)+","+(L[0].y*this._globalScaleY).toFixed(5)),(t.paths[G].numberOfControlPoints[K]-1)%3==0)for(var re=1;re<t.paths[G].numberOfControlPoints[K];re+=3)A.push("C"+(L[re].x*i).toFixed(5)+","+(L[re].y*this._globalScaleY).toFixed(5)),A.push((L[re+1].x*i).toFixed(5)+","+(L[re+1].y*this._globalScaleY).toFixed(5)),A.push((L[re+2].x*i).toFixed(5)+","+(L[re+2].y*this._globalScaleY).toFixed(5));else for(var re=1;re<t.paths[G].numberOfControlPoints[K]-2;re+=4)A.push("C"+(L[re].x*i).toFixed(5)+","+(L[re].y*this._globalScaleY).toFixed(5)),A.push((L[re+1].x*i).toFixed(5)+","+(L[re+1].y*this._globalScaleY).toFixed(5)),A.push((L[re+2].x*i).toFixed(5)+","+(L[re+2].y*this._globalScaleY).toFixed(5))}else if(t.typeOfPath[G]==1){var H=t.paths[G].points;for(let Y=0;Y<H.length;Y++)H[Y].x*=i,H[Y].y*=this._globalScaleY;H.length==2&&(A.push("M"+H[0].x.toFixed(5)+","+H[0].y.toFixed(5)),A[A.length-2]&&A[A.length-1].split("M")[1]==A[A.length-2].split("L")[1]&&A.pop(),this.checkLimits(H[0].x,H[0].y),A.push("L"+H[1].x.toFixed(5)+","+H[1].y.toFixed(5)),this.checkLimits(H[1].x,H[1].y))}A.length>0&&(s="fill='#"+te+"'",_.push("<path "+c+" "+s+" d='"+A.join(" ")+"'/>"))}break;case"POLYLINE":{let $=t.vertices;for(let V=0;V<$.length;V++)$[V].x*=i,$[V].y*=this._globalScaleY;let Y=[];for(let V=0,ue=$.length;V<ue;V++)if(Y.push((V==0?"M":"L")+$[V].x+", "+$[V].y),this.checkLimits($[V].x,$[V].y),$[V].bulge&&$[V].flags){let xe=V<ue-1?$[V+1].x:$[0].x,ce=V<ue-1?$[V+1].y:$[0].y,Ae=$[V].x-xe,De=$[V].y-ce,ae=Math.sqrt(Ae*Ae+De*De),we=$[V].bulge%(Math.PI*2),Q=ae/2/Math.sin(Math.atan($[V].bulge)*2);Y.push("A"+Q+","+Q+","+we*180/Math.PI+", "+(Math.abs(we)>Math.PI/2?1:0)+","+(we<0?1:0)+","+xe+","+ce)}let z=t.color?t.color:"#000000";s="style='stroke:"+z+";stroke-width:"+(.5*l).toFixed(5)+"px;"+p+"'",t.lineweight>=0&&(s="style='stroke:"+z+";stroke-width:"+(.5*l).toFixed(5)+"px;"+p+"'"),Y=Y.join(" ")+(t.closed==!0||t.shape==!0?"z":""),_.push("<path "+c+" "+s+" d='"+Y+"'/>")}break;case"ELLIPSE":{var J=t.majorAxisEndPoint.x,ie=t.majorAxisEndPoint.y,oe=t.startAngle,le=t.endAngle,b=t.color?t.color:"#000000";s="style='stroke:"+b+";stroke-width:"+(.5*l).toFixed(5)+"px;"+p+"'";let Y=this.ellipseOrArc(t.center.x,t.center.y,J,ie,t.axisRatio,oe,le);_.push(Y.split("style").join(s));break}}return _.join("")}ellipseOrArc(t,n,r,i,l,s,c,h){const p=(L,F)=>({x:L.x*Math.cos(F)-L.y*Math.sin(F),y:L.y*Math.cos(F)+L.x*Math.sin(F)}),g=Math.sqrt(r*r+i*i),_=l*g,b=-Math.atan2(-i,r);if(Math.abs(s-c)<1e-9||Math.abs(s-c+Math.PI*2)<1e-9){var x=t-g,k=n,T=parseFloat(t)+parseFloat(g),P=n,A="M"+x+","+k+"A"+g+","+_+" 0,1,1 "+T+","+P+"A"+g+","+_+" 0,1,1 "+x+","+P;return`<g transform="rotate(${b/Math.PI*180} ${t}, ${n})"><path style d="${A}" /></g>`}else{const L=p({x:Math.cos(s)*g,y:Math.sin(s)*_},b),F={x:t+L.x,y:n+L.y},N=p({x:Math.cos(c)*g,y:Math.sin(c)*_},b),W={x:t+N.x,y:n+N.y},G=(c<s?c+Math.PI*2:c)-s<Math.PI?0:1;return`<path style d="${`M ${F.x} ${F.y} A ${g} ${_} ${b/Math.PI*180} ${G} 1 ${W.x} ${W.y}`}" />`}}spline(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var n=0;n<this.length;n++)this.points[n].z=this.points[n].z||0;for(var n=0;n<this.length-1;n++){var r=this.points[n],i=this.points[n+1];this.centers.push({x:(r.x+i.x)/2,y:(r.y+i.y)/2,z:(r.z+i.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var n=0;n<this.centers.length-1;n++){var r=this.centers[n],i=this.centers[n+1],l=this.points[n+1].x-(this.centers[n].x+this.centers[n+1].x)/2,s=this.points[n+1].y-(this.centers[n].y+this.centers[n+1].y)/2,c=this.points[n+1].z-(this.centers[n].y+this.centers[n+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[n+1].x+this.sharpness*(this.centers[n].x+l),y:(1-this.sharpness)*this.points[n+1].y+this.sharpness*(this.centers[n].y+s),z:(1-this.sharpness)*this.points[n+1].z+this.sharpness*(this.centers[n].z+c)},{x:(1-this.sharpness)*this.points[n+1].x+this.sharpness*(this.centers[n+1].x+l),y:(1-this.sharpness)*this.points[n+1].y+this.sharpness*(this.centers[n+1].y+s),z:(1-this.sharpness)*this.points[n+1].z+this.sharpness*(this.centers[n+1].z+c)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}getNaturalKs(t,n,r){for(var i=t.length-1,l=this.zerosMat(i+1,i+2),s=1;s<i;s++)l[s][s-1]=1/(t[s]-t[s-1]),l[s][s]=2*(1/(t[s]-t[s-1])+1/(t[s+1]-t[s])),l[s][s+1]=1/(t[s+1]-t[s]),l[s][i+1]=3*((n[s]-n[s-1])/((t[s]-t[s-1])*(t[s]-t[s-1]))+(n[s+1]-n[s])/((t[s+1]-t[s])*(t[s+1]-t[s])));return l[0][0]=2/(t[1]-t[0]),l[0][1]=1/(t[1]-t[0]),l[0][i+1]=3*(n[1]-n[0])/((t[1]-t[0])*(t[1]-t[0])),l[i][i-1]=1/(t[i]-t[i-1]),l[i][i]=2/(t[i]-t[i-1]),l[i][i+1]=3*(n[i]-n[i-1])/((t[i]-t[i-1])*(t[i]-t[i-1])),this.solve(l,r)}solve(t,n){for(var r=t.length,i=0;i<r;i++){for(var l=0,s=Number.NEGATIVE_INFINITY,c=i;c<r;c++)t[c][i]>s&&(l=c,s=t[c][i]);this.swapRows(t,i,l);for(var c=i+1;c<r;c++){for(var h=i+1;h<r+1;h++)t[c][h]=t[c][h]-t[i][h]*(t[c][i]/t[i][i]);t[c][i]=0}}for(var c=r-1;c>=0;c--){var p=t[c][r]/t[c][c];n[c]=p;for(var h=c-1;h>=0;h--)t[h][r]-=t[h][c]*p,t[h][c]=0}return n}zerosMat(t,n){for(var r=[],i=0;i<t;i++){r.push([]);for(var l=0;l<n;l++)r[i].push(0)}return r}swapRows(t,n,r){var i=t[n];t[n]=t[r],t[r]=i}drawArcByRadiusDeg(t,n,r,i,l,s,c){return"M "+t.toFixed(5)+" "+n.toFixed(5)+" A "+l.toFixed(5)+" "+l.toFixed(5)+" 0 "+(s?1:0)+" "+(c?1:0)+" "+r.toFixed(5)+" "+i.toFixed(5)}}async function a$(e){var l,s,c;let t,n=T1.OLD;typeof e=="string"?t=e:(t=e.text,n=((l=e.options)==null?void 0:l.parser)??n);let r,i;if(n===T1.NEW){const h=new d3.Helper(t);r=h.toSVG();const p=(c=(s=h.parsed)==null?void 0:s.header)==null?void 0:c.insUnits;i=nP(p)}else r=await new r$().parse(t),i=1;return{svgStr:r,unitScale:i}}class i${async preprocess(t){const{svgStr:n,unitScale:r}=await a$(t),{filePath:i}=await window.MeApi.fileHelper.saveFileWithFetch("temporary","/process_path.source",n),l=await window.MeApi.wasmKit.process_path(i,0),s=await window.MeApi.fileHelper.read2Str(l);return{svg:n,res:s,unitScale:r}}destroy(){}}function o$(){return new Worker(""+new URL("dxfWorker-1f626df4.js",import.meta.url).href)}class s$ extends Bu{constructor(){super(o$)}preprocess(t){return this.request({type:"preprocess",data:t})}}var q2,Wf;class l${constructor(){Xe(this,Wf,(q2=window.MeApi)!=null&&q2.wasmKit?new i$:new s$)}preprocess(t){return ee(this,Wf).preprocess(t)}destroy(){ee(this,Wf).destroy()}}Wf=new WeakMap;function u$(){return new Worker(""+new URL("outlineWorker-f13d9db0.js",import.meta.url).href)}const c$=2,fu=100;class f$ extends Bu{constructor(){super(u$)}async getBitmapOutLineSvg(t,n,r){const{bitmapShot:i,displaysBounds:l,bitmapScale:s,potracePath:c,extendPoints:h}=t,{width:p,height:g,canvas:_}=i,b=p/_.width,x=g/_.height,{x:k,y:T}=l;let P="";n!==0?(MA(h,{x:k/b*fu,y:T/x*fu}),P=Ov(h,{x:fu/b,y:fu/x})):P=Nx(c).scale(1/s).translate(k,T).toString();let A=Lp(P);return r||(A=await this.request({type:"getRemoveSmallAreaSvg",data:{svg:A}})),A}async getVectorOutLineSvg(t,n){const{vectorDisplays:r,closePathPointsList:i,openPathPointsList:l,shapeExtendPoints:s}=t;if(n===0){const g=await this.request({type:"genVectorZeroOffsetPath",data:{vectorDisplays:r}});return Lp(g)}let c="";if((l==null?void 0:l.length)>0){const g=Ov(s,{x:fu,y:fu});if(!["M0,0",""].includes(g)){const _=Lp(g);c=await this.request({type:"getRemoveSmallAreaSvg",data:{svg:_}})}}let h="";if((i==null?void 0:i.length)>0){const g=Ov(i);if(!["M0,0",""].includes(g)){const _=Lp(g);h=await this.request({type:"genVectorCloseSvg",data:{svg:_,offset:n}})}}let p="";return c&&h?p=await this.request({type:"getUniteResult",data:{svgList:[c,h]}}):c?p=c:h&&(p=h),p}async genOutline(t=c$,n={addBitmapInner:!0,bitmapPointsList:[]},r){const{addBitmapInner:i=!0}=n;let l="";r!=null&&r.bitmapData&&(l=await this.getBitmapOutLineSvg(r.bitmapData,t,i));let s="";r!=null&&r.vectorData&&(s=await this.getVectorOutLineSvg(r==null?void 0:r.vectorData,t));let c="";const h=Dv(l),p=Dv(s);return h&&p?(c=await this.request({type:"getUniteResult",data:{svgList:[l,s]}}),c=Dv(c)):h?c=h:p&&(c=p),c}cancelGeneral(){this.destroy()}}function d$(){return new Worker(""+new URL("socketWorker-abd78899.js",import.meta.url).href)}class h$ extends Bu{constructor(){super(d$)}create(t){return this.request({type:"createSocket",data:{url:t}})}close(){return this.request({type:"closeSocket"})}}const p$=e=>`ws://${e}:8081`;class g$ extends ra.EventEmitter{constructor(n){super();de(this,"ip");de(this,"isOpen",!1);de(this,"webRequest",!0);de(this,"callbacks");de(this,"socketWorker");de(this,"closePing",()=>{});this.ip=n,this.isOpen=!0,this.callbacks={onClose(){},onReceive(){},onError(){}}}get connectIdentify(){return this.ip}async setup(n){console.info(["=> setup NetServer",this.ip,{useSocket:n}]),this.setupCallbacks(),n&&await this.setupSocket(),await this.checkIpOnline()}async setupSocket(){return console.info(["=> setupSocket",this.ip]),new Promise(async(n,r)=>{this.socketWorker=new h$;const i={open:()=>{console.log(["opened",this.ip]),n(!0)},message:s=>{this.emit(ta.RECEIVE,s)},close:()=>{console.info(["=> service message socket closed.",this.ip]),this.emit(ta.CLOSED),this.socketWorker.destroy(),r()},error:s=>{console.error(["=> service message socket error",this.ip,s]),r(s)}};this.socketWorker.on("message",({type:s,data:c})=>{console.debug(["=> socket worker message",s,c]);const h=i[s];ut(h)&&h(c)}),this.socketWorker.on("error",s=>{r(s)});const l=p$(this.ip);await this.socketWorker.create(l)})}setupCallbacks(){this.on(ta.CLOSED,()=>{ut(this.callbacks.onClose)&&this.callbacks.onClose()}),this.on(ta.ERROR,()=>{ut(this.callbacks.onError)&&this.callbacks.onError()}),this.on(ta.RECEIVE,n=>{ut(this.callbacks.onReceive)&&this.callbacks.onReceive(n)})}onReceive(n){const r=i=>{console.log({chunk:i}),ut(n)&&n(i)};return this.on(ta.RECEIVE,r),()=>{this.off(ta.RECEIVE,r)}}setCallbacks(n){console.debug(["=> socket setCallback"]),this.callbacks=Object.assign(this.callbacks,n)}hasOpen(){return this.isOpen}apiParser(n){return _A(n,this.ip)}apiParserNext(n){const r=(i,l,s)=>{const c=(_,b)=>this.socketWorker.request({type:"execCmd",data:{cmd:_,args:l,...b}});ut(i)&&(i=i(l));const{dataTransform:h,...p}=s.options||{};let g;if(ma(i)){const _=[];i.forEach(b=>{console.log(["socket send",b]),_.push(c(b,{...p,type:s.type}))}),g=Promise.all(_)}else console.log(["socket send",i]),g=c(i,{...p,type:s.type});return g.then(_=>(console.log(["=> customRequest result",_]),ut(h)?h(_):_))};return w_(n,this.ip,r.bind(this))}async checkIpOnline(){var r,i,l;if(!((r=window.MeApi)!=null&&r.ping))return!1;const n=await((i=window.MeApi)==null?void 0:i.ping.pingOnceCheck(this.ip));if(!n)return this.isOpen=!1,Promise.reject(`device is online ${n}`);this.isOpen=!0,this.closePing=(l=window.MeApi)==null?void 0:l.ping.pingHeartCheck(this.ip,()=>{this.close()},{maxCount:8,timeout:1})}close(){this.closeSocket(),this.dispose()}closeSocket(){var n;return(n=this.socketWorker)==null?void 0:n.close()}dispose(){var n;this.isOpen=!1,ut(this.closePing)&&this.closePing(),this.closePing=()=>{},this.emit(ta.CLOSED),this.callbacks={onClose(){},onReceive(){},onError(){}},this.removeAllListeners(),(n=this.socketWorker)==null||n.destroy()}}const v6="201.234.3.1",m$="169.254.2.1",v$=[{name:"version",timeout:3e3,list:[{url:"/system",params:{action:"version"},transformResult(e){return Ve(e,"version")}},{url:"/system",params:{action:"version_v2"},transformResult(e){return Ve(e,"package_version",e)}}]},{name:"info",timeout:3e3,list:[{url:"/system",params:{action:"get_dev_name"},transformResult(e){return Ve(e,"name",e)}},{url:"/system",params:{action:"mac"},transformResult(e){return Ve(e,"mac",Fx(e,`
`))}}]}],z_=async(e,t,n)=>{const r=w_(v$,e);try{const l=(await r.version({signal:n})).find(g=>lr(g));if(!l)return null;const s=await r.info({signal:n}),[c,h]=s.map(g=>lr(g)?g:""),p={ip:e,version:l,name:c,mac:h};return console.log(["=> data",p,e]),ut(t)&&t(p),p}catch(i){console.error(i)}return null};var f0={},_$={get exports(){return f0},set exports(e){f0=e}},d0={},y$={get exports(){return d0},set exports(e){d0=e}},h0={},b$={get exports(){return h0},set exports(e){h0=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){return function(...i){if(r===null)throw new Error("Callback was already called.");var l=r;r=null,l.apply(this,i)}}e.exports=t.default})(b$,h0);var qi={};Object.defineProperty(qi,"__esModule",{value:!0});qi.fallback=_6;qi.wrap=y6;var w$=qi.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,S$=qi.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,x$=qi.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function _6(e){setTimeout(e,0)}function y6(e){return(t,...n)=>e(()=>t(...n))}var _f;w$?_f=queueMicrotask:S$?_f=setImmediate:x$?_f=process.nextTick:_f=_6;qi.default=y6(_f);var p0={},E$={get exports(){return p0},set exports(e){p0=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.head=this.tail=null,this.length=0}removeLink(l){return l.prev?l.prev.next=l.next:this.head=l.next,l.next?l.next.prev=l.prev:this.tail=l.prev,l.prev=l.next=null,this.length-=1,l}empty(){for(;this.head;)this.shift();return this}insertAfter(l,s){s.prev=l,s.next=l.next,l.next?l.next.prev=s:this.tail=s,l.next=s,this.length+=1}insertBefore(l,s){s.prev=l.prev,s.next=l,l.prev?l.prev.next=s:this.head=s,l.prev=s,this.length+=1}unshift(l){this.head?this.insertBefore(this.head,l):r(this,l)}push(l){this.tail?this.insertAfter(this.tail,l):r(this,l)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var l=this.head;l;)yield l.data,l=l.next}remove(l){for(var s=this.head;s;){var{next:c}=s;l(s)&&this.removeLink(s),s=c}return this}}t.default=n;function r(i,l){i.length=1,i.head=i.tail=l}e.exports=t.default})(E$,p0);var Za={},Pf={},k$={get exports(){return Pf},set exports(e){Pf=e}},g0={},C$={get exports(){return g0},set exports(e){g0=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n){return function(...r){var i=r.pop();return n.call(this,r,i)}},e.exports=t.default})(C$,g0);var s2;function T$(){return s2||(s2=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=h;var n=g0,r=c(n),i=qi,l=c(i),s=j_();function c(_){return _&&_.__esModule?_:{default:_}}function h(_){return(0,s.isAsync)(_)?function(...b){const x=b.pop(),k=_.apply(this,b);return p(k,x)}:(0,r.default)(function(b,x){var k;try{k=_.apply(this,b)}catch(T){return x(T)}if(k&&typeof k.then=="function")return p(k,x);x(null,k)})}function p(_,b){return _.then(x=>{g(b,null,x)},x=>{g(b,x&&x.message?x:new Error(x))})}function g(_,b,x){try{_(b,x)}catch(k){(0,l.default)(T=>{throw T},k)}}e.exports=t.default}(k$,Pf)),Pf}var l2;function j_(){if(l2)return Za;l2=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.isAsyncIterable=Za.isAsyncGenerator=Za.isAsync=void 0;var e=T$(),t=n(e);function n(c){return c&&c.__esModule?c:{default:c}}function r(c){return c[Symbol.toStringTag]==="AsyncFunction"}function i(c){return c[Symbol.toStringTag]==="AsyncGenerator"}function l(c){return typeof c[Symbol.asyncIterator]=="function"}function s(c){if(typeof c!="function")throw new Error("expected a function");return r(c)?(0,t.default)(c):c}return Za.default=s,Za.isAsync=r,Za.isAsyncGenerator=i,Za.isAsyncIterable=l,Za}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=_;var n=h0,r=g(n),i=qi,l=g(i),s=p0,c=g(s),h=j_(),p=g(h);function g(b){return b&&b.__esModule?b:{default:b}}function _(b,x,k){if(x==null)x=1;else if(x===0)throw new RangeError("Concurrency must not be zero");var T=(0,p.default)(b),P=0,A=[];const L={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function F(le,$){L[le].push($)}function N(le,$){const Y=(...z)=>{W(le,Y),$(...z)};L[le].push(Y)}function W(le,$){if(!le)return Object.keys(L).forEach(Y=>L[Y]=[]);if(!$)return L[le]=[];L[le]=L[le].filter(Y=>Y!==$)}function te(le,...$){L[le].forEach(Y=>Y(...$))}var G=!1;function K(le,$,Y,z){if(z!=null&&typeof z!="function")throw new Error("task callback must be a function");oe.started=!0;var V,ue;function xe(Ae,...De){if(Ae)return Y?ue(Ae):V();if(De.length<=1)return V(De[0]);V(De)}var ce=oe._createTaskItem(le,Y?xe:z||xe);if($?oe._tasks.unshift(ce):oe._tasks.push(ce),G||(G=!0,(0,l.default)(()=>{G=!1,oe.process()})),Y||!z)return new Promise((Ae,De)=>{V=Ae,ue=De})}function re(le){return function($,...Y){P-=1;for(var z=0,V=le.length;z<V;z++){var ue=le[z],xe=A.indexOf(ue);xe===0?A.shift():xe>0&&A.splice(xe,1),ue.callback($,...Y),$!=null&&te("error",$,ue.data)}P<=oe.concurrency-oe.buffer&&te("unsaturated"),oe.idle()&&te("drain"),oe.process()}}function H(le){return le.length===0&&oe.idle()?((0,l.default)(()=>te("drain")),!0):!1}const J=le=>$=>{if(!$)return new Promise((Y,z)=>{N(le,(V,ue)=>{if(V)return z(V);Y(ue)})});W(le),F(le,$)};var ie=!1,oe={_tasks:new c.default,_createTaskItem(le,$){return{data:le,callback:$}},*[Symbol.iterator](){yield*oe._tasks[Symbol.iterator]()},concurrency:x,payload:k,buffer:x/4,started:!1,paused:!1,push(le,$){return Array.isArray(le)?H(le)?void 0:le.map(Y=>K(Y,!1,!1,$)):K(le,!1,!1,$)},pushAsync(le,$){return Array.isArray(le)?H(le)?void 0:le.map(Y=>K(Y,!1,!0,$)):K(le,!1,!0,$)},kill(){W(),oe._tasks.empty()},unshift(le,$){return Array.isArray(le)?H(le)?void 0:le.map(Y=>K(Y,!0,!1,$)):K(le,!0,!1,$)},unshiftAsync(le,$){return Array.isArray(le)?H(le)?void 0:le.map(Y=>K(Y,!0,!0,$)):K(le,!0,!0,$)},remove(le){oe._tasks.remove(le)},process(){if(!ie){for(ie=!0;!oe.paused&&P<oe.concurrency&&oe._tasks.length;){var le=[],$=[],Y=oe._tasks.length;oe.payload&&(Y=Math.min(Y,oe.payload));for(var z=0;z<Y;z++){var V=oe._tasks.shift();le.push(V),A.push(V),$.push(V.data)}P+=1,oe._tasks.length===0&&te("empty"),P===oe.concurrency&&te("saturated");var ue=(0,r.default)(re(le));T($,ue)}ie=!1}},length(){return oe._tasks.length},running(){return P},workersList(){return A},idle(){return oe._tasks.length+P===0},pause(){oe.paused=!0},resume(){oe.paused!==!1&&(oe.paused=!1,(0,l.default)(oe.process))}};return Object.defineProperties(oe,{saturated:{writable:!1,value:J("saturated")},unsaturated:{writable:!1,value:J("unsaturated")},empty:{writable:!1,value:J("empty")},drain:{writable:!1,value:J("drain")},error:{writable:!1,value:J("error")}}),oe}e.exports=t.default})(y$,d0);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(c,h){var p=(0,l.default)(c);return(0,r.default)((g,_)=>{p(g[0],_)},h,1)};var n=d0,r=s(n),i=j_(),l=s(i);function s(c){return c&&c.__esModule?c:{default:c}}e.exports=t.default})(_$,f0);const b6=$x(f0),A$=50,w6=(e,t=[])=>{console.log(["=> sameGatewayIps",e]);const n=[];if(ma(e))return e.forEach(c=>{n.push(...w6(c,t))}),n;const[r,i,l,s]=e.split(".");for(let c=1;c<255;c++){if(Number(s)===c)continue;const h=[r,i,l,c].join(".");t.includes(h)||n.push(h)}return n};let Yp;const yf=b6((e,t)=>{e().finally(()=>{t()})},A$),S6=()=>{if(yf.kill(),Yp&&(Yp(),Yp=null),!window.MeApi)return;const{discovery:e}=window.MeApi;e&&e.dispose()},P$=async e=>{try{const{discovery:t}=window.MeApi,n=[];if(t){S6();const r=[],i=_=>{n.some(x=>x.ip===_.ip)||(n.push(_),ut(e.onDiscover)&&e.onDiscover(_))},{signal:l,cancel:s}=f1();Yp=s;const c=_=>()=>z_(_,i,l),h=async()=>{t.on("receiver",async _=>{const{ip:b,name:x,version:k}=_;b&&(r.push(b),b&&k?i({ip:b,name:x,version:k}):yf.pushAsync(c(b)))}),await t.list(),t.dispose()};yf.pushAsync(h);const p=await t.ip();let g=Bx(w6(p,[...r,v6]));return g.length>100&&(g=g.slice(99).concat(g.slice(0,99))),g.forEach(_=>{yf.pushAsync(c(_))}),await yf.drain(),console.log(["=> 队列执行完成"]),n}return[]}catch(t){return console.error(t),[]}},L$=()=>{S6()},I$=e=>z_(e),R$=e=>new g$(e);class O$ extends ra{constructor(n){super();de(this,"options");de(this,"port");this.options=n}get connectIdentify(){var n;return(n=this.port)==null?void 0:n.connectIdentify}async init(){var n,r,i,l;return(r=(n=window.MeApi)==null?void 0:n.serial)!=null&&r.open?(this.port=await((l=(i=window.MeApi)==null?void 0:i.serial)==null?void 0:l.open(this.options)),this.port.on("data",s=>{this.emit(ta.RECEIVE,s)}),this.port.on("close",()=>{this.emit(ta.CLOSED)}),this):Promise.reject()}hasOpen(){var n;return(n=this.port)==null?void 0:n.hasOpen()}write(n,r,i){var l;return(l=this.port)==null?void 0:l.write.bind(this.port)(n,r,i)}onReceive(n){var r;return(r=this.port)==null?void 0:r.onReceive.bind(this.port)(n)}setCallbacks(n){var r;(r=this.port)==null||r.setCallbacks.bind(this.port)(n)}apiParser(n){var i;const r=(i=this.port)==null?void 0:i.apiParser.bind(this.port)(n);return r.uploadGcode=(...l)=>{var s;return(s=this.port)==null?void 0:s.uploadFile(...l)},r.updateFirmware=l=>{var s,c;return(c=(s=window.MeApi)==null?void 0:s.serial)==null?void 0:c.updateFirmware({...l,baud:115200,port:this.connectIdentify})},r.downloadFirmware=(...l)=>{var s,c;return(c=(s=window.MeApi)==null?void 0:s.serial)==null?void 0:c.downloadFirmware(...l)},r}getData(n,r,i=1e3){var l;return(l=this.port)==null?void 0:l.getData.bind(this.port)(n,r,i)}setData(n,r=[]){var i;return(i=this.port)==null?void 0:i.setData.bind(this.port)(n,r)}stopReadGcodeFile(){var n;return(n=this.port)==null?void 0:n.closeReadFile()}close(){var n;return(n=this.port)==null?void 0:n.close()}dispose(){this.removeAllListeners()}}const D$=e=>{var t,n,r;return(t=window.MeApi)!=null&&t.serial?(r=(n=window.MeApi)==null?void 0:n.serial)==null?void 0:r.list(e):Promise.reject()},M$=e=>new O$(e).init(),N$=e=>e?Promise.all([e.getData("M99",void 0,1500),e.getData("M100",void 0,1500)]):Promise.reject(new Error("get device version error. port is unknown.")),x6={open:M$,list:D$,version:N$},mu={ethList:I$,wifiList:P$,open:R$,info:z_,stopList:L$};var Y2;class F${constructor(){de(this,"serial",(Y2=window.MeApi)==null?void 0:Y2.serial)}download(t){var n;return ut(this.serial.downloadFirmware)?(n=this.serial)==null?void 0:n.downloadFirmware(t):Promise.reject(new Error("not MeApi"))}update(t){var n;return ut(this.serial.updateFirmware)?(n=this.serial)==null?void 0:n.updateFirmware(t):Promise.reject(new Error("not MeApi"))}}const u2=new F$,$$=["1a86","28e9"],B$=["7523","018a"],U$=230400,yG="device-canvas-plugin",V$={15:sn.P1,21:sn.P2,30:sn.D1,31:sn.D1Pro,32:sn.D2,18:sn.M1,51:sn.F1},Uv=e=>{if(!lr(e))return;if(new RegExp("[v|V]1\\.[0-9]+.[0-9]+ [b|B][0-9]+").test(e))return sn.D1;const[,n]=e.match(/\d+/g)??[];return V$[n]},du={[gr.SERIAL]:{...x6,detect(e){return Uv(e)}},[gr.ETH]:{list:mu.ethList,open:mu.open,detect(e){return Uv(e)}},[gr.WIFI]:{list:mu.wifiList,open:mu.open,detect(e){return Uv(e)}}};var _0,Is,qf,A1,Su,Kp,Yf,P1,Kf,L1,y0,E6;class H${constructor(){Xe(this,qf);Xe(this,Su);Xe(this,Yf);Xe(this,Kf);Xe(this,y0);Xe(this,_0,gr.SERIAL);Xe(this,Is,new Map)}set type(t){bt(this,_0,t)}getDevice(t){return ee(this,Is).get(t)}async ethList(t){const n=[];try{const r=await Pn(this,Yf,P1).call(this,m$);r&&(ut(t)&&t(r),n.push(r))}catch(r){console.error(r)}return n}async usbList(t){const n=await Pn(this,y0,E6).call(this,t);try{const r=await Pn(this,Yf,P1).call(this,v6);r&&(ut(t)&&t(r),n.push(r))}catch(r){console.error(r)}return n}async wifiList(t){const n=[];return await du.WIFI.list({...t,onDiscover:r=>{const i=Pn(this,Su,Kp).call(this,r,gr.WIFI);i&&(n.push(i),ut(t==null?void 0:t.onDiscover)&&(t==null||t.onDiscover(i)))}}),n}stopWifiList(){return mu.stopList()}async ipDirectly(t,n=gr.WIFI){const r=await mu.info(t);return r?Pn(this,Su,Kp).call(this,r,n):null}async serialDirectly(t){return Pn(this,Kf,L1).call(this,t)}ports(){return du.SERIAL.list(t=>{const{vendorId:n,productId:r}=t;return!n&&!r?!1:$$.includes(n.toLocaleLowerCase())&&B$.includes(r.toLocaleLowerCase())})}closeConnect(t){ee(this,Is).forEach((n,r)=>{n&&n.hasOpen()&&ut(n.close)&&r!==t&&(n.close(),ee(this,Is).delete(r))})}downloadFirmware(t){return u2.download(t)}updateFirmware(t){return this.closeConnect(),u2.update(t)}}_0=new WeakMap,Is=new WeakMap,qf=new WeakSet,A1=function(t,n){ee(this,Is).set(t,n)},Su=new WeakSet,Kp=function(t,n){const{version:r,ip:i,name:l}=t,s=du[n],c=s.detect(r);if(!c)return null;const h=s.open(i);return Pn(this,qf,A1).call(this,i,h),{id:i,ip:i,name:l,product:c,type:n,version:r}},Yf=new WeakSet,P1=async function(t){const n=await du.ETH.list(t);return n?Pn(this,Su,Kp).call(this,n,gr.ETH):null},Kf=new WeakSet,L1=async function(t){const n=await du.SERIAL.open({path:t,baudRate:U$}),r=ut(n.hasOpen)&&n.hasOpen();if(console.info(["=> port isOpen",r]),!r)return Promise.reject("port is not open");const[i,l]=await x6.version(n),s=du.SERIAL.detect(i);if(!s)return;const c={id:t,port:t,name:l,product:s,version:i,type:gr.SERIAL};return Pn(this,qf,A1).call(this,t,n),c},y0=new WeakSet,E6=async function(t){const n=await this.ports();console.log(n);const r=[];for(const i of n){const{path:l}=i,s=await Pn(this,Kf,L1).call(this,l);s&&(r.push(s),ut(t)&&t(s))}return r};const ff=new H$;class z$ extends ra.EventEmitter{}class j$ extends z${constructor(){super(...arguments);de(this,"_connected",!1);de(this,"connectType",gr.ETH);de(this,"_deviceInfo");de(this,"_deviceState");de(this,"_device");de(this,"_whenReceiveCmdResolveMap");de(this,"_apis",{});de(this,"_canvasId","")}get LIFECYCLE(){return{LOAD:"load",CONNECTED:"connected",BEFORE_UNLOADED:"beforeUnloaded",DISCONNECT:"disconnect",CHANGE:"change"}}setupLifeCycle(){const{LIFECYCLE:n}=this;[{name:n.LOAD,listener:this.onLoad},{name:n.CONNECTED,listener:this.onConnected},{name:n.DISCONNECT,listener:this.onDisconnect},{name:n.CHANGE,listener:this.onChange},{name:n.BEFORE_UNLOADED,listener:this.onBeforeUnloaded}].forEach(({name:i,listener:l})=>{const s=()=>{};this.on(i,(l||s).bind(this))})}get connected(){return this==null?void 0:this._connected}set connected(n){this._connected=n}get info(){return this.deviceInfo}get deviceInfo(){return this._deviceInfo}set deviceInfo(n){this._deviceInfo=Object.assign({},this._deviceInfo,n),this.emit(ni.UPDATE_DEVICE_INFO,n)}get deviceState(){return this._deviceState}set deviceState(n){this._deviceState=Object.assign({},this._deviceState,n),this.emit(ni.DEVICE_STATE_CHANGE,n)}get device(){return this._device}set device(n){n.on(ta.RECEIVE,this.deviceCmdParsing.bind(this)),n.on(ta.CLOSED,()=>{this.emit(this.LIFECYCLE.DISCONNECT,n.connectIdentify)}),this._device=n}get whenReceiveCmdResolveMap(){return this._whenReceiveCmdResolveMap||(this._whenReceiveCmdResolveMap=new Map),this._whenReceiveCmdResolveMap}whenReceiveCmd(n){return f3(()=>new Promise(r=>{this.whenReceiveCmdResolveMap.set(n,r)}).finally(()=>{this.whenReceiveCmdResolveMap.delete(n)}),3e4,new Error(`wait ${n} timeout.`))}deviceCmdParsing(n){console.log(n)}get apis(){return this._apis}set apis(n){this._apis=n}async initDeviceInfo(){const r=await this.apis.deviceInfo({},!1)||{};return this.updateDeviceInfo(r),r}updateDeviceInfo(n){this.deviceInfo=n}async initDeviceState(){const n=await this.apis.deviceState();return this.deviceState=n,n}get canvasId(){return this._canvasId}set canvasId(n){this._canvasId=n}}class G$ extends ra.EventEmitter{}class W${constructor(){de(this,"_config");de(this,"_exceptionsKeys")}get config(){return this._config}set config(t){this._config=t}get hooks(){return this._config.gcodeHooks}get contentId(){return this._config.firmwareContentId}get id(){return this._config.id}get deviceExceptions(){return this._config.deviceExceptions}get exceptionsKeys(){return this._exceptionsKeys||(this._exceptionsKeys=u5(this.deviceExceptions,"code")),this._exceptionsKeys}getExceptionsByKey(t){const n=this.deviceExceptions;return n==null?void 0:n.find(r=>r.code===t)}get networkProtocols(){var t;return(t=this._config.protocols)==null?void 0:t.network}get serialProtocols(){var t;return(t=this._config.protocols)==null?void 0:t.serial}get processingArea(){return this._config.processingArea}get baseProcessingArea(){return this._config.processingArea.base}getProcessingAreaByKey(t){const n=this._config.processingArea.data.find(r=>r.key===t);return n||this.baseProcessingArea}getProtocolConfig(t){if([gr.ETH,gr.WIFI].includes(t))return this.networkProtocols;if(t===gr.SERIAL)return this.serialProtocols}}class q${constructor(){de(this,"downloadCancelable",()=>{});de(this,"uploadCancelable",()=>{})}downloadFirmware(t){const{signal:n,cancel:r}=f1();return this.downloadCancelable=r,h1({...t,url:t.url[0],timeout:0,params:{t:+new Date},responseType:"blob",signal:n})}async updateFirmware(t,n=!0){const{signal:r,cancel:i}=f1();return this.uploadCancelable=i,Object.assign(t,{signal:r}),n?this.apis.updateFirmwareHandshake().then(l=>l.result==="ok"?this.apis.updateFirmware(t):Promise.reject(l)):this.apis.updateFirmware(t)}async checkFirmwareUpdated(t,n){const{delay:r=1e3*30,loopCount:i=100,onCheckProgress:l=()=>{}}=n||{};console.info(["=> checkFirmwareUpdated",t]),await c1(r),console.info(["=> checkFirmwareUpdated delay done.",r]);for(let s=0;s<i;s++){try{console.log(["=> checkFirmwareUpdated compare version count",s+1]),l(s);const c=await this.apis.version(),h=gA(c,t);if(console.log({version:t,deviceVersion:c,status:h}),h>=0)return Promise.resolve(!0)}catch(c){console.error(["=> checkFirmwareUpdated",c])}await c1(2e3)}return Promise.reject("checkFirmwareUpdated can not match the version.")}}class Y$ extends ra.EventEmitter{constructor(){super(...arguments);de(this,"PROCESSING_STATE_CHANGE","PROCESSING_STATE_CHANGE");de(this,"processingState",zw.READY)}initProcessParams(n){console.log(n)}async startWalkBorder(n,r){console.log(n,r)}updateWalkBorderGcode(n){console.log(n)}autoFocus(n){console.log(n)}emitProcessingStateChange(n){if(n!==this.processingState){const r=this.processingState;this.processingState=n,this.emit(this.PROCESSING_STATE_CHANGE,{state:n,beforeState:r})}}}class K${constructor(){de(this,"uiRef")}get ui(){return{}}get projectData(){var t;return(t=this.uiRef)==null?void 0:t.value.getProjectData()}set projectData(t){var n;(n=this.uiRef)==null||n.value.setProjectData(t)}getProcessingData(t){var n;return(n=this.projectData)==null?void 0:n.data.get(t)}toCopyDisplay(t){var s;const{displayJSONs:n,sourceCanvasId:r,targetCanvasId:i}=t,l=n.map(c=>({source:{canvasId:r,displayId:c.sourceId},target:[{canvasId:i,displayId:c.id}]}));(s=this.uiRef)==null||s.value.copyDisplaysData(l)}setLastExtDisplaysData(t){var n;(n=this.uiRef)==null||n.value.setLastExtDisplaysData(t)}}const Rp=.001,Z$=(e,t)=>{const{x:n,y:r,width:i,height:l}=e,{x:s,y:c,width:h,height:p}=t,g=n+i,_=r+l,b=s===-1/0?h:s+h,x=c===-1/0?p:c+p;return n>s-Rp&&r>c-Rp&&g<b+Rp&&_<x+Rp},J$=(e,t)=>{let n=!0,r="";for(const i of t){const l=e[i];if(Gs(l)||ga(l)||isNaN(l)){n=!1,r=i;break}}return{result:n,shortKey:r}};class X${constructor(t,n){de(this,"checkRules");de(this,"connectType");this.checkRules=t;const{connectType:r="WIFI"}=n;this.connectType=r}check(t,n){if(t.elementCount.total===0)return{type:b_.text,text:"device.process.no_elements"};const{params:{processMode:i}}=t,{elementCountRules:l,collisionRules:s,integrityDataRules:c,addonStatusRules:h}=this.checkRules[i],p=l?this.checkElementCount(t,l):null;if(p)return p;const g=s?this.checkCollision(t,n,s):null;if(g)return g;const _=c?this.checkDataIntegrity(t,c):null;if(_)return _;const b=h?this.checkAddonStatus(t,h):null;return b||null}checkElementCount(t,n){console.log(["check element count =>",t,n]);const{checkFunctionList:r,handler:i}=n,{elementCount:l}=t;let s=null;for(const c of r){const{func:h,args:p,info:g}=c,_=h(l[p]);console.log(["tempResult =>",_,l[p]]),_||(s=i(g),console.log(s))}return s}checkCollision(t,n,r){const{checkSizeType:i,ignoredDirection:l,handler:s}=r,{width:c,height:h,startX:p,startY:g}=n,_={x:Cs(l,Ts.LEFT)?-1/0:p||0,y:Cs(l,Ts.TOP)?-1/0:g||0,width:Cs(l,Ts.RIGHT)?1/0:c,height:Cs(l,Ts.BOTTOM)?1/0:h};return Z$(t[i],_)?null:s()}checkDataIntegrity(t,n){const{params:r}=t,{requireKeys:i,handler:l}=n,{result:s,shortKey:c}=J$(r,i);return console.log(["check data integrity =>",t,n,s]),s?null:l(c,r)}checkAddonStatus(t,n){const{addonCheckLists:r,rules:i}=n,{isWalkBorder:l}=t.params;let s=null;if(r.length>0)for(const c of r){const{checkKey:h,correctStatus:p,wrongStatus:g,handler:_,func:b,exemption:x=[],ignoreConnectType:k=[]}=i[c];if(k.includes(this.connectType))continue;if(l&&Cs(x,"walkBorder"))break;let T=null;if(b&&ut(b)?T=b(t.addonStatus,t.connected):T=t.addonStatus?t.addonStatus[h]:null,!Gs(T)&&(p&&T!==p||T===g)){s=_();break}}return s}checkCurveGeneration(){}}const Q$=`# date=\${time}
# version=\${version}
# gc=\${gc}
G90
G0 F3000
`;var Zf;class eB{constructor(t){Xe(this,Zf,void 0);bt(this,Zf,t)}extra(t,n,r){const i=this.run(n,r,ee(this,Zf)??{});return i&&(n.toLowerCase().includes("head")?t+=`
${i}`:t=`${i}
${t}`),t}run(t,n,r){var l;const i=(l=(r||this)[t])==null?void 0:l.bind(r||this);return ut(i)?i(n):(console.warn(`hook '${t} is undefined.'`),"")}head(t){return this.extra("# GLOBAL START",Fn.HEAD,t)+`
`}tail(t){return this.extra("# GLOBAL END",Fn.TAIL,t)+`
`}vectorHead(t){return this.extra("# VECTOR GCODE HEAD",Fn.VECTOR_HEAD,t)}vectorTail(t){return this.extra("# VECTOR GCODE TAIL",Fn.VECTOR_TAIL,t)}bitmapHead(t){return this.extra("# BITMAP GCODE HEAD",Fn.BITMAP_HEAD,t)}bitmapTail(t){return this.extra("# BITMAP GCODE TAIL",Fn.BITMAP_TAIL,t)}note(t){const{version:n,size:r,rotateMultiple:i=1,offset:l={x:0,y:0},primaryOffsetX:s,primaryOffsetY:c,start:h={x:0,y:0},extendDirection:p,printSize:g={width:0,height:0,x:0,y:0}}=t,_=ga(s)?l.x:s,b=ga(c)?l.y:c;p===Ts.RIGHT&&r.w<g.width+g.x&&(r.w=g.width+g.x),p===Ts.BOTTOM&&r.h<g.height+g.y&&(r.h=g.height+g.y);const x={size:{w:Number(Math.abs(r.w).toFixed(2)),h:Number(Math.abs(r.h).toFixed(2))},offset:{x:Number(Math.abs(_).toFixed(2)),y:Number(Math.abs(b).toFixed(2))},start:{x:Number(Math.abs(h.x).toFixed(2)),y:Number(Math.abs(h.y).toFixed(2))},id:t.id,keys:t.keys,rm:Number(i.toFixed(2))};return Ux(Q$)({time:Qw(new Date,"yyyy_MM_dd_HH_mm_ss"),version:n,gc:JSON.stringify(x)})}}Zf=new WeakMap;function tB(){return new Worker(""+new URL("gcodeWorker-36d5b1c7.js",import.meta.url).href)}class c2 extends Bu{constructor(n,r,i=!0){super(tB);de(this,"hook");de(this,"storage");de(this,"finishInOneTime",!0);this.hook=r,this.storage=n,this.finishInOneTime=i}addHeadPlaceholder(n){if(this.finishInOneTime)return;let r=this.hook.run(Fn.HEAD,n);r+=`0123456789abcdef

`,this.storage.add(r.replace(/[^\n]/g," "))}addCode(n,r){this.finishInOneTime&&this.storage.add(this.hook.run(n,r))}async build(n){var s,c;console.time("build motion code");const r=h=>{const{data:p}=h;p&&this.storage.add(p)};this.on("message",r);const{data:i,params:l}=n;({}).VITE_PAD,this.addHeadPlaceholder(l),this.emit("message",{data:this.hook.run(Fn.NOTE,l)}),this.addCode(Fn.HEAD,l);for(const h in i){const{list:p,params:g}=i[h];if(p.length===0)continue;const _=g.isVector,b=(s=g.blueCanvasList)!=null&&s.length?Kv(p,k=>Cs(g.blueCanvasList,k.id)):[],x=(c=g.redCanvasList)!=null&&c.length?Kv(p,k=>Cs(g.redCanvasList,k.id)):[];x.length>0&&await this.concatGCode(_,x,{...g,canvasLightSource:"red"},l),b.length>0&&await this.concatGCode(_,b,{...g,canvasLightSource:"blue"},l)}this.addCode(Fn.TAIL,l),this.off("message",r),this.destroy(),console.timeEnd("build motion code")}async concatGCode(n,r,i,l){const s=n?Fn.VECTOR_HEAD:Fn.BITMAP_HEAD;this.emit("message",{data:this.hook.run(s,{...i,...l})}),await this.request({type:"buildGcode",data:{list:r,params:{...i,...l}}});const c=n?Fn.VECTOR_TAIL:Fn.BITMAP_TAIL;this.emit("message",{data:this.hook.run(c,{...i,...l})+`
`})}async border(n){return new Promise(async(r,i)=>{const{data:l,params:s}=n;let c="";const h=p=>{const{data:g}=p;g&&(c+=g)};this.on("message",h),this.on("error",p=>{i(p)}),await this.request({type:"buildGcode",data:{list:[l],params:s}}),this.off("message",h),c=this.hook.head(s)+(s.isVector?this.hook.vectorHead(s):this.hook.bitmapHead(s))+c,c=c+(s.isVector?this.hook.vectorTail(s):this.hook.bitmapTail(s))+this.hook.tail(s),r(c),this.destroy()})}}const nB={[0]:{encode:(e,t,n)=>[{prefix:"X",num:e},{prefix:"Y",num:t}],decode:(e,t,n,r)=>{const{offset:i}=n;return r?{x:e,y:t}:{x:e-i.x,y:t-i.y}}},[1]:{encode:(e,t)=>[{prefix:"X",num:e*-1},{prefix:"Y",num:t*-1}],decode:(e,t,n,r)=>({x:e*-1,y:t*-1})},[2]:{encode:(e,t,n)=>{const{start:r}=n;return[{prefix:"U",num:-(e-r.x)},{prefix:"X",num:-t}]},decode:(e,t,n,r)=>{const{start:i}=n;return{x:e*-1+i.x,y:t*-1}}},[3]:{encode:(e,t,n)=>{const{start:r,rotateMultiple:i=1,enableRelative:l}=n;return[{prefix:"U",num:(e-(l?0:r.x))*i},{prefix:"X",num:t}]},decode:(e,t,n,r)=>{const{start:i,offset:l={x:0,y:0},rm:s=1}=n;return r?{x:e/s,y:t}:{x:e/s+i.x-l.x,y:t-l.y}}},[4]:{encode:(e,t,n)=>{const{rotateMultiple:r=1}=n;return[{prefix:"X",num:e},{prefix:"U",num:t*r}]},decode:(e,t,n,r)=>{const{offset:i={x:0,y:0},rm:l=1}=n;return r?{x:e,y:t/l}:{x:e-i.x,y:(t-i.y)/l}}},[5]:{encode:(e,t,n)=>{const{rotateMultiple:r=1}=n;return[{prefix:"X",num:e},{prefix:"U",num:t*r}]},decode:(e,t,n,r)=>{const{offset:i={x:0,y:0},origin:l={x:0,y:0},rm:s=1}=n;return r?{x:e,y:t/s}:{x:e-i.x,y:Math.abs(t/s)+i.y+l.y}}},[6]:{encode:(e,t,n)=>[{prefix:"U",num:-e},{prefix:"Y",num:t}],decode:(e,t,n,r)=>{const{offset:i={x:0,y:0}}=n;return r?{x:t*-1,y:e}:{x:t*-1-i.x,y:e-i.y}}},[7]:{encode:(e,t,n)=>{const{rotateMultiple:r=1,start:i,enableRelative:l}=n;return[{prefix:"X",num:e},{prefix:"U",num:(t-(l?0:i.y))*r}]},decode:(e,t,n,r)=>{const{offset:i={x:0,y:0},rm:l=1,start:s}=n;return r?{x:e,y:t/l}:{x:e-i.x,y:(t-i.y)/l+s.y}}}},rB=new RegExp("G(\\d*\\.?\\d+)"),aB=new RegExp("X(-?\\d*\\.?\\d+)"),iB=new RegExp("Y(-?\\d*\\.?\\d+)"),oB=new RegExp("U(-?\\d*\\.?\\d+)"),sB=new RegExp("F(\\d*\\.?\\d+)"),lB=new RegExp("S(-?\\d*\\.?\\d+)"),uB=e=>{const t=e.match(rB),n=e.match(aB),r=e.match(iB),i=e.match(oB),l=e.match(sB),s=e.match(lB);return{g:t?parseInt(t[1]):void 0,x:n?parseFloat(n[1]):void 0,y:r?parseFloat(r[1]):void 0,u:i?parseFloat(i[1]):void 0,f:l?parseFloat(l[1]):void 0,s:s?parseInt(s[1]):void 0}};var Do=(e=>(e[e.withNoPower=0]="withNoPower",e[e.withPower=1]="withPower",e[e.isDotMode=25]="isDotMode",e))(Do||{});function Vv(e){const t=e.toString(16);return t.length===1?"0"+t:t}function cB(e,t,n){return"#"+Vv(e)+Vv(t)+Vv(n)}const fB=(e,t=1e3)=>{let n=(1-e/t)*255;n>255&&(n=255),n<0&&(n=0);const r=Math.floor(n);return cB(r,r,r)},dB=(e,t)=>{let n="";const r=`
`;for(const i of e)if(i===r){t(n),n="";continue}else n+=i},hB="G91",pB="G90";var Jf,Xf,No,b0,k6,w0,C6,Qf,I1,S0,T6,x0,A6,E0,P6,k0,L6;class gB{constructor(){Xe(this,b0);Xe(this,w0);Xe(this,Qf);Xe(this,S0);Xe(this,x0);Xe(this,E0);Xe(this,k0);de(this,"lastX",0);de(this,"lastY",0);de(this,"lastPower",1e3);de(this,"isRelative",!1);Xe(this,Jf,0);Xe(this,Xf,0);de(this,"globalConfig",{id:0,ox:0,oy:0,size:{w:1e3,h:1e3},keys:["x","y"]});Xe(this,No,{powerFactor:1});de(this,"decode",(t,n,r,i)=>({x:t,y:n}))}clean(){this.lastX=0,this.lastY=0,this.lastPower=0,this.isRelative=!1,this.globalConfig={ox:0,oy:0,size:{w:1e3,h:1e3},id:0,keys:["x","y"]},bt(this,No,{powerFactor:1})}parseLine(t){return t.startsWith("#")?Pn(this,b0,k6).call(this,t):Pn(this,x0,A6).call(this,t)}parseCode(t,n){return dB(t,r=>{const i=this.parseLine(r);i&&n(i)})}}Jf=new WeakMap,Xf=new WeakMap,No=new WeakMap,b0=new WeakSet,k6=function(t){if(t.includes("gc")){const n=t.replace("# gc=",""),r=JSON.parse(n);return this.globalConfig={...this.globalConfig,...r},this.decode=nB[this.globalConfig.id].decode,{width:this.globalConfig.size.w,height:this.globalConfig.size.h,isComment:!0}}if(t.includes("blockConfig")){const n=t.replace("# blockConfig=","");bt(this,No,JSON.parse(n))}},w0=new WeakSet,C6=function(t){if(t.g===0)return 0;if(t.s){const n=t.s/ee(this,No).powerFactor;return this.lastPower=n,n}return t.s===0?(this.lastPower=0,0):this.lastPower},Qf=new WeakSet,I1=function(t){return isNaN(t)||ga(t)},S0=new WeakSet,T6=function(t,n){n===Do.withPower?bt(this,Xf,t):bt(this,Jf,t)},x0=new WeakSet,A6=function(t){if(t.startsWith(hB)){this.isRelative=!0;return}if(t.startsWith(pB)){this.isRelative=!1;return}const n=Vx(uB(t),ga);if([Do.withNoPower,Do.withPower,Do.isDotMode].includes(n.g)&&Object.keys(n).length>=2){const r=n.g,i=n.f?n.f:n.g===Do.withPower?ee(this,Xf):ee(this,Jf);let{x:l,y:s}=this.decode(n[this.globalConfig.keys[0]],n[this.globalConfig.keys[1]],this.globalConfig,this.isRelative);if(n.f&&Pn(this,S0,T6).call(this,i,r),l=Pn(this,Qf,I1).call(this,l)?this.lastX:this.isRelative?l+this.lastX:l,s=Pn(this,Qf,I1).call(this,s)?this.lastY:this.isRelative?s+this.lastY:s,l===this.lastX&&s===this.lastY)return;const c=Pn(this,w0,C6).call(this,n),h=Pn(this,k0,L6).call(this,{x:l,y:s,power:c,g:r,f:i});return this.lastX=l,this.lastY=s,h}},E0=new WeakSet,P6=function(t){return ee(this,No).isVector?ee(this,No).isCut?t===0?"#ffffff":"#000000":t===0?"#ffffff":"#747A7A":fB(t)},k0=new WeakSet,L6=function(t){const{x:n,y:r,power:i,g:l,f:s}=t,c=l===Do.isDotMode,h=Pn(this,E0,P6).call(this,i);return c?{x:n,y:r,color:h,g:Do,f:s}:{startPoint:{x:Math.max(this.lastX,0),y:Math.max(this.lastY,0)},endPoint:{x:Math.max(n,0),y:Math.max(r,0)},x:Math.max(n,0),y:Math.max(r,0),color:h,f:s,g:l}};class mB{constructor(t){de(this,"lines",[]);de(this,"_lastX",0);de(this,"_lastY",0);de(this,"_totalTime",0);de(this,"config",{accelX:3200,accelY:500,thresholdAngle:175});this.config=t}get totalTime(){this.calculateTime(this.lines),this.lines=[];const t=this._totalTime;return this._totalTime=0,t}isReset(t,n){const{g:r,f:i}=t,{g:l,f:s,angle:c=180}=n;return r!==l||i!==s||c<this.config.thresholdAngle}calculateAngle(t,n,r){const i=t.x-n.x,l=t.y-n.y,s=r.x-n.x,c=r.y-n.y,h=Math.abs((Math.atan2(l,i)-Math.atan2(c,s))*180/Math.PI);return h>180?360-h:h}addTime(t,n,r){const i=n*n/r;t>i?this._totalTime+=(t+n*n/r)/n:this._totalTime+=2*Math.sqrt(t/r)}calculateTime(t){let n=0,r=!1,i=0;for(const s in t){const{x:c,y:h,f:p}=this.lines[s],{x:g,y:_}=this.lines[Number(s)-1]||{},b=c-(g||this._lastX),x=h-(_||this._lastY);this._lastX=c,this._lastY=h,i=p,x>0&&(r=!0),n=n+Math.sqrt(b*b+x*x)}const l=r?this.config.accelY:this.config.accelX;this.addTime(n,i/60,l)}addLine(t){if(t.isComment)return;const n=t.f,r={...t,f:n};this.lines.push(r);const i=this.lines.length;if(i>=3){const l=this.calculateAngle(this.lines[i-3],this.lines[i-2],r);this.lines[i-1].angle=l,this.isReset(this.lines[i-2],r)&&(this.lines.pop(),this.calculateTime(this.lines),this.lines=[r])}}}class vB{constructor(t){de(this,"gcodeQ");de(this,"code","");de(this,"fileName","task/gcode.txt");de(this,"preview","task/preview.png");de(this,"calculateTime");de(this,"parser");this.parser=new gB,this.calculateTime=new mB(t),this.gcodeQ=b6(async n=>{await n()},1)}get writer(){var t,n;return(n=(t=window.MeApi)==null?void 0:t.fileHelper)==null?void 0:n.writeGCode.bind(window.MeApi.fileHelper)}get reader(){var t,n;return(n=(t=window.MeApi)==null?void 0:t.fileHelper)==null?void 0:n.readGcode.bind(window.MeApi.fileHelper)}get totalTime(){return this.calculateTime.totalTime}get writeWithHeadTail(){var t,n;return(n=(t=window.MeApi)==null?void 0:t.fileHelper)==null?void 0:n.writeWithHeadTail.bind(window.MeApi.fileHelper)}add(t){lr(t)&&this.gcodeQ.pushAsync(()=>{if(this.writer)return this.writer(this.fileName,`${t}
`);this.code+=`${t}
`})}async clean(){this.parser.clean(),this.code="",this.gcodeQ.length()>0&&await this.gcodeQ.kill(),this.writer&&await this.writer(this.fileName,"",!0)}async finish(){const t=this.writer;if(this.gcodeQ.length()&&await this.gcodeQ.drain(),t)return t(this.fileName,"",!0)}}class _B{constructor(t,n){de(this,"hook");de(this,"storage");de(this,"motionBuilder");this.hook=new eB(n),this.storage=new vB(t)}async motion(t,n=!0){await this.clean(),this.motionBuilder=new c2(this.storage,this.hook,n),await this.motionBuilder.build(t),await this.storage.finish(),this.motionBuilder=void 0}async place(t,n){return await this.clean(),this.storage.add(t),this.storage.add(n),this.storage.finish()}async border(t){return await new c2(this.storage,this.hook).border(t)}async gcode(t){if(t){const n=this.hook.run(Fn.HEAD,t),r=this.hook.run(Fn.TAIL,t);if(this.storage.writer){return{}.VITE_PAD,this.storage.fileName;return this.storage.writeWithHeadTail(n,this.storage.fileName,r)}else return n+`
`+this.storage.code+r+`
`}if(this.storage.writer){return{}.VITE_PAD,this.storage.fileName;return this.storage.fileName}else return this.storage.code}async gcodeHeadAndTail(t){if(t){const n=this.hook.run(Fn.HEAD,t),r=this.hook.run(Fn.TAIL,t);return{headCode:n,tailCode:r}}return{headCode:"",tailCode:""}}get gcodeFileName(){return this.storage.writer?this.storage.fileName:this.storage.code}get processTime(){return this.storage.totalTime}clean(){return this.storage.clean()}}const I6=(e,t)=>e.find(n=>n.params.groupKey===t);class yB{async resizeBitmapList(t){t.length;const n=new _P,r=new yP,i=(l,s)=>{const c=l*s/10;return c%1>.1?Math.ceil(c):Math.floor(c)};for(const l of t){const{source:s,extraPath:c,oWidth:h=0,oHeight:p=0,width:g,height:_,bitmapMode:b,dpi:x}=l;let{density:k}=l;x&&!k?(k=x/2.54,l.density=k):k=k??10,l.destWidth=i(g,k),l.destHeight=i(_,k);const T={id:l.id||"",bitmapMode:b||S_.Grayscale,imgData:s,extraPath:c,oWidth:h,oHeight:p,destWidth:l.destWidth,destHeight:l.destHeight};if(c&&c.length>1)l.extraPath=await r.resize(T);else{const P=await n.resize(T);l.source=P.source}}n.destroy()}async resize(t){const n=I6(t,$u.BITMAP_ENGRAVING);n&&await this.resizeBitmapList(n.list)}}const{LASER_PLANE:bB,LASER_CYLINDER:wB}=_u,Hv={[bB]:(e,t)=>{const n=Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2)),r=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2));return n-r},[wB]:(e,t)=>e.y-t.y},{KNIFE_CUT:SB,PRINTER_KNIFE_CUT:xB}=_u,{BITMAP:df,VECTOR:Op}=ha,{VECTOR_CUTTING:EB,VECTOR_ENGRAVING:kB,BITMAP_ENGRAVING:R6,KNIFE_CUTTING:CB,FILL_VECTOR_ENGRAVING:TB}=$u,AB=[{list:[],params:{isVector:!0,groupKey:CB}},{list:[],params:{isVector:!1,groupKey:R6}},{list:[],params:{optMode:u1.greedy,isVector:!0,groupKey:kB}},{list:[],params:{optMode:u1.treeLike,isVector:!0,groupKey:EB,isCut:!0}}],f2=.001;var xu,C0,O6;class PB{constructor(t){Xe(this,C0);Xe(this,xu,void 0);de(this,"elementCount");de(this,"boundary");bt(this,xu,t);const n={topLeftX:Number.MAX_SAFE_INTEGER,topLeftY:Number.MAX_SAFE_INTEGER,bottomRightX:Number.MIN_SAFE_INTEGER,bottomRightY:Number.MIN_SAFE_INTEGER};this.elementCount={vector:0,bitmap:0,total:0},this.boundary={[df]:n,[Op]:n}}get vectorSize(){const t=this.boundary[Op],{topLeftX:n,topLeftY:r,bottomRightX:i,bottomRightY:l}=t;return{x:n,y:r,width:i-n,height:l-r}}get bitmapSize(){const t=this.boundary[df],{topLeftX:n,topLeftY:r,bottomRightX:i,bottomRightY:l}=t;return{x:n,y:r,width:i-n,height:l-r}}get totalSize(){const t=this.boundary[Op],n=this.boundary[df],r=Math.min(t.topLeftX,n.topLeftX),i=Math.min(t.topLeftY,n.topLeftY);return{x:r,y:i,width:Math.max(t.bottomRightX,n.bottomRightX)-r,height:Math.max(t.bottomRightY,n.bottomRightY)-i}}calculateBoundary(t){const{x:n,y:r,width:i,height:l}=t,s=this.boundary[t.type];s.topLeftX=Math.min(n,s.topLeftX),s.topLeftY=Math.min(r,s.topLeftY),s.bottomRightX=Math.max(n+i,s.bottomRightX),s.bottomRightY=Math.max(r+l,s.bottomRightY)}getWalkBorderSize(t){const{modeWalkBorderType:n}=ee(this,xu);return!n||n[t]?this.totalSize:n[t].includes(ha.BITMAP)?n[t].includes(ha.VECTOR)?this.totalSize:this.bitmapSize:this.vectorSize}parse(t,n){const r=[],i=Tr(AB),l=n.mode;for(const s of t){const c=n.displays.get(s.id),h=c.processingType,p=c.data[h],g=p.materialType,_=p.parameter[g]??p.parameter[jw.CUSTOMIZE];if(c!=null&&c.processIgnore)continue;const b=s.type.toUpperCase()===df,x=!b&&s.isFill===!0;if(b||x?(s.type=df,this.elementCount.bitmap++):(s.type=Op,this.elementCount.vector++),(l===SB||l===xB)&&(x||b))continue;b&&(s.isFill=!1);const{power:k,cutPressure:T,speed:P,repeat:A,density:L,bitmapMode:F,enableBreakPoint:N=!1,bitmapScanMode:W,processingLightSource:te="blue",bitmapEngraveMode:G="normal",dotDuration:K=10,cuttingDrop:re=!1,powerMinMaxRange:H=[1,10],dpi:J}=_;this.calculateBoundary(s),this.elementCount.total++;const{x:ie,y:oe,width:le,height:$,oWidth:Y,oHeight:z,path:V,imgData:ue,extraPath:xe,isFill:ce,id:Ae}=s,De=Math.round(K/10)*10,ae={id:Ae,source:V||(ue??""),extraPath:xe,x:ie<f2?0:ie,y:oe<f2?0:oe,width:le,height:$,power:k??T,speed:P<=0?1:P,elementProcessType:h,samplingAccuracy:.1,repeat:A,oWidth:Y,oHeight:z,density:L,isFill:ce,bitmapMode:F,color:lA[h],isOneWayScan:W==="oneWay",dotDuration:De,useDotMode:G!=="normal",dpi:J};if(N&&n.mode===_u.LASER_CONVEYOR_FEEDER){const{breakPointPower:Q,breakPointCount:Re,breakPointSize:Me}=_;ae.breakPointPower=Q,ae.breakPointCount=Re,ae.breakPointSize=Me,ae.enableBreakPoint=N}if(ae.cuttingDrop=re,n.mode===_u.LASER_CONVEYOR_FEEDER&&(ae.repeat=1),ae.useDotMode&&ae.bitmapMode==="grayscale"){const Q=H.sort((Re,Me)=>Re-Me);ae.power=Q[1],ae.minPower=Q[0]}const we=i.find(Q=>{const Re=h===TB?R6:h;return Q.params.groupKey===Re});we&&(we.params[`${te}CanvasList`]?we.params[`${te}CanvasList`].push(ae.id):we.params[`${te}CanvasList`]=[ae.id],we.list.push(ae),r.push(s.id))}return Pn(this,C0,O6).call(this,i,l),{processElementIds:r,printData:i,totalSize:this.totalSize,walkBorderSize:this.getWalkBorderSize(n.mode),elementCount:this.elementCount}}}xu=new WeakMap,C0=new WeakSet,O6=function(t,n){const{orderRule:r={}}=ee(this,xu),i=I6(t,$u.BITMAP_ENGRAVING);if(!i)return;const l=r[n]?r[n]:Hv[n]?Hv[n]:Hv[_u.LASER_PLANE];i.list.sort(l)};var Vf={},LB={get exports(){return Vf},set exports(e){Vf=e}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var n,r="4.17.21",i=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",c="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",p=500,g="__lodash_placeholder__",_=1,b=2,x=4,k=1,T=2,P=1,A=2,L=4,F=8,N=16,W=32,te=64,G=128,K=256,re=512,H=30,J="...",ie=800,oe=16,le=1,$=2,Y=3,z=1/0,V=9007199254740991,ue=17976931348623157e292,xe=0/0,ce=4294967295,Ae=ce-1,De=ce>>>1,ae=[["ary",G],["bind",P],["bindKey",A],["curry",F],["curryRight",N],["flip",re],["partial",W],["partialRight",te],["rearg",K]],we="[object Arguments]",Q="[object Array]",Re="[object AsyncFunction]",Me="[object Boolean]",Ke="[object Date]",it="[object DOMException]",ht="[object Error]",un="[object Function]",jr="[object GeneratorFunction]",xt="[object Map]",vr="[object Number]",Go="[object Null]",Gr="[object Object]",Yu="[object Promise]",Ku="[object Proxy]",cn="[object RegExp]",Wr="[object Set]",Ki="[object String]",Wo="[object Symbol]",In="[object Undefined]",pi="[object WeakMap]",md="[object WeakSet]",va="[object ArrayBuffer]",Qn="[object DataView]",Zu="[object Float32Array]",Ju="[object Float64Array]",Js="[object Int8Array]",Xs="[object Int16Array]",Zi="[object Int32Array]",Qs="[object Uint8Array]",el="[object Uint8ClampedArray]",tl="[object Uint16Array]",qo="[object Uint32Array]",nl=/\b__p \+= '';/g,sg=/\b(__p \+=) '' \+/g,lg=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xu=/&(?:amp|lt|gt|quot|#39);/g,vd=/[&<>"']/g,rl=RegExp(Xu.source),aa=RegExp(vd.source),Qe=/<%-([\s\S]+?)%>/g,gt=/<%([\s\S]+?)%>/g,al=/<%=([\s\S]+?)%>/g,Yo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_d=/^\w*$/,yd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ia=/[\\^$.*+?()[\]{}|]/g,il=RegExp(ia.source),gi=/^\s+/,bd=/\s/,wd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ol=/\{\n\/\* \[wrapped with (.+)\] \*/,mi=/,? & /,Qu=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Sd=/[()=,{}\[\]\/\s]/,xd=/\\(\\)?/g,Ed=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ec=/\w*$/,ug=/^[-+]0x[0-9a-f]+$/i,cg=/^0b[01]+$/i,kd=/^\[object .+?Constructor\]$/,fg=/^0o[0-7]+$/i,sl=/^(?:0|[1-9]\d*)$/,tc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ko=/($^)/,Cd=/['\n\r\u2028\u2029\\]/g,Zo="\\ud800-\\udfff",qt="\\u0300-\\u036f",dg="\\ufe20-\\ufe2f",hg="\\u20d0-\\u20ff",Td=qt+dg+hg,nc="\\u2700-\\u27bf",Ad="a-z\\xdf-\\xf6\\xf8-\\xff",pg="\\xac\\xb1\\xd7\\xf7",gg="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",mg="\\u2000-\\u206f",vg=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pd="A-Z\\xc0-\\xd6\\xd8-\\xde",Ld="\\ufe0e\\ufe0f",Id=pg+gg+mg+vg,ll="['’]",Rd="["+Zo+"]",Od="["+Id+"]",ul="["+Td+"]",cl="\\d+",Dd="["+nc+"]",Md="["+Ad+"]",rc="[^"+Zo+Id+cl+nc+Ad+Pd+"]",fl="\\ud83c[\\udffb-\\udfff]",Nd="(?:"+ul+"|"+fl+")",Fd="[^"+Zo+"]",ac="(?:\\ud83c[\\udde6-\\uddff]){2}",ic="[\\ud800-\\udbff][\\udc00-\\udfff]",Ji="["+Pd+"]",oc="\\u200d",$d="(?:"+Md+"|"+rc+")",_g="(?:"+Ji+"|"+rc+")",Bd="(?:"+ll+"(?:d|ll|m|re|s|t|ve))?",Ud="(?:"+ll+"(?:D|LL|M|RE|S|T|VE))?",Vd=Nd+"?",Hd="["+Ld+"]?",yg="(?:"+oc+"(?:"+[Fd,ac,ic].join("|")+")"+Hd+Vd+")*",bg="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",wg="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",zd=Hd+Vd+yg,Sg="(?:"+[Dd,ac,ic].join("|")+")"+zd,xg="(?:"+[Fd+ul+"?",ul,ac,ic,Rd].join("|")+")",Eg=RegExp(ll,"g"),kg=RegExp(ul,"g"),Jo=RegExp(fl+"(?="+fl+")|"+xg+zd,"g"),Cg=RegExp([Ji+"?"+Md+"+"+Bd+"(?="+[Od,Ji,"$"].join("|")+")",_g+"+"+Ud+"(?="+[Od,Ji+$d,"$"].join("|")+")",Ji+"?"+$d+"+"+Bd,Ji+"+"+Ud,wg,bg,cl,Sg].join("|"),"g"),Tg=RegExp("["+oc+Zo+Td+Ld+"]"),Ag=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Pg=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],jd=-1,jt={};jt[Zu]=jt[Ju]=jt[Js]=jt[Xs]=jt[Zi]=jt[Qs]=jt[el]=jt[tl]=jt[qo]=!0,jt[we]=jt[Q]=jt[va]=jt[Me]=jt[Qn]=jt[Ke]=jt[ht]=jt[un]=jt[xt]=jt[vr]=jt[Gr]=jt[cn]=jt[Wr]=jt[Ki]=jt[pi]=!1;var Ut={};Ut[we]=Ut[Q]=Ut[va]=Ut[Qn]=Ut[Me]=Ut[Ke]=Ut[Zu]=Ut[Ju]=Ut[Js]=Ut[Xs]=Ut[Zi]=Ut[xt]=Ut[vr]=Ut[Gr]=Ut[cn]=Ut[Wr]=Ut[Ki]=Ut[Wo]=Ut[Qs]=Ut[el]=Ut[tl]=Ut[qo]=!0,Ut[ht]=Ut[un]=Ut[pi]=!1;var Lg={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Gd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ig={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Rg={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Og=parseFloat,Dg=parseInt,Xi=typeof ri=="object"&&ri&&ri.Object===Object&&ri,Wd=typeof self=="object"&&self&&self.Object===Object&&self,Rn=Xi||Wd||Function("return this")(),dl=t&&!t.nodeType&&t,vi=dl&&!0&&e&&!e.nodeType&&e,sc=vi&&vi.exports===dl,hl=sc&&Xi.process,Lr=function(){try{var Z=vi&&vi.require&&vi.require("util").types;return Z||hl&&hl.binding&&hl.binding("util")}catch{}}(),qd=Lr&&Lr.isArrayBuffer,Yd=Lr&&Lr.isDate,Kd=Lr&&Lr.isMap,Zd=Lr&&Lr.isRegExp,lc=Lr&&Lr.isSet,Jd=Lr&&Lr.isTypedArray;function _r(Z,fe,ne){switch(ne.length){case 0:return Z.call(fe);case 1:return Z.call(fe,ne[0]);case 2:return Z.call(fe,ne[0],ne[1]);case 3:return Z.call(fe,ne[0],ne[1],ne[2])}return Z.apply(fe,ne)}function _i(Z,fe,ne,Oe){for(var nt=-1,Et=Z==null?0:Z.length;++nt<Et;){var vn=Z[nt];fe(Oe,vn,ne(vn),Z)}return Oe}function ur(Z,fe){for(var ne=-1,Oe=Z==null?0:Z.length;++ne<Oe&&fe(Z[ne],ne,Z)!==!1;);return Z}function Xd(Z,fe){for(var ne=Z==null?0:Z.length;ne--&&fe(Z[ne],ne,Z)!==!1;);return Z}function Qd(Z,fe){for(var ne=-1,Oe=Z==null?0:Z.length;++ne<Oe;)if(!fe(Z[ne],ne,Z))return!1;return!0}function Ba(Z,fe){for(var ne=-1,Oe=Z==null?0:Z.length,nt=0,Et=[];++ne<Oe;){var vn=Z[ne];fe(vn,ne,Z)&&(Et[nt++]=vn)}return Et}function pl(Z,fe){var ne=Z==null?0:Z.length;return!!ne&&Qi(Z,fe,0)>-1}function uc(Z,fe,ne){for(var Oe=-1,nt=Z==null?0:Z.length;++Oe<nt;)if(ne(fe,Z[Oe]))return!0;return!1}function Vt(Z,fe){for(var ne=-1,Oe=Z==null?0:Z.length,nt=Array(Oe);++ne<Oe;)nt[ne]=fe(Z[ne],ne,Z);return nt}function Ua(Z,fe){for(var ne=-1,Oe=fe.length,nt=Z.length;++ne<Oe;)Z[nt+ne]=fe[ne];return Z}function cc(Z,fe,ne,Oe){var nt=-1,Et=Z==null?0:Z.length;for(Oe&&Et&&(ne=Z[++nt]);++nt<Et;)ne=fe(ne,Z[nt],nt,Z);return ne}function Mg(Z,fe,ne,Oe){var nt=Z==null?0:Z.length;for(Oe&&nt&&(ne=Z[--nt]);nt--;)ne=fe(ne,Z[nt],nt,Z);return ne}function fc(Z,fe){for(var ne=-1,Oe=Z==null?0:Z.length;++ne<Oe;)if(fe(Z[ne],ne,Z))return!0;return!1}var Ng=hc("length");function Fg(Z){return Z.split("")}function $g(Z){return Z.match(Qu)||[]}function dc(Z,fe,ne){var Oe;return ne(Z,function(nt,Et,vn){if(fe(nt,Et,vn))return Oe=Et,!1}),Oe}function gl(Z,fe,ne,Oe){for(var nt=Z.length,Et=ne+(Oe?1:-1);Oe?Et--:++Et<nt;)if(fe(Z[Et],Et,Z))return Et;return-1}function Qi(Z,fe,ne){return fe===fe?Yg(Z,fe,ne):gl(Z,eh,ne)}function Bg(Z,fe,ne,Oe){for(var nt=ne-1,Et=Z.length;++nt<Et;)if(Oe(Z[nt],fe))return nt;return-1}function eh(Z){return Z!==Z}function th(Z,fe){var ne=Z==null?0:Z.length;return ne?gc(Z,fe)/ne:xe}function hc(Z){return function(fe){return fe==null?n:fe[Z]}}function pc(Z){return function(fe){return Z==null?n:Z[fe]}}function nh(Z,fe,ne,Oe,nt){return nt(Z,function(Et,vn,Nt){ne=Oe?(Oe=!1,Et):fe(ne,Et,vn,Nt)}),ne}function rh(Z,fe){var ne=Z.length;for(Z.sort(fe);ne--;)Z[ne]=Z[ne].value;return Z}function gc(Z,fe){for(var ne,Oe=-1,nt=Z.length;++Oe<nt;){var Et=fe(Z[Oe]);Et!==n&&(ne=ne===n?Et:ne+Et)}return ne}function mc(Z,fe){for(var ne=-1,Oe=Array(Z);++ne<Z;)Oe[ne]=fe(ne);return Oe}function Ug(Z,fe){return Vt(fe,function(ne){return[ne,Z[ne]]})}function ah(Z){return Z&&Z.slice(0,uh(Z)+1).replace(gi,"")}function yr(Z){return function(fe){return Z(fe)}}function vc(Z,fe){return Vt(fe,function(ne){return Z[ne]})}function Xo(Z,fe){return Z.has(fe)}function ih(Z,fe){for(var ne=-1,Oe=Z.length;++ne<Oe&&Qi(fe,Z[ne],0)>-1;);return ne}function oh(Z,fe){for(var ne=Z.length;ne--&&Qi(fe,Z[ne],0)>-1;);return ne}function Vg(Z,fe){for(var ne=Z.length,Oe=0;ne--;)Z[ne]===fe&&++Oe;return Oe}var Hg=pc(Lg),zg=pc(Gd);function jg(Z){return"\\"+Rg[Z]}function sh(Z,fe){return Z==null?n:Z[fe]}function eo(Z){return Tg.test(Z)}function Gg(Z){return Ag.test(Z)}function Wg(Z){for(var fe,ne=[];!(fe=Z.next()).done;)ne.push(fe.value);return ne}function _c(Z){var fe=-1,ne=Array(Z.size);return Z.forEach(function(Oe,nt){ne[++fe]=[nt,Oe]}),ne}function lh(Z,fe){return function(ne){return Z(fe(ne))}}function Va(Z,fe){for(var ne=-1,Oe=Z.length,nt=0,Et=[];++ne<Oe;){var vn=Z[ne];(vn===fe||vn===g)&&(Z[ne]=g,Et[nt++]=ne)}return Et}function ml(Z){var fe=-1,ne=Array(Z.size);return Z.forEach(function(Oe){ne[++fe]=Oe}),ne}function qg(Z){var fe=-1,ne=Array(Z.size);return Z.forEach(function(Oe){ne[++fe]=[Oe,Oe]}),ne}function Yg(Z,fe,ne){for(var Oe=ne-1,nt=Z.length;++Oe<nt;)if(Z[Oe]===fe)return Oe;return-1}function Kg(Z,fe,ne){for(var Oe=ne+1;Oe--;)if(Z[Oe]===fe)return Oe;return Oe}function to(Z){return eo(Z)?Jg(Z):Ng(Z)}function qr(Z){return eo(Z)?Xg(Z):Fg(Z)}function uh(Z){for(var fe=Z.length;fe--&&bd.test(Z.charAt(fe)););return fe}var Zg=pc(Ig);function Jg(Z){for(var fe=Jo.lastIndex=0;Jo.test(Z);)++fe;return fe}function Xg(Z){return Z.match(Jo)||[]}function hn(Z){return Z.match(Cg)||[]}var Qg=function Z(fe){fe=fe==null?Rn:no.defaults(Rn.Object(),fe,no.pick(Rn,Pg));var ne=fe.Array,Oe=fe.Date,nt=fe.Error,Et=fe.Function,vn=fe.Math,Nt=fe.Object,yc=fe.RegExp,em=fe.String,Ir=fe.TypeError,vl=ne.prototype,tm=Et.prototype,ro=Nt.prototype,_l=fe["__core-js_shared__"],yl=tm.toString,Pt=ro.hasOwnProperty,nm=0,ch=function(){var u=/[^.]+$/.exec(_l&&_l.keys&&_l.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),bl=ro.toString,rm=yl.call(Nt),am=Rn._,im=yc("^"+yl.call(Pt).replace(ia,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wl=sc?fe.Buffer:n,Ha=fe.Symbol,Sl=fe.Uint8Array,fh=wl?wl.allocUnsafe:n,xl=lh(Nt.getPrototypeOf,Nt),dh=Nt.create,hh=ro.propertyIsEnumerable,El=vl.splice,ph=Ha?Ha.isConcatSpreadable:n,Qo=Ha?Ha.iterator:n,yi=Ha?Ha.toStringTag:n,kl=function(){try{var u=Er(Nt,"defineProperty");return u({},"",{}),u}catch{}}(),om=fe.clearTimeout!==Rn.clearTimeout&&fe.clearTimeout,sm=Oe&&Oe.now!==Rn.Date.now&&Oe.now,lm=fe.setTimeout!==Rn.setTimeout&&fe.setTimeout,Cl=vn.ceil,Tl=vn.floor,bc=Nt.getOwnPropertySymbols,um=wl?wl.isBuffer:n,gh=fe.isFinite,cm=vl.join,mh=lh(Nt.keys,Nt),_n=vn.max,Hn=vn.min,fm=Oe.now,dm=fe.parseInt,vh=vn.random,hm=vl.reverse,Al=Er(fe,"DataView"),es=Er(fe,"Map"),wc=Er(fe,"Promise"),ao=Er(fe,"Set"),ts=Er(fe,"WeakMap"),ns=Er(Nt,"create"),Pl=ts&&new ts,io={},_h=Wa(Al),pm=Wa(es),gm=Wa(wc),mm=Wa(ao),vm=Wa(ts),Ll=Ha?Ha.prototype:n,rs=Ll?Ll.valueOf:n,yh=Ll?Ll.toString:n;function D(u){if(gn(u)&&!st(u)&&!(u instanceof ct)){if(u instanceof Rr)return u;if(Pt.call(u,"__wrapped__"))return ir(u)}return new Rr(u)}var bi=function(){function u(){}return function(d){if(!fn(d))return{};if(dh)return dh(d);u.prototype=d;var y=new u;return u.prototype=n,y}}();function Il(){}function Rr(u,d){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=n}D.templateSettings={escape:Qe,evaluate:gt,interpolate:al,variable:"",imports:{_:D}},D.prototype=Il.prototype,D.prototype.constructor=D,Rr.prototype=bi(Il.prototype),Rr.prototype.constructor=Rr;function ct(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ce,this.__views__=[]}function _m(){var u=new ct(this.__wrapped__);return u.__actions__=Gn(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Gn(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Gn(this.__views__),u}function ym(){if(this.__filtered__){var u=new ct(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function bm(){var u=this.__wrapped__.value(),d=this.__dir__,y=st(u),E=d<0,I=y?u.length:0,M=Fr(0,I,this.__views__),B=M.start,q=M.end,X=q-B,pe=E?q:B-1,ge=this.__iteratees__,_e=ge.length,Ie=0,Ue=Hn(X,this.__takeCount__);if(!y||!E&&I==X&&Ue==X)return Dc(u,this.__actions__);var Ze=[];e:for(;X--&&Ie<Ue;){pe+=d;for(var ft=-1,Je=u[pe];++ft<_e;){var yt=ge[ft],St=yt.iteratee,Qr=yt.type,Cr=St(Je);if(Qr==$)Je=Cr;else if(!Cr){if(Qr==le)continue e;break e}}Ze[Ie++]=Je}return Ze}ct.prototype=bi(Il.prototype),ct.prototype.constructor=ct;function _a(u){var d=-1,y=u==null?0:u.length;for(this.clear();++d<y;){var E=u[d];this.set(E[0],E[1])}}function R(){this.__data__=ns?ns(null):{},this.size=0}function bh(u){var d=this.has(u)&&delete this.__data__[u];return this.size-=d?1:0,d}function kn(u){var d=this.__data__;if(ns){var y=d[u];return y===h?n:y}return Pt.call(d,u)?d[u]:n}function vt(u){var d=this.__data__;return ns?d[u]!==n:Pt.call(d,u)}function wh(u,d){var y=this.__data__;return this.size+=this.has(u)?0:1,y[u]=ns&&d===n?h:d,this}_a.prototype.clear=R,_a.prototype.delete=bh,_a.prototype.get=kn,_a.prototype.has=vt,_a.prototype.set=wh;function er(u){var d=-1,y=u==null?0:u.length;for(this.clear();++d<y;){var E=u[d];this.set(E[0],E[1])}}function Sh(){this.__data__=[],this.size=0}function xh(u){var d=this.__data__,y=uo(d,u);if(y<0)return!1;var E=d.length-1;return y==E?d.pop():El.call(d,y,1),--this.size,!0}function Eh(u){var d=this.__data__,y=uo(d,u);return y<0?n:d[y][1]}function wm(u){return uo(this.__data__,u)>-1}function Sm(u,d){var y=this.__data__,E=uo(y,u);return E<0?(++this.size,y.push([u,d])):y[E][1]=d,this}er.prototype.clear=Sh,er.prototype.delete=xh,er.prototype.get=Eh,er.prototype.has=wm,er.prototype.set=Sm;function br(u){var d=-1,y=u==null?0:u.length;for(this.clear();++d<y;){var E=u[d];this.set(E[0],E[1])}}function xm(){this.size=0,this.__data__={hash:new _a,map:new(es||er),string:new _a}}function oo(u){var d=xr(this,u).delete(u);return this.size-=d?1:0,d}function Em(u){return xr(this,u).get(u)}function km(u){return xr(this,u).has(u)}function Cm(u,d){var y=xr(this,u),E=y.size;return y.set(u,d),this.size+=y.size==E?0:1,this}br.prototype.clear=xm,br.prototype.delete=oo,br.prototype.get=Em,br.prototype.has=km,br.prototype.set=Cm;function wi(u){var d=-1,y=u==null?0:u.length;for(this.__data__=new br;++d<y;)this.add(u[d])}function Rl(u){return this.__data__.set(u,h),this}function Si(u){return this.__data__.has(u)}wi.prototype.add=wi.prototype.push=Rl,wi.prototype.has=Si;function Pe(u){var d=this.__data__=new er(u);this.size=d.size}function Sc(){this.__data__=new er,this.size=0}function kh(u){var d=this.__data__,y=d.delete(u);return this.size=d.size,y}function Ol(u){return this.__data__.get(u)}function xc(u){return this.__data__.has(u)}function as(u,d){var y=this.__data__;if(y instanceof er){var E=y.__data__;if(!es||E.length<i-1)return E.push([u,d]),this.size=++y.size,this;y=this.__data__=new br(E)}return y.set(u,d),this.size=y.size,this}Pe.prototype.clear=Sc,Pe.prototype.delete=kh,Pe.prototype.get=Ol,Pe.prototype.has=xc,Pe.prototype.set=as;function zn(u,d){var y=st(u),E=!y&&xs(u),I=!y&&!E&&Co(u),M=!y&&!E&&!I&&ru(u),B=y||E||I||M,q=B?mc(u.length,em):[],X=q.length;for(var pe in u)(d||Pt.call(u,pe))&&!(B&&(pe=="length"||I&&(pe=="offset"||pe=="parent")||M&&(pe=="buffer"||pe=="byteLength"||pe=="byteOffset")||Ca(pe,X)))&&q.push(pe);return q}function so(u){var d=u.length;return d?u[fo(0,d-1)]:n}function za(u,d){return ws(Gn(u),xi(d,0,u.length))}function Tt(u){return ws(Gn(u))}function lo(u,d,y){(y!==n&&!La(u[d],y)||y===n&&!(d in u))&&Yr(u,d,y)}function ya(u,d,y){var E=u[d];(!(Pt.call(u,d)&&La(E,y))||y===n&&!(d in u))&&Yr(u,d,y)}function uo(u,d){for(var y=u.length;y--;)if(La(u[y][0],d))return y;return-1}function Ec(u,d,y,E){return _t(u,function(I,M,B){d(E,I,y(I),B)}),E}function kc(u,d){return u&&Ot(d,Yn(d),u)}function Cc(u,d){return u&&Ot(d,Vr(d),u)}function Yr(u,d,y){d=="__proto__"&&kl?kl(u,d,{configurable:!0,enumerable:!0,value:y,writable:!0}):u[d]=y}function co(u,d){for(var y=-1,E=d.length,I=ne(E),M=u==null;++y<E;)I[y]=M?n:cv(u,d[y]);return I}function xi(u,d,y){return u===u&&(y!==n&&(u=u<=y?u:y),d!==n&&(u=u>=d?u:d)),u}function wr(u,d,y,E,I,M){var B,q=d&_,X=d&b,pe=d&x;if(y&&(B=I?y(u,E,I,M):y(u)),B!==n)return B;if(!fn(u))return u;var ge=st(u);if(ge){if(B=vs(u),!q)return Gn(u,B)}else{var _e=nn(u),Ie=_e==un||_e==jr;if(Co(u))return Nc(u,q);if(_e==Gr||_e==we||Ie&&!I){if(B=X||Ie?{}:rr(u),!q)return X?Bc(u,Cc(B,u)):go(u,kc(B,u))}else{if(!Ut[_e])return I?u:{};B=Kl(u,_e,q)}}M||(M=new Pe);var Ue=M.get(u);if(Ue)return Ue;M.set(u,B),hy(u)?u.forEach(function(Je){B.add(wr(Je,d,y,Je,u,M))}):fy(u)&&u.forEach(function(Je,yt){B.set(yt,wr(Je,d,y,yt,u,M))});var Ze=pe?X?Li:Gc:X?Vr:Yn,ft=ge?n:Ze(u);return ur(ft||u,function(Je,yt){ft&&(yt=Je,Je=u[yt]),ya(B,yt,wr(Je,d,y,yt,u,M))}),B}function me(u){var d=Yn(u);return function(y){return en(y,u,d)}}function en(u,d,y){var E=y.length;if(u==null)return!E;for(u=Nt(u);E--;){var I=y[E],M=d[I],B=u[I];if(B===n&&!(I in u)||!M(B))return!1}return!0}function Tc(u,d,y){if(typeof u!="function")throw new Ir(s);return bs(function(){u.apply(n,y)},d)}function is(u,d,y,E){var I=-1,M=pl,B=!0,q=u.length,X=[],pe=d.length;if(!q)return X;y&&(d=Vt(d,yr(y))),E?(M=uc,B=!1):d.length>=i&&(M=Xo,B=!1,d=new wi(d));e:for(;++I<q;){var ge=u[I],_e=y==null?ge:y(ge);if(ge=E||ge!==0?ge:0,B&&_e===_e){for(var Ie=pe;Ie--;)if(d[Ie]===_e)continue e;X.push(ge)}else M(d,_e,E)||X.push(ge)}return X}var _t=Uc(Or),Ch=Uc(ss,!0);function Ac(u,d){var y=!0;return _t(u,function(E,I,M){return y=!!d(E,I,M),y}),y}function Ei(u,d,y){for(var E=-1,I=u.length;++E<I;){var M=u[E],B=d(M);if(B!=null&&(q===n?B===B&&!Xr(B):y(B,q)))var q=B,X=M}return X}function Th(u,d,y,E){var I=u.length;for(y=lt(y),y<0&&(y=-y>I?0:I+y),E=E===n||E>I?I:lt(E),E<0&&(E+=I),E=y>E?0:gy(E);y<E;)u[y++]=d;return u}function ba(u,d){var y=[];return _t(u,function(E,I,M){d(E,I,M)&&y.push(E)}),y}function On(u,d,y,E,I){var M=-1,B=u.length;for(y||(y=jm),I||(I=[]);++M<B;){var q=u[M];d>0&&y(q)?d>1?On(q,d-1,y,E,I):Ua(I,q):E||(I[I.length]=q)}return I}var os=Nh(),Dn=Nh(!0);function Or(u,d){return u&&os(u,d,Yn)}function ss(u,d){return u&&Dn(u,d,Yn)}function tr(u,d){return Ba(d,function(y){return Ri(u[y])})}function oa(u,d){d=xa(d,u);for(var y=0,E=d.length;u!=null&&y<E;)u=u[la(d[y++])];return y&&y==E?u:n}function Dl(u,d,y){var E=d(u);return st(u)?E:Ua(E,y(u))}function nr(u){return u==null?u===n?In:Go:yi&&yi in Nt(u)?Wn(u):Kh(u)}function Cn(u,d){return u>d}function Tm(u,d){return u!=null&&Pt.call(u,d)}function Am(u,d){return u!=null&&d in Nt(u)}function Pm(u,d,y){return u>=Hn(d,y)&&u<_n(d,y)}function Ml(u,d,y){for(var E=y?uc:pl,I=u[0].length,M=u.length,B=M,q=ne(M),X=1/0,pe=[];B--;){var ge=u[B];B&&d&&(ge=Vt(ge,yr(d))),X=Hn(ge.length,X),q[B]=!y&&(d||I>=120&&ge.length>=120)?new wi(B&&ge):n}ge=u[0];var _e=-1,Ie=q[0];e:for(;++_e<I&&pe.length<X;){var Ue=ge[_e],Ze=d?d(Ue):Ue;if(Ue=y||Ue!==0?Ue:0,!(Ie?Xo(Ie,Ze):E(pe,Ze,y))){for(B=M;--B;){var ft=q[B];if(!(ft?Xo(ft,Ze):E(u[B],Ze,y)))continue e}Ie&&Ie.push(Ze),pe.push(Ue)}}return pe}function Lm(u,d,y,E){return Or(u,function(I,M,B){d(E,y(I),M,B)}),E}function Dr(u,d,y){d=xa(d,u),u=ys(u,d);var E=u==null?u:u[la(Lt(d))];return E==null?n:_r(E,u,y)}function Mr(u){return gn(u)&&nr(u)==we}function Im(u){return gn(u)&&nr(u)==va}function Rm(u){return gn(u)&&nr(u)==Ke}function ls(u,d,y,E,I){return u===d?!0:u==null||d==null||!gn(u)&&!gn(d)?u!==u&&d!==d:Ah(u,d,y,E,ls,I)}function Ah(u,d,y,E,I,M){var B=st(u),q=st(d),X=B?Q:nn(u),pe=q?Q:nn(d);X=X==we?Gr:X,pe=pe==we?Gr:pe;var ge=X==Gr,_e=pe==Gr,Ie=X==pe;if(Ie&&Co(u)){if(!Co(d))return!1;B=!0,ge=!1}if(Ie&&!ge)return M||(M=new Pe),B||ru(u)?Ga(u,d,y,E,I,M):Gh(u,d,X,y,E,I,M);if(!(y&k)){var Ue=ge&&Pt.call(u,"__wrapped__"),Ze=_e&&Pt.call(d,"__wrapped__");if(Ue||Ze){var ft=Ue?u.value():u,Je=Ze?d.value():d;return M||(M=new Pe),I(ft,Je,y,E,M)}}return Ie?(M||(M=new Pe),Hm(u,d,y,E,I,M)):!1}function Om(u){return gn(u)&&nn(u)==xt}function Nl(u,d,y,E){var I=y.length,M=I,B=!E;if(u==null)return!M;for(u=Nt(u);I--;){var q=y[I];if(B&&q[2]?q[1]!==u[q[0]]:!(q[0]in u))return!1}for(;++I<M;){q=y[I];var X=q[0],pe=u[X],ge=q[1];if(B&&q[2]){if(pe===n&&!(X in u))return!1}else{var _e=new Pe;if(E)var Ie=E(pe,ge,X,u,d,_e);if(!(Ie===n?ls(ge,pe,k|T,E,_e):Ie))return!1}}return!0}function Ph(u){if(!fn(u)||Jl(u))return!1;var d=Ri(u)?im:kd;return d.test(Wa(u))}function Lh(u){return gn(u)&&nr(u)==cn}function Dm(u){return gn(u)&&nn(u)==Wr}function Ih(u){return gn(u)&&yp(u.length)&&!!jt[nr(u)]}function Pc(u){return typeof u=="function"?u:u==null?Hr:typeof u=="object"?st(u)?Ic(u[0],u[1]):Lc(u):Cy(u)}function us(u){if(!wo(u))return mh(u);var d=[];for(var y in Nt(u))Pt.call(u,y)&&y!="constructor"&&d.push(y);return d}function Rh(u){if(!fn(u))return Ym(u);var d=wo(u),y=[];for(var E in u)E=="constructor"&&(d||!Pt.call(u,E))||y.push(E);return y}function ki(u,d){return u<d}function Oh(u,d){var y=-1,E=Ur(u)?ne(u.length):[];return _t(u,function(I,M,B){E[++y]=d(I,M,B)}),E}function Lc(u){var d=Ht(u);return d.length==1&&d[0][2]?qh(d[0][0],d[0][1]):function(y){return y===u||Nl(y,u,d)}}function Ic(u,d){return Zl(u)&&Wh(d)?qh(la(u),d):function(y){var E=cv(y,u);return E===n&&E===d?fv(y,u):ls(d,E,k|T)}}function cr(u,d,y,E,I){u!==d&&os(d,function(M,B){if(I||(I=new Pe),fn(M))Fl(u,d,B,y,cr,E,I);else{var q=E?E(Xl(u,B),M,B+"",u,d,I):n;q===n&&(q=M),lo(u,B,q)}},Vr)}function Fl(u,d,y,E,I,M,B){var q=Xl(u,y),X=Xl(d,y),pe=B.get(X);if(pe){lo(u,y,pe);return}var ge=M?M(q,X,y+"",u,d,B):n,_e=ge===n;if(_e){var Ie=st(X),Ue=!Ie&&Co(X),Ze=!Ie&&!Ue&&ru(X);ge=X,Ie||Ue||Ze?st(q)?ge=q:yn(q)?ge=Gn(q):Ue?(_e=!1,ge=Nc(X,!0)):Ze?(_e=!1,ge=$c(X,!0)):ge=[]:tf(X)||xs(X)?(ge=q,xs(q)?ge=my(q):(!fn(q)||Ri(q))&&(ge=rr(X))):_e=!1}_e&&(B.set(X,ge),I(ge,X,E,M,B),B.delete(X)),lo(u,y,ge)}function cs(u,d){var y=u.length;if(y)return d+=d<0?y:0,Ca(d,y)?u[d]:n}function on(u,d,y){d.length?d=Vt(d,function(M){return st(M)?function(B){return oa(B,M.length===1?M[0]:M)}:M}):d=[Hr];var E=-1;d=Vt(d,yr(Fe()));var I=Oh(u,function(M,B,q){var X=Vt(d,function(pe){return pe(M)});return{criteria:X,index:++E,value:M}});return rh(I,function(M,B){return Pi(M,B,y)})}function fs(u,d){return $l(u,d,function(y,E){return fv(u,E)})}function $l(u,d,y){for(var E=-1,I=d.length,M={};++E<I;){var B=d[E],q=oa(u,B);y(q,B)&&Ai(M,xa(B,u),q)}return M}function fr(u){return function(d){return oa(d,u)}}function Ci(u,d,y,E){var I=E?Bg:Qi,M=-1,B=d.length,q=u;for(u===d&&(d=Gn(d)),y&&(q=Vt(u,yr(y)));++M<B;)for(var X=0,pe=d[M],ge=y?y(pe):pe;(X=I(q,ge,X,E))>-1;)q!==u&&El.call(q,X,1),El.call(u,X,1);return u}function Ti(u,d){for(var y=u?d.length:0,E=y-1;y--;){var I=d[y];if(y==E||I!==M){var M=I;Ca(I)?El.call(u,I,1):Vl(u,I)}}return u}function fo(u,d){return u+Tl(vh()*(d-u+1))}function Mn(u,d,y,E){for(var I=-1,M=_n(Cl((d-u)/(y||1)),0),B=ne(M);M--;)B[E?M:++I]=u,u+=y;return B}function wa(u,d){var y="";if(!u||d<1||d>V)return y;do d%2&&(y+=u),d=Tl(d/2),d&&(u+=u);while(d);return y}function ot(u,d){return Ql(Zh(u,d,Hr),u+"")}function dr(u){return so(au(u))}function hr(u,d){var y=au(u);return ws(y,xi(d,0,y.length))}function Ai(u,d,y,E){if(!fn(u))return u;d=xa(d,u);for(var I=-1,M=d.length,B=M-1,q=u;q!=null&&++I<M;){var X=la(d[I]),pe=y;if(X==="__proto__"||X==="constructor"||X==="prototype")return u;if(I!=B){var ge=q[X];pe=E?E(ge,X,q):n,pe===n&&(pe=fn(ge)?ge:Ca(d[I+1])?[]:{})}ya(q,X,pe),q=q[X]}return u}var Bl=Pl?function(u,d){return Pl.set(u,d),u}:Hr,ds=kl?function(u,d){return kl(u,"toString",{configurable:!0,enumerable:!1,value:hv(d),writable:!0})}:Hr;function Mm(u){return ws(au(u))}function Nr(u,d,y){var E=-1,I=u.length;d<0&&(d=-d>I?0:I+d),y=y>I?I:y,y<0&&(y+=I),I=d>y?0:y-d>>>0,d>>>=0;for(var M=ne(I);++E<I;)M[E]=u[E+d];return M}function Nm(u,d){var y;return _t(u,function(E,I,M){return y=d(E,I,M),!y}),!!y}function Ul(u,d,y){var E=0,I=u==null?E:u.length;if(typeof d=="number"&&d===d&&I<=De){for(;E<I;){var M=E+I>>>1,B=u[M];B!==null&&!Xr(B)&&(y?B<=d:B<d)?E=M+1:I=M}return I}return Rc(u,d,Hr,y)}function Rc(u,d,y,E){var I=0,M=u==null?0:u.length;if(M===0)return 0;d=y(d);for(var B=d!==d,q=d===null,X=Xr(d),pe=d===n;I<M;){var ge=Tl((I+M)/2),_e=y(u[ge]),Ie=_e!==n,Ue=_e===null,Ze=_e===_e,ft=Xr(_e);if(B)var Je=E||Ze;else pe?Je=Ze&&(E||Ie):q?Je=Ze&&Ie&&(E||!Ue):X?Je=Ze&&Ie&&!Ue&&(E||!ft):Ue||ft?Je=!1:Je=E?_e<=d:_e<d;Je?I=ge+1:M=ge}return Hn(M,Ae)}function Dh(u,d){for(var y=-1,E=u.length,I=0,M=[];++y<E;){var B=u[y],q=d?d(B):B;if(!y||!La(q,X)){var X=q;M[I++]=B===0?0:B}}return M}function Kr(u){return typeof u=="number"?u:Xr(u)?xe:+u}function jn(u){if(typeof u=="string")return u;if(st(u))return Vt(u,jn)+"";if(Xr(u))return yh?yh.call(u):"";var d=u+"";return d=="0"&&1/u==-z?"-0":d}function Sa(u,d,y){var E=-1,I=pl,M=u.length,B=!0,q=[],X=q;if(y)B=!1,I=uc;else if(M>=i){var pe=d?null:Um(u);if(pe)return ml(pe);B=!1,I=Xo,X=new wi}else X=d?[]:q;e:for(;++E<M;){var ge=u[E],_e=d?d(ge):ge;if(ge=y||ge!==0?ge:0,B&&_e===_e){for(var Ie=X.length;Ie--;)if(X[Ie]===_e)continue e;d&&X.push(_e),q.push(ge)}else I(X,_e,y)||(X!==q&&X.push(_e),q.push(ge))}return q}function Vl(u,d){return d=xa(d,u),u=ys(u,d),u==null||delete u[la(Lt(d))]}function Oc(u,d,y,E){return Ai(u,d,y(oa(u,d)),E)}function Hl(u,d,y,E){for(var I=u.length,M=E?I:-1;(E?M--:++M<I)&&d(u[M],M,u););return y?Nr(u,E?0:M,E?M+1:I):Nr(u,E?M+1:0,E?I:M)}function Dc(u,d){var y=u;return y instanceof ct&&(y=y.value()),cc(d,function(E,I){return I.func.apply(I.thisArg,Ua([E],I.args))},y)}function zl(u,d,y){var E=u.length;if(E<2)return E?Sa(u[0]):[];for(var I=-1,M=ne(E);++I<E;)for(var B=u[I],q=-1;++q<E;)q!=I&&(M[I]=is(M[I]||B,u[q],d,y));return Sa(On(M,1),d,y)}function Zr(u,d,y){for(var E=-1,I=u.length,M=d.length,B={};++E<I;){var q=E<M?d[E]:n;y(B,u[E],q)}return B}function ho(u){return yn(u)?u:[]}function jl(u){return typeof u=="function"?u:Hr}function xa(u,d){return st(u)?u:Zl(u,d)?[u]:ep(Mt(u))}var Mh=ot;function ja(u,d,y){var E=u.length;return y=y===n?E:y,!d&&y>=E?u:Nr(u,d,y)}var Mc=om||function(u){return Rn.clearTimeout(u)};function Nc(u,d){if(d)return u.slice();var y=u.length,E=fh?fh(y):new u.constructor(y);return u.copy(E),E}function Fc(u){var d=new u.constructor(u.byteLength);return new Sl(d).set(new Sl(u)),d}function Sr(u,d){var y=d?Fc(u.buffer):u.buffer;return new u.constructor(y,u.byteOffset,u.byteLength)}function Fm(u){var d=new u.constructor(u.source,ec.exec(u));return d.lastIndex=u.lastIndex,d}function $m(u){return rs?Nt(rs.call(u)):{}}function $c(u,d){var y=d?Fc(u.buffer):u.buffer;return new u.constructor(y,u.byteOffset,u.length)}function Gl(u,d){if(u!==d){var y=u!==n,E=u===null,I=u===u,M=Xr(u),B=d!==n,q=d===null,X=d===d,pe=Xr(d);if(!q&&!pe&&!M&&u>d||M&&B&&X&&!q&&!pe||E&&B&&X||!y&&X||!I)return 1;if(!E&&!M&&!pe&&u<d||pe&&y&&I&&!E&&!M||q&&y&&I||!B&&I||!X)return-1}return 0}function Pi(u,d,y){for(var E=-1,I=u.criteria,M=d.criteria,B=I.length,q=y.length;++E<B;){var X=Gl(I[E],M[E]);if(X){if(E>=q)return X;var pe=y[E];return X*(pe=="desc"?-1:1)}}return u.index-d.index}function tn(u,d,y,E){for(var I=-1,M=u.length,B=y.length,q=-1,X=d.length,pe=_n(M-B,0),ge=ne(X+pe),_e=!E;++q<X;)ge[q]=d[q];for(;++I<B;)(_e||I<M)&&(ge[y[I]]=u[I]);for(;pe--;)ge[q++]=u[I++];return ge}function po(u,d,y,E){for(var I=-1,M=u.length,B=-1,q=y.length,X=-1,pe=d.length,ge=_n(M-q,0),_e=ne(ge+pe),Ie=!E;++I<ge;)_e[I]=u[I];for(var Ue=I;++X<pe;)_e[Ue+X]=d[X];for(;++B<q;)(Ie||I<M)&&(_e[Ue+y[B]]=u[I++]);return _e}function Gn(u,d){var y=-1,E=u.length;for(d||(d=ne(E));++y<E;)d[y]=u[y];return d}function Ot(u,d,y,E){var I=!y;y||(y={});for(var M=-1,B=d.length;++M<B;){var q=d[M],X=E?E(y[q],u[q],q,y,u):n;X===n&&(X=u[q]),I?Yr(y,q,X):ya(y,q,X)}return y}function go(u,d){return Ot(u,ka(u),d)}function Bc(u,d){return Ot(u,Nn(u),d)}function mo(u,d){return function(y,E){var I=st(y)?_i:Ec,M=d?d():{};return I(y,u,Fe(E,2),M)}}function vo(u){return ot(function(d,y){var E=-1,I=y.length,M=I>1?y[I-1]:n,B=I>2?y[2]:n;for(M=u.length>3&&typeof M=="function"?(I--,M):n,B&&ar(y[0],y[1],B)&&(M=I<3?n:M,I=1),d=Nt(d);++E<I;){var q=y[E];q&&u(d,q,E,M)}return d})}function Uc(u,d){return function(y,E){if(y==null)return y;if(!Ur(y))return u(y,E);for(var I=y.length,M=d?I:-1,B=Nt(y);(d?M--:++M<I)&&E(B[M],M,B)!==!1;);return y}}function Nh(u){return function(d,y,E){for(var I=-1,M=Nt(d),B=E(d),q=B.length;q--;){var X=B[u?q:++I];if(y(M[X],X,M)===!1)break}return d}}function Vc(u,d,y){var E=d&P,I=hs(u);function M(){var B=this&&this!==Rn&&this instanceof M?I:u;return B.apply(E?y:this,arguments)}return M}function Fh(u){return function(d){d=Mt(d);var y=eo(d)?qr(d):n,E=y?y[0]:d.charAt(0),I=y?ja(y,1).join(""):d.slice(1);return E[u]()+I}}function _o(u){return function(d){return cc(Ey(xy(d).replace(Eg,"")),u,"")}}function hs(u){return function(){var d=arguments;switch(d.length){case 0:return new u;case 1:return new u(d[0]);case 2:return new u(d[0],d[1]);case 3:return new u(d[0],d[1],d[2]);case 4:return new u(d[0],d[1],d[2],d[3]);case 5:return new u(d[0],d[1],d[2],d[3],d[4]);case 6:return new u(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new u(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var y=bi(u.prototype),E=u.apply(y,d);return fn(E)?E:y}}function Bm(u,d,y){var E=hs(u);function I(){for(var M=arguments.length,B=ne(M),q=M,X=bo(I);q--;)B[q]=arguments[q];var pe=M<3&&B[0]!==X&&B[M-1]!==X?[]:Va(B,X);if(M-=pe.length,M<y)return Vh(u,d,Wl,I.placeholder,n,B,pe,n,n,y-M);var ge=this&&this!==Rn&&this instanceof I?E:u;return _r(ge,this,B)}return I}function yo(u){return function(d,y,E){var I=Nt(d);if(!Ur(d)){var M=Fe(y,3);d=Yn(d),y=function(q){return M(I[q],q,I)}}var B=u(d,y,E);return B>-1?I[M?d[B]:B]:n}}function $h(u){return Ea(function(d){var y=d.length,E=y,I=Rr.prototype.thru;for(u&&d.reverse();E--;){var M=d[E];if(typeof M!="function")throw new Ir(s);if(I&&!B&&Yl(M)=="wrapper")var B=new Rr([],!0)}for(E=B?E:y;++E<y;){M=d[E];var q=Yl(M),X=q=="wrapper"?Wc(M):n;X&&_s(X[0])&&X[1]==(G|F|W|K)&&!X[4].length&&X[9]==1?B=B[Yl(X[0])].apply(B,X[3]):B=M.length==1&&_s(M)?B[q]():B.thru(M)}return function(){var pe=arguments,ge=pe[0];if(B&&pe.length==1&&st(ge))return B.plant(ge).value();for(var _e=0,Ie=y?d[_e].apply(this,pe):ge;++_e<y;)Ie=d[_e].call(this,Ie);return Ie}})}function Wl(u,d,y,E,I,M,B,q,X,pe){var ge=d&G,_e=d&P,Ie=d&A,Ue=d&(F|N),Ze=d&re,ft=Ie?n:hs(u);function Je(){for(var yt=arguments.length,St=ne(yt),Qr=yt;Qr--;)St[Qr]=arguments[Qr];if(Ue)var Cr=bo(Je),ea=Vg(St,Cr);if(E&&(St=tn(St,E,I,Ue)),M&&(St=po(St,M,B,Ue)),yt-=ea,Ue&&yt<pe){var bn=Va(St,Cr);return Vh(u,d,Wl,Je.placeholder,y,St,bn,q,X,pe-yt)}var Ia=_e?y:this,Di=Ie?Ia[u]:u;return yt=St.length,q?St=Km(St,q):Ze&&yt>1&&St.reverse(),ge&&X<yt&&(St.length=X),this&&this!==Rn&&this instanceof Je&&(Di=ft||hs(Di)),Di.apply(Ia,St)}return Je}function Hc(u,d){return function(y,E){return Lm(y,u,d(E),{})}}function ps(u,d){return function(y,E){var I;if(y===n&&E===n)return d;if(y!==n&&(I=y),E!==n){if(I===n)return E;typeof y=="string"||typeof E=="string"?(y=jn(y),E=jn(E)):(y=Kr(y),E=Kr(E)),I=u(y,E)}return I}}function zc(u){return Ea(function(d){return d=Vt(d,yr(Fe())),ot(function(y){var E=this;return u(d,function(I){return _r(I,E,y)})})})}function gs(u,d){d=d===n?" ":jn(d);var y=d.length;if(y<2)return y?wa(d,u):d;var E=wa(d,Cl(u/to(d)));return eo(d)?ja(qr(E),0,u).join(""):E.slice(0,u)}function Bh(u,d,y,E){var I=d&P,M=hs(u);function B(){for(var q=-1,X=arguments.length,pe=-1,ge=E.length,_e=ne(ge+X),Ie=this&&this!==Rn&&this instanceof B?M:u;++pe<ge;)_e[pe]=E[pe];for(;X--;)_e[pe++]=arguments[++q];return _r(Ie,I?y:this,_e)}return B}function Uh(u){return function(d,y,E){return E&&typeof E!="number"&&ar(d,y,E)&&(y=E=n),d=Oi(d),y===n?(y=d,d=0):y=Oi(y),E=E===n?d<y?1:-1:Oi(E),Mn(d,y,E,u)}}function ql(u){return function(d,y){return typeof d=="string"&&typeof y=="string"||(d=ca(d),y=ca(y)),u(d,y)}}function Vh(u,d,y,E,I,M,B,q,X,pe){var ge=d&F,_e=ge?B:n,Ie=ge?n:B,Ue=ge?M:n,Ze=ge?n:M;d|=ge?W:te,d&=~(ge?te:W),d&L||(d&=~(P|A));var ft=[u,d,I,Ue,_e,Ze,Ie,q,X,pe],Je=y.apply(n,ft);return _s(u)&&Jh(Je,ft),Je.placeholder=E,Xh(Je,u,d)}function jc(u){var d=vn[u];return function(y,E){if(y=ca(y),E=E==null?0:Hn(lt(E),292),E&&gh(y)){var I=(Mt(y)+"e").split("e"),M=d(I[0]+"e"+(+I[1]+E));return I=(Mt(M)+"e").split("e"),+(I[0]+"e"+(+I[1]-E))}return d(y)}}var Um=ao&&1/ml(new ao([,-0]))[1]==z?function(u){return new ao(u)}:mv;function Hh(u){return function(d){var y=nn(d);return y==xt?_c(d):y==Wr?qg(d):Ug(d,u(d))}}function sa(u,d,y,E,I,M,B,q){var X=d&A;if(!X&&typeof u!="function")throw new Ir(s);var pe=E?E.length:0;if(pe||(d&=~(W|te),E=I=n),B=B===n?B:_n(lt(B),0),q=q===n?q:lt(q),pe-=I?I.length:0,d&te){var ge=E,_e=I;E=I=n}var Ie=X?n:Wc(u),Ue=[u,d,y,E,I,ge,_e,M,B,q];if(Ie&&qm(Ue,Ie),u=Ue[0],d=Ue[1],y=Ue[2],E=Ue[3],I=Ue[4],q=Ue[9]=Ue[9]===n?X?0:u.length:_n(Ue[9]-pe,0),!q&&d&(F|N)&&(d&=~(F|N)),!d||d==P)var Ze=Vc(u,d,y);else d==F||d==N?Ze=Bm(u,d,q):(d==W||d==(P|W))&&!I.length?Ze=Bh(u,d,y,E):Ze=Wl.apply(n,Ue);var ft=Ie?Bl:Jh;return Xh(ft(Ze,Ue),u,d)}function zh(u,d,y,E){return u===n||La(u,ro[y])&&!Pt.call(E,y)?d:u}function jh(u,d,y,E,I,M){return fn(u)&&fn(d)&&(M.set(d,u),cr(u,d,n,jh,M),M.delete(d)),u}function Vm(u){return tf(u)?n:u}function Ga(u,d,y,E,I,M){var B=y&k,q=u.length,X=d.length;if(q!=X&&!(B&&X>q))return!1;var pe=M.get(u),ge=M.get(d);if(pe&&ge)return pe==d&&ge==u;var _e=-1,Ie=!0,Ue=y&T?new wi:n;for(M.set(u,d),M.set(d,u);++_e<q;){var Ze=u[_e],ft=d[_e];if(E)var Je=B?E(ft,Ze,_e,d,u,M):E(Ze,ft,_e,u,d,M);if(Je!==n){if(Je)continue;Ie=!1;break}if(Ue){if(!fc(d,function(yt,St){if(!Xo(Ue,St)&&(Ze===yt||I(Ze,yt,y,E,M)))return Ue.push(St)})){Ie=!1;break}}else if(!(Ze===ft||I(Ze,ft,y,E,M))){Ie=!1;break}}return M.delete(u),M.delete(d),Ie}function Gh(u,d,y,E,I,M,B){switch(y){case Qn:if(u.byteLength!=d.byteLength||u.byteOffset!=d.byteOffset)return!1;u=u.buffer,d=d.buffer;case va:return!(u.byteLength!=d.byteLength||!M(new Sl(u),new Sl(d)));case Me:case Ke:case vr:return La(+u,+d);case ht:return u.name==d.name&&u.message==d.message;case cn:case Ki:return u==d+"";case xt:var q=_c;case Wr:var X=E&k;if(q||(q=ml),u.size!=d.size&&!X)return!1;var pe=B.get(u);if(pe)return pe==d;E|=T,B.set(u,d);var ge=Ga(q(u),q(d),E,I,M,B);return B.delete(u),ge;case Wo:if(rs)return rs.call(u)==rs.call(d)}return!1}function Hm(u,d,y,E,I,M){var B=y&k,q=Gc(u),X=q.length,pe=Gc(d),ge=pe.length;if(X!=ge&&!B)return!1;for(var _e=X;_e--;){var Ie=q[_e];if(!(B?Ie in d:Pt.call(d,Ie)))return!1}var Ue=M.get(u),Ze=M.get(d);if(Ue&&Ze)return Ue==d&&Ze==u;var ft=!0;M.set(u,d),M.set(d,u);for(var Je=B;++_e<X;){Ie=q[_e];var yt=u[Ie],St=d[Ie];if(E)var Qr=B?E(St,yt,Ie,d,u,M):E(yt,St,Ie,u,d,M);if(!(Qr===n?yt===St||I(yt,St,y,E,M):Qr)){ft=!1;break}Je||(Je=Ie=="constructor")}if(ft&&!Je){var Cr=u.constructor,ea=d.constructor;Cr!=ea&&"constructor"in u&&"constructor"in d&&!(typeof Cr=="function"&&Cr instanceof Cr&&typeof ea=="function"&&ea instanceof ea)&&(ft=!1)}return M.delete(u),M.delete(d),ft}function Ea(u){return Ql(Zh(u,n,w),u+"")}function Gc(u){return Dl(u,Yn,ka)}function Li(u){return Dl(u,Vr,Nn)}var Wc=Pl?function(u){return Pl.get(u)}:mv;function Yl(u){for(var d=u.name+"",y=io[d],E=Pt.call(io,d)?y.length:0;E--;){var I=y[E],M=I.func;if(M==null||M==u)return I.name}return d}function bo(u){var d=Pt.call(D,"placeholder")?D:u;return d.placeholder}function Fe(){var u=D.iteratee||pv;return u=u===pv?Pc:u,arguments.length?u(arguments[0],arguments[1]):u}function xr(u,d){var y=u.__data__;return Gm(d)?y[typeof d=="string"?"string":"hash"]:y.map}function Ht(u){for(var d=Yn(u),y=d.length;y--;){var E=d[y],I=u[E];d[y]=[E,I,Wh(I)]}return d}function Er(u,d){var y=sh(u,d);return Ph(y)?y:n}function Wn(u){var d=Pt.call(u,yi),y=u[yi];try{u[yi]=n;var E=!0}catch{}var I=bl.call(u);return E&&(d?u[yi]=y:delete u[yi]),I}var ka=bc?function(u){return u==null?[]:(u=Nt(u),Ba(bc(u),function(d){return hh.call(u,d)}))}:vv,Nn=bc?function(u){for(var d=[];u;)Ua(d,ka(u)),u=xl(u);return d}:vv,nn=nr;(Al&&nn(new Al(new ArrayBuffer(1)))!=Qn||es&&nn(new es)!=xt||wc&&nn(wc.resolve())!=Yu||ao&&nn(new ao)!=Wr||ts&&nn(new ts)!=pi)&&(nn=function(u){var d=nr(u),y=d==Gr?u.constructor:n,E=y?Wa(y):"";if(E)switch(E){case _h:return Qn;case pm:return xt;case gm:return Yu;case mm:return Wr;case vm:return pi}return d});function Fr(u,d,y){for(var E=-1,I=y.length;++E<I;){var M=y[E],B=M.size;switch(M.type){case"drop":u+=B;break;case"dropRight":d-=B;break;case"take":d=Hn(d,u+B);break;case"takeRight":u=_n(u,d-B);break}}return{start:u,end:d}}function ms(u){var d=u.match(ol);return d?d[1].split(mi):[]}function kr(u,d,y){d=xa(d,u);for(var E=-1,I=d.length,M=!1;++E<I;){var B=la(d[E]);if(!(M=u!=null&&y(u,B)))break;u=u[B]}return M||++E!=I?M:(I=u==null?0:u.length,!!I&&yp(I)&&Ca(B,I)&&(st(u)||xs(u)))}function vs(u){var d=u.length,y=new u.constructor(d);return d&&typeof u[0]=="string"&&Pt.call(u,"index")&&(y.index=u.index,y.input=u.input),y}function rr(u){return typeof u.constructor=="function"&&!wo(u)?bi(xl(u)):{}}function Kl(u,d,y){var E=u.constructor;switch(d){case va:return Fc(u);case Me:case Ke:return new E(+u);case Qn:return Sr(u,y);case Zu:case Ju:case Js:case Xs:case Zi:case Qs:case el:case tl:case qo:return $c(u,y);case xt:return new E;case vr:case Ki:return new E(u);case cn:return Fm(u);case Wr:return new E;case Wo:return $m(u)}}function zm(u,d){var y=d.length;if(!y)return u;var E=y-1;return d[E]=(y>1?"& ":"")+d[E],d=d.join(y>2?", ":" "),u.replace(wd,`{
/* [wrapped with `+d+`] */
`)}function jm(u){return st(u)||xs(u)||!!(ph&&u&&u[ph])}function Ca(u,d){var y=typeof u;return d=d??V,!!d&&(y=="number"||y!="symbol"&&sl.test(u))&&u>-1&&u%1==0&&u<d}function ar(u,d,y){if(!fn(y))return!1;var E=typeof d;return(E=="number"?Ur(y)&&Ca(d,y.length):E=="string"&&d in y)?La(y[d],u):!1}function Zl(u,d){if(st(u))return!1;var y=typeof u;return y=="number"||y=="symbol"||y=="boolean"||u==null||Xr(u)?!0:_d.test(u)||!Yo.test(u)||d!=null&&u in Nt(d)}function Gm(u){var d=typeof u;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?u!=="__proto__":u===null}function _s(u){var d=Yl(u),y=D[d];if(typeof y!="function"||!(d in ct.prototype))return!1;if(u===y)return!0;var E=Wc(y);return!!E&&u===E[0]}function Jl(u){return!!ch&&ch in u}var Wm=_l?Ri:_v;function wo(u){var d=u&&u.constructor,y=typeof d=="function"&&d.prototype||ro;return u===y}function Wh(u){return u===u&&!fn(u)}function qh(u,d){return function(y){return y==null?!1:y[u]===d&&(d!==n||u in Nt(y))}}function Yh(u){var d=vp(u,function(E){return y.size===p&&y.clear(),E}),y=d.cache;return d}function qm(u,d){var y=u[1],E=d[1],I=y|E,M=I<(P|A|G),B=E==G&&y==F||E==G&&y==K&&u[7].length<=d[8]||E==(G|K)&&d[7].length<=d[8]&&y==F;if(!(M||B))return u;E&P&&(u[2]=d[2],I|=y&P?0:L);var q=d[3];if(q){var X=u[3];u[3]=X?tn(X,q,d[4]):q,u[4]=X?Va(u[3],g):d[4]}return q=d[5],q&&(X=u[5],u[5]=X?po(X,q,d[6]):q,u[6]=X?Va(u[5],g):d[6]),q=d[7],q&&(u[7]=q),E&G&&(u[8]=u[8]==null?d[8]:Hn(u[8],d[8])),u[9]==null&&(u[9]=d[9]),u[0]=d[0],u[1]=I,u}function Ym(u){var d=[];if(u!=null)for(var y in Nt(u))d.push(y);return d}function Kh(u){return bl.call(u)}function Zh(u,d,y){return d=_n(d===n?u.length-1:d,0),function(){for(var E=arguments,I=-1,M=_n(E.length-d,0),B=ne(M);++I<M;)B[I]=E[d+I];I=-1;for(var q=ne(d+1);++I<d;)q[I]=E[I];return q[d]=y(B),_r(u,this,q)}}function ys(u,d){return d.length<2?u:oa(u,Nr(d,0,-1))}function Km(u,d){for(var y=u.length,E=Hn(d.length,y),I=Gn(u);E--;){var M=d[E];u[E]=Ca(M,y)?I[M]:n}return u}function Xl(u,d){if(!(d==="constructor"&&typeof u[d]=="function")&&d!="__proto__")return u[d]}var Jh=Qh(Bl),bs=lm||function(u,d){return Rn.setTimeout(u,d)},Ql=Qh(ds);function Xh(u,d,y){var E=d+"";return Ql(u,zm(E,Tn(ms(E),y)))}function Qh(u){var d=0,y=0;return function(){var E=fm(),I=oe-(E-y);if(y=E,I>0){if(++d>=ie)return arguments[0]}else d=0;return u.apply(n,arguments)}}function ws(u,d){var y=-1,E=u.length,I=E-1;for(d=d===n?E:d;++y<d;){var M=fo(y,I),B=u[M];u[M]=u[y],u[y]=B}return u.length=d,u}var ep=Yh(function(u){var d=[];return u.charCodeAt(0)===46&&d.push(""),u.replace(yd,function(y,E,I,M){d.push(I?M.replace(xd,"$1"):E||y)}),d});function la(u){if(typeof u=="string"||Xr(u))return u;var d=u+"";return d=="0"&&1/u==-z?"-0":d}function Wa(u){if(u!=null){try{return yl.call(u)}catch{}try{return u+""}catch{}}return""}function Tn(u,d){return ur(ae,function(y){var E="_."+y[0];d&y[1]&&!pl(u,E)&&u.push(E)}),u.sort()}function ir(u){if(u instanceof ct)return u.clone();var d=new Rr(u.__wrapped__,u.__chain__);return d.__actions__=Gn(u.__actions__),d.__index__=u.__index__,d.__values__=u.__values__,d}function Ss(u,d,y){(y?ar(u,d,y):d===n)?d=1:d=_n(lt(d),0);var E=u==null?0:u.length;if(!E||d<1)return[];for(var I=0,M=0,B=ne(Cl(E/d));I<E;)B[M++]=Nr(u,I,I+=d);return B}function Zm(u){for(var d=-1,y=u==null?0:u.length,E=0,I=[];++d<y;){var M=u[d];M&&(I[E++]=M)}return I}function tp(){var u=arguments.length;if(!u)return[];for(var d=ne(u-1),y=arguments[0],E=u;E--;)d[E-1]=arguments[E];return Ua(st(y)?Gn(y):[y],On(d,1))}var qc=ot(function(u,d){return yn(u)?is(u,On(d,1,yn,!0)):[]}),np=ot(function(u,d){var y=Lt(d);return yn(y)&&(y=n),yn(u)?is(u,On(d,1,yn,!0),Fe(y,2)):[]}),rp=ot(function(u,d){var y=Lt(d);return yn(y)&&(y=n),yn(u)?is(u,On(d,1,yn,!0),n,y):[]});function Ii(u,d,y){var E=u==null?0:u.length;return E?(d=y||d===n?1:lt(d),Nr(u,d<0?0:d,E)):[]}function So(u,d,y){var E=u==null?0:u.length;return E?(d=y||d===n?1:lt(d),d=E-d,Nr(u,0,d<0?0:d)):[]}function ap(u,d){return u&&u.length?Hl(u,Fe(d,3),!0,!0):[]}function Jm(u,d){return u&&u.length?Hl(u,Fe(d,3),!0):[]}function a(u,d,y,E){var I=u==null?0:u.length;return I?(y&&typeof y!="number"&&ar(u,d,y)&&(y=0,E=I),Th(u,d,y,E)):[]}function f(u,d,y){var E=u==null?0:u.length;if(!E)return-1;var I=y==null?0:lt(y);return I<0&&(I=_n(E+I,0)),gl(u,Fe(d,3),I)}function v(u,d,y){var E=u==null?0:u.length;if(!E)return-1;var I=E-1;return y!==n&&(I=lt(y),I=y<0?_n(E+I,0):Hn(I,E-1)),gl(u,Fe(d,3),I,!0)}function w(u){var d=u==null?0:u.length;return d?On(u,1):[]}function S(u){var d=u==null?0:u.length;return d?On(u,z):[]}function C(u,d){var y=u==null?0:u.length;return y?(d=d===n?1:lt(d),On(u,d)):[]}function O(u){for(var d=-1,y=u==null?0:u.length,E={};++d<y;){var I=u[d];E[I[0]]=I[1]}return E}function U(u){return u&&u.length?u[0]:n}function se(u,d,y){var E=u==null?0:u.length;if(!E)return-1;var I=y==null?0:lt(y);return I<0&&(I=_n(E+I,0)),Qi(u,d,I)}function ye(u){var d=u==null?0:u.length;return d?Nr(u,0,-1):[]}var Te=ot(function(u){var d=Vt(u,ho);return d.length&&d[0]===u[0]?Ml(d):[]}),rt=ot(function(u){var d=Lt(u),y=Vt(u,ho);return d===Lt(y)?d=n:y.pop(),y.length&&y[0]===u[0]?Ml(y,Fe(d,2)):[]}),et=ot(function(u){var d=Lt(u),y=Vt(u,ho);return d=typeof d=="function"?d:n,d&&y.pop(),y.length&&y[0]===u[0]?Ml(y,n,d):[]});function Yt(u,d){return u==null?"":cm.call(u,d)}function Lt(u){var d=u==null?0:u.length;return d?u[d-1]:n}function pn(u,d,y){var E=u==null?0:u.length;if(!E)return-1;var I=E;return y!==n&&(I=lt(y),I=I<0?_n(E+I,0):Hn(I,E-1)),d===d?Kg(u,d,I):gl(u,eh,I,!0)}function $r(u,d){return u&&u.length?cs(u,lt(d)):n}var eu=ot(ip);function ip(u,d){return u&&u.length&&d&&d.length?Ci(u,d):u}function tu(u,d,y){return u&&u.length&&d&&d.length?Ci(u,d,Fe(y,2)):u}function Jr(u,d,y){return u&&u.length&&d&&d.length?Ci(u,d,n,y):u}var op=Ea(function(u,d){var y=u==null?0:u.length,E=co(u,d);return Ti(u,Vt(d,function(I){return Ca(I,y)?+I:I}).sort(Gl)),E});function Br(u,d){var y=[];if(!(u&&u.length))return y;var E=-1,I=[],M=u.length;for(d=Fe(d,3);++E<M;){var B=u[E];d(B,E,u)&&(y.push(B),I.push(E))}return Ti(u,I),y}function xo(u){return u==null?u:hm.call(u)}function ua(u,d,y){var E=u==null?0:u.length;return E?(y&&typeof y!="number"&&ar(u,d,y)?(d=0,y=E):(d=d==null?0:lt(d),y=y===n?E:lt(y)),Nr(u,d,y)):[]}function nu(u,d){return Ul(u,d)}function Xm(u,d,y){return Rc(u,d,Fe(y,2))}function sp(u,d){var y=u==null?0:u.length;if(y){var E=Ul(u,d);if(E<y&&La(u[E],d))return E}return-1}function lp(u,d){return Ul(u,d,!0)}function Yc(u,d,y){return Rc(u,d,Fe(y,2),!0)}function Qm(u,d){var y=u==null?0:u.length;if(y){var E=Ul(u,d,!0)-1;if(La(u[E],d))return E}return-1}function Kc(u){return u&&u.length?Dh(u):[]}function Eo(u,d){return u&&u.length?Dh(u,Fe(d,2)):[]}function ev(u){var d=u==null?0:u.length;return d?Nr(u,1,d):[]}function tv(u,d,y){return u&&u.length?(d=y||d===n?1:lt(d),Nr(u,0,d<0?0:d)):[]}function Ta(u,d,y){var E=u==null?0:u.length;return E?(d=y||d===n?1:lt(d),d=E-d,Nr(u,d<0?0:d,E)):[]}function Zc(u,d){return u&&u.length?Hl(u,Fe(d,3),!1,!0):[]}function nv(u,d){return u&&u.length?Hl(u,Fe(d,3)):[]}var rv=ot(function(u){return Sa(On(u,1,yn,!0))}),av=ot(function(u){var d=Lt(u);return yn(d)&&(d=n),Sa(On(u,1,yn,!0),Fe(d,2))}),Jc=ot(function(u){var d=Lt(u);return d=typeof d=="function"?d:n,Sa(On(u,1,yn,!0),n,d)});function up(u){return u&&u.length?Sa(u):[]}function Xc(u,d){return u&&u.length?Sa(u,Fe(d,2)):[]}function qe(u,d){return d=typeof d=="function"?d:n,u&&u.length?Sa(u,n,d):[]}function ko(u){if(!(u&&u.length))return[];var d=0;return u=Ba(u,function(y){if(yn(y))return d=_n(y.length,d),!0}),mc(d,function(y){return Vt(u,hc(y))})}function cp(u,d){if(!(u&&u.length))return[];var y=ko(u);return d==null?y:Vt(y,function(E){return _r(d,n,E)})}var iv=ot(function(u,d){return yn(u)?is(u,d):[]}),An=ot(function(u){return zl(Ba(u,yn))}),qa=ot(function(u){var d=Lt(u);return yn(d)&&(d=n),zl(Ba(u,yn),Fe(d,2))}),Qc=ot(function(u){var d=Lt(u);return d=typeof d=="function"?d:n,zl(Ba(u,yn),n,d)}),fp=ot(ko);function dp(u,d){return Zr(u||[],d||[],ya)}function Le(u,d){return Zr(u||[],d||[],Ai)}var Be=ot(function(u){var d=u.length,y=d>1?u[d-1]:n;return y=typeof y=="function"?(u.pop(),y):n,cp(u,y)});function Se(u){var d=D(u);return d.__chain__=!0,d}function ze(u,d){return d(u),u}function Ce(u,d){return d(u)}var je=Ea(function(u){var d=u.length,y=d?u[0]:0,E=this.__wrapped__,I=function(M){return co(M,u)};return d>1||this.__actions__.length||!(E instanceof ct)||!Ca(y)?this.thru(I):(E=E.slice(y,+y+(d?1:0)),E.__actions__.push({func:Ce,args:[I],thisArg:n}),new Rr(E,this.__chain__).thru(function(M){return d&&!M.length&&M.push(n),M}))});function We(){return Se(this)}function Ne(){return new Rr(this.value(),this.__chain__)}function Ft(){this.__values__===n&&(this.__values__=py(this.value()));var u=this.__index__>=this.__values__.length,d=u?n:this.__values__[this.__index__++];return{done:u,value:d}}function qn(){return this}function Kt(u){for(var d,y=this;y instanceof Il;){var E=ir(y);E.__index__=0,E.__values__=n,d?I.__wrapped__=E:d=E;var I=E;y=y.__wrapped__}return I.__wrapped__=u,d}function Ya(){var u=this.__wrapped__;if(u instanceof ct){var d=u;return this.__actions__.length&&(d=new ct(this)),d=d.reverse(),d.__actions__.push({func:Ce,args:[xo],thisArg:n}),new Rr(d,this.__chain__)}return this.thru(xo)}function Aa(){return Dc(this.__wrapped__,this.__actions__)}var Dt=mo(function(u,d,y){Pt.call(u,y)?++u[y]:Yr(u,y,1)});function Pa(u,d,y){var E=st(u)?Qd:Ac;return y&&ar(u,d,y)&&(d=n),E(u,Fe(d,3))}function ef(u,d){var y=st(u)?Ba:ba;return y(u,Fe(d,3))}var hp=yo(f),pp=yo(v);function p4(u,d){return On(gp(u,d),1)}function g4(u,d){return On(gp(u,d),z)}function m4(u,d,y){return y=y===n?1:lt(y),On(gp(u,d),y)}function ty(u,d){var y=st(u)?ur:_t;return y(u,Fe(d,3))}function ny(u,d){var y=st(u)?Xd:Ch;return y(u,Fe(d,3))}var v4=mo(function(u,d,y){Pt.call(u,y)?u[y].push(d):Yr(u,y,[d])});function _4(u,d,y,E){u=Ur(u)?u:au(u),y=y&&!E?lt(y):0;var I=u.length;return y<0&&(y=_n(I+y,0)),bp(u)?y<=I&&u.indexOf(d,y)>-1:!!I&&Qi(u,d,y)>-1}var y4=ot(function(u,d,y){var E=-1,I=typeof d=="function",M=Ur(u)?ne(u.length):[];return _t(u,function(B){M[++E]=I?_r(d,B,y):Dr(B,d,y)}),M}),b4=mo(function(u,d,y){Yr(u,y,d)});function gp(u,d){var y=st(u)?Vt:Oh;return y(u,Fe(d,3))}function w4(u,d,y,E){return u==null?[]:(st(d)||(d=d==null?[]:[d]),y=E?n:y,st(y)||(y=y==null?[]:[y]),on(u,d,y))}var S4=mo(function(u,d,y){u[y?0:1].push(d)},function(){return[[],[]]});function x4(u,d,y){var E=st(u)?cc:nh,I=arguments.length<3;return E(u,Fe(d,4),y,I,_t)}function E4(u,d,y){var E=st(u)?Mg:nh,I=arguments.length<3;return E(u,Fe(d,4),y,I,Ch)}function k4(u,d){var y=st(u)?Ba:ba;return y(u,_p(Fe(d,3)))}function C4(u){var d=st(u)?so:dr;return d(u)}function T4(u,d,y){(y?ar(u,d,y):d===n)?d=1:d=lt(d);var E=st(u)?za:hr;return E(u,d)}function A4(u){var d=st(u)?Tt:Mm;return d(u)}function P4(u){if(u==null)return 0;if(Ur(u))return bp(u)?to(u):u.length;var d=nn(u);return d==xt||d==Wr?u.size:us(u).length}function L4(u,d,y){var E=st(u)?fc:Nm;return y&&ar(u,d,y)&&(d=n),E(u,Fe(d,3))}var I4=ot(function(u,d){if(u==null)return[];var y=d.length;return y>1&&ar(u,d[0],d[1])?d=[]:y>2&&ar(d[0],d[1],d[2])&&(d=[d[0]]),on(u,On(d,1),[])}),mp=sm||function(){return Rn.Date.now()};function R4(u,d){if(typeof d!="function")throw new Ir(s);return u=lt(u),function(){if(--u<1)return d.apply(this,arguments)}}function ry(u,d,y){return d=y?n:d,d=u&&d==null?u.length:d,sa(u,G,n,n,n,n,d)}function ay(u,d){var y;if(typeof d!="function")throw new Ir(s);return u=lt(u),function(){return--u>0&&(y=d.apply(this,arguments)),u<=1&&(d=n),y}}var ov=ot(function(u,d,y){var E=P;if(y.length){var I=Va(y,bo(ov));E|=W}return sa(u,E,d,y,I)}),iy=ot(function(u,d,y){var E=P|A;if(y.length){var I=Va(y,bo(iy));E|=W}return sa(d,E,u,y,I)});function oy(u,d,y){d=y?n:d;var E=sa(u,F,n,n,n,n,n,d);return E.placeholder=oy.placeholder,E}function sy(u,d,y){d=y?n:d;var E=sa(u,N,n,n,n,n,n,d);return E.placeholder=sy.placeholder,E}function ly(u,d,y){var E,I,M,B,q,X,pe=0,ge=!1,_e=!1,Ie=!0;if(typeof u!="function")throw new Ir(s);d=ca(d)||0,fn(y)&&(ge=!!y.leading,_e="maxWait"in y,M=_e?_n(ca(y.maxWait)||0,d):M,Ie="trailing"in y?!!y.trailing:Ie);function Ue(bn){var Ia=E,Di=I;return E=I=n,pe=bn,B=u.apply(Di,Ia),B}function Ze(bn){return pe=bn,q=bs(yt,d),ge?Ue(bn):B}function ft(bn){var Ia=bn-X,Di=bn-pe,Ty=d-Ia;return _e?Hn(Ty,M-Di):Ty}function Je(bn){var Ia=bn-X,Di=bn-pe;return X===n||Ia>=d||Ia<0||_e&&Di>=M}function yt(){var bn=mp();if(Je(bn))return St(bn);q=bs(yt,ft(bn))}function St(bn){return q=n,Ie&&E?Ue(bn):(E=I=n,B)}function Qr(){q!==n&&Mc(q),pe=0,E=X=I=q=n}function Cr(){return q===n?B:St(mp())}function ea(){var bn=mp(),Ia=Je(bn);if(E=arguments,I=this,X=bn,Ia){if(q===n)return Ze(X);if(_e)return Mc(q),q=bs(yt,d),Ue(X)}return q===n&&(q=bs(yt,d)),B}return ea.cancel=Qr,ea.flush=Cr,ea}var O4=ot(function(u,d){return Tc(u,1,d)}),D4=ot(function(u,d,y){return Tc(u,ca(d)||0,y)});function M4(u){return sa(u,re)}function vp(u,d){if(typeof u!="function"||d!=null&&typeof d!="function")throw new Ir(s);var y=function(){var E=arguments,I=d?d.apply(this,E):E[0],M=y.cache;if(M.has(I))return M.get(I);var B=u.apply(this,E);return y.cache=M.set(I,B)||M,B};return y.cache=new(vp.Cache||br),y}vp.Cache=br;function _p(u){if(typeof u!="function")throw new Ir(s);return function(){var d=arguments;switch(d.length){case 0:return!u.call(this);case 1:return!u.call(this,d[0]);case 2:return!u.call(this,d[0],d[1]);case 3:return!u.call(this,d[0],d[1],d[2])}return!u.apply(this,d)}}function N4(u){return ay(2,u)}var F4=Mh(function(u,d){d=d.length==1&&st(d[0])?Vt(d[0],yr(Fe())):Vt(On(d,1),yr(Fe()));var y=d.length;return ot(function(E){for(var I=-1,M=Hn(E.length,y);++I<M;)E[I]=d[I].call(this,E[I]);return _r(u,this,E)})}),sv=ot(function(u,d){var y=Va(d,bo(sv));return sa(u,W,n,d,y)}),uy=ot(function(u,d){var y=Va(d,bo(uy));return sa(u,te,n,d,y)}),$4=Ea(function(u,d){return sa(u,K,n,n,n,d)});function B4(u,d){if(typeof u!="function")throw new Ir(s);return d=d===n?d:lt(d),ot(u,d)}function U4(u,d){if(typeof u!="function")throw new Ir(s);return d=d==null?0:_n(lt(d),0),ot(function(y){var E=y[d],I=ja(y,0,d);return E&&Ua(I,E),_r(u,this,I)})}function V4(u,d,y){var E=!0,I=!0;if(typeof u!="function")throw new Ir(s);return fn(y)&&(E="leading"in y?!!y.leading:E,I="trailing"in y?!!y.trailing:I),ly(u,d,{leading:E,maxWait:d,trailing:I})}function H4(u){return ry(u,1)}function z4(u,d){return sv(jl(d),u)}function j4(){if(!arguments.length)return[];var u=arguments[0];return st(u)?u:[u]}function G4(u){return wr(u,x)}function W4(u,d){return d=typeof d=="function"?d:n,wr(u,x,d)}function q4(u){return wr(u,_|x)}function Y4(u,d){return d=typeof d=="function"?d:n,wr(u,_|x,d)}function K4(u,d){return d==null||en(u,d,Yn(d))}function La(u,d){return u===d||u!==u&&d!==d}var Z4=ql(Cn),J4=ql(function(u,d){return u>=d}),xs=Mr(function(){return arguments}())?Mr:function(u){return gn(u)&&Pt.call(u,"callee")&&!hh.call(u,"callee")},st=ne.isArray,X4=qd?yr(qd):Im;function Ur(u){return u!=null&&yp(u.length)&&!Ri(u)}function yn(u){return gn(u)&&Ur(u)}function Q4(u){return u===!0||u===!1||gn(u)&&nr(u)==Me}var Co=um||_v,eS=Yd?yr(Yd):Rm;function tS(u){return gn(u)&&u.nodeType===1&&!tf(u)}function nS(u){if(u==null)return!0;if(Ur(u)&&(st(u)||typeof u=="string"||typeof u.splice=="function"||Co(u)||ru(u)||xs(u)))return!u.length;var d=nn(u);if(d==xt||d==Wr)return!u.size;if(wo(u))return!us(u).length;for(var y in u)if(Pt.call(u,y))return!1;return!0}function rS(u,d){return ls(u,d)}function aS(u,d,y){y=typeof y=="function"?y:n;var E=y?y(u,d):n;return E===n?ls(u,d,n,y):!!E}function lv(u){if(!gn(u))return!1;var d=nr(u);return d==ht||d==it||typeof u.message=="string"&&typeof u.name=="string"&&!tf(u)}function iS(u){return typeof u=="number"&&gh(u)}function Ri(u){if(!fn(u))return!1;var d=nr(u);return d==un||d==jr||d==Re||d==Ku}function cy(u){return typeof u=="number"&&u==lt(u)}function yp(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=V}function fn(u){var d=typeof u;return u!=null&&(d=="object"||d=="function")}function gn(u){return u!=null&&typeof u=="object"}var fy=Kd?yr(Kd):Om;function oS(u,d){return u===d||Nl(u,d,Ht(d))}function sS(u,d,y){return y=typeof y=="function"?y:n,Nl(u,d,Ht(d),y)}function lS(u){return dy(u)&&u!=+u}function uS(u){if(Wm(u))throw new nt(l);return Ph(u)}function cS(u){return u===null}function fS(u){return u==null}function dy(u){return typeof u=="number"||gn(u)&&nr(u)==vr}function tf(u){if(!gn(u)||nr(u)!=Gr)return!1;var d=xl(u);if(d===null)return!0;var y=Pt.call(d,"constructor")&&d.constructor;return typeof y=="function"&&y instanceof y&&yl.call(y)==rm}var uv=Zd?yr(Zd):Lh;function dS(u){return cy(u)&&u>=-V&&u<=V}var hy=lc?yr(lc):Dm;function bp(u){return typeof u=="string"||!st(u)&&gn(u)&&nr(u)==Ki}function Xr(u){return typeof u=="symbol"||gn(u)&&nr(u)==Wo}var ru=Jd?yr(Jd):Ih;function hS(u){return u===n}function pS(u){return gn(u)&&nn(u)==pi}function gS(u){return gn(u)&&nr(u)==md}var mS=ql(ki),vS=ql(function(u,d){return u<=d});function py(u){if(!u)return[];if(Ur(u))return bp(u)?qr(u):Gn(u);if(Qo&&u[Qo])return Wg(u[Qo]());var d=nn(u),y=d==xt?_c:d==Wr?ml:au;return y(u)}function Oi(u){if(!u)return u===0?u:0;if(u=ca(u),u===z||u===-z){var d=u<0?-1:1;return d*ue}return u===u?u:0}function lt(u){var d=Oi(u),y=d%1;return d===d?y?d-y:d:0}function gy(u){return u?xi(lt(u),0,ce):0}function ca(u){if(typeof u=="number")return u;if(Xr(u))return xe;if(fn(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=fn(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=ah(u);var y=cg.test(u);return y||fg.test(u)?Dg(u.slice(2),y?2:8):ug.test(u)?xe:+u}function my(u){return Ot(u,Vr(u))}function _S(u){return u?xi(lt(u),-V,V):u===0?u:0}function Mt(u){return u==null?"":jn(u)}var yS=vo(function(u,d){if(wo(d)||Ur(d)){Ot(d,Yn(d),u);return}for(var y in d)Pt.call(d,y)&&ya(u,y,d[y])}),vy=vo(function(u,d){Ot(d,Vr(d),u)}),wp=vo(function(u,d,y,E){Ot(d,Vr(d),u,E)}),bS=vo(function(u,d,y,E){Ot(d,Yn(d),u,E)}),wS=Ea(co);function SS(u,d){var y=bi(u);return d==null?y:kc(y,d)}var xS=ot(function(u,d){u=Nt(u);var y=-1,E=d.length,I=E>2?d[2]:n;for(I&&ar(d[0],d[1],I)&&(E=1);++y<E;)for(var M=d[y],B=Vr(M),q=-1,X=B.length;++q<X;){var pe=B[q],ge=u[pe];(ge===n||La(ge,ro[pe])&&!Pt.call(u,pe))&&(u[pe]=M[pe])}return u}),ES=ot(function(u){return u.push(n,jh),_r(_y,n,u)});function kS(u,d){return dc(u,Fe(d,3),Or)}function CS(u,d){return dc(u,Fe(d,3),ss)}function TS(u,d){return u==null?u:os(u,Fe(d,3),Vr)}function AS(u,d){return u==null?u:Dn(u,Fe(d,3),Vr)}function PS(u,d){return u&&Or(u,Fe(d,3))}function LS(u,d){return u&&ss(u,Fe(d,3))}function IS(u){return u==null?[]:tr(u,Yn(u))}function RS(u){return u==null?[]:tr(u,Vr(u))}function cv(u,d,y){var E=u==null?n:oa(u,d);return E===n?y:E}function OS(u,d){return u!=null&&kr(u,d,Tm)}function fv(u,d){return u!=null&&kr(u,d,Am)}var DS=Hc(function(u,d,y){d!=null&&typeof d.toString!="function"&&(d=bl.call(d)),u[d]=y},hv(Hr)),MS=Hc(function(u,d,y){d!=null&&typeof d.toString!="function"&&(d=bl.call(d)),Pt.call(u,d)?u[d].push(y):u[d]=[y]},Fe),NS=ot(Dr);function Yn(u){return Ur(u)?zn(u):us(u)}function Vr(u){return Ur(u)?zn(u,!0):Rh(u)}function FS(u,d){var y={};return d=Fe(d,3),Or(u,function(E,I,M){Yr(y,d(E,I,M),E)}),y}function $S(u,d){var y={};return d=Fe(d,3),Or(u,function(E,I,M){Yr(y,I,d(E,I,M))}),y}var BS=vo(function(u,d,y){cr(u,d,y)}),_y=vo(function(u,d,y,E){cr(u,d,y,E)}),US=Ea(function(u,d){var y={};if(u==null)return y;var E=!1;d=Vt(d,function(M){return M=xa(M,u),E||(E=M.length>1),M}),Ot(u,Li(u),y),E&&(y=wr(y,_|b|x,Vm));for(var I=d.length;I--;)Vl(y,d[I]);return y});function VS(u,d){return yy(u,_p(Fe(d)))}var HS=Ea(function(u,d){return u==null?{}:fs(u,d)});function yy(u,d){if(u==null)return{};var y=Vt(Li(u),function(E){return[E]});return d=Fe(d),$l(u,y,function(E,I){return d(E,I[0])})}function zS(u,d,y){d=xa(d,u);var E=-1,I=d.length;for(I||(I=1,u=n);++E<I;){var M=u==null?n:u[la(d[E])];M===n&&(E=I,M=y),u=Ri(M)?M.call(u):M}return u}function jS(u,d,y){return u==null?u:Ai(u,d,y)}function GS(u,d,y,E){return E=typeof E=="function"?E:n,u==null?u:Ai(u,d,y,E)}var by=Hh(Yn),wy=Hh(Vr);function WS(u,d,y){var E=st(u),I=E||Co(u)||ru(u);if(d=Fe(d,4),y==null){var M=u&&u.constructor;I?y=E?new M:[]:fn(u)?y=Ri(M)?bi(xl(u)):{}:y={}}return(I?ur:Or)(u,function(B,q,X){return d(y,B,q,X)}),y}function qS(u,d){return u==null?!0:Vl(u,d)}function YS(u,d,y){return u==null?u:Oc(u,d,jl(y))}function KS(u,d,y,E){return E=typeof E=="function"?E:n,u==null?u:Oc(u,d,jl(y),E)}function au(u){return u==null?[]:vc(u,Yn(u))}function ZS(u){return u==null?[]:vc(u,Vr(u))}function JS(u,d,y){return y===n&&(y=d,d=n),y!==n&&(y=ca(y),y=y===y?y:0),d!==n&&(d=ca(d),d=d===d?d:0),xi(ca(u),d,y)}function XS(u,d,y){return d=Oi(d),y===n?(y=d,d=0):y=Oi(y),u=ca(u),Pm(u,d,y)}function QS(u,d,y){if(y&&typeof y!="boolean"&&ar(u,d,y)&&(d=y=n),y===n&&(typeof d=="boolean"?(y=d,d=n):typeof u=="boolean"&&(y=u,u=n)),u===n&&d===n?(u=0,d=1):(u=Oi(u),d===n?(d=u,u=0):d=Oi(d)),u>d){var E=u;u=d,d=E}if(y||u%1||d%1){var I=vh();return Hn(u+I*(d-u+Og("1e-"+((I+"").length-1))),d)}return fo(u,d)}var e7=_o(function(u,d,y){return d=d.toLowerCase(),u+(y?Sy(d):d)});function Sy(u){return dv(Mt(u).toLowerCase())}function xy(u){return u=Mt(u),u&&u.replace(tc,Hg).replace(kg,"")}function t7(u,d,y){u=Mt(u),d=jn(d);var E=u.length;y=y===n?E:xi(lt(y),0,E);var I=y;return y-=d.length,y>=0&&u.slice(y,I)==d}function n7(u){return u=Mt(u),u&&aa.test(u)?u.replace(vd,zg):u}function r7(u){return u=Mt(u),u&&il.test(u)?u.replace(ia,"\\$&"):u}var a7=_o(function(u,d,y){return u+(y?"-":"")+d.toLowerCase()}),i7=_o(function(u,d,y){return u+(y?" ":"")+d.toLowerCase()}),o7=Fh("toLowerCase");function s7(u,d,y){u=Mt(u),d=lt(d);var E=d?to(u):0;if(!d||E>=d)return u;var I=(d-E)/2;return gs(Tl(I),y)+u+gs(Cl(I),y)}function l7(u,d,y){u=Mt(u),d=lt(d);var E=d?to(u):0;return d&&E<d?u+gs(d-E,y):u}function u7(u,d,y){u=Mt(u),d=lt(d);var E=d?to(u):0;return d&&E<d?gs(d-E,y)+u:u}function c7(u,d,y){return y||d==null?d=0:d&&(d=+d),dm(Mt(u).replace(gi,""),d||0)}function f7(u,d,y){return(y?ar(u,d,y):d===n)?d=1:d=lt(d),wa(Mt(u),d)}function d7(){var u=arguments,d=Mt(u[0]);return u.length<3?d:d.replace(u[1],u[2])}var h7=_o(function(u,d,y){return u+(y?"_":"")+d.toLowerCase()});function p7(u,d,y){return y&&typeof y!="number"&&ar(u,d,y)&&(d=y=n),y=y===n?ce:y>>>0,y?(u=Mt(u),u&&(typeof d=="string"||d!=null&&!uv(d))&&(d=jn(d),!d&&eo(u))?ja(qr(u),0,y):u.split(d,y)):[]}var g7=_o(function(u,d,y){return u+(y?" ":"")+dv(d)});function m7(u,d,y){return u=Mt(u),y=y==null?0:xi(lt(y),0,u.length),d=jn(d),u.slice(y,y+d.length)==d}function v7(u,d,y){var E=D.templateSettings;y&&ar(u,d,y)&&(d=n),u=Mt(u),d=wp({},d,E,zh);var I=wp({},d.imports,E.imports,zh),M=Yn(I),B=vc(I,M),q,X,pe=0,ge=d.interpolate||Ko,_e="__p += '",Ie=yc((d.escape||Ko).source+"|"+ge.source+"|"+(ge===al?Ed:Ko).source+"|"+(d.evaluate||Ko).source+"|$","g"),Ue="//# sourceURL="+(Pt.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++jd+"]")+`
`;u.replace(Ie,function(Je,yt,St,Qr,Cr,ea){return St||(St=Qr),_e+=u.slice(pe,ea).replace(Cd,jg),yt&&(q=!0,_e+=`' +
__e(`+yt+`) +
'`),Cr&&(X=!0,_e+=`';
`+Cr+`;
__p += '`),St&&(_e+=`' +
((__t = (`+St+`)) == null ? '' : __t) +
'`),pe=ea+Je.length,Je}),_e+=`';
`;var Ze=Pt.call(d,"variable")&&d.variable;if(!Ze)_e=`with (obj) {
`+_e+`
}
`;else if(Sd.test(Ze))throw new nt(c);_e=(X?_e.replace(nl,""):_e).replace(sg,"$1").replace(lg,"$1;"),_e="function("+(Ze||"obj")+`) {
`+(Ze?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(q?", __e = _.escape":"")+(X?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+_e+`return __p
}`;var ft=ky(function(){return Et(M,Ue+"return "+_e).apply(n,B)});if(ft.source=_e,lv(ft))throw ft;return ft}function _7(u){return Mt(u).toLowerCase()}function y7(u){return Mt(u).toUpperCase()}function b7(u,d,y){if(u=Mt(u),u&&(y||d===n))return ah(u);if(!u||!(d=jn(d)))return u;var E=qr(u),I=qr(d),M=ih(E,I),B=oh(E,I)+1;return ja(E,M,B).join("")}function w7(u,d,y){if(u=Mt(u),u&&(y||d===n))return u.slice(0,uh(u)+1);if(!u||!(d=jn(d)))return u;var E=qr(u),I=oh(E,qr(d))+1;return ja(E,0,I).join("")}function S7(u,d,y){if(u=Mt(u),u&&(y||d===n))return u.replace(gi,"");if(!u||!(d=jn(d)))return u;var E=qr(u),I=ih(E,qr(d));return ja(E,I).join("")}function x7(u,d){var y=H,E=J;if(fn(d)){var I="separator"in d?d.separator:I;y="length"in d?lt(d.length):y,E="omission"in d?jn(d.omission):E}u=Mt(u);var M=u.length;if(eo(u)){var B=qr(u);M=B.length}if(y>=M)return u;var q=y-to(E);if(q<1)return E;var X=B?ja(B,0,q).join(""):u.slice(0,q);if(I===n)return X+E;if(B&&(q+=X.length-q),uv(I)){if(u.slice(q).search(I)){var pe,ge=X;for(I.global||(I=yc(I.source,Mt(ec.exec(I))+"g")),I.lastIndex=0;pe=I.exec(ge);)var _e=pe.index;X=X.slice(0,_e===n?q:_e)}}else if(u.indexOf(jn(I),q)!=q){var Ie=X.lastIndexOf(I);Ie>-1&&(X=X.slice(0,Ie))}return X+E}function E7(u){return u=Mt(u),u&&rl.test(u)?u.replace(Xu,Zg):u}var k7=_o(function(u,d,y){return u+(y?" ":"")+d.toUpperCase()}),dv=Fh("toUpperCase");function Ey(u,d,y){return u=Mt(u),d=y?n:d,d===n?Gg(u)?hn(u):$g(u):u.match(d)||[]}var ky=ot(function(u,d){try{return _r(u,n,d)}catch(y){return lv(y)?y:new nt(y)}}),C7=Ea(function(u,d){return ur(d,function(y){y=la(y),Yr(u,y,ov(u[y],u))}),u});function T7(u){var d=u==null?0:u.length,y=Fe();return u=d?Vt(u,function(E){if(typeof E[1]!="function")throw new Ir(s);return[y(E[0]),E[1]]}):[],ot(function(E){for(var I=-1;++I<d;){var M=u[I];if(_r(M[0],this,E))return _r(M[1],this,E)}})}function A7(u){return me(wr(u,_))}function hv(u){return function(){return u}}function P7(u,d){return u==null||u!==u?d:u}var L7=$h(),I7=$h(!0);function Hr(u){return u}function pv(u){return Pc(typeof u=="function"?u:wr(u,_))}function R7(u){return Lc(wr(u,_))}function O7(u,d){return Ic(u,wr(d,_))}var D7=ot(function(u,d){return function(y){return Dr(y,u,d)}}),M7=ot(function(u,d){return function(y){return Dr(u,y,d)}});function gv(u,d,y){var E=Yn(d),I=tr(d,E);y==null&&!(fn(d)&&(I.length||!E.length))&&(y=d,d=u,u=this,I=tr(d,Yn(d)));var M=!(fn(y)&&"chain"in y)||!!y.chain,B=Ri(u);return ur(I,function(q){var X=d[q];u[q]=X,B&&(u.prototype[q]=function(){var pe=this.__chain__;if(M||pe){var ge=u(this.__wrapped__),_e=ge.__actions__=Gn(this.__actions__);return _e.push({func:X,args:arguments,thisArg:u}),ge.__chain__=pe,ge}return X.apply(u,Ua([this.value()],arguments))})}),u}function N7(){return Rn._===this&&(Rn._=am),this}function mv(){}function F7(u){return u=lt(u),ot(function(d){return cs(d,u)})}var $7=zc(Vt),B7=zc(Qd),U7=zc(fc);function Cy(u){return Zl(u)?hc(la(u)):fr(u)}function V7(u){return function(d){return u==null?n:oa(u,d)}}var H7=Uh(),z7=Uh(!0);function vv(){return[]}function _v(){return!1}function j7(){return{}}function G7(){return""}function W7(){return!0}function q7(u,d){if(u=lt(u),u<1||u>V)return[];var y=ce,E=Hn(u,ce);d=Fe(d),u-=ce;for(var I=mc(E,d);++y<u;)d(y);return I}function Y7(u){return st(u)?Vt(u,la):Xr(u)?[u]:Gn(ep(Mt(u)))}function K7(u){var d=++nm;return Mt(u)+d}var Z7=ps(function(u,d){return u+d},0),J7=jc("ceil"),X7=ps(function(u,d){return u/d},1),Q7=jc("floor");function ex(u){return u&&u.length?Ei(u,Hr,Cn):n}function tx(u,d){return u&&u.length?Ei(u,Fe(d,2),Cn):n}function nx(u){return th(u,Hr)}function rx(u,d){return th(u,Fe(d,2))}function ax(u){return u&&u.length?Ei(u,Hr,ki):n}function ix(u,d){return u&&u.length?Ei(u,Fe(d,2),ki):n}var ox=ps(function(u,d){return u*d},1),sx=jc("round"),lx=ps(function(u,d){return u-d},0);function ux(u){return u&&u.length?gc(u,Hr):0}function cx(u,d){return u&&u.length?gc(u,Fe(d,2)):0}return D.after=R4,D.ary=ry,D.assign=yS,D.assignIn=vy,D.assignInWith=wp,D.assignWith=bS,D.at=wS,D.before=ay,D.bind=ov,D.bindAll=C7,D.bindKey=iy,D.castArray=j4,D.chain=Se,D.chunk=Ss,D.compact=Zm,D.concat=tp,D.cond=T7,D.conforms=A7,D.constant=hv,D.countBy=Dt,D.create=SS,D.curry=oy,D.curryRight=sy,D.debounce=ly,D.defaults=xS,D.defaultsDeep=ES,D.defer=O4,D.delay=D4,D.difference=qc,D.differenceBy=np,D.differenceWith=rp,D.drop=Ii,D.dropRight=So,D.dropRightWhile=ap,D.dropWhile=Jm,D.fill=a,D.filter=ef,D.flatMap=p4,D.flatMapDeep=g4,D.flatMapDepth=m4,D.flatten=w,D.flattenDeep=S,D.flattenDepth=C,D.flip=M4,D.flow=L7,D.flowRight=I7,D.fromPairs=O,D.functions=IS,D.functionsIn=RS,D.groupBy=v4,D.initial=ye,D.intersection=Te,D.intersectionBy=rt,D.intersectionWith=et,D.invert=DS,D.invertBy=MS,D.invokeMap=y4,D.iteratee=pv,D.keyBy=b4,D.keys=Yn,D.keysIn=Vr,D.map=gp,D.mapKeys=FS,D.mapValues=$S,D.matches=R7,D.matchesProperty=O7,D.memoize=vp,D.merge=BS,D.mergeWith=_y,D.method=D7,D.methodOf=M7,D.mixin=gv,D.negate=_p,D.nthArg=F7,D.omit=US,D.omitBy=VS,D.once=N4,D.orderBy=w4,D.over=$7,D.overArgs=F4,D.overEvery=B7,D.overSome=U7,D.partial=sv,D.partialRight=uy,D.partition=S4,D.pick=HS,D.pickBy=yy,D.property=Cy,D.propertyOf=V7,D.pull=eu,D.pullAll=ip,D.pullAllBy=tu,D.pullAllWith=Jr,D.pullAt=op,D.range=H7,D.rangeRight=z7,D.rearg=$4,D.reject=k4,D.remove=Br,D.rest=B4,D.reverse=xo,D.sampleSize=T4,D.set=jS,D.setWith=GS,D.shuffle=A4,D.slice=ua,D.sortBy=I4,D.sortedUniq=Kc,D.sortedUniqBy=Eo,D.split=p7,D.spread=U4,D.tail=ev,D.take=tv,D.takeRight=Ta,D.takeRightWhile=Zc,D.takeWhile=nv,D.tap=ze,D.throttle=V4,D.thru=Ce,D.toArray=py,D.toPairs=by,D.toPairsIn=wy,D.toPath=Y7,D.toPlainObject=my,D.transform=WS,D.unary=H4,D.union=rv,D.unionBy=av,D.unionWith=Jc,D.uniq=up,D.uniqBy=Xc,D.uniqWith=qe,D.unset=qS,D.unzip=ko,D.unzipWith=cp,D.update=YS,D.updateWith=KS,D.values=au,D.valuesIn=ZS,D.without=iv,D.words=Ey,D.wrap=z4,D.xor=An,D.xorBy=qa,D.xorWith=Qc,D.zip=fp,D.zipObject=dp,D.zipObjectDeep=Le,D.zipWith=Be,D.entries=by,D.entriesIn=wy,D.extend=vy,D.extendWith=wp,gv(D,D),D.add=Z7,D.attempt=ky,D.camelCase=e7,D.capitalize=Sy,D.ceil=J7,D.clamp=JS,D.clone=G4,D.cloneDeep=q4,D.cloneDeepWith=Y4,D.cloneWith=W4,D.conformsTo=K4,D.deburr=xy,D.defaultTo=P7,D.divide=X7,D.endsWith=t7,D.eq=La,D.escape=n7,D.escapeRegExp=r7,D.every=Pa,D.find=hp,D.findIndex=f,D.findKey=kS,D.findLast=pp,D.findLastIndex=v,D.findLastKey=CS,D.floor=Q7,D.forEach=ty,D.forEachRight=ny,D.forIn=TS,D.forInRight=AS,D.forOwn=PS,D.forOwnRight=LS,D.get=cv,D.gt=Z4,D.gte=J4,D.has=OS,D.hasIn=fv,D.head=U,D.identity=Hr,D.includes=_4,D.indexOf=se,D.inRange=XS,D.invoke=NS,D.isArguments=xs,D.isArray=st,D.isArrayBuffer=X4,D.isArrayLike=Ur,D.isArrayLikeObject=yn,D.isBoolean=Q4,D.isBuffer=Co,D.isDate=eS,D.isElement=tS,D.isEmpty=nS,D.isEqual=rS,D.isEqualWith=aS,D.isError=lv,D.isFinite=iS,D.isFunction=Ri,D.isInteger=cy,D.isLength=yp,D.isMap=fy,D.isMatch=oS,D.isMatchWith=sS,D.isNaN=lS,D.isNative=uS,D.isNil=fS,D.isNull=cS,D.isNumber=dy,D.isObject=fn,D.isObjectLike=gn,D.isPlainObject=tf,D.isRegExp=uv,D.isSafeInteger=dS,D.isSet=hy,D.isString=bp,D.isSymbol=Xr,D.isTypedArray=ru,D.isUndefined=hS,D.isWeakMap=pS,D.isWeakSet=gS,D.join=Yt,D.kebabCase=a7,D.last=Lt,D.lastIndexOf=pn,D.lowerCase=i7,D.lowerFirst=o7,D.lt=mS,D.lte=vS,D.max=ex,D.maxBy=tx,D.mean=nx,D.meanBy=rx,D.min=ax,D.minBy=ix,D.stubArray=vv,D.stubFalse=_v,D.stubObject=j7,D.stubString=G7,D.stubTrue=W7,D.multiply=ox,D.nth=$r,D.noConflict=N7,D.noop=mv,D.now=mp,D.pad=s7,D.padEnd=l7,D.padStart=u7,D.parseInt=c7,D.random=QS,D.reduce=x4,D.reduceRight=E4,D.repeat=f7,D.replace=d7,D.result=zS,D.round=sx,D.runInContext=Z,D.sample=C4,D.size=P4,D.snakeCase=h7,D.some=L4,D.sortedIndex=nu,D.sortedIndexBy=Xm,D.sortedIndexOf=sp,D.sortedLastIndex=lp,D.sortedLastIndexBy=Yc,D.sortedLastIndexOf=Qm,D.startCase=g7,D.startsWith=m7,D.subtract=lx,D.sum=ux,D.sumBy=cx,D.template=v7,D.times=q7,D.toFinite=Oi,D.toInteger=lt,D.toLength=gy,D.toLower=_7,D.toNumber=ca,D.toSafeInteger=_S,D.toString=Mt,D.toUpper=y7,D.trim=b7,D.trimEnd=w7,D.trimStart=S7,D.truncate=x7,D.unescape=E7,D.uniqueId=K7,D.upperCase=k7,D.upperFirst=dv,D.each=ty,D.eachRight=ny,D.first=U,gv(D,function(){var u={};return Or(D,function(d,y){Pt.call(D.prototype,y)||(u[y]=d)}),u}(),{chain:!1}),D.VERSION=r,ur(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){D[u].placeholder=D}),ur(["drop","take"],function(u,d){ct.prototype[u]=function(y){y=y===n?1:_n(lt(y),0);var E=this.__filtered__&&!d?new ct(this):this.clone();return E.__filtered__?E.__takeCount__=Hn(y,E.__takeCount__):E.__views__.push({size:Hn(y,ce),type:u+(E.__dir__<0?"Right":"")}),E},ct.prototype[u+"Right"]=function(y){return this.reverse()[u](y).reverse()}}),ur(["filter","map","takeWhile"],function(u,d){var y=d+1,E=y==le||y==Y;ct.prototype[u]=function(I){var M=this.clone();return M.__iteratees__.push({iteratee:Fe(I,3),type:y}),M.__filtered__=M.__filtered__||E,M}}),ur(["head","last"],function(u,d){var y="take"+(d?"Right":"");ct.prototype[u]=function(){return this[y](1).value()[0]}}),ur(["initial","tail"],function(u,d){var y="drop"+(d?"":"Right");ct.prototype[u]=function(){return this.__filtered__?new ct(this):this[y](1)}}),ct.prototype.compact=function(){return this.filter(Hr)},ct.prototype.find=function(u){return this.filter(u).head()},ct.prototype.findLast=function(u){return this.reverse().find(u)},ct.prototype.invokeMap=ot(function(u,d){return typeof u=="function"?new ct(this):this.map(function(y){return Dr(y,u,d)})}),ct.prototype.reject=function(u){return this.filter(_p(Fe(u)))},ct.prototype.slice=function(u,d){u=lt(u);var y=this;return y.__filtered__&&(u>0||d<0)?new ct(y):(u<0?y=y.takeRight(-u):u&&(y=y.drop(u)),d!==n&&(d=lt(d),y=d<0?y.dropRight(-d):y.take(d-u)),y)},ct.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},ct.prototype.toArray=function(){return this.take(ce)},Or(ct.prototype,function(u,d){var y=/^(?:filter|find|map|reject)|While$/.test(d),E=/^(?:head|last)$/.test(d),I=D[E?"take"+(d=="last"?"Right":""):d],M=E||/^find/.test(d);I&&(D.prototype[d]=function(){var B=this.__wrapped__,q=E?[1]:arguments,X=B instanceof ct,pe=q[0],ge=X||st(B),_e=function(yt){var St=I.apply(D,Ua([yt],q));return E&&Ie?St[0]:St};ge&&y&&typeof pe=="function"&&pe.length!=1&&(X=ge=!1);var Ie=this.__chain__,Ue=!!this.__actions__.length,Ze=M&&!Ie,ft=X&&!Ue;if(!M&&ge){B=ft?B:new ct(this);var Je=u.apply(B,q);return Je.__actions__.push({func:Ce,args:[_e],thisArg:n}),new Rr(Je,Ie)}return Ze&&ft?u.apply(this,q):(Je=this.thru(_e),Ze?E?Je.value()[0]:Je.value():Je)})}),ur(["pop","push","shift","sort","splice","unshift"],function(u){var d=vl[u],y=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",E=/^(?:pop|shift)$/.test(u);D.prototype[u]=function(){var I=arguments;if(E&&!this.__chain__){var M=this.value();return d.apply(st(M)?M:[],I)}return this[y](function(B){return d.apply(st(B)?B:[],I)})}}),Or(ct.prototype,function(u,d){var y=D[d];if(y){var E=y.name+"";Pt.call(io,E)||(io[E]=[]),io[E].push({name:d,func:y})}}),io[Wl(n,A).name]=[{name:"wrapper",func:n}],ct.prototype.clone=_m,ct.prototype.reverse=ym,ct.prototype.value=bm,D.prototype.at=je,D.prototype.chain=We,D.prototype.commit=Ne,D.prototype.next=Ft,D.prototype.plant=Kt,D.prototype.reverse=Ya,D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=Aa,D.prototype.first=D.prototype.head,Qo&&(D.prototype[Qo]=qn),D},no=Qg();vi?((vi.exports=no)._=no,dl._=no):Rn._=no}).call(ri)})(LB,Vf);class D6 extends ra.EventEmitter{}pA(D6,[j$,G$,W$,Y$,q$,K$]);var K2,Z2,T0;class d2 extends D6{constructor(n,r){super();Xe(this,T0,"");de(this,"appContext");de(this,"processingModes",[]);de(this,"processingTypes",[]);de(this,"v2",!0);de(this,"runningStatus",Gw.P_IDLE);de(this,"deviceDataValues",{});de(this,"elementDataValues",{});de(this,"builder");de(this,"deviceData");de(this,"checker");de(this,"processParams");de(this,"printInfo");de(this,"canvasImgUrl","");de(this,"fileHelper",(K2=window.MeApi)==null?void 0:K2.fileHelper);de(this,"uploadGcodeHelper",(Z2=window.MeApi)==null?void 0:Z2.uploadGcode);de(this,"addonStatus");de(this,"dataSource");de(this,"customData");de(this,"_walkBorderParams",{power:3,speed:160});this.config=n,this.deviceInfo={name:n.name,cover:n.cover,snCode:"",power:0,version:""},this.setupLifeCycle(),this.builder=new _B(n.calculateTime,this.hooks),this.config.checkRules&&(this.checker=new X$(this.config.checkRules,{connectType:this.config.connectType})),this.appContext=r,this.initProcessParams({config:this.config,deviceInfo:this.deviceInfo})}get processingAreaKey(){return""}queryProcessingRightSideBarCom(n){return{}}get xcsVersion(){return ee(this,T0)}start(){this.emit(pt.START_PROCESS)}pause(){this.emit(pt.PAUSE_PROCESS)}finish(){this.emit(pt.FINISH_PROCESS)}cancel(){this.emit(pt.CANCEL_PROCESS)}async checkDeviceIsReadyToUpload(){return!0}getProcessingSteps(n,r){return[]}set walkBorderParams({speed:n,power:r,mode:i}){this._walkBorderParams.power=r,this._walkBorderParams.speed=n,i&&(this._walkBorderParams.mode=i)}get walkBorderParams(){return this._walkBorderParams}async killGcodeWorker(){var n;(n=this.builder.motionBuilder)==null||n.destroy(),await this.builder.storage.clean()}async stopWalkBorder(){await this.apis.stopWalkBorder()}get id(){return this.config.id}get useSocket(){return this.config.canUseSocket}get walkBorderConfig(){const n=this.config.process.walkBorder,r=this.deviceInfo.power;return n[r]||n.default}setConfigs(n){this.apis.setConfigs(n)}async checkDeviceOnline(){if(!this.connected)return{type:b_.text,text:uA.device_is_offline}}async init(n,r){this.connectType=r,this.setupDevice(n,r);const i=await this.initDeviceInfo();return this.apis.queryRunningStatus&&(this.runningStatus=await this.apis.queryRunningStatus()),this.checker&&(this.checker.connectType=r),this.connected=!0,this.emit(this.LIFECYCLE.CONNECTED,this),{info:i}}makeFramePath({x:n,y:r,width:i,height:l}){const s=n+i,c=r+l;return`M${n}, ${r}L${s}, ${r}L${s}, ${c}L${n}, ${c}Z`}async exportGcode(){var s,c;const{finishInOneTime:n=!0}=this.config.process.buildParams,r=n===!1?this.processParams.parse():null;let i=await this.builder.gcode(r);const l=`${this.id}-${Qw(new Date,"yyyy-MM-dd HH-mm-ss")}.gc`;({}).VITE_PAD;{const{headCode:h,tailCode:p}=await this.builder.gcodeHeadAndTail(r);return(c=(s=window.MeApi)==null?void 0:s.fileHelper)==null?void 0:c.shareGCode(i,l,h,p)}return this.fileHelper&&(i=await this.fileHelper.readGcode(i)),xb(l,i,!1,{filters:[{name:"GCode",extensions:["gc"]}]})}uploadByBuilder(n){const{url:r="",path:i="",options:l={}}=n;return this.uploadGcodeHelper(r,i,l)}uploadGCodeByNative(n){var s;const{url:r="",path:i="",options:l={}}=n;return(s=window.MeApi)==null?void 0:s.uploadGcode(r,i,l)}async walkBorder(n){const{power:r,speed:i,source:l,running:s}=n;if(s)return this.apis.stopWalkBorder();const c={data:{source:l,power:r,speed:i,repeat:1},params:{...this.processParams.parse(),isWalkBorder:!0,isVector:!0}},h=await this.builder.border(c);await this.startWalkBorder(h,n)}getCurrentArea(n){const r=this.config.processingArea.base,i=this.config.processingArea.data.find(l=>l.key===`${n}${this.processingAreaKey}`)||r;return{base:r,current:i}}async checkProcessData({canvasData:n,centralAxisPosition:r,isWalkBorder:i=!1,dataSource:l}){var b;const s=l.currentDeviceData,{base:c,current:h}=this.getCurrentArea(s.mode),p=h||c,_=new PB(this._config.process).parse(n,s);return Gs(r)||(p.startX=r),this.processParams.isWalkBorder=i,this.processParams.totalSize=_.totalSize,this.processParams.processingArea=p,this.processParams.deviceData=s,this.processParams.deviceInfo=this.deviceInfo,this.printInfo={..._,params:{...this.processParams.parse(),version:this.appContext.version,enableRelative:!1}},(b=this.checker)==null?void 0:b.check({...this.printInfo,addonStatus:this.addonStatus,connected:this.connected},p)}async buildProcessGcode(n){const{printData:r,params:i}=this.printInfo,{finishInOneTime:l=!0}=this.config.process.buildParams;await new yB().resize(r),await this.builder.motion({params:i,data:r},l)}async setupDevice(n,r){const i=this.getProtocolConfig(r);i&&(n.apiParserNext?this.apis=n.apiParserNext(i):this.apis=n.apiParser(i)),this.device=n}takePicture(n){throw console.log({options:n}),new Error("device ext camera `takePicture` not implemented.")}exportLog(n="xcs_device_log.gz"){return{}.VITE_PAD?this.exportLogPad(n):this.apis.exportLog().then(r=>xb(n,r,!0,{filters:[]}))}async exportLogPad(n="xcs_device_log.gz"){const r=await this.apis.exportLog();i0(n,new Blob([r]))}getSpeed(n,r){const{speed:i={}}=this._config.deviceMetaData??{},l=i[n.mode],s=this.deviceInfo.power,{rotaryAttachmentType:c}=n,{processingType:h}=r;let p=[],g=[];if(ga(l)){const x=Object.keys(i)[0];return i[x][0]}const _=l.filter(x=>x.type===h);c&&(p=_.filter(x=>x[c]));const b=En(p)?_:p;return Us(s)&&s>0&&(g=b.filter(x=>x.power&&x.power.includes(s))),g[0]||p[0]||_[0]}getSpeedScope(n,r){const{VECTOR_ENGRAVING:i}=$u;if(r.processingType===i&&(n==null?void 0:n.rotaryAttachmentType)==="roller")return{max:25};if(r.processingType===i&&(n==null?void 0:n.rotaryAttachmentType)==="catch"){const s={max:120};return n.diameter&&n.diameter<32&&(s.max=Math.floor(1.17*Math.PI*n.diameter)),s}const l=this.getSpeed(n,r);return{min:l.min,max:l.max}}onLoad(){}onConnected(){this.connected=!0}onDisconnect(){this.connected=!1}onChange(){throw new Error("Method not implemented.")}onBeforeUnloaded(){this.dispose()}dispose(){var n;this.emit(ni.CLEAN_CANVAS_BACK_DROP),(n=this.device)==null||n.dispose(),this.removeAllListeners()}toJSON(){return{info:this.info}}}T0=new WeakMap;var zs=(e=>(e.LASER_PLANE="LASER_PLANE",e.LASER_CYLINDER="LASER_CYLINDER",e.FREE_PLANE="FREE_PLANE",e.PASS_THROUGH="PASS_THROUGH",e.SUPER_LASER_PLANE="SUPER_LASER_PLANE",e.KNIFE_CUT="KNIFE_CUT",e.PRINTER_KNIFE_CUT="PRINTER_KNIFE_CUT",e.LASER_CONVEYOR_FEEDER="LASER_CONVEYOR_FEEDER",e.CURVE_PROCESS="CURVE_PROCESS",e.LASER_CYLINDER_CURVED_SURFACE="LASER_CYLINDER_CURVED_SURFACE",e.LASER_EXTENDER="LASER_EXTENDER",e))(zs||{}),M6=(e=>(e.VECTOR_CUTTING="VECTOR_CUTTING",e.VECTOR_ENGRAVING="VECTOR_ENGRAVING",e.FILL_VECTOR_ENGRAVING="FILL_VECTOR_ENGRAVING",e.BITMAP_ENGRAVING="BITMAP_ENGRAVING",e.KNIFE_CUTTING="KNIFE_CUTTING",e))(M6||{});async function IB(e,t){const n=[];e.forEach(i=>{var l;(l=i==null?void 0:i.displays)==null||l.forEach(s=>{if(s.type===t){const c=s;n.push({base64:c.base64})}})});const r=n.map(i=>RB(i.base64).catch(console.warn));return Promise.all(r)}function RB(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=()=>{n()},r.src=e})}var $i,Rs,z1,ei;const ey=class{constructor(t){Xe(this,$i,new Map);Xe(this,Rs,new Set);Xe(this,z1,new OB(ey.ExpiredAt,()=>{this._autoClearAction()}));Xe(this,ei,void 0);if(typeof t!="function")throw Error("a function to get key must be provided");bt(this,ei,t)}_autoClearAction(){for(const t of ee(this,$i).keys())ee(this,Rs).has(t)||ee(this,$i).delete(t)}has(t){return ee(this,$i).has(ee(this,ei).call(this,t))}get(t){return ee(this,$i).get(ee(this,ei).call(this,t))}set(t,n){if(!t)throw TypeError("buffer不能为空");ee(this,$i).set(ee(this,ei).call(this,t),n)}delete(t){const n=ee(this,ei).call(this,t);return ee(this,Rs).has(n)?!1:(ee(this,$i).delete(n),!0)}setPersistent(t){ee(this,Rs).add(ee(this,ei).call(this,t))}cancelPersistent(t){ee(this,Rs).delete(ee(this,ei).call(this,t))}};let Zp=ey;$i=new WeakMap,Rs=new WeakMap,z1=new WeakMap,ei=new WeakMap,de(Zp,"ExpiredAt",1e4);class OB{constructor(t,n){de(this,"period");de(this,"timeout");de(this,"handler");if(!isFinite(t))throw TypeError("period must be a finite number");this.period=t,this.handler=n,this._setup()}_setup(){this.timeout=setTimeout(()=>{this.handler(),this._setup()},this.period)}}const DB=""+new URL("StardosStencil-Bold-c140c043.ttf",import.meta.url).href,MB=""+new URL("StardosStencil-Regular-51203997.ttf",import.meta.url).href,NB=""+new URL("LondrinaOutline-Regular-ca2ff899.ttf",import.meta.url).href,FB=""+new URL("Amita-Bold-fe189590.ttf",import.meta.url).href,$B=""+new URL("Amita-Regular-d62f55a6.ttf",import.meta.url).href,BB=""+new URL("Lobster-Regular-cddd7779.ttf",import.meta.url).href,UB=""+new URL("Atma-Bold-516a2b2d.ttf",import.meta.url).href,VB=""+new URL("Atma-Light-b8ae009b.ttf",import.meta.url).href,HB=""+new URL("Atma-Regular-159eb849.ttf",import.meta.url).href,zB=""+new URL("Combo-Regular-fac7723b.ttf",import.meta.url).href,jB=""+new URL("DancingScript-Bold-5a573995.ttf",import.meta.url).href,GB=""+new URL("DancingScript-Medium-8cc56496.ttf",import.meta.url).href,WB=""+new URL("DancingScript-Regular-49abeae0.ttf",import.meta.url).href,qB=""+new URL("AlegreyaSC-Bold-f0edaf1f.ttf",import.meta.url).href,YB=""+new URL("AlegreyaSC-Italic-2f721c67.ttf",import.meta.url).href,KB=""+new URL("AlegreyaSC-Medium-6e436b9c.ttf",import.meta.url).href,ZB=""+new URL("AlegreyaSC-Regular-4b93934f.ttf",import.meta.url).href,JB=""+new URL("Caveat-Bold-45449f54.ttf",import.meta.url).href,XB=""+new URL("Caveat-Medium-3d25c421.ttf",import.meta.url).href,QB=""+new URL("Caveat-Regular-2829d935.ttf",import.meta.url).href,eU=""+new URL("Caveat-SemiBold-93330e10.ttf",import.meta.url).href,tU=""+new URL("Gorditas-Bold-de4ced4a.ttf",import.meta.url).href,nU=""+new URL("Gorditas-Regular-682faef3.ttf",import.meta.url).href,rU=""+new URL("LifeSavers-Bold-847b7ab6.ttf",import.meta.url).href,aU=""+new URL("LifeSavers-Regular-ebd8d5d1.ttf",import.meta.url).href,iU=""+new URL("Shalimar-Regular-fcd0c5da.ttf",import.meta.url).href,oU=""+new URL("SpaceGrotesk-Bold-f67349bd.ttf",import.meta.url).href,sU=""+new URL("SpaceGrotesk-Light-aed318c7.ttf",import.meta.url).href,lU=""+new URL("SpaceGrotesk-Medium-49a8792c.ttf",import.meta.url).href,uU=""+new URL("SpaceGrotesk-Regular-c269c205.ttf",import.meta.url).href,cU=""+new URL("SpaceGrotesk-SemiBold-75d1d5cd.ttf",import.meta.url).href,fU=""+new URL("Grandstander-Bold-550a3818.ttf",import.meta.url).href,dU=""+new URL("Grandstander-BoldItalic-f0db65ea.ttf",import.meta.url).href,hU=""+new URL("Grandstander-Light-808951bd.ttf",import.meta.url).href,pU=""+new URL("Grandstander-LightItalic-a9df1044.ttf",import.meta.url).href,gU=""+new URL("Grandstander-Medium-1e073e8f.ttf",import.meta.url).href,mU=""+new URL("Grandstander-Regular-3ed05e7f.ttf",import.meta.url).href,vU=""+new URL("Grandstander-Thin-29047536.ttf",import.meta.url).href,_U=""+new URL("Lato-Bold-d7f0b7f2.ttf",import.meta.url).href,yU=""+new URL("Lato-BoldItalic-e38611f4.ttf",import.meta.url).href,bU=""+new URL("Lato-Italic-3be26bf6.ttf",import.meta.url).href,N6=""+new URL("Lato-Regular-e82542ae.ttf",import.meta.url).href,wU=""+new URL("DroidSansFallback-2e6c8efd.ttf",import.meta.url).href;function SU(e){return function(...t){var n=t.pop();return e.call(this,t,n)}}var xU=typeof queueMicrotask=="function"&&queueMicrotask,F6=typeof setImmediate=="function"&&setImmediate,$6=typeof process=="object"&&typeof process.nextTick=="function";function EU(e){setTimeout(e,0)}function kU(e){return(t,...n)=>e(()=>t(...n))}var bf;xU?bf=queueMicrotask:F6?bf=setImmediate:$6?bf=process.nextTick:bf=EU;var B6=kU(bf);function CU(e){return G_(e)?function(...t){const n=t.pop(),r=e.apply(this,t);return h2(r,n)}:SU(function(t,n){var r;try{r=e.apply(this,t)}catch(i){return n(i)}if(r&&typeof r.then=="function")return h2(r,n);n(null,r)})}function h2(e,t){return e.then(n=>{p2(t,null,n)},n=>{p2(t,n&&n.message?n:new Error(n))})}function p2(e,t,n){try{e(t,n)}catch(r){B6(i=>{throw i},r)}}function G_(e){return e[Symbol.toStringTag]==="AsyncFunction"}function TU(e){return e[Symbol.toStringTag]==="AsyncGenerator"}function AU(e){return typeof e[Symbol.asyncIterator]=="function"}function mn(e){if(typeof e!="function")throw new Error("expected a function");return G_(e)?CU(e):e}function mt(e,t=e.length){if(!t)throw new Error("arity is undefined");function n(...r){return typeof r[t-1]=="function"?e.apply(this,r):new Promise((i,l)=>{r[t-1]=(s,...c)=>{if(s)return l(s);i(c.length>1?c:c[0])},e.apply(this,r)})}return n}function W_(e,t,n,r){t=t||[];var i=[],l=0,s=mn(n);return e(t,(c,h,p)=>{var g=l++;s(c,(_,b)=>{i[g]=b,p(_)})},c=>{r(c,i)})}function ng(e){return e&&typeof e.length=="number"&&e.length>=0&&e.length%1===0}const rg={};function Gu(e){function t(...n){if(e!==null){var r=e;e=null,r.apply(this,n)}}return Object.assign(t,e),t}function PU(e){return e[Symbol.iterator]&&e[Symbol.iterator]()}function LU(e){var t=-1,n=e.length;return function(){return++t<n?{value:e[t],key:t}:null}}function IU(e){var t=-1;return function(){var r=e.next();return r.done?null:(t++,{value:r.value,key:t})}}function RU(e){var t=e?Object.keys(e):[],n=-1,r=t.length;return function i(){var l=t[++n];return l==="__proto__"?i():n<r?{value:e[l],key:l}:null}}function OU(e){if(ng(e))return LU(e);var t=PU(e);return t?IU(t):RU(e)}function Wu(e){return function(...t){if(e===null)throw new Error("Callback was already called.");var n=e;e=null,n.apply(this,t)}}function g2(e,t,n,r){let i=!1,l=!1,s=!1,c=0,h=0;function p(){c>=t||s||i||(s=!0,e.next().then(({value:b,done:x})=>{if(!(l||i)){if(s=!1,x){i=!0,c<=0&&r(null);return}c++,n(b,h,g),h++,p()}}).catch(_))}function g(b,x){if(c-=1,!l){if(b)return _(b);if(b===!1){i=!0,l=!0;return}if(x===rg||i&&c<=0)return i=!0,r(null);p()}}function _(b){l||(s=!1,i=!0,r(b))}p()}var di=e=>(t,n,r)=>{if(r=Gu(r),e<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!t)return r(null);if(TU(t))return g2(t,e,n,r);if(AU(t))return g2(t[Symbol.asyncIterator](),e,n,r);var i=OU(t),l=!1,s=!1,c=0,h=!1;function p(_,b){if(!s)if(c-=1,_)l=!0,r(_);else if(_===!1)l=!0,s=!0;else{if(b===rg||l&&c<=0)return l=!0,r(null);h||g()}}function g(){for(h=!0;c<e&&!l;){var _=i();if(_===null){l=!0,c<=0&&r(null);return}c+=1,n(_.value,_.key,Wu(p))}h=!1}g()};function DU(e,t,n,r){return di(t)(e,mn(n),r)}var q_=mt(DU,4);function MU(e,t,n){n=Gu(n);var r=0,i=0,{length:l}=e,s=!1;l===0&&n(null);function c(h,p){h===!1&&(s=!0),s!==!0&&(h?n(h):(++i===l||p===rg)&&n(null))}for(;r<l;r++)t(e[r],r,Wu(c))}function NU(e,t,n){return q_(e,1/0,t,n)}function FU(e,t,n){var r=ng(e)?MU:NU;return r(e,mn(t),n)}var Ks=mt(FU,3);function $U(e,t,n){return W_(Ks,e,t,n)}var BU=mt($U,3);function UU(e,t,n){return q_(e,1,t,n)}var qu=mt(UU,3);function VU(e,t,n){return W_(qu,e,t,n)}mt(VU,3);function HU(e,t,n,r){r=Gu(r);var i=mn(n);return qu(e,(l,s,c)=>{i(t,l,(h,p)=>{t=p,c(h)})},l=>r(l,t))}mt(HU,4);function zU(e,t,n,r){return W_(di(t),e,n,r)}var U6=mt(zU,4);function jU(e,t,n,r){var i=mn(n);return U6(e,t,(l,s)=>{i(l,(c,...h)=>c?s(c):s(c,h))},(l,s)=>{for(var c=[],h=0;h<s.length;h++)s[h]&&(c=c.concat(...s[h]));return r(l,c)})}var V6=mt(jU,4);function GU(e,t,n){return V6(e,1/0,t,n)}mt(GU,3);function WU(e,t,n){return V6(e,1,t,n)}mt(WU,3);function Yi(e,t){return(n,r,i,l)=>{var s=!1,c;const h=mn(i);n(r,(p,g,_)=>{h(p,(b,x)=>{if(b||b===!1)return _(b);if(e(x)&&!c)return s=!0,c=t(!0,p),_(null,rg);_()})},p=>{if(p)return l(p);l(null,s?c:t(!1))})}}function qU(e,t,n){return Yi(r=>r,(r,i)=>i)(Ks,e,t,n)}mt(qU,3);function YU(e,t,n,r){return Yi(i=>i,(i,l)=>l)(di(t),e,n,r)}mt(YU,4);function KU(e,t,n){return Yi(r=>r,(r,i)=>i)(di(1),e,t,n)}mt(KU,3);function ZU(e,t,n){n=Wu(n);var r=mn(e),i=mn(t),l;function s(h,...p){if(h)return n(h);h!==!1&&(l=p,i(...p,c))}function c(h,p){if(h)return n(h);if(h!==!1){if(!p)return n(null,...l);r(s)}}return c(null,!0)}mt(ZU,3);function H6(e){return(t,n,r)=>e(t,r)}function JU(e,t,n){return Ks(e,H6(mn(t)),n)}mt(JU,3);function XU(e,t,n,r){return di(t)(e,H6(mn(n)),r)}var QU=mt(XU,4);function eV(e,t,n){return QU(e,1,t,n)}var tV=mt(eV,3);function nV(e){return G_(e)?e:function(...t){var n=t.pop(),r=!0;t.push((...i)=>{r?B6(()=>n(...i)):n(...i)}),e.apply(this,t),r=!1}}function rV(e,t,n){return Yi(r=>!r,r=>!r)(Ks,e,t,n)}mt(rV,3);function aV(e,t,n,r){return Yi(i=>!i,i=>!i)(di(t),e,n,r)}mt(aV,4);function iV(e,t,n){return Yi(r=>!r,r=>!r)(qu,e,t,n)}mt(iV,3);function oV(e,t,n,r){var i=new Array(t.length);e(t,(l,s,c)=>{n(l,(h,p)=>{i[s]=!!p,c(h)})},l=>{if(l)return r(l);for(var s=[],c=0;c<t.length;c++)i[c]&&s.push(t[c]);r(null,s)})}function sV(e,t,n,r){var i=[];e(t,(l,s,c)=>{n(l,(h,p)=>{if(h)return c(h);p&&i.push({index:s,value:l}),c(h)})},l=>{if(l)return r(l);r(null,i.sort((s,c)=>s.index-c.index).map(s=>s.value))})}function ag(e,t,n,r){var i=ng(t)?oV:sV;return i(e,t,mn(n),r)}function lV(e,t,n){return ag(Ks,e,t,n)}mt(lV,3);function uV(e,t,n,r){return ag(di(t),e,n,r)}mt(uV,4);function cV(e,t,n){return ag(qu,e,t,n)}mt(cV,3);function fV(e,t){var n=Wu(t),r=mn(nV(e));function i(l){if(l)return n(l);l!==!1&&r(i)}return i()}mt(fV,2);function dV(e,t,n,r){var i=mn(n);return U6(e,t,(l,s)=>{i(l,(c,h)=>c?s(c):s(c,{key:h,val:l}))},(l,s)=>{for(var c={},{hasOwnProperty:h}=Object.prototype,p=0;p<s.length;p++)if(s[p]){var{key:g}=s[p],{val:_}=s[p];h.call(c,g)?c[g].push(_):c[g]=[_]}return r(l,c)})}mt(dV,4);function hV(e,t,n,r){r=Gu(r);var i={},l=mn(n);return di(t)(e,(s,c,h)=>{l(s,c,(p,g)=>{if(p)return h(p);i[c]=g,h(p)})},s=>r(s,i))}mt(hV,4);$6?process.nextTick:F6&&setImmediate;mt((e,t,n)=>{var r=ng(t)?[]:{};e(t,(i,l,s)=>{mn(i)((c,...h)=>{h.length<2&&([h]=h),r[l]=h,s(c)})},i=>n(i,r))},3);function pV(e,t){if(t=Gu(t),!Array.isArray(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var n=0,r=e.length;n<r;n++)mn(e[n])(t)}mt(pV,2);function Y_(e,t,n,r){const i=mn(n);return ag(e,t,(l,s)=>{i(l,(c,h)=>{s(c,!h)})},r)}function gV(e,t,n){return Y_(Ks,e,t,n)}mt(gV,3);function mV(e,t,n,r){return Y_(di(t),e,n,r)}mt(mV,4);function vV(e,t,n){return Y_(qu,e,t,n)}mt(vV,3);function _V(e,t,n){return Yi(Boolean,r=>r)(Ks,e,t,n)}mt(_V,3);function yV(e,t,n,r){return Yi(Boolean,i=>i)(di(t),e,n,r)}mt(yV,4);function bV(e,t,n){return Yi(Boolean,r=>r)(qu,e,t,n)}mt(bV,3);function wV(e,t,n){var r=mn(t);return BU(e,(l,s)=>{r(l,(c,h)=>{if(c)return s(c);s(c,{value:l,criteria:h})})},(l,s)=>{if(l)return n(l);n(null,s.sort(i).map(c=>c.value))});function i(l,s){var c=l.criteria,h=s.criteria;return c<h?-1:c>h?1:0}}mt(wV,3);function SV(e,t){var n=null,r;return tV(e,(i,l)=>{mn(i)((s,...c)=>{if(s===!1)return l(s);c.length<2?[r]=c:r=c,n=s,l(s?null:{})})},()=>t(n,r))}mt(SV);function xV(e,t,n){n=Wu(n);var r=mn(t),i=mn(e),l=[];function s(h,...p){if(h)return n(h);l=p,h!==!1&&i(c)}function c(h,p){if(h)return n(h);if(h!==!1){if(!p)return n(null,...l);r(s)}}return i(c)}mt(xV,3);function EV(e,t){if(t=Gu(t),!Array.isArray(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var n=0;function r(l){var s=mn(e[n++]);s(...l,Wu(i))}function i(l,...s){if(l!==!1){if(l||n===e.length)return t(l,...s);r(s)}}r([])}mt(EV);function m2(e,t="en"){if(!e)return"";const n=i=>typeof i=="string"&&i,r=i=>n(e[i])?e[i]:null;return r(t)??r("en")??Object.values(e).find(i=>n(i))??""}const Lf=(e,t,n)=>{const{name:r,fullName:i,postscriptName:l}=e,s=(r==null?void 0:r.records)??{},c=s.preferredFamily??s.fontFamily??{},h=m2(c),p=s.preferredSubfamily??s.fontSubfamily??{},g=m2(p);if(!(!h||!g||h.startsWith(".")))return{type:t,path:n,postscriptName:l,fullName:i,familyName:h,subfamilyName:g,familyNames:c,subfamilyNames:p}};function kV(e,t,n){var l,s;z6(e);const r=((s=(l=e==null?void 0:e.fvar)==null?void 0:l.instance)==null?void 0:s.reduce((c,h)=>h.name?Object.assign(c,{[h.name.en]:h.name}):c,{}))??[];function i(c,h,p){return`${c}-${h}${p!=="Regular"?`_${p.replace(/\s+/g,"-")}`:""}`}Object.keys(e.namedVariations).forEach(c=>{const h={...t,subfamilyName:c,subfamilyNames:r[c],postscriptName:i(e.familyName,e.subfamilyName,c),isVariation:!0};n.push(h)})}function z6(e){var r,i;if(!((r=e==null?void 0:e.fvar)!=null&&r.instance))return;const t=(i=e==null?void 0:e.name)==null?void 0:i.records;let n=0;e.fvar.instance.forEach(l=>{if(!l.name){const s={...t.fontSubfamily};n>0&&(s.en=`${s.en??"unknown"}_${n}`),l.name=s,n++}})}async function CV(e,t){try{if(!t)return[];const n=[],r=t.type;if(t.fonts)t.fonts.forEach(i=>{const l=Lf(i,r,e);l&&n.push(l)});else if(t.fvar){const i=Lf(t,r,e);i&&kV(t,i,n)}else{const i=Lf(t,r,e);i&&n.push(i)}return n}catch(n){return TV(e,n),[]}}function TV(e,t){console.error("ReadFontFileError:",e,`
`,t)}const AV=function(){return["Regular","Regular Italic","Italic","Oblique","Thin","Thin Italic","ExtraLight","ExtraLight Italic","UltraLight","UltraLight Italic","Light","Light Italic","Light Oblique","Medium","Medium Italic","Medium Oblique","Semibold","SemiBold Italic","Demi","DemiBold","DemiBold Italic","Bold","Bold Italic","Bold Oblique","ExtraBold","ExtraBold Italic","UltraBold","UltraBold Italic","Black","Black Italic","Black Oblique","Heavy","Heavy Italic","Heavy Oblique","ExtraBlack","UltraBlack","Condensed","Condensed Thin","Condensed Light","Condensed Medium","Condensed Bold","Condensed ExtraBold","Condensed Black"].reduce((t,n,r)=>Object.assign(t,{[Hf(n)]:r}),{})}();function PV(e,t,n){const r=Hf(e),i=Hf(t),l=n[r]??9999,s=n[i]??9999;return l!==s?l-s:r.localeCompare(i,void 0,{numeric:!0})}function Hf(e){return e.replace(/\s+/g,"").toLowerCase()}function LV(e){if(e&&typeof e=="string"){const t=/^[A-Za-z ]+$/;return e.split("").every(n=>t.test(n))}else return!1}const IV=function(){const e=[[["Thin"],"纤细体","纖細體"],[["Extra Light","Ultra Light"],"极细体","極細體"],[["Light"],"细体","細體"],[["Regular","Normal"],"常规","常規"],[["Medium"],"中等","中等"],[["Semi Bold","Demi Bold"],"半粗体","半粗體"],[["Bold"],"粗体","粗體"],[["Extra Bold","Ultra Bold"],"特粗体","半粗體"],[["Black","Heavy"],"黑体","黑體"],[["Extra Black","Ultra Black"],"特黑体","特黑體"]],t=[];return e.forEach(([n,...r])=>{n.forEach(i=>{t.push([Hf(i),...r])})}),t}();function RV(e){["zh","zh-TW","zh-HK","zh-Hant"].forEach(n=>{const r=e.names[n];if(r&&LV(r)){const i=Hf(r),l=IV.find(([s])=>s===i);if(l){let s;n==="zh"?s=l[1]:s=l[2],e.names[n]=s}}})}async function OV(e,t,n={}){const r=[];let i={};return await q_(e,4,async s=>{let c;return W6(s).then(async h=>{var g;c=h,(g=n.onLoadBuffer)==null||g.call(n,{path:s,bufferView:h});const p=await G6(h);return CV(s,p)}).then(h=>{h.forEach(p=>{var g;DV(p,i,t),(g=n.onEachFont)==null||g.call(n,{font:p,bufferView:c})})}).catch(h=>{r.push({path:s,error:h})})}),i=MV(i),r.length&&console.warn("load failed font list",r),i}function DV(e,t,n){const{familyNames:r,subfamilyNames:i,...l}=e;let s=t[e.familyName];s||(s={type:e.type,names:r,subFontFamilyType:"intergration",subFontFamilys:{},postscriptName:"",source:n},t[e.familyName]=s);const c={...l,names:i,familyName:e.familyName,source:n};s.subFontFamilys[e.subfamilyName]=c}function MV(e){const t=Object.entries(e).sort(([r],[i])=>r.localeCompare(i,void 0,{numeric:!0}));return t.forEach(([,r])=>{var l;const i=Object.entries(r.subFontFamilys).sort(([s],[c])=>PV(s,c,AV));if(i.forEach(([,s])=>RV(s)),r.subFontFamilys=Object.fromEntries(i),i.length>1){const s=i.map(([,h])=>h.path);new Set(s).size>1&&(r.subFontFamilyType="single")}r.postscriptName=(l=i[0][1])==null?void 0:l.postscriptName}),Object.fromEntries(t)}async function NV(){var n,r;const e=[],t=zV();if(t.length>0&&e.push({key:$s.BUILD_IN,paths:t}),globalThis!=null&&globalThis.MeApi){const i=await((r=(n=globalThis==null?void 0:globalThis.MeApi)==null?void 0:n.getFontPaths)==null?void 0:r.call(n))??[];i.length>0&&e.push({key:$s.SYSTEM,paths:i})}return e}function FV(){var e,t;return((t=(e=globalThis==null?void 0:globalThis.MeApi)==null?void 0:e.getOsPlatform)==null?void 0:t.call(e))??""}function j6(){var e,t;return((t=(e=globalThis==null?void 0:globalThis.MeApi)==null?void 0:e.getFetchFileHost)==null?void 0:t.call(e))??""}let zv;async function $V(){return zv||(zv=await wt(()=>import("../chunk/browser-module-58800335.js"),["../chunk/browser-module-58800335.js","../chunk/index-55948043.js","../chunk/xcs-vue-family-70642f71.js","../chunk/xcs-canvas-5c2592d6.js"],import.meta.url)),zv}async function G6(e,t=""){return e?(await $V()).create(e,t):void 0}async function W6(e){var r,i,l;if(!e)return;let t;const n=GV(e);return globalThis!=null&&globalThis.MeApi&&!n?t=await((l=(i=(r=globalThis==null?void 0:globalThis.MeApi)==null?void 0:r.fileHelper)==null?void 0:i.read)==null?void 0:l.call(i,e)):t=await BV(e),t}async function BV(e){const t=await fetch(e);return new Uint8Array(await t.arrayBuffer())}function v2(e){let t;if(typeof e=="string"&&e){const n=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]?|[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g;t=e.match(n)}return t??[]}function UV(){const e=Object.values(Object.assign({"/src/assets/fonts/build-in/01_Stardos_Stencil/StardosStencil-Bold.ttf":DB,"/src/assets/fonts/build-in/01_Stardos_Stencil/StardosStencil-Regular.ttf":MB,"/src/assets/fonts/build-in/02_Londrina_Outline/LondrinaOutline-Regular.ttf":NB,"/src/assets/fonts/build-in/03_Amita/Amita-Bold.ttf":FB,"/src/assets/fonts/build-in/03_Amita/Amita-Regular.ttf":$B,"/src/assets/fonts/build-in/04_Lobster/Lobster-Regular.ttf":BB,"/src/assets/fonts/build-in/05_Atma/Atma-Bold.ttf":UB,"/src/assets/fonts/build-in/05_Atma/Atma-Light.ttf":VB,"/src/assets/fonts/build-in/05_Atma/Atma-Regular.ttf":HB,"/src/assets/fonts/build-in/06_Combo/Combo-Regular.ttf":zB,"/src/assets/fonts/build-in/07_Dancing_Script/DancingScript-Bold.ttf":jB,"/src/assets/fonts/build-in/07_Dancing_Script/DancingScript-Medium.ttf":GB,"/src/assets/fonts/build-in/07_Dancing_Script/DancingScript-Regular.ttf":WB,"/src/assets/fonts/build-in/08_Alegreya_SC/AlegreyaSC-Bold.ttf":qB,"/src/assets/fonts/build-in/08_Alegreya_SC/AlegreyaSC-Italic.ttf":YB,"/src/assets/fonts/build-in/08_Alegreya_SC/AlegreyaSC-Medium.ttf":KB,"/src/assets/fonts/build-in/08_Alegreya_SC/AlegreyaSC-Regular.ttf":ZB,"/src/assets/fonts/build-in/09_Caveat/Caveat-Bold.ttf":JB,"/src/assets/fonts/build-in/09_Caveat/Caveat-Medium.ttf":XB,"/src/assets/fonts/build-in/09_Caveat/Caveat-Regular.ttf":QB,"/src/assets/fonts/build-in/09_Caveat/Caveat-SemiBold.ttf":eU,"/src/assets/fonts/build-in/10_Gorditas/Gorditas-Bold.ttf":tU,"/src/assets/fonts/build-in/10_Gorditas/Gorditas-Regular.ttf":nU,"/src/assets/fonts/build-in/11_Life_Savers/LifeSavers-Bold.ttf":rU,"/src/assets/fonts/build-in/11_Life_Savers/LifeSavers-Regular.ttf":aU,"/src/assets/fonts/build-in/12_Shalimar/Shalimar-Regular.ttf":iU,"/src/assets/fonts/build-in/13_Space_Grotesk/SpaceGrotesk-Bold.ttf":oU,"/src/assets/fonts/build-in/13_Space_Grotesk/SpaceGrotesk-Light.ttf":sU,"/src/assets/fonts/build-in/13_Space_Grotesk/SpaceGrotesk-Medium.ttf":lU,"/src/assets/fonts/build-in/13_Space_Grotesk/SpaceGrotesk-Regular.ttf":uU,"/src/assets/fonts/build-in/13_Space_Grotesk/SpaceGrotesk-SemiBold.ttf":cU,"/src/assets/fonts/build-in/14_Grandstander/Grandstander-Bold.ttf":fU,"/src/assets/fonts/build-in/14_Grandstander/Grandstander-BoldItalic.ttf":dU,"/src/assets/fonts/build-in/14_Grandstander/Grandstander-Light.ttf":hU,"/src/assets/fonts/build-in/14_Grandstander/Grandstander-LightItalic.ttf":pU,"/src/assets/fonts/build-in/14_Grandstander/Grandstander-Medium.ttf":gU,"/src/assets/fonts/build-in/14_Grandstander/Grandstander-Regular.ttf":mU,"/src/assets/fonts/build-in/14_Grandstander/Grandstander-Thin.ttf":vU,"/src/assets/fonts/build-in/15_Lato/Lato-Bold.ttf":_U,"/src/assets/fonts/build-in/15_Lato/Lato-BoldItalic.ttf":yU,"/src/assets/fonts/build-in/15_Lato/Lato-Italic.ttf":bU,"/src/assets/fonts/build-in/15_Lato/Lato-Regular.ttf":N6}));return e.length||console.error("Error: Build-in font assets is empty, check if font directory is the wrong place!"),e}function VV(){const e=Object.values(Object.assign({"/src/assets/fonts/build-in/15_Lato/Lato-Regular.ttf":N6}))[0];return e||console.error("Error: Default font is empty, check if font is the wrong place!"),e}function HV(){const e=Object.values(Object.assign({"/src/assets/fonts/DroidSansFallback.ttf":wU}))[0];return e||console.error("Error: Build-in fallback font is empty, check if font is the wrong place!"),e}var $s=(e=>(e.BUILD_IN="build-in",e.SYSTEM="system",e))($s||{});let Dp;function zV(){return Dp||(Dp=UV().map(t=>K_(t)),Dp)}function K_(e){var i;const t=new URL(import.meta.url).origin,n=j6();let r=new URL(e,(i=globalThis==null?void 0:globalThis.location)==null?void 0:i.origin).href;return n&&(r=r.replace(t,n)),r}function jV(){const e=j6(),t=["http:","https:","ws:","wws:"];return e&&t.push(e),new RegExp(`^(${t.join("|")})`)}let jv;function GV(e){return jv||(jv=jV()),jv.test(e)}let Mp;function hf(){return Mp||(Mp={familyName:"Lato",subfamilyName:"Regular",postscriptName:"Lato-Regular",source:"build-in",path:K_(VV())},Mp)}let Np;function R1(){return Np||(Np={familyName:"Droid Sans Fallback",subfamilyName:"Regular",postscriptName:"DroidSansFallback",source:"build-in",path:K_(HV())},Np)}const WV={win32:[{familyName:"Microsoft YaHei",subfamilyName:"Regular",postscriptName:"MicrosoftYaHei",source:"system"},{familyName:"Microsoft JhengHei",subfamilyName:"Regular",postscriptName:"MicrosoftJhengHeiRegular",source:"system"},{familyName:"SimHei",subfamilyName:"Regular",postscriptName:"SimHei",source:"system"},{familyName:"STSong",subfamilyName:"Regular",postscriptName:"STSong",source:"system"},{familyName:"SimSun",subfamilyName:"Regular",postscriptName:"SimSun",source:"system"},{familyName:"Yu Gothic",subfamilyName:"Regular",postscriptName:"YuGothic-Regular",source:"system"},{familyName:"Malgun Gothic",subfamilyName:"Regular",postscriptName:"MalgunGothic",source:"system"}],darwin:[{familyName:"PingFang SC",subfamilyName:"Regular",postscriptName:"PingFangSC-Regular",source:"system"},{familyName:"PingFang TC",subfamilyName:"Regular",postscriptName:"PingFangTC-Regular",source:"system"},{familyName:"STHeiti",subfamilyName:"Regular",postscriptName:"STHeiti",source:"system"},{familyName:"STSong",subfamilyName:"Regular",postscriptName:"STSong",source:"system"},{familyName:"SimSong",subfamilyName:"Regular",postscriptName:"SimSong-Regular",source:"system"},{familyName:"Toppan Bunkyu Gothic",subfamilyName:"Regular",postscriptName:"ToppanBunkyuGothicPr6N-Regular",source:"system"},{familyName:"Nanum Gothic",subfamilyName:"Regular",postscriptName:"NanumGothic",source:"system"},{familyName:"Arial Unicode MS",subfamilyName:"Regular",postscriptName:"ArialUnicodeMS",source:"system"}]};function qV(){const e=FV();return[R1()].concat(WV[e]??[])}const O1=25.4;var ti;class YV{constructor(){de(this,"fontList");de(this,"_getFontListPromise");Xe(this,ti,new Zp(t=>!t.familyName||!t.subfamilyName||!t.source?(console.warn("familyName, subfamilyName或source不应该为空",t),""):`[${t.familyName},${t.subfamilyName}],${t.source}`));de(this,"charToGlyph",new Map);de(this,"glyphCache",new Map);de(this,"currentFont");this._init()}_init(){[hf(),R1()].forEach(n=>{ee(this,ti).setPersistent(n),this.resolveFont(n)})}async getGroupedFontList(){return this.fontList?this.fontList:this._getFontListPromise?this._getFontListPromise:(console.time("getFontList"),this._getFontListPromise=NV().then(this._getFontGroupsAction),this.fontList=await this._getFontListPromise,console.timeEnd("getFontList"),this.fontList)}async _getFontGroupsAction(t){const n={},r=[];for(const i of t){const l=OV(i.paths,i.key,i.key===$s.BUILD_IN?{onEachFont:({font:s,bufferView:c})=>JV(s.postscriptName,c)}:void 0).then(s=>{const c={key:i.key,fonts:s};n[i.key]=c});r.push(l)}return Promise.allSettled(r).then(()=>n)}async preloadTextGlyphs(t){if(!t)return;const{fontFamily:n,fontSubfamily:r,fontSource:i,text:l,fontSize:s=O1}=t,c={familyName:n,subfamilyName:r,source:i};for(const h of v2(l)){const p=this._charKeyOf(h,c);if(this.charToGlyph.has(p))continue;let g;const _=await this._resolveCharGlyph(h,s,this.fontsForSearchGlyph(c)).catch(console.warn);if(_){const{fontData:b,glyphData:x,hasDef:k}=_;g=this._charKeyOf(k?h:"(.notdef)",b),this.glyphCache.has(g)||this.glyphCache.set(g,x)}this.charToGlyph.set(p,g)}}getTextGlyphsSync(t){if(!t)return;const{fontFamily:n,fontSubfamily:r,fontSource:i,text:l,fontSize:s=O1}=t,c={familyName:n,subfamilyName:r,source:i},h={};for(const b of v2(l)){const x=this._charKeyOf(b,c);let k=this.charToGlyph.get(x);if(k)h[b]=this.glyphCache.get(k);else{const T=this._getGlyphSync(b,s,this.fontsForSearchGlyph(c));if(T){const{fontData:P,glyphData:A,hasDef:L}=T;k=this._charKeyOf(L?b:"(.notdef)",P),this.glyphCache.has(k)||this.glyphCache.set(k,A),this.charToGlyph.set(x,k),h[b]=A}this.charToGlyph.set(x,k)}}const p=this._getCachedFont(c)??this._getCachedFont(hf());let g={};if(p){const b=Gv(p),x=(1/b||1e3)*s;g={unitsPerEm:b,lineHeight:Math.abs(p.ascent-p.descent)*x}}return{fontInfo:g,glyphData:h}}setCurrentFont(t){const n=t??{},r=this.currentFont??{};y2(n,r)&&(this.currentFont&&this.clearCurrentFont(),t&&(ee(this,ti).setPersistent(t),this.currentFont=t))}clearCurrentFont(){if(!this.currentFont)return;const t=this.currentFont;[hf(),R1()].find(i=>y2(t,i))||ee(this,ti).cancelPersistent(t),this.currentFont=void 0}async resolveFont(t){let n;if(ee(this,ti).has(t))n=ee(this,ti).get(t);else{const r=t.path||this.getFontPathInList(t.familyName,t.subfamilyName,t.source);r&&(n=await ZV(r,t).catch(console.warn),n&&ee(this,ti).set(t,n))}return n||console.warn("font is not available",t),n}_getCachedFont(t){return ee(this,ti).get(t)}getFontPathInList(t,n,r){var i,l,s,c,h;if(this.fontList)return(h=(c=(s=(l=(i=this.fontList)==null?void 0:i[r])==null?void 0:l.fonts[t])==null?void 0:s.subFontFamilys)==null?void 0:c[n])==null?void 0:h.path}getFont(t){var n,r,i,l,s;return(s=(l=(i=(r=(n=this.fontList)==null?void 0:n[t.fontSource])==null?void 0:r.fonts)==null?void 0:i[t.fontFamily])==null?void 0:l.subFontFamilys)==null?void 0:s[t.fontSubfamily]}getSubstitutedFontData(t){if(!this.fontList||this.getFont(t))return;let n,r;for(const l of Object.values($s))if(l!==t.fontSource&&(r={...t,fontSource:l},n=this.getFont(r),n))return r;const i=hf();return r={fontSource:$s.BUILD_IN,fontFamily:i.familyName,fontSubfamily:i.subfamilyName},r}_charKeyOf(t,n){return[t,[n.familyName,n.subfamilyName].join("|")].join("|")}async _resolveCharGlyph(t,n,r){const i=t.codePointAt(0);if(i!==void 0)try{let l;for(const s of r){const c=await this.resolveFont(s);if(c){const h=c.hasGlyphForCodePoint(i),p=c.glyphForCodePoint(i),g=_2(p,Gv(c),n);if(!g){console.warn("ignore empty glyphData  for",{char:t});continue}const _=!!g.dPath,b={fontData:s,glyphData:g,hasDef:h,isVisible:_};if(h)return b;!l&&_&&(l=b)}}return l}catch(l){console.error("fail resolve glyph",l)}}_getGlyphSync(t,n,r){const i=t.codePointAt(0);if(i!==void 0)try{let l;for(const s of r){const c=this._getCachedFont(s);if(c){const h=c.hasGlyphForCodePoint(i),p=c.glyphForCodePoint(i),g=_2(p,Gv(c),n);if(!g){console.warn("ignore empty glyphData  for",{char:t});continue}const _=!!g.dPath,b={fontData:s,glyphData:g,hasDef:h,isVisible:_};if(h)return b;!l&&_&&(l=b)}}return l}catch(l){console.error("fail get glyph",l)}}*fontsForSearchGlyph(t){t&&(yield t),yield hf(),yield*qV()}getFamilyItem(t){var n,r,i;return(i=(r=(n=this.fontList)==null?void 0:n[t.fontSource])==null?void 0:r.fonts)==null?void 0:i[t.fontFamily]}}ti=new WeakMap;function KV(e,t,n){if(!e)return;let r;if(e.type==="TTC"&&Array.isArray(e.fonts))r=e.fonts.find(i=>{const{subfamilyName:l}=Lf(i,i.type,"")||{};return l===n});else{const{subfamilyName:i}=Lf(e,e.type,"")||{};e.fvar?(z6(e),r=e.getVariation(n)):i===n&&(r=e)}return r||console.warn(`There has no actual font of [${t}, ${n}]`),r}function _2(e,t=1e3,n=O1){if(!e)return;let r=0,i=0;try{r=e.advanceWidth,i=e.advanceHeight}catch{}const l=1/t*n;return{dPath:e.getScaledPath(n).scale(1,-1).toSVG(),advanceWidth:r*l,advanceHeight:i*l}}async function ZV(e,t){if(!e)return;const n=await W6(e);let r=await G6(n);return r&&(r=KV(r,t.familyName,t.subfamilyName)),r}async function JV(e,t){var r,i;if(!e)return;const n=new FontFace(e,t);n.load(),(i=(r=globalThis==null?void 0:globalThis.document)==null?void 0:r.fonts)!=null&&i.add&&globalThis.document.fonts.add(n)}function y2(e,t){return e.familyName===t.familyName&&e.subfamilyName===t.subfamilyName&&e.source===t.source}function Z_(e){const t={fontFamily:"",fontSubfamily:"",fontSource:""},n=e.style;return n&&(t.fontFamily=(Array.isArray(n.fontFamily)?n.fontFamily[0]:n.fontFamily)??"",t.fontSubfamily=n.fontSubfamily??"",t.fontSource=n.fontSource??""),t}function bG(e){return{familyName:e.fontFamily,subfamilyName:e.fontSubfamily,source:e.fontSource}}function Gv(e){try{return e.unitsPerEm}catch{return 1e3}}function XV(e,t){const n=y_,r=Ow,i=Dw,l={[16421416]:n,[10036991]:r,[2597107]:r};return e.type===t.BITMAP?n:e.lineColor!==void 0&&e.lineColor in l?l[e.lineColor]:i}var q6=(e=>(e.REPLACE_FONT="replace-font",e.TO_PATHS="to-paths",e))(q6||{}),Y6=(e=>(e.Square="square",e.Round="round",e.Miter="miter",e))(Y6||{}),K6=(e=>(e.ClosedPolygon="closedPolygon",e.ClosedLine="closedLine",e.OpenButt="openButt",e.OpenSquare="openSquare",e.OpenRound="openRound",e))(K6||{}),Os,Ds;class Ui{static get clipperWorker(){let t=ee(this,Os);return t||(t=new wP,bt(this,Os,t)),t}static destroyClipperHelper(){var t;(t=ee(this,Os))==null||t.destroy(),bt(this,Os,null)}static get outlineWorker(){let t=ee(this,Ds);return t||(t=new f$,bt(this,Ds,t)),t}static destroyOutlineHelper(){var t;(t=ee(this,Ds))==null||t.destroy(),bt(this,Ds,null)}}Os=new WeakMap,Ds=new WeakMap,Xe(Ui,Os,void 0),Xe(Ui,Ds,void 0);Gx.converToLayerColor=e=>{const{r:t,g:n,b:r}=Ly(e).toRgb();let i=e,l;return XT.forEach(s=>{const{r:c,g:h,b:p}=Ly(s).toRgb(),g=Math.sqrt((t-c)*(t-c)+(n-h)*(n-h)+(r-p)*(r-p));l===void 0&&(l=g,i=s),g<l&&(i=s,l=g)}),i};const D1="center",M1="center";var pr,Ms,Eu;const Of=class{static get id(){return ee(this,Ms)}static set id(t){this.inactiveCanvas(ee(this,Ms)),bt(this,Ms,t),this.activeCanvas(t)}static get clipboardData(){return ee(this,Eu)}static set clipboardData(t){bt(this,Eu,t)}static get canvas(){return ee(this,pr).get(ee(this,Ms))}static get canvasList(){return ee(this,pr)}static getCanvas(t){return ee(this,pr).get(t)}static add(t,n){let r=n;return r||(r=this.createCanvas()),this.initSelectedCallback(r),ee(this,pr).set(t,r),r}static initSelectedCallback(t){const n=pa(),r=q1(l=>{var s;n.updateSelectedAttrs(((s=l.getData)==null?void 0:s.call(l))??l)},150),i=l=>{n.updateSelectedAttrs(l)};t.on(Sp.SELECT_OBJECT,l=>{i(l)}),t.on(Sp.SELECT_OBJECT_TRANSFORMERED,l=>{r(l)}),t.on(Sp.SELECTED_TRANSFORM_COMMIT,l=>{r(l)}),t.on(Sp.NEW_DISPLAYS_ADDED,l=>{n.newDisplaysAdded({id:this.id,data:l})})}static delete(t){const n=ee(this,pr).get(t);n==null||n.destroy(),ee(this,pr).delete(t)}static clear(){ee(this,pr).clear()}static get json(){const t=[];return ee(this,pr).forEach((n,r)=>{t.push({id:r,displays:n.exportCanvasJSON()})}),t}static get transformAttrConfig(){const t={shape:"ellipse",x:-11.6,y:-11.6,stroke:9610137,strokeAlpha:.3,padding:1,fill:16777215,fillActive:16777215},n=new nf({icon:"images/delete.png",iconHover:"images/delete_hover.png",...t,action:()=>{var c;return(c=this.canvas)==null?void 0:c.removeSelected()}}),r=new nf({icon:"images/copy.png",iconHover:"images/copy_hover.png",...t,action:()=>{var h,p;const c=(h=this.canvas)==null?void 0:h.exportSelectedJSON({texture:!0});c==null||c.forEach(g=>{g.x+=4,g.y+=4}),(p=this.canvas)==null||p.importDisplayJSON(c,{createNewID:!0})}}),i=new nf({icon:"images/unlock.png",iconHover:"images/unlock_hover.png",iconActive:"images/lock.png",iconActiveHover:"images/lock_hover.png",type:"checkbox",strokeActiveAlpha:.3,...t,action:()=>{var c;return(c=this.canvas)==null?void 0:c.updateLockAspectRatio()}}),l=new nf({icon:"images/scale.png",iconHover:"images/scale_hover.png",...t}),s=new nf({icon:"images/rotate.png",iconHover:"images/rotate_hover.png",...t,y:-15});return{topLeft:{component:n,stopEvent:!0},topRight:{component:r,stopEvent:!0},bottomLeft:{component:i,stopEvent:!0,bindAttrKey:"lockRatio"},bottomRight:{component:l},rotator:{component:s}}}static createCanvas(){const t=()=>{window.MeApi&&window.MeApi.fileHelper.deleteDictory("temporary","/imageProcess/")},n=new Hx({appConfig:{width:800,height:600,backgroundColor:14935268},viewportConfig:{worldWidth:400,worldHeight:300,offsetX:20,offsetY:20,align:zx.TOP_LEFT,fitOffsetRatio:0,grid:{lineColor:7633530,lineColor2:7633530,lineAlpha:.12,lineAlpha2:.3}},transformerConfig:{boundingBoxes:"all",defaultHandleMode:Zv.custom,handleModes:{custom:{handleStyle:{shape:"component",shapeAttrs:this.transformAttrConfig,hitAreaPadding:2,minSize:16,keepHandles:["rotator"],rotatorDistance:15}},pixi:{handleStyle:{shape:"square",radius:8,hitAreaPadding:2}}},wireframeStyle:{color:46336,thickness:1}},cursorConfig:[{name:"pen",url:"images/pen.svg",style:"2 2,auto"},{name:"cutter",url:"images/cutter.svg",style:"5 5,auto"},{name:"magicWand",url:"images/magicWand.svg",style:"6 6,auto"}],imageProcessConfig:{backdrop:"images/alpha-bg.png",cutter:{groupConfig:{space:4,separate:!0,margin:4,align:jx.center},confirm:{icon:"images/check-outlined.svg",iconHover:"images/check-outlined.svg",shape:Py.ellipse,iconSize:10,radius:10},cancel:{icon:"images/close-outlined.svg",iconHover:"images/close-outlined.svg",shape:Py.ellipse,iconSize:10,radius:10}},asyncMode:{enabled:!0,async saveImageData(r){if(window.MeApi){const{width:i,height:l}=r,{filePath:s}=await window.MeApi.fileHelper.saveFileWithFetch("temporary","/imageProcess/",r.data);return{filePath:s,width:i,height:l}}},async loadImageData(r){if(window.MeApi){const{filePath:i,width:l,height:s}=r,c=await window.MeApi.fileHelper.read2Buffer(i);return new ImageData(Uint8ClampedArray.from(c),l,s)}}},lifecycle:{onOpen(){t()},onClose(){t()},onSave(){t()}}},shortcutKeyConfig:{multiSelectKey:"Shift"}});return n.updateDisplayConfig({layerTag:a0,layerColor:a0,updateCanvasDisplay:!1}),n}static get size(){return ee(this,pr).size}static destroyAll(){ee(this,pr).forEach(t=>{t.destroy()}),this.clear(),bt(this,Eu,{canvasId:"",data:[]})}static hasChanged(){let t=!1;for(const[,n]of ee(this,pr))if(n&&n.currentState.enableUndo){t=!0;break}return t}static deserialize(t){const{id:n,displays:r}=t,i=this.add(n);return ma(r)&&i.importDisplayJSON(r,{createNewID:!1,needRecord:!1,autoSelected:!1}),i}static inactiveCanvas(t){var n;(n=ee(this,pr).get(t))==null||n.stop()}static activeCanvas(t){var n;(n=ee(this,pr).get(t))==null||n.start()}static async getOutlinePath(t,n,r){var l;if(n!==0){if(t!=null&&t.bitmapData){const{bitmapShot:s}=t.bitmapData,{width:c,canvas:h}=s,p=c/h.width;t.bitmapData.extendPoints=await Ui.clipperWorker.scaleOffsetPoints({pointsList:t.bitmapData.pathPointsList,options:{joinType:Y6.Round,pointScale:xp,offsetScale:p/xp,offset:n}})}if(t!=null&&t.vectorData){const{openPathPointsList:s=[],closePathPointsList:c=[]}=t.vectorData;if(c.length>0){const h=[];for(let p=0;p<c.length;p++)await Ui.clipperWorker.area({points:c[p]})===0&&(h.push(p),s.push(c[p]));t.vectorData.closePathPointsList=c.filter((p,g)=>!h.includes(g))}s.length>0&&(t.vectorData.shapeExtendPoints=await Ui.clipperWorker.scaleOffsetPoints({pointsList:t.vectorData.openPathPointsList,options:{endType:K6.OpenRound,pointScale:xp,offsetScale:1/xp,offset:n}}))}Ui.destroyClipperHelper()}return await((l=Ui.outlineWorker)==null?void 0:l.genOutline(n,r,t))}static async extractContours(t){var s,c;const r=t&&t.length>0?(s=Of.canvas)==null?void 0:s.getSpecifiedOutlineEleInfo:(c=Of.canvas)==null?void 0:c.getAllOutlineEleInfo,i=await(r==null?void 0:r.bind(Of.canvas)(.1,t));return i?await this.getOutlinePath(i,.1,{addBitmapInner:!1}):""}};let Ye=Of;pr=new WeakMap,Ms=new WeakMap,Eu=new WeakMap,Xe(Ye,pr,new Map),Xe(Ye,Ms,""),Xe(Ye,Eu,{canvasId:"",data:[]});window.MCMG=Ye;class Da{static get data(){const t=localStorage.getItem(this.KEY);if(!t)return{items:[]};try{return JSON.parse(t)}catch{return{items:[]}}}static add(t,n){const{items:r}=this.data,i=r.findIndex(l=>t.id===l.id);return i<0?r.push(t):Object.assign(r[i],t),localStorage.setItem(this.KEY,JSON.stringify({items:r,identity:t.id})),this.info=n,r}static get latest(){const{items:t,identity:n}=this.data;return t.find(r=>r.id===n)}static set info(t){localStorage.setItem(this.INFO_KEY,JSON.stringify(t))}static get info(){try{const t=localStorage.getItem(this.INFO_KEY);return t?JSON.parse(t):{}}catch{return{}}}}de(Da,"KEY","CONNECTED_DEVICES"),de(Da,"INFO_KEY","LATEST_CONNECTED_DEVICE_INFO");const QV={[sn.D1Pro]:()=>wt(()=>import("../chunk/index-5cf8f5a8.js").then(e=>e.i),["../chunk/index-5cf8f5a8.js","../chunk/xcs-canvas-5c2592d6.js","../chunk/xcs-vue-family-70642f71.js","../chunk/devicedata-18553816.js","../chunk/params-f8cc805d.js","../chunk/urlparam-4b6ed041.js"],import.meta.url),[sn.D1]:()=>wt(()=>import("../chunk/index-e7929b72.js").then(e=>e.i),["../chunk/index-e7929b72.js","../chunk/xcs-canvas-5c2592d6.js","../chunk/xcs-vue-family-70642f71.js","../chunk/devicedata-18553816.js","../chunk/params-f8cc805d.js","../chunk/urlparam-4b6ed041.js"],import.meta.url),[sn.M1]:()=>wt(()=>import("../chunk/xcs-ext-m1-src-b25864bd.js"),["../chunk/xcs-ext-m1-src-b25864bd.js","../chunk/xcs-canvas-5c2592d6.js","../chunk/index-55948043.js","../chunk/xcs-vue-family-70642f71.js","../chunk/use-message-cd8b9f19.js","../chunk/light-87cce264.js","../chunk/text-3b674000.js","../chunk/fade-in.cssr-8e3c8f09.js","../chunk/light-28752129.js","../chunk/space-5433d955.js","../chunk/use-style-1280d407.js","../chunk/button-00b27872.js","../chunk/loading-b06a4834.js","../chunk/element-17c18d0e.js","../chunk/grid-9031c693.js","../chunk/scrollbar-5a89bf25.js","../chunk/setting.vue_vue_type_script_setup_true_lang-0ee96bfb.js","../chunk/modal-c96d5b67.js","../chunk/setting.vue_vue_type_style_index_0_lang-315c55c2.js","../chunk/image-bad03660.js","../chunk/spin-afa417d1.js","../chunk/checkbox-9495194d.js","../chunk/inputnumber-fff11604.js","../chunk/headers-069f588a.js","../chunk/devicedata-18553816.js","../chunk/image-c9c8ff8c.js","../chunk/params-f8cc805d.js","../chunk/urlparam-4b6ed041.js"],import.meta.url),[sn.P2]:()=>wt(()=>import("../chunk/index-7dda6ca9.js").then(e=>e.i),["../chunk/index-7dda6ca9.js","../chunk/index-17630698.js","../chunk/xcs-canvas-5c2592d6.js","../chunk/image-c9c8ff8c.js","../chunk/xcs-vue-family-70642f71.js","../chunk/text-3b674000.js","../chunk/light-87cce264.js","../chunk/fade-in.cssr-8e3c8f09.js","../chunk/light-28752129.js","../chunk/button-00b27872.js","../chunk/space-5433d955.js","../chunk/use-style-1280d407.js","../chunk/loading-b06a4834.js","../chunk/setting.vue_vue_type_style_index_0_lang-315c55c2.js","../chunk/setting.vue_vue_type_script_setup_true_lang-0ee96bfb.js","../chunk/modal-c96d5b67.js","../chunk/scrollbar-5a89bf25.js","../chunk/image-bad03660.js","../chunk/spin-afa417d1.js","../chunk/checkbox-9495194d.js","../chunk/inputnumber-fff11604.js","../chunk/headers-069f588a.js","../chunk/use-message-cd8b9f19.js","../chunk/grid-9031c693.js","../chunk/params-f8cc805d.js","../chunk/device-845a051d.js","../chunk/urlparam-4b6ed041.js"],import.meta.url),[sn.F1]:()=>wt(()=>import("../chunk/index-3cae48f3.js").then(e=>e.i),["../chunk/index-3cae48f3.js","../chunk/xcs-canvas-5c2592d6.js","../chunk/devicedata-18553816.js","../chunk/xcs-vue-family-70642f71.js","../chunk/params-f8cc805d.js","../chunk/urlparam-4b6ed041.js","../chunk/device-845a051d.js"],import.meta.url),[sn.D2]:()=>wt(()=>import("../chunk/xcs-ext-d2-src-976dbd35.js"),["../chunk/xcs-ext-d2-src-976dbd35.js","../chunk/index-17630698.js","../chunk/xcs-canvas-5c2592d6.js","../chunk/constant-2a798a0e.js","../chunk/xcs-vue-family-70642f71.js","../chunk/divider-c77484ad.js","../chunk/light-87cce264.js","../chunk/modal-c96d5b67.js","../chunk/setting.vue_vue_type_style_index_0_lang-315c55c2.js","../chunk/button-00b27872.js","../chunk/space-5433d955.js","../chunk/use-style-1280d407.js","../chunk/loading-b06a4834.js","../chunk/scrollbar-5a89bf25.js","../chunk/fade-in.cssr-8e3c8f09.js","../chunk/image-bad03660.js","../chunk/spin-afa417d1.js","../chunk/laserposition.vue_vue_type_script_setup_true_lang-86881cde.js","../chunk/index-55948043.js","../chunk/text-3b674000.js","../chunk/light-28752129.js","../chunk/params-f8cc805d.js","../chunk/image-c9c8ff8c.js"],import.meta.url)};var Jp=(e=>(e.Connected="connected",e.Disconnected="disconnect",e.Error="error",e.ReceiveData="ReceiveData",e.TakePicture="TakePicture",e.StartProcess="StartProcess",e.PauseProcess="PauseProcess",e.StopProcess="StopProcess",e.EndProcess="EndProcess",e.CancelProcess="CancelProcess",e.StartMeasure="StartMeasure",e.EndMeasure="EndMeasure",e))(Jp||{});class If{static async load(t,n){let r=this.exts.get(t);try{const i=QV[t];if(i){const{DeviceExt:l,v2:s}=await i();if(s){const c=l(d2);r=new c(n)}else r=new l;return this.clear(),this.exts.set(t,r),s&&this.$ev.emit(this.EVENTS.CREATED,r),r}return Promise.reject(`can't found '${t}'.`)}catch(i){return Promise.reject(`load ext '${t}' error. ${i}`)}}static clear(){this.exts.forEach((t,n)=>{this.$ev.removeAllListeners(),t.dispose(),this.exts.delete(n)})}static ext(t){return this.exts.get(t)}static hasLoaded(t){return t?this.exts.size>0&&this.exts.has(t):!1}static build(){}static async loadExtFile(t){const n=async l=>{const s=await wt(()=>import(`${l}`),[],import.meta.url);if("DeviceExt"in s){const{DeviceExt:c,v2:h}=s;if(h){const p=c(d2),g=new p;this.exts.set(g.id,g),h&&(this.$ev.emit(this.EVENTS.CREATED,g),g.emit("load"))}}return s};if(lr(t))return n(t);if(t instanceof File&&t.path)return n(t.path);const r=await z0(t),i=new Function(`${r}`);console.log(i)}}de(If,"$ev",new ra.EventEmitter),de(If,"EVENTS",{CREATED:"created"}),de(If,"exts",new Map);const Vi=new YV;Sf.measureText=Vi.getTextGlyphsSync.bind(Vi);globalThis.fontManager=Vi;var eH=typeof WeakMap=="function",b2=Object.keys;function m0(e,t){return e===t||e!==e&&t!==t}function w2(e){return e.constructor===Object||e.constructor==null}function S2(e){return!!e&&typeof e.then=="function"}function x2(e){return!!(e&&e.$$typeof)}function tH(){var e=[];return{delete:function(t){for(var n=0;n<e.length;++n)if(e[n][0]===t){e.splice(n,1);return}},get:function(t){for(var n=0;n<e.length;++n)if(e[n][0]===t)return e[n][1]},set:function(t,n){for(var r=0;r<e.length;++r)if(e[r][0]===t){e[r][1]=n;return}e.push([t,n])}}}var nH=function(e){return e?function(){return new WeakMap}:tH}(eH);function Z6(e){return function(n){var r=e||n;return function(l,s,c,h,p,g,_){_===void 0&&(_=nH());var b=!!l&&typeof l=="object",x=!!s&&typeof s=="object";if(b!==x)return!1;if(!b&&!x)return r(l,s,_);var k=_.get(l);if(k&&_.get(s))return k===s;_.set(l,s),_.set(s,l);var T=r(l,s,_);return _.delete(l),_.delete(s),T}}}function rH(e,t,n,r){var i=e.length;if(t.length!==i)return!1;for(;i-- >0;)if(!n(e[i],t[i],i,i,e,t,r))return!1;return!0}function aH(e,t,n,r){var i=e.size===t.size;if(i&&e.size){var l={},s=0;e.forEach(function(c,h){if(i){var p=!1,g=0;t.forEach(function(_,b){!p&&!l[g]&&(p=n(h,b,s,g,e,t,r)&&n(c,_,h,b,e,t,r),p&&(l[g]=!0)),g++}),s++,i=p}})}return i}var iH="_owner",oH=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function E2(e,t,n,r){var i=b2(e),l=i.length;if(b2(t).length!==l)return!1;if(l)for(var s=void 0;l-- >0;){if(s=i[l],s===iH){var c=x2(e),h=x2(t);if((c||h)&&c!==h)return!1}if(!oH(t,s)||!n(e[s],t[s],s,s,e,t,r))return!1}return!0}var sH=function(){return/foo/g.flags==="g"?function(t,n){return t.source===n.source&&t.flags===n.flags}:function(t,n){return t.source===n.source&&t.global===n.global&&t.ignoreCase===n.ignoreCase&&t.multiline===n.multiline&&t.unicode===n.unicode&&t.sticky===n.sticky&&t.lastIndex===n.lastIndex}}();function lH(e,t,n,r){var i=e.size===t.size;if(i&&e.size){var l={};e.forEach(function(s,c){if(i){var h=!1,p=0;t.forEach(function(g,_){!h&&!l[p]&&(h=n(s,g,c,_,e,t,r),h&&(l[p]=!0)),p++}),i=h}})}return i}var uH=typeof Map=="function",cH=typeof Set=="function",k2=Object.prototype.valueOf;function gd(e){var t=typeof e=="function"?e(n):function(r,i,l,s,c,h,p){return n(r,i,p)};function n(r,i,l){if(r===i)return!0;if(r&&i&&typeof r=="object"&&typeof i=="object"){if(w2(r)&&w2(i))return E2(r,i,t,l);var s=Array.isArray(r),c=Array.isArray(i);return s||c?s===c&&rH(r,i,t,l):(s=r instanceof Date,c=i instanceof Date,s||c?s===c&&m0(r.getTime(),i.getTime()):(s=r instanceof RegExp,c=i instanceof RegExp,s||c?s===c&&sH(r,i):S2(r)||S2(i)?r===i:uH&&(s=r instanceof Map,c=i instanceof Map,s||c)?s===c&&aH(r,i,t,l):cH&&(s=r instanceof Set,c=i instanceof Set,s||c)?s===c&&lH(r,i,t,l):r.valueOf!==k2||i.valueOf!==k2?m0(r.valueOf(),i.valueOf()):E2(r,i,t,l)))}return r!==r&&i!==i}return n}gd();gd(function(){return m0});gd(Z6());gd(Z6(m0));var J2;const fH=((J2=window.MeApi)==null?void 0:J2.version)||"unknown",dH=["xcs"],J6=".xcs",wf="Untitled.xcs",hH=(e=0)=>({id:l5(),title:`{panel}${e+1}`,isHasCloseImg:!1,layerData:{},currentLayer:a0});var ed,Ns,ku,Fo,Cu;class or{static get date(){return+new Date}static get created(){return ee(this,ed)??this.date}static set created(t){bt(this,ed,t)}static get meta(){return ee(this,Ns)}static set meta(t){bt(this,Ns,t)}static get latestJson(){return ee(this,Fo)}static set latestJson(t){if(bt(this,Fo,t),!ee(this,ku))if(t===null)this.meta=null,this.created=null,bt(this,ku,!1);else{const{version:n,created:r,modify:i,ua:l=navigator.userAgent,meta:s}=t;this.created=r;let c=s??[];ma(c)||(c=[c]),this.meta=c.concat({version:n,date:i??this.date,ua:l})}}static get tempFile(){return ee(this,Cu)}static set tempFile(t){bt(this,Cu,t)}static cleanTempFile(){bt(this,Cu,void 0)}static toJson(t,n,r,i,l){var g;const s={id:r==null?void 0:r.id,power:(g=r==null?void 0:r.deviceInfo)==null?void 0:g.power,data:i==null?void 0:i.projectData,materialList:[],materialTypeList:[]};if((s==null?void 0:s.data)instanceof Map){const _=Kw(),b=[];s.data.forEach(x=>{var P;const k=(P=x.data[x.mode])==null?void 0:P.material,T=_.find(A=>A.id===k);T&&k&&!b.some(A=>A.id===T.id)&&b.push(T)}),s.materialList=b,console.log("保存项目的材料: ",b)}const c=+new Date,h={canvasId:t,canvas:[],extId:r==null?void 0:r.id,device:s,version:fH,created:this.created,modify:c,ua:navigator.userAgent,meta:[]};ee(this,Ns)&&(h.meta=ee(this,Ns));const p=Ye.json;return n.forEach(({id:_,title:b,layerData:x})=>{const k=p.find(T=>_===T.id);if(k)h.canvas.push({id:_,title:b,layerData:x,...k});else{const T=l.getCanvasById(_);h.canvas.push({...T})}}),h}static save(t){const{projectData:n,fileName:r,fileId:i,shotImg:l,saveAs:s}=t,c=(p,g)=>g instanceof Map?{dataType:"Map",value:Array.from(g.entries())}:g,h=s?"":i;return IA(r,JSON.stringify(n,c),h,l).then(p=>(this.latestJson=n,bt(this,ku,!0),p))}static async open(t){t||(t=await kA(dH));let n="",r="";return lr(t)?(n=t,r=Yw(t)):(n=t.path??"",r=t.name),{path:n,name:r,file:t}}static async parse(t){try{const n=await SA(t);return bt(this,Fo,n),n}catch(n){return Promise.reject(n)}}static rename(t,n){const r=CA(t,n);return r||`${n}${J6}`}static hasChanged(t,n,r,i,l){var k;const s=ee(this,Fo),c=this.toJson(t,n,r,i,l),h=c.canvas.length<=1&&En((k=c.canvas[0])==null?void 0:k.displays);if(!s&&h)return!1;const p=["version","base64","dPath","needUpdateCanvas","materialList","materialTypeList","projectID","ua","created","modify","charJSONs","meta","offsetX","offsetY"],g=["sourceId","groupTag","meta","ua","created","modify","version"],_=gd(T=>(P,A,L,F)=>{if(P===A||L===F&&p.includes(L))return!0;if(Us(P)&&Us(A)){const N=m1()===g1.MM?100:1e4,W=m1()===g1.MM?.01:1e-4,te=Math.floor(P*N)/N,G=Math.floor(A*N)/N,K=Math.abs(te-G),re=Math.floor(K*N)/N,H=re<=W;return console.log("oaNum="+te+" obNum+="+G+" distAbs="+K+" distFloor= "+re+" isEqual="+H),H}return T(P,A)}),b=T=>{gf(T).forEach(P=>{g.includes(P)?delete T[P]:typeof T[P]=="object"&&b(T[P])})};return b(s??{}),b(c),!_(s,c)}static reset(){bt(this,Fo,null),this.cleanTempFile()}}ed=new WeakMap,Ns=new WeakMap,ku=new WeakMap,Fo=new WeakMap,Cu=new WeakMap,Xe(or,ed,void 0),Xe(or,Ns,null),Xe(or,ku,!1),Xe(or,Fo,void 0),Xe(or,Cu,void 0);const pH=e=>{let t=null;if(e){const{power:n,name:r,snCode:i,type:l,version:s,id:c}=e;t={power:n,connectType:l,extId:c,name:r,snCode:i,version:s}}window.dataLayer.push({deviceInfo:t})},Wv=e=>{window.dataLayer.push({event:"connectDevice",content:{result:e.result,extId:e.extId}})},N1=25.4,X6=72,F1=e=>new DOMParser().parseFromString(e,"image/svg+xml").documentElement,gH=e=>{const t=e.width.baseVal.valueInSpecifiedUnits,n=e.height.baseVal.valueInSpecifiedUnits,{width:r,height:i}=e.viewBox.baseVal;let l=1,s=1;return e.width.baseVal.unitType!==SVGLength.SVG_LENGTHTYPE_PERCENTAGE&&(l=t/(r||t)),e.height.baseVal.unitType!==SVGLength.SVG_LENGTHTYPE_PERCENTAGE&&(s=n/(i||n)),{scaleX:l,scaleY:s}},Q6=e=>{if(!(e instanceof SVGSVGElement))return;e.style.visibility="hidden",document.body.appendChild(e);const{width:t,height:n}=e.getBBox(),r=document.createElementNS("http://www.w3.org/2000/svg","rect"),i=(c,h,p)=>{let g=0;return r[c].baseVal.newValueSpecifiedUnits(h,p),h===SVGLength.SVG_LENGTHTYPE_PX?g=r[c].baseVal.valueInSpecifiedUnits/(X6/N1):(r[c].baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_MM),g=r[c].baseVal.valueInSpecifiedUnits),g},l=[SVGLength.SVG_LENGTHTYPE_PERCENTAGE,SVGLength.SVG_LENGTHTYPE_NUMBER,SVGLength.SVG_LENGTHTYPE_EMS,SVGLength.SVG_LENGTHTYPE_EXS];let s=e.width.baseVal.unitType;return s=l.includes(s)?SVGLength.SVG_LENGTHTYPE_PX:s,document.body.removeChild(e),{width:i("width",s,t),height:i("height",s,n)}},mH=async e=>{const t=await z0(e),n=F1(t);if(n instanceof SVGSVGElement){const{width:r=0,height:i=0}=Q6(n)||{},{scaleX:l}=gH(n);return{source:n,width:r*l,height:i*l}}},vH=async e=>{const t=await z0(e),n=new l$,r=await n.preprocess(t);n.destroy();const i=F1(r.res);if(i instanceof SVGSVGElement){const{width:l=0,height:s=0}=Q6(F1(r.svg))||{};return{source:i,width:l,height:s}}},Lo=async e=>{var s,c;let t=e;e instanceof File&&e.path&&(t=e.path);const n=X6;let r,i,l;try{if((s=window.MeApi)!=null&&s.imageOptimize&&lr(t)){const{meta:g,tmpPath:_}=await((c=window.MeApi)==null?void 0:c.imageOptimize(t));r=await wb(_),i=g.width,l=g.height}else r=await wb(e),i=r.width,l=r.height;const h=i/n*N1,p=l/n*N1;return{source:r,width:h,height:p}}catch(h){console.log(h)}},C2={svg:{name:"svg",loader:mH},dxf:{name:"svg",loader:vH},png:{name:"bitmap",loader:Lo},jpg:{name:"bitmap",loader:Lo},jpeg:{name:"bitmap",loader:Lo},tiff:{name:"bitmap",loader:Lo},ico:{name:"bitmap",loader:Lo,shouldOptimize:!1},webp:{name:"bitmap",loader:Lo,shouldOptimize:!1},bmp:{name:"bitmap",loader:Lo,shouldOptimize:!1},gif:{name:"bitmap",loader:Lo,shouldOptimize:!1}},_H=async e=>{const t=lr(e)?e:e.name,r=TA(t).replace(".","").toLowerCase();if(r in C2){const{name:i,loader:l,shouldOptimize:s}=C2[r],c=await l(e,s);return{name:i,data:c}}};var zf=(e=>(e.AppVar="mockAppVersion",e.DeviceId="mockUpdateDeviceId",e.FirmwareVer="mockFirmwareVersion",e))(zf||{});const v0=(e,t)=>{const n=localStorage.getItem(e);return n||t||""},yH="https://msservice.makeblock.com/api/v1/package/version/latest",$1=e=>{var t;if(!(!lr(e)||En(e)))return(t=e.match(/\d+/g))==null?void 0:t.slice(0,4).map((n,r)=>Number(r===3?n.toString().substring(0,2):n))},T2=(e,t)=>{const n=$1(e);if(!n)return!1;const r=$1(t);if(!r)return!1;const[i,l,s,c]=n,[h,p,g,_]=r;return h>i||h===i&&p>l||h===i&&p===l&&g>s||h===i&&p===l&&g===s&&_>c},e4=async(e,t,n="",r,i=1e3)=>{try{const l=$1(e);if(ga(l))return Promise.reject(`[xcs error] can't parse version '${e}'`);const s=l==null?void 0:l.join("."),c={...t,contentVersion:s},h=v0(zf.DeviceId);h&&(c.deviceId=h);const p={method:"post",headers:{"content-type":"application/json;charset=UTF-8"},body:JSON.stringify(c)};i>0&&await c1(i);const g=await fetch(yH,p).then(A=>A.json()),{code:_,data:b}=g;if(_!==0)return Promise.reject(new Error(`[xcs error] request error, error code: '${_}'.`));const{version:x="",advice:k,extra:T={}}=b||{},P=T2(e,x)||ut(r)&&r(T);if(P&&!En(b==null?void 0:b.contents)){let A=!1;const{minAppVersion:L,...F}=T;L&&(A=T2(n,L));const N=b.contents.map(W=>W.url);return{shouldUpdate:P,latestVersion:x,downloadUrl:N,subVersions:F,changeLog:b.description,forceUpdate:k===1,appVersionLow:A}}return null}catch(l){return Promise.reject(l)}};class bH{static async isIphone(){return await window.MeApi.app.getOsPlatform()==="iPhone"}static async isAndroid(){return await window.MeApi.app.getOsPlatform()==="Android"}static async hastNetPermission(){return window.MeApi&&await this.isIphone()?await window.MeApi.permission.grantInternetPermission():!0}}const qv="firmwareRemind";var Oa;class t4{static get devices(){return ee(this,Oa)}static add(t){const n=ee(this,Oa).find(r=>r.id===t.id);if(n){const r=ee(this,Oa).indexOf(n);ee(this,Oa).splice(r,1),localStorage.setItem(qv,JSON.stringify(ee(this,Oa)))}ee(this,Oa).push({...t,time:+new Date}),localStorage.setItem(qv,JSON.stringify(ee(this,Oa)))}static has(t){const n=ee(this,Oa).find(r=>r.id===t.id);return n?+new Date-n.time<=2592e5:!1}}Oa=new WeakMap,Xe(t4,Oa,(()=>{const t=localStorage.getItem(qv);return t?JSON.parse(t):[]})());const wH=e=>{const t=pa(),n=ln();e.on(Oo.UPDATE_PROCESSING_AREA,r=>{Ye.canvasList.forEach((i,l)=>{if(r.canvasId===l){console.log(["=> UI_EVENT.UPDATE_PROCESSING_AREA"],r);const{width:s,height:c,angle:h=0,offsetX:p=0,offsetY:g=0,gridOption:_={cellSize2:JT}}=r.option;i.resizeViewport({viewportWidth:s,viewportHeight:c,angle:h,gridOption:_}),i.updateBackdrop({angle:h||0,offsetX:p,offsetY:g})}})}),e.deviceData.on(Oo.UPDATE_CANVAS_INIT_STATUS,r=>{console.log(["=> UI_EVENT.UPDATE_CANVAS_INIT_STATUS"],r),Ye.canvasList.forEach((i,l)=>{r.canvasId===l&&i.updateDisplayConfig(r.config)})}),e.deviceData.on(Oo.UPDATE_DISPLAYS_STATUS,r=>{if(console.log(["=> UI_EVENT.UPDATE_DISPLAYS_STATUS"]),r!=null&&r.canvasId&&!En(r==null?void 0:r.data)){const i=Ye.canvasList.get(r.canvasId);i==null||i.updateMultiDisplayConfig(r.data)}}),e.deviceData.on(Oo.UPDATE_SELECTED_ATTR_STATUS,r=>{if(console.log(["=> UI_EVENT.UPDATE_SELECTED_ATTR_STATUS"],r==null?void 0:r.data),r!=null&&r.canvasId&&!En(r==null?void 0:r.data)){const i=Ye.canvasList.get(r.canvasId);i==null||i.updateSelectedAttributes(r.data[0].config)}}),e.deviceData.on(Oo.UPDATE_CYLINDER_STATUS,r=>{var i;console.log(["=> UI_EVENT.UPDATE_CYLINDER_STATUS"]),(i=Ye.canvas)==null||i.createCentralAxis(r)}),e.deviceData.on(Oo.IMAGE_CALIBRATION,async()=>{console.log(["=> UI_EVENT.IMAGE_CALIBRATION"]),e.calibration()}),e.on(ni.MOVE_CYLINDER,r=>{console.log(["=> SYSTEM_EVENT.MOVE_CYLINDER"],r);const i=e.deviceData,l=t.currentId,s=i.data.value.get(l);if(s){const c=s.mode;if(i.needShowCylinder(c)){const{width:h}=i.getCurrentDeviceModeData(c);i.onChangeToCylinder(h-r)}}}),e.deviceData.on(Oo.CANCEL_CURRENT_CYLINDER,()=>{var r;console.log(["=> UI_EVENT.CANCEL_CURRENT_CYLINDER"]),(r=Ye.canvas)==null||r.destroyCentralAxis()}),e.on(ni.UPDATE_DEVICE_INFO,r=>{const i=ln();console.log(["=> SYSTEM_EVENT.UPDATE_DEVICE_INFO",r]),i==null||i.updateExtCenterInfo(r)}),e.on(ni.CLEAN_CANVAS_BACK_DROP,()=>{console.log("=> CLEAN_CANVAS_BACK_DROP"),t.clearCanvasBackdrop()}),e.on(ni.UPDATE_GMODE,()=>{var r;console.log(["=> SYSTEM_EVENT.UPDATE_GMODE"]),(r=e==null?void 0:e.deviceData)==null||r.onGModeOrPowerChange(t.canvasList.map(i=>i.id))}),e.on(ni.UPDATE_POWER,()=>{var r;console.log(["=> SYSTEM_EVENT.UPDATE_POWER"]),(r=e==null?void 0:e.deviceData)==null||r.onGModeOrPowerChange(t.canvasList.map(i=>i.id))}),e.on(ni.UPDATE_AUTO_FOCUS_REMAIN_MODAL_VISIBLE,r=>{n.setDeviceAutoFocusDialogStatus(r)})},SH=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((r,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t)))})},xH=["zh","zh-CN","en","en-US"],Ln={zh:"zh-CN",en:"en-US","zh-CN":"zh-CN","en-US":"en-US","zh-hant":"zh-hant","zh-TW":"zh-hant","zh-HK":"zh-hant",de:"de",es:"es",fr:"fr",it:"it",ja:"ja",ko:"ko",uk:"uk"},A2=Ln.en,ii={pc:"pc",pad:"pad",mobile:"mobile"},wG={[ii.pc]:[{lang:Ln.en,label:"English"},{lang:Ln.zh,label:"简体中文"},{lang:Ln["zh-hant"],label:"繁體中文"},{lang:Ln.de,label:"Deutsch"},{lang:Ln.es,label:"Español"},{lang:Ln.fr,label:"Français"},{lang:Ln.it,label:"Italiano"},{lang:Ln.ja,label:"日本語"},{lang:Ln.ko,label:"한국어"},{lang:Ln.uk,label:"Українська"}],[ii.pad]:[{lang:Ln.en,label:"English"},{lang:Ln.zh,label:"简体中文"}],[ii.mobile]:[{lang:Ln.en,label:"English"},{lang:Ln.zh,label:"简体中文"}]},EH={[ii.pc]:Object.keys(Ln),[ii.pad]:["en","en-US","zh","zh-CN"],[ii.mobile]:["en","en-US","zh","zh-CN"]},B1=[],P2=[];let Bs,J_=ii.pc;function n4(e){var t;(t=document.querySelector("html"))==null||t.setAttribute("lang",e)}function r4(e=J_){let t=G0().get("LANG_KEY")||navigator.language;const n=EH[e];if(!n.includes(t)){const r=t.split("-")[0];t=n.includes(r)&&Ln[r]?r:"en"}return Ln[t]}async function U1(e){let t={};try{if(xH.includes(e)){const n=await SH(Object.assign({"./lang/en-US.ts":()=>wt(()=>import("../chunk/en-us-bcec8f1b.js"),[],import.meta.url),"./lang/zh-CN.ts":()=>wt(()=>import("../chunk/zh-cn-17a13d83.js"),[],import.meta.url)}),`./lang/${Ln[e]}.ts`);t=n==null?void 0:n.default}else{const n=e.split("-")[0],r=await wt(()=>import("../chunk/index-91502247.js"),[],import.meta.url),i=r==null?void 0:r.default;t=i[e]||i[n]}}catch(n){console.log("locale getMessage err: ",n),t={}}return t??{}}async function kH(){const e=r4(J_),t=await U1(A2),n=await U1(e);return n4(e),B1.push(e),{locale:e,legacy:!1,fallbackLocale:Ln["en-US"],messages:{[A2]:t,[e]:n},globalInjection:!0,silentTranslationWarn:!0,missingWarn:!1,silentFallbackWarn:!0}}function L2(e){Bs.mode==="legacy"?Bs.global.locale=e:Bs.global.locale.value=e,n4(e)}async function CH(e){const t=Bs.global;if(t.locale===e)return e;if(B1.includes(e))return L2(e),e;const r=await U1(e);t.setLocaleMessage(e,r);for(let i=0;i<P2.length;i++){const l=P2[i](e);AH(e,l)}return B1.push(e),L2(e),e}async function TH(e=ii.pc){J_=e;const t=await kH();return Bs=Ex(t),Bs}function AH(e,t){const n=Bs.global,{messages:r,datetimeFormats:i,numberFormats:l}=t;r&&n.mergeLocaleMessage(e,r),i&&n.mergeDateTimeFormat(e,i),l&&n.mergeNumberFormat(e,l)}const jf=jo("system",{state:()=>({unit:tP(),version:"latest",langKey:r4(ii.mobile)||"en-US",downloadUrl:"",description:"",isShowed:!1}),actions:{updateUnit(e){this.unit={...this.unit,...t3(e)},eP(e)},async updateLangKey(e){e===this.langKey||!await CH(e)||(G0().set("LANG_KEY",e),this.langKey=e)},async checkVersionUpdate(e){var l,s;const t=await((l=window.MeApi)==null?void 0:l.appContentId()),n=await((s=window.MeApi)==null?void 0:s.getAppVersion()),i={domain:"xcs",region:this.langKey==="zh-CN"?"cn":"en",contentId:t,deviceId:e};try{const c=new Promise((g,_)=>{setTimeout(()=>{_("timeout")},5e3)}),h=e4(v0(zf.AppVar,n),i),p=await Promise.race([c,h]);return Promise.resolve(p)}catch(c){return Promise.reject(c)}}}});var td;class PH{constructor(t){Xe(this,td,"latest");bt(this,td,t.version)}get version(){return ee(this,td)}showMessage(t){console.log(t)}destroyMessage(t,n){console.log(t,n)}updateBackImg(t){console.log(t)}updateBackVisible(t){console.log(t)}updateLocalImg(t,n){console.log(t,n)}resetProcessingState(){console.log("resetProcessingState"),Bo().$reset()}changeProcessState(t,n){console.log(t,n)}selectCanvasAllElement(){console.log("selectCanvasAllElement")}moveSelectElement(t){console.log(t)}updateBuildParams(t={isWalkBorder:!1}){console.log(t)}}td=new WeakMap;const I2=()=>({show:!1,checking:!1,manualCheckUpdate:!1,shouldUpdate:!1,latestVersion:"",downloadUrl:[],subVersions:{},changeLog:"",forceUpdate:!1}),R2=()=>({show:!1,title:"",showCancelButton:!0,cancelButtonText:"common.msg.cancel",confirmButtonText:"common.msg.ok",textAlign:"center",dialogContents:[]}),O2=()=>({show:!1,showClose:!1,title:"",img:"",textAlign:"center",fBtnDirection:"column",contentList:[],footerBtn:[]}),ln=jo("ext-center",{state:()=>({supportDevices:[sn.D1Pro,sn.F1,sn.D1,sn.D2],extId:"",info:Da.info,identify:"",connected:!1,wifiConnect:!1,connectConfirmVisible:!1,connectDeviceData:void 0,firmwareUpdating:!1,deviceFirmware:I2(),wifiDevices:[],wifiDevicesLoading:!1,isConnecting:!1,disconnectModalVisible:!1,globalDialog:R2(),isShowDeviceAutoFocusDialog:!1,globalTipDialog:O2(),isLoadingExt:!1}),getters:{isFrameMode(){return[pt.FRAME_READY,pt.FRAME_WORKING].includes(this.info.currentStatus)&&this.connected},isInProcessing(){return[pt.PAUSE_PROCESS,pt.BEFORE_START,pt.START_PROCESS,pt.DRAIN].includes(this.info.currentStatus)},ext(e){return e.extId?If.ext(e.extId):null},showUpdateFirmware(e){const{extId:t}=e;if(!t)return!1;const{show:n,shouldUpdate:r,latestVersion:i,manualCheckUpdate:l}=e.deviceFirmware||{},s=t4.has({id:t,version:i});return!!(n&&r&&(l||s===!1))},dataSource(e){if(e.extId)return vf.dataSource}},actions:{setGlobalDialogStatus(e){Object.assign(this.globalDialog,e)},resetGlobalDialogStatus(){this.globalDialog=R2()},resetGlobalTipDialogStatus(){this.globalTipDialog=O2()},setDeviceAutoFocusDialogStatus(e){this.isShowDeviceAutoFocusDialog=e},resetDeviceFirmware(){this.deviceFirmware=I2()},async beforeLoadExt(e){this.isConnecting=!0;const t=this.extId&&this.extId!==e.product;return t?(this.connectConfirmVisible=!0,this.connectDeviceData=e):(ff.stopWifiList(),this.wifiDevicesLoading=!1,await this.loadConnectedExt(e)),t},async loadConnectedExt(e){var r;if(console.log(e),this.isConnecting=!0,En(e)){this.isConnecting=!1;return}if(e.id===this.identify&&this.connected===!0&&this.ext!==void 0){this.isConnecting=!1;return}const t=ff.getDevice(e.id),n=await this.loadExt(e.product);if(console.log("loadExt ext======"+n.id),n&&t&&t.hasOpen())try{const i=((r=n==null?void 0:n.config)==null?void 0:r.dataFromSocket)===!0;ut(t.setup)&&i&&await t.setup(n.useSocket??!0);const s=await n.init(t,e.type)??{};ut(t.setup)&&await t.setup(n.useSocket??!0);const c={...e,...n.info,...s.info,id:n.id,currentStatus:this.info.currentStatus};this.info=c,this.identify=e.id,this.wifiConnect=e.type===gr.WIFI,this.connected=!0,Da.add(e,c),pH(c),Wv({result:"success",extId:n.id,connectType:e.type})}catch(i){return console.log(i),Wv({result:"fail",extId:n.id,connectType:e.type}),Promise.reject(i)}finally{this.isConnecting=!1}else return this.isConnecting=!1,Wv({result:"fail",extId:n.id,connectType:e.type}),Promise.reject("device is not connected, ext is not define.")},async loadExt(e){var h;this.isLoadingExt=!0;const t=this.ext,n=(h=this.dataSource)==null?void 0:h.projectData,r=jf(),i=new PH({version:r.version}),l=await If.load(e,i),s=t==null?void 0:t.customData,c=t==null?void 0:t.id;if(l){l.id!==c?(vf.init(l,Ye),s==null||s.init()):vf.update(l),l.dataSource=vf.dataSource,s&&(l.customData=s);const p=dw();l.on(Jp.Connected,k=>{this.checkUpdateFirmware(k),p.clearErrorIgnoreList()}),l.on(Jp.Disconnected,k=>{this.identify===k&&(this.connected=!1)}),l.on(Jp.Error,k=>{console.log(["=> ExtEvents.Error"],k),p.pushDeviceError(k)}),wH(l);const{id:g,info:_}=l,{info:b}=Da,x={id:g,..._};b.id===g&&Object.assign(x,b),this.extId="",this.extId=g,this.info=x,Da.info=this.info,this.connected=!1,(t==null?void 0:t.id)!==g&&(t!=null&&t.id)&&this.createdDeviceData(n)}return this.isLoadingExt=!1,l},async loadExtByIP(e,t){this.isConnecting=!0;const n=await ff.ipDirectly(e,t||gr.WIFI);if(!n)return this.isConnecting=!1,Promise.reject(`device not found. ip: ${e}, type: ${t}.`);await this.beforeLoadExt(n)},createdDeviceData(e){const t=[];e?e.forEach((n,r)=>{const i=[];n.displays.forEach(({type:l,processingType:s},c)=>{i.push({id:c,type:l,processingType:s})}),t.push({id:r,displays:i})}):Ye==null||Ye.canvasList.forEach((n,r)=>{const i=[];n.exportCanvasJSON().forEach(({type:s,isFill:c,id:h})=>{i.push({id:h,type:s,isFill:c})}),t.push({id:r,displays:i})}),this.dataSource&&this.dataSource.resetData(t)},async checkUpdateFirmware(e,t){if(e=e||this.ext,!e||e&&!e.connected)return Promise.reject(new Error("ext is not load or ext device is disconnected"));const n=this.info,r={domain:"xcs",region:"en",contentId:e.contentId},i=v0(zf.FirmwareVer,n.version),l=ut(e.checkFirmwareVersion)&&e.checkFirmwareVersion(),s=jf(),c=v0(zf.AppVar,s.version),h=await e4(i||"",r,c,l);return h?(this.deviceFirmware=Object.assign(this.deviceFirmware||{},{manualCheckUpdate:!!t,show:!0,...h}),!0):!1},async tryAutoConnectDevice(){var r;const e=Da.latest;e||this.ext||this.loadExt(Da.info.id);const t=async()=>{var i;return!(this.isLoadingExt||this.isConnecting||this.connected||this.firmwareUpdating||!e||e&&this.ext&&((i=this.ext)==null?void 0:i.id)!==(e==null?void 0:e.product)||!await bH.hastNetPermission())};if(console.log(["=> tryAutoConnectDevice",t(),e]),await t()&&e)try{if(console.debug(["=> try auto connect",this.connected,e,(r=this.ext)==null?void 0:r.id]),(e==null?void 0:e.type)===gr.SERIAL){const i=await ff.serialDirectly(e.id);Object.assign(e,i),e.version&&await this.beforeLoadExt(e)}else await this.loadExtByIP(e.id,e.type)}catch(i){console.error("[tryAutoConnectDevice]",i)}setTimeout(()=>{this.tryAutoConnectDevice()},5e3)},async updateDeviceInfo(){var e;try{const t=await((e=this.ext)==null?void 0:e.initDeviceInfo());this.info=Object.assign(this.info,t||{})}catch(t){console.log("updateDeviceInfo",t)}},updateExtCenterInfo(e){this.info=Object.assign(this.info,e||{}),Da.info=this.info},updateDeviceSettingInfo(e){var t,n;(t=this.ext)==null||t.updateDeviceInfo(e),this.info=Object.assign(this.info,((n=this.ext)==null?void 0:n.deviceInfo)||{},e||{})},async findDeviceByWifi(){try{this.wifiDevicesLoading=!0,this.wifiDevices=[],await ff.wifiList({useGateway:!0,onDiscover:e=>{!this.wifiDevices.some(t=>t.ip===e.ip)&&e.product&&this.wifiDevices.push(e)}})}catch(e){console.log(["=> findDeviceByWifi"],e)}finally{this.wifiDevicesLoading=!1}},async updateFirmware(e){var n,r;const t=this.ext;t&&(await(t==null?void 0:t.updateFirmware({...e,port:(n=this.info)==null?void 0:n.port,wifiConnect:this.wifiConnect,subVersions:(r=this.deviceFirmware)==null?void 0:r.subVersions})),this.updateDeviceInfo())},clearConnectConfirmState(){this.connectConfirmVisible=!1,this.connectDeviceData=void 0}}});function LH(e,t,n){var c,h;let r=!1,i=!0;const l=new Set,s=new Set;for(let p=0;p<e.length;p++)(h=(c=e[p])==null?void 0:c.displays)==null||h.forEach((g,_)=>{var b;if(g.layerTag===void 0||g.layerColor===void 0){const x=XV(g,n);g.layerTag=x,g.layerColor=x}if(g.type===ad.TEXT){let x=g;Sf.isTextNeededAdapt(x)&&(x=Object.assign(x,Sf.adaptMText(x)),r=!0),i&&!Sf.detectSupportTextToPath(x)&&(i=!1),(b=x.style)!=null&&b.fontSource||(x.style.fontSource=$s.SYSTEM);const k=Z_(x);t.getFont(k)||(l.add(k.fontFamily),s.add({canvasIndex:p,canvasId:e[p].id,displayIndex:_,text:x,fontAttrs:k}))}});return{hasBetaText:r,supportTextToPath:i,lossFonts:l,lossFontTextInfos:s}}function D2(e,t){const n=new Map;for(const{text:r,fontAttrs:i}of e){const l=[i.fontSource,i.fontFamily,i.fontSubfamily].join(";");let s;n.has(l)?s=n.get(l):(s=t.getSubstitutedFontData(i),n.set(l,s)),s&&(r.style.fontFamily=s.fontFamily,r.style.fontSubfamily=s.fontSubfamily,r.style.fontSource=s.fontSource)}}function IH(e,t){const n=[];for(const{text:r,canvasIndex:i,displayIndex:l}of e){const s=Sf.convertTextJSONToPathJSONs(r),c=t[i];c.displays&&(c.displays[l]=s),n.push({canvasId:c.id,text:r,paths:s})}for(const r of t)r.displays&&(r.displays=r.displays.flat());return n}async function RH(e,t){const n=[];if(e.forEach(r=>{var i;(i=r==null?void 0:r.displays)==null||i.forEach(l=>{if(l.type===ad.TEXT){const s=l;n.push({...Z_(s),text:s.text})}})}),n.length)for(const r of n)await t.preloadTextGlyphs(r)}class V1{constructor(t,n){de(this,"_canvasMap",new Map);de(this,"_id");t.forEach(r=>{this._canvasMap[r.id]=r}),this._id=n}set id(t){this._id=t}get id(){return this._id}get currentCanvas(){return this._canvasMap[this._id]}getCanvasById(t){return this._canvasMap[t]}updateCanvas(t,n){this._canvasMap[t]=n}}let Yv;const ig=jo("material",{state:()=>({formValues:{search:"",categoryId:0,isSupport:!0},localMaterial:Kw(),pagination:{current:1,pageSize:15,total:0},onlineMaterials:[],categoryList:[],processingTypes:[]}),getters:{materialList(){const e=ln(),t=e.ext,{power:n=0}=e.info;let r=[];return r=PA({identifier:t!=null&&t.v2?t.config.productID:t==null?void 0:t.productID,power:n,materialList:this.localMaterial.slice(0)}),r.unshift(AA),r}},actions:{selectOnlineMaterial(e){const t=this.localMaterial.slice(0),n=t.findIndex(r=>r.id===e.id);if(n>=0?t[n]=e:t.unshift(e),this.localMaterial=t,Eb(t),e.id&&e.id){const r=this.materialList.find(i=>i.id===e.id);r&&this.selectOnlineMaterialHandler&&this.selectOnlineMaterialHandler("material",r)}},async getUpdateMaterial(e){try{return await KT(e)}catch(t){return console.log(t),!1}},async getMaterialCategoryList(){try{const t=(await ZT()).map(n=>({value:n.id,text:n.name}));this.categoryList=t}catch(e){console.log(e)}},updateLocalMaterialList(e){this.localMaterial=e,Eb(e)},async updateLocalMaterial(){const e=this.localMaterial.slice(0);Yv||(Yv=(await wt(()=>import("../chunk/material-1204fb96.js"),[],import.meta.url)).default),Yv.forEach(r=>{const i=e.findIndex(l=>l.id===r.id);i>=0?r.updatedAt>e[i].updatedAt&&(e[i]=r):e.push(r)}),this.updateLocalMaterialList(e);const t=e.map(({id:r,updatedAt:i})=>({id:r,updatedAt:i})),n=await this.getUpdateMaterial(t);ma(n)&&n.forEach(r=>{const i=e.findIndex(l=>l.id===r.id);i>=0&&(e[i]=r)}),this.updateLocalMaterialList(e)},sortLocalMaterial(e){const t=this.localMaterial.slice(0),r=Wx(t,i=>i.id===e).concat(t);this.updateLocalMaterialList(r)},importProjectMaterial(e){if(console.log("导入项目的材料: ",e),!En(e)){const t=this.localMaterial.slice(0);e.forEach(n=>{t.some(r=>r.id===n.id)||t.unshift(n)}),this.updateLocalMaterialList(t)}}}}),M2={path:wf,fileId:"",fileName:"",status:"default",saveConfirm:!1,editStatusProjectPath:"",isBackProjects:!1,isNotSupportedFile:!1,isBackIndexPage:!1,isNotConnectToastVisible:!1,dialogTxt:"",isProcessingOpenFileToastVisible:!1},og=jo("project",{state:()=>M2,getters:{projectName(){let e=wf;return this.fileName&&(e=this.fileName),Yw(e,J6)}},actions:{reset(){this.path=wf,this.fileId="",this.fileName="",this.status="default",this.saveConfirm=!1},showNotSupportedFileDialog(e,t=""){this.isNotSupportedFile=e,this.dialogTxt=t},setProcessingOpenFileToastVisible(e){this.isProcessingOpenFileToastVisible=e},setBackIndexPage(e){this.isBackIndexPage=e},setNotConnectToastVisible(e){this.isNotConnectToastVisible=e},async newProject(){return this.openProject({newProject:!0})},setEditStatusProjectPath(e){this.editStatusProjectPath=e},setBackStatusProjects(e){this.isBackProjects=e},async saveCurrentCanvas(){var l;const e=this.canvasDataWrapper.id,t=pa(),{canvasList:n}=t,r=n.find(s=>e===s.id),i=Ye.json;(l=this.canvasDataWrapper)==null||l.updateCanvas(e,{id:e,title:r.title,layerData:r.layerData,...i[0]})},async setCanvasId(e){this.canvasDataWrapper&&(Ye.destroyAll(),await this.loadCanvas(e))},async loadCanvas(e){if(this.canvasDataWrapper){await IB([this.canvasDataWrapper.currentCanvas],ad.BITMAP);const t=this.canvasDataWrapper.getCanvasById(e);await OH({canvas:[t],version:this.version??""});const n=Ye.deserialize(t||{});n&&n.start(),this.canvasDataWrapper.id=e}},async openProjectByUrl(e){const{url:t,name:n}=e||{},r=await fetch(t).then(i=>i.blob()).then(i=>new File([i],n));return this.openProject({file:r})},async openProject(e){const t=pa(),n=ln(),{file:r,fileName:i,fileId:l,newProject:s,openFromFile:c}=e||{};if((()=>{const p=r instanceof File?r.path:r;return lr(p)&&p===this.path})()){console.log("checkSameFile--------");return}if(c){let p,g;{if(p=await new Promise(_=>{this.changeSaveStatus({saveConfirm:!0,confirm:{yes(){_("yes")},no(b){g=b,_("no")},cancel(){_("cancel")}}})}),p==="cancel")return Promise.reject("open file error. [cancel]");if(p==="yes"&&await this.saveProject(),this.changeSaveStatus({saveConfirm:!1,confirm:void 0}),g==="ignore")return}}if(Ye.destroyAll(),t.$reset(),s){this.path=wf,or.reset(),t.addCanvas();const p=t.canvasList;this.canvasDataWrapper=new V1(p,p[0].id);return}try{console.log(["=> start load project."]);const p=await or.open(r||or.tempFile),g=await or.parse(p.file),{canvas:_,canvasId:b,extId:x,device:k,version:T}=g;if(this.version=T,x!==void 0&&x!==""&&x.length>0&&!n.supportDevices.includes(x))throw new Error("File not support!");let{ext:P}=n;if(x&&(P==null?void 0:P.id)!==x&&(console.log(["=> load ext",x]),await n.loadExt(x),P=n.ext),_&&b){this.canvasDataWrapper=new V1(_,b),await this.loadCanvas(b),this.path=p.path||p.name,this.fileName=i||"",this.fileId=l||"",this.fileId==="-1"&&(this.fileId="");const A=_.map(({id:L,title:F,isHasCloseImg:N,layerData:W})=>({id:L,title:F,isHasCloseImg:N,layerData:W}));if(t.updateCanvasList(A),t.updateCurrentId(b),console.log("[ editorStore ] >",t),P){const{dataSource:L}=n;if(L)if(k){L.projectData=Tr((k==null?void 0:k.data)||new Map);const F=ig(),{materialList:N=[]}=F;L.batchUpdateOfficialMaterial(N),L.batchUpdateCustomProcessData((k==null?void 0:k.materialTypeList)||[]),F.importProjectMaterial((k==null?void 0:k.materialList)||[])}else n.createdDeviceData()}}else throw new Error(`open file is empty. [${r}]`)}catch(p){return console.error(p),Promise.reject(`open file error. [${p}]`)}finally{console.log(["=> finish load project."]),or.cleanTempFile()}},async closeWinSaveConfirmYes(){try{await this.saveProject()&&this.closeWinSaveConfirmClose(!0)}catch{return Promise.reject("sure open file error.")}},async closeWinSaveConfirmNo(){this.closeWinSaveConfirmClose(!0)},async closeWinSaveConfirmClose(e){var t;this.changeSaveStatus({saveConfirm:!1,confirm:void 0}),e===!0&&(or.reset(),(t=window.MeApi)==null||t.closeWindow())},async saveAsProject(){return this.saveProject(!0)},async saveProject(e=!1){const t=ln(),n=pa();if(this.status!=="saving")try{this.status="saving";const{ext:r,dataSource:i}=t,{currentId:l,canvasList:s}=n,c=or.toJson(l,s,r,i,this.canvasDataWrapper),h=await this.getProjectShot(),p=await or.save({projectData:c,fileName:this.fileName,fileId:this.fileId,saveAs:e,shotImg:h});return p&&(this.fileId=p.fileId,this.setEditStatusProjectPath(p.fileId)),this.status="saved",!0}catch{return this.status="cancel",!1}},async getProjectShot(){var t;const{canvas:e}=await((t=Ye.canvas)==null?void 0:t.getDisplayLayerShot({scaleNum:2}))||{};return e?e.toDataURL():null},autoSaveTmp(){const e=pa(),t=ln(),{currentId:n,canvasList:r}=e,{ext:i,dataSource:l}=t;or.hasChanged(n,r,i,l,this.canvasDataWrapper)&&yC(this.fileId,this.fileName,or.toJson(n,r,i,l,this.canvasDataWrapper))},changeSaveStatus(e){Object.assign(this,e)},async hasProjectChanged(){if(!this.fileId&&this.path&&this.path!==wf)return!0;const e=ln(),t=pa(),{ext:n,dataSource:r}=e,{currentId:i,canvasList:l}=t;return or.hasChanged(i,l,n,r,this.canvasDataWrapper)},async saveProjectConfirm(){return await this.hasProjectChanged()?new Promise(t=>{this.changeSaveStatus({saveConfirm:!0,confirm:{yes(){t("yes")},no(){t("no")},cancel(){t("cancel")}}})}):!1},async projectClear(){or.reset(),this.changeSaveStatus(M2),this.canvasDataWrapper=void 0}}});async function OH({canvas:e,version:t}){const n=pa();await n.listDisplayFonts();const{supportTextToPath:r,lossFonts:i,lossFontTextInfos:l,hasBetaText:s}=LH(e,Vi,ad);let c;if(i.size>0){const h=!r;h||await n.showLossFontsModal({useLegacy:h,lossFonts:Array.from(i)})===q6.REPLACE_FONT?D2(l,Vi):c=IH(l,e)}return await RH(e,Vi),t.includes("beta")&&s&&n.setShowBetaTextMessageTip(!0),!r&&i.size>0&&await n.showLossFontsModal({lossFonts:Array.from(i),useLegacy:!0}),c}const N2=()=>({scaled:1,enableCombine:!1,hasBackground:!1,enableUndo:!1,enableRedo:!1,isGroup:!1}),F2=()=>({id:"",x:null,y:null,width:null,height:null,angle:null,fill:!1,type:"",lockRatio:!1,filterList:[],sharpness:50,grayValue:[0,255],style:{}}),DH=()=>({aberration:40,size:40}),pa=jo("editor",{state:()=>({canvasList:[],currentId:"",currentState:N2(),selectedAttrs:F2(),selected:{num:0,data:[]},hasBackground:!1,fonts:{},imageEditorVisible:!1,lossFontsModalOptions:{visible:!1,useLegacy:!1,lossFonts:[],promiseHandle:null},imageEditorToolOptions:DH(),allLayerData:[],showBetaTextMessage:1}),getters:{selectedList(e){const t=e.selected.num,n=e.selectedAttrs.id;return t>=0||n?e.selected.data:[]}},actions:{setShowBetaTextMessageTip(e){this.showBetaTextMessage=e},editorLayerRename(e){const{key:t,name:n}=e,r=bv(this.canvasList,{id:this.currentId});r&&r.layerData&&r.layerData[t]&&(r.layerData[t].name=n)},layerSelectedRemove(e){var t;(t=Ye.canvas)==null||t.removeElements(e,!0,!0)},editorSelectSpecDisplays(e){var t;(t=Ye.canvas)==null||t.selectSpecDisplays(e)},currentLayerUpdate(e){var r;const{currentLayer:t}=e,n=bv(this.canvasList,{id:this.currentId});n&&(n.currentLayer=t||a0,(r=Ye.canvas)==null||r.updateDisplayConfig({layerColor:n.currentLayer,layerTag:n.currentLayer,updateCanvasDisplay:!1}))},editorLayerDataUpdate(e){const{layerData:t}=e,n=bv(this.canvasList,{id:this.currentId});n&&(n.layerData=t)},editorDisplaysLayerChange(){MH()},newDisplaysAdded(e){const t=ln(),n={sourceCanvasId:Ye.clipboardData.canvasId||e.id,targetCanvasId:e.id,displayJSONs:e.data.map(r=>({id:r.id,type:r.type,isFill:r.isFill,sourceId:r.sourceId}))};t.dataSource&&t.dataSource.setDisplays(n)},clearCanvasBackdrop(){var t;Ye==null||Ye.canvasList.forEach(n=>{n.destroyBackdrop()}),this.hasBackground=!1;const e=(t=Ye.canvas)==null?void 0:t.backgroundVisible();this.backgroundVisible=!!e,e?this.backgroundContext="hide":this.backgroundContext="show"},updateImageEditorToolOptions(e){Object.assign(this.imageEditorToolOptions,e)},updateCurrentEditorState(e){Object.assign(this.currentState,e)},resetSelectedAttrs(){this.selectedAttrs=F2(),this.selected={num:0,data:[]}},updateCanvasList(e){this.canvasList=e},async changeCanvasId(e){const t=og();await t.saveCurrentCanvas(),await this.updateCurrentId(e),await t.setCanvasId(e)},async updateCurrentId(e){this.currentId=e,Ye.id=e,this.syncCanvasState(e),this.currentState=N2()},syncCanvasState(e){const t=Ye.getCanvas(e);t&&this.updateCurrentEditorState(t.currentState)},updateSelectedAttrs(e){const{selectedJSON:t,groupJSON:n,selectedLength:r,...i}=e;ma(t)&&!En(t)?(this.selectedAttrs=n,this.selected={num:r||t.length,data:t}):this.resetSelectedAttrs(),this.updateCurrentEditorState(i)},addCanvas(e){var i;const t=ln(),n=hH(Ye.size),r=Ye.add(n.id);if(e){const l=this.canvasList.findIndex(s=>s.id===e);this.canvasList.splice(l,0,n)}else this.canvasList=[...this.canvasList,n];return t.dataSource&&t.dataSource.setCanvas(n.id),this.updateCurrentId(n.id),(i=Ye.canvas)==null||i.updateEditMode(qx.SELECT),r},changeCanvas(e){this.currentId=e,Ye.id=e},async addTextToCanvas(){var e;await Vi.preloadTextGlyphs({...Z_({style:Zx}),text:Yx}),(e=Ye.canvas)==null||e.addTextToViewport({offsetX:D1,offsetY:M1,fitToViewPort:!1})},async loadResToCanvas(e){var p;const{file:t,offsetX:n,offsetY:r,parseColor:i}=e,l=await _H(t),{name:s="",data:c}=l||{},h=(p=Ye.canvas)==null?void 0:p.loadResToViewport(s,{parseColor:i,...c},{offsetX:n,offsetY:r,fitViewportRatio:.8,fitToViewPort:!0});return console.log("loadResToCanvas",h),h||[]},async listDisplayFonts(){if(!this.fonts||!Object.keys(this.fonts).length){const e=await Vi.getGroupedFontList();this.fonts=e}},canvasDisplayAttrsUpdate(e){var t;console.log("[ DisplayAttrsUpdate]",e),(t=Ye.canvas)==null||t.updateSelectedAttributes(e)},processImage(e=!1){var t;(t=Ye.canvas)==null||t.processImage(e)},updateImageProcessTool(e){var r;const{tool:t,options:n}=e;console.log("update imageProcessTool",{payload:e,tool:t,options:n}),(r=Ye.canvas)==null||r.updateImageProcessTool(t,n)},async showLossFontsModal(e){const t=hu(e,["useLegacy","lossFonts"]);if(Object.assign(this.lossFontsModalOptions,{visible:!0,useLegacy:!1},t),!this.lossFontsModalOptions.promiseHandle){const n={};n.promise=new Promise((r,i)=>{Object.assign(n,{resolve:r,reject:i})}),this.lossFontsModalOptions.promiseHandle=n}return this.lossFontsModalOptions.promiseHandle.promise},closeLossFontsModal(){this.lossFontsModalOptions.promiseHandle&&this.lossFontsModalOptions.promiseHandle.reject("modal canceled"),Object.assign(this.lossFontsModalOptions,{visible:!1,promiseHandle:null})},updateImageEditorVisible(e){var n;this.imageEditorVisible=e;const t=e?Zv.pixi:Zv.custom;(n=Ye.canvas)==null||n.updateTransformHandleMode(t)},async textWeld(){var l,s,c;const e=Kx.UNION,t=(l=Ye.canvas)==null?void 0:l.getTextWeldInfo(e);if(!t)return;const{info:n,pathJSON:r}=t;if(!r.sourceId)return;let i="";try{i=await Ui.clipperWorker.boolCalculate({type:e,info:n})}catch(h){console.warn("boolean operation error when text weld:",h)}finally{Ui.destroyClipperHelper()}i&&((s=Ye.canvas)==null||s.removeElements([r.sourceId]),(c=Ye.canvas)==null||c.drawBoolResult(e,i,r))}}}),MH=q1(()=>{var n;const e=(n=Ye.canvas)==null?void 0:n.exportCanvasJSON({texture:!1}),t=pa();t.allLayerData=e},10);class NH{constructor(t){de(this,"key");this.key=t}handleBack(){return!1}onDestroy(){}}class FH{constructor(){de(this,"timeUse",ke(0));de(this,"latest",0);de(this,"pausable");de(this,"isPause",!1);this.pausable=hx(()=>{this.update()},{immediate:!1})}update(){this.isPause||(this.timeUse.value+=Math.round(performance.now()-this.latest),this.latest=performance.now())}start(){this.isPause=!1,this.latest=performance.now(),this.pausable.resume()}pause(){this.update(),this.pausable.pause(),this.isPause=!0}reset(){this.isPause=!1,this.timeUse.value=0,this.pausable.pause()}}const $H=Symbol("");var Rf=(e=>(e.PREVIEW="preview",e.UPLOAD="upload",e.INPROCESSING="InProcessing",e.FINISH="finish",e))(Rf||{});let Io;const Ja=new FH;let Fp=0;class SG extends NH{constructor(){super($H);de(this,"totalTime",ke(Fp));de(this,"canvasShotUrl",ke(Io));de(this,"extCenterStore",ln());de(this,"processingStore",Bo());de(this,"isCalculateGCode",ke(!1));de(this,"uploadPercentage",ke(0));de(this,"isFinish",!1);de(this,"pressButtonRemindVisible",ke(!1));de(this,"showCancelProcessing",ke(!1));de(this,"isInProcessing",ke(!1));de(this,"isProcessingPaused",ke(!1));de(this,"useTime",Ja.timeUse);de(this,"closePage",ke(!1));de(this,"deviceEvents",{[pt.START_PROCESS]:()=>{this.closePressButtonModal(),Ja.start(),this.isInProcessing.value=!0,this.isProcessingPaused.value=!1},[pt.PAUSE_PROCESS]:()=>{console.log(["=> 暂停加工"]),Ja.pause(),this.isInProcessing.value=!1,this.isProcessingPaused.value=!0},[pt.FINISH_PROCESS]:()=>{this.removeProcessingEvent(),console.log("跳转到完成页面"),this.changePage("finish"),Ja.pause(),console.log("=> 加工被设备完成了"),this.isInProcessing.value=!1,this.isProcessingPaused.value=!1},[pt.CANCEL_PROCESS]:()=>{this.processingStore.isMinimize=!1,this.isInProcessing.value=!1,this.isProcessingPaused.value=!1,this.removeProcessingEvent(),this.showCancelProcessing.value=!this.showCancelProcessing.value,Ja.pause(),Ja.reset(),console.log("=> 加工被设备终止了"),this.finishPage()}});at(()=>this.processingStore.currentProcessingStatus,n=>{var r,i;(i=(r=this.deviceEvents)[n])==null||i.call(r)},{immediate:!0}),at(()=>this.extCenterStore.connected,n=>{n||this.finishPage()},{immediate:!0}),this.processingStore.currentProcessingStatus===pt.IDLE&&this.clearCacheCanvasShop()}handleBack(){return this.processingStore.currentPage!=="preview"?!0:super.handleBack()}finishPage(){this.closePage.value||(this.closePage.value=!0)}changePage(n){n==="preview"&&(Ja.reset(),this.processingStore.$reset(),this.processingStore.removeProcessingEvent(),this.uploadPercentage.value=0),this.processingStore.currentPage=n}isFortyWatt(){const{ext:n}=this.extCenterStore;return((n==null?void 0:n.info.power)??0)===40}isFrameMode(){return this.extCenterStore.isFrameMode}async calculateGCode(){if(Io)return this.totalTime.value=Fp,"has calculateGCode";const{ext:n,dataSource:r}=this.extCenterStore;if(n===null)return"ext error";this.totalTime.value=0,this.isCalculateGCode.value=!0;const i=r==null?void 0:r.currentDeviceData.mode;return await(n==null?void 0:n.buildProcessGcode(i)),this.isFinish?"":(await this.getCanvasShot(),this.isCalculateGCode.value=!1,n.builder.gcodeFileName)}async getCanvasShot(){var s,c,h;if(Io)return Io;const{ext:n}=this.extCenterStore,r=[];((c=(s=n==null?void 0:n.dataSource)==null?void 0:s.currentDeviceData)==null?void 0:c.displays).forEach((p,g)=>{p.processIgnore||r.push(g)});const l=await((h=Ye.canvas)==null?void 0:h.getSpecifiedDisplaysShotById({displayIds:r,scaleNum:5,tintColor:"#000"}));return Io=l==null?void 0:l.canvas,Io}async calculateCanvasShot(){var i,l;const{imagePath:n,processTime:r}=await((l=window.MeApi)==null?void 0:l.wasmKit.genGcodeToImage((i=this.extCenterStore.ext)==null?void 0:i.builder.gcodeFileName));this.canvasShotUrl.value=n,this.totalTime.value=r,Fp=this.totalTime.value,Io=n}isF1Device(){return this.extCenterStore.extId===sn.F1}async exitCalculateGcode(){var n;await this.extCenterStore.ext.killGcodeWorker(),this.isCalculateGCode.value=!1,await((n=window.MeApi)==null?void 0:n.wasmKit.cancelGcodeToImage())}clearCacheCanvasShop(){Io=void 0,Fp=0}async uploadGCode(){await this.processingStore.calculateWalkBorder(),this.processingStore.setupProcessingEvent();const n=this.uploadPercentage;return n.value=0,this.extCenterStore.ext.uploadGCode({onProgress(r){n.value=Math.min(Number((r*100).toFixed(2)),98)}})}async cancelUploadGCode(){await this.extCenterStore.ext.cancelUploadGCode()}showPressButtonModal(){this.pressButtonRemindVisible.value=!0}closePressButtonModal(){this.pressButtonRemindVisible.value=!1}removeProcessingEvent(){this.processingStore.removeProcessingEvent()}overTemperature(){var l,s,c;const n=this.extCenterStore.ext,r=(l=n==null?void 0:n.deviceInfo)==null?void 0:l.power,i=(c=(s=n==null?void 0:n.config)==null?void 0:s.process)==null?void 0:c.showOverTemperature;return i&&i[r]!==void 0?i[r]:!1}async pauseProcessing(){return this.isProcessingPaused.value=!0,Ja.pause(),this.extCenterStore.ext.pauseProcessing()}async cancelProcessing(){return this.isInProcessing.value=!1,this.removeProcessingEvent(),Ja.reset(),this.extCenterStore.ext.cancelProcessing()}setMinimize(){this.processingStore.isMinimize=!0}isDeviceInProcessing(){return[pt.START_PROCESS,pt.PAUSE_PROCESS].includes(this.processingStore.currentProcessingStatus)}async onDestroy(){var n;super.onDestroy(),console.log("ProcessingViewModel onDestroy"),this.isFinish=!0,await((n=window.MeApi)==null?void 0:n.wasmKit.cancelGcodeToImage()),this.processingStore.isMinimize||(this.processingStore.$reset(),Ja.reset(),this.clearCacheCanvasShop(),this.removeProcessingEvent(),this.extCenterStore.ext.killGcodeWorker())}}const pf={[pt.START_PROCESS]:()=>{Bo().currentProcessingStatus=pt.START_PROCESS},[pt.PAUSE_PROCESS]:()=>{Bo().currentProcessingStatus=pt.PAUSE_PROCESS},[pt.FINISH_PROCESS]:()=>{Bo().currentProcessingStatus=pt.FINISH_PROCESS},[pt.CANCEL_PROCESS]:()=>{Bo().currentProcessingStatus=pt.CANCEL_PROCESS}},BH={currentPage:Rf.PREVIEW,isMinimize:!1,currentProcessingStatus:pt.IDLE};let Ro;const Bo=jo("processing",{state:()=>Vf.cloneDeep(BH),getters:{walkBorderConfig(){const e=ln(),{ext:t}=e;if(t)return t.walkBorderConfig}},actions:{setupProcessingEvent(){Ro==null||Ro.stop();const e=ln();Ro=new kx,Ro.run(()=>{at(()=>e.info.currentStatus,t=>{var n;(n=pf[t])==null||n.call(pf)})})},removeProcessingEvent(){Ro==null||Ro.stop();const e=ln();for(const t in pf){const n=pf[t];e.ext.off(t,n)}},async checkProcess(e=!1){const t=ln(),{ext:n,dataSource:r}=t;if(n===null||r===null)return;const i=()=>{var x;if((x=window.MeApi)!=null&&x.fileHelper){const k="temporary",T="/canvasSource/";return window.MeApi.fileHelper.deleteDictory(k,T),async P=>{const{fileUrl:A}=await window.MeApi.fileHelper.saveFileWithFetch(k,T,P);return A}}},l=Ye.canvas,s=r.currentDeviceData.mode,{PASS_THROUGH:c}=zs,h=![c].includes(s),p=await l.getCanvasData({vectorScaleNum:30,excludeOutSide:h,dataImageExport:e?null:i()}),{url:g,width:_,height:b}=await l.getDisplayLayerShot({include:[ad.BITMAP]});return n.canvasImgData={url:g,width:_,height:b},n.checkProcessData({canvasData:p,centralAxisPosition:l.centralAxis?l.centralAxisPosition:null,dataSource:r,isWalkBorder:e})},async calculateWalkBorder(){var n;const e=ln(),{ext:t}=e;if(t&&(n=t==null?void 0:t.config)!=null&&n.sendBorderWithProcess){const{mode:r,power:i,speed:l}=t.walkBorderParams;await this.walkBorder({running:!1,mode:r,power:i,speed:l,onlyCalculate:!0})}},async walkBorder(e){var P;const{power:t,speed:n,mode:r,running:i,onlyCalculate:l}=e,s=ln(),c=Ye.canvas,{ext:h}=s;if(!h||!c)return;if(i)return h.stopWalkBorder();const p=({x:A,y:L,width:F,height:N})=>{const W=A+F,te=L+N;return`M${A}, ${L}L${W}, ${L}L${W}, ${te}L${A}, ${te}Z`};let g=p(h.printInfo.totalSize);const{lowLightPower:_}=h.config.process;let b;const x=h.deviceInfo.power;b=((P=h.deviceInfo)==null?void 0:P.gMode)===0?0:t,_&&_[x]&&Vf.isFunction(_[x].formula)&&(b=_[x].formula(b)),h.processParams.isWalkBorder=!0;let k={data:{source:g,power:b,speed:n,repeat:1},params:{...h.processParams.parse(),isWalkBorder:!0,isVector:!0}};r===l1.OUTLINE?(g=await Ye.extractContours(h.printInfo.processElementIds)||p(h.printInfo.totalSize),k.data.source=g):r===l1.SCAN&&h.generalBuildData&&(k=await h.generalBuildData(t,n));const T=await h.builder.border(k);if(l){await h.updateWalkBorderGcode(T);return}return h.startWalkBorder(T,e)}}}),$2=""+new URL("cover-6177d8fa.png",import.meta.url).href,B2=""+new URL("framing-start-f419c082.png",import.meta.url).href,U2=""+new URL("pic-device-d1pro-connect-success-6b8a1932.png",import.meta.url).href,V2=""+new URL("pic-power-tip-d1pro-29c80680.png",import.meta.url).href,UH=""+new URL("device-f1-0d591e3f.png",import.meta.url).href,VH=""+new URL("new-f1-process-start-b16ffea3.png",import.meta.url).href,HH=""+new URL("pic-device-f1-connect-success-0a65b604.png",import.meta.url).href,zH=""+new URL("pic-power-tip-f1-d97bb5bc.png",import.meta.url).href,jH=[{name:"configWifi",url:"/net",type:"post",params:{action:"connsta"},headers:{"Content-Type":"text/plain;charset=UTF-8"}}],H2=[{name:sn.F1,devicePic:UH,powerImg:zH,successImg:HH,processImg:VH,deviceWifi:zp.F1,preLightColor:"mobile.connect.pre_light_color_yellow",successLightColor:"mobile.connect.success_light_color_white"},{name:sn.D1Pro,devicePic:$2,powerImg:V2,successImg:U2,processImg:B2,deviceWifi:zp.D1Pro,preLightColor:"mobile.connect.pre_light_color_white",successLightColor:"mobile.connect.success_light_color_green"},{name:sn.D1,devicePic:$2,powerImg:V2,successImg:U2,processImg:B2,deviceWifi:zp.D1,preLightColor:"mobile.connect.pre_light_color_white",successLightColor:"mobile.connect.success_light_color_green"}],GH=jo("wifi-config",{state:()=>({wifiConfigState:{deviceList:H2,wifiName:"",wifiPwd:"",selectedDevice:"",isTransfer:!1,isCanNext:!0}}),actions:{setCanNext(e){this.wifiConfigState.isCanNext=e},reset(){this.wifiConfigState.wifiName="",this.wifiConfigState.wifiPwd="",this.wifiConfigState.selectedDevice="",this.wifiConfigState.isTransfer=!1,this.wifiConfigState.isCanNext=!0},updateWifiConfigState(e){Object.assign(this.wifiConfigState,e)},async configWifi(){const e=w_(jH,"192.168.40.1"),{wifiName:t,wifiPwd:n}=this.wifiConfigState,r=`${t} ${n}`;try{return(await e.configWifi({data:r})).result==="ok"}catch(i){return console.error(i),!1}},getSelectDeviceInfo(){let e=H2.find(t=>t.name===(this.wifiConfigState.selectedDevice||Da.info.id));return e===void 0&&(e={}),e}}}),WH=Object.freeze(Object.defineProperty({__proto__:null,CanvasDataWrapper:V1,useDeviceErrorStore:dw,useEditorStore:pa,useExtCenterStore:ln,useMaterialStore:ig,useProcessingStore:Bo,useProjectStore:og,useSystemStore:jf,useWifiConfigStore:GH},Symbol.toStringTag,{value:"Module"}));window.ME=WH;function a4(e,t,n){const r=ke(e),i=ke(!1),l=async c=>{if(!i.value&&ut(t)){const h=c??r.value,p=t(h);if(p instanceof Promise){i.value=!0;try{await p}catch(g){console.error({err:g})}finally{i.value=!1}}}},s=px(c=>{l(c)},n??300);return{update:l,running:i,valueRef:r,debouncedFn:s}}const qH={style:{width:"12em"}},YH=$e({__name:"WidgetInput",props:{min:null,max:null,name:null,label:null,labelSuffix:null,value:null,defaultValue:null,suffix:null,onBlur:null,options:null,handler:null},setup(e){const t=e,{t:n}=Un(),{unit:r}=jf(),i=_=>{t.handler(t.name,_)},l=Ee(()=>`${n(t.label)}(${t.labelSuffix??""})`),s=Ee(()=>t.value!==null&&t.value!==void 0?t.value:t.defaultValue),{valueRef:c,running:h,debouncedFn:p}=a4(t.value,t.handler),g=()=>p();return at(()=>t.value,(_,b)=>{_!==b&&(c.value=_)}),(_,b)=>{const x=N0,k=qs,T=si,P=Vn;return He(),Ct(P,{center:""},Mf({title:Ge(()=>[Jt("div",qH,an(be(l)),1)]),value:Ge(()=>[j(x,{"model-value":be(s),"allow-null":"",max:e.max,min:e.min,scale:be(r).scale,"fraction-digits":be(r).fractionDigits,"input-align":"right",style:{padding:"0"},"onUpdate:modelValue":i,onBlur:e.onBlur},null,8,["model-value","max","min","scale","fraction-digits","onBlur"])]),_:2},[e.suffix?{name:"extra",fn:Ge(()=>{var A,L;return[j(T,{type:"primary",plain:"",size:"mini",loading:be(h),style:{"margin-left":"10px"},onClick:g},Mf({_:2},[(L=(A=e.suffix)==null?void 0:A.widgetAttrs)!=null&&L.icon?{name:"icon",fn:Ge(()=>[j(k,{name:e.suffix.widgetAttrs.icon,size:"20px"},null,8,["name"])]),key:"0"}:void 0]),1032,["loading"])]}),key:"0"}:void 0]),1024)}}});const KH=$e({__name:"WidgetMaterial",props:{name:null,label:null,labelExtra:null,value:null,options:null,processTypes:null,handler:null},emits:["showMoreMaterial"],setup(e,{emit:t}){const n=e,{t:r,locale:i}=Un(),l=ke(!1),s=Ee({get:()=>{const A=n.value,L=k.value.find(N=>N.id===A);let F;return(L==null?void 0:L.id)===0?F=i.value==="zh-CN"?r(L==null?void 0:L.name.zh):r(L==null?void 0:L.name.en):F=i.value==="zh-CN"?L==null?void 0:L.name.zh:L==null?void 0:L.name.en,F},set:A=>A}),c=Ee(()=>{const A=ke([]);return A.value[0]=n.value,A}),h=ig(),p=ln(),g=Ee(()=>{var A,L,F;return ma((A=p.ext)==null?void 0:A.info.power)?((L=p.ext)==null?void 0:L.info.power.length)??0:((F=p.ext)==null?void 0:F.info.power)??0}),_=()=>{l.value=!0},b=A=>{l.value=!1,s.value=A.selectedOptions[0].text;const L=A.selectedOptions[0].value,F=k.value.find(N=>N.id===L);F&&n.handler&&(n.handler(n.name,F),L>0&&h.sortLocalMaterial(L))},x=()=>{l.value=!1},k=Ee(()=>{const A=h.materialList;return LA(n.processTypes,A)}),T=Ee(()=>k.value.map(({id:A,name:L})=>{const F=i.value==="zh-CN"?L.zh:L.en;return{value:A,text:A===0?r(F):F}})),P=()=>{l.value=!1,h.processingTypes=n.processTypes,h.selectOnlineMaterialHandler=n.handler,t("showMoreMaterial",!0)};return(A,L)=>{const F=Vn,N=s_,W=si,te=hC,G=Nu;return He(),dn($n,null,[j(F,{"is-link":"",title:be(r)(e.label),value:be(s),onClick:_},null,8,["title","value"]),j(G,{show:l.value,"onUpdate:show":L[0]||(L[0]=K=>l.value=K),position:"bottom",round:"","close-on-click-overlay":!1,"safe-area-inset-bottom":""},{default:Ge(()=>[j(N,{"model-value":be(c).value,title:be(r)(e.label),columns:be(T),"confirm-button-text":A.$t("common.msg.ok"),"cancel-button-text":A.$t("common.msg.cancel"),onCancel:x,onConfirm:b},null,8,["model-value","title","columns","confirm-button-text","cancel-button-text"]),be(g)>0?(He(),Ct(te,{key:0,direction:"vertical",fill:"",class:"more_material"},{default:Ge(()=>[j(W,{type:"success",block:"",onClick:P},{default:Ge(()=>[Ho(an(be(r)("device.material.more_material")),1)]),_:1})]),_:1})):Ar("",!0)]),_:1},8,["show"])],64)}}});const ZH=$a(KH,[["__scopeId","data-v-bdd3da91"]]),JH={class:"label-extra"},XH={class:"label-extra-multi"},QH=$e({__name:"ItemLabel",props:{label:null,unitExtra:null,labelExtra:null},setup(e){const t=e,n=Ee(()=>t.labelExtra??""),r=Ee(()=>t.unitExtra??"");return(i,l)=>(He(),dn($n,null,[Jt("span",null,an(i.$t(e.label)),1),Jt("span",JH,an(i.$t(be(r))),1),Jt("span",XH,an(i.$t(be(n))),1)],64))}});const Zs=$a(QH,[["__scopeId","data-v-6963ac26"]]),ez=$e({__name:"WidgetParamSelect",props:{name:null,label:null,labelExtra:null,options:null,ignoreTranslate:{type:Boolean},value:null,processingType:null,material:null,disabledOfficial:{type:Boolean},handler:null},setup(e){const t=e,n=(k,T)=>{var A;let P=((A=k.filter(L=>L.value===T)[0])==null?void 0:A.label)||"";return["official","customize"].includes(T.toString())||(P=""),P},r=Ee(()=>{let k=t.value;return["official","customize"].includes(k)||(k=""),k}),{t:i}=Un(),l=ke(!1),s=Ee(()=>n(_.value,r.value)),c=Ee({get:()=>i(s.value),set:k=>k}),h=Ee(()=>{const k=ke([]);return k.value[0]=r.value,k}),p=()=>{l.value=!0},g=k=>k.map(({label:T,value:P})=>({text:t.ignoreTranslate?T:i(T),value:P})),_=Ee(()=>{let k=!1;const T=ln().dataSource;if(T){const L=T.getOfficialMaterial();k=L&&L.processingData&&L.processingData[(t==null?void 0:t.processingType)||""]}const P={label:i("device.processing_attrs.x_tool_parameter_reference"),value:"official"},A=[{label:i("device.user_defined.manual_setting"),value:"customize"}];return k&&A.unshift(P),A}),b=k=>{l.value=!1;const T=k.selectedOptions[0].value;if(c.value=k.selectedOptions[0].text,h.value.value[0]=T,t.handler&&T!==r.value){const P={materialType:T,data:{}};t.handler(t.name,P)}},x=()=>{l.value=!1};return(k,T)=>{const P=Zs,A=Vn,L=s_,F=Nu;return He(),dn($n,null,[j(A,{"is-link":"",value:be(c),onClick:p},{title:Ge(()=>[j(P,{label:e.label,"label-extra":e.labelExtra},null,8,["label","label-extra"])]),_:1},8,["value"]),j(F,{show:l.value,"onUpdate:show":T[0]||(T[0]=N=>l.value=N),position:"bottom",round:"","close-on-click-overlay":!1,"safe-area-inset-bottom":"",teleport:"#app"},{default:Ge(()=>[j(L,{"model-value":be(h).value,title:be(i)("device.element_container.param"),columns:g(be(_)),"confirm-button-text":k.$t("common.msg.ok"),"cancel-button-text":k.$t("common.msg.cancel"),onCancel:x,onConfirm:b},null,8,["model-value","title","columns","confirm-button-text","cancel-button-text"])]),_:1},8,["show"])],64)}}});const tz=$e({__name:"WidgetRadioGroup",props:{label:null,labelExtra:null,name:null,value:{type:[String,Number,Boolean]},disabled:{type:Boolean},options:null,handler:null},setup(e){const t=e,{t:n}=Un(),r=Ee(()=>ke(t.value)),i=l=>{l!==null&&t.handler(t.name,l)};return(l,s)=>{const c=Zs,h=Bk,p=Dk,g=Vn;return He(),Ct(g,null,{title:Ge(()=>[j(c,{label:e.label,"label-extra":e.labelExtra},null,8,["label","label-extra"])]),label:Ge(()=>[]),"right-icon":Ge(()=>[j(p,{modelValue:be(r).value,"onUpdate:modelValue":s[0]||(s[0]=_=>be(r).value=_),direction:"horizontal",onChange:i},{default:Ge(()=>[(He(!0),dn($n,null,Df(e.options,_=>(He(),Ct(h,{key:_.value,disabled:_==null?void 0:_.disabled,name:_.value},{default:Ge(()=>[Ho(an(be(n)(_.label)),1)]),_:2},1032,["disabled","name"]))),128))]),_:1},8,["modelValue"])]),_:1})}}}),nz=$e({__name:"WidgetSelect",props:{name:null,label:null,labelExtra:null,value:null,defaultValue:null,options:null,ignoreTranslate:{type:Boolean},handler:null},setup(e){const t=e,n=(k,T)=>{var P;return((P=k.filter(A=>A.value===T)[0])==null?void 0:P.label)||""},r={density:"lines-per-cm-suffix",bitmapMode:"photo-mode-suffix",bitmapScanMode:"scan-mode-suffix"},i=ke(!1);i.value=["density","bitmapMode","bitmapScanMode"].includes(t.name);const{t:l}=Un(),s=ke(!1),c=Ee(()=>n(t.options,t.value)),h=Ee({get:()=>l(c.value??""),set:k=>k}),p=Ee(()=>{const k=ke([]);return k.value[0]=t.value,k}),g=()=>{s.value=!0},_=k=>k.map(({label:T,value:P})=>({text:t.ignoreTranslate?T:l(T),value:P})),b=k=>{s.value=!1,h.value=k.selectedOptions[0].text,p.value.value[0]=k.selectedOptions[0].value,t.handler(t.name,k.selectedOptions[0].value)},x=()=>{s.value=!1};return(k,T)=>{const P=qs,A=Zs,L=Vn,F=s_,N=Nu;return He(),dn($n,null,[j(L,{"is-link":"",value:be(h),class:"mode-wrapper",onClick:g},{title:Ge(()=>[i.value?(He(),Ct(P,{key:0,name:r[t.name],size:"16px",class:"suffix-icon"},null,8,["name"])):Ar("",!0),j(A,{label:e.label,"label-extra":e.labelExtra},null,8,["label","label-extra"])]),_:1},8,["value"]),j(N,{show:s.value,"onUpdate:show":T[0]||(T[0]=W=>s.value=W),position:"bottom",round:"","close-on-click-overlay":!1,"safe-area-inset-bottom":"",teleport:"#app"},{default:Ge(()=>[j(F,{"model-value":be(p).value,title:be(l)(e.label),columns:_(e.options),"confirm-button-text":k.$t("common.msg.ok"),"cancel-button-text":k.$t("common.msg.cancel"),onCancel:x,onConfirm:b},null,8,["model-value","title","columns","confirm-button-text","cancel-button-text"])]),_:1},8,["show"])],64)}}});const rz=$a(nz,[["__scopeId","data-v-d443d6e2"]]),az={class:"content-wrap"},iz=$e({__name:"WidgetSelectMaterialText",props:{name:null,label:null,value:null,handler:null},setup(e){const{t,locale:n}=Un(),r=ln(),i=Ee(()=>{var s;const l=(s=r.dataSource)==null?void 0:s.getOfficialMaterial();return l?n.value==="zh-CN"?t(l.name.zh):t(l.name.en):t("device.common.user_defined_material")});return(l,s)=>{const c=Vn;return He(),Ct(c,{center:""},{title:Ge(()=>[Jt("span",null,an(be(t)(e.label)),1)]),value:Ge(()=>[Jt("span",az,an(be(i)),1)]),_:1})}}});const i4=$a(iz,[["__scopeId","data-v-8dca8af7"]]);const oz=()=>{const{t:e}=Un();return{t:e}},sz={key:0,class:"number-keyboard-valid"},lz=$e({__name:"NumberKeyboard",props:{show:{type:Boolean},title:null,inputs:{default:()=>[]},popupAttrs:{default:void 0},focusIndex:null},emits:["update:show","keyboardConfirm"],setup(e,{emit:t}){const n=e,{t:r}=oz(),i=L=>{var N;console.log("handleKeyboardInput",L);const F=b();F&&((N=F.insertText)==null||N.call(F,String(L)))},l=()=>{var F;console.log("handleKeyboardDelete",x.value);const L=b();L&&((F=L.deleteText)==null||F.call(L))},s=()=>{var L,F;for(let N=0;N<h.value.length;N++)((L=h.value[N])==null?void 0:L.inputVal)!==void 0&&((F=h.value[N])==null||F.blur());setTimeout(()=>{let N=x.value;console.log(N),t("keyboardConfirm",N),k.value=!1},100)},c=()=>{var F;const L=b();L&&((F=L.focus)==null||F.call(L))},h=ke([]),p=ke(null),g=Ee(()=>{const L=p.value;return L!==null?n.inputs[L]:null}),_=Ee(()=>{const L=p.value;return L!==null?h.value[L]:null}),b=()=>{const L=p.value;return L!==null?h.value[L]:null},x=Ee(()=>_.value?_.value.inputVal:""),k=Ee({get(){return n.show},set(L){t("update:show",L)}});Na(()=>{P(T.value)});const T=Ee(()=>n.focusIndex?n.focusIndex:0);at(()=>T.value,L=>{P(L)});function P(L){A(L)&&(p.value=L)}function A(L){var N;const F=(N=n.inputs)==null?void 0:N[L];if((F==null?void 0:F.type)==="number")return F}return(L,F)=>{const N=Vn,W=oC,te=Nu;return He(),Ct(te,xn({show:be(k),"onUpdate:show":F[0]||(F[0]=G=>Vo(k)?k.value=G:null),position:"bottom",class:"number-keyboard__popup",overlay:!0,"close-on-click-overlay":!0,"overlay-class":"number-keyboard-overlay",round:"",teleport:"#app"},e.popupAttrs,{onOpened:c}),{default:Ge(()=>[j(N,{class:"number-keyboard__title",title:n.title},null,8,["title"]),Jt("div",{class:a5(["number-keyboard__content",n.inputs[0].attrs.showValRange?"":"keyboard__flex"])},[(He(!0),dn($n,null,Df(n.inputs,(G,K)=>(He(),dn($n,{key:G.id},[G.type==="component"?(He(),Ct(r5(G.cmp),xn({key:0,ref_for:!0,ref_key:"inputRefs",ref:h},G.attrs),null,16)):Ar("",!0),G.type==="number"?(He(),Ct(be(N0),xn({key:1,id:G.id,ref_for:!0,ref_key:"inputRefs",ref:h,modelValue:G.value,"onUpdate:modelValue":re=>G.value=re,class:["number-keyboard__field",{"number-keyboard__field--focus":p.value===K}],style:{"--number-keyboard-input-width":G.attrs.valueWidth??"100%",width:G.attrs.valueWidth??"100%"},"dom-props":{type:"text",inputMode:"none"}},G.attrs,{onFocus:re=>p.value=K}),null,16,["id","modelValue","onUpdate:modelValue","class","style","onFocus"])):Ar("",!0)],64))),128)),n.inputs[0].attrs.showValRange?(He(),dn("div",sz,an(`${be(r)("mobile.common.input_effective_range")}${n.inputs[0].attrs.min}~${n.inputs[0].attrs.max}`),1)):Ar("",!0)],2),p.value!==null?(He(),Ct(W,xn({key:0,"model-value":be(x),class:"number-keyboard__keyboard",show:!0,theme:"custom","close-button-text":be(r)("mobile.editor.keyboard_confirm")},be(g)?be(g).keyboardAttrs:null,{onClose:s,onInput:i,onDelete:l}),null,16,["model-value","close-button-text"])):Ar("",!0)]),_:1},16,["show"])}}});const o4=$a(lz,[["__scopeId","data-v-0809b594"]]),uz={class:"van-cell-title"},cz={class:"slider-label-wrap"},fz={style:{"margin-bottom":"10px"}},dz={class:"custom-tooltip-wrap"},hz={class:"tooltip-content"},pz=$e({__name:"WidgetSlider",props:{step:null,name:null,label:null,labelExtra:null,value:null,defaultValue:null,min:null,max:null,scale:null,fractionDigits:null,unitExtra:null,disabled:{type:Boolean},handler:null},setup(e){const t=e,{t:n}=Un(),r=ke(!1),i=Ee(()=>t.step);at(()=>t.value,_=>{c.value.value=_});const l={power:"power-suffix",speed:"speed-suffix",repeat:"repeat-suffix",dotDuration:"dot-duration-suffix",dpi:"dpi-suffix"},s=ke(!1);s.value=["power","speed","repeat","dotDuration","dpi"].includes(t.name);const c=Ee({get:()=>ke(t.value),set:_=>_}),h=Ee(()=>na({type:"number",value:t.value===null?"":c.value,attrs:{min:t.value===null?"":t.min,max:t.value===null?"":t.max,fractionDigits:t.fractionDigits,scale:t.scale,showValRange:!0,valueWidth:"100px",onChange:b=>{c.value.value=b}}})),p=_=>{g(_)},g=_=>{t.handler(t.name,_)};return(_,b)=>{const x=qs,k=Zs,T=N0,P=o4,A=tw,L=Vn;return He(),Ct(L,{center:"",class:"add-icon-suffix-wrap"},{title:Ge(()=>[Jt("div",uz,[Jt("div",cz,[s.value?(He(),Ct(x,{key:0,name:l[t.name],class:"icon-suffix",size:"16px"},null,8,["name"])):Ar("",!0),j(k,{label:e.label,"unit-extra":e.unitExtra,"label-extra":e.labelExtra},null,8,["label","unit-extra","label-extra"])]),Jt("div",null,[j(T,xn({style:{float:"right",width:"70px",padding:"0",margin:"0"}},_.$attrs,{min:e.value===null?null:e.min,max:e.value===null?null:e.max,"allow-null":"","model-value":be(c).value,readonly:"",onClick:b[0]||(b[0]=i5(F=>r.value=!0,["stop"]))}),null,16,["min","max","model-value"]),j(P,{show:r.value,"onUpdate:show":b[1]||(b[1]=F=>r.value=F),title:be(n)(e.label),inputs:[be(h)],onKeyboardConfirm:p},null,8,["show","title","inputs"])])])]),label:Ge(()=>[Jt("div",fz,[j(A,{modelValue:be(c).value,"onUpdate:modelValue":b[2]||(b[2]=F=>be(c).value=F),min:e.min,max:e.max,step:be(i),"bar-height":"4",class:a5(t.name),onChange:g,onDragStart:be(aw),onDragEnd:be(iw)},{button:Ge(({value:F})=>[Jt("div",dz,[j(x,{name:"slider-block",class:"slider-custom-button",size:"30px"}),Jt("div",hz,an(F),1)])]),_:1},8,["modelValue","min","max","step","class","onDragStart","onDragEnd"])])]),_:1})}}});const gz=$a(pz,[["__scopeId","data-v-3b24130f"]]),mz={class:"van-cell-title"},vz={style:{"flex-grow":"1"},class:"slider-range-label-wrap"},_z={key:0},yz={key:0,class:"power-value-wrap"},bz={key:1,class:"power-value-wrap"},wz={style:{"margin-bottom":"10px"}},Sz={class:"custom-tooltip-wrap"},xz={class:"tooltip-content"},Ez={class:"custom-tooltip-wrap"},kz={class:"tooltip-content"},Cz=$e({__name:"WidgetSliderRange",props:{name:null,label:null,labelExtra:null,labelSuffix:null,value:null,min:null,max:null,handler:null,disabled:{type:Boolean}},setup(e){const t=e,{t:n}=Un(),r=ke(Gs(t.value)?[1,1]:t.value);at(()=>t.value,c=>{r.value=c||[1,1]},{immediate:!0});let i=0,l=0;const s=c=>{r.value=c;const h=c,p=Math.min(h[0],h[1]),g=Math.max(h[0],h[1]);p===i&&l===g||(i=p,l=g,console.log(p,g),t.handler(t.name,[p,g]))};return(c,h)=>{const p=qs,g=Zs,_=tw,b=Vn;return He(),Ct(b,{center:"",class:"slider-range-wrapper"},{title:Ge(()=>[Jt("div",mz,[Jt("div",vz,[j(p,{name:"power-suffix",class:"icon-suffix",size:"16px"}),j(g,{label:e.label,"label-extra":e.labelExtra},null,8,["label","label-extra"]),e.labelSuffix?(He(),dn("span",_z,an(be(n)(e.labelSuffix)),1)):Ar("",!0)]),r.value[0]===r.value[1]?(He(),dn("div",yz,an(r.value[0]),1)):(He(),dn("div",bz,an(`${r.value[0]}~${r.value[1]}`),1))])]),label:Ge(()=>[Jt("div",wz,[j(_,{modelValue:r.value,"onUpdate:modelValue":h[0]||(h[0]=x=>r.value=x),min:e.min,max:e.max,range:"",step:1,"bar-height":"4",onChange:h[1]||(h[1]=x=>s(x)),onDragStart:be(aw),onDragEnd:be(iw)},{"left-button":Ge(({value:x})=>[Jt("div",Sz,[j(p,{name:"slider-block",class:"slider-custom-button",size:"30px"}),Jt("div",xz,an(x),1)])]),"right-button":Ge(({value:x})=>[Jt("div",Ez,[j(p,{name:"slider-block",class:"slider-custom-button",size:"30px"}),Jt("div",kz,an(x),1)])]),_:1},8,["modelValue","min","max","onDragStart","onDragEnd"])])]),_:1})}}});const Tz=$a(Cz,[["__scopeId","data-v-faba4167"]]);const Az=$e({__name:"WidgetSwitch",props:{name:null,label:null,labelExtra:null,value:{type:Boolean},disabled:{type:Boolean},childs:null,handler:null},setup(e){const t=e,n=Ee(()=>t.name==="processIgnore"?!t.value:t.value),r=i=>{const l=t.name==="processIgnore"?!i:i;t.handler(t.name,l)};return(i,l)=>{const s=Zs,c=K5,h=Vn;return He(),Ct(h,{center:""},{title:Ge(()=>[j(s,{label:e.label,"label-extra":e.labelExtra},null,8,["label","label-extra"])]),"right-icon":Ge(()=>[j(c,{modelValue:be(n),"onUpdate:modelValue":l[0]||(l[0]=p=>Vo(n)?n.value=p:null),disabled:e.disabled,size:"18px",onChange:r},null,8,["modelValue","disabled"])]),_:1})}}}),Pz=$e({__name:"WidgetSwitchCoord",props:{name:null,label:null,value:{type:Boolean},handler:null},setup(e){const t=e,{t:n}=Un(),r=ke(t.value),i=l=>{r.value=l,t.handler(t.name,l)};return(l,s)=>{const c=K5,h=Vn;return He(),Ct(h,{center:""},{title:Ge(()=>[Jt("span",null,an(be(n)(e.label)),1)]),"right-icon":Ge(()=>[j(c,{"model-value":r.value,size:"18px","onUpdate:modelValue":i},null,8,["model-value"])]),_:1})}}});var Lz=(e=>(e.WORK_PREPARED="WORK_PREPARED",e.WORK_STARTED="WORK_STARTED",e.WORK_PAUSED="WORK_PAUSED",e.WORK_STOPED="WORK_STOPED",e.WORK_FINISHED="WORK_FINISHED",e))(Lz||{}),Gt=(e=>(e.LASER_PLANE="LASER_PLANE",e.LASER_CYLINDER="LASER_CYLINDER",e.PASS_THROUGH="PASS_THROUGH",e.FREE_PLANE="FREE_PLANE",e.SUPER_LASER_PLANE="SUPER_LASER_PLANE",e.KNIFE_CUT="KNIFE_CUT",e.PRINTER_KNIFE_CUT="PRINTER_KNIFE_CUT",e.LASER_EXTENDER="LASER_EXTENDER",e))(Gt||{}),Rt=(e=>(e.VECTOR_CUTTING="VECTOR_CUTTING",e.VECTOR_ENGRAVING="VECTOR_ENGRAVING",e.FILL_VECTOR_ENGRAVING="FILL_VECTOR_ENGRAVING",e.BITMAP_ENGRAVING="BITMAP_ENGRAVING",e.KNIFE_CUTTING="KNIFE_CUTTING",e))(Rt||{}),gu=(e=>(e.BITMAP="BITMAP",e.VECTOR="VECTOR",e))(gu||{}),Iz=(e=>(e.Error="error",e))(Iz||{});const xG=[{code:"GYRO_SENSOR",msg:"err_moving_check"},{code:"FIRE_RECOGNITION",msg:"err_flame_check"}],EG={AXIS_HOME_STARTED:"AXIS_HOME_STARTED",AXIS_HOME_FINISHED:"AXIS_HOME_FINISHED",MODE_CHANGE:pt.MODE_CHANGE,P_IDLE:pt.IDLE,IDLE:pt.IDLE,FRAME_WORKING:pt.FRAME_WORKING,WORK_PREPARED:pt.BEFORE_START,WORK_STARTED:pt.START_PROCESS,WORK_PAUSED:pt.PAUSE_PROCESS,WORK_STOPED:pt.CANCEL_PROCESS,WORK_FINISHED:pt.FINISH_PROCESS,workPause:pt.PAUSE_PROCESS,working:pt.START_PROCESS,workReady:pt.BEFORE_START},Rz=(e,t,n)=>{const r={roller:()=>t,catch:()=>Us(n)&&n<32?1.17*Math.PI*n:120};return r[e]&&r[e]()},kG={LASER_PLANE:{material:0,lightSourceMode:"blue",thickness:null,perimeter:null,diameter:null},LASER_CYLINDER:{material:0,lightSourceMode:"blue",thickness:null,focalLength:null,rotaryAttachmentType:"roller",perimeter:null,diameter:null},PASS_THROUGH:{material:0,lightSourceMode:"blue",thickness:null,focalLength:null,perimeter:null,diameter:null},LASER_EXTENDER:{material:0,lightSourceMode:"blue",thickness:null,perimeter:null,diameter:null}};Rt.VECTOR_CUTTING+"",Rt.VECTOR_ENGRAVING+"",Rt.FILL_VECTOR_ENGRAVING+"",Rt.BITMAP_ENGRAVING+"";const CG={DEFAULT:{VECTOR_CUTTING:{max:20,min:1},VECTOR_ENGRAVING:{max:4e3,min:1},FILL_VECTOR_ENGRAVING:{max:4e3,min:1},BITMAP_ENGRAVING:{max:4e3,min:1}},LASER_CYLINDER:{VECTOR_CUTTING:{max:20,min:1},VECTOR_ENGRAVING:{max:(e,t)=>Rz(e,25,t),min:1},FILL_VECTOR_ENGRAVING:{max:()=>400,min:1},BITMAP_ENGRAVING:{max:()=>400,min:1}},LASER_EXTENDER:{VECTOR_CUTTING:{max:20,min:1},VECTOR_ENGRAVING:{max:160,min:1},FILL_VECTOR_ENGRAVING:{max:160,min:1},BITMAP_ENGRAVING:{max:160,min:1}}},TG=[{type:Rt.VECTOR_ENGRAVING,label:"line_engrave",color:16421416,fillColor:"#f9932b",isFill:!1,modes:[Gt.LASER_PLANE,Gt.LASER_CYLINDER,Gt.PASS_THROUGH,Gt.SUPER_LASER_PLANE,Gt.LASER_EXTENDER],imageType:gu.VECTOR,components:["ignore","lightSourceSet","processingType","materialType","power","speed","repeat"]},{type:Rt.FILL_VECTOR_ENGRAVING,label:"fill_engrave",color:16421416,fillColor:"#f9932b",isFill:!0,modes:[Gt.LASER_PLANE,Gt.LASER_CYLINDER,Gt.PASS_THROUGH,Gt.SUPER_LASER_PLANE,Gt.LASER_EXTENDER],imageType:gu.VECTOR,components:["ignore","lightSourceSet","processingType","useDotMode","dotDuration","materialType","power","speed","repeat","density","bitmapScanMode"]},{type:Rt.VECTOR_CUTTING,label:"line_cut",color:10036991,fillColor:"#9928ff",isFill:!1,modes:[Gt.LASER_PLANE,Gt.PASS_THROUGH,Gt.SUPER_LASER_PLANE,Gt.LASER_EXTENDER],imageType:gu.VECTOR,components:["ignore","lightSourceSet","processingType","materialType","power","speed","repeat"]},{type:Rt.BITMAP_ENGRAVING,label:"engrave",color:16421416,fillColor:"#f9932b",isFill:!0,modes:[Gt.LASER_PLANE,Gt.LASER_CYLINDER,Gt.PASS_THROUGH,Gt.SUPER_LASER_PLANE,Gt.LASER_EXTENDER],imageType:gu.BITMAP,components:["ignore","lightSourceSet","processingType","materialType","useDotMode","dotDuration","power","speed","repeat","bitmapMode","density","bitmapScanMode"]},{type:Rt.KNIFE_CUTTING,label:"cut",color:2597107,fillColor:"#27a1f2",isFill:!1,modes:[Gt.KNIFE_CUT,Gt.PRINTER_KNIFE_CUT],imageType:gu.VECTOR,components:["ignore","processingType","materialType","cutPressure","speed","repeat"]}],AG=[{value:Gt.LASER_PLANE,label:"device.mode.laser_flat",iconName:"ext-laser-plane",components:["deviceMode","material","lightSourceMode","thickness"],processingTypes:e=>e?[Rt.VECTOR_ENGRAVING,Rt.FILL_VECTOR_ENGRAVING,Rt.BITMAP_ENGRAVING]:[Rt.VECTOR_ENGRAVING,Rt.FILL_VECTOR_ENGRAVING,Rt.VECTOR_CUTTING,Rt.BITMAP_ENGRAVING]},{value:Gt.LASER_CYLINDER,label:"device.mode.laser_cylindrical",iconName:"ext-laser-cylinder",components:["deviceMode","material","lightSourceMode","focalLength","rotaryAttachmentType","catchMode"],processingTypes:[Rt.VECTOR_ENGRAVING,Rt.FILL_VECTOR_ENGRAVING,Rt.BITMAP_ENGRAVING],hasCylinder:!1},{value:Gt.PASS_THROUGH,label:"device.mode.open_plane",iconName:"ext-pass-through",components:["deviceMode","material","lightSourceMode"],processingTypes:e=>e?[Rt.VECTOR_ENGRAVING,Rt.FILL_VECTOR_ENGRAVING,Rt.BITMAP_ENGRAVING]:[Rt.VECTOR_ENGRAVING,Rt.FILL_VECTOR_ENGRAVING,Rt.BITMAP_ENGRAVING,Rt.VECTOR_CUTTING]},{value:Gt.LASER_EXTENDER,label:"device.mode.laser_extender",iconName:"ext-pass-through",components:["deviceMode","material","lightSourceMode"],processingTypes:[Rt.VECTOR_ENGRAVING,Rt.FILL_VECTOR_ENGRAVING,Rt.VECTOR_CUTTING,Rt.BITMAP_ENGRAVING]}],PG="purifier_gd330",s4=23.5,LG=82.6,z2=113,IG=53,l4={},RG=Object.freeze(Object.defineProperty({__proto__:null,default:l4},Symbol.toStringTag,{value:"Module"})),Oz=$e({__name:"WidgetText",props:{name:null,label:null,labelExtra:null,value:null,handler:null,suffix:null},setup(e){const t=e,{t:n}=Un(),r=ln(),i=Ee(()=>n(t.value)),l=async()=>{var s;try{await((s=r.ext)==null?void 0:s.autoFocus(s4)),r.setDeviceAutoFocusDialogStatus(!0)}catch(c){l4.log("[自动对焦初始化失败]=>",c)}};return(s,c)=>{const h=Zs,p=si,g=Vn;return He(),Ct(g,{center:"",class:"van-cell-widget"},{title:Ge(()=>[j(h,{label:e.label,"label-extra":e.labelExtra},null,8,["label","label-extra"])]),label:Ge(()=>[Jt("span",null,an(be(i)+be(n)("device.auto_focus.init")),1)]),"right-icon":Ge(()=>{var _,b;return[j(p,{class:"init-btn",type:"primary",plain:"",size:"small",loading:(b=(_=e.suffix)==null?void 0:_.widgetAttrs)==null?void 0:b.disabled,onClick:l},{default:Ge(()=>[Ho(an(be(n)("device.auto_focus.init")),1)]),_:1},8,["loading"])]}),_:1})}}});const Dz=$a(Oz,[["__scopeId","data-v-eb161c4f"]]),Mz={style:{width:"12em"}},Nz=$e({__name:"WidgetUnitInput",props:{min:null,max:null,name:null,label:null,labelSuffix:null,value:null,suffix:null,onBlur:null,options:null,allowNull:{type:Boolean},handler:null},setup(e){const t=e,{t:n}=Un(),r=ke(!1),i=jf(),{unit:{fractionDigits:l,scale:s,step:c,current:h}}=i,p=Ee(()=>`${n(t.label)}${t.labelSuffix??""}(${h})`),g=ke(h==="in"?t.value*s:t.value),_=ke(n0(t.min,l)),b=ke(n0(t.max,l)),{valueRef:x,running:k,debouncedFn:T}=a4(g,t.handler),P=()=>{var N;return T((N=t.suffix)==null?void 0:N.name)};at(()=>t.value,(N,W)=>{N!==W&&(x.value=N)});const A=Ee(()=>na({id:t.name,type:"number",value:x.value,attrs:{min:_.value,max:b.value,showValRange:!0,valueWidth:"100px",step:c,scale:1,fractionDigits:l,allowNull:!0},keyboardAttrs:{extraKey:["."]}})),L=N=>{console.log("keyboardConfirmVal",N),x.value=A.value.value;let W=null;A.value.value!==null&&A.value.value!==""&&(W=A.value.value/s),t.handler(t.name,W)},F=()=>{A.value.value=x.value,r.value=!0};return(N,W)=>{const te=N0,G=o4,K=qs,re=si,H=Vn;return He(),Ct(H,{center:""},Mf({title:Ge(()=>[Jt("div",Mz,an(be(p)),1)]),value:Ge(()=>[j(te,{"model-value":be(x),"allow-null":"",max:b.value,min:_.value,scale:1,"fraction-digits":be(l),"input-align":"right",style:{padding:"0"},readonly:"",onClick:i5(F,["stop"])},null,8,["model-value","max","min","fraction-digits","onClick"]),j(G,{show:r.value,"onUpdate:show":W[0]||(W[0]=J=>r.value=J),title:be(p),inputs:[be(A)],onKeyboardConfirm:L},null,8,["show","title","inputs"])]),_:2},[e.suffix?{name:"extra",fn:Ge(()=>{var J,ie;return[j(re,{type:"primary",plain:"",size:"mini",loading:be(k),style:{"margin-left":"10px"},onClick:P},Mf({_:2},[(ie=(J=e.suffix)==null?void 0:J.widgetAttrs)!=null&&ie.icon?{name:"icon",fn:Ge(()=>[j(K,{name:e.suffix.widgetAttrs.icon,size:"20px"},null,8,["name"])]),key:"0"}:void 0]),1032,["loading"])]}),key:"0"}:void 0]),1024)}}}),Fz={select:rz,material:ZH,unitInput:Nz,slider:gz,switch:Az,text:Dz,radioGroup:tz,paramSelect:ez,selectMaterialText:i4,sliderRange:Tz,edit:EC,deviceInfo:_C,devicePower:wC,deviceVersion:SC,switchCoord:Pz,buttonGroups:vC,input:YH},j2=$e({__name:"XFormItem",props:{widget:null,widgetAttrs:null},setup(e){return(t,n)=>(He(),dn($n,null,[(He(),Ct(r5(be(Fz)[e.widget]),o5(s5({...t.$attrs,...e.widgetAttrs})),null,16)),Cx(t.$slots,"default")],64))}}),$z=$e({__name:"XFormItems",props:{items:null,values:null,handler:null},setup(e){const t=e,n=i=>{let l=!0;return ut(i)?l=i(t.values):l=i!==!1,l},r=i=>{let l=!0;return ut(i)?l=i(t.values):l=i===!1,l};return(i,l)=>(He(!0),dn($n,null,Df(e.items,s=>(He(),dn($n,{key:s.name},[n(s.visible)?(He(),Ct(j2,xn({key:0,value:e.values[s.name],handler:e.handler},{...s,...i.$attrs},{disabled:r(s.disabled)}),{default:Ge(()=>[s.childs?(He(!0),dn($n,{key:0},Df(s.childs,c=>(He(),dn($n,{key:c.name},[n(c.visible)?(He(),Ct(j2,xn({key:0,handler:e.handler,value:e.values[c.name]},{labelExtra:s.labelExtra,label:s.label,...c,...i.$attrs},{data:c,disabled:r(c.disabled)}),null,16,["handler","value","data","disabled"])):Ar("",!0)],64))),128)):Ar("",!0)]),_:2},1040,["value","handler","disabled"])):Ar("",!0)],64))),128))}}),X_=$e({__name:"XForm",setup(e){return(t,n)=>{const r=zk;return He(),Ct(r,{border:!1},{default:Ge(()=>[j($z,o5(s5(t.$attrs)),null,16)]),_:1})}}});const Bz=e=>{e.component("XForm",X_)},Uz=[{label:"device.common.roller",value:"roller"},{label:"device.common.catch",value:"catch"}],Vz={name:"mode",label:"device.common.mode",widget:"select",widgetAttrs:{options:[]}},Hz={name:"material",label:"device.common.material",widget:"material",widgetAttrs:{options:[],size:"small"}},zz={name:"thickness",label:"device.common.thickness",widget:"unitInput",widgetAttrs:{size:"small",showButton:!1}},jz={name:"focalLength",label:"device.common.focal_length",widget:"unitInput",widgetAttrs:{size:"small",showButton:!1}},Gz={name:"rotaryAttachmentType",label:"device.common.rotary_attachment_type",widget:"radioGroup",widgetAttrs:{options:Uz,defaultValue:"roller"}},u4={name:"perimeter",label:"device.common.perimeter",widget:"unitInput",widgetAttrs:{size:"small",showButton:!1,min:3,max:377}},c4={name:"diameter",label:"device.common.diameter",widget:"unitInput",widgetAttrs:{size:"small",showButton:!1,min:1,max:120}},Wz={name:"lightSourceMode",label:"device.common.light_source_mode",widget:"select",widgetAttrs:{size:"small",options:[{value:"red",label:"device.common.red_light"},{value:"blue",label:"device.common.blue_light"},{value:"blueRedMix",label:"device.common.blue_red_light"}],defaultValue:"blue"}},qz={name:"catchMode",label:null,type:"group",visible:e=>e.rotaryAttachmentType==="catch",childs:[u4,c4]},Yz=[zs.LASER_CYLINDER],Kz=[zs.LASER_PLANE,zs.LASER_CYLINDER],f4={name:"quickMeasurementBtn",icon:"quick",widget:"button",disabled:e=>!Kz.includes(e.mode),widgetAttrs:{size:"small",style:{"--n-icon-size":"16px"}}},d4={name:"preciseMeasurementBtn",icon:"accurate",widget:"button",disabled:e=>Yz.includes(e.mode),widgetAttrs:{size:"small",style:{"--n-icon-size":"14px"}}},Zz={name:"thicknessGroup",label:"device.common.thickness",type:"group",childs:[{name:"thickness",widget:"unitInput",widgetAttrs:{size:"small",showButton:!1}},f4,d4]},Jz={name:"focalLengthGroup",label:"device.common.focal_length",type:"group",childs:[{name:"focalLength",widget:"unitInput",widgetAttrs:{size:"small",showButton:!1}},d4,f4]},Xz=[{label:"device.common.grayscale",value:"grayscale"},{label:"device.common.bayer",value:"Bayer"},{label:"device.common.floyd",value:"Floyd"},{label:"device.common.stucki",value:"Stucki"},{label:"device.common.atkinson",value:"Atkinson"},{label:"device.common.jarvis",value:"Jarvis"},{label:"device.common.sierra",value:"Sierra"}],Qz=[{label:"device.common.z_mode",value:"zMode"},{label:"device.common.one_way",value:"oneWay"}],ej=[10,20,30,40,50,60,70,80,90,100,120,140,160,180,200,220,240,260,280,300].map(e=>({label:String(e),value:e})),tj={name:"selectMaterial",label:"mobile.device.select_material",widget:"selectMaterialText",widgetAttrs:{options:[]}},nj={label:"device.processing_attrs.out_put",name:"processIgnore",widget:"radioGroup",widgetAttrs:{options:[{label:"device.element_container.output",value:!1},{label:"device.element_container.ignore",value:!0}]}},rj={name:"processingType",label:"device.element_container.output_type",widget:"select",widgetAttrs:{size:"small",options:[]}},aj={name:"materialType",label:"device.element_container.param",childs:[{name:"materialType",widget:"paramSelect",widgetAttrs:{options:[],placeholder:""},style:{flex:1}},{name:"saveParam",widget:"saveParamButton",disabled:()=>!0}]},ij={name:"processingLightSource",label:"device.common.laser_light_mode",widget:"radioGroup",widgetAttrs:{options:[{value:"blue",label:"device.common.blue_light"},{value:"red",label:"device.common.red_light"}]}},oj={name:"bitmapEngraveMode",label:"device.common.engrave_mode",widget:"radioGroup",widgetAttrs:{options:[{value:"normal",label:"device.common.normal_mode"},{value:"dot",label:"device.common.dot_mode"}]}},sj={name:"dotDuration",label:"device.common.dot_duration",widget:"slider",widgetAttrs:{showInput:!0,min:10,max:3e3,step:1,digits:0}},lj={name:"power",label:"device.common.power",unitExtra:"(%)",widget:"slider",widgetAttrs:{showInput:!0,min:1,max:100,digits:0},visible:e=>!(e.bitmapEngraveMode==="dot"&&e.bitmapMode==="grayscale")},uj={name:"cutPressure",label:"device.common.cut_pressure",unitExtra:"(g)",widget:"slider",widgetAttrs:{showInput:!0,min:45,max:360,digits:0}},cj={name:"speed",label:"device.common.speed",unitExtra:"(mm/s)",widget:"slider",widgetAttrs:{showInput:!0,min:1,digits:0}},fj={name:"repeat",label:"device.common.pass",widget:"slider",widgetAttrs:{min:1,max:10,digits:0,allowEmpty:!1}},dj={name:"density",label:"device.common.lines_per_cm",widget:"select",widgetAttrs:{size:"small",placeholder:"",options:ej,to:!1}},hj={name:"bitmapMode",label:"device.common.bitmap_mode",widget:"select",widgetAttrs:{size:"small",placeholder:"",options:Xz,to:!1}},pj={name:"bitmapScanMode",label:"device.common.bitmap_scan_mode",widget:"select",widgetAttrs:{size:"small",placeholder:"",options:Qz,to:!1}},gj={name:"enableBreakPoint",widget:"radioGroup",label:"device.common.break_point_cut",widgetAttrs:{options:[{label:"device.common.on",value:!0},{label:"device.common.off",value:!1}]}},mj={name:"breakPointSize",widget:"number",label:"device.common.break_point_size",visible:e=>!!e.enableBreakPoint,widgetAttrs:{size:"tiny",suffix:"mm",min:.2,max:1,step:.1,digits:1,style:{flex:"auto",width:"78px"}},inline:!0},vj={name:"breakPointCount",widget:"number",label:"device.common.break_point_count",visible:e=>!!e.enableBreakPoint,widgetAttrs:{size:"tiny",min:2,max:50,step:1,digits:0,style:{flex:"auto",width:"78px"}},inline:!0},_j={name:"dpi",widget:"slider",label:"device.common.dpi",widgetAttrs:{showInput:!0,min:1,max:1270},inputWrapperStyle:{}},yj={name:"breakPointPower",widget:"number",label:"device.common.break_point_power",visible:e=>!!e.enableBreakPoint,widgetAttrs:{size:"tiny",suffix:"%",min:0,max:90,step:1,digits:0,style:{flex:"auto",width:"78px"}},inline:!0},bj={name:"powerMinMaxRange",widget:"sliderRange",label:"device.common.power_range",visible:e=>e.bitmapEngraveMode==="dot"&&e.bitmapMode==="grayscale",widgetAttrs:{range:!0,showNumber:!1,showText:!0,min:1,max:100}},G2={mode:Vz,material:Hz,thickness:zz,thicknessGroup:Zz,focalLength:jz,focalLengthGroup:Jz,rotaryAttachmentType:Gz,perimeter:u4,diameter:c4,lightSourceMode:Wz,catchMode:qz,processIgnore:nj,processingType:rj,materialType:aj,processingLightSource:ij,power:lj,cutPressure:uj,speed:cj,repeat:fj,density:dj,bitmapMode:hj,bitmapScanMode:pj,enableBreakPoint:gj,breakPointSize:mj,breakPointCount:vj,breakPointPower:yj,bitmapEngraveMode:oj,dotDuration:sj,dpi:_j,powerRange:bj,selectMaterial:tj},W2=(e,t)=>lr(e)&&e in G2?wj(Qx(G2[e]),t):null,wj=(e,t)=>{let n=e.visible??!0;return ut(e.visible)&&(n=e.visible(t)),n?e:null},h4=(e,t)=>{const n=[];return e.forEach(r=>{const i=W2(r,t);if(i)n.push(i);else if(Jx(r)&&pu(r,"name")){const l=W2(r.name,t);l?n.push(Xx(l,r)):n.push(r),console.log(["=> field is plain object.",r])}else console.warn([`=> parse field "${r}" not found.`])}),n},Sj=$e({__name:"DeviceValuesContainer",props:{ext:null,canvasId:null,deviceInfo:null,modeOptions:{type:[Function,Array]},deviceValues:null,fieldsMap:null,handler:{type:Function},processTypes:{type:[Function,Array]}},setup(e){const t=e,n=ln(),{t:r}=Un(),i=(h,p)=>{if(console.log("[DeviceValuesContainer handlerWrapper]=>",h,p),t.handler(h,p),h==="mode"&&p==="LASER_EXTENDER"&&n.setGlobalDialogStatus({show:!1,title:"device.setting.laser_extender_check",dialogContents:["device.setting.laser_extender_tip"]}),h==="thickness"){if(n.isInProcessing){kf(r("device.process.device_is_working"));return}let g=parseFloat(p);if(isNaN(g))return;g<0&&(g=0),g>z2&&(g=z2);const _=s4+g;t.ext.autoFocus(_)}},l={mode(h){if(h&&t.modeOptions){let p=t.modeOptions;ut(p)&&(p=p()),h.widgetAttrs.options=p}},material(h){var g;const p=ut(t.processTypes)?t.processTypes():t.processTypes;h.widgetAttrs=Object.assign({},h.widgetAttrs,{power:((g=t.deviceInfo)==null?void 0:g.power)??0,processTypes:u5(p,"value")})}},s=h=>{h.forEach(p=>{const g=l[p.name];ut(g)&&g(p)})},c=Ee(()=>{const{mode:h}=t.deviceValues,p=t.fieldsMap[h]||[],g=h4(p,t.deviceValues);if(s(g),n.info.id===sn.F1){const _=g.find(x=>x.name==="mode");(_==null?void 0:_.widgetAttrs.options.find(x=>x.value===Gt.LASER_EXTENDER))&&(_==null||_.widgetAttrs.options.pop())}return console.log("[DeviceValuesContainer items]>",g),g});return(h,p)=>(He(),Ct(be(X_),{values:e.deviceValues,items:be(c),handler:i},null,8,["values","items"]))}});const xj=$a(Sj,[["__scopeId","data-v-6db2337d"]]),Ej={key:0},kj=$e({__name:"ElementContainer",props:{ext:null,elements:null,elementValues:null,deviceValues:null,selectedTypes:null,typeOptions:{type:[Function,Array]},fieldsMap:null,handler:{type:Function},handleSelectVector:{type:Function},handleSelectBitmap:{type:Function}},setup(e){const t=e,n={processingType(s){if(s&&t.typeOptions){let c=t.typeOptions;ut(c)&&(c=c()),s.widgetAttrs.options=c}},materialType(s){var c;(c=s.childs)==null||c.map(h=>(h.widgetAttrs=Object.assign({},h.widgetAttrs,{processingType:t.elementValues.processingType,material:t.deviceValues.material}),h))},speed(s){s.widgetAttrs=Object.assign({},s.widgetAttrs,t.ext.getSpeedScope(t.deviceValues,t.elementValues));const{max:c}=s.widgetAttrs;Us(c)&&t.elementValues.speed>c&&t.handler("speed",c)}},r=s=>{s.forEach(c=>{const h=n[c.name];ut(h)&&h(c);const p=t==null?void 0:t.elementValues[c.name];c!=null&&c.label&&Gs(p)&&(c.labelExtra="device.element_container.multiple_values")})},i=Ee(()=>{var p;const s=t.deviceValues.mode,c=[zs.KNIFE_CUT,zs.PRINTER_KNIFE_CUT].includes(s),h=((p=t.elementValues)==null?void 0:p.processingType)===M6.BITMAP_ENGRAVING;return c&&h}),l=Ee(()=>{let s={ignore:[],type:[],other:[]};if(i.value)return s;const{processingType:c}=t.elementValues,h=t.fieldsMap[c]||["processIgnore","processingType"];let p=h4(h,t.elementValues);En(c)&&(p=p.slice(0,2)),r(p);const[g,_,b,...x]=p;return s={ignore:g?[g]:[],type:_?[_]:[],other:x},b&&s.type.push(b),s});return(s,c)=>{const h=i4,p=X_;return He(),dn($n,null,[j(h,{label:"mobile.device.select_material"}),be(En)(be(l).ignore)?Ar("",!0):(He(),dn("section",Ej,[j(p,{class:"mt-3",values:e.elementValues,items:be(l).ignore,handler:e.handler},null,8,["values","items","handler"])])),j(p,{values:e.elementValues,items:be(l).type,handler:e.handler},null,8,["values","items","handler"]),be(l).other?(He(),Ct(p,{key:1,class:"ml-3 mt-3 gap-3",values:e.elementValues,items:be(l).other,handler:e.handler},null,8,["values","items","handler"])):Ar("",!0)],64)}}}),Cj=e=>{e.component("ElementContainer",kj),e.component("DeviceValuesContainer",xj)},Tj={mounted(e,t){e.style.cursor="move",e.style.position="fixed",e.style.zIndex="1000";const n=t.arg||null;let r=window.innerWidth-Pj(),i=window.innerHeight;if(n){const l=document.getElementById(n),{width:s,height:c}=l.getBoundingClientRect();r=s,i=c,["fixed","absolute","relative"].includes(Aj(l,"position"))||(l.style.position="relative"),e.style.position="absolute"}e.addEventListener("touchstart",l=>{const{width:s,height:c}=e.getBoundingClientRect(),h=e.offsetLeft,p=e.offsetTop,g=l.touches[0].clientX,_=l.touches[0].clientY,b=h,x=r-h-s,k=p,T=i-p-c;document.ontouchmove=P=>{const A=P.touches[0].clientX-g,L=P.touches[0].clientY-_;return A<0&&A<=-b?e.style.left=h-b+"px":A>0&&A>=x?e.style.left=h+x+"px":e.style.left=h+A+"px",L<0&&L<=-k?e.style.top=p-k+"px":L>0&&L>=T?e.style.top=p+T+"px":e.style.top=p+L+"px",!1},document.ontouchend=()=>{document.ontouchmove=null,document.ontouchend=null}})}};function Aj(e,t){return e.style?e.style[t]:window.getComputedStyle(e,null)[t]}function Pj(){const e=document.createElement("DIV");e.style.cssText="position:absolute; top:-1000px; width:100px; height:100px; overflow:hidden;";const t=document.body.appendChild(e).clientWidth;e.style.overflowY="scroll";const n=e.clientWidth;return document.body.removeChild(e),document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)?t-n:0}const Lj={draggable:Tj},Ij={install(e){for(const[t,n]of Object.entries(Lj))e.directive(t,n)}};class Rj{constructor(){de(this,"LinkReponseType",{common:0,listener:1});de(this,"LinkResponseCode",{success:0});de(this,"gLinkMsgCount",0);de(this,"gLinkRequestGap",1e4);de(this,"gLinkMapRequest",new Map);de(this,"gLinkMapRequestModule",new Map);de(this,"gLinkIsAndroid",!!window.LinkNative);de(this,"gLinkFetchHost",this.gLinkIsAndroid?"":"xcsfetch://xcsfile")}isBrowser(){var n,r;return typeof(window.LinkNative||((r=(n=window.webkit)==null?void 0:n.messageHandlers)==null?void 0:r.LinkNative))>"u"}}const ve=new Rj;class hi{constructor(t,n){this.idStart=t,this.service=n,ve.gLinkMapRequestModule.set(this.idStart,this)}response(t){let n=t.id;if(typeof n>"u")return;let r=t.code,i=t.data,l=t.type,s=t.encode??!1,c=t.method,h=t.message,p=ve.gLinkMapRequest.get(n),g=s?window.atob(i):i;l===ve.LinkReponseType.listener?p=this.createRequest(n,l,c,p===void 0?null:p.resolve,p===void 0?null:p.reject):ve.gLinkMapRequest.delete(n),this.responseHandle(p,r,g,h)}responseHandle(t,n,r,i){typeof t>"u"||(n===ve.LinkResponseCode.success?typeof t.resolve<"u"&&t.resolve(r):typeof t.reject<"u"&&t.reject(i))}responseTimeOut(t,n){this.responseReject(t,n)}responseReject(t,n){let r=ve.gLinkMapRequest.get(t);typeof r>"u"||(r.reject(n),ve.gLinkMapRequest.delete(t))}JSCallNativeRequest(t,n,r,i){++ve.gLinkMsgCount>ve.gLinkRequestGap*.9&&(ve.gLinkMsgCount=0);const l=this.idStart*ve.gLinkRequestGap+ve.gLinkMsgCount;if(i>0)return new Promise((s,c)=>{this.addRequestCallBack(l,0,n,s,c),this.JSCallNative(l,t,this.service,n,r),setTimeout(()=>{this.responseTimeOut(l,"timeout")},i)});this.JSCallNative(l,t,this.service,n,r)}addRequestCallBack(t,n,r,i,l){ve.gLinkMapRequest.set(t,this.createRequest(t,n,r,i,l))}createRequest(t,n,r,i,l){let s={};return s.method=r,s.resolve=i,s.reject=l,s.responeType=n,s}JSCallNative(t,n,r,i,l){var p,g;let s={};s.id=t,s.service=r,s.method=i,s.params=l,s.type=n;let c={},h=window.LinkNative;h?c=JSON.stringify(s):(h=(g=(p=window.webkit)==null?void 0:p.messageHandlers)==null?void 0:g.LinkNative,c.parameters=JSON.stringify(s)),h==null||h.postMessage(c)}}class Oj extends hi{appContentId(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"appContentId",[],5e3)}getOsPlatform(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"getOsPlatform",[],5e3)}updateAppVersion(t){return this.JSCallNativeRequest(ve.LinkReponseType.common,"updateAppVersion",[t],5e3)}getAppVersion(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"getAppVersion",[],5e3)}openBrowser(t){return this.JSCallNativeRequest(ve.LinkReponseType.common,"openBrowser",[t],5e3)}exit(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"exit",[],5e3)}getFetchFileHost(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"getFetchFileHost",[],5e3)}pagePathChange(t){return this.JSCallNativeRequest(ve.LinkReponseType.common,"pagePathChange",[t],5e3)}setStatusBar(t,n){return this.JSCallNativeRequest(ve.LinkReponseType.common,"setStatusBar",[t,n],5e3)}reloadData(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"reloadData",[])}}class Q_ extends hi{constructor(t,n){super(t,n),this._events={}}on(t,n){return this._events[t]||(this._events[t]=[]),this._events[t].push(n),this}emit(t,...n){let r=this._events[t];for(let i of r)i(...n);return this}off(t,n){if(n)return this._events[t]&&(this._events[t]=this._events[t].filter(r=>n!==r)),this}once(t,n){let r=function(...i){n.apply(this,...i),this.off(t,r)};return r=r.bind(this),this.on(t,r),this}}class Dj extends Q_{dispose(){if(ve.isBrowser())return!0;this.JSCallNativeRequest(ve.LinkReponseType.common,"dispose",[],5e3)}async list(t){await this.JSCallNativeRequest(ve.LinkReponseType.listener,"listenTcp",[20001],5e3),console.log("--- list: "+t);let n=["224.0.1.77",2e4];this.JSCallNativeRequest(ve.LinkReponseType.listener,"sendUdpData",n,3e4)}async ip(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"getLocalIp","",5e3)}responseHandle(t,n,r,i){let l=t.method;if(t.responeType===ve.LinkReponseType.listener){if(l==="listenTcp"){console.log("receiver emit");let s={};s.ip=r,s.type="UDP",this.emit("receiver",s);return}else if(l==="sendUdpData"){const s=JSON.parse(r);this.emit("receiver",s)}}else super.responseHandle(t,n,r,i)}}class Mj extends hi{responseHandle(t,n,r,i){let l=t.method;t.responeType===ve.LinkReponseType.listener?l==="uploadGcode"&&(this.uploadGodeResolve&&!Number.isFinite(r)?(this.uploadGodeProgress=null,this.uploadGodeResolve(JSON.parse(r))):this.uploadGodeReject&&parseInt(r)===-1?(this.uploadGodeProgress=null,this.uploadGodeReject("upload error")):this.uploadGodeProgress(r)):(l==="read"?t.resolve(this.dataToUnit8Array(r)):l==="getAppPath"?this.reSetHomePath(r):l==="read2Buffer"?t.resolve(this.dataToUnit8Array(r)):l==="read2Str"?t.resolve(this.dataToString(r)):l==="readTmpProject"&&t.resolve(this.dataToString(r)),super.responseHandle(t,n,r,i))}getAPPHomePath(){this.JSCallNativeRequest(ve.LinkReponseType.common,"getAppPath","",1e4)}reSetHomePath(t){this.homePath=t}exists(t){return console.log("--- filehepler exists filePath: "+t),this.JSCallNativeRequest(ve.LinkReponseType.common,"exists",[t],5e3)}rename(t,n){return this.JSCallNativeRequest(ve.LinkReponseType.common,"rename",[t,n],5e3)}async read(t,n){return n==="utf8"?await this.read2Str(t,"utf-8"):await this.read2Buffer(t)}write(t,n,r){console.log("--- filehepler write filePath: "+t+" "+n.length+" "+r)}async save(t,n,r){return this.JSCallNativeRequest(ve.LinkReponseType.common,"save",[t,n,r],3e4)}async read2Buffer(t){return await this.fetchFile(t,!0)}async read2Blob(t){return await this.fetchFile(t,!1)}async read2Str(t,n){console.debug("=> lint read2Str: "+t+" "+n);const r=await this.fetchFile(t);return new TextDecoder("utf-8").decode(r,{stream:!0})}writeGCode(t,n,r=!1){return this.JSCallNativeRequest(ve.LinkReponseType.common,"writeGCode",[this.homePath+t,n,r],5e3)}readGcode(t){return t.length>100?t:this.read2Str(this.homePath+t,"utf-8")}async shareGCode(t,n,r,i){return this.JSCallNativeRequest(ve.LinkReponseType.common,"shareGCode",[t,n,r,i],6e5)}async shareXCS(t){return this.JSCallNativeRequest(ve.LinkReponseType.common,"shareXCS",[t],5e3)}async uploadGcode(t,n,r,i,l,s,c){this.uploadGodeProgress=s;let h=await this.JSCallNativeRequest(ve.LinkReponseType.listener,"uploadGcode",[t,n,r,i,l],5*1e3);return c(this.cancelUploadGcode.bind(this)),new Promise((p,g)=>{this.uploadGodeResolve=p,this.uploadGodeReject=g,h||g("upload error")})}cancelUploadGcode(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"cancelUploadGcode",[],5*1e3)}read2JSON(t){console.log("--- filehepler read2JSON filePath: "+t)}async openDialog(t){return this.JSCallNativeRequest(ve.LinkReponseType.common,"openDialog",[t],30*60*1e3)}saveDialog(t){console.log("--- filehepler saveDialog: "+t)}download(t,n){console.log("--- filehepler download url: "+t+" "+n)}async appendFileSync(t,n,r=!1){return this.JSCallNativeRequest(ve.LinkReponseType.common,"appendFileSync",[this.homePath+t,n,r],5e3)}emptyDirSync(t){this.JSCallNativeRequest(ve.LinkReponseType.common,"emptyDirSync",[this.homePath+t],5e3)}readDirSync(t){console.log("--- filehepler readDirSync relatePath:"+t)}getPath(t){return this.homePath+t}writeJson(t,n){console.log("--- filehepler writeJson relatePath:"+t+" "+n.length)}removeFileSync(t){this.JSCallNativeRequest(ve.LinkReponseType.common,"removeFileSync",[this.homePath+t],5e3)}delete(t){return this.JSCallNativeRequest(ve.LinkReponseType.common,"delete",[t],5e3)}getAllXcsFile(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"getAllXcsFile",[],5e3)}async saveXCS(t,n,r,i){const l="temporary",{result:s,filePath:c}=await this.saveFileWithFetch(l,"xcsTmpFile.xcs",n),{result:h,filePath:p}=await this.saveFileWithFetch(l,"shotTmpFile.png",i);return s&&h?this.JSCallNativeRequest(ve.LinkReponseType.common,"saveXCS",[t,c,r,p],3e4):new Promise.reject(new Error("save file fail"))}async importXCS(t,n){return this.JSCallNativeRequest(ve.LinkReponseType.common,"importXCS",[t,n],3e4)}async updateXCSShot(t,n){return this.JSCallNativeRequest(ve.LinkReponseType.common,"updateXCSShot",[t,n],5e3)}deleteXCS(t){return this.JSCallNativeRequest(ve.LinkReponseType.common,"deleteXCS",[t],5e3)}copyXCS(t){return this.JSCallNativeRequest(ve.LinkReponseType.common,"copyXCS",[t],5e3)}renameXCS(t,n){return this.JSCallNativeRequest(ve.LinkReponseType.common,"renameXCS",[t,n],5e3)}copyFile(t){return this.JSCallNativeRequest(ve.LinkReponseType.common,"copyFile",[t],5e3)}shareFile(t){return this.JSCallNativeRequest(ve.LinkReponseType.common,"shareFile",[t],5e3)}async autoSave2Tmp(t,n,r){const i="temporary",{result:l,filePath:s}=await this.saveFileWithFetch(i,"tmp_xcsFile.xcs",t);return l===!1?new Promise((c,h)=>{h(new Error("save file fail"))}):this.JSCallNativeRequest(ve.LinkReponseType.common,"autoSave2Tmp",[s,n,r],5e3)}deleteTmp(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"deleteTmp",[],5e3)}getTmpProjectInfo(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"getTmpProjectInfo",[],5e3)}readTmpProject(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"readTmpProject",[],5e3)}getTmpProjectPath(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"getTmpProjectPath",[],5e3)}async fetchFile(t,n=!0){const r=await fetch(`${ve.gLinkFetchHost}${t}`,{headers:{"Access-Control-Allow-Origin":"*",mode:"cros",Expires:"0","Cache-Control":"no-cache",Pragma:"no-cache"}});return n?new Uint8Array(await r.arrayBuffer()):await r.blob()}async saveFileWithFetch(t,n,r){const i="http://localhost:12332/savefile?type="+t+"&path="+n;return fetch(i,{method:"post",body:r,headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/octet-stream",Expires:"0","Cache-Control":"no-cache",Pragma:"no-cache"}}).then(l=>l.json()).then(l=>l)}async deleteDictory(t,n){return this.JSCallNativeRequest(ve.LinkReponseType.common,"deleteDictory",[t,n],5e3)}dataToUnit8Array(t){return new Uint8Array(t)}dataToString(t){let n="",r=8192,i;for(i=0;i<t.length/r;i++)n+=String.fromCharCode.apply(null,t.slice(i*r,(i+1)*r));return n+=String.fromCharCode.apply(null,t.slice(i*r)),n}}class Nj extends hi{responseHandle(t,n,r,i){super.responseHandle(t,n,r,i)}getFontPaths(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"getFontPaths",[ve.gLinkFetchHost],15e3)}}class Fj extends hi{responseHandle(t,n,r,i){if(t.method==="imageOptimize"){t.resolve(r);return}super.responseHandle(t,n,r,i)}async imageOptimize(t){return this.JSCallNativeRequest(ve.LinkReponseType.common,"imageOptimize",[t],15e3)}}class $j extends hi{responseHandle(t,n,r,i){if(t.method==="callOpenFileHandler"){this.callOpenFileHandler(r);return}super.responseHandle(t,n,r,i)}setOpenFileHandle(t){this.fileHandler=t}callOpenFileHandler(t){const{filePath:n,newProject:r}=t;console.log("callOpenFileHandler filePath:"+n),this.fileHandler(n,!!(r??!0))}getFile(){return console.log("fileUrl:"+this.shareFile),this.shareFile}configShareFile(){var t=this.loadShareAction();typeof t<"u"?this.shareFile=t.param("fileUrl"):this.shareFile=""}loadShareAction(){var t,n;return function(){t=[],n={};var i=window.location.search.substr(1);if(i!==""){for(var l=decodeURIComponent(i).split("&"),s=0,c=l.length;s<c;s++)if(l[s]!==""){var h=l[s].split("=");if(h.length===1||h.length===2&&h[1]==="")t.push([""]),n[h[0]]=t.length-1;else{if(typeof h[0]>"u"||h[0]==="")continue;typeof n[h[0]]>"u"?(t.push([h[1]]),n[h[0]]=t.length-1):t[n[h[0]]].push(h[1])}}}}(),{param:function(r){try{return typeof r=="number"?t[r][0]:t[n[r]][0]}catch{}},paramValues:function(r){try{return typeof r=="number"?t[r]:t[n[r]]}catch{}},hasParam:function(r){return typeof r=="string"?typeof n[r]<"u":!1},paramMap:function(){var r={};try{for(var i in n)r[i]=t[n[i]]}catch{}return r}}}}class Bj extends hi{async size(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"size",[],5e3)}async path(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"path",[],5e3)}switchLevel(t){return this.JSCallNativeRequest(ve.LinkReponseType.common,"switchLevel",[t],0)}clear(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"clear",[],0)}openLog(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"openLog",[1],0)}emit(t,n,...r){if(n==="error")return this.JSCallNativeRequest(ve.LinkReponseType.common,"emitLog",[t,n,r],0)}}class Uj extends hi{openSafari(t){window.webkit.messageHandlers.openNativeAction.postMessage({method:"openUrl",url:t})}shareFile(t){window.webkit.messageHandlers.openNativeAction.postMessage({method:"shareFile",url:t})}needBackgroundTask(t){window.webkit.messageHandlers.openNativeAction.postMessage({method:"needBackgroundTask",isNeed:t})}deviceWarning(t){window.webkit.messageHandlers.openNativeAction.postMessage({method:"deviceWarning",isWarning:t})}mainWindowLoaded(){window.webkit.messageHandlers.openNativeAction.postMessage({method:"mainWindowLoaded"})}print(t,n,r){return this.JSCallNativeRequest(ve.LinkReponseType.common,"print",[t,n,r],15e4)}async setNativeStorageData(){let t=new Object;for(let n=0;n<localStorage.length;n++){let r=localStorage.key(n);t[r]=localStorage.getItem(r)}return this.JSCallNativeRequest(ve.LinkReponseType.common,"setNativeStorage",[t],15e3)}async getNativeStorageData(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"getNativeStorage",[],15e3)}addListenerForLocalStorage(){const t="localStorage_updateEvent";let n=localStorage.setItem;localStorage.setItem=function(l,s){let c=new Event(t);window.dispatchEvent(c),n.apply(this,arguments)};let r=localStorage.removeItem;localStorage.removeItem=function(l){let s=new Event(t);window.dispatchEvent(s),r.apply(this,arguments)};let i=localStorage.clear;localStorage.clear=function(){let l=new Event(t);window.dispatchEvent(l),i.apply(this)},window.addEventListener(t,l=>{this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.setNativeStorageData()},1e3)})}async configLocalStorage(){try{let t=await this.getNativeStorageData();for(const n in t)if(Object.hasOwnProperty.call(t,n)){const r=t[n];localStorage.setItem(n,r)}this.addListenerForLocalStorage()}catch(t){console.log("error ======> ",t),this.addListenerForLocalStorage()}}}class Vj extends hi{responseHandle(t,n,r,i){let l=t.method;if(l==="pingOnceCheck")n===ve.LinkResponseCode.success?t.resolve(r[0]):t.resolve(!1);else if(l==="pingHeartCheck"){t.responeType===ve.LinkReponseType.common?n!==ve.LinkResponseCode.success&&(console.log("pingOnceCheck Error: "+i),t.resolve(!1),this.pingHeartTimeOut()):t.responeType===ve.LinkReponseType.listener&&this.pingHeartTimeOut();return}super.responseHandle(t,n,r,i)}responseTimeOut(t,n){let r=ve.gLinkMapRequest.get(t);if(!(typeof r>"u")){if(r.method==="pingOnceCheck"){r.resolve(!1),ve.gLinkMapRequest.delete(t);return}else if(r.method==="pingHeartCheck"){this.pingHeartTimeOut();return}super.responseTimeOut(t,n)}}async pingOnceCheck(t,n){return console.log("pingOnceCheck---",t,n),!0}pingHeartKillPorcess(){this.JSCallNativeRequest(ve.LinkReponseType.common,"pingHeartStop",[],3e3)}pingHeartTimeOut(){ve.isBrowser()||typeof this.funcPingHearTimeOut<"u"&&this.funcPingHearTimeOut()}pingHeartCheck(t,n,r){return this.funcPingHearTimeOut=n,this.JSCallNativeRequest(ve.LinkReponseType.listener,"pingHeartCheck",[t,r.maxCount,r.timeout],5e3),this.pingHeartKillPorcess.bind(this)}}class Hj{static linkNativeCallBack(t){let n=t;typeof t=="string"&&(n=JSON.parse(t));let r=n.id,i=parseInt(r/ve.gLinkRequestGap),l=ve.gLinkMapRequestModule.get(i);typeof l<"u"&&l.response(n)}}class zj extends hi{correct_M1(t,n,r){return this.JSCallNativeRequest(ve.LinkReponseType.common,"correct_M1",[t,n,r],15e3)}apply_second_calib(t,n){return this.JSCallNativeRequest(ve.LinkReponseType.common,"apply_second_calib",[t,n],3e4)}bitmap_dataToGray(t){return this.JSCallNativeRequest(ve.LinkReponseType.common,"bitmap_dataToGray",[t],3e4)}bitmap_calDataWithMode(t,n,r,i,l=250){return this.JSCallNativeRequest(ve.LinkReponseType.common,"bitmap_calDataWithMode",[t,n,r,i,l],3e4)}bitmap_resize(t,n,r,i,l){return this.JSCallNativeRequest(ve.LinkReponseType.common,"bitmap_resize",[t,n,r,i,l],3e4)}process_path(t,n){return this.JSCallNativeRequest(ve.LinkReponseType.common,"process_path",[t,n],3e4)}calcuProcTime_file(t){const n=window.MeApi.fileHelper.getPath(t);return this.JSCallNativeRequest(ve.LinkReponseType.common,"calcuProcTime_file",[n],3e5)}genGcodeToImage(t){const n=window.MeApi.fileHelper.getPath(t);return this.JSCallNativeRequest(ve.LinkReponseType.common,"genGcodeToImage",[n],3e5)}cancelGcodeToImage(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"cancelGcodeToImage",[],1e4)}}const Xa=6e5;class jj extends Q_{responseHandle(t,n,r,i){super.responseHandle(t,n,r,i)}isLocationOpen(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"isLocationOpen",[],Xa)}openLocationPage(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"openLocationPage",[],Xa)}openAppPermissionPage(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"openAppPermissionPage",[],Xa)}isGrantedLocationPermission(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"isGrantedLocationPermission",[],Xa)}isAccuracyLocationOpen(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"isAccuracyLocationOpen",[],Xa)}grantLocationPermission(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"grantLocationPermission",[],Xa)}isGrantedInternetPermission(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"isGrantedInternetPermission",[],Xa)}grantInternetPermission(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"grantInternetPermission",[],Xa)}isGrantedCameraPermission(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"isGrantedCameraPermission",[],Xa)}grantCameraPermission(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"grantCameraPermission",[],Xa)}}class Gj extends Q_{responseHandle(t,n,r,i){super.responseHandle(t,n,r,i)}isWifiOpen(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"isWifiOpen",[],5e3)}getWifiName(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"getWifiName",[],5e3)}openWifiPage(){return this.JSCallNativeRequest(ve.LinkReponseType.common,"openWifiPage",[],5e3)}}window.openApi={linkNativeCallBack:e=>{Hj.linkNativeCallBack(e)}};window.MeApi={discovery:new Dj(1,"xnet"),fileHelper:new Mj(2,"xfile"),logger:new Bj(3,"xlog"),openFile:new $j(4,"open_file"),ping:new Vj(5,"xping"),image:new Fj(6,"ximage"),font:new Nj(7,"xfont"),openNative:new Uj(8,"xnative"),wifi:new Gj(9,"xwifi"),permission:new jj(10,"xpermission"),app:new Oj(11,"xapp"),wasmKit:new zj(12,"xwasm"),fontList:()=>[],imageOptimize:e=>window.MeApi.image.imageOptimize(e),getFontPaths:()=>window.MeApi.font.getFontPaths(),mainWindowLoaded:()=>{window.MeApi.openNative.mainWindowLoaded()},getAppVersion:()=>window.MeApi.app.getAppVersion(),getOsPlatform:()=>window.MeApi.app.getOsPlatform(),appContentId:()=>window.MeApi.app.appContentId(),updateAppVersion:async e=>await window.MeApi.app.updateAppVersion(e),getFetchFileHost:()=>ve.gLinkFetchHost,uploadGcode:async(e,t,n)=>{const{useFormData:r=!1,headCode:i="",tailCode:l="",onProgress:s=h=>{},onCancel:c=h=>{}}=n;return window.MeApi.fileHelper.uploadGcode(e,i,l,t,r,s,c)}},window.MeApi.fileHelper.getAPPHomePath(),window.MeApi.openFile.configShareFile(),window.MeApi.openNative.configLocalStorage();if(typeof window<"u"){let e=function(){var t=document.body,n=document.getElementById("__svg__icons__dom__");n||(n=document.createElementNS("http://www.w3.org/2000/svg","svg"),n.style.position="absolute",n.style.width="0",n.style.height="0",n.id="__svg__icons__dom__",n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("xmlns:link","http://www.w3.org/1999/xlink")),n.innerHTML='<symbol  viewBox="0 0 20 20" id="icon-accurate"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" /><g transform="rotate(45 5.695 16.909)" stroke="currentColor"><rect x=".5" y=".5" width="7.167" height="16.5" rx="1" /><path stroke-linecap="round" d="M.755 4.083h3.328M.755 6.448h3.328M.755 8.75h3.328M.755 11.115h3.328M.755 13.417h3.328" /></g></g></symbol><symbol  viewBox="0 0 32 32" id="icon-aim"><g fill="none" fill-rule="evenodd"><rect stroke-opacity=".302" stroke="currentColor" stroke-width="1.333" fill="#FFF" x=".667" y=".667" width="30.667" height="30.667" rx="15.333" /><path d="M5.333 5.333h21.333v21.333H5.333z" /><path d="M16 22.667a6.667 6.667 0 1 0 0-13.334 6.667 6.667 0 0 0 0 13.334ZM16 9.334V6.667M9.334 16H6.667M25.334 16h-2.667M16 25.334v-2.667" stroke="#333" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" /><path d="M16 18.667a2.667 2.667 0 1 0 0-5.334 2.667 2.667 0 0 0 0 5.334Z" fill="#333" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 32 32" id="icon-align-bottom"><g fill-rule="nonzero" fill="none"><path d="M4 28h24V4H4z" /><path d="M21.584 12.988a.563.563 0 0 0-.563-.562h-3.382a.563.563 0 0 0-.564.562v7.692c0 .31.253.562.564.562h3.382a.563.563 0 0 0 .563-.562v-7.692Zm-1.029.467v6.76h-2.448v-6.76h2.448Zm-5.72-4.88a.563.563 0 0 0-.564-.562h-3.382a.563.563 0 0 0-.564.563v12.1c0 .31.253.562.564.562h3.382a.563.563 0 0 0 .563-.563v-12.1Zm-1.031.468v11.166h-2.448V9.043h2.448ZM25 23.356a.552.552 0 0 1-.551.552H7.551a.552.552 0 0 1 0-1.104h16.898c.304 0 .551.247.551.552Z" fill="currentColor" /></g></symbol><symbol  viewBox="0 0 32 32" id="icon-align-horizontal"><g fill-rule="nonzero" fill="none"><path d="M4 4h24v24H4z" /><path d="M14.852 22.509a.56.56 0 0 1-.557.562h-3.34a.56.56 0 0 1-.557-.562l-.001-5.926H7.589A.586.586 0 0 1 7 16c0-.322.264-.583.59-.583l2.807-.001V9.49c0-.31.25-.562.558-.562h3.34a.56.56 0 0 1 .557.562v5.925h2.295v-3.568c0-.31.25-.562.558-.562h3.34a.56.56 0 0 1 .557.562v3.568h2.809c.325 0 .589.262.589.584a.586.586 0 0 1-.59.583h-2.808v3.569a.56.56 0 0 1-.557.562h-3.34a.56.56 0 0 1-.557-.562l-.001-3.57h-2.295v5.927Zm-1.018-12.55h-2.418v12.084h2.418V9.958Zm6.75 2.355h-2.418v7.37h2.418v-7.37Z" fill="currentColor" /></g></symbol><symbol  viewBox="0 0 32 32" id="icon-align-left"><g fill-rule="nonzero" fill="none"><path d="M4 4h24v24H4z" /><path d="M9.036 7c.296 0 .535.247.535.551v16.898c0 .304-.24.551-.535.551a.544.544 0 0 1-.536-.551V7.551c0-.304.24-.551.536-.551ZM23 17.125c.276 0 .5.23.5.514v3.472a.507.507 0 0 1-.5.514H11.143c-.276 0-.5-.23-.5-.514v-3.472c0-.284.224-.514.5-.514H23Zm-.5 1.029H11.643v2.442H22.5v-2.442Zm-3.786-7.779c.276 0 .5.23.5.514v3.472a.507.507 0 0 1-.5.514h-7.571c-.276 0-.5-.23-.5-.514v-3.472c0-.284.224-.514.5-.514h7.571Zm-.5 1.029h-6.571v2.442h6.57v-2.442Z" fill="currentColor" /></g></symbol><symbol  viewBox="0 0 32 32" id="icon-align-right"><g fill="none" fill-rule="evenodd"><path d="M4 4h24v24H4z" /><path d="M22.837 7a.56.56 0 0 0-.568.551v16.898a.56.56 0 0 0 .568.551.56.56 0 0 0 .568-.551V7.551A.56.56 0 0 0 22.837 7Zm-10.213 3.375c-.32 0-.58.252-.58.563v3.374c0 .311.26.563.58.563h7.93c.32 0 .58-.252.58-.563v-3.374c0-.311-.26-.563-.58-.563h-7.93Zm.482 1.029h6.968v2.442h-6.968v-2.442ZM8.08 17.125c-.32 0-.58.252-.58.563v3.375c0 .31.26.562.58.562h12.473c.32 0 .58-.252.58-.563v-3.375c0-.31-.26-.562-.58-.562H8.08Zm.481 1.029h11.513v2.442H8.561v-2.442Z" fill="currentColor" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 32 32" id="icon-align-top"><g fill-rule="nonzero" fill="none"><path d="M4 4h24v24H4z" /><path d="M25 8.663a.56.56 0 0 1-.551.568H7.551A.56.56 0 0 1 7 8.663a.56.56 0 0 1 .551-.568h16.898a.56.56 0 0 1 .551.568Zm-3.305 10.094c0 .31-.26.562-.58.562h-3.48a.571.571 0 0 1-.58-.562v-7.691c0-.311.26-.563.58-.563h3.48c.32 0 .58.252.58.563v7.69Zm-1.06-.467v-6.759h-2.518v6.76h2.518Zm-5.69 4.943c0 .31-.26.563-.58.563h-3.48a.571.571 0 0 1-.58-.563v-12.1c0-.31.26-.562.58-.562h3.48c.32 0 .58.252.58.563v12.1Zm-1.06-.467V11.6h-2.519v11.166h2.518Z" fill="currentColor" /></g></symbol><symbol   viewBox="0 0 32 32" id="icon-align-vertical"><defs><path id="icon-align-vertical_a" d="M0 0h24v24H0z" /></defs><g transform="translate(3.996 4)" fill="none" fill-rule="evenodd"><mask id="icon-align-vertical_b" fill="#fff"><use xlink:href="#icon-align-vertical_a" /></mask><path d="M12.583 17.259v3.152c0 .325-.26.589-.583.589a.586.586 0 0 1-.583-.59V17.26h1.166Zm0-6.607v2.75h-1.166v-2.75h1.166ZM12 3c.322 0 .583.264.583.59v3.205h-1.166V3.589c0-.325.26-.589.583-.589Z" fill="currentColor" mask="url(#icon-align-vertical_b)" /><path d="M16.11 6.375a.56.56 0 0 1 .557.563v3.375a.56.56 0 0 1-.557.562H7.89a.56.56 0 0 1-.557-.563V6.938c0-.311.25-.563.557-.563h8.22Zm-.462 1.029H8.35v2.442h7.297V7.404ZM18.443 13.125a.56.56 0 0 1 .557.563v3.374a.56.56 0 0 1-.557.563H5.557A.56.56 0 0 1 5 17.062v-3.375c0-.31.25-.562.557-.562h12.886Zm-.461 1.029H6.018v2.442h11.964v-2.442Z" fill="currentColor" fill-rule="nonzero" mask="url(#icon-align-vertical_b)" /></g></symbol><symbol  viewBox="0 0 24 24" id="icon-align"><g fill="none" fill-rule="evenodd"><path d="M24 0H0v24h24z" /><g transform="translate(3.625 4)" fill="currentColor" fill-rule="nonzero"><rect transform="rotate(90 8.5 8)" x="7.875" y="-.5" width="1.25" height="17" rx=".625" /><path d="M14.875 0a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-13a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h13Zm-.25 1.25h-12.5v3.5h12.5v-3.5ZM14.875 10a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-13a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1h13Zm-.25 1.25h-12.5v3.5h12.5v-3.5Z" /></g></g></symbol><symbol   viewBox="0 0 16 16" id="icon-arrow-close"><defs><path d="M10.984 8.127a.542.542 0 0 1-.16.266l-4.801 4.445a.634.634 0 0 1-.848 0 .526.526 0 0 1 0-.785L9.555 8 5.176 3.947a.526.526 0 0 1 0-.785.634.634 0 0 1 .847 0l4.802 4.445c.152.14.205.339.159.52Z" id="icon-arrow-close_a" /></defs><g transform="rotate(90 8 8)" fill="none" fill-rule="evenodd"><path d="M0 0h16v16H0z" /><use fill="#333" xlink:href="#icon-arrow-close_a" /></g></symbol><symbol   viewBox="0 0 16 16" id="icon-arrow-open"><defs><path d="M10.984 8.127a.542.542 0 0 1-.16.266l-4.801 4.445a.634.634 0 0 1-.848 0 .526.526 0 0 1 0-.785L9.555 8 5.176 3.947a.526.526 0 0 1 0-.785.634.634 0 0 1 .847 0l4.802 4.445c.152.14.205.339.159.52Z" id="icon-arrow-open_a" /></defs><g transform="matrix(0 -1 -1 0 16 16)" fill="none" fill-rule="evenodd"><path d="M0 0h16v16H0z" /><use fill="#333" xlink:href="#icon-arrow-open_a" /></g></symbol><symbol  viewBox="0 0 22 21" id="icon-back-origin"><path d="M11.476.024c.79 0 1.429.64 1.429 1.428v1.669a7.632 7.632 0 0 1 5.474 5.475h1.669a1.429 1.429 0 1 1 0 2.856H18.56a7.626 7.626 0 0 1-5.656 6.427v1.669a1.429 1.429 0 1 1-2.856 0l-.001-1.488a7.623 7.623 0 0 1-6.607-6.608H1.952a1.429 1.429 0 0 1 0-2.857h1.669a7.626 7.626 0 0 1 6.426-5.655V1.452c0-.789.64-1.428 1.43-1.428ZM11 5.167a5.333 5.333 0 1 0 0 10.666 5.333 5.333 0 0 0 0-10.666Zm2.78 4.69c.358 1.507-.56 3.023-2.073 3.425a2.928 2.928 0 0 1-2.715-.767 2.845 2.845 0 0 1-.772-2.682A2.857 2.857 0 0 1 10.38 7.7c1.536-.306 3.041.649 3.4 2.156Z" fill="#FFF" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 18 16" id="icon-connected-status"><g fill="none" fill-rule="evenodd"><path d="M1 0h16v16H1z" /><g stroke="currentColor" stroke-linecap="round" stroke-linejoin="bevel" stroke-width=".959"><path d="M9.495 5.485 7.018 8a2.877 2.877 0 0 0 0 4.024 2.773 2.773 0 0 0 3.964 0L14.945 8a2.877 2.877 0 0 0 0-4.024 2.773 2.773 0 0 0-1.806-.828" /><path d="M4.861 12.852a2.773 2.773 0 0 1-1.806-.828 2.877 2.877 0 0 1 0-4.024l3.963-4.024a2.773 2.773 0 0 1 3.964 0 2.877 2.877 0 0 1 0 4.024l-2.477 2.515" /></g></g></symbol><symbol  viewBox="0 0 20 20" id="icon-connected"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" /><g transform="translate(1.25 1.25)" stroke="currentColor"><rect stroke-width=".8" fill-opacity=".08" fill="#28BE44" x=".4" y=".4" width="16.7" height="16.7" rx="8.35" /><g stroke-linecap="round" stroke-linejoin="bevel" stroke-width=".889"><path d="M9.152 6.674 7.141 8.75a2.403 2.403 0 0 0 0 3.322c.889.918 2.33.918 3.218 0l3.219-3.322a2.403 2.403 0 0 0 0-3.322 2.236 2.236 0 0 0-1.467-.684" /><path d="M5.389 12.756a2.236 2.236 0 0 1-1.467-.684 2.403 2.403 0 0 1 0-3.322l3.219-3.322a2.226 2.226 0 0 1 3.218 0 2.403 2.403 0 0 1 0 3.322l-2.011 2.076" /></g></g></g></symbol><symbol  viewBox="0 0 24 24" id="icon-contour"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="M18.824 19.813a.593.593 0 0 1 0 1.187h-.989a.593.593 0 0 1 0-1.187h.99Zm-3.066 0a.593.593 0 0 1 0 1.187h-.989a.593.593 0 0 1 0-1.187h.99Zm-3.066 0a.593.593 0 1 1 0 1.187h-.989a.593.593 0 1 1 0-1.187h.99Zm-3.066 0a.593.593 0 0 1 0 1.187h-.989a.593.593 0 0 1 0-1.187h.99Zm-3.066 0a.593.593 0 0 1 0 1.187h-.989a.593.593 0 0 1 0-1.187h.99Zm-2.967-1.088c.328 0 .594.266.594.594v.989a.593.593 0 1 1-1.187 0v-.99c0-.327.266-.593.593-.593Zm16.814-.395c.327 0 .593.265.593.593v.99a.593.593 0 1 1-1.187 0v-.99c0-.328.266-.593.594-.593ZM3.593 15.66c.328 0 .594.265.594.593v.989a.593.593 0 0 1-1.187 0v-.99c0-.327.266-.593.593-.593Zm2.823 1.84a.415.415 0 0 1-.354-.63l2.579-4.173a.418.418 0 0 1 .709 0l1.087 1.752 2.712-4.745a.39.39 0 0 1 .687 0l4.107 7.16a.431.431 0 0 1-.137.576.387.387 0 0 1-.207.06H6.416Zm13.99-2.236c.328 0 .594.265.594.593v.99a.593.593 0 0 1-1.187 0v-.99c0-.328.266-.593.594-.593ZM8.996 13.703l-1.836 2.97 2.007-.001.801-1.402-.972-1.567Zm4.5-2.703-2.43 4.462.644 1.038H16.5L13.495 11Zm-9.902 1.593c.328 0 .594.266.594.594v.989a.593.593 0 0 1-1.187 0v-.99c0-.327.266-.593.593-.593Zm16.814-.395c.327 0 .593.265.593.593v.99a.593.593 0 0 1-1.187 0v-.99c0-.328.266-.593.594-.593ZM3.593 9.528c.328 0 .594.265.594.593v.989a.593.593 0 0 1-1.187 0v-.99c0-.327.266-.593.593-.593Zm16.814-.396c.327 0 .593.266.593.593v.99a.593.593 0 0 1-1.187 0v-.99c0-.327.266-.593.594-.593ZM8.5 6.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm-4.907-.038c.328 0 .594.265.594.593v.989a.593.593 0 0 1-1.187 0v-.99c0-.327.266-.592.593-.592Zm16.814-.396c.327 0 .593.266.593.593v.99a.593.593 0 0 1-1.187 0v-.99c0-.327.266-.593.594-.593ZM3.593 3.396c.328 0 .594.265.594.593v.989a.593.593 0 0 1-1.187 0v-.989c0-.328.266-.593.593-.593ZM20.407 3c.327 0 .593.266.593.593v.99a.593.593 0 0 1-1.187 0v-.99c0-.327.266-.593.594-.593ZM6.264 3a.593.593 0 0 1 0 1.187h-.99a.593.593 0 0 1 0-1.187h.99ZM9.33 3a.593.593 0 1 1 0 1.187h-.99A.593.593 0 0 1 8.34 3h.99Zm3.066 0a.593.593 0 0 1 0 1.187h-.99a.593.593 0 0 1 0-1.187h.99Zm3.066 0a.593.593 0 0 1 0 1.187h-.99a.593.593 0 0 1 0-1.187h.99Zm3.065 0a.593.593 0 1 1 0 1.187h-.989a.593.593 0 1 1 0-1.187h.99Z" fill="currentColor" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 40 40" id="icon-create-project"><g fill="none" fill-rule="evenodd"><circle fill="#00AD21" cx="20" cy="20" r="20" /><g transform="translate(11.5 11.5)" fill="#FFF"><rect x="7.083" width="2.833" height="17" rx="1.417" /><path d="M17 8.5c0 .782-.634 1.417-1.417 1.417H1.417a1.417 1.417 0 1 1 0-2.834h14.166c.783 0 1.417.635 1.417 1.417Z" /></g></g></symbol><symbol  viewBox="0 0 18 18" id="icon-curve-preview"><g fill="none" fill-rule="evenodd"><path d="M0 0h18v18H0z" /><path d="m8.184 0 9.254 5.294c-2.426 1.629-4.242 3.464-5.444 5.506-1.203 2.042-1.928 4.442-2.178 7.2L.562 12.811c.13-2.531.82-4.862 2.07-6.987C3.88 3.698 5.729 1.756 8.184 0ZM7.99 11.923a21.175 21.175 0 0 0-.907 3.492l1.97 1.106a18.82 18.82 0 0 1 .892-3.542L7.99 11.922v.001Zm-2.86-1.546a24.878 24.878 0 0 0-.938 3.71l.048-.264 1.98 1.11c.24-1.26.553-2.413.94-3.46l-2.03-1.095v-.001Zm-3.594 1.93L3.38 13.34c.224-1.157.53-2.297.917-3.413L2.265 8.83a14.428 14.428 0 0 0-.73 3.478ZM10.52 7.55c-.45.535-.866 1.1-1.241 1.688a13.012 13.012 0 0 0-.952 1.824l1.959 1.058a14.905 14.905 0 0 1 2.07-3.481L10.52 7.55ZM7.587 5.807a14.036 14.036 0 0 0-1.11 1.6A15.08 15.08 0 0 0 5.45 9.51l2.053 1.108c.29-.668.619-1.288.978-1.857.374-.588.786-1.152 1.232-1.69L7.587 5.807Zm-4.143.469c-.32.544-.604 1.11-.85 1.69l2.03 1.097a14.802 14.802 0 0 1 2.16-3.733L4.907 4.214a15.14 15.14 0 0 0-1.463 2.062Zm10.394-1.983a28.402 28.402 0 0 0-2.701 2.556l1.818 1.08c.841-.936 1.773-1.79 2.783-2.55l-1.9-1.086Zm-2.92-1.671c-.987.74-1.9 1.569-2.728 2.476l2.133 1.269c.83-.91 1.72-1.765 2.663-2.562l-2.068-1.183Zm-2.67-1.529a21.045 21.045 0 0 0-2.722 2.422L7.38 4.617a20.04 20.04 0 0 1 2.673-2.49L8.248 1.092Z" fill="#333" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 18 16" id="icon-disconnected-status"><g fill="none" fill-rule="evenodd"><path d="M1 0h16v16H1z" /><g stroke="currentColor" stroke-linecap="round" stroke-linejoin="bevel" stroke-width=".958"><path d="M9.496 5.487 7.016 8a2.869 2.869 0 0 0 0 4.02 2.782 2.782 0 0 0 3.969 0L14.954 8a2.869 2.869 0 0 0 0-4.02 2.78 2.78 0 0 0-1.809-.827" /><path d="M4.855 12.847a2.78 2.78 0 0 1-1.81-.827A2.869 2.869 0 0 1 3.047 8l3.97-4.02a2.782 2.782 0 0 1 3.969 0 2.869 2.869 0 0 1 0 4.02l-2.481 2.513" /></g></g></symbol><symbol  viewBox="0 0 32 32" id="icon-distribute-horizontal"><g fill="none" fill-rule="evenodd"><path d="M28 4v24H4V4z" /><path d="M23.341 25a.558.558 0 0 1-.565-.551V7.551c0-.304.253-.551.565-.551.312 0 .565.247.565.551v16.898a.558.558 0 0 1-.565.551ZM8.66 25a.558.558 0 0 1-.565-.551V7.551c0-.304.253-.551.565-.551.312 0 .565.247.565.551v16.898a.558.558 0 0 1-.565.551Zm9.6-3.938a.57.57 0 0 1-.577.563h-3.364a.57.57 0 0 1-.577-.563V10.938a.57.57 0 0 1 .577-.562h3.364a.57.57 0 0 1 .577.563v10.124Zm-1.053-.467v-9.191h-2.41v9.191h2.41Z" fill="currentColor" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 32 32" id="icon-distribute-vertical"><g fill="none" fill-rule="evenodd"><path d="M4 4h24v24H4z" /><path d="M25 8.659a.558.558 0 0 1-.551.565H7.551A.558.558 0 0 1 7 8.659c0-.312.247-.565.551-.565h16.898c.304 0 .551.253.551.565Zm0 14.682a.558.558 0 0 1-.551.565H7.551A.558.558 0 0 1 7 23.34c0-.312.247-.565.551-.565h16.898c.304 0 .551.253.551.565Zm-3.938-9.6a.57.57 0 0 1 .563.577v3.364a.57.57 0 0 1-.563.577H10.938a.57.57 0 0 1-.562-.577v-3.364a.57.57 0 0 1 .563-.577h10.124Zm-.467 1.053h-9.191v2.41h9.191v-2.41Z" fill="currentColor" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 16 16" id="icon-dot-duration-suffix"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0Zm0 1.3a6.7 6.7 0 1 0 0 13.4A6.7 6.7 0 0 0 8 1.3ZM8 5a3 3 0 1 1 0 6 3 3 0 0 1 0-6Z" fill="#333" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 21 22" id="icon-down"><g fill="none" fill-rule="evenodd"><path d="M.36.902h20.59v20.684H.36z" /><path d="m11.533 15.067 5.173-7.23a.819.819 0 0 0-.666-1.294H5.695a.819.819 0 0 0-.666 1.295l5.173 7.229a.819.819 0 0 0 1.331 0Z" fill="#FFF" /></g></symbol><symbol  viewBox="0 0 16 16" id="icon-dpi-suffix"><path d="M8 0c4.399 0 8 3.601 8 8s-3.601 8-8 8-8-3.601-8-8 3.601-8 8-8Zm1.32 1.5v2.507H6.71V1.51C3.748 2.127 1.5 4.812 1.5 8.005s2.248 5.878 5.21 6.495v-2.526h2.62v2.516a6.423 6.423 0 0 0 2.61-1.203v-1.313h1.29a6.7 6.7 0 0 0 1.12-2.408l.055-.259-2.466.001V6.652h2.453A6.735 6.735 0 0 0 13.2 3.997h-1.27V2.704A6.364 6.364 0 0 0 9.32 1.5Zm2.53 7.768v2.5h-2.5v-2.5h2.5ZM9.277 6.703v2.565H6.713V6.703h2.564ZM11.85 4v2.5h-2.5V4h2.5Z" fill="#333" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 24 24" id="icon-edit-flip-horizontal"><g fill="none" fill-rule="evenodd"><path d="M0 24V0h24v24z" /><g fill-rule="nonzero"><path d="m10.32 5.297-7.743 12.86c-.166.277-.054.623.25.773a.68.68 0 0 0 .302.07h7.742c.348 0 .629-.255.629-.57V5.57c0-.315-.281-.57-.629-.57a.641.641 0 0 0-.552.297Z" /><path d="M10.871 5c.348 0 .629.255.629.57v12.86c0 .315-.281.57-.629.57H3.13a.68.68 0 0 1-.301-.07c-.305-.15-.417-.496-.251-.772l7.742-12.861A.641.641 0 0 1 10.871 5ZM10.5 7 4 18h6.5V7Z" fill="currentColor" /><path d="m13.68 5.297 7.743 12.86c.166.277.054.623-.25.773a.68.68 0 0 1-.302.07H13.13c-.348 0-.629-.255-.629-.57V5.57c0-.315.281-.57.629-.57.23 0 .441.114.552.297Z" fill-opacity=".264" fill="#747A7A" /><path d="M13.129 5c-.348 0-.629.255-.629.57v12.86c0 .315.281.57.629.57h7.742a.68.68 0 0 0 .301-.07c.305-.15.417-.496.251-.772L13.681 5.297A.641.641 0 0 0 13.129 5Zm.371 2L20 18h-6.5V7Z" fill="currentColor" /></g></g></symbol><symbol  viewBox="0 0 24 24" id="icon-edit-flip-vertical"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><g fill-rule="nonzero"><path d="M18.703 10.32 5.843 2.576c-.277-.166-.623-.054-.773.25A.68.68 0 0 0 5 3.13v7.742c0 .348.255.629.57.629h12.86c.315 0 .57-.281.57-.629a.641.641 0 0 0-.297-.552Z" /><path d="M19 10.871c0 .348-.255.629-.57.629H5.57c-.315 0-.57-.281-.57-.629V3.13a.68.68 0 0 1 .07-.301c.15-.305.496-.417.772-.251l12.861 7.742c.183.11.297.322.297.552Zm-2-.371L6 4v6.5h11Z" fill="currentColor" /><path d="m18.703 13.68-12.86 7.743c-.277.166-.623.054-.773-.25A.68.68 0 0 1 5 20.87V13.13c0-.348.255-.629.57-.629h12.86c.315 0 .57.281.57.629 0 .23-.114.441-.297.552Z" fill-opacity=".264" fill="#747A7A" /><path d="M19 13.129c0-.348-.255-.629-.57-.629H5.57c-.315 0-.57.281-.57.629v7.742a.68.68 0 0 0 .07.301c.15.305.496.417.772.251l12.861-7.742a.641.641 0 0 0 .297-.552Zm-2 .371L6 20v-6.5h11Z" fill="currentColor" /></g></g></symbol><symbol  viewBox="0 0 24 24" id="icon-edit-group"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="M19 3.5a1.5 1.5 0 0 1 .5 2.914v11.172a1.5 1.5 0 1 1-1.914 1.915H6.414A1.5 1.5 0 1 1 4.5 17.585V6.415A1.5 1.5 0 1 1 6.415 4.5h11.17A1.5 1.5 0 0 1 19 3.5ZM5 18.25a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm14 0a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5ZM17.586 5.5H6.414c-.15.426-.488.764-.913.914v11.172c.426.15.763.488.914.914h11.17c.15-.426.489-.764.915-.915V6.415a1.504 1.504 0 0 1-.914-.914Zm-5.086 2a1 1 0 0 1 1 1v2h2a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1l-.001-2H8.5a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1h4Zm3 4H12a.5.5 0 0 0-.492.41L11.5 12l-.001.5.001 3h4v-4Zm-3-3h-4v4h1.999l.001-1a1 1 0 0 1 1-1h1v-2ZM5 4.25a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm14 0a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Z" fill="currentColor" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 24 24" id="icon-edit-ungroup"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="M13.5 3a1.5 1.5 0 0 1 .5 2.914V10h4.085a1.5 1.5 0 1 1 1.916 1.914v6.172A1.5 1.5 0 1 1 18.086 20h-6.172A1.5 1.5 0 1 1 10 18.085V14H5.914A1.5 1.5 0 1 1 4 12.086v-6.17A1.5 1.5 0 1 1 5.915 4h6.17A1.5 1.5 0 0 1 13.5 3Zm6.01 15.75a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm-9 0a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5ZM18.086 11h-4.081l-.001 1.087.128.052a1.5 1.5 0 1 1-2.046 1.862L11 14v4.086c.427.15.764.488.915.914h6.17c.15-.426.489-.764.915-.915v-6.17a1.504 1.504 0 0 1-.914-.914ZM4.51 12.75a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm9.75.75a.75.75 0 0 0-.237-.547l-.018-.016a.75.75 0 0 0-1.059 1.059l.017.017a.755.755 0 0 0 .038.038l-.055-.057a.755.755 0 0 0 .564.256.75.75 0 0 0 .75-.75ZM12.086 5H5.914c-.15.426-.488.764-.913.914v6.172c.426.15.763.488.914.914H10l2.088-.007.054-.131c.17-.36.48-.643.858-.777v-6.17A1.504 1.504 0 0 1 12.086 5Zm7.424 4.75a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm-6-6a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm-9 0a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Z" fill="currentColor" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 12 12" id="icon-editor"><g fill="none" fill-rule="evenodd"><path d="M0 0h12v12H0z" /><path d="M11.538 10.593a.462.462 0 0 1 .083.916l-.083.007H.462a.462.462 0 0 1-.083-.915l.083-.008h11.076ZM7.884.631a.462.462 0 0 1 .647 0l1.75 1.72a.462.462 0 0 1 0 .658l-6.35 6.24a.462.462 0 0 1-.323.133H1.846a.462.462 0 0 1-.461-.462V7.217c0-.124.05-.242.137-.329Z" fill="#9DA2A2" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 24 24" id="icon-flip-horizontal"><g fill="none" fill-rule="evenodd"><path d="M0 24V0h24v24z" /><g fill-rule="nonzero"><path d="m10.32 5.297-7.743 12.86c-.166.277-.054.623.25.773a.68.68 0 0 0 .302.07h7.742c.348 0 .629-.255.629-.57V5.57c0-.315-.281-.57-.629-.57a.641.641 0 0 0-.552.297Z" /><path d="M10.871 5c.348 0 .629.255.629.57v12.86c0 .315-.281.57-.629.57H3.13a.68.68 0 0 1-.301-.07c-.305-.15-.417-.496-.251-.772l7.742-12.861A.641.641 0 0 1 10.871 5ZM10.5 7 4 18h6.5V7Z" fill="currentColor" /><path d="m13.68 5.297 7.743 12.86c.166.277.054.623-.25.773a.68.68 0 0 1-.302.07H13.13c-.348 0-.629-.255-.629-.57V5.57c0-.315.281-.57.629-.57.23 0 .441.114.552.297Z" fill-opacity=".264" fill="#747A7A" /><path d="M13.129 5c-.348 0-.629.255-.629.57v12.86c0 .315.281.57.629.57h7.742a.68.68 0 0 0 .301-.07c.305-.15.417-.496.251-.772L13.681 5.297A.641.641 0 0 0 13.129 5Zm.371 2L20 18h-6.5V7Z" fill="currentColor" /></g></g></symbol><symbol  viewBox="0 0 24 24" id="icon-flip-vertical"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><g fill-rule="nonzero"><path d="M18.703 10.32 5.843 2.576c-.277-.166-.623-.054-.773.25A.68.68 0 0 0 5 3.13v7.742c0 .348.255.629.57.629h12.86c.315 0 .57-.281.57-.629a.641.641 0 0 0-.297-.552Z" /><path d="M19 10.871c0 .348-.255.629-.57.629H5.57c-.315 0-.57-.281-.57-.629V3.13a.68.68 0 0 1 .07-.301c.15-.305.496-.417.772-.251l12.861 7.742c.183.11.297.322.297.552Zm-2-.371L6 4v6.5h11Z" fill="currentColor" /><path d="m18.703 13.68-12.86 7.743c-.277.166-.623.054-.773-.25A.68.68 0 0 1 5 20.87V13.13c0-.348.255-.629.57-.629h12.86c.315 0 .57.281.57.629 0 .23-.114.441-.297.552Z" fill-opacity=".264" fill="#747A7A" /><path d="M19 13.129c0-.348-.255-.629-.57-.629H5.57c-.315 0-.57.281-.57.629v7.742a.68.68 0 0 0 .07.301c.15.305.496.417.772.251l12.861-7.742a.641.641 0 0 0 .297-.552Zm-2 .371L6 20v-6.5h11Z" fill="currentColor" /></g></g></symbol><symbol  viewBox="0 0 24 24" id="icon-flip"><g fill="none" fill-rule="evenodd"><path d="M24 0H0v24h24z" /><path d="M11.26 3.565c.163.09.264.262.264.448v15.461c0 .567-.459 1.026-1.024 1.026H3.024a1.025 1.025 0 0 1-.895-1.524l8.435-15.212a.512.512 0 0 1 .696-.2Zm1.507-.006a.557.557 0 0 1 .732.218l8.377 15.212a.992.992 0 0 1 .124.479c0 .57-.486 1.032-1.085 1.032H13.56c-.599 0-1.085-.462-1.085-1.032V4.016c0-.192.112-.368.291-.457ZM10.5 5.992 3.024 19.474H10.5V5.992Z" fill="currentColor" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 24 24" id="icon-group-group"><g fill="none" fill-rule="evenodd"><rect width="24" height="24" rx="2.4" /><g transform="translate(3.5 3.5)"><path d="M2.914 16A1.5 1.5 0 1 1 1 14.086V2.915A1.5 1.5 0 1 1 2.915 1h11.17a1.5 1.5 0 1 1 1.916 1.914v11.172A1.5 1.5 0 1 1 14.086 16ZM14.086 2H2.914c-.15.426-.488.764-.913.914v11.172c.426.15.763.488.914.914h11.17c.15-.426.489-.764.915-.915V2.915A1.504 1.504 0 0 1 14.086 2Z" fill="currentColor" fill-rule="nonzero" /><path d="M9 4a1 1 0 0 1 1 1v2h2a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1l-.001-2H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h4Zm-.5 4a.5.5 0 0 0-.492.41L8 8.5l-.001.5L8 12h4V8H8.5ZM9 5H5v4h1.999L7 8a1 1 0 0 1 1-1h1V5Z" fill="currentColor" fill-rule="nonzero" /><circle fill="#EEE" cx="1.5" cy="1.5" r="1" /><circle fill="#EEE" cx="15.5" cy="1.5" r="1" /><circle fill="#EEE" cx="1.5" cy="15.5" r="1" /><circle fill="#EEE" cx="15.5" cy="15.5" r="1" /></g></g></symbol><symbol  viewBox="0 0 24 24" id="icon-group-ungroup"><g fill="none" fill-rule="evenodd"><rect width="24" height="24" rx="2.4" /><g transform="translate(3 3)"><path d="M2.914 11A1.5 1.5 0 1 1 1 9.086v-6.17A1.5 1.5 0 1 1 2.915 1h6.17a1.5 1.5 0 1 1 1.916 1.914v6.172A1.5 1.5 0 1 1 9.086 11Zm6.172-9H2.914c-.15.426-.488.764-.913.914v6.172c.426.15.763.488.914.914h6.17c.15-.426.489-.764.915-.915v-6.17A1.504 1.504 0 0 1 9.086 2Z" fill="currentColor" fill-rule="nonzero" /><path d="M8.914 17A1.5 1.5 0 1 1 7 15.086V9.994h3.004V7h5.081a1.5 1.5 0 1 1 1.916 1.914v6.172A1.5 1.5 0 1 1 15.086 17Zm6.172-9h-4.081v2.994H8v4.092c.427.15.764.488.915.914h6.17c.15-.426.489-.764.915-.915v-6.17A1.504 1.504 0 0 1 15.086 8Z" fill="currentColor" fill-rule="nonzero" /><circle fill="currentColor" cx="10.51" cy="1.5" r="1" /><circle fill="#EEE" cx="16.51" cy="7.5" r="1" /><circle fill="#EEE" cx="16.51" cy="16.5" r="1" /><circle fill="#EEE" cx="7.51" cy="16.5" r="1" /><circle fill="#EEE" cx="10.51" cy="10.5" r="1" /><circle fill="#EEE" cx="1.51" cy="10.5" r="1" /><circle fill="#EEE" cx="1.51" cy="1.5" r="1" /></g></g></symbol><symbol  viewBox="0 0 24 24" id="icon-group"><path d="M19.714 3H4.286C3.576 3 3 3.576 3 4.286v15.428C3 20.424 3.576 21 4.286 21h15.428c.71 0 1.286-.576 1.286-1.286V4.286C21 3.576 20.424 3 19.714 3Zm0 16.071a.643.643 0 0 1-.642.643H4.949a.643.643 0 0 1-.643-.643V4.95c0-.355.288-.643.643-.643h14.123c.355 0 .642.287.642.643V19.07ZM17.143 9.87H14.14V6.877c0-.71-.576-1.285-1.286-1.285H6.892c-.71 0-1.286.575-1.286 1.285v5.989c0 .71.576 1.286 1.286 1.286h3.003v2.991c0 .71.576 1.286 1.286 1.286h5.962c.71 0 1.286-.576 1.286-1.286v-5.989c0-.71-.576-1.285-1.286-1.285ZM7.55 12.852a.643.643 0 0 1-.643-.643V7.546c0-.355.288-.643.643-.643h4.646c.355 0 .642.288.642.643V9.87h-1.657c-.71 0-1.286.575-1.286 1.285v1.698H7.55Zm5.288-1.672v1.03a.643.643 0 0 1-.642.642h-1v-1.029c0-.355.288-.643.643-.643h1Zm4.29 5.306a.643.643 0 0 1-.643.643h-4.646a.643.643 0 0 1-.643-.643v-2.334h1.658c.71 0 1.286-.576 1.286-1.286V11.18h2.345c.355 0 .642.288.642.643v4.663Z" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 20 20" id="icon-import-image"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" /><path d="M13.213 2v1.2H2.6V17h14.8V7.798h1.2V17.6a.6.6 0 0 1-.503.592L18 18.2H2a.6.6 0 0 1-.592-.503L1.4 17.6v-15a.6.6 0 0 1 .503-.592L2 2h11.213ZM8.38 7.502a.833.833 0 0 1 .203.178l3.771 4.607.954-1.084a.833.833 0 0 1 .066-.067l.073-.059a.833.833 0 0 1 1.163.19l1.711 2.376a.833.833 0 0 1-.676 1.32H4.232a.833.833 0 0 1-.706-1.275l3.707-5.922a.833.833 0 0 1 1.148-.264Zm4.8-1.538a1.364 1.364 0 1 1 0 2.727 1.364 1.364 0 0 1 0-2.727ZM16.5 2.1a.5.5 0 0 1 .5.5l-.001.999L18 3.6a.5.5 0 1 1 0 1l-1.001-.001L17 5.6a.5.5 0 1 1-1 0l-.001-1.001L15 4.6a.5.5 0 1 1 0-1l.999-.001L16 2.6a.5.5 0 0 1 .5-.5Z" fill="#333" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 20 20" id="icon-insert-fonts"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" /><path d="M16.932 2.273c.69 0 1.25.56 1.25 1.25v3.152a.417.417 0 0 1-.714.291 6.553 6.553 0 0 0-.65-.602c-1.11-.833-2.481-1.326-3.945-1.584v10.427l2.097 2.096a.6.6 0 0 1-.328 1.017l-.097.007H5.91a.6.6 0 0 1-.424-1.024l2.097-2.096V4.692c-1.78.226-3.462.733-4.4 1.672l-.653.651a.417.417 0 0 1-.71-.294V3.523c0-.69.559-1.25 1.25-1.25h13.863ZM10 4.545c-.398 0-.807.012-1.218.036v10.874a.6.6 0 0 1-.114.352l-.062.072-1.248 1.249h5.74l-1.25-1.25a.6.6 0 0 1-.168-.329l-.007-.094V4.62A18.165 18.165 0 0 0 10 4.545Z" fill="#333" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 20 20" id="icon-insert-graphics"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" /><path d="M10.23 2.47a.994.994 0 0 1 1.778 0l2.126 4.261 4.744.681a.994.994 0 0 1 .853 1.01l-.01.116a.994.994 0 0 1-.294.574L16 12.418l.809 4.671a.994.994 0 0 1-.697 1.123l-.113.026a.994.994 0 0 1-.629-.097l-4.252-2.212-4.253 2.212a.994.994 0 0 1-1.281-.324l-.06-.1a.994.994 0 0 1-.097-.628l.81-4.671L2.81 9.112a.994.994 0 0 1-.107-1.31l.081-.096a.994.994 0 0 1 .574-.294l4.746-.681Zm.889.845L9.017 7.529a.587.587 0 0 1-.441.319l-4.687.674 3.387 3.267c.117.112.18.267.18.426l-.01.096-.8 4.622 4.202-2.187a.587.587 0 0 1 .454-.036l.088.036 4.202 2.187-.801-4.622a.587.587 0 0 1 .107-.45l.063-.072 3.389-3.267-4.688-.674a.587.587 0 0 1-.392-.238l-.05-.081-2.101-4.214Zm-5.94.566a5.2 5.2 0 0 1 2.768.793.619.619 0 1 1-.657 1.048 3.963 3.963 0 0 0-2.112-.603C3 5.119 1.238 6.859 1.238 9c0 2.142 1.762 3.881 3.94 3.881a.619.619 0 1 1 0 1.238C2.32 14.119 0 11.829 0 9c0-2.829 2.32-5.119 5.178-5.119Z" fill="#333" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 32 32" id="icon-layer-delete"><g fill="none" fill-rule="evenodd"><circle fill="#FF3B30" cx="16" cy="16" r="16" /><path d="M5.714 5.714h20.571v20.571H5.715z" /><path d="m12.786 10.39.998-1.958a.269.269 0 0 1 .239-.146h3.954c.101 0 .194.056.24.146l.997 1.958h2.946c.149 0 .269.118.269.264v1.577c0 .146-.12.264-.269.264H9.84a.266.266 0 0 1-.269-.264v-1.577c0-.146.12-.264.269-.264h2.946Zm-1.875 2.805H21.09c.148 0 .268.107.268.24v9.323c0 .529-.479.956-1.072.956h-8.568c-.593 0-1.072-.427-1.072-.956v-9.324c-.002-.132.118-.24.266-.24Zm2.945 2.98v4.208c0 .29.24.525.535.525a.53.53 0 0 0 .534-.525v-4.207a.53.53 0 0 0-.534-.526.531.531 0 0 0-.535.526Zm3.215 0v4.208c0 .29.24.525.534.525a.53.53 0 0 0 .535-.525v-4.207a.53.53 0 0 0-.535-.526.53.53 0 0 0-.534.526Z" fill="#FFF" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 32 32" id="icon-layer-edit"><g fill="none" fill-rule="evenodd"><circle fill="#0A7AFF" cx="16" cy="16" r="16" /><path d="M5.714 5.714h20.571v20.571H5.715z" /><path d="M6.633 6.633h18.735v18.735H6.633z" /><g stroke="currentColor" stroke-linejoin="round"><path d="M23.026 16.78v5.465a.78.78 0 0 1-.781.78H9.755a.78.78 0 0 1-.78-.78V9.755c0-.431.349-.78.78-.78h5.464" stroke-width=".937" stroke-linecap="round" /><path stroke-width=".781" fill="#FFF" fill-rule="nonzero" d="M12.097 17.062v2.841h2.856l8.073-8.076-2.852-2.853z" /></g></g></symbol><symbol  viewBox="0 0 21 22" id="icon-left"><g fill="none" fill-rule="evenodd"><path d="M.36.86h20.59v20.59H.36z" /><path d="m7.087 11.845 7.19 5.169a.819.819 0 0 0 1.297-.665V6.012a.819.819 0 0 0-1.297-.664l-7.19 5.168a.819.819 0 0 0 0 1.33Z" fill="#FFF" /></g></symbol><symbol  viewBox="0 0 16 16" id="icon-lines-per-cm-suffix"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0Zm0 1.2a6.8 6.8 0 1 0 0 13.6A6.8 6.8 0 0 0 8 1.2ZM8 3a5 5 0 1 1 0 10A5 5 0 0 1 8 3Zm0 1.2a3.8 3.8 0 1 0 0 7.6 3.8 3.8 0 0 0 0-7.6ZM8 6a2 2 0 1 1 0 4 2 2 0 0 1 0-4Z" fill="#333" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 18 18" id="icon-lock"><g fill="none" fill-rule="evenodd"><path d="M0 0h18v18H0z" /><path d="M9.25 2c1.933 0 3.5 1.607 3.5 3.59v2.512h1.032c.397 0 .718.322.718.719v6.461a.718.718 0 0 1-.718.718H4.718A.718.718 0 0 1 4 15.282V8.821c0-.397.321-.718.718-.718l1.032-.001V5.59C5.75 3.607 7.317 2 9.25 2Zm0 1.436c-1.133 0-2.057.92-2.099 2.073l-.001.08-.001 2.513h4.2l.001-2.512c0-1.19-.94-2.154-2.1-2.154Z" fill="#333" /></g></symbol><symbol  viewBox="0 0 20 20" id="icon-min-process"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" /><g transform="translate(2.5)"><path d="M7.685 16.815 11.5 13h-8l3.815 3.815a.261.261 0 0 0 .37 0Z" fill="#333" /><path d="M11 0h2.5A1.5 1.5 0 0 1 15 1.5v12a1.5 1.5 0 0 1-1.5 1.5H11V0Z" fill="#E3E4E4" /><path d="M1.5 0h9.088v14.783H1.046A1.046 1.046 0 0 1 0 13.737V1.5A1.5 1.5 0 0 1 1.5 0Z" fill="#F1F1F1" /><path fill="#333" d="M10 0h1v15h-1z" /><rect stroke="currentColor" stroke-width=".87" x=".435" y=".435" width="14.13" height="14.13" rx="1" /><rect fill="#333" x="2.5" y="19" width="10" height="1" rx=".5" /></g></g></symbol><symbol  viewBox="0 0 32 32" id="icon-minimize-cancel"><g fill="none" fill-rule="evenodd"><path d="M0 0h32v32H0z" /><g fill-rule="nonzero" fill="#FF2300"><path d="M20.403 12.009a.204.204 0 0 0-.203-.204l-1.676.008L16 14.822l-2.521-3.006-1.679-.008a.202.202 0 0 0-.203.203c0 .048.018.094.049.132l3.303 3.936-3.303 3.933a.204.204 0 0 0 .155.335l1.678-.008L16 17.33l2.521 3.007 1.676.007a.202.202 0 0 0 .203-.203.211.211 0 0 0-.048-.132l-3.298-3.933 3.303-3.935a.204.204 0 0 0 .046-.132Z" /><path d="M16 4.65c-6.282 0-11.375 5.094-11.375 11.375C4.625 22.307 9.718 27.4 16 27.4s11.375-5.093 11.375-11.375C27.375 9.744 22.282 4.65 16 4.65Zm0 20.82c-5.215 0-9.445-4.23-9.445-9.445S10.785 6.58 16 6.58s9.445 4.23 9.445 9.445c0 5.216-4.23 9.446-9.445 9.446Z" /></g></g></symbol><symbol  viewBox="0 0 32 32" id="icon-minimize-finish"><g fill="none" fill-rule="evenodd"><path d="M0 0h32v32H0z" /><g fill-rule="nonzero" fill="#00C800"><path d="M20.748 11.963h-1.19a.809.809 0 0 0-.658.338l-3.992 5.535-1.808-2.509a.812.812 0 0 0-.657-.338h-1.191a.204.204 0 0 0-.165.323l3.164 4.387c.322.45.99.45 1.312 0l5.348-7.414a.202.202 0 0 0-.163-.322Z" /><path d="M16 4.625C9.718 4.625 4.625 9.718 4.625 16S9.718 27.375 16 27.375 27.375 22.282 27.375 16 22.282 4.625 16 4.625Zm0 20.82c-5.215 0-9.445-4.23-9.445-9.445S10.785 6.555 16 6.555s9.445 4.23 9.445 9.445-4.23 9.445-9.445 9.445Z" /></g></g></symbol><symbol  viewBox="0 0 32 32" id="icon-minimize-pause"><g fill="none" fill-rule="evenodd"><path d="M0 0h32v32H0z" /><path d="M16 4.625C9.718 4.625 4.625 9.718 4.625 16S9.718 27.375 16 27.375 27.375 22.282 27.375 16 22.282 4.625 16 4.625Zm0 20.82c-5.215 0-9.445-4.23-9.445-9.445S10.785 6.555 16 6.555s9.445 4.23 9.445 9.445-4.23 9.445-9.445 9.445Zm-2.234-13.508h-1.22a.204.204 0 0 0-.202.204v7.718c0 .112.091.203.203.203h1.219a.204.204 0 0 0 .203-.203v-7.718a.204.204 0 0 0-.203-.204Zm5.687 0h-1.219a.204.204 0 0 0-.203.204v7.718c0 .112.092.203.203.203h1.22a.204.204 0 0 0 .202-.203v-7.718a.204.204 0 0 0-.203-.204Z" fill="#747A7A" fill-rule="nonzero" /></g></symbol><symbol   viewBox="0 0 32 32" id="icon-minimize-processing"><defs><path id="icon-minimize-processing_a" d="M0 0h32v32H0z" /></defs><g fill="none" fill-rule="evenodd"><mask id="icon-minimize-processing_b" fill="#fff"><use xlink:href="#icon-minimize-processing_a" /></mask><g mask="url(#icon-minimize-processing_b)"><g transform="translate(6 1)"><path fill="#28BE44" d="m10 21 4-4H6z" /><rect stroke="currentColor" stroke-width="1.5" fill="#FFF" x=".75" y=".75" width="16.5" height="16.5" rx="1" /><path fill="#28BE44" d="M12 0h1.5v18H12z" /><rect fill="#28BE44" y="28.5" width="21" height="1.5" rx=".75" /><path d="m13.392 26.18.027-.019 1.322-.834c.226-.142.51-.083.633.131.12.206.049.48-.156.628l-.027.018-1.322.834c-.226.142-.509.083-.633-.131-.12-.206-.049-.48.156-.627Zm-3.39-5.982a.49.49 0 0 1 .48.445l.002.036.084 6.244 1.413-2.244a.472.472 0 0 1 .657-.14.483.483 0 0 1 .17.633l-.016.028-1.25 1.983.431-.245a.483.483 0 0 1 .654.182.472.472 0 0 1-.141.633l-.028.017-2.116 1.204-.038.018-.06.02-.035.009-.029.004-.036.004h-.038l-.06-.006-.04-.008-.03-.008-.033-.012-.044-.02-2.526-1.268a.485.485 0 0 1-.223-.641.469.469 0 0 1 .607-.224l.03.014 1.062.533-1.608-2.638a.471.471 0 0 1 .156-.653.482.482 0 0 1 .638.142l.018.028 1.56 2.558-.083-6.156a.465.465 0 0 1 .471-.472Zm-4.37 5.457.03.017 1.087.65c.236.141.326.44.2.668a.464.464 0 0 1-.627.173l-.03-.017-1.087-.65c-.236-.141-.325-.44-.2-.668a.464.464 0 0 1 .627-.173Z" fill="#28BE44" fill-rule="nonzero" /></g></g></g></symbol><symbol   viewBox="0 0 60 60" id="icon-minimizebg"><defs><linearGradient x1="17.682%" y1="31.55%" x2="79.07%" y2="68.21%" id="icon-minimizebg_b"><stop stop-color="#B6FAC5" stop-opacity=".151" offset="0%" /><stop stop-color="#F2FBF4" stop-opacity=".399" offset="100%" /></linearGradient><path id="icon-minimizebg_a" d="M0 0h60v60H0z" /></defs><g fill="none" fill-rule="evenodd"><mask id="icon-minimizebg_c" fill="#fff"><use xlink:href="#icon-minimizebg_a" /></mask><use fill="#FFF" xlink:href="#icon-minimizebg_a" /><path fill="url(#icon-minimizebg_b)" mask="url(#icon-minimizebg_c)" d="M-19.984 0h41.142L81 60H40.016z" /></g></symbol><symbol  viewBox="0 0 24 24" id="icon-move"><g fill-rule="nonzero" fill="none"><path d="M0 0h24v24H0z" /><path d="M2 2h20v20H2z" /><g fill="currentColor"><path d="M3.6 7.794 7.07 5.06c.177-.14.443-.018.443.206v1.89L20.3 7.154a.2.2 0 0 1 .2.2v1.29a.2.2 0 0 1-.2.2H7.515v1.89c0 .223-.265.347-.442.207l-3.47-2.737a.259.259 0 0 1-.003-.41ZM20.4 15.794l-3.47-2.734c-.177-.14-.443-.018-.443.206v1.89L3.7 15.154a.2.2 0 0 0-.2.2v1.29c0 .11.09.2.2.2h12.785v1.89c0 .223.265.347.442.207l3.47-2.737a.259.259 0 0 0 .003-.41Z" /></g></g></symbol><symbol  viewBox="0 0 40 40" id="icon-my-project"><g fill="none" fill-rule="evenodd"><circle fill="#0D6BFC" cx="20" cy="20" r="20" /><g stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M12.46 29h15.08c.53 0 .96-.442.96-.987V15.937h-4.797V11H12.459c-.53 0-.959.442-.959.987v16.026c0 .545.43.987.96.987Z" stroke-width=".973" fill="#FFF" fill-rule="nonzero" /><path stroke-width=".915" d="m23.836 11 4.516 4.723" /></g><g fill="#0D6BFC"><path d="m19.445 18.701-1.475-1.464h-2.22l2.585 2.567zM23.885 17.599l.365-.362h-2.22l-6.28 6.237h2.22L20 21.458l2.03 2.016h2.22l-3.14-3.119z" /></g></g></symbol><symbol  viewBox="0 0 16 16" id="icon-on-group"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v16H0z" /><path d="M12.687 2.225a1.114 1.114 0 0 1 .38 2.161v7.55a1.115 1.115 0 1 1-1.488 1.171H4.406a1.114 1.114 0 1 1-1.244-1.23V4.446a1.114 1.114 0 1 1 1.242-1.242h7.176a1.114 1.114 0 0 1 1.107-.978Zm-.98 1.645h-7.43a1.12 1.12 0 0 1-.448.449v7.685c.185.1.339.252.442.436h7.443c.145-.26.391-.455.685-.533V4.416a1.117 1.117 0 0 1-.692-.546ZM8.733 5.1c.342 0 .62.277.62.619l-.001 1.215h1.235c.342 0 .619.277.619.619v3.092a.619.619 0 0 1-.62.619h-3.09a.619.619 0 0 1-.62-.62V9.41H5.66a.619.619 0 0 1-.619-.619V5.72c0-.342.277-.619.62-.619h3.071Zm1.806 2.5H9.357v1.041l-.005.07v.08a.619.619 0 0 1-.619.62L7.542 9.41v1.186h2.997V7.6ZM8.685 5.766H5.708v2.977h1.168V8.74h1.715a.1.1 0 0 0 .096-.075l-.002-2.9Z" fill="#333" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 40 40" id="icon-photo-album"><g fill="none" fill-rule="evenodd"><circle fill="#FF602E" cx="20" cy="20" r="20" /><path d="M28.3 11.5a1.7 1.7 0 0 1 1.7 1.7v13.6a1.7 1.7 0 0 1-1.7 1.7H11.7a1.7 1.7 0 0 1-1.7-1.7V13.2a1.7 1.7 0 0 1 1.7-1.7h16.6Zm-6.13 6.855a.397.397 0 0 0-.555.085l-3.627 4.935-1.21-1.727a.397.397 0 0 0-.65 0l-2.574 3.677a.397.397 0 0 0 .325.625H26.99a.397.397 0 0 0 .32-.633l-5.054-6.877a.397.397 0 0 0-.085-.085ZM15.218 14.9c-.96 0-1.739.761-1.739 1.7s.779 1.7 1.74 1.7c.96 0 1.739-.761 1.739-1.7s-.78-1.7-1.74-1.7Z" fill="#FFF" /></g></symbol><symbol  viewBox="0 0 16 16" id="icon-photo-mode-suffix"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v16H0z" /><path d="M13.436 1c.892 0 1.215.093 1.54.267.327.174.583.43.757.756.174.326.267.65.267 1.54v8.873c0 .892-.093 1.215-.267 1.54-.174.327-.43.583-.756.757-.326.174-.65.267-1.54.267H2.563c-.892 0-1.215-.093-1.54-.267a1.817 1.817 0 0 1-.757-.756c-.16-.301-.252-.6-.265-1.345L0 3.564c0-.892.093-1.215.267-1.54.174-.327.43-.583.756-.757.301-.16.6-.252 1.345-.265L13.436 1Zm-2.498 8.571c-1.073 0-1.953.315-3.286 1.076l-1.175.69-.116.065a8.866 8.866 0 0 1-1.062.52c-.536.213-1.043.325-1.555.325-.971 0-1.792-.176-2.444-.536v.882l.008.278c.014.272.046.382.105.493.054.1.124.17.223.223l.088.04c.125.047.293.068.683.072l11.03.001c.616 0 .77-.03.927-.113.1-.054.17-.124.223-.223l.04-.088c.047-.125.068-.293.072-.683v-1.861a.752.752 0 0 1-.13-.122c-.562-.666-1.76-1.039-3.631-1.039Zm2.655-7.27H2.407l-.278.007c-.272.014-.382.046-.493.105a.518.518 0 0 0-.223.223l-.04.088c-.047.125-.068.293-.072.683v6.266c.039.04.073.083.103.132.372.616 1.117.942 2.34.942.305 0 .63-.072 1-.22l.262-.107a3.6 3.6 0 0 0 .12-.055l.111-.056c.239-.124.587-.328 1.382-.796 1.701-1.002 2.838-1.442 4.319-1.442 1.581 0 2.84.242 3.763.752l-.001-5.26c0-.616-.03-.77-.113-.927a.518.518 0 0 0-.223-.223l-.088-.04c-.125-.047-.293-.068-.683-.072ZM5 4a2 2 0 1 1 0 4 2 2 0 0 1 0-4Z" fill="#333" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 40 40" id="icon-photo"><g fill="none" fill-rule="evenodd"><circle fill="#902AFB" cx="20" cy="20" r="20" /><g transform="translate(11 12)" fill-rule="nonzero" stroke-linejoin="round"><path stroke="currentColor" stroke-width=".808" fill="#FFF" d="M4.95 2.667 6.3 0h5.4l1.35 2.667z" /><rect stroke="#FFF" stroke-width=".808" fill="#FFF" y="2.667" width="18" height="13.333" rx="1.347" /><path d="M9 12.889c1.988 0 3.6-1.592 3.6-3.556 0-1.963-1.612-3.555-3.6-3.555S5.4 7.37 5.4 9.333c0 1.964 1.612 3.556 3.6 3.556Z" stroke="#902AFB" stroke-width=".898" fill="#902AFB" /></g></g></symbol><symbol  viewBox="0 0 24 24" id="icon-position"><path d="m20.914 11.82-2.972-2.41a.232.232 0 0 0-.38.182v1.665h-4.818V6.44h1.665a.233.233 0 0 0 .181-.378l-2.408-2.975a.233.233 0 0 0-.362 0L9.41 6.059a.232.232 0 0 0 .181.379h1.666v4.817H6.439V9.59a.234.234 0 0 0-.38-.181l-2.973 2.41a.233.233 0 0 0 0 .362l2.972 2.41c.152.124.381.016.381-.181v-1.665h4.818v4.817H9.59a.233.233 0 0 0-.181.38l2.41 2.972a.233.233 0 0 0 .362 0l2.408-2.971a.233.233 0 0 0-.181-.379h-1.665v-4.82h4.817v1.666c0 .195.227.305.379.181l2.973-2.41a.232.232 0 0 0 .001-.362Z" fill="currentColor" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 16 16" id="icon-power-suffix"><path d="M13.653 2.338A7.936 7.936 0 0 1 16 8.005a7.948 7.948 0 0 1-2.347 5.657A7.967 7.967 0 0 1 8 16a7.979 7.979 0 0 1-5.653-2.348A7.93 7.93 0 0 1 0 7.995a7.965 7.965 0 0 1 2.336-5.657c3.125-3.117 8.203-3.117 11.317 0Zm-10.282.669-.188.18-.206.216A6.767 6.767 0 0 0 1.2 7.995c0 1.82.708 3.53 1.996 4.809A6.778 6.778 0 0 0 8 14.8a6.766 6.766 0 0 0 4.805-1.986A6.748 6.748 0 0 0 14.8 8.005c0-1.83-.707-3.54-1.995-4.82C10.22.6 6.04.54 3.37 3.008ZM9.156 3c.031 0 .052.01.062.03.02.021.03.052.03.083l-.412 3.803H10.9c.038 0 .073.019.093.051.01.03.01.072-.01.103l-4.139 5.889c-.02.02-.052.041-.083.041H6.69a.117.117 0 0 1-.082-.03c-.021-.021-.021-.052-.021-.083l.547-3.875H5.1a.108.108 0 0 1-.093-.051.121.121 0 0 1 .01-.103L8.96 3.041c.02-.02.052-.041.082-.041Z" fill="#333" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 18 18" id="icon-project-copy"><g fill="none" fill-rule="evenodd"><path d="M0 0h18v18H0z" /><path d="M12.316 5c.378 0 .684.306.684.684v8.632a.684.684 0 0 1-.684.684H3.684A.684.684 0 0 1 3 14.316V5.684C3 5.306 3.306 5 3.684 5h8.632Zm1.434-2c.628 0 1.147.463 1.238 1.117L15 4.25v8.408a.342.342 0 0 1-.342.342h-.566a.342.342 0 0 1-.342-.342V4.25H5.342A.342.342 0 0 1 5 3.908v-.566C5 3.153 5.153 3 5.342 3h8.408ZM8 7.5a.575.575 0 0 0-.575.575V9.4H6.1a.6.6 0 0 0-.592.503L5.5 10a.6.6 0 0 0 .6.6h1.325v1.325c0 .286.209.523.482.567L8 12.5a.575.575 0 0 0 .575-.575L8.574 10.6H9.9a.6.6 0 0 0 .592-.503L10.5 10a.6.6 0 0 0-.6-.6H8.574V8.075a.575.575 0 0 0-.48-.567L8 7.5Z" fill="#fff" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 18 18" id="icon-project-delete"><g fill="none" fill-rule="evenodd"><path d="M0 0h18v18H0z" /><path d="m6.084 3.91.905-1.778A.244.244 0 0 1 7.206 2h3.588c.092 0 .176.052.217.132l.905 1.778h2.674a.24.24 0 0 1 .243.239V5.58a.24.24 0 0 1-.243.24H3.41a.24.24 0 0 1-.243-.24V4.15a.24.24 0 0 1 .243-.24h2.674ZM4.383 6.454h9.234c.135 0 .244.097.244.218v8.46c0 .48-.435.868-.972.868H5.113c-.537 0-.972-.388-.972-.868v-8.46c-.002-.12.107-.218.242-.218ZM7.054 9.16v3.818c0 .263.218.477.486.477a.481.481 0 0 0 .485-.477V9.16a.481.481 0 0 0-.485-.476.482.482 0 0 0-.486.476Zm2.917 0v3.818c0 .263.218.477.486.477a.481.481 0 0 0 .485-.477V9.16a.481.481 0 0 0-.485-.476.481.481 0 0 0-.486.476Z" fill="#fff" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 20 20" id="icon-project-rename"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" /><path d="M9.177 2a.593.593 0 0 1 .096 1.177l-.096.008H3.416a.23.23 0 0 0-.223.17l-.008.06v13.17a.23.23 0 0 0 .17.222l.06.008h13.17a.23.23 0 0 0 .222-.17l.008-.06v-5.762a.593.593 0 0 1 1.177-.096l.008.096v5.761c0 .736-.561 1.34-1.28 1.41l-.136.006H3.416c-.736 0-1.34-.561-1.41-1.28L2 16.585V3.416c0-.736.561-1.34 1.28-1.41L3.415 2h5.761Zm5.692 0L18 5.132 9.136 14H6v-3.12L14.87 2Z" fill="#fff" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 20 20" id="icon-project-share"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" /><path d="M14.5 1.5a2.5 2.5 0 1 1-1.921 4.1l-4.97 3.058C7.858 9.046 8 9.506 8 10c0 .467-.128.904-.35 1.278l5.023 3.015a2.5 2.5 0 1 1-.586 1.05l-5.31-3.19A2.53 2.53 0 0 1 5.5 12.5a2.5 2.5 0 1 1 1.208-4.69l.063-.045 5.282-3.251A2.5 2.5 0 0 1 14.5 1.5Z" fill="#fff" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 18 18" id="icon-quick-copy"><g fill="none" fill-rule="evenodd"><path d="M0 0h18v18H0z" /><path d="M12.316 5c.343 0 .628.253.677.583l.007.101v8.632a.684.684 0 0 1-.583.677l-.101.007H3.684a.684.684 0 0 1-.677-.583L3 14.316V5.684c0-.343.253-.628.583-.677L3.684 5h8.632Zm1.434-2c.628 0 1.147.463 1.238 1.117L15 4.25v8.408a.342.342 0 0 1-.342.342h-.566a.342.342 0 0 1-.342-.342V4.25H5.342A.342.342 0 0 1 5 3.908v-.566C5 3.153 5.153 3 5.342 3h8.408ZM8 7.5a.575.575 0 0 0-.567.482l-.008.093V9.4H6.1a.6.6 0 0 0-.592.503L5.5 10a.6.6 0 0 0 .503.592l.097.008h1.325v1.325c0 .286.209.523.482.567L8 12.5a.575.575 0 0 0 .567-.482l.008-.093-.001-1.325H9.9a.6.6 0 0 0 .592-.503L10.5 10a.6.6 0 0 0-.503-.592L9.9 9.4H8.574V8.075a.575.575 0 0 0-.48-.567L8 7.5Z" fill="#9DA2A2" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 16 16" id="icon-red-cross-pos"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v16H0z" /><g fill-rule="nonzero"><path d="M13.5 2h-3.239c-.07 0-.137.03-.186.081a.277.277 0 0 0-.075.194v.558a.277.277 0 0 0 .075.194c.05.052.116.08.186.08h2.299a.285.285 0 0 1 .208.084.307.307 0 0 1 .09.21v2.324a.28.28 0 0 0 .078.194.26.26 0 0 0 .187.081h.612a.26.26 0 0 0 .187-.08.28.28 0 0 0 .078-.195v-3.24A.493.493 0 0 0 13.5 2ZM2.262 6h.617a.257.257 0 0 0 .187-.078c.05-.051.078-.12.078-.193V3.406a.307.307 0 0 1 .09-.212.286.286 0 0 1 .209-.082h2.295c.07 0 .136-.03.185-.08.05-.05.077-.12.077-.192v-.569a.266.266 0 0 0-.262-.27h-3.24a.473.473 0 0 0-.346.135.508.508 0 0 0-.152.348V5.73c0 .15.117.271.262.271Zm11.473 4h-.612a.26.26 0 0 0-.187.08.28.28 0 0 0-.078.195v2.323a.307.307 0 0 1-.09.211.285.285 0 0 1-.208.083H10.26c-.07 0-.137.03-.186.081a.277.277 0 0 0-.075.194v.558a.277.277 0 0 0 .075.194c.05.052.116.08.186.08H13.5a.493.493 0 0 0 .5-.483v-3.241a.28.28 0 0 0-.078-.194.26.26 0 0 0-.187-.081Zm-8 2.892H3.442a.286.286 0 0 1-.209-.083.307.307 0 0 1-.09-.21v-2.324a.28.28 0 0 0-.078-.194.26.26 0 0 0-.187-.081h-.613a.26.26 0 0 0-.187.08.28.28 0 0 0-.078.195v3.24a.508.508 0 0 0 .152.35c.093.09.217.139.345.135h3.238a.26.26 0 0 0 .187-.08.28.28 0 0 0 .078-.195v-.558a.28.28 0 0 0-.078-.194.26.26 0 0 0-.187-.08Z" fill="#747A7A" /><g fill="#E9224A"><path d="M7.623 6h.754c.031.002.062-.014.085-.045a.21.21 0 0 0 .038-.12V3.17a.218.218 0 0 0-.037-.122c-.023-.032-.054-.05-.086-.048h-.754c-.066 0-.12.075-.123.17v2.664c.003.095.058.168.123.166ZM3.25 7.373v.754c-.002.031.014.062.045.085a.21.21 0 0 0 .12.038H6.08c.046 0 .09-.014.122-.037s.05-.054.048-.086v-.754c0-.066-.075-.12-.17-.123H3.416c-.095.003-.168.058-.166.123ZM9.75 7.373v.754c-.002.031.014.062.045.085a.21.21 0 0 0 .12.038h2.665c.046 0 .09-.014.122-.037s.05-.054.048-.086v-.754c0-.066-.075-.12-.17-.123H9.916c-.095.003-.168.058-.166.123ZM7.623 13h.754c.031.002.062-.014.085-.045a.21.21 0 0 0 .038-.12V10.17a.218.218 0 0 0-.037-.122c-.023-.032-.054-.05-.086-.048h-.754c-.066 0-.12.075-.123.17v2.664c.003.095.058.168.123.166ZM8.004 7a.75.75 0 1 0-.008 1.5.75.75 0 0 0 .008-1.5Z" /></g></g></g></symbol><symbol  viewBox="0 0 28 28" id="icon-redo"><g fill="none" fill-rule="evenodd"><path d="M28 0H0v28h28z" /><path d="M5.25 15.937v-.134c0-3.388 2.296-5.944 5.342-5.944h8.76l-2.166-2.262a.717.717 0 0 1-.006-.976.63.63 0 0 1 .924-.005l3.272 3.416c.13.134.194.312.194.49a.71.71 0 0 1-.189.485l-3.247 3.438a.63.63 0 0 1-.924.001.716.716 0 0 1-.001-.975l2.109-2.233H10.592c-2.3 0-4.035 1.963-4.035 4.565v.134c0 2.512 1.66 4.267 4.035 4.267H20.93c.361 0 .653.308.653.69 0 .381-.292.69-.653.69H10.592c-3.096 0-5.342-2.375-5.342-5.647Z" fill="#333" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 16 16" id="icon-repeat-suffix"><path d="M8 0c4.411 0 8 3.59 8 8s-3.588 8-8 8c-4.411 0-8-3.59-8-8s3.589-8 8-8Zm0 1.2C4.252 1.2 1.2 4.252 1.2 8c0 3.748 3.052 6.8 6.8 6.8A6.81 6.81 0 0 0 14.8 8c0-3.748-3.052-6.8-6.8-6.8Zm3.844 4.027.084.057c.358.271.473.746.282 1.1l-.05.08-3.775 5.28c-.296.413-.918.408-1.286.011l-.065-.079L4.46 8.245c-.29-.387-.232-.907.129-1.162.335-.236.814-.161 1.113.16l.065.079 1.858 2.477 3.14-4.393c.24-.333.705-.404 1.079-.18Z" fill="#333" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 21 22" id="icon-right"><g fill="none" fill-rule="evenodd"><path d="M.36.86h20.59v20.59H.36z" /><path d="m14.462 12.032-7.19 5.169a.819.819 0 0 1-1.297-.665V6.199a.819.819 0 0 1 1.296-.664l7.19 5.168a.819.819 0 0 1 0 1.33Z" fill="#FFF" /></g></symbol><symbol  viewBox="0 0 18 18" id="icon-rotate"><g fill="none" fill-rule="evenodd"><path d="M0 0h18v18H0z" /><path d="M8.251 2c2.792 0 5.253 1.773 6.267 4.39l1.02-.376a.368.368 0 0 1 .478.46L15.14 9.17a.368.368 0 0 1-.548.197l-2.358-1.505a.368.368 0 0 1 .071-.657l.857-.315c-.81-2.041-2.734-3.416-4.91-3.416C5.32 3.474 2.94 5.946 2.94 9s2.38 5.526 5.311 5.526c2.301 0 4.31-1.536 5.03-3.747l.068-.224a.207.207 0 0 1 .25-.144l1.031.262a.173.173 0 0 1 .125.21v.002C13.948 13.88 11.305 16 8.25 16 4.521 16 1.5 12.864 1.5 9s3.02-7 6.751-7Z" fill="currentColor" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 16 16" id="icon-scan-mode-suffix"><path d="M13.3 4.426a6.403 6.403 0 0 1-.775 8.1 6.4 6.4 0 0 1-9.58-8.45l1.143 1.143a4.8 4.8 0 1 0 2.67-1.856L8.2 4.806a3.2 3.2 0 1 1-2.957 1.568L6.87 8.001a.8.8 0 0 0 1.13 0H8a.8.8 0 0 0 0-1.132L2.909 1.777 1.778 2.91l.028.028A8 8 0 1 0 4.299.905l1.202 1.201a6.402 6.402 0 0 1 7.8 2.32Z" fill="#333" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 24 24" id="icon-size"><path d="M20.433 6.985a1.934 1.934 0 0 1 0 2.736L9.72 20.434a1.934 1.934 0 0 1-2.735 0l-3.419-3.42a1.934 1.934 0 0 1 0-2.735L14.28 3.566a1.934 1.934 0 0 1 2.735 0l3.42 3.42Zm-.912.912-3.419-3.419a.645.645 0 0 0-.911 0l-1.14 1.14 1.14 1.14a.645.645 0 0 1 .033.876l-.033.035a.645.645 0 0 1-.912 0l-1.14-1.14-1.595 1.596 2.051 2.051c.239.239.253.621.033.877l-.033.035a.645.645 0 0 1-.911 0l-2.051-2.051-1.596 1.595 1.14 1.14c.238.239.252.62.032.877l-.033.035a.645.645 0 0 1-.911 0l-1.14-1.14-1.596 1.595 1.14 1.14c.239.239.253.621.033.877l-.033.035a.645.645 0 0 1-.912 0l-1.14-1.14-1.139 1.14a.645.645 0 0 0 0 .912l3.42 3.419c.251.251.66.251.911 0L19.522 8.809a.645.645 0 0 0 0-.912Z" fill="currentColor" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 30 30" id="icon-slider-block"><g fill="none" fill-rule="evenodd"><circle stroke="currentColor" stroke-width="2" fill="#FFF" cx="15" cy="15" r="14" /><path d="M23 7v16H7V7z" /><path d="M19.444 9.556v10.888a.778.778 0 1 1-1.555 0V9.556a.778.778 0 1 1 1.555 0Zm-3.888 0v10.888a.778.778 0 0 1-1.556 0V9.556a.778.778 0 1 1 1.556 0Zm-3.89 0v10.888a.778.778 0 0 1-1.555 0V9.556a.778.778 0 0 1 1.556 0Z" fill-opacity=".5" fill="#28BE44" /></g></symbol><symbol  viewBox="0 0 16 16" id="icon-speed-suffix"><path d="M8 0c4.411 0 8 3.59 8 8s-3.588 8-8 8c-4.411 0-8-3.59-8-8s3.589-8 8-8Zm0 1.2C4.252 1.2 1.2 4.252 1.2 8c0 3.748 3.052 6.8 6.8 6.8A6.81 6.81 0 0 0 14.8 8c0-3.748-3.052-6.8-6.8-6.8ZM5 5s3.91 1.641 4.535 2.268a1.603 1.603 0 0 1-2.267 2.267C6.64 8.91 5 5 5 5Z" fill="#333" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 20 20" id="icon-un-connected"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" /><g transform="translate(1.25 1.25)" stroke="currentColor" stroke-linecap="round" stroke-linejoin="bevel"><rect stroke-width=".8" fill-opacity=".08" fill="#747A7A" width="17.5" height="17.5" rx="8.75" /><g stroke-width="1.065"><path d="M9.152 6.674 7.141 8.75a2.403 2.403 0 0 0 0 3.322c.889.918 2.33.918 3.218 0l3.219-3.322a2.403 2.403 0 0 0 0-3.322 2.236 2.236 0 0 0-1.467-.684" /><path d="M5.389 12.756a2.236 2.236 0 0 1-1.467-.684 2.403 2.403 0 0 1 0-3.322l3.219-3.322a2.226 2.226 0 0 1 3.218 0 2.403 2.403 0 0 1 0 3.322l-2.011 2.076" /></g></g></g></symbol><symbol  viewBox="0 0 28 28" id="icon-undo"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M22.75 15.937v-.134c0-3.388-2.296-5.944-5.342-5.944h-8.76l2.166-2.262a.717.717 0 0 0 .006-.976.63.63 0 0 0-.924-.005l-3.272 3.416a.706.706 0 0 0-.194.49c0 .175.063.35.189.485l.002.001v.003l3.245 3.434a.63.63 0 0 0 .924.001.716.716 0 0 0 .001-.975l-2.109-2.233H17.408c2.3 0 4.035 1.963 4.035 4.565v.134c0 2.512-1.66 4.267-4.035 4.267H7.07c-.361 0-.653.308-.653.69 0 .381.292.69.653.69h10.338c3.096 0 5.342-2.375 5.342-5.647Z" fill="#333" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 18 18" id="icon-unlock"><g fill="none" fill-rule="evenodd"><path d="M0 0h18v18H0z" /><path d="M11.883 2C13.604 2 15 3.443 15 5.222v.644c0 .356-.28.645-.623.645a.634.634 0 0 1-.624-.645v-.644l-.001-.072c-.037-1.035-.86-1.861-1.869-1.861-1.033 0-1.87.865-1.87 1.933V7.98l.001.073c0 .024.002.049.004.073h2.762a.72.72 0 0 1 .72.72v6.435a.72.72 0 0 1-.72.72H3.72a.72.72 0 0 1-.72-.72V8.845a.72.72 0 0 1 .72-.72l5.05-.001-.004-.145V5.222C8.766 3.442 10.16 2 11.883 2Z" fill="#333" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 22 21" id="icon-up"><g fill="none" fill-rule="evenodd"><path d="M.524.024h20.952v20.952H.524z" /><path d="m10.536 6.685-5.249 7.303a.838.838 0 0 0 .68 1.327h10.5a.838.838 0 0 0 .68-1.327l-5.25-7.303a.838.838 0 0 0-1.36 0Z" fill="#FFF" /></g></symbol>',t.insertBefore(n,t.lastChild)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}const Wj=$e({__name:"Global",setup(e){const t=Tx(),n=Ax(),r=ln(),i=pa(),l=og(),{t:s}=Un();Ck();const c=()=>["/process","/process-preview"].includes(t.path);at(()=>l.isNotConnectToastVisible,N=>{N&&(kf(s("mobile.toast.connect_device_first")),l.setNotConnectToastVisible(!1))}),at(()=>l.isProcessingOpenFileToastVisible,N=>{N&&(kf(s("mobile.projects.processing_open_file_error")),l.setProcessingOpenFileToastVisible(!1))}),at(()=>r.connected,N=>{N||(console.log(s("device.process.disconnect")),kf({position:"top",message:s("device.process.disconnect")}),c()&&(n.replace("/process-setting"),r.disconnectModalVisible=!0))}),at([()=>i.currentId,()=>r.ext],([N,W])=>{W&&(W.canvasId=N)},{immediate:!0});const h=fa({loader:()=>wt(()=>import("../chunk/xcs-mobile-src-components-device-error-2da038e1.js"),["../chunk/xcs-mobile-src-components-device-error-2da038e1.js","../chunk/index-e902da34.js","../chunk/xcs-vue-family-70642f71.js","../chunk/xcs-canvas-5c2592d6.js","../chunk/index-55948043.js"],import.meta.url)}),p=fa({loader:()=>wt(()=>import("../chunk/xcs-mobile-src-components-disconnect-60d0b66f.js"),["../chunk/xcs-mobile-src-components-disconnect-60d0b66f.js","../chunk/index-e902da34.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-55948043.js","../chunk/xcs-canvas-5c2592d6.js"],import.meta.url)}),g=fa({loader:()=>wt(()=>import("../chunk/lossfontsmodal-9911f530.js"),["../chunk/lossfontsmodal-9911f530.js","../chunk/index-606f09ea.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-55948043.js","../chunk/xcs-canvas-5c2592d6.js"],import.meta.url)}),_=fa({loader:()=>wt(()=>import("../chunk/xcs-mobile-src-components-firmware-80ca11fe.js"),["../chunk/xcs-mobile-src-components-firmware-80ca11fe.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-e902da34.js","../chunk/firmware-update-failed@2x-64908d38.js","../chunk/index-55948043.js","../chunk/xcs-canvas-5c2592d6.js"],import.meta.url)}),b=fa({loader:()=>wt(()=>import("../chunk/xcs-mobile-src-components-firmware-next-06cb3660.js"),["../chunk/xcs-mobile-src-components-firmware-next-06cb3660.js","../chunk/index-55948043.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-e902da34.js","../chunk/firmware-update-failed@2x-64908d38.js","../chunk/xcs-canvas-5c2592d6.js"],import.meta.url)}),x=fa({loader:()=>wt(()=>import("../chunk/errordialog-aaa1eae6.js"),["../chunk/errordialog-aaa1eae6.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-55948043.js","../chunk/xcs-canvas-5c2592d6.js"],import.meta.url)}),k=fa({loader:()=>wt(()=>import("../chunk/minimizeicon-844fd9f4.js"),["../chunk/minimizeicon-844fd9f4.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-55948043.js","../chunk/xcs-canvas-5c2592d6.js"],import.meta.url)}),T=fa({loader:()=>wt(()=>import("../chunk/globaldialog-5d5c5c23.js"),["../chunk/globaldialog-5d5c5c23.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-55948043.js","../chunk/xcs-canvas-5c2592d6.js"],import.meta.url)}),P=fa({loader:()=>wt(()=>import("../chunk/deviceautofocusdialog-f39b9383.js"),["../chunk/deviceautofocusdialog-f39b9383.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-55948043.js","../chunk/xcs-canvas-5c2592d6.js"],import.meta.url)}),A=fa({loader:()=>wt(()=>import("../chunk/updatedialog-e5c6ccc3.js"),["../chunk/updatedialog-e5c6ccc3.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-55948043.js","../chunk/xcs-canvas-5c2592d6.js"],import.meta.url)}),L=fa({loader:()=>wt(()=>import("../chunk/globaltipdialog-fff5853e.js"),["../chunk/globaltipdialog-fff5853e.js","../chunk/index-e902da34.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-55948043.js","../chunk/xcs-canvas-5c2592d6.js"],import.meta.url)}),F=fa({loader:()=>wt(()=>import("../chunk/betatextmessage-026f9539.js"),["../chunk/betatextmessage-026f9539.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-55948043.js","../chunk/xcs-canvas-5c2592d6.js"],import.meta.url)});return(N,W)=>(He(),dn($n,null,[j(be(h)),j(be(b)),j(be(_)),j(be(g)),j(be(p)),j(be(x)),j(be(k)),j(be(T)),j(be(P)),j(be(A)),j(be(L)),j(be(F))],64))}}),qj=$e({__name:"App",setup(e){const t={fieldLabelWidth:"8.5em"};return(n,r)=>{const i=Px("router-view"),l=Q5;return He(),Ct(l,{"theme-vars":t,class:"app-van-config-provider"},{default:Ge(()=>[j(Wj),j(i)]),_:1})}}});const Yj=[{name:"notFound",path:"/:path(.*)+",redirect:{name:"home"}},{name:"home",path:"/",component:()=>wt(()=>import("../chunk/home-a44f776e.js"),["../chunk/home-a44f776e.js","../chunk/index-36e5bf24.js","../chunk/xcs-vue-family-70642f71.js","../chunk/griditem.vue_vue_type_style_index_0_scoped_39934db8_lang-b0c8362c.js","../chunk/xcs-canvas-5c2592d6.js","../chunk/index-55948043.js"],import.meta.url),meta:{title:"首页"}},{name:"privacy",path:"/privacy",component:()=>wt(()=>import("../chunk/privacy-ec4e48cc.js"),["../chunk/privacy-ec4e48cc.js","../chunk/index-e902da34.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-55948043.js","../chunk/xcs-canvas-5c2592d6.js"],import.meta.url),meta:{title:"隐私协议"}},{name:"projects",path:"/projects",component:()=>wt(()=>import("../chunk/xcs-mobile-src-view-user-project-270a6773.js"),["../chunk/xcs-mobile-src-view-user-project-270a6773.js","../chunk/index-6a076302.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-606f09ea.js","../chunk/index-8a9ed5a6.js","../chunk/index-e902da34.js","../chunk/index-ef61d1b8.js","../chunk/index-36e5bf24.js","../chunk/systemback-e5f1562f.js","../chunk/index-55948043.js","../chunk/xcs-canvas-5c2592d6.js"],import.meta.url),meta:{title:"我的项目"}},{name:"editor",path:"/editor",component:()=>wt(()=>import("../chunk/xcs-mobile-src-view-editor-449feeff.js"),["../chunk/xcs-mobile-src-view-editor-449feeff.js","../chunk/index-36e5bf24.js","../chunk/xcs-vue-family-70642f71.js","../chunk/systemback-e5f1562f.js","../chunk/xcs-canvas-5c2592d6.js","../chunk/index-7795d5ed.js","../chunk/index-606f09ea.js","../chunk/datasource-5dbe607a.js","../chunk/index-55948043.js","../chunk/index-8a9ed5a6.js","../chunk/laserposition.vue_vue_type_script_setup_true_lang-86881cde.js","../chunk/constant-2a798a0e.js"],import.meta.url),meta:{title:"图像编辑"}},{name:"processSetting",path:"/process-setting",component:()=>wt(()=>import("../chunk/-packages-xcs-mobile-src-view-setting-index.vue-31df9a51.js"),["../chunk/-packages-xcs-mobile-src-view-setting-index.vue-31df9a51.js","../chunk/index-efc3e601.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-ac8ea00e.js","../chunk/datasource-5dbe607a.js","../chunk/xcs-canvas-5c2592d6.js","../chunk/constant-2a798a0e.js","../chunk/systemback-e5f1562f.js","../chunk/index-606f09ea.js","../chunk/index-e902da34.js","../chunk/index-6a076302.js","../chunk/index-36e5bf24.js","../chunk/index-67d54223.js","../chunk/index-55948043.js"],import.meta.url),meta:{title:"加工设置"}},{name:"processing",path:"/processing",component:()=>wt(()=>import("../chunk/processingnext-73120ba0.js"),["../chunk/processingnext-73120ba0.js","../chunk/systemback-e5f1562f.js","../chunk/xcs-vue-family-70642f71.js","../chunk/datasource-5dbe607a.js","../chunk/xcs-canvas-5c2592d6.js","../chunk/index-36e5bf24.js","../chunk/index-efc3e601.js","../chunk/index-ac8ea00e.js","../chunk/constant-2a798a0e.js","../chunk/spin-afa417d1.js","../chunk/light-87cce264.js","../chunk/fade-in.cssr-8e3c8f09.js","../chunk/use-style-1280d407.js","../chunk/loading-b06a4834.js","../chunk/index-e902da34.js","../chunk/index-55948043.js"],import.meta.url),meta:{title:"加工"}},{name:"connect",path:"/connect",component:()=>wt(()=>import("../chunk/xcs-mobile-src-view-connect-85536647.js"),["../chunk/xcs-mobile-src-view-connect-85536647.js","../chunk/index-36e5bf24.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-67d54223.js","../chunk/connectconfirm.vue_vue_type_script_setup_true_lang-a878591c.js","../chunk/index-ef61d1b8.js","../chunk/xcs-canvas-5c2592d6.js","../chunk/index-e902da34.js","../chunk/index-55948043.js"],import.meta.url),meta:{title:"连接设备"}},{name:"connectIp",path:"/ip-connect",component:()=>wt(()=>import("../chunk/ipconnect-b5b7c01b.js"),["../chunk/ipconnect-b5b7c01b.js","../chunk/index-36e5bf24.js","../chunk/xcs-vue-family-70642f71.js","../chunk/connectconfirm.vue_vue_type_script_setup_true_lang-a878591c.js","../chunk/xcs-canvas-5c2592d6.js","../chunk/index-55948043.js"],import.meta.url),meta:{title:"连接设备"}},{name:"newDevice",path:"/new-device",component:()=>wt(()=>import("../chunk/xcs-mobile-src-view-new-device-c8cfbcbe.js"),["../chunk/xcs-mobile-src-view-new-device-c8cfbcbe.js","../chunk/index-36e5bf24.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-e902da34.js","../chunk/index-7795d5ed.js","../chunk/index-ac8ea00e.js","../chunk/index-55948043.js","../chunk/xcs-canvas-5c2592d6.js"],import.meta.url),meta:{title:"添加新设备"}},{name:"device",path:"/device",component:()=>wt(()=>import("../chunk/xcs-mobile-src-view-device-3bb1b04b.js"),["../chunk/xcs-mobile-src-view-device-3bb1b04b.js","../chunk/index-36e5bf24.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-efc3e601.js","../chunk/index-ac8ea00e.js","../chunk/datasource-5dbe607a.js","../chunk/xcs-canvas-5c2592d6.js","../chunk/constant-2a798a0e.js","../chunk/systemback-e5f1562f.js","../chunk/index-55948043.js"],import.meta.url),meta:{title:"设备详情"}},{name:"general",path:"/general",component:()=>wt(()=>import("../chunk/general-4f556b93.js"),["../chunk/general-4f556b93.js","../chunk/index-36e5bf24.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-55948043.js","../chunk/xcs-canvas-5c2592d6.js"],import.meta.url),meta:{title:"设备详情"}},{name:"about",path:"/about",component:()=>wt(()=>import("../chunk/about-2969f763.js"),["../chunk/about-2969f763.js","../chunk/index-e902da34.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-36e5bf24.js","../chunk/index-55948043.js","../chunk/xcs-canvas-5c2592d6.js"],import.meta.url),meta:{title:"关于软件"}},{name:"checkSteps",path:"/check-steps",component:()=>wt(()=>import("../chunk/checksteps-94eef46e.js"),["../chunk/checksteps-94eef46e.js","../chunk/index-e902da34.js","../chunk/xcs-vue-family-70642f71.js","../chunk/index-36e5bf24.js","../chunk/systemback-e5f1562f.js","../chunk/index-55948043.js","../chunk/xcs-canvas-5c2592d6.js"],import.meta.url),meta:{title:"扩幅配件安装校准"}}],Uo=Lx({routes:Yj,history:Ix()});Uo.beforeEach((e,t,n)=>{var i;const r=(i=e==null?void 0:e.meta)==null?void 0:i.title;r&&(document.title=r),n()});Uo.beforeEach((e,t,n)=>{e.fullPath==="/"?G0().get("PRIVACY_KEY",!1)?n():n({name:"privacy"}):n()});Uo.afterEach(e=>{var n;const t=window.MeApi||((n=window.parent)==null?void 0:n.MeApi);t&&(t.app.pagePathChange(e.fullPath),console.log(e.fullPath),e.fullPath==="/"?t.app.setStatusBar("#1F9736",!1):t.app.setStatusBar("#FFFFFF",!0))});async function Kj(){var p,g;const e=pa(),t=ln(),n=ig(),r=og(),i=Bo(),l=async _=>{if(!t.ext){r.setNotConnectToastVisible(!0);return}if(_!=="")try{const b=e.addCanvas(),{width:x,height:k}=t.ext.config.processingArea.base;b==null||b.resizeViewport({viewportWidth:x,viewportHeight:k}),await e.loadResToCanvas({file:_,offsetX:D1,offsetY:M1}),s()}catch(b){console.log("[ error ] >",b),r.showNotSupportedFileDialog(!0,"mobile.projects.open_xcs_file_error")}},s=()=>{Uo.push({path:"process-setting"})},c=async _=>{console.log("[ filePath ] >",_);const b=kb(_,!0);if(_)try{await r.openProject({file:_,fileName:b}),Uo.push({path:"process-setting",query:{refresh:1,path:_}})}catch(x){console.log("[ error ] >",x),r.showNotSupportedFileDialog(!0,"mobile.projects.open_xcs_file_error")}finally{kk()}};(p=window.MeApi)==null||p.openFile.setOpenFileHandle(async _=>{var T;console.log("setOpenFileHandle",_);const b=kb(_,!0);if(i.currentPage===Rf.FINISH||i.currentPage===Rf.UPLOAD||i.currentPage===Rf.INPROCESSING){r.setProcessingOpenFileToastVisible(!0);return}if(!G0().get("PRIVACY_KEY",!1))return;const k=Uo.currentRoute.value.path;if(k==="/process-setting"||k==="/editor")if(k==="/editor"&&await new Promise(P=>{Uo.back(),setTimeout(()=>{P("ok")},1200)}),(T=Ye.canvas)==null||T.clearSelected(),_.endsWith(".xcs"))await r.openProject({newProject:!1,file:_,openFromFile:!0,fileName:b}).then(()=>{}).catch(P=>{r.showNotSupportedFileDialog(!0,"mobile.projects.open_xcs_file_error"),r.setBackIndexPage(!0),console.log("openProject exception",P)});else{let P;r.openProject({newProject:!0,openFromFile:!0,fileName:b}).then(async()=>{P=eb({overlay:!0,duration:0}),await e.loadResToCanvas({file:_,offsetX:D1,offsetY:M1}),P==null||P.close()}).catch(A=>{r.showNotSupportedFileDialog(!0,"mobile.projects.open_xcs_file_error"),r.setBackIndexPage(!0),console.log("openProject exception",A),P==null||P.close()})}else{const P=eb({overlay:!0,duration:0});_.endsWith(".xcs")?await c(_):await l(_),P.close()}});const h=(g=Da.latest)==null?void 0:g.product;h&&(console.log(["=> open xcs to load last ext",h]),t.loadExt(h)),t.tryAutoConnectDevice(),n.updateLocalMaterial()}var H1={},Zj={get exports(){return H1},set exports(e){H1=e}};(function(e,t){(function(n,r){e.exports=r()})(ri,function(){function n(a){if(!a)return!1;var f=Object.prototype.toString.call(a);return f=="[object Function]"||f=="[object AsyncFunction]"}function r(){return Date.now&&n(Date.now)?Date.now():new Date().getTime()}function i(a){return a!=null&&Object.prototype.toString.call(a)=="[object Object]"}function l(){if(typeof Uint32Array=="function"){var a="";if(typeof crypto<"u"?a=crypto:typeof msCrypto<"u"&&(a=msCrypto),i(a)&&a.getRandomValues){var f=new Uint32Array(1),v=a.getRandomValues(f)[0],w=Math.pow(2,32);return v/w}}return wh(1e19)/1e19}function s(a){var f=null;try{f=JSON.parse(a)}catch{}return f}function c(a,f){this.lockGetPrefix=a||"lock-get-prefix",this.lockSetPrefix=f||"lock-set-prefix"}function h(a){return typeof a=="function"||!(!a||typeof a!="object")&&h(a.listener)}function p(){this._events={}}function g(a){var f=a;try{f=decodeURIComponent(a)}catch{f=a}return f}function _(a){a=a||"";for(var f={},v=a.substring(1),w=v.split("&"),S=0;S<w.length;S++){var C=w[S].indexOf("=");if(C!==-1){var O=w[S].substring(0,C),U=w[S].substring(C+1);O=g(O),U=g(U),f[O]=U}}return f}function b(a){return Object.prototype.toString.call(a)=="[object String]"}function x(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function k(a){var f=function(v){this._fields={Username:4,Password:5,Port:7,Protocol:2,Host:6,Path:8,URL:0,QueryString:9,Fragment:10},this._values={},this._regex=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/,typeof v<"u"&&this._parse(v)};return f.prototype.setUrl=function(v){this._parse(v)},f.prototype._initValues=function(){for(var v in this._fields)this._values[v]=""},f.prototype.addQueryString=function(v){if(typeof v!="object")return!1;var w=this._values.QueryString||"";for(var S in v)w=new RegExp(S+"[^&]+").test(w)?w.replace(new RegExp(S+"[^&]+"),S+"="+v[S]):w.slice(-1)==="&"?w+S+"="+v[S]:w===""?S+"="+v[S]:w+"&"+S+"="+v[S];this._values.QueryString=w},f.prototype.getUrl=function(){var v="";return v+=this._values.Origin,v+=this._values.Port?":"+this._values.Port:"",v+=this._values.Path,v+=this._values.QueryString?"?"+this._values.QueryString:"",v+=this._values.Fragment?"#"+this._values.Fragment:""},f.prototype._parse=function(v){this._initValues();var w=this._regex.exec(v);w||kn.log("URLParser::_parse -> Invalid URL");var S=v.split("#"),C=S[0],O=S.slice(1).join("#");w=this._regex.exec(C);for(var U in this._fields)typeof w[this._fields[U]]<"u"&&(this._values[U]=w[this._fields[U]]);this._values.Hostname=this._values.Host.replace(/:\d+$/,""),this._values.Origin=this._values.Protocol+"://"+this._values.Hostname,this._values.Fragment=O},new f(a)}function T(a){var f={},v=function(){var C;try{return C=new URL("https://www.sensorsdata.cn/"),C.href==="https://www.sensorsdata.cn/"}catch{return!1}};if(typeof window.URL=="function"&&v())f=new URL(a),f.searchParams||(f.searchParams=function(){var C=_(f.search);return{get:function(O){return C[O]}}}());else{b(a)||(a=String(a)),a=x(a);var w=/^https?:\/\/.+/;if(w.test(a)===!1)return void kn.log("Invalid URL");var S=k(a);f.hash=S._values.Fragment,f.host=S._values.Host?S._values.Host+(S._values.Port?":"+S._values.Port:""):"",f.href=S._values.URL,f.password=S._values.Password,f.pathname=S._values.Path,f.port=S._values.Port,f.search=S._values.QueryString?"?"+S._values.QueryString:"",f.username=S._values.Username,f.hostname=S._values.Hostname,f.protocol=S._values.Protocol?S._values.Protocol+":":"",f.origin=S._values.Origin?S._values.Origin+(S._values.Port?":"+S._values.Port:""):"",f.searchParams=function(){var C=_("?"+S._values.QueryString);return{get:function(O){return C[O]}}}()}return f}function P(a){return!(!a||a.nodeType!==1)}function A(a){return a===void 0}function L(a){return Array.isArray&&n(L)?Array.isArray(a):Object.prototype.toString.call(a)==="[object Array]"}function F(a){return new Sh(a)}function N(a,f,v,w){function S(U){return U&&(U.preventDefault=S.preventDefault,U.stopPropagation=S.stopPropagation,U._getPath=S._getPath),U}function C(U,se,ye,Te){var rt=function(et){if(et=et||S(window.event)){et.target=et.srcElement;var Yt,Lt,pn=!0;return typeof ye=="function"&&(Yt=ye(et)),Lt=se.call(U,et),Te!=="beforeunload"?(Yt!==!1&&Lt!==!1||(pn=!1),pn):void 0}};return rt}S._getPath=function(){var U=this;return this.path||this.composedPath&&this.composedPath()||F(U.target).getParents()},S.preventDefault=function(){this.returnValue=!1},S.stopPropagation=function(){this.cancelBubble=!0};var O=function(U,se,ye){if(w===void 0&&se==="click"&&(w=!0),U&&U.addEventListener)U.addEventListener(se,function(et){et._getPath=S._getPath,ye.call(this,et)},w);else{var Te="on"+se,rt=U[Te];U[Te]=C(U,ye,rt,se)}};O.apply(null,arguments)}function W(a){var f="pushState"in window.history?"popstate":"hashchange";N(window,f,a)}function te(a){if(a)return typeof window.XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest?new XMLHttpRequest:typeof XDomainRequest<"u"?new XDomainRequest:null;if(typeof window.XMLHttpRequest<"u")return new XMLHttpRequest;if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(v){kn.log(v)}}}function G(a,f,v){if(a==null)return!1;if(Eh&&a.forEach===Eh)a.forEach(f,v);else if(L(a))for(var w=0,S=a.length;w<S;w++)w in a&&f.call(v,a[w],w,a);else for(var C in a)wm.call(a,C)&&f.call(v,a[C],C,a)}function K(a){return G(Array.prototype.slice.call(arguments,1),function(f){for(var v in f)Sm.call(f,v)&&f[v]!==void 0&&(a[v]=f[v])}),a}function re(a){function f(U){if(!U)return"";try{return JSON.parse(U)}catch{return{}}}function v(){try{w&&typeof w=="object"&&w.abort&&w.abort()}catch(U){kn.log(U)}S&&(clearTimeout(S),S=null,a.error&&a.error(),w.onreadystatechange=null,w.onload=null,w.onerror=null)}a.timeout=a.timeout||2e4,a.credentials=typeof a.credentials>"u"||a.credentials;var w=te(a.cors);if(!w)return!1;a.type||(a.type=a.data?"POST":"GET"),a=K({success:function(){},error:function(){}},a);var S,C=a.success,O=a.error;a.success=function(U){C(U),S&&(clearTimeout(S),S=null)},a.error=function(U){O(U),S&&(clearTimeout(S),S=null)},S=setTimeout(function(){v()},a.timeout),typeof XDomainRequest<"u"&&w instanceof XDomainRequest&&(w.onload=function(){a.success&&a.success(f(w.responseText)),w.onreadystatechange=null,w.onload=null,w.onerror=null},w.onerror=function(){a.error&&a.error(f(w.responseText),w.status),w.onreadystatechange=null,w.onerror=null,w.onload=null}),w.onreadystatechange=function(){try{w.readyState==4&&(w.status>=200&&w.status<300||w.status==304?a.success(f(w.responseText)):a.error(f(w.responseText),w.status),w.onreadystatechange=null,w.onload=null)}catch{w.onreadystatechange=null,w.onload=null}},w.open(a.type,a.url,!0);try{a.credentials&&(w.withCredentials=!0),i(a.header)&&G(a.header,function(U,se){w.setRequestHeader&&w.setRequestHeader(se,U)}),a.data&&(a.cors||w.setRequestHeader&&w.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.contentType==="application/json"?w.setRequestHeader&&w.setRequestHeader("Content-type","application/json; charset=UTF-8"):w.setRequestHeader&&w.setRequestHeader("Content-type","application/x-www-form-urlencoded"))}catch(U){kn.log(U)}w.send(a.data||null)}function H(a,f){var v=[];return a==null?v:Array.prototype.map&&a.map===Array.prototype.map?a.map(f):(G(a,function(w,S,C){v.push(f(w,S,C))}),v)}function J(a){var f=[];try{f=H(atob(a).split(""),function(v){return"%"+("00"+v.charCodeAt(0).toString(16)).slice(-2)})}catch{f=[]}try{return decodeURIComponent(f.join(""))}catch{return f.join("")}}function ie(a){var f="";try{f=btoa(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g,function(v,w){return String.fromCharCode("0x"+w)}))}catch{f=a}return f}function oe(a,f){f=f||window;var v=!1,w=!0,S=f.document,C=S.documentElement,O=S.addEventListener,U=O?"addEventListener":"attachEvent",se=O?"removeEventListener":"detachEvent",ye=O?"":"on",Te=function(et){et.type=="readystatechange"&&S.readyState!="complete"||((et.type=="load"?f:S)[se](ye+et.type,Te,!1),!v&&(v=!0)&&a.call(f,et.type||et))},rt=function(){try{C.doScroll("left")}catch{return void setTimeout(rt,50)}Te("poll")};if(S.readyState=="complete")a.call(f,"lazy");else{if(!O&&C.doScroll){try{w=!f.frameElement}catch(et){kn.log(et)}w&&rt()}S[U](ye+"DOMContentLoaded",Te,!1),S[U](ye+"readystatechange",Te,!1),f[U](ye+"load",Te,!1)}}function le(a){return G(Array.prototype.slice.call(arguments,1),function(f){for(var v in f)f[v]!==void 0&&a[v]===void 0&&(a[v]=f[v])}),a}function $(a){var f=a;try{f=decodeURI(a)}catch{f=a}return f}function Y(a){var f="t6KJCZa5pDdQ9khoEM3Tj70fbP2eLSyc4BrsYugARqFIw1mzlGNVXOHiWvxUn8",v=f.length-1,w={},S=0;for(S=0;S<f.length;S++)w[f.charAt(S)]=f.charAt(v-S);var C="";for(S=0;S<a.length;S++)C+=a.charAt(S)in w?w[a.charAt(S)]:a.charAt(S);return C}function z(a){return Object.prototype.toString.call(a)=="[object Date]"}function V(a){function f(v){return v<10?"0"+v:v}return a.getFullYear()+"-"+f(a.getMonth()+1)+"-"+f(a.getDate())+" "+f(a.getHours())+":"+f(a.getMinutes())+":"+f(a.getSeconds())+"."+f(a.getMilliseconds())}function ue(a){return G(a,function(f,v){z(f)?a[v]=V(f):i(f)&&(a[v]=ue(f))}),a}function xe(a){return G(Array.prototype.slice.call(arguments,1),function(f){for(var v in f)f[v]!==void 0&&(i(f[v])&&i(a[v])?K(a[v],f[v]):a[v]=f[v])}),a}function ce(a,f,v){var w=Object.prototype.hasOwnProperty;if(a.filter)return a.filter(f);for(var S=[],C=0;C<a.length;C++)if(w.call(a,C)){var O=a[C];f.call(v,O,C,a)&&S.push(O)}return S}function Ae(a){try{return JSON.stringify(a,null,"  ")}catch{return JSON.stringify(a)}}function De(a){return typeof a=="string"&&a.match(/^[a-zA-Z0-9\u4e00-\u9fa5\-\.]+$/)?a:""}function ae(a,f){a=a||location.hostname,f=f||"domain_test";var v=De(a),w=v.split(".");if(L(w)&&w.length>=2&&!/^(\d+\.)+\d+$/.test(v)){for(var S="."+w.splice(w.length-1,1);w.length>0;)if(S="."+w.splice(w.length-1,1)+S,document.cookie=f+"=true; path=/; domain="+S,document.cookie.indexOf(f+"=true")!==-1){var C=new Date;return C.setTime(C.getTime()-1e3),document.cookie=f+"=true; expires="+C.toGMTString()+"; path=/; SameSite=Lax; domain="+S,S}}return""}function we(a){function f(C,O){C=x(C);var U;if(C==="body")return document.getElementsByTagName("body")[0];if(C.indexOf("#")===0)C=C.slice(1),U=document.getElementById(C);else if(C.indexOf(":nth-of-type")>-1){var se=C.split(":nth-of-type");if(!se[0]||!se[1])return null;var ye=se[0],Te=se[1].match(/\(([0-9]+)\)/);if(!Te||!Te[1])return null;var rt=Number(Te[1]);if(!(P(O)&&O.children&&O.children.length>0))return null;for(var et=O.children,Yt=0;Yt<et.length;Yt++)if(P(et[Yt])){var Lt=et[Yt].tagName.toLowerCase();if(Lt===ye&&(rt--,rt===0)){U=et[Yt];break}}if(rt>0)return null}return U||null}function v(C){var O,U=w.shift();if(!U)return C;try{O=f(U,C)}catch(se){kn.log(se)}return O&&P(O)?v(O):null}if(!b(a))return null;var w=a.split(">"),S=null;return S=v(),S&&P(S)?S:null}function Q(a,f){var v="",w="";return a.textContent?v=x(a.textContent):a.innerText&&(v=x(a.innerText)),v&&(v=v.replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)),w=v||"",f!=="input"&&f!=="INPUT"||(w=a.value||""),w}function Re(a,f){f&&typeof f=="string"||(f="hostname解析异常");var v=null;try{v=T(a).hostname}catch{kn.log("getHostname传入的url参数不合法！")}return v||f}function Me(){try{var a=navigator.appVersion.match(/OS (\d+)[._](\d+)[._]?(\d+)?/);return a&&a[1]?Number.parseInt(a[1],10):""}catch{return""}}function Ke(a){var f={},v=a.split("?"),w=v[1]||"";return w&&(f=_("?"+w)),f}function it(a,f){var v=T(a),w=v.searchParams.get(f)||"";if(!w){var S=v.hash;if(S){var C=Ke(S);w=C[f]||""}}return w}function ht(){return typeof window.matchMedia<"u"||typeof window.msMatchMedia<"u"}function un(){var a=screen.msOrientation||screen.mozOrientation||(screen.orientation||{}).type,f="未取到值";if(a)f=a.indexOf("landscape")>-1?"landscape":"portrait";else if(ht()){var v=window.matchMedia||window.msMatchMedia;v("(orientation: landscape)").matches?f="landscape":v("(orientation: portrait)").matches&&(f="portrait")}return f}function jr(){var a,f={},v=navigator.userAgent.toLowerCase();return(a=v.match(/ qq\/([\d.]+)/))?f.qqBuildinBrowser=Number(a[1].split(".")[0]):(a=v.match(/mqqbrowser\/([\d.]+)/))?f.qqBrowser=Number(a[1].split(".")[0]):(a=v.match(/opera.([\d.]+)/))?f.opera=Number(a[1].split(".")[0]):(a=v.match(/msie ([\d.]+)/))?f.ie=Number(a[1].split(".")[0]):(a=v.match(/edge.([\d.]+)/))?f.edge=Number(a[1].split(".")[0]):(a=v.match(/firefox\/([\d.]+)/))?f.firefox=Number(a[1].split(".")[0]):(a=v.match(/chrome\/([\d.]+)/))?f.chrome=Number(a[1].split(".")[0]):(a=v.match(/version\/([\d.]+).*safari/))?f.safari=Number(a[1].match(/^\d*.\d*/)):(a=v.match(/trident\/([\d.]+)/))&&(f.ie=11),f}function xt(a){return b(a)?(a=x(a),$(a)):$(location.href)}function vr(a){return b(a)?(a=x(a),$(a)):$(location.pathname)}function Go(a,f){return a.hasAttribute?a.hasAttribute(f):a.attributes?!(!a.attributes[f]||!a.attributes[f].specified):void 0}function Gr(a,f){if(typeof f=="string")return Go(a,f);if(L(f)){for(var v=!1,w=0;w<f.length;w++){var S=Go(a,f[w]);if(S){v=!0;break}}return v}}function Yu(a){if(typeof a!="string")return 0;var f=0,v=null;if(a.length==0)return f;for(var w=0;w<a.length;w++)v=a.charCodeAt(w),f=(f<<5)-f+v,f&=f;return f}function Ku(a){var f=9007199254740992,v=-9007199254740992,w=31,S=0;if(a.length>0)for(var C=a.split(""),O=0;O<C.length;O++){var U=C[O].charCodeAt(),se=w*S+U;if(se>f)for(S=v+S;se=w*S+U,se<v;)S=S/2+U;if(se<v)for(S=f+S;se=w*S+U,se>f;)S=S/2+U;S=w*S+U}return S}function cn(a,f){var v=a.indexOf;if(v)return v.call(a,f);for(var w=0;w<a.length;w++)if(f===a[w])return w;return-1}function Wr(a,f){return a.prototype=new f,a.prototype.constructor=a,a.superclass=f.prototype,a}function Ki(a){return!(!a||!xm.call(a,"callee"))}function Wo(a){return Object.prototype.toString.call(a)=="[object Boolean]"}function In(a){if(i(a)){for(var f in a)if(Object.prototype.hasOwnProperty.call(a,f))return!1;return!0}return!1}function pi(a){if(typeof a!="string")return!1;var f=/^https?:\/\/.+/;return f.test(a)!==!1||(kn.log("Invalid URL"),!1)}function md(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)}function va(a){try{JSON.parse(a)}catch{return!1}return!0}function Qn(a){return Object.prototype.toString.call(a)=="[object Number]"&&/[\d\.]+/.test(String(a))}function Zu(){var a=!1;if(typeof navigator!="object"||typeof navigator.sendBeacon!="function")return a;var f=jr(),v=navigator.userAgent.toLowerCase();if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)){var w=/os [\d._]*/gi,S=v.match(w),C=(S+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,"."),O=C.split(".");typeof f.safari>"u"&&(f.safari=O[0]),O[0]&&(f.qqBuildinBrowser||f.qqBrowser)?a=!1:O[0]&&O[0]<13?(f.chrome>41||f.firefox>30||f.opera>25||f.safari>12)&&(a=!0):(f.chrome>41||f.firefox>30||f.opera>25||f.safari>11.3)&&(a=!0)}else(f.chrome>38||f.edge>13||f.firefox>30||f.opera>25||f.safari>11)&&(a=!0);return a}function Ju(){return typeof window.XMLHttpRequest<"u"&&("withCredentials"in new XMLHttpRequest||typeof XDomainRequest<"u")}function Js(a){if(!i(a)||!b(a.callbackName))return kn.log("JSONP 请求缺少 callbackName"),!1;a.success=n(a.success)?a.success:function(){},a.error=n(a.error)?a.error:function(){},a.data=a.data||"";var f=document.createElement("script"),v=document.getElementsByTagName("head")[0],w=null,S=!1;if(v.appendChild(f),Qn(a.timeout)&&(w=setTimeout(function(){return!S&&(a.error("timeout"),window[a.callbackName]=function(){kn.log("call jsonp error")},w=null,v.removeChild(f),void(S=!0))},a.timeout)),window[a.callbackName]=function(){clearTimeout(w),w=null,a.success.apply(null,arguments),window[a.callbackName]=function(){kn.log("call jsonp error")},v.removeChild(f)},a.url.indexOf("?")>-1?a.url+="&callbackName="+a.callbackName:a.url+="?callbackName="+a.callbackName,i(a.data)){var C=[];G(a.data,function(O,U){C.push(U+"="+O)}),a.data=C.join("&"),a.url+="&"+a.data}f.onerror=function(O){return!S&&(window[a.callbackName]=function(){kn.log("call jsonp error")},clearTimeout(w),w=null,v.removeChild(f),a.error(O),void(S=!0))},f.src=a.url}function Xs(a){var f={visibleHandler:n(a.visible)?a.visible:function(){},hiddenHandler:n(a.hidden)?a.hidden:function(){},visibilityChange:null,hidden:null,isSupport:function(){return typeof document[this.hidden]<"u"},init:function(){typeof document.hidden<"u"?(this.hidden="hidden",this.visibilityChange="visibilitychange"):typeof document.mozHidden<"u"?(this.hidden="mozHidden",this.visibilityChange="mozvisibilitychange"):typeof document.msHidden<"u"?(this.hidden="msHidden",this.visibilityChange="msvisibilitychange"):typeof document.webkitHidden<"u"&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange"),this.listen()},listen:function(){if(this.isSupport()){var v=this;N(document,this.visibilityChange,function(){document[v.hidden]?v.hiddenHandler():v.visibleHandler()},1)}else N(window,"focus",this.visibleHandler),N(window,"blur",this.hiddenHandler)}};f.init()}function Zi(a){a=K({success:function(){},error:function(){},appendCall:function(v){document.getElementsByTagName("head")[0].appendChild(v)}},a);var f=null;a.type==="css"&&(f=document.createElement("link"),f.rel="stylesheet",f.href=a.url),a.type==="js"&&(f=document.createElement("script"),f.async="async",f.setAttribute("charset","UTF-8"),f.src=a.url,f.type="text/javascript"),f.onload=f.onreadystatechange=function(){this.readyState&&this.readyState!=="loaded"&&this.readyState!=="complete"||(a.success(),f.onload=f.onreadystatechange=null)},f.onerror=function(){a.error(),f.onerror=null},a.appendCall(f)}function Qs(a){if(typeof a!="string")return"";for(var f=/^\s*javascript/i;f.test(a);)a=a.replace(f,"");return a}function el(a,f){a=String(a),f=typeof f=="number"?f:13;for(var v=126,w=a.split(""),S=0,C=w.length;S<C;S++){var O=w[S].charCodeAt(0);O<v&&(w[S]=String.fromCharCode((w[S].charCodeAt(0)+f)%v))}return w.join("")}function tl(a){var f=13,v=126;return a=String(a),el(a,v-f)}function qo(a){(i(a)||L(a))&&G(a,function(f,v){i(f)||L(f)?qo(a[v]):z(f)&&(a[v]=V(f))})}function nl(a){var f=document.createElement("style");f.type="text/css";try{f.appendChild(document.createTextNode(a))}catch{f.styleSheet.cssText=a}var v=document.getElementsByTagName("head")[0],w=document.getElementsByTagName("script")[0];v?v.children.length?v.insertBefore(f,v.children[0]):v.appendChild(f):w.parentNode.insertBefore(f,w)}function sg(a){if(typeof a!="string")return kn.log("转换unicode错误",a),a;for(var f="",v=0;v<a.length;v++)f+="\\"+a.charCodeAt(v).toString(16);return f}function lg(a,f,v){var w,S,C,O=null,U=0;v||(v={});var se=function(){U=v.leading===!1?0:r(),O=null,C=a.apply(w,S),O||(w=S=null)};return function(){var ye=r();U||v.leading!==!1||(U=ye);var Te=f-(ye-U);return w=this,S=arguments,Te<=0||Te>f?(O&&(clearTimeout(O),O=null),U=ye,C=a.apply(w,S),O||(w=S=null)):O||v.trailing===!1||(O=setTimeout(se,Te)),C}}function Xu(a){var f=[];return a==null||G(a,function(v){f[f.length]=v}),f}function vd(a){return a?a.toArray?a.toArray():L(a)||Ki(a)?Array.prototype.slice.call(a):Xu(a):[]}function rl(a){for(var f,v=[],w={},S=0;S<a.length;S++)f=a[S],f in w||(w[f]=!0,v.push(f));return v}function aa(){Si.msg.apply(Si,arguments).log()}function Qe(){Si.msg.apply(Si,arguments).level("warn").log()}function gt(){Si.msg.apply(Si,arguments).level("error").log()}function al(a){var f=Pe.current_domain;switch(typeof f){case"function":var v=f();return v===""||x(v)===""?"url解析失败":v.indexOf(".")!==-1?v:"url解析失败";case"string":return f===""||x(f)===""?"url解析失败":f.indexOf(".")!==-1?f:"url解析失败";default:var w=ae(null,xc);return a===""||w===""?"url解析失败":w}}function Yo(){var a=document.referrer,f="baidu.com";if(!a)return!1;try{var v=T(a).hostname;return v&&v.substring(v.length-f.length)===f}catch{return!1}}function _d(){var a=Ke(document.referrer);if(In(a)||!a.eqid){var f=Ke(location.href);return a.ck||f.utm_source?"baidu_sem_keyword_id":"baidu_other_keyword_id"}return"baidu_seo_keyword_id"}function yd(){var a=Ke(document.referrer);return In(a)||!a.eqid?er().replace(/-/g,""):a.eqid}function ia(a,f){return a=a||document.referrer,b(a)?(a=x(a),a=$(a),a.indexOf("https://www.baidu.com/")!==0||f||(a=a.split("?")[0]),a=a.slice(0,Pe.max_referrer_string_length),b(a)?a:""):"取值异常_referrer异常_"+String(a)}function il(a){return a=a||document.referrer,a===""||ae(Re(a),xc)!==ae(null,xc)}function gi(a,f){a=a||document.referrer;var v=Pe.source_type.keyword;if(document&&b(a)){if(a.indexOf("http")===0){var w=bd(a),S=Ke(a);if(In(S))return Pe.preset_properties.search_keyword_baidu&&Yo()?void 0:"未取到值";var C=null;for(var O in v)if(w===O&&i(S)){if(C=v[O],L(C))for(O=0;O<C.length;O++){var U=S[C[O]];if(U)return f?{active:U}:U}else if(S[C])return f?{active:S[C]}:S[C]}return Pe.preset_properties.search_keyword_baidu&&Yo()?void 0:"未取到值"}return a===""?"未取到值_直接打开":"未取到值_非http的url"}return"取值异常_referrer异常_"+String(a)}function bd(a){var f=Re(a);if(!f||f==="hostname解析异常")return"";var v={baidu:[/^.*\.baidu\.com$/],bing:[/^.*\.bing\.com$/],google:[/^www\.google\.com$/,/^www\.google\.com\.[a-z]{2}$/,/^www\.google\.[a-z]{2}$/],sm:[/^m\.sm\.cn$/],so:[/^.+\.so\.com$/],sogou:[/^.*\.sogou\.com$/],yahoo:[/^.*\.yahoo\.com$/]};for(var w in v)for(var S=v[w],C=0,O=S.length;C<O;C++)if(S[C].test(f))return w;return"未知搜索引擎"}function wd(a,f){var v="";if(f=f||location.href,Pe.cross_subdomain===!1){try{v=T(f).hostname}catch(w){gt(w)}v=typeof v=="string"&&v!==""?"sajssdk_2015_"+Pe.sdk_id+a+"_"+v.replace(/\./g,"_"):"sajssdk_2015_root_"+Pe.sdk_id+a}else v="sajssdk_2015_cross_"+Pe.sdk_id+a;return v}function ol(){var a="new_user";return zn.isSupport()?zn.get("sensorsdata_is_new_user")!==null||zn.get(wd(a))!==null:lo.get(lo.getNewUserFlagMemoryKey(a))!==null}function mi(a,f,v){var w=!(!i(Pe.heatmap)||!Pe.heatmap.useCapture);return i(Pe.heatmap)&&A(Pe.heatmap.useCapture)&&f==="click"&&(w=!0),N(a,f,v,w)}function Qu(){function a(U,se){for(var ye=0;ye<U.length;ye++)if(se.split("?")[0].indexOf(U[ye])!==-1)return!0}var f="("+Pe.source_type.utm.join("|")+")\\=[^&]+",v=Pe.source_type.search,w=Pe.source_type.social,S=document.referrer||"",C=Tt.pageProp.url;if(C){var O=C.match(new RegExp(f));return O&&O[0]?"付费广告流量":a(v,S)?"自然搜索流量":a(w,S)?"社交网站流量":S===""?"直接流量":"引荐流量"}return"获取url异常"}function Sd(a){var f=it(a,"gdt_vid"),v=it(a,"hash_key"),w=it(a,"callbacks"),S={click_id:"",hash_key:"",callbacks:""};return b(f)&&f.length&&(S.click_id=f.length==16||f.length==18?f:"参数解析不合法",b(v)&&v.length&&(S.hash_key=v),b(w)&&w.length&&(S.callbacks=w)),S}function xd(a){var f=a.properties,v=JSON.parse(JSON.stringify(a));i(f)&&G(f,function(w,S){if(n(w))try{f[S]=w(v),n(f[S])&&(Qe("您的属性- "+S+" 格式不满足要求，我们已经将其删除"),delete f[S])}catch{delete f[S],Qe("您的属性- "+S+" 抛出了异常，我们已经将其删除")}})}function Ed(a){if(i(a)&&a.$option){var f=a.$option;return delete a.$option,f}return{}}function ec(a){var f={};return G(a,function(v,w){v!=null&&(f[w]=v)}),f}function ug(a){var f=!a.type||a.type.slice(0,7)!=="profile",v="取值异常";i(a.properties)&&f&&("$referrer"in a.properties&&(a.properties.$referrer_host=a.properties.$referrer===""?"":Re(a.properties.$referrer,v)),Pe.preset_properties.latest_referrer&&Pe.preset_properties.latest_referrer_host&&(a.properties.$latest_referrer_host=a.properties.$latest_referrer===""?"":Re(a.properties.$latest_referrer,v)))}function cg(a){var f=!a.type||a.type.slice(0,7)!=="profile",v=Pe.preset_properties&&f;v&&Pe.preset_properties.url&&A(a.properties.$url)&&(a.properties.$url=xt()),v&&Pe.preset_properties.title&&A(a.properties.$title)&&(a.properties.$title=document.title)}function kd(a){if(!P(a.target))return!1;var f=a.target,v=f.tagName.toLowerCase(),w={};return w.$element_type=v,w.$element_name=f.getAttribute("name"),w.$element_id=f.getAttribute("id"),w.$element_class_name=b(f.className)?f.className:null,w.$element_target_url=f.getAttribute("href"),w.$element_content=sl(f,v),w=ec(w),w.$url=xt(),w.$url_path=vr(),w.$title=document.title,w}function fg(a){var f=Pe.heatmap&&n(Pe.heatmap.collect_input)&&Pe.heatmap.collect_input(a);return(a.type==="button"||a.type==="submit"||f)&&a.value||""}function sl(a,f){return b(f)&&f.toLowerCase()==="input"?fg(a):Q(a,f)}function tc(a){return za.protocol.ajax(a.url),re(a)}function Ko(a){if(typeof a=="string"&&(a=x(a),a&&(a.slice(0,3)==="://"?a=location.protocol.slice(0,-1)+a:a.slice(0,2)==="//"?a=location.protocol+a:a.slice(0,4)!=="http"&&(a=""))),L(a)&&a.length)for(var f=0;f<a.length;f++)/sa\.gif[^\/]*$/.test(a[f])||(a[f]=a[f].replace(/\/sa$/,"/sa.gif").replace(/(\/sa)(\?[^\/]+)$/,"/sa.gif$2"));else/sa\.gif[^\/]*$/.test(a)||typeof a!="string"||(a=a.replace(/\/sa$/,"/sa.gif").replace(/(\/sa)(\?[^\/]+)$/,"/sa.gif$2"));return a}function Cd(a){b(a)||(a=JSON.stringify(a));var f=ie(a),v="crc="+Yu(f);return"data="+encodeURIComponent(f)+"&ext="+encodeURIComponent(v)}function Zo(){this.sendTimeStamp=0,this.timer=null,this.serverUrl="",this.hasTabStorage=!1}function qt(a,f){for(var v in a)if(Object.prototype.hasOwnProperty.call(a,v)&&!is.check(v,a[v],f))return!1;return!0}function dg(a,f){return i(a)&&G(a,function(v,w){if(L(v)){var S=[];G(v,function(O){if(b(O))S.push(O);else if(A(O))S.push("null");else try{S.push(JSON.stringify(O))}catch{Qe("您的数据-",w,v,"数组里值有错误,已将其删除")}}),a[w]=S}var C=cn(f||[],w)>-1;if(i(v)&&w!=="$option"&&!C)try{a[w]=JSON.stringify(v)}catch{delete a[w],Qe("您的数据-",w,v,"数据值有错误，已将其删除")}else b(v)||Qn(v)||z(v)||Wo(v)||L(v)||n(v)||w==="$option"||C||(Qe("您的数据-",w,v,"-格式不满足要求，我们已经将其删除"),delete a[w])}),a}function hg(a,f){return Qn(f)&&a.length>f?(Qe("字符串长度超过限制，已经做截取--"+a),a.slice(0,f)):a}function Td(a,f){var v=["distinct_id","user_id","id","date","datetime","event","events","first_id","original_id","device_id","properties","second_id","time","users"];i(a)&&G(v,function(w,S){w in a&&(cn(f||[],w)>-1||(S<3?(delete a[w],Qe("您的属性- "+w+"是保留字段，我们已经将其删除")):Qe("您的属性- "+w+"是保留字段，请避免其作为属性名")))})}function nc(a){var f=["$element_selector","$element_path"],v=["sensorsdata_app_visual_properties"];i(a)&&G(a,function(w,S){if(i(w))nc(a[S]);else if(b(w)){if(cn(v,S)>-1)return;a[S]=hg(w,cn(f,S)>-1?1024:Pe.max_string_length)}})}function Ad(a){typeof a.properties.$project<"u"&&(a.project=a.properties.$project,delete a.properties.$project),typeof a.properties.$token<"u"&&(a.token=a.properties.$token,delete a.properties.$token)}function pg(a){if("item_type"in a){var f=a.item_type,v=function(C){return C||delete a.item_type,!0};qt({item_type:f},v)}if("item_id"in a){var w=a.item_id,S=function(C,O,U){return C||U!=="string"||delete a.item_id,!0};qt({item_id:w},S)}}function gg(a,f){G(a,function(v,w){var S=function(C,O,U){return C||U==="keyLength"||delete a[w],!0};cn(f||[],w)===-1&&qt({propertyKey:w},S)})}function mg(a){var f=a.properties;qo(a),i(f)?(dg(f),Td(f),Ad(a),gg(f),nc(f)):"properties"in a&&(a.properties={}),pg(a)}function vg(a,f){var v=f.sensors;return a._track_id=Number(String(l()).slice(2,5)+String(l()).slice(2,4)+String(new Date().getTime()).slice(-4)),a._flush_time=new Date().getTime(),v.events.tempAdd("send",a),a}function Pd(a,f){var v=f.sensors,w={};i(a)&&i(a.identities)&&!In(a.identities)?K(w,a.identities):K(w,me._state.identities);var S={identities:w,distinct_id:me.getDistinctId(),lib:{$lib:"js",$lib_method:"code",$lib_version:String(v.lib_version)},properties:{}};return i(a)&&i(a.properties)&&!In(a.properties)&&(a.properties.$lib_detail&&(S.lib.$lib_detail=a.properties.$lib_detail,delete a.properties.$lib_detail),a.properties.$lib_method&&(S.lib.$lib_method=a.properties.$lib_method,delete a.properties.$lib_method)),xe(S,me.getUnionId(),a),i(a.properties)&&!In(a.properties)&&K(S.properties,a.properties),a.type&&a.type.slice(0,7)==="profile"||(S.properties=K({},Tt.properties(),me.getProps(),me.getSessionProps(),Tt.currentProps,S.properties),v.para.preset_properties.latest_referrer&&!b(S.properties.$latest_referrer)&&(S.properties.$latest_referrer="取值异常"),v.para.preset_properties.latest_search_keyword&&!b(S.properties.$latest_search_keyword)&&(v.para.preset_properties.search_keyword_baidu&&b(S.properties.$search_keyword_id)&&Qn(S.properties.$search_keyword_id_hash)&&b(S.properties.$search_keyword_id_type)||(S.properties.$latest_search_keyword="取值异常")),v.para.preset_properties.latest_traffic_source_type&&!b(S.properties.$latest_traffic_source_type)&&(S.properties.$latest_traffic_source_type="取值异常"),v.para.preset_properties.latest_landing_page&&!b(S.properties.$latest_landing_page)&&(S.properties.$latest_landing_page="取值异常"),v.para.preset_properties.latest_wx_ad_click_id==="not_collect"?(delete S.properties._latest_wx_ad_click_id,delete S.properties._latest_wx_ad_hash_key,delete S.properties._latest_wx_ad_callbacks):v.para.preset_properties.latest_wx_ad_click_id&&!b(S.properties._latest_wx_ad_click_id)&&(S.properties._latest_wx_ad_click_id="取值异常",S.properties._latest_wx_ad_hash_key="取值异常",S.properties._latest_wx_ad_callbacks="取值异常"),b(S.properties._latest_wx_ad_click_id)&&(S.properties.$url=xt())),S.properties.$time&&z(S.properties.$time)?(S.time=1*S.properties.$time,delete S.properties.$time):S.time=1*new Date,function(C){if(v.bridge&&v.bridge.bridge_info.verify_success==="success"){var O=Ac.customProp.geth5Props(JSON.parse(JSON.stringify(C)));i(O)&&!In(O)&&(C.properties=K(C.properties,O))}var U=ba.customProp.getVtrackProps(JSON.parse(JSON.stringify(C)));i(U)&&!In(U)&&(C.properties=K(C.properties,U))}(S),xd(S),ya.checkIsAddSign(S),ya.checkIsFirstTime(S),ug(S),cg(S),S}function Ld(a){return os.stage.process("basicProps",a)}function Id(a){return os.stage.process("formatData",a)}function ll(a,f,v,w){function S(O){function U(){se||(se=!0,location.href=C.href)}O.stopPropagation(),O.preventDefault();var se=!1;setTimeout(U,1e3),w(f,v,U)}a=a||{};var C=null;return a.ele&&(C=a.ele),a.event&&(C=a.target?a.target:a.event.target),v=v||{},!(!C||typeof C!="object")&&(!C.href||/^javascript/.test(C.href)||C.target||C.download||C.onclick?(w(f,v),!1):(a.event&&S(a.event),void(a.ele&&mi(a.ele,"click",function(O){S(O)}))))}function Rd(){var a=location.protocol;return a==="http:"||a==="https:"?a:"http:"}function Od(a){return Or.stage.process("webClickEvent",a)}function ul(a){return Or.stage.process("webStayEvent",a)}function cl(){var a=Tt.campaignParams(),f={};return G(a,function(v,w,S){(" "+R.source_channel_standard+" ").indexOf(" "+w+" ")!==-1?f["$"+w]=S[w]:f[w]=S[w]}),f}function Dd(a,f,v){if(R.is_first_visitor&&v){var w={};R.para.preset_properties.search_keyword_baidu&&il(document.referrer)&&Yo()&&(w.$search_keyword_id=so.id(),w.$search_keyword_id_type=so.type(),w.$search_keyword_id_hash=Ku(w.$search_keyword_id));var S=ia(null,f);a(K({$first_visit_time:new Date,$first_referrer:S,$first_referrer_host:S?Re(S,"取值异常"):"",$first_browser_language:b(navigator.language)?navigator.language.toLowerCase():"取值异常",$first_browser_charset:b(document.charset)?document.charset.toUpperCase():"取值异常",$first_traffic_source_type:Qu(),$first_search_keyword:gi()},cl(),w)),R.is_first_visitor=!1}}function Md(a){var f=location.href,v=window.history.pushState,w=window.history.replaceState;n(window.history.pushState)&&(window.history.pushState=function(){v.apply(window.history,arguments),a(f),f=location.href}),n(window.history.replaceState)&&(window.history.replaceState=function(){w.apply(window.history,arguments),a(f),f=location.href});var S;S=window.document.documentMode?"hashchange":v?"popstate":"hashchange",N(window,S,function(){a(f),f=location.href})}function rc(a,f){var v=[];typeof a=="string"&&a in Cn.EVENT_LIST&&(v=Cn.EVENT_LIST[a],Cn[v[0]].on(v[1],f))}function fl(a,f){var v=a.id,w=a.callback,S=a.name,C=me.getFirstId(),O=me.getOriginDistinctId();if(!qt({distinct_id:v}))return gt("login id is invalid"),!1;if(v===me.getOriginDistinctId()&&!C)return gt("login id is equal to distinct_id"),!1;if(i(me._state.identities)&&me._state.identities.hasOwnProperty(S)&&v===me._state.first_id)return!1;var U=me._state.history_login_id.name!==S||v!==me._state.history_login_id.value;if(U){me._state.identities[S]=v,me.set("history_login_id",{name:S,value:v}),C||me.set("first_id",O),f(v,"$SignUp",{},w);var se={$identity_cookie_id:me._state.identities.$identity_cookie_id};return se[S]=v,Nd(se),!0}return!1}function Nd(a){var f={};for(var v in a)f[v]=a[v];me._state.identities=f,me.save()}function Fd(a,f){if(!qt({unbindKey:a,bindValue:f}))return!1;if(i(me._state.identities)&&me._state.identities.hasOwnProperty(a)&&me._state.identities[a]===f){var v=me.getUnionId().login_id;v&&a+"+"+f===v&&(me._state.distinct_id=me._state.first_id,me._state.first_id="",me.set("history_login_id",{name:"",value:""})),a!=="$identity_cookie_id"&&(delete me._state.identities[a],me.save())}var w={};return w[a]=f,w}function ac(){R._t=R._t||1*new Date,R.is_first_visitor=!1,R.source_channel_standard=kh}function ic(a){K(Pe,a||R.para||{}),R.para=Pe;var f={};if(i(R.para.is_track_latest))for(var v in R.para.is_track_latest)f["latest_"+v]=R.para.is_track_latest[v];R.para.preset_properties=K({},Sc.preset_properties,f,R.para.preset_properties||{});var w;for(w in Sc)R.para[w]===void 0&&(R.para[w]=Sc[w]);typeof R.para.web_url!="string"||R.para.web_url.slice(0,3)!=="://"&&R.para.web_url.slice(0,2)!=="//"||(R.para.web_url.slice(0,3)==="://"?R.para.web_url=location.protocol.slice(0,-1)+R.para.web_url:R.para.web_url=location.protocol+R.para.web_url),za.protocol.serverUrl(),R.bridge&&R.bridge.initPara();var S=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],C=["www.baidu.","m.baidu.","m.sm.cn","so.com","sogou.com","youdao.com","google.","yahoo.com/","bing.com/","ask.com/"],O=["weibo.com","renren.com","kaixin001.com","douban.com","qzone.qq.com","zhihu.com","tieba.baidu.com","weixin.qq.com"],U={baidu:["wd","word","kw","keyword"],google:"q",bing:"q",yahoo:"p",sogou:["query","keyword"],so:"q",sm:"q"};typeof R.para.source_type=="object"&&(R.para.source_type.utm=L(R.para.source_type.utm)?R.para.source_type.utm.concat(S):S,R.para.source_type.search=L(R.para.source_type.search)?R.para.source_type.search.concat(C):C,R.para.source_type.social=L(R.para.source_type.social)?R.para.source_type.social.concat(O):O,R.para.source_type.keyword=i(R.para.source_type.keyword)?K(U,R.para.source_type.keyword):U);var se={div:!1},ye=["mark","/mark","strong","b","em","i","u","abbr","ins","del","s","sup"];if(R.para.heatmap&&!i(R.para.heatmap)&&(R.para.heatmap={}),i(R.para.heatmap)){R.para.heatmap.clickmap=R.para.heatmap.clickmap||"default",R.para.heatmap.scroll_notice_map=R.para.heatmap.scroll_notice_map||"default",R.para.heatmap.scroll_delay_time=R.para.heatmap.scroll_delay_time||4e3,R.para.heatmap.scroll_event_duration=R.para.heatmap.scroll_event_duration||18e3,R.para.heatmap.renderRefreshTime=R.para.heatmap.renderRefreshTime||1e3,R.para.heatmap.loadTimeout=R.para.heatmap.loadTimeout||1e3,R.para.heatmap.get_vtrack_config!==!0&&(R.para.heatmap.get_vtrack_config=!1);var Te=L(R.para.heatmap.track_attr)?ce(R.para.heatmap.track_attr,function(et){return et&&typeof et=="string"}):[];if(Te.push("data-sensors-click"),R.para.heatmap.track_attr=Te,i(R.para.heatmap.collect_tags))if(R.para.heatmap.collect_tags.div===!0)R.para.heatmap.collect_tags.div={ignore_tags:ye,max_level:1};else if(i(R.para.heatmap.collect_tags.div)){if(R.para.heatmap.collect_tags.div.ignore_tags?L(R.para.heatmap.collect_tags.div.ignore_tags)||(Qe("ignore_tags 参数必须是数组格式"),R.para.heatmap.collect_tags.div.ignore_tags=ye):R.para.heatmap.collect_tags.div.ignore_tags=ye,R.para.heatmap.collect_tags.div.max_level){var rt=[1,2,3];cn(rt,R.para.heatmap.collect_tags.div.max_level)===-1&&(R.para.heatmap.collect_tags.div.max_level=1)}}else R.para.heatmap.collect_tags.div=!1;else R.para.heatmap.collect_tags=se}R.para.server_url=Ko(R.para.server_url),R.para.noCache===!0?R.para.noCache="?"+new Date().getTime():R.para.noCache="",R.para.callback_timeout>R.para.datasend_timeout&&(R.para.datasend_timeout=R.para.callback_timeout),R.para.heatmap&&R.para.heatmap.collect_tags&&i(R.para.heatmap.collect_tags)&&G(R.para.heatmap.collect_tags,function(et,Yt){Yt!=="div"&&et&&R.heatmap.otherTags.push(Yt)}),R.para.heatmap&&R.para.heatmap.clickmap==="default"&&R.heatmap.initUnlimitedTags()}function Ji(){var a=Array.prototype.slice.call(arguments),f=a[0],v=a.slice(1);return typeof f=="string"&&oa[f]?oa[f].apply(oa,v):void(typeof f=="function"?f.apply(R,v):Qe("quick方法中没有这个功能"+a[0]))}function oc(a,f){function v(){return!w.plugin_is_init&&w.init(R,f),w.plugin_is_init=!0,R.modules=R.modules||{},R.modules[w.plugin_name||"unnamed_"+Am++]=w,w}if(!b(a)&&!i(a))return void gt("use's first arguments must be string or object.");var w;if(i(a)){var S=R.modules&&R.modules[a.plugin_name];S&&S!==a&&Qe(a.name+" is conflict with builtin plugin, and sdk uses builtin plugin."),w=S||a}return b(a)&&(i(R.modules)&&i(R.modules[a])?w=R.modules[a]:i(window.SensorsDataWebJSSDKPlugin)&&i(window.SensorsDataWebJSSDKPlugin[a])?w=window.SensorsDataWebJSSDKPlugin[a]:window.sensorsDataAnalytic201505&&window.sensorsDataAnalytic201505.modules[a]&&(w=window.sensorsDataAnalytic201505.modules[a])),w&&n(w.init)?w.plugin_is_init?w:(w.plugin_name||Qe("warning: invalid plugin, plugin_name required."),w.plugin_version?w.plugin_version!==R.lib_version&&Qe("warning: plugin version not match SDK version. plugin may not work correctly. "):Qe("warning: invalid plugin, plugin version required."),v()):(Qe((a.plugin_name||a)+" is not found or it's not a standard plugin. Please check sensorsdata official documents."),w)}function $d(a,f,v){qt({event:a,properties:f})&&Dn.send({type:"track",event:a,properties:f},v)}function _g(a,f){return!!qt({bindKey:a,bindValue:f})&&(me._state.identities[a]=f,me.save(),void Dn.send({type:"track_id_bind",event:"$BindID",properties:{}}))}function Bd(a,f){var v=Fd(a,f);v&&Dn.send({identities:v,type:"track_id_unbind",event:"$UnbindID",properties:{}})}function Ud(a,f,v){typeof a=="object"&&a.tagName?ll({ele:a},f,v,R.track):typeof a=="object"&&a.target&&a.event&&ll(a,f,v,R.track)}function Vd(a,f,v){return v=v||{},!(!a||typeof a!="object")&&!(!a.href||/^javascript/.test(a.href)||a.target)&&void mi(a,"click",function(w){function S(){C||(C=!0,location.href=a.href)}w.preventDefault();var C=!1;setTimeout(S,1e3),R.track(f,v,S)})}function Hd(a,f,v){qt({item_type:a,item_id:f,properties:v})&&Dn.sendItem({type:"item_set",item_type:a,item_id:f,properties:v||{}})}function yg(a,f){qt({item_type:a,item_id:f})&&Dn.sendItem({type:"item_delete",item_type:a,item_id:f})}function bg(a,f){qt({propertiesMust:a})&&Dn.send({type:"profile_set",properties:a},f)}function wg(a,f){qt({propertiesMust:a})&&Dn.send({type:"profile_set_once",properties:a},f)}function zd(a,f){qt({propertiesMust:a})&&(G(a,function(v,w){b(v)?a[w]=[v]:L(v)?a[w]=v:(delete a[w],Qe("appendProfile属性的值必须是字符串或者数组"))}),In(a)||Dn.send({type:"profile_append",properties:a},f))}function Sg(a,f){function v(S){for(var C in S)if(Object.prototype.hasOwnProperty.call(S,C)&&!/-*\d+/.test(String(S[C])))return!1;return!0}var w=a;b(a)&&(a={},a[w]=1),qt({propertiesMust:a})&&(v(a)?Dn.send({type:"profile_increment",properties:a},f):gt("profile_increment的值只能是数字"))}function xg(a){Dn.send({type:"profile_delete"},a),me.set("distinct_id",er()),me.set("first_id","")}function Eg(a,f){var v=a,w={};b(a)&&(a=[],a.push(v)),L(a)?(G(a,function(S){b(S)?w[S]=!0:Qe("profile_unset给的数组里面的值必须时string,已经过滤掉",S)}),Dn.send({type:"profile_unset",properties:w},f)):gt("profile_unset的参数必须是数组")}function kg(a,f){typeof a=="number"&&(a=String(a));var v=me.getFirstId();if(typeof a>"u"){var w=er();v?me.set("first_id",w):me.set("distinct_id",w)}else qt({distinct_id:a})&&(f===!0?v?me.set("first_id",a):me.set("distinct_id",a):v?me.change("first_id",a):me.change("distinct_id",a))}function Jo(a,f,v,w){var S=me.getFirstId()||me.getDistinctId();me.set("distinct_id",a),Dn.send({original_id:S,distinct_id:me.getDistinctId(),type:"track_signup",event:f,properties:v},w)}function Cg(a,f,v,w){typeof a=="number"&&(a=String(a)),qt({distinct_id:a,event:f,properties:v})&&Jo(a,f,v,w)}function Tg(a){qt({properties:a})?K(Tt.currentProps,a):gt("register输入的参数有误")}function Ag(a){me.clearAllProps(a)}function Pg(a){var f;if(L(a)&&a.length>0)for(f=0;f<a.length;f++)b(a[f])&&a[f]in Tt.currentProps&&delete Tt.currentProps[a[f]];else if(a===!0)for(f in Tt.currentProps)delete Tt.currentProps[f]}function jd(a){qt({properties:a})?me.setProps(a):gt("register输入的参数有误")}function jt(a){qt({properties:a})?me.setPropsOnce(a):gt("registerOnce输入的参数有误")}function Ut(a){R.log("registerSession 方法已经弃用，有问题联系技术顾问"),qt({properties:a})?me.setSessionProps(a):gt("registerSession输入的参数有误")}function Lg(a){R.log("registerSessionOnce 方法已经弃用，有问题联系技术顾问"),qt({properties:a})?me.setSessionPropsOnce(a):gt("registerSessionOnce输入的参数有误")}function Gd(a,f){typeof a=="number"&&(a=String(a));var v=fl({id:a,callback:f,name:as.LOGIN},Jo);!v&&n(f)&&f()}function Ig(a,f){return typeof f=="number"&&(f=String(f)),typeof a=="number"&&(a=String(a)),!!qt({loginIdKey:a})&&(as.LOGIN===a?(Gd(f),!1):void fl({id:f,callback:null,name:a},Jo))}function Rg(a){var f=me.getFirstId();if(f)if(me.set("first_id",""),a===!0){var v=er();me.set("distinct_id",v)}else me.set("distinct_id",f);Nd({$identity_cookie_id:me._state.identities.$identity_cookie_id}),me.set("history_login_id",{name:"",value:""})}function Og(){function a(){var w=Tt.campaignParams(),S={};return G(w,function(C,O,U){(" "+R.source_channel_standard+" ").indexOf(" "+O+" ")!==-1?S["$"+O]=U[O]:S[O]=U[O]}),S}var f={$is_first_day:ol(),$is_first_time:ya.is_page_first_visited,$referrer:Tt.pageProp.referrer||"",$referrer_host:Tt.pageProp.referrer?Re(Tt.pageProp.referrer):"",$url:xt(),$url_path:vr(),$title:document.title||"",_distinct_id:me.getDistinctId(),identities:JSON.parse(JSON.stringify(me._state.identities))},v=K({},Tt.properties(),me.getProps(),a(),f);return R.para.preset_properties.latest_referrer&&R.para.preset_properties.latest_referrer_host&&(v.$latest_referrer_host=v.$latest_referrer===""?"":Re(v.$latest_referrer)),v}function Dg(){var a="",f=" { cursor: pointer; -webkit-tap-highlight-color: rgba(0,0,0,0); }";R.heatmap&&L(R.heatmap.otherTags)&&G(R.heatmap.otherTags,function(v){a+=v+f}),md()&&Me()&&Me()<13&&(R.para.heatmap&&R.para.heatmap.collect_tags&&R.para.heatmap.collect_tags.div&&nl("div, [data-sensors-click]"+f),R.para.heatmap&&R.para.heatmap.track_attr&&nl("["+R.para.heatmap.track_attr.join("], [")+"]"+f),a!==""&&nl(a))}function Xi(a){var f=this;this.type=a,this.resultCbs={},this.timeoutCbs={},this.timerId=null,this.appCallJsCallback=null,window.sensorsdata_app_call_js||(window.sensorsdata_app_call_js=function(v,w){if(v in window.sensorsdata_app_call_js.modules)return window.sensorsdata_app_call_js.modules[v](w)}),window.sensorsdata_app_call_js.modules=window.sensorsdata_app_call_js.modules||{},window.sensorsdata_app_call_js.modules[this.type]=function(v){try{var w=J(v)||v;try{w=JSON.parse(w)}catch{}var S=w&&w.message_id;if(S&&f.resultCbs[S]){if(v=w,f.timeoutCbs[S]&&f.timeoutCbs[S].isTimeout)return void(f.resultCbs[S].callbacks.length=0);if(f.resultCbs[S]){f.resultCbs[S].result=v,clearTimeout(f.timerId),f.timeoutCbs[S].callbacks.length=0;for(var C in f.resultCbs[S].callbacks)f.resultCbs[S].callbacks[C].call(null,v),f.resultCbs[S].callbacks.splice(C,1)}return}return f.appCallJsCallback&&f.appCallJsCallback.call(null,v)}catch{gt("app 回调 js 异常",v)}}}function Wd(a){try{if(R.bridge.activeBridge&&n(R.bridge.activeBridge.handleCommand))return R.bridge.activeBridge.handleCommand(a)}catch(f){gt("Error: handle command exception:"+f)}return gt("数据发往App失败，App没有暴露bridge,type:"+a.callType),!1}function Rn(a){function f(O){var U={hostname:"",project:""};try{O=T(O),U.hostname=O.hostname,U.project=O.searchParams.get("project")||"default"}catch(se){gt("validateAppUrl:"+se)}return U}var v=f(a),w=f(R.para.server_url);if(v.hostname===w.hostname&&v.project===w.project)return!0;if(L(R.para.app_js_bridge.white_list))for(var S=0;S<R.para.app_js_bridge.white_list.length;S++){var C=f(R.para.app_js_bridge.white_list[S]);if(C.hostname===v.hostname&&C.project===v.project)return!0}return!1}function dl(a){this.bridge=new Xi(a.type)}function vi(){var a=Tt.pageProp.url_domain,f={};a===""&&(a="url解析失败");var v=gi(document.referrer,!0);if(Pe.preset_properties.search_keyword_baidu?il(document.referrer)&&(!Yo()||i(v)&&v.active?me._state&&me._state.props&&(me._state.props.$search_keyword_id&&delete me._state.props.$search_keyword_id,me._state.props.$search_keyword_id_type&&delete me._state.props.$search_keyword_id_type,me._state.props.$search_keyword_id_hash&&delete me._state.props.$search_keyword_id_hash):(f.$search_keyword_id=so.id(),f.$search_keyword_id_type=so.type(),f.$search_keyword_id_hash=Ku(f.$search_keyword_id))):me._state&&me._state.props&&(me._state.props.$search_keyword_id&&delete me._state.props.$search_keyword_id,me._state.props.$search_keyword_id_type&&delete me._state.props.$search_keyword_id_type,me._state.props.$search_keyword_id_hash&&delete me._state.props.$search_keyword_id_hash),me.save(),G(Pe.preset_properties,function(O,U){if(U.indexOf("latest_")===-1)return!1;if(U=U.slice(7),O){if(U==="wx_ad_click_id"&&O==="not_collect")return!1;if(U!=="utm"&&a==="url解析失败")U==="wx_ad_click_id"?(f._latest_wx_ad_click_id="url的domain解析失败",f._latest_wx_ad_hash_key="url的domain解析失败",f._latest_wx_ad_callbacks="url的domain解析失败"):f["$latest_"+U]="url的domain解析失败";else if(il(document.referrer))switch(U){case"traffic_source_type":f.$latest_traffic_source_type=Qu();break;case"referrer":f.$latest_referrer=Tt.pageProp.referrer;break;case"search_keyword":gi()?f.$latest_search_keyword=gi():i(me._state)&&i(me._state.props)&&me._state.props.$latest_search_keyword&&delete me._state.props.$latest_search_keyword;break;case"landing_page":f.$latest_landing_page=xt();break;case"wx_ad_click_id":var se=Sd(location.href);f._latest_wx_ad_click_id=se.click_id,f._latest_wx_ad_hash_key=se.hash_key,f._latest_wx_ad_callbacks=se.callbacks}}else if(U==="utm"&&me._state&&me._state.props)for(var ye in me._state.props)(ye.indexOf("$latest_utm")===0||ye.indexOf("_latest_")===0&&ye.indexOf("_latest_wx_ad_")<0)&&delete me._state.props[ye];else if(me._state&&me._state.props&&"$latest_"+U in me._state.props)delete me._state.props["$latest_"+U];else if(U=="wx_ad_click_id"&&me._state&&me._state.props&&O===!1){var Te=["_latest_wx_ad_click_id","_latest_wx_ad_hash_key","_latest_wx_ad_callbacks"];G(Te,function(rt){rt in me._state.props&&delete me._state.props[rt]})}}),Pe.preset_properties.latest_utm){var w=Tt.campaignParamsStandard("$latest_","_latest_"),S=w.$utms,C=w.otherUtms;In(S)||K(f,S),In(C)||K(f,C)}jd(f)}function sc(a){var f=null;try{var v=JSON.parse(window.name);f=v[a]?g(v[a]):null}catch{f=null}return f===null&&(f=it(location.href,a)||null),f}function hl(a){function f(){var C=[];v.touch_app_bridge||C.push(za.defineMode("1")),i(R.para.app_js_bridge)||(C.push(za.defineMode("2")),v.verify_success=!1),i(R.para.heatmap)&&R.para.heatmap.clickmap=="default"||C.push(za.defineMode("3")),v.verify_success==="fail"&&C.push(za.defineMode("4")),new R.SDKJSBridge("app_alert").notifyApp({data:C})}var v=R.bridge.bridge_info;if(R.bridge.hasVisualModeBridge())if(i(R.para.heatmap)&&R.para.heatmap.clickmap=="default")if(i(R.para.app_js_bridge)&&v.verify_success==="success")if(a)window.sa_jssdk_app_define_mode(R,a);else{var w=location.protocol,S=["http:","https:"];w=cn(S,w)>-1?w:"https:",Zi({success:function(){setTimeout(function(){typeof sa_jssdk_app_define_mode<"u"&&window.sa_jssdk_app_define_mode(R,a)},0)},error:function(){},type:"js",url:w+"//static.sensorsdata.cn/sdk/"+R.lib_version+"/vapph5define.min.js"})}else f();else f()}function Lr(a){R.para.is_track_single_page&&Dl.on("switch",function(f){var v=function(S){if(S=S||{},f!==location.href){Tt.pageProp.referrer=xt(f);var C=K({$url:xt(),$referrer:xt(f)},S);n(a)?a(C):R.quick&&R.quick("autoTrack",C)}};if(typeof R.para.is_track_single_page=="boolean")v();else if(typeof R.para.is_track_single_page=="function"){var w=R.para.is_track_single_page();i(w)?v(w):w===!0&&v()}})}function qd(){R._q&&L(R._q)&&R._q.length>0&&G(R._q,function(a){R[a[0]].apply(R,Array.prototype.slice.call(a[1]))}),i(R.para.heatmap)&&(tr.initHeatmap(),tr.initScrollmap())}function Yd(){R.readyState.setState(3),new R.SDKJSBridge("visualized").onAppNotify(function(){hl(typeof sa_jssdk_app_define_mode<"u")}),hl(!1),R.bridge.app_js_bridge_v1(),Tt.initPage(),Lr(),me.init(),vi(),Zd(),R.readyState.setState(4),qd()}function Kd(){Dr.isSeachHasKeyword()?Dr.hasKeywordHandle():window.parent!==self&&Mr.isSearchHasKeyword()?Mr.verifyVtrackMode():Dr.isWindowNameHasKeyword()?Dr.windowNameHasKeywordHandle():Dr.isStorageHasKeyword()?Dr.storageHasKeywordHandle():window.parent!==self&&Mr.isStorageHasKeyword()?Mr.verifyVtrackMode():(Yd(),Mr.notifyUser())}function Zd(){ba.init(),R.bridge.bridge_info.verify_success==="success"&&Ac.init()}function lc(){G(Im,function(a){var f=R[a];R[a]=function(){if(R.readyState.state<3)return L(R._q)||(R._q=[]),R._q.push([a,arguments]),!1;if(!n(R.getDisabled)||!R.getDisabled())return R.readyState.getState()?f.apply(R,arguments):void gt("请先初始化神策JS SDK")}})}function Jd(a,f){this.cancel=function(){a=!0},this.getCanceled=function(){return a||!1},this.stop=function(){f=!0},this.getStopped=function(){return f||!1}}function _r(a,f,v){var w=null;try{w=JSON.parse(JSON.stringify(a||null))}catch{}this.getOriginalData=function(){return w},this.getPosition=function(){return f},this.cancellationToken=new Jd,this.sensors=v}function _i(a){if(!i(a))throw"error: Stage constructor requires arguments.";this.processDef=a,this.registeredInterceptors={}}function ur(a){a&&a.buildDataStage&&Ah.registerStageImplementation(a.buildDataStage),a&&a.businessStage&&Lh.registerStageImplementation(a.businessStage),a&&a.sendDataStage&&Nl.registerStageImplementation(a.sendDataStage),a&&a.viewStage&&Ih.registerStageImplementation(a.viewStage)}function Xd(a,f){Pc[a]&&Pc[a](f)}function Qd(){return us.stage&&us.stage.process("getUtmData")}function Ba(a){return Rh.stage.process("send",a)}function pl(a){a.kit=ki,a.saEvent=Dn,this.buildDataStage=os,this.sendDataStage=Rh,this.businessStage=us}function uc(a){a.heatmap=tr,this.viewStage=Or}function Vt(a){a&&(R.events=wr,R.bridge=Lm,R.SDKJSBridge=Xi,R.JSBridge=dl,R.store=me,R.unlimitedDiv=Ei,R.customProp=Th,R.vtrackcollect=ba,R.vapph5collect=Ac,R.detectMode=Kd,R.registerFeature=ur,R.registerInterceptor=Xd,R.commonWays=oa,ur(new pl(R)),ur(new uc(R)),Xd("viewStage",Oh));var f=a?Pm:Rm;for(var v in f)R[v]=f[v];R.logger=Si,R.log=aa,R._=Ml,R.on=rc,R.ee=Cn,R.use=oc,R.lib_version=Ol}function Ua(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return cc(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function cc(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function Mg(a,f,v){return Ua(a,f,v),a.plugin_version=Mm,a}function fc(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return Ng(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function Ng(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function Fg(a,f,v){return fc(a,f,v),a.plugin_version=Ul,a}function $g(a){return Sa&&Sa.call(Kr,JSON.stringify(a))}function dc(a){return jn.call(Kr)&&Vl&&Vl.call(Kr,JSON.stringify(a))}function gl(a,f){return f&&typeof f[a.callType]=="function"&&f[a.callType]()}function Qi(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return Bg(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function Bg(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function eh(a,f,v){return Qi(a,f,v),a.plugin_version=Hl,a}function th(){if(cr=window.SensorsData_APP_New_H5_Bridge,Fl=cr&&cr.sensorsdata_track,cs=Fl&&cr.sensorsdata_get_server_url&&cr.sensorsdata_get_server_url(),on&&!on.bridge.activeBridge&&cs){if(on.bridge.activeBridge=Dc,on.para.app_js_bridge&&!on.para.app_js_bridge.is_mui&&(on.bridge.is_verify_success=cs&&on.bridge.validateAppUrl(cs)),on.bridge.bridge_info={touch_app_bridge:!0,platform:"android",verify_success:on.bridge.is_verify_success?"success":"fail",support_two_way_call:!!cr.sensorsdata_js_call_app},!on.para.app_js_bridge)return void $l("app_js_bridge is not configured, data will not be sent by android bridge.");on.registerInterceptor("sendDataStage",{send:{priority:60,entry:hc}}),$l("Android bridge inits succeed.")}}function hc(a,f){if(on.para.app_js_bridge.is_mui||a.data.type==="item_set"||a.data.type==="item_delete")return a;var v=a.callback;return on.bridge.is_verify_success?(Fl&&Fl.call(cr,JSON.stringify(fs.extend({server_url:on.para.server_url},a.data))),fs.isFunction(v)&&v(),f.cancellationToken.cancel(),a):on.para.app_js_bridge.is_send?(on.debug.apph5({data:a.data,step:"4.2",output:"all"}),a):(fs.isFunction(v)&&v(),f.cancellationToken.cancel(),a)}function pc(a){var f=a.callType;return f in Oc.commands?Oc.commands[f](a,cr):void(cr&&fs.isFunction(cr.sensorsdata_js_call_app)&&cr.sensorsdata_js_call_app(JSON.stringify(a)))}function nh(a){return jl&&jl.call(Zr,JSON.stringify(a))}function rh(a){return ho.call(Zr)&&xa&&xa.call(Zr,JSON.stringify(a))}function gc(a,f){return f&&typeof f[a.callType]=="function"&&f[a.callType]()}function mc(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return Ug(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function Ug(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function ah(a,f,v){return mc(a,f,v),a.plugin_version=ja,a}function yr(){if(fr=window.SensorsData_APP_JS_Bridge,Ci=fr&&fr.sensorsdata_track,Ti=fr&&fr.sensorsdata_verify,fo=fr&&fr.sensorsdata_visual_verify,Mn&&!Mn.bridge.activeBridge&&(Ti||Ci||fo)){Mn.bridge.activeBridge=Mc;var a=Ti||Ci;if(fo&&(a=!!fo.call(fr,JSON.stringify({server_url:Mn.para.server_url}))),Mn.bridge.bridge_info={touch_app_bridge:!0,platform:"android",verify_success:a?"success":"fail"},!Mn.para.app_js_bridge)return void ot("app_js_bridge is not configured, data will not be sent by android obsolete bridge.");Mn.registerInterceptor("sendDataStage",{send:{priority:80,entry:vc}}),ot("Android obsolete bridge inits succeed.")}}function vc(a,f){if(Mn.para.app_js_bridge.is_mui||a.data.type==="item_set"||a.data.type==="item_delete")return a;var v=a.callback;if(Ti){var w=Ti&&Ti.call(fr,JSON.stringify(wa.extend({server_url:Mn.para.server_url},a.data)));return w?(wa.isFunction(v)&&v(),f.cancellationToken.cancel(),a):Mn.para.app_js_bridge.is_send?(Mn.debug.apph5({data:a.data,step:"3.1",output:"all"}),a):(wa.isFunction(v)&&v(),f.cancellationToken.cancel(),a)}return Ci&&Ci.call(fr,JSON.stringify(wa.extend({server_url:Mn.para.server_url},a.data))),wa.isFunction(v)&&v(),f.cancellationToken.cancel(),a}function Xo(a){var f=a.callType;return f in Mh.commands?Mh.commands[f](a,fr):fr&&wa.isFunction(fr.sensorsdata_js_call_app)?fr.sensorsdata_js_call_app(JSON.stringify(a)):void 0}function ih(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return oh(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function oh(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function Vg(a,f,v){return ih(a,f,v),a.plugin_version=Fc,a}function Hg(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return zg(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function zg(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function jg(a,f,v){return Hg(a,f,v),a.plugin_version=$m,a}function sh(){return typeof ds<"u"&&document[ds]}function eo(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return Gg(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function Gg(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function Wg(a,f,v){return eo(a,f,v),a.plugin_version=Wl,a}function _c(){if(Gl=window.SensorsData_iOS_JS_Bridge&&window.SensorsData_iOS_JS_Bridge.sensorsdata_app_server_url,Pi=function(){return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker},tn&&!tn.bridge.activeBridge&&Pi()&&Pi().postMessage){if(tn.bridge.activeBridge=Hc,tn.para.app_js_bridge&&!tn.para.app_js_bridge.is_mui&&(tn.bridge.is_verify_success=Gl&&tn.bridge.validateAppUrl(Gl)),tn.bridge.bridge_info={touch_app_bridge:!0,platform:"ios",verify_success:tn.bridge.is_verify_success?"success":"fail",support_two_way_call:!0},!tn.para.app_js_bridge)return void Gn("app_js_bridge is not configured, data will not be sent by iOS bridge.");tn.registerInterceptor("sendDataStage",{send:{priority:70,entry:lh}}),Gn("IOS bridge inits succeed.")}}function lh(a,f){if(tn.para.app_js_bridge.is_mui||a.data.type==="item_set"||a.data.type==="item_delete")return a;var v=a.callback;return tn.bridge.is_verify_success?(Pi()&&Pi().postMessage(JSON.stringify({callType:"app_h5_track",data:po.extend({server_url:tn.para.server_url},a.data)})),po.isFunction(v)&&v(),f.cancellationToken.cancel(),a):tn.para.app_js_bridge.is_send?(tn.debug.apph5({data:a.data,step:"4.1",output:"all"}),a):(po.isFunction(v)&&v(),f.cancellationToken.cancel(),a)}function Va(a){var f=a.callType;return f!=="page_info"&&f!=="visualized_track"||tn.bridge.hasVisualModeBridge()?f==="sensorsdata_get_app_visual_config"?po.isObject(window.SensorsData_APP_New_H5_Bridge)&&window.SensorsData_APP_New_H5_Bridge[f]:Pi()&&Pi().postMessage(JSON.stringify(a)):null}function ml(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return qg(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function qg(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function Yg(a,f,v){return ml(a,f,v),a.plugin_version=zc,a}function Kg(){if(Ot&&!Ot.bridge.activeBridge&&to()){if(Ot.bridge.activeBridge=gs,Ot.bridge.bridge_info={touch_app_bridge:!0,platform:"ios",verify_success:qr()?"success":"fail"},!Ot.para.app_js_bridge)return void Bc("app_js_bridge is not configured, data will not be sent by iOS obsolete bridge.");Ot.registerInterceptor("sendDataStage",{send:{priority:90,entry:uh}}),Bc("IOS obsolete bridge inits succeed.")}}function to(){return(/sensors-verify/.test(navigator.userAgent)||/sa-sdk-ios/.test(navigator.userAgent))&&!window.MSStream}function qr(){if(/sensors-verify/.test(navigator.userAgent)){var a=navigator.userAgent.match(/sensors-verify\/([^\s]+)/);if(a&&a[0]&&typeof a[1]=="string"&&a[1].split("?").length===2){a=a[1].split("?");var f=null,v=null;try{f=go.URL(Ot.para.server_url).hostname,v=go.URL(Ot.para.server_url).searchParams.get("project")||"default"}catch(w){Ot.log(w)}return!(!f||f!==a[0]||!v||v!==a[1])}return!1}return!!/sa-sdk-ios/.test(navigator.userAgent)}function uh(a,f){function v(O){var U=JSON.stringify(go.extend({server_url:Ot.para.server_url},O));return U=U.replace(/\r\n/g,""),U=encodeURIComponent(U),"sensorsanalytics://trackEvent?event="+U}if(Ot.para.app_js_bridge.is_mui||a.data.type==="item_set"||a.data.type==="item_delete")return a;var w=a.callback;if(Ot.bridge.bridge_info.verify_success){var S=document.createElement("iframe"),C=v(a.data);return S.setAttribute("src",C),document.documentElement.appendChild(S),S.parentNode.removeChild(S),S=null,go.isFunction(w)&&w(),f.cancellationToken.cancel(),!0}return Ot.para.app_js_bridge.is_send?(Ot.debug.apph5({data:a.data,step:"3.2",output:"all"}),a):(go.isFunction(w)&&w(),f.cancellationToken.cancel(),a)}function Zg(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return Jg(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function Jg(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function Xg(a,f,v){return Zg(a,f,v),a.plugin_version=Uh,a}function hn(){this.sd=null,this.start_time=+new Date,this.page_show_status=!0,this.page_hidden_status=!1,this._={},this.timer=null,this.current_page_url=document.referrer,this.url=location.href,this.title=document.title||"",this.option={},this.heartbeat_interval_time=5e3,this.heartbeat_interval_timer=null,this.page_id=null,this.storage_name="sawebjssdkpageleave",this.max_duration=Vh}function Qg(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return no(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function no(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function Z(a,f,v){return Qg(a,f,v),a.plugin_version=Hh,a}function fe(a,f){if(a.type!=="track")return a;var v=f.sd,w=v._,S=v.saEvent.check,C=w.extend2Lev({properties:{}},a),O=f.customRegister,U=C.properties,se=C.event,ye={};return w.each(O,function(Te){if(w.isObject(Te))w.indexOf(Te.events,se)>-1&&S({properties:Te.properties})&&(ye=w.extend(ye,Te.properties));else if(w.isFunction(Te)){var rt=Te({event:se,properties:U,data:C});w.isObject(rt)&&!w.isEmptyObject(rt)&&S({properties:rt})&&(ye=w.extend(ye,rt))}}),a.properties=w.extend(U,ye),a}function ne(){this.sd=null,this.log=window.console&&window.console.log||function(){},this.customRegister=[]}function Oe(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return nt(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function nt(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function Et(a,f,v){return Oe(a,f,v),a.plugin_version=Vm,a}function vn(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return Nt(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function Nt(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function yc(a,f,v){return vn(a,f,v),a.plugin_version=Gc,a}function em(a){try{if(a.event!=="$pageview"&&(!a.type||a.type.slice(0,7)!=="profile")){var f=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,v=document.documentElement.scrollHeight||0,w={$page_height:Math.max(f,v)||0};a.properties=Ga._.extend(a.properties||{},w)}}catch{Li("页面高度获取异常。")}return Gh.call(Ga.kit,a)}function Ir(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return vl(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function vl(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function tm(a,f,v){return Ir(a,f,v),a.plugin_version=bo,a}function ro(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return _l(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function _l(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function yl(a,f,v){return ro(a,f,v),a.plugin_version=Ca,a}function Pt(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return nm(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function nm(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function ch(a,f,v){return Pt(a,f,v),a.plugin_version=Gm,a}function bl(){_s=!0}function rm(){_s=!1}function am(){return _s}function im(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return wl(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function wl(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function Ha(a,f,v){return im(a,f,v),a.plugin_version=Wh,a}function Sl(a){var f=a,v="";v=Ht.para.debug_mode_url.indexOf("?")!==-1?Ht.para.debug_mode_url+"&"+Ht.kit.encodeTrackData(a):Ht.para.debug_mode_url+"?"+Ht.kit.encodeTrackData(a),Er.ajax({url:v,type:"GET",cors:!0,header:{"Dry-Run":String(Ht.para.debug_mode_upload)},success:function(w){Er.isEmptyObject(w)===!0?alert("debug数据发送成功"+f):alert("debug失败 错误原因"+JSON.stringify(w))}})}function fh(a,f){if(Ht.para.debug_mode===!0){var v=a.data;a.callback,Sl(JSON.stringify(v)),f.cancellationToken.stop()}return a}function xl(){Ht.para.debug_mode===!0&&(Ht.para.debug_mode_upload=Ht.para.debug_mode_upload||!1,Er.isString(Ht.para.debug_mode_url)||(Er.isString(Ht.para.server_url)?Ht.para.debug_mode_url=Ht.para.server_url.replace("sa.gif","debug"):Er.isArray(Ht.para.server_url)&&Er.isString(Ht.para.server_url[0])?Ht.para.debug_mode_url=Ht.para.server_url[0].replace("sa.gif","debug"):Ht.para.debug_mode=!1))}function dh(){Ht.on("sdkInitPara",function(){xl()}),Ht.on("sdkAfterInitPara",function(){Ht.registerInterceptor("sendDataStage",{send:{priority:30,entry:fh}})})}function hh(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return El(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function El(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function ph(a,f,v){return hh(a,f,v),a.plugin_version=qm,a}function Qo(a,f){if(ka.isObject(Wn.para.jsapp)&&!Wn.para.jsapp.isOnline&&typeof Wn.para.jsapp.setData=="function"){var v=a;delete v.callback,v=JSON.stringify(v),Wn.para.jsapp.setData(v),f.cancellationToken.stop()}return a}function yi(){Wn.on("sdkAfterInitAPI",function(){ka.isObject(Wn.commonWays)&&(Wn.commonWays.setOnlineState=kl),Wn.registerInterceptor("sendDataStage",{send:{priority:40,entry:Qo}})})}function kl(a){if(a===!0&&ka.isObject(Wn.para.jsapp)&&typeof Wn.para.jsapp.getData=="function"){Wn.para.jsapp.isOnline=!0;var f=Wn.para.jsapp.getData();ka.isArray(f)&&f.length>0&&ka.each(f,function(v){ka.isJSONString(v)&&Wn.kit.sendData(JSON.parse(v))})}else Wn.para.jsapp.isOnline=!1}function om(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return sm(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function sm(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function lm(a,f,v){return om(a,f,v),a.plugin_version=Zh,a}function Cl(a,f){return!Nn.para.app_js_bridge&&Nn.para.batch_send&&nn.localStorage.isSupport()&&localStorage.length<Nn.para.batch_send.storage_length&&(ys.add(a.data),f.cancellationToken.stop()),a}function Tl(){var a={datasend_timeout:6e3,send_interval:6e3,storage_length:200};nn.localStorage.isSupport()&&nn.isSupportCors()&&typeof localStorage=="object"?Nn.para.batch_send===!0?Nn.para.batch_send=nn.extend({},a):typeof Nn.para.batch_send=="object"&&(Nn.para.batch_send=nn.extend({},a,Nn.para.batch_send)):Nn.para.batch_send=!1}function bc(){Nn.on("sdkInitPara",function(){Tl()}),Nn.on("sdkAfterInitPara",function(){!Nn.para.app_js_bridge&&Nn.para.batch_send&&nn.localStorage.isSupport()&&(ys||(ys=new nn.BatchSend),ys.batchInterval(),Nn.registerInterceptor("sendDataStage",{send:{priority:100,entry:Cl}}))})}function um(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return gh(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function gh(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function cm(a,f,v){return um(a,f,v),a.plugin_version=Jh,a}function mh(a){var f=new ms.BeaconSend(a);f.start()}function _n(a,f){if(Fr.para.send_type==="beacon"){var v=a.server_url;a.data=Fr.kit.encodeTrackData(a.data),ms.isArray(v)&&v.length?ms.each(v,function(w){a.callback=null,a.server_url=w,mh(a)}):typeof Fr.para.server_url=="string"&&Fr.para.server_url!==""?mh(a):Fr.log("当前 server_url 为空或不正确，只在控制台打印日志，network 中不会发数据，请配置正确的 server_url！"),f.cancellationToken.stop()}return a}function Hn(){Fr.para.send_type!=="beacon"||ms.isSupportBeaconSend()||(Fr.para.send_type="image")}function fm(){Fr.on("sdkInitPara",function(){Hn()}),Fr.on("sdkAfterInitPara",function(){Fr.registerInterceptor("sendDataStage",{send:{priority:110,entry:_n}})})}function dm(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return vh(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function vh(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function hm(a,f,v){return dm(a,f,v),a.plugin_version=Xh,a}function Al(a){var f=new vs.AjaxSend(a);f.start()}function es(a,f){if(kr.para.send_type==="ajax"){var v=a.server_url;a.data=kr.kit.encodeTrackData(a.data),vs.isArray(v)&&v.length?vs.each(v,function(w){a.callback=null,a.server_url=w,Al(a)}):typeof kr.para.server_url=="string"&&kr.para.server_url!==""?Al(a):kr.log("当前 server_url 为空或不正确，只在控制台打印日志，network 中不会发数据，请配置正确的 server_url！"),f.cancellationToken.stop()}return a}function wc(){kr.para.send_type!=="ajax"||vs.isSupportCors()||(kr.para.send_type="image")}function ao(){kr.on("sdkInitPara",function(){wc()}),kr.on("sdkAfterInitPara",function(){kr.registerInterceptor("sendDataStage",{send:{priority:120,entry:es}})})}function ts(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return ns(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function ns(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function Pl(a,f,v){return ts(a,f,v),a.plugin_version=ep,a}function io(a,f){var v=rr.kit.encodeTrackData(f);return a.indexOf("?")!==-1?a+"&"+v:a+"?"+v}function _h(a){var f=new Kl.ImageSend(a);f.start()}function pm(a,f){var v=a.server_url;a.data=v&&io(v,a.data),Kl.isArray(v)&&v.length?Kl.each(v,function(w){a.callback=null,a.server_url=w,_h(a)}):typeof rr.para.server_url=="string"&&rr.para.server_url!==""?_h(a):rr.logger&&rr.logger.msg("当前 server_url 为空或不正确，只在控制台打印日志，network 中不会发数据，请配置正确的 server_url！").level("warn").log(),f.cancellationToken.stop()}function gm(){rr.para.send_type!=="image"&&rr.para.send_type!=="ajax"&&rr.para.send_type!=="beacon"&&(rr.para.send_type="image")}function mm(){rr.on("sdkInitPara",function(){gm()}),rr.on("sdkAfterInitPara",function(){rr.registerInterceptor("sendDataStage",{send:{priority:130,entry:pm}})})}function vm(a,f,v){if(f&&(a.plugin_name=f),v&&a.init){var w=a.init;a.init=function(S,C){function O(){w.call(a,S,C)}return Ll(S,a,f),S.readyState&&S.readyState.state>=3||!S.on?O():void S.on(v,O)}}return a}function Ll(a,f,v){function w(S,C){a.logger?a.logger.msg.apply(a.logger,C).module(v+""||"").level(S).log():a.log&&a.log.apply(a,C)}f.log=function(){w("log",arguments)},f.warn=function(){w("warn",arguments)},f.error=function(){w("error",arguments)}}function rs(a,f,v){return vm(a,f,v),a.plugin_version=Ol,a}function yh(a){return Ss===null?void D(a):void Ss.push(a)}function D(a){try{if(a.level==="log"&&bi()||a.level==="warn"&&Il()||a.level==="error"&&Rr())return void ct(a)}catch{}}function bi(){return!!_a()||Tn.para.show_log===!0||ir.isObject(Tn.para.show_log)&&Tn.para.show_log.level==="log"}function Il(){return!!_a()||bi()||ir.isObject(Tn.para.show_log)&&Tn.para.show_log.level==="warn"}function Rr(){return!!_a()||!ir.isObject(Tn.para.show_log)||Tn.para.show_log.level!=="none"}function ct(a){var f=a.content,v=ir.isObject(f[0])?ir.formatJsonString(f[0]):f[0],w=_m(a);f[0]=w+(w.length>0?": ":"")+v;try{console&&(ir.isFunction(console[a.level])?console[a.level].apply(console,f):ir.isObject(console[a.level])&&console[a.level](f[0]))}catch{}}function _m(a){var f="",v="",w=Tn.para.show_log;return ir.isObject(w)&&w.show_brand===!1||(f+=a.brand),ir.isObject(w)&&w.show_level===!1||(f+=(f.length>0?"-":"")+a.level),f.length>0&&(f="["+f+"]"),ir.isObject(w)&&w.show_module===!1||(v=a.module),f+v}function ym(){ir.sessionStorage.isSupport()&&sessionStorage.setItem(qc,"true")}function bm(){ir.sessionStorage.isSupport()&&sessionStorage.removeItem(qc)}function _a(){return ir.sessionStorage.isSupport()&&sessionStorage.getItem(qc)==="true"}var R={};(function(){function a(U,se){function ye(Le,Be){try{Le()}catch{Be&&Be()}}function Te(Le){if(Te[Le]!=null)return Te[Le];var Be;if(Le=="bug-string-char-index")Be="a"[0]!="a";else if(Le=="json")Be=Te("json-stringify")&&Te("date-serialization")&&Te("json-parse");else if(Le=="date-serialization"){if(Be=Te("json-stringify")&&ua){var Se=se.stringify;ye(function(){Be=Se(new pn(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&Se(new pn(864e13))=='"+275760-09-13T00:00:00.000Z"'&&Se(new pn(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&Se(new pn(-1))=='"1969-12-31T23:59:59.999Z"'})}}else{var ze,Ce='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(Le=="json-stringify"){var Se=se.stringify,je=typeof Se=="function";je&&((ze=function(){return 1}).toJSON=ze,ye(function(){je=Se(0)==="0"&&Se(new et)==="0"&&Se(new Yt)=='""'&&Se(Br)===Jr&&Se(Jr)===Jr&&Se()===Jr&&Se(ze)==="1"&&Se([ze])=="[1]"&&Se([Jr])=="[null]"&&Se(null)=="null"&&Se([Jr,Br,null])=="[null,null,null]"&&Se({a:[ze,!0,!1,null,`\0\b
\f\r	`]})==Ce&&Se(null,ze)==="1"&&Se([1,2],null,1)==`[
 1,
 2
]`},function(){je=!1})),Be=je}if(Le=="json-parse"){var We,Ne=se.parse;typeof Ne=="function"&&ye(function(){Ne("0")!==0||Ne(!1)||(ze=Ne(Ce),We=ze.a.length==5&&ze.a[0]===1,We&&(ye(function(){We=!Ne('"	"')}),We&&ye(function(){We=Ne("01")!==1}),We&&ye(function(){We=Ne("1.")!==1})))},function(){We=!1}),Be=We}}return Te[Le]=!!Be}function rt(Le){return Zc(this)}U||(U=v.Object()),se||(se=v.Object());var et=U.Number||v.Number,Yt=U.String||v.String,Lt=U.Object||v.Object,pn=U.Date||v.Date,$r=U.SyntaxError||v.SyntaxError,eu=U.TypeError||v.TypeError,ip=U.Math||v.Math,tu=U.JSON||v.JSON;if(typeof tu=="object"&&tu)return se.stringify=tu.stringify,se.parse=tu.parse,se.runInContext=a,se;var Jr,op=Lt.prototype,Br=op.toString,xo=op.hasOwnProperty,ua=new pn(-0xc782b5b800cec);if(ye(function(){ua=ua.getUTCFullYear()==-109252&&ua.getUTCMonth()===0&&ua.getUTCDate()===1&&ua.getUTCHours()==10&&ua.getUTCMinutes()==37&&ua.getUTCSeconds()==6&&ua.getUTCMilliseconds()==708}),Te["bug-string-char-index"]=Te["date-serialization"]=Te.json=Te["json-stringify"]=Te["json-parse"]=null,!Te("json")){var nu="[object Function]",Xm="[object Date]",sp="[object Number]",lp="[object String]",Yc="[object Array]",Qm="[object Boolean]",Kc=Te("bug-string-char-index"),Eo=function(Le,Be){var Se,ze,Ce,je=0;(Se=function(){this.valueOf=0}).prototype.valueOf=0,ze=new Se;for(Ce in ze)xo.call(ze,Ce)&&je++;return Se=ze=null,je?Eo=function(We,Ne){var Ft,qn,Kt=Br.call(We)==nu;for(Ft in We)Kt&&Ft=="prototype"||!xo.call(We,Ft)||(qn=Ft==="constructor")||Ne(Ft);(qn||xo.call(We,Ft="constructor"))&&Ne(Ft)}:(ze=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],Eo=function(We,Ne){var Ft,qn,Kt=Br.call(We)==nu,Ya=!Kt&&typeof We.constructor!="function"&&f[typeof We.hasOwnProperty]&&We.hasOwnProperty||xo;for(Ft in We)Kt&&Ft=="prototype"||!Ya.call(We,Ft)||Ne(Ft);for(qn=ze.length;Ft=ze[--qn];)Ya.call(We,Ft)&&Ne(Ft)}),Eo(Le,Be)};if(!Te("json-stringify")&&!Te("date-serialization")){var ev={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},tv="000000",Ta=function(Le,Be){return(tv+(Be||0)).slice(-Le)},Zc=function(Le){var Be,Se,ze,Ce,je,We,Ne,Ft,qn;if(ua)Be=function(Dt){Se=Dt.getUTCFullYear(),ze=Dt.getUTCMonth(),Ce=Dt.getUTCDate(),We=Dt.getUTCHours(),Ne=Dt.getUTCMinutes(),Ft=Dt.getUTCSeconds(),qn=Dt.getUTCMilliseconds()};else{var Kt=ip.floor,Ya=[0,31,59,90,120,151,181,212,243,273,304,334],Aa=function(Dt,Pa){return Ya[Pa]+365*(Dt-1970)+Kt((Dt-1969+(Pa=+(Pa>1)))/4)-Kt((Dt-1901+Pa)/100)+Kt((Dt-1601+Pa)/400)};Be=function(Dt){for(Ce=Kt(Dt/864e5),Se=Kt(Ce/365.2425)+1970-1;Aa(Se+1,0)<=Ce;Se++);for(ze=Kt((Ce-Aa(Se,0))/30.42);Aa(Se,ze+1)<=Ce;ze++);Ce=1+Ce-Aa(Se,ze),je=(Dt%864e5+864e5)%864e5,We=Kt(je/36e5)%24,Ne=Kt(je/6e4)%60,Ft=Kt(je/1e3)%60,qn=je%1e3}}return(Zc=function(Dt){return Dt>-1/0&&Dt<1/0?(Be(Dt),Dt=(Se<=0||Se>=1e4?(Se<0?"-":"+")+Ta(6,Se<0?-Se:Se):Ta(4,Se))+"-"+Ta(2,ze+1)+"-"+Ta(2,Ce)+"T"+Ta(2,We)+":"+Ta(2,Ne)+":"+Ta(2,Ft)+"."+Ta(3,qn)+"Z",Se=ze=Ce=We=Ne=Ft=qn=null):Dt=null,Dt})(Le)};if(Te("json-stringify")&&!Te("date-serialization")){var nv=se.stringify;se.stringify=function(Le,Be,Se){var ze=pn.prototype.toJSON;pn.prototype.toJSON=rt;var Ce=nv(Le,Be,Se);return pn.prototype.toJSON=ze,Ce}}else{var rv="\\u00",av=function(Le){var Be=Le.charCodeAt(0),Se=ev[Be];return Se||rv+Ta(2,Be.toString(16))},Jc=/[\x00-\x1f\x22\x5c]/g,up=function(Le){return Jc.lastIndex=0,'"'+(Jc.test(Le)?Le.replace(Jc,av):Le)+'"'},Xc=function(Le,Be,Se,ze,Ce,je,We){var Ne,Ft,qn,Kt,Ya,Aa,Dt,Pa,ef;if(ye(function(){Ne=Be[Le]}),typeof Ne=="object"&&Ne&&(Ne.getUTCFullYear&&Br.call(Ne)==Xm&&Ne.toJSON===pn.prototype.toJSON?Ne=Zc(Ne):typeof Ne.toJSON=="function"&&(Ne=Ne.toJSON(Le))),Se&&(Ne=Se.call(Be,Le,Ne)),Ne==Jr)return Ne===Jr?Ne:"null";switch(Ft=typeof Ne,Ft=="object"&&(qn=Br.call(Ne)),qn||Ft){case"boolean":case Qm:return""+Ne;case"number":case sp:return Ne>-1/0&&Ne<1/0?""+Ne:"null";case"string":case lp:return up(""+Ne)}if(typeof Ne=="object"){for(Dt=We.length;Dt--;)if(We[Dt]===Ne)throw eu();if(We.push(Ne),Kt=[],Pa=je,je+=Ce,qn==Yc){for(Aa=0,Dt=Ne.length;Aa<Dt;Aa++)Ya=Xc(Aa,Ne,Se,ze,Ce,je,We),Kt.push(Ya===Jr?"null":Ya);ef=Kt.length?Ce?`[
`+je+Kt.join(`,
`+je)+`
`+Pa+"]":"["+Kt.join(",")+"]":"[]"}else Eo(ze||Ne,function(hp){var pp=Xc(hp,Ne,Se,ze,Ce,je,We);pp!==Jr&&Kt.push(up(hp)+":"+(Ce?" ":"")+pp)}),ef=Kt.length?Ce?`{
`+je+Kt.join(`,
`+je)+`
`+Pa+"}":"{"+Kt.join(",")+"}":"{}";return We.pop(),ef}};se.stringify=function(Le,Be,Se){var ze,Ce,je,We;if(f[typeof Be]&&Be){if(We=Br.call(Be),We==nu)Ce=Be;else if(We==Yc){je={};for(var Ne,Ft=0,qn=Be.length;Ft<qn;)Ne=Be[Ft++],We=Br.call(Ne),We!="[object String]"&&We!="[object Number]"||(je[Ne]=1)}}if(Se)if(We=Br.call(Se),We==sp){if((Se-=Se%1)>0)for(Se>10&&(Se=10),ze="";ze.length<Se;)ze+=" "}else We==lp&&(ze=Se.length<=10?Se:Se.slice(0,10));return Xc("",(Ne={},Ne[""]=Le,Ne),Ce,je,ze,"",[])}}}if(!Te("json-parse")){var qe,ko,cp=Yt.fromCharCode,iv={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:`
`,102:"\f",114:"\r"},An=function(){throw qe=ko=null,$r()},qa=function(){for(var Le,Be,Se,ze,Ce,je=ko,We=je.length;qe<We;)switch(Ce=je.charCodeAt(qe)){case 9:case 10:case 13:case 32:qe++;break;case 123:case 125:case 91:case 93:case 58:case 44:return Le=Kc?je.charAt(qe):je[qe],qe++,Le;case 34:for(Le="@",qe++;qe<We;)if(Ce=je.charCodeAt(qe),Ce<32)An();else if(Ce==92)switch(Ce=je.charCodeAt(++qe)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:Le+=iv[Ce],qe++;break;case 117:for(Be=++qe,Se=qe+4;qe<Se;qe++)Ce=je.charCodeAt(qe),Ce>=48&&Ce<=57||Ce>=97&&Ce<=102||Ce>=65&&Ce<=70||An();Le+=cp("0x"+je.slice(Be,qe));break;default:An()}else{if(Ce==34)break;for(Ce=je.charCodeAt(qe),Be=qe;Ce>=32&&Ce!=92&&Ce!=34;)Ce=je.charCodeAt(++qe);Le+=je.slice(Be,qe)}if(je.charCodeAt(qe)==34)return qe++,Le;An();default:if(Be=qe,Ce==45&&(ze=!0,Ce=je.charCodeAt(++qe)),Ce>=48&&Ce<=57){for(Ce==48&&(Ce=je.charCodeAt(qe+1),Ce>=48&&Ce<=57)&&An(),ze=!1;qe<We&&(Ce=je.charCodeAt(qe),Ce>=48&&Ce<=57);qe++);if(je.charCodeAt(qe)==46){for(Se=++qe;Se<We&&(Ce=je.charCodeAt(Se),!(Ce<48||Ce>57));Se++);Se==qe&&An(),qe=Se}if(Ce=je.charCodeAt(qe),Ce==101||Ce==69){for(Ce=je.charCodeAt(++qe),Ce!=43&&Ce!=45||qe++,Se=qe;Se<We&&(Ce=je.charCodeAt(Se),!(Ce<48||Ce>57));Se++);Se==qe&&An(),qe=Se}return+je.slice(Be,qe)}ze&&An();var Ne=je.slice(qe,qe+4);if(Ne=="true")return qe+=4,!0;if(Ne=="fals"&&je.charCodeAt(qe+4)==101)return qe+=5,!1;if(Ne=="null")return qe+=4,null;An()}return"$"},Qc=function(Le){var Be,Se;if(Le=="$"&&An(),typeof Le=="string"){if((Kc?Le.charAt(0):Le[0])=="@")return Le.slice(1);if(Le=="["){for(Be=[];Le=qa(),Le!="]";)Se?Le==","?(Le=qa(),Le=="]"&&An()):An():Se=!0,Le==","&&An(),Be.push(Qc(Le));return Be}if(Le=="{"){for(Be={};Le=qa(),Le!="}";)Se?Le==","?(Le=qa(),Le=="}"&&An()):An():Se=!0,Le!=","&&typeof Le=="string"&&(Kc?Le.charAt(0):Le[0])=="@"&&qa()==":"||An(),Be[Le.slice(1)]=Qc(qa());return Be}An()}return Le},fp=function(Le,Be,Se){var ze=dp(Le,Be,Se);ze===Jr?delete Le[Be]:Le[Be]=ze},dp=function(Le,Be,Se){var ze,Ce=Le[Be];if(typeof Ce=="object"&&Ce)if(Br.call(Ce)==Yc)for(ze=Ce.length;ze--;)fp(Br,Eo,Ce,ze,Se);else Eo(Ce,function(je){fp(Ce,je,Se)});return Se.call(Le,Be,Ce)};se.parse=function(Le,Be){var Se,ze;return qe=0,ko=""+Le,Se=Qc(qa()),qa()!="$"&&An(),qe=ko=null,Be&&Br.call(Be)==nu?dp((ze={},ze[""]=Se,ze),"",Be):Se}}}return se.runInContext=a,se}var f={function:!0,object:!0},v=f[typeof window]&&window||this,w=v.JSON,S=v.JSON3,C=!1,O=a(v,v.JSON3={noConflict:function(){return C||(C=!0,v.JSON=w,v.JSON3=S,w=S=null),O}});v.JSON={parse:O.parse,stringify:O.stringify}}).call(window),function(a,f){f(a)}(window,function(a){if(a.atob)try{a.atob(" ")}catch{a.atob=function(S){var C=function(O){return S(String(O).replace(/[\t\n\f\r ]+/g,""))};return C.original=S,C}(a.atob)}else{var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",v=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;a.btoa=function(w){w=String(w);for(var S,C,O,U,se="",ye=0,Te=w.length%3;ye<w.length;){if((C=w.charCodeAt(ye++))>255||(O=w.charCodeAt(ye++))>255||(U=w.charCodeAt(ye++))>255)return"";S=C<<16|O<<8|U,se+=f.charAt(S>>18&63)+f.charAt(S>>12&63)+f.charAt(S>>6&63)+f.charAt(63&S)}return Te?se.slice(0,Te-3)+"===".substring(Te):se},a.atob=function(w){if(w=String(w).replace(/[\t\n\f\r ]+/g,""),!v.test(w))return"";w+="==".slice(2-(3&w.length));for(var S,C,O,U="",se=0;se<w.length;)S=f.indexOf(w.charAt(se++))<<18|f.indexOf(w.charAt(se++))<<12|(C=f.indexOf(w.charAt(se++)))<<6|(O=f.indexOf(w.charAt(se++))),U+=C===64?String.fromCharCode(S>>16&255):O===64?String.fromCharCode(S>>16&255,S>>8&255):String.fromCharCode(S>>16&255,S>>8&255,255&S);return U}}});var bh,kn={setup:function(a){bh=a},log:function(){(bh||console&&console.log||function(){}).apply(null,arguments)}},vt={get:function(a){return window.localStorage.getItem(a)},parse:function(a){var f;try{f=JSON.parse(vt.get(a))||null}catch{kn.log("parse localStorage failed")}return f},set:function(a,f){try{window.localStorage.setItem(a,f)}catch{kn.log("localStorage is not support")}},remove:function(a){window.localStorage.removeItem(a)},isSupport:function(){var a=!0;try{var f="__local_store_support__",v="testIsSupportStorage";vt.set(f,v),vt.get(f)!==v&&(a=!1),vt.remove(f)}catch{a=!1}return a}},wh=function(){function a(){return v=(9301*v+49297)%233280,v/233280}var f=new Date,v=f.getTime();return function(w){return Math.ceil(a()*w)}}();c.prototype.get=function(a,f,v,w){if(!a)throw new Error("key is must");f=f||1e4,v=v||1e3,w=w||function(){};var S=this.lockGetPrefix+a,C=vt.get(S),O=String(l());return C&&(C=s(C)||{randomNum:0,expireTime:0},C.expireTime>r())?w(null):(vt.set(S,JSON.stringify({randomNum:O,expireTime:r()+f})),void setTimeout(function(){C=s(vt.get(S))||{randomNum:0,expireTime:0},C&&C.randomNum===O?(w(vt.get(a)),vt.remove(a),vt.remove(S)):w(null)},v))},c.prototype.set=function(a,f,v,w,S){if(!a||!f)throw new Error("key and val is must");v=v||1e4,w=w||1e3,S=S||function(){};var C=this.lockSetPrefix+a,O=vt.get(C),U=String(l());return O&&(O=s(O)||{randomNum:0,expireTime:0},O.expireTime>r())?S({status:"fail",reason:"This key is locked"}):(vt.set(C,JSON.stringify({randomNum:U,expireTime:r()+v})),void setTimeout(function(){O=s(vt.get(C))||{randomNum:0,expireTime:0},O.randomNum===U?vt.set(a,f)&&S({status:"success"}):S({status:"fail",reason:"This key is locked"})},w))},p.prototype.on=function(a,f){if(!a||!f)return!1;if(!h(f))throw new Error("listener must be a function");this._events[a]=this._events[a]||[];var v=typeof f=="object";return this._events[a].push(v?f:{listener:f,once:!1}),this},p.prototype.prepend=function(a,f){if(!a||!f)return!1;if(!h(f))throw new Error("listener must be a function");this._events[a]=this._events[a]||[];var v=typeof f=="object";return this._events[a].unshift(v?f:{listener:f,once:!1}),this},p.prototype.prependOnce=function(a,f){return this.prepend(a,{listener:f,once:!0})},p.prototype.once=function(a,f){return this.on(a,{listener:f,once:!0})},p.prototype.off=function(a,f){var v=this._events[a];if(!v)return!1;if(typeof f=="number")v.splice(f,1);else if(typeof f=="function")for(var w=0,S=v.length;w<S;w++)v[w]&&v[w].listener===f&&v.splice(w,1);return this},p.prototype.emit=function(a,f){var v=this._events[a];if(!v)return!1;for(var w=0;w<v.length;w++){var S=v[w];S&&(S.listener.call(this,f||{}),S.once&&this.off(a,w))}return this},p.prototype.removeAllListeners=function(a){a&&this._events[a]?this._events[a]=[]:this._events={}},p.prototype.listeners=function(a){return a&&typeof a=="string"?this._events[a]:this._events};var er=function(){var a=function(){for(var w=1*new Date,S=0;w==1*new Date;)S++;return w.toString(16)+S.toString(16)},f=function(){return l().toString(16).replace(".","")},v=function(){function w(ye,Te){var rt,et=0;for(rt=0;rt<Te.length;rt++)et|=U[rt]<<8*rt;return ye^et}var S,C,O=navigator.userAgent,U=[],se=0;for(S=0;S<O.length;S++)C=O.charCodeAt(S),U.unshift(255&C),U.length>=4&&(se=w(se,U),U=[]);return U.length>0&&(se=w(se,U)),se.toString(16)};return function(){var w=String(screen.height*screen.width);w=w&&/\d{5,}/.test(w)?w.toString(16):String(31242*l()).replace(".","").slice(0,8);var S=a()+"-"+f()+"-"+v()+"-"+w+"-"+a();return S||(String(l())+String(l())+String(l())).slice(2,15)}}(),Sh=function(a){this.ele=a},xh=function(a,f){for(var v=[];a;a=a.nextSibling)a.nodeType===1&&a!==f&&v.push(a);return v};Sh.prototype={addClass:function(a){var f=" "+this.ele.className+" ";return f.indexOf(" "+a+" ")===-1&&(this.ele.className=this.ele.className+(this.ele.className===""?"":" ")+a),this},removeClass:function(a){var f=" "+this.ele.className+" ";return f.indexOf(" "+a+" ")!==-1&&(this.ele.className=f.replace(" "+a+" "," ").slice(1,-1)),this},hasClass:function(a){var f=" "+this.ele.className+" ";return f.indexOf(" "+a+" ")!==-1},attr:function(a,f){return typeof a=="string"&&A(f)?this.ele.getAttribute(a):(typeof a=="string"&&(f=String(f),this.ele.setAttribute(a,f)),this)},offset:function(){var a=this.ele.getBoundingClientRect();if(a.width||a.height){var f=this.ele.ownerDocument,v=f.documentElement;return{top:a.top+window.pageYOffset-v.clientTop,left:a.left+window.pageXOffset-v.clientLeft}}return{top:0,left:0}},getSize:function(){if(!window.getComputedStyle)return{width:this.ele.offsetWidth,height:this.ele.offsetHeight};try{var a=this.ele.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},getStyle:function(a){return this.ele.currentStyle?this.ele.currentStyle[a]:this.ele.ownerDocument.defaultView.getComputedStyle(this.ele,null).getPropertyValue(a)},wrap:function(a){var f=document.createElement(a);return this.ele.parentNode.insertBefore(f,this.ele),f.appendChild(this.ele),F(f)},getCssStyle:function(a){var f=this.ele.style.getPropertyValue(a);if(f)return f;var v=null;if(typeof window.getMatchedCSSRules=="function"&&(v=window.getMatchedCSSRules(this.ele)),!v||!L(v))return null;for(var w=v.length-1;w>=0;w--){var S=v[w];if(f=S.style.getPropertyValue(a))return f}},sibling:function(a,f){for(;(a=a[f])&&a.nodeType!==1;);return a},next:function(){return this.sibling(this.ele,"nextSibling")},prev:function(){return this.sibling(this.ele,"previousSibling")},siblings:function(){return xh((this.ele.parentNode||{}).firstChild,this.ele)},children:function(){return xh(this.ele.firstChild)},parent:function(){var a=this.ele.parentNode;return a=a&&a.nodeType!==11?a:null,F(a)},previousElementSibling:function(){var a=this.ele;if("previousElementSibling"in document.documentElement)return F(a.previousElementSibling);for(;a=a.previousSibling;)if(a.nodeType===1)return F(a);return F(null)},getSameTypeSiblings:function(){for(var a=this.ele,f=a.parentNode,v=a.tagName.toLowerCase(),w=[],S=0;S<f.children.length;S++){var C=f.children[S];C.nodeType===1&&C.tagName.toLowerCase()===v&&w.push(f.children[S])}return w},getParents:function(){try{var a=this.ele;if(!P(a))return[];var f=[a];if(a===null||a.parentElement===null)return[];for(;a.parentElement!==null;)a=a.parentElement,f.push(a);return f}catch{return[]}}};var Eh=Array.prototype.forEach,wm=Object.prototype.hasOwnProperty,Sm=Object.prototype.hasOwnProperty,br={get:function(a){for(var f=a+"=",v=document.cookie.split(";"),w=0;w<v.length;w++){for(var S=v[w];S.charAt(0)==" ";)S=S.substring(1,S.length);if(S.indexOf(f)==0)return g(S.substring(f.length,S.length))}return null},set:function(a,f,v,w,S,C,O){function U($r){return!!$r&&$r.replace(/\r\n/g,"")}var se=O,ye="",Te="",rt="";if(v=v??73e3,v!==0){var et=new Date;String(v).slice(-1)==="s"?et.setTime(et.getTime()+1e3*Number(String(v).slice(0,-1))):et.setTime(et.getTime()+24*v*60*60*1e3),ye="; expires="+et.toGMTString()}b(S)&&S!==""&&(rt="; SameSite="+S),C&&(Te="; secure");var Yt="",Lt="",pn="";a&&(Yt=U(a)),f&&(Lt=U(f)),se&&(pn=U(se)),Yt&&Lt&&(document.cookie=Yt+"="+encodeURIComponent(Lt)+ye+"; path=/"+pn+rt+Te)},remove:function(a,f){this.set(a,"1",-1,f)},isSupport:function(a,f){function v(){w.set(a,f);var S=w.get(a);return S===f&&(w.remove(a),!0)}a=a||"cookie_support_test",f=f||"1";var w=this;return navigator.cookieEnabled&&v()}},xm=Object.prototype.hasOwnProperty,oo={isSupport:function(){var a=!0,f="__session_storage_support__",v="testIsSupportStorage";try{sessionStorage&&sessionStorage.setItem?(sessionStorage.setItem(f,v),sessionStorage.removeItem(f,v),a=!0):a=!1}catch{a=!1}return a}},Em={"+":"-","/":"_","=":"."},km={"-":"+",_:"/",".":"="},Cm={encode:function(a){return a.replace(/[+\/=]/g,function(f){return Em[f]})},decode:function(a){return a.replace(/[-_.]/g,function(f){return km[f]})},trim:function(a){return a.replace(/[.=]{1,2}$/,"")},isBase64:function(a){return/^[A-Za-z0-9+\/]*[=]{0,2}$/.test(a)},isUrlSafeBase64:function(a){return/^[A-Za-z0-9_-]*[.]{0,2}$/.test(a)}},wi={__proto__:null,ConcurrentStorage:c,EventEmitter:p,URL:T,UUID:er,addEvent:N,addHashEvent:W,ajax:re,base64Decode:J,base64Encode:ie,bindReady:oe,cookie:br,coverExtend:le,decodeURI:$,decodeURIComponent:g,dfmapping:Y,each:G,encodeDates:ue,extend:K,extend2Lev:xe,filter:ce,formatDate:V,formatJsonString:Ae,getCookieTopLevelDomain:ae,getDomBySelector:we,getElementContent:Q,getHostname:Re,getIOSVersion:Me,getQueryParam:it,getQueryParamsFromUrl:Ke,getRandom:l,getRandomBasic:wh,getScreenOrientation:un,getUA:jr,getURL:xt,getURLPath:vr,getURLSearchParams:_,hasAttribute:Go,hasAttributes:Gr,hashCode:Yu,hashCode53:Ku,indexOf:cn,inherit:Wr,isArguments:Ki,isArray:L,isBoolean:Wo,isDate:z,isElement:P,isEmptyObject:In,isFunction:n,isHttpUrl:pi,isIOS:md,isJSONString:va,isNumber:Qn,isObject:i,isString:b,isSupportBeaconSend:Zu,isSupportCors:Ju,isUndefined:A,jsonp:Js,listenPageState:Xs,loadScript:Zi,localStorage:vt,logger:kn,map:H,mediaQueriesSupported:ht,now:r,removeScriptProtocol:Qs,rot13defs:tl,rot13obfs:el,ry:F,safeJSONParse:s,searchObjDate:qo,sessionStorage:oo,setCssStyle:nl,strToUnicode:sg,throttle:lg,toArray:vd,trim:x,unique:rl,urlParse:k,urlSafeBase64:Cm,values:Xu,xhr:te},Rl=[],Si={appendWriter:function(a){Rl.push(a)},msg:function(){var a={module:"",level:"log",brand:"web-sdk",content:null};a.content=Array.prototype.slice.call(arguments);var f={module:function(v){return b(v)&&(a.module=v),this},level:function(v){return b(v)&&(a.level=v),this},brand:function(v){return b(v)&&(a.brand=v),this},log:function(){if(a.content&&a.content.length){for(var v=0;v<Rl.length;v++)if(typeof Rl[v]=="function")try{Rl[v].call(null,a)}catch{}}return this}};return f}},Pe={},Sc={preset_properties:{search_keyword_baidu:!1,latest_utm:!0,latest_traffic_source_type:!0,latest_search_keyword:!0,latest_referrer:!0,latest_referrer_host:!1,latest_landing_page:!1,latest_wx_ad_click_id:void 0,url:!0,title:!0},encrypt_cookie:!1,enc_cookie:!1,img_use_crossorigin:!1,name:"sa",max_referrer_string_length:200,max_string_length:500,max_id_length:255,max_key_length:100,cross_subdomain:!0,show_log:!1,is_debug:!1,source_channel:[],sdk_id:"",vtrack_ignore:{},auto_init:!0,is_track_single_page:!1,is_single_page:!1,batch_send:!1,source_type:{},callback_timeout:200,datasend_timeout:8e3,is_track_device_id:!1,ignore_oom:!0,app_js_bridge:!1},kh="utm_source utm_medium utm_campaign utm_content utm_term",Ol="1.25.4",xc="sensorsdata_domain_test",as={EMAIL:"$identity_email",MOBILE:"$identity_mobile",LOGIN:"$identity_login_id"},zn={get:function(a){return br.get(a)},set:function(a,f,v,w){var S="";if(w=A(w)?Pe.cross_subdomain:w){var C=al(location.href);C==="url解析失败"&&(C=""),S=C?"; domain="+C:""}return br.set(a,f,v,w,Pe.set_cookie_samesite,Pe.is_secure_cookie,S)},remove:function(a,f){return f=A(f)?Pe.cross_subdomain:f,br.remove(a,f)},isSupport:function(a,f){return a=a||"sajssdk_2015_cookie_access_test",f=f||"1",br.isSupport(a,f)}},so={data:{},id:function(){return this.data.id?this.data.id:(this.data.id=yd(),this.data.id)},type:function(){return this.data.type?this.data.type:(this.data.type=_d(),this.data.type)}},za={distinct_id:function(){},jssdkDebug:function(){},_sendDebug:function(a){},apph5:function(a){var f="app_h5打通失败-",v={1:f+"use_app_track为false",2:f+"Android或者iOS，没有暴露相应方法",3.1:f+"Android校验server_url失败",3.2:f+"iOS校验server_url失败",4.1:f+"H5 校验 iOS server_url 失败",4.2:f+"H5 校验 Android server_url 失败"},w=a.output,S=a.step,C=a.data||"";w!=="all"&&w!=="console"||aa(v[S]),(w==="all"||w==="code")&&i(Pe.is_debug)&&Pe.is_debug.apph5&&(C.type&&C.type.slice(0,7)==="profile"||(C.properties._jssdk_debug_info="apph5-"+String(S)))},defineMode:function(a){var f={1:{title:"当前页面无法进行可视化全埋点",message:"App SDK 与 Web JS SDK 没有进行打通，请联系贵方技术人员修正 App SDK 的配置，详细信息请查看文档。",link_text:"配置文档",link_url:"https://manual.sensorsdata.cn/sa/latest/tech_sdk_client_link-1573913.html"},2:{title:"当前页面无法进行可视化全埋点",message:"App SDK 与 Web JS SDK 没有进行打通，请联系贵方技术人员修正 Web JS SDK 的配置，详细信息请查看文档。",link_text:"配置文档",link_url:"https://manual.sensorsdata.cn/sa/latest/tech_sdk_client_link-1573913.html"},3:{title:"当前页面无法进行可视化全埋点",message:"Web JS SDK 没有开启全埋点配置，请联系贵方工作人员修正 SDK 的配置，详细信息请查看文档。",link_text:"配置文档",link_url:"https://manual.sensorsdata.cn/sa/latest/tech_sdk_client_web_all-1573964.html"},4:{title:"当前页面无法进行可视化全埋点",message:"Web JS SDK 配置的数据校验地址与 App SDK 配置的数据校验地址不一致，请联系贵方工作人员修正 SDK 的配置，详细信息请查看文档。",link_text:"配置文档",link_url:"https://manual.sensorsdata.cn/sa/latest/tech_sdk_client_link-1573913.html"}};return!(!a||!f[a])&&f[a]},protocol:{protocolIsSame:function(a,f){try{if(T(a).protocol!==T(f).protocol)return!1}catch{return Qe("不支持 _.URL 方法"),!1}return!0},serverUrl:function(){b(Pe.server_url)&&Pe.server_url!==""&&!this.protocolIsSame(Pe.server_url,location.href)&&Qe(`SDK 检测到您的数据发送地址和当前页面地址的协议不一致，建议您修改成一致的协议。
因为：1、https 下面发送 http 的图片请求会失败。2、http 页面使用 https + ajax 方式发数据，在 ie9 及以下会丢失数据。`)},ajax:function(a){return a!==Pe.server_url&&void(b(a)&&a!==""&&!this.protocolIsSame(a,location.href)&&Qe("SDK 检测到您的数据发送地址和当前页面地址的协议不一致，建议您修改成一致的协议。因为 http 页面使用 https + ajax 方式发数据，在 ie9 及以下会丢失数据。"))}}},Tt={initPage:function(){var a=ia(),f=xt(),v=al(f);v||za.jssdkDebug("url_domain异常_"+f+"_"+v),this.pageProp={referrer:a,referrer_host:a?Re(a):"",url:f,url_host:Re(f,"url_host取值异常"),url_domain:v}},pageProp:{},campaignParams:function(){return R.kit.getUtmData()},campaignParamsStandard:function(a,f){a=a||"",f=f||"";var v=Tt.campaignParams(),w={},S={};return G(v,function(C,O,U){(" "+kh+" ").indexOf(" "+O+" ")!==-1?w[a+O]=U[O]:S[f+O]=U[O]}),{$utms:w,otherUtms:S}},properties:function(){var a=window.innerHeight||document.documentElement.clientHeight||document.body&&document.body.clientHeight||0,f=window.innerWidth||document.documentElement.clientWidth||document.body&&document.body.clientWidth||0,v={$timezone_offset:new Date().getTimezoneOffset(),$screen_height:Number(screen.height)||0,$screen_width:Number(screen.width)||0,$viewport_height:a,$viewport_width:f,$lib:"js",$lib_version:Ol};return v},currentProps:{},register:function(a){K(Tt.currentProps,a)}};zn.getNewUser=ol;var lo={data:{},get:function(a){var f=this.data[a];return f===void 0?null:f._expirationTimestamp_!==void 0?new Date().getTime()>f._expirationTimestamp_?null:f.value:f},set:function(a,f,v){if(v){var w,S=new Date;w=String(v).slice(-1)==="s"?S.getTime()+1e3*Number(String(v).slice(0,-1)):S.getTime()+24*v*60*60*1e3,f={value:f,_expirationTimestamp_:w}}this.data[a]=f},getNewUserFlagMemoryKey:function(a){return"sajssdk_2015_"+Pe.sdk_id+a}},ya={checkIsAddSign:function(a){a.type==="track"&&(ol()?a.properties.$is_first_day=!0:a.properties.$is_first_day=!1)},is_first_visit_time:!1,is_page_first_visited:!1,checkIsFirstTime:function(a){a.type==="track"&&a.event==="$pageview"&&(this.is_first_visit_time?(a.properties.$is_first_time=!0,this.is_first_visit_time=!1):a.properties.$is_first_time=!1)},setDeviceId:function(a,f){var v=null,w=zn.get("sensorsdata2015jssdkcross"+R.para.sdk_id);w=R.kit.userDecryptIfNeeded(w);var S={};w!=null&&va(w)&&(S=JSON.parse(w),S.$device_id&&(v=S.$device_id)),v=v||a,R.para.cross_subdomain===!0?f.set("$device_id",v):(S.$device_id=v,S=JSON.stringify(S),R.para.encrypt_cookie&&(S=R.kit.userEncrypt(S)),zn.set("sensorsdata2015jssdkcross"+R.para.sdk_id,S,null,!0)),R.para.is_track_device_id&&(Tt.currentProps.$device_id=v)},storeInitCheck:function(){if(R.is_first_visitor){var a=new Date,f={h:23-a.getHours(),m:59-a.getMinutes(),s:59-a.getSeconds()};zn.isSupport()?zn.set(wd("new_user"),"1",3600*f.h+60*f.m+f.s+"s"):lo.set(lo.getNewUserFlagMemoryKey("new_user"),"1",3600*f.h+60*f.m+f.s+"s"),this.is_first_visit_time=!0,this.is_page_first_visited=!0}else ol()||(this.checkIsAddSign=function(v){v.type==="track"&&(v.properties.$is_first_day=!1)}),this.checkIsFirstTime=function(v){v.type==="track"&&v.event==="$pageview"&&(v.properties.$is_first_time=!1)}}},uo=function(){this._events=[],this.pendingEvents=[]};uo.prototype={emit:function(a){var f=[].slice.call(arguments,1);G(this._events,function(v){v.type===a&&v.callback.apply(v.context,f)}),this.pendingEvents.push({type:a,data:f}),this.pendingEvents.length>20&&this.pendingEvents.shift()},on:function(a,f,v,w){n(f)&&(this._events.push({type:a,callback:f,context:v||this}),w=w!==!1,this.pendingEvents.length>0&&w&&G(this.pendingEvents,function(S){S.type===a&&f.apply(v,S.data)}))},tempAdd:function(a,f){if(f&&a)return this.emit(a,f)},isReady:function(){}};var Ec=function(a){this.callback=a.callback,this.server_url=a.server_url,this.data=a.data};Ec.prototype.start=function(){var a=this;tc({url:this.server_url,type:"POST",data:this.data,credentials:!1,timeout:Pe.datasend_timeout,cors:!0,success:function(){a.end()},error:function(){a.end()}})},Ec.prototype.end=function(){if(this.callback){if(aa("warning: sdk callback is deprecated."),!n(this.callback))return void aa("error: sdk callback must be function.");this.callback()}};var kc="sawebjssdk-",Cc="tab-sawebjssdk-";Zo.prototype={batchInterval:function(){this.serverUrl===""&&this.getServerUrl(),this.hasTabStorage||(this.generateTabStorage(),this.hasTabStorage=!0);var a=this;a.timer=setTimeout(function(){a.updateExpireTime(),a.recycle(),a.send(),clearTimeout(a.timer),a.batchInterval()},Pe.batch_send.send_interval)},getServerUrl:function(){return b(Pe.server_url)&&Pe.server_url!==""||L(Pe.server_url)&&Pe.server_url.length?void(this.serverUrl=L(Pe.server_url)?Pe.server_url[0]:Pe.server_url):gt("当前 server_url 为空或不正确，只在控制台打印日志，network 中不会发数据，请配置正确的 server_url！")},send:function(){if(!(this.sendTimeStamp&&r()-this.sendTimeStamp<Pe.batch_send.datasend_timeout)){var a=vt.get(this.tabKey);if(a){this.sendTimeStamp=r(),a=s(a)||this.generateTabStorageVal();var f=rl(a.data);if(f.length){for(var v=[],w=0;w<f.length;w++)v.push(R.store.readObjectVal(f[w]));this.request(v,a.data)}}}},updateExpireTime:function(){var a=vt.get(this.tabKey);a&&(a=s(a)||this.generateTabStorageVal(),a.expireTime=r()+2*Pe.batch_send.send_interval,a.serverUrl=this.serverUrl,vt.set(this.tabKey,JSON.stringify(a)))},request:function(a,f){var v=this;tc({url:this.serverUrl,type:"POST",data:"data_list="+encodeURIComponent(ie(JSON.stringify(a))),credentials:!1,timeout:Pe.batch_send.datasend_timeout,cors:!0,success:function(){v.remove(f),v.sendTimeStamp=0},error:function(){v.sendTimeStamp=0}})},remove:function(a){var f=vt.get(this.tabKey);if(f){for(var v=(s(f)||this.generateTabStorageVal()).data,w=0;w<a.length;w++){var S=cn(v,a[w]);S>-1&&v.splice(S,1),vt.remove(a[w])}v=rl(v),vt.set(this.tabKey,JSON.stringify(this.generateTabStorageVal(v)))}},add:function(a){var f=kc+String(l()),v=vt.get(this.tabKey);v===null?(this.tabKey=Cc+String(l()),v=this.generateTabStorageVal()):v=s(v)||this.generateTabStorageVal(),v.data.push(f),v.expireTime=r()+2*Pe.batch_send.send_interval,vt.set(this.tabKey,JSON.stringify(v)),R.store.saveObjectVal(f,a),a.type!=="track_signup"&&a.event!=="$pageview"||this.sendImmediately()},generateTabStorage:function(){this.tabKey=Cc+String(l()),vt.set(this.tabKey,JSON.stringify(this.generateTabStorageVal()))},generateTabStorageVal:function(a){return a=a||[],{data:a,expireTime:r()+2*Pe.batch_send.send_interval,serverUrl:this.serverUrl}},sendImmediately:function(){this.send()},recycle:function(){for(var a={},f=1e4,v="sajssdk-lock-get-",w=0;w<localStorage.length;w++){var S=localStorage.key(w),C=this;if(S.indexOf(Cc)===0){for(var O=s(vt.get(S))||this.generateTabStorageVal(),U=0;U<O.data.length;U++)a[O.data[U]]=!0;if(S!==C.tabKey&&r()>O.expireTime&&this.serverUrl===O.serverUrl){var se=new c(v);se.get(S,f,1e3,function(et){if(et){vt.get(C.tabKey)===null&&C.generateTabStorage();var Yt=s(et)||C.generateTabStorageVal(),Lt=s(vt.get(C.tabKey))||C.generateTabStorageVal();Lt.data=rl(Lt.data.concat(Yt.data)),vt.set(C.tabKey,JSON.stringify(Lt))}})}}else if(S.indexOf(v)===0){var ye=s(vt.get(S))||{expireTime:0};r()-ye.expireTime>f&&vt.remove(S)}}for(var Te=0;Te<localStorage.length;Te++){var rt=localStorage.key(Te);rt.indexOf(kc)!==0||a[rt]||vt.remove(rt)}}};var Yr=function(a){this.callback=a.callback,this.server_url=a.server_url,this.data=a.data};Yr.prototype.start=function(){var a=this;typeof navigator=="object"&&typeof navigator.sendBeacon=="function"&&navigator.sendBeacon(this.server_url,this.data),setTimeout(function(){a.end()},40)},Yr.prototype.end=function(){if(this.callback){if(aa("warning: sdk callback is deprecated."),!n(this.callback))return void aa("error: sdk callback must be function.");this.callback()}};var co=function(a){this.callback=a.callback,this.img=document.createElement("img"),this.img.width=1,this.img.height=1,Pe.img_use_crossorigin&&(this.img.crossOrigin="anonymous"),this.server_url=a.data};co.prototype.start=function(){var a=this;Pe.ignore_oom&&(this.img.onload=function(){this.onload=null,this.onerror=null,this.onabort=null,a.end()},this.img.onerror=function(){this.onload=null,this.onerror=null,this.onabort=null,a.end()},this.img.onabort=function(){this.onload=null,this.onerror=null,this.onabort=null,a.end()}),this.img.src=this.server_url},co.prototype.lastClear=function(){var a=jr();a.ie!==void 0?this.img.src="about:blank":this.img.src=""},co.prototype.end=function(){if(this.callback){if(aa("warning: sdk callback is deprecated."),!n(this.callback))return void aa("error: sdk callback must be function.");this.callback()}var a=this;setTimeout(function(){a.lastClear&&a.lastClear()},Pe.datasend_timeout-Pe.callback_timeout)};var xi={__proto__:null,addEvent:mi,EventEmitterSa:uo,cookie:zn,info:Tt,getReferrer:ia,getCurrentDomain:al,isBaiduTraffic:Yo,getReferrerEqid:yd,getReferrerEqidType:_d,getBaiduKeyword:so,isReferralTraffic:il,getKeywordFromReferrer:gi,getReferSearchEngine:bd,getSourceFromReferrer:Qu,getWxAdIdFromUrl:Sd,parseSuperProperties:xd,searchConfigData:Ed,strip_empty_properties:ec,getEleInfo:kd,getElementContent:sl,ajax:tc,optimizeServerUrl:Ko,encodeTrackData:Cd,AjaxSend:Ec,BatchSend:Zo,BeaconSend:Yr,ImageSend:co},wr=new uo,me={requests:[],_sessionState:{},_state:{distinct_id:"",first_id:"",props:{},identities:{}},getProps:function(){return this._state.props||{}},getSessionProps:function(){return this._sessionState},getOriginDistinctId:function(){return this._state._distinct_id||this._state.distinct_id},getOriginUnionId:function(a){var f={};a=a||this._state;var v=a._first_id||a.first_id,w=a._distinct_id||a.distinct_id;return v&&w?(f.login_id=w,f.anonymous_id=v):f.anonymous_id=w,f},getDistinctId:function(){var a=this.getUnionId();return a.login_id||a.anonymous_id},getUnionId:function(a){var f=this.getOriginUnionId(a);return f.login_id&&this._state.history_login_id&&this._state.history_login_id.name&&this._state.history_login_id.name!==as.LOGIN&&(f.login_id=this._state.history_login_id.name+"+"+f.login_id),f},getFirstId:function(){return this._state._first_id||this._state.first_id},initSessionState:function(){var a=zn.get("sensorsdata2015session");a=R.kit.userDecryptIfNeeded(a);var f=null;a!==null&&typeof(f=s(a))=="object"&&(this._sessionState=f||{})},setOnce:function(a,f){a in this._state||this.set(a,f)},set:function(a,f){this._state=this._state||{};var v=this._state.distinct_id;this._state[a]=f,a==="first_id"?delete this._state._first_id:a==="distinct_id"&&delete this._state._distinct_id,this.save(),a==="distinct_id"&&v&&wr.tempAdd("changeDistinctId",f)},change:function(a,f){this._state["_"+a]=f},setSessionProps:function(a){R.log("initSessionState 方法已经弃用，请不要使用该功能，如有需求联系技术顾问");var f=this._sessionState;K(f,a),this.sessionSave(f)},setSessionPropsOnce:function(a){R.log("initSessionState 方法已经弃用，请不要使用该功能，如有需求联系技术顾问");var f=this._sessionState;le(f,a),this.sessionSave(f)},setProps:function(a,f){var v={};v=f?a:K(this._state.props||{},a);for(var w in v)typeof v[w]=="string"&&(v[w]=v[w].slice(0,R.para.max_referrer_string_length));this.set("props",v)},setPropsOnce:function(a){var f=this._state.props||{};le(f,a),this.set("props",f)},clearAllProps:function(a){this._sessionState={};var f;if(L(a)&&a.length>0)for(f=0;f<a.length;f++)b(a[f])&&a[f].indexOf("latest_")===-1&&i(this._state.props)&&a[f]in this._state.props&&delete this._state.props[a[f]];else if(i(this._state.props))for(f in this._state.props)f.indexOf("latest_")!==1&&delete this._state.props[f];this.sessionSave({}),this.save()},sessionSave:function(a){R.log("initSessionState 方法已经弃用，请不要使用该功能，如有需求联系技术顾问"),this._sessionState=a;var f=JSON.stringify(this._sessionState);R.para.encrypt_cookie&&(f=R.kit.userEncrypt(f)),zn.set("sensorsdata2015session",f,0)},save:function(){var a=JSON.parse(JSON.stringify(this._state));delete a._first_id,delete a._distinct_id,a.identities&&(a.identities=ie(JSON.stringify(a.identities)));var f=JSON.stringify(a);R.para.encrypt_cookie&&(f=R.kit.userEncrypt(f)),zn.set(this.getCookieName(),f,73e3,R.para.cross_subdomain)},getCookieName:function(){var a="";if(R.para.cross_subdomain===!1){try{a=T(location.href).hostname}catch(f){Qe(f)}a=typeof a=="string"&&a!==""?"sa_jssdk_2015_"+R.para.sdk_id+a.replace(/\./g,"_"):"sa_jssdk_2015_root"+R.para.sdk_id}else a="sensorsdata2015jssdkcross"+R.para.sdk_id;return a},init:function(){function a(C){var O;C.identities&&(C.identities.indexOf(`
/`)===0?C.identities=s(tl(C.identities)):C.identities=s(J(C.identities)));var U=me.getOriginUnionId(C);C.identities&&i(C.identities)&&!In(C.identities)||(C.identities={},C.identities.$identity_cookie_id=er()),C.history_login_id=C.history_login_id||{};var se=C.history_login_id,ye=se.name;if(U.login_id)if(ye&&C.identities.hasOwnProperty(ye)){if(C.identities[ye]!==U.login_id){C.identities[ye]=U.login_id;for(O in C.identities)C.identities.hasOwnProperty(O)&&O!=="$identity_cookie_id"&&O!==ye&&delete C.identities[O];C.history_login_id.value=U.login_id}}else{var Te=ye||as.LOGIN;C.identities[Te]=U.login_id;for(O in C.identities)C.identities.hasOwnProperty(O)&&O!=="$identity_cookie_id"&&O!==Te&&delete C.identities[O];C.history_login_id={name:Te,value:U.login_id}}else{if(C.identities.hasOwnProperty("$identity_login_id")||C.identities.hasOwnProperty(ye))for(O in C.identities)C.identities.hasOwnProperty(O)&&O!=="$identity_cookie_id"&&O!=="$identity_anonymous_id"&&delete C.identities[O];C.history_login_id={name:"",value:""}}return C}function f(C){me.set("distinct_id",C),me.set("identities",{$identity_cookie_id:C}),me.set("history_login_id",{name:"",value:""})}this.initSessionState();var v,w,S=er();zn.isSupport()&&(v=zn.get(this.getCookieName()),v=R.kit.userDecryptIfNeeded(v),w=s(v)),zn.isSupport()&&v!==null&&va(v)&&i(w)&&(!i(w)||w.distinct_id)?(me._state=K(a(w)),me.save()):(R.is_first_visitor=!0,f(S)),ya.setDeviceId(S,this),ya.storeInitCheck()},saveObjectVal:function(a,f){b(f)||(f=JSON.stringify(f)),R.para.encrypt_cookie==1&&(f=R.kit.userEncrypt(f)),vt.set(a,f)},readObjectVal:function(a){var f=vt.get(a);return f?(f=R.kit.userDecryptIfNeeded(f),s(f)):null}},en={string:function(a){Qe(a+" must be string")},emptyString:function(a){Qe(a+"'s is empty")},regexTest:function(a){Qe(a+" is invalid")},idLength:function(a){Qe(a+" length is longer than "+Pe.max_id_length)},keyLength:function(a){Qe(a+" length is longer than "+Pe.max_key_length)},stringLength:function(a){Qe(a+" length is longer than "+Pe.max_string_length)},voidZero:function(a){Qe(a+"'s is undefined")},reservedLoginId:function(a){Qe(a+" is invalid")},reservedBind:function(a){Qe(a+" is invalid")},reservedUnbind:function(a){Qe(a+" is invalid")}},Tc={regName:/^((?!^distinct_id$|^original_id$|^time$|^properties$|^id$|^first_id$|^second_id$|^users$|^events$|^event$|^user_id$|^date$|^datetime$|^user_tag.*|^user_group.*)[a-zA-Z_$][a-zA-Z\d_$]*)$/i,loginIDReservedNames:["$identity_anonymous_id","$identity_cookie_id"],bindReservedNames:["$identity_login_id","$identity_anonymous_id","$identity_cookie_id"],unbindReservedNames:["$identity_anonymous_id",as.LOGIN],string:function(a){return!!b(a)},emptyString:function(a){return!(!b(a)||x(a).length===0)},regexTest:function(a){return!(!b(a)||!this.regName.test(a))},idLength:function(a){return!(!b(a)||a.length>Pe.max_id_length)},keyLength:function(a){return!(!b(a)||a.length>Pe.max_key_length)},stringLength:function(a){return!(!b(a)||a.length>Pe.max_string_length)},voidZero:function(a){return a!==void 0},reservedLoginId:function(a){return!(cn(this.loginIDReservedNames,a)>-1)},reservedUnbind:function(a){return!(cn(this.unbindReservedNames,a)>-1)},reservedBind:function(a){var f=me._state.history_login_id;return(!f||!f.name||f.name!==a)&&!(cn(this.bindReservedNames,a)>-1)}},is={distinct_id:{rules:["string","emptyString","idLength"],onComplete:function(a,f,v){return!a&&(v==="emptyString"&&(f="Id"),n(en[v])&&en[v](f),v==="idLength")||a}},event:{rules:["string","emptyString","keyLength","regexTest"],onComplete:function(a,f,v){return a||(v==="emptyString"&&(f="eventName"),n(en[v])&&en[v](f)),!0}},propertyKey:{rules:["string","emptyString","keyLength","regexTest"],onComplete:function(a,f,v){return a||(v==="emptyString"&&(f="Property key"),n(en[v])&&en[v](f)),!0}},propertyValue:{rules:["voidZero"],onComplete:function(a,f,v){return a||(f="Property Value",n(en[v])&&en[v](f)),!0}},properties:function(a){return i(a)?G(a,function(f,v){qt({propertyKey:v});var w=function(S,C,O){return S||(C=v+"'s Value",n(en[O])&&en[O](C)),!0};qt({propertyValue:f},w)}):Tc.voidZero(a)&&Qe("properties可以没有，但有的话必须是对象"),!0},propertiesMust:function(a){return a!==void 0&&i(a)&&!In(a)?this.properties.call(this,a):Qe("properties必须是对象"),!0},item_type:{rules:["string","emptyString","keyLength","regexTest"],onComplete:function(a,f,v){return a||(v==="emptyString"&&(f="item_type"),n(en[v])&&en[v](f)),!0}},item_id:{rules:["string","emptyString","stringLength"],onComplete:function(a,f,v){return a||(v==="emptyString"&&(f="item_id"),n(en[v])&&en[v](f)),!0}},loginIdKey:{rules:["string","emptyString","keyLength","regexTest","reservedLoginId"],onComplete:function(a,f,v){return!a&&(v==="emptyString"&&(f="login_id_key"),n(en[v])&&en[v](f),v==="keyLength")||a}},bindKey:{rules:["string","emptyString","keyLength","regexTest","reservedBind"],onComplete:function(a,f,v){return!a&&(v==="emptyString"&&(f="Key"),n(en[v])&&en[v](f),v==="keyLength")||a}},unbindKey:{rules:["string","emptyString","keyLength","regexTest","reservedUnbind"],onComplete:function(a,f,v){return!a&&(v==="emptyString"&&(f="Key"),n(en[v])&&en[v](f),v==="keyLength")||a}},bindValue:{rules:["string","emptyString","idLength"],onComplete:function(a,f,v){return!a&&(v==="emptyString"&&(f="Value"),n(en[v])&&en[v](f),v==="idLength")||a}},check:function(a,f,v){var w=this[a];if(n(w))return w.call(this,f);if(!w)return!1;for(var S=0;S<w.rules.length;S++){var C=w.rules[S],O=Tc[C](f),U=n(v)?v(O,f,C):w.onComplete(O,f,C);if(!O)return U}return!0}},_t={};_t.initUrl=function(){var a,f={server_url:{project:"",host:""},page_url:{host:"",pathname:""}};if(!pi(R.para.server_url))return gt("----vcollect---server_url必须为有效 URL 字符串"),!1;try{a=T(R.para.server_url),f.server_url.project=a.searchParams.get("project")||"default",f.server_url.host=a.host}catch(w){return gt("----vcollect---server_url解析异常",w),!1}var v;try{v=T(location.href),f.page_url.host=v.hostname,f.page_url.pathname=v.pathname}catch(w){return gt("----vcollect---页面地址解析异常",w),!1}return f},_t.isDiv=function(a){if(a.element_path){var f=a.element_path.split(">"),v=x(f.pop());if(v.slice(0,3)!=="div")return!1}return!0},_t.configIsMatchNew=function(a,f){if(b(a.$element_selector)&&b(f.element_selector)){if(f.element_field==="element_selector"&&f.function==="equal")return a.$element_selector===f.element_selector;if(f.element_field==="element_selector"&&f.function==="contain")return a.$element_selector.indexOf(f.element_selector)>-1}if(b(a.$element_path)&&b(f.element_path)){if(f.element_field==="element_path"&&f.function==="equal")return a.$element_path===f.element_path;if(f.element_field==="element_path"&&f.function==="contain")return a.$element_path.indexOf(f.element_path)>-1}return!1},_t.configIsMatch=function(a,f){return(!f.limit_element_content||f.element_content===a.$element_content)&&(!f.limit_element_position||f.element_position===String(a.$element_position))&&(f.element_field&&f.function?_t.configIsMatchNew(a,f):_t.configIsMatchOldVersion(a,f))},_t.configIsMatchOldVersion=function(a,f){if(!f.element_path)return!1;if(a.$element_position!==void 0){if(f.element_path!==a.$element_path)return!1}else if(_t.isDiv({element_path:f.element_path})){if(a.$element_path.indexOf(f.element_path)<0)return!1}else if(f.element_path!==a.$element_path)return!1;return!0},_t.filterConfig=function(a,f,v){var w=[];if(!v){var S=_t.initUrl();if(!S)return[];v=S.page_url}return a.event==="$WebClick"&&G(f,function(C){i(C)&&(C.event_type==="webclick"||C.event_type==="appclick")&&i(C.event)&&C.event.url_host===v.host&&C.event.url_path===v.pathname&&_t.configIsMatch(a.properties,C.event)&&w.push(C)}),w},_t.getPropElInLi=function(a,f){if(!(a&&P(a)&&b(f))||a.tagName.toLowerCase()!=="li")return null;var v,w=R.heatmap.getDomSelector(a);if(w){v=w+f;var S=we(v);return S||null}return Qe("----custom---获取同级属性元素失败，selector信息异常",w,f),null},_t.getProp=function(a,f){if(!i(a))return!1;if(!(b(a.name)&&a.name.length>0))return Qe("----vcustom----属性名不合法,属性抛弃",a.name),!1;var v,w,S={};if(a.method==="content"){var C;if(b(a.element_selector)&&a.element_selector.length>0)C=we(a.element_selector);else{if(!f||!b(a.list_selector))return Qe("----vcustom----属性配置异常，属性抛弃",a.name),!1;var O=we(f.properties.$element_selector);if(!O)return Qe("----vcustom----点击元素获取异常，属性抛弃",a.name),!1;var U=R.heatmap.getClosestLi(O);C=_t.getPropElInLi(U,a.list_selector)}if(!C||!P(C))return Qe("----vcustom----属性元素获取失败，属性抛弃",a.name),!1;if(C.tagName.toLowerCase()==="input")v=C.value||"";else if(C.tagName.toLowerCase()==="select"){var se=C.selectedIndex;Qn(se)&&P(C[se])&&(v=sl(C[se],"select"))}else v=sl(C,C.tagName.toLowerCase());if(a.regular){try{w=new RegExp(a.regular).exec(v)}catch{return Qe("----vcustom----正则处理失败，属性抛弃",a.name),!1}if(w===null)return Qe("----vcustom----属性规则处理，未匹配到结果,属性抛弃",a.name),!1;if(!L(w)||!b(w[0]))return Qe("----vcustom----正则处理异常，属性抛弃",a.name,w),!1;v=w[0]}if(a.type==="STRING")S[a.name]=v;else if(a.type==="NUMBER"){if(v.length<1)return Qe("----vcustom----未获取到数字内容，属性抛弃",a.name,v),!1;if(isNaN(Number(v)))return Qe("----vcustom----数字类型属性转换失败，属性抛弃",a.name,v),!1;S[a.name]=Number(v)}return S}return gt("----vcustom----属性不支持此获取方式",a.name,a.method),!1},_t.getAssignConfigs=function(a,f){var v=_t.initUrl();if(!v||!v.page_url)return[];if(!i(f))return[];var w=[];return f.events=f.events||f.eventList,L(f.events)&&f.events.length>0?(G(f.events,function(S){i(S)&&i(S.event)&&S.event.url_host===v.page_url.host&&S.event.url_path===v.page_url.pathname&&a(S)&&w.push(S)}),w):[]};var Ch={events:[],getAssignConfigs:_t.getAssignConfigs,filterConfig:_t.filterConfig,getProp:_t.getProp,initUrl:_t.initUrl,updateEvents:function(a){L(a)&&(this.events=a)},init:function(){this.initAppGetPropsBridge()},geth5Props:function(a){var f={},v=[],w=this;if(!this.events.length)return{};if(a.event==="$WebClick"){var S=this.filterConfig(a,this.events);if(!S.length)return{};G(S,function(C){i(C)&&(L(C.properties)&&C.properties.length>0&&G(C.properties,function(O){if(i(O))if(O.h5===!1)L(f.sensorsdata_app_visual_properties)||(f.sensorsdata_app_visual_properties=[]),f.sensorsdata_app_visual_properties.push(O);else{var U=w.getProp(O,a);i(U)&&(f=K(f,U))}}),b(C.event_name)&&v.push(C.event_name))}),R.bridge.hasVisualModeBridge()&&(f.sensorsdata_web_visual_eventName=v)}return f.sensorsdata_app_visual_properties&&(f.sensorsdata_app_visual_properties=ie(JSON.stringify(f.sensorsdata_app_visual_properties))),f},initAppGetPropsBridge:function(){var a=this,f=new R.SDKJSBridge("getJSVisualProperties");return f.onAppNotify(function(v){var w={};try{v=JSON.parse(J(v))}catch{gt("getJSVisualProperties data parse error!")}if(i(v)){var S=v.sensorsdata_js_visual_properties,C=a.initUrl();C&&(C=C.page_url,L(S)&&S.length>0&&G(S,function(U){if(i(U)&&U.url_host===C.host&&U.url_path===C.pathname&&U.h5){var se=a.getProp(U);i(se)&&(w=K(w,se))}}))}var O=R.bridge.bridge_info.platform;return O==="android"&&f.notifyApp({data:w},v.message_id),w}),f}},Ac={events:[],customProp:Ch,getAssignConfigs:_t.getAssignConfigs,initUrl:_t.initUrl,init:function(){if(this.initUrl()){var a=this.getConfigFromApp();a&&this.updateConfigs(a),this.customProp.init(),this.initAppUpdateConfigBridge()}},initAppUpdateConfigBridge:function(){var a=this;return new R.SDKJSBridge("updateH5VisualConfig").onAppNotify(function(f){if(f){try{f=JSON.parse(J(f))}catch{return void gt("updateH5VisualConfig result parse error！")}a.updateConfigs(f)}})},getConfigFromApp:function(){var a=new R.SDKJSBridge("sensorsdata_get_app_visual_config").notifyApp();if(a)try{a=JSON.parse(J(a))}catch{a=null,gt("getAppVisualConfig result parse error！")}return a},updateConfigs:function(a){this.events=this.filterConfigs(a),this.customProp.updateEvents(this.events)},filterConfigs:function(a){return this.getAssignConfigs(function(f){return!(!i(f)||f.h5===!1)},a)}},Ei={events:[],init:function(a){this.filterWebClickEvents(a)},filterWebClickEvents:function(a){this.events=ba.getAssignConfigs(function(f){return!(!i(f)||f.event.unlimited_div!==!0||f.event_type!=="webclick")},a)},isTargetEle:function(a){var f=R.heatmap.getEleDetail(a);if(!i(f)||!b(f.$element_path))return!1;for(var v=0;v<this.events.length;v++)if(i(this.events[v])&&i(this.events[v].event)&&ba.configIsMatch(f,this.events[v].event))return!0;return!1}},Th={events:[],configSwitch:!1,collectAble:function(){return this.configSwitch&&i(R.para.heatmap)&&R.para.heatmap.get_vtrack_config},updateEvents:function(a){this.events=ba.getAssignConfigs(function(f){return!!(i(f)&&L(f.properties)&&f.properties.length>0)},a),this.events.length?this.configSwitch=!0:this.configSwitch=!1},getVtrackProps:function(a){var f={};return this.collectAble()?(a.event==="$WebClick"&&(f=this.clickCustomPropMaker(a,this.events)),f):{}},clickCustomPropMaker:function(a,f,v){var w=this;v=v||this.filterConfig(a,f,ba.url_info.page_url);var S={};return v.length?(G(v,function(C){L(C.properties)&&C.properties.length>0&&G(C.properties,function(O){var U=w.getProp(O,a);i(U)&&K(S,U)})}),S):{}},getProp:_t.getProp,getPropElInLi:_t.getPropElInLi,filterConfig:_t.filterConfig},ba={unlimitedDiv:Ei,config:{},storageEnable:!0,storage_name:"webjssdkvtrackcollect",para:{session_time:18e5,timeout:5e3,update_interval:18e5},url_info:{},timer:null,update_time:null,customProp:Th,initUrl:function(){var a=_t.initUrl();if(a){var f;try{f=new k(R.para.server_url),f._values.Path="/config/visualized/Web.conf",a.api_url=f.getUrl()}catch(v){return gt("----vtrackcollect---API地址解析异常",v),!1}this.url_info=a}return a},init:function(){if(!i(R.para.heatmap)||!R.para.heatmap.get_vtrack_config)return!1;if(vt.isSupport()||(this.storageEnable=!1),!this.initUrl())return gt("----vtrackcustom----初始化失败，url信息解析失败"),!1;if(this.storageEnable){var a=me.readObjectVal(this.storage_name);if(i(a)&&i(a.data))if(this.serverUrlIsSame(a.serverUrl)){this.config=a.data,this.update_time=a.updateTime,this.updateConfig(a.data);var f=new Date().getTime(),v=f-this.update_time;if(Qn(v)&&v>0&&v<this.para.session_time){var w=this.para.update_interval-v;this.setNextFetch(w)}else this.getConfigFromServer()}else this.getConfigFromServer();else this.getConfigFromServer()}else this.getConfigFromServer();this.pageStateListenner()},serverUrlIsSame:function(a){return!!i(a)&&a.host===this.url_info.server_url.host&&a.project===this.url_info.server_url.project},getConfigFromServer:function(){var a=this,f=function(w,S){a.update_time=new Date().getTime();var C={};w===200?S&&i(S)&&S.os==="Web"&&(C=S,a.updateConfig(C)):w===205?a.updateConfig(C):w===304?C=a.config:(gt("----vtrackcustom----数据异常",w),a.updateConfig(C)),a.updateStorage(C),a.setNextFetch()},v=function(w){a.update_time=new Date().getTime(),gt("----vtrackcustom----配置拉取失败",w),a.setNextFetch()};this.sendRequest(f,v)},setNextFetch:function(a){var f=this;this.timer&&(clearTimeout(this.timer),this.timer=null),a=a||this.para.update_interval,this.timer=setTimeout(function(){f.getConfigFromServer()},a)},pageStateListenner:function(){var a=this;Xs({visible:function(){var f=new Date().getTime(),v=f-a.update_time;if(Qn(v)&&v>0&&v<a.para.update_interval){var w=a.para.update_interval-v;a.setNextFetch(w)}else a.getConfigFromServer()},hidden:function(){a.timer&&(clearTimeout(a.timer),a.timer=null)}})},updateConfig:function(a){return!!i(a)&&(this.config=a,this.customProp.updateEvents(a),void this.unlimitedDiv.init(a))},updateStorage:function(a){if(!this.storageEnable||!i(a))return!1;var f;if(this.url_info.server_url)f=this.url_info.server_url;else{var v=ba.initUrl();if(!v)return!1;f=v.server_url}var w={updateTime:new Date().getTime(),data:a,serverUrl:f};me.saveObjectVal(this.storage_name,w)},sendRequest:function(a,f){var v=this,w={app_id:this.url_info.page_url.host};this.config.version&&(w.v=this.config.version),Js({url:v.url_info.api_url,callbackName:"saJSSDKVtrackCollectConfig",data:w,timeout:v.para.timeout,success:function(S,C){a(S,C)},error:function(S){f(S)}})},getAssignConfigs:_t.getAssignConfigs,configIsMatch:_t.configIsMatch},On={basicProps:{priority:0,entry:Pd},formatData:{priority:0,entry:mg},finalAdjustData:{priority:0,entry:vg}},os={stage:null,init:function(a){this.stage=a},interceptor:On},Dn={};Dn.check=qt,Dn.sendItem=function(a){var f={lib:{$lib:"js",$lib_method:"code",$lib_version:String(R.lib_version)},time:1*new Date};K(f,a),Id(f),R.kit.sendData(f)},Dn.send=function(a,f){var v=R.kit.buildData(a);R.kit.sendData(v,f)};var Or={stage:null,init:function(a){this.stage=a}},ss={label:!1,li:!1,a:!0,button:!0},tr={otherTags:[],initUnlimitedTags:function(){G(tr.otherTags,function(a){a in ss&&(ss[a]=!0)})},isUnlimitedTag:function(a){if(!a||a.nodeType!==1)return!1;var f=a.nodeName.toLowerCase();return ss[f]||Gr(a,R.para.heatmap.track_attr)},getTargetElement:function(a,f){var v=this,w=a;if(typeof w!="object"||typeof w.tagName!="string")return null;var S=w.tagName.toLowerCase();if(S.toLowerCase()==="body"||S.toLowerCase()==="html"||!w||!w.parentNode||!w.parentNode.children)return null;var C=w.parentNode,O=v.otherTags;if(S==="a"||S==="button"||S==="input"||S==="textarea"||cn(O,S)>-1)return w;if(S==="area"&&C.tagName.toLowerCase()==="map"&&F(C).prev().tagName&&F(C).prev().tagName.toLowerCase()==="img")return F(C).prev();if(S==="div"&&R.para.heatmap.collect_tags.div&&v.isDivLevelValid(w)){var U=R.para.heatmap&&R.para.heatmap.collect_tags&&R.para.heatmap.collect_tags.div&&R.para.heatmap.collect_tags.div.max_level||1;if(U>1||v.isCollectableDiv(w))return w}if(v.isStyleTag(S)&&R.para.heatmap.collect_tags.div){var se=v.getCollectableParent(w);if(se&&v.isDivLevelValid(se))return se}var ye=v.hasElement({event:f&&f.originalEvent||f,element:a},function(Te){return v.isUnlimitedTag(Te)});return ye||null},getDivLevels:function(a,f){var v=tr.getElementPath(a,!0,f),w=v.split(" > "),S=0;return G(w,function(C){C==="div"&&S++}),S},isDivLevelValid:function(a){for(var f=R.para.heatmap&&R.para.heatmap.collect_tags&&R.para.heatmap.collect_tags.div&&R.para.heatmap.collect_tags.div.max_level||1,v=a.getElementsByTagName("div"),w=v.length-1;w>=0;w--)if(tr.getDivLevels(v[w],a)>f)return!1;return!0},getElementPath:function(a,f,v){for(var w=[];a.parentNode&&P(a);){if(a.id&&!f&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(a.id)){w.unshift(a.tagName.toLowerCase()+"#"+a.id);break}if(v&&a===v){w.unshift(a.tagName.toLowerCase());break}if(a===document.body){w.unshift("body");break}w.unshift(a.tagName.toLowerCase()),a=a.parentNode}return w.join(" > ")},getClosestLi:function(a){var f=function(v,w){for(;v&&v!==document&&v.nodeType===1;v=v.parentNode)if(v.tagName&&n(v.tagName.toLowerCase)&&v.tagName.toLowerCase()===w)return v;return null};return f(a,"li")},getElementPosition:function(a,f,v){function w(rt){var et=rt.parentNode;if(!et)return"";var Yt=F(rt).getSameTypeSiblings(),Lt=Yt.length;if(Lt===1)return 0;for(var pn=0,$r=rt;F($r).previousElementSibling().ele;$r=F($r).previousElementSibling().ele,pn++);return pn}var S=R.heatmap.getClosestLi(a);if(!S||!P(a))return null;var C=a.tagName.toLowerCase(),O=S.getElementsByTagName(C),U=O.length,se=[];if(U>1){for(var ye=0;ye<U;ye++){var Te=R.heatmap.getElementPath(O[ye],v);Te===f&&se.push(O[ye])}if(se.length>1)return cn(se,a)}return w(S)},setNotice:function(a){R.is_heatmap_render_mode=!0,R.para.heatmap||(R.errorMsg="您SDK没有配置开启点击图，可能没有数据！"),a&&a.slice(0,5)==="http:"&&location.protocol==="https:"&&(R.errorMsg="您的当前页面是https的地址，神策分析环境也必须是https！"),R.para.heatmap_url||(R.para.heatmap_url=Rd()+"//static.sensorsdata.cn/sdk/"+R.lib_version+"/heatmap.min.js")},getDomIndex:function(a){if(!a.parentNode)return-1;for(var f=0,v=a.tagName,w=a.parentNode.children,S=0;S<w.length;S++)if(w[S].tagName===v){if(a===w[S])return f;f++}return-1},selector:function(a,f){var v=a.parentNode&&a.parentNode.nodeType==9?-1:this.getDomIndex(a);return a.getAttribute&&a.getAttribute("id")&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(a.getAttribute("id"))&&(!R.para.heatmap||R.para.heatmap&&R.para.heatmap.element_selector!=="not_use_id")&&!f?"#"+a.getAttribute("id"):a.tagName.toLowerCase()+(~v?":nth-of-type("+(v+1)+")":"")},getDomSelector:function(a,f,v){if(!a||!a.parentNode||!a.parentNode.children)return!1;f=f&&f.join?f:[];var w=a.nodeName.toLowerCase();return a&&w!=="body"&&a.nodeType==1?(f.unshift(this.selector(a,v)),a.getAttribute&&a.getAttribute("id")&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(a.getAttribute("id"))&&R.para.heatmap&&R.para.heatmap.element_selector!=="not_use_id"&&!v?f.join(" > "):this.getDomSelector(a.parentNode,f,v)):(f.unshift("body"),f.join(" > "))},na:function(){var a=document.documentElement.scrollLeft||window.pageXOffset;return parseInt(isNaN(a)?0:a,10)},i:function(){var a=0;try{a=o.documentElement&&o.documentElement.scrollTop||m.pageYOffset,a=isNaN(a)?0:a}catch{a=0}return parseInt(a,10)},getBrowserWidth:function(){var a=window.innerWidth||document.body.clientWidth;return isNaN(a)?0:parseInt(a,10)},getBrowserHeight:function(){var a=window.innerHeight||document.body.clientHeight;return isNaN(a)?0:parseInt(a,10)},getScrollWidth:function(){var a=parseInt(document.body.scrollWidth,10);return isNaN(a)?0:a},getEleDetail:function(a){var f=this.getDomSelector(a),v=kd({target:a});v.$element_selector=f||"",v.$element_path=R.heatmap.getElementPath(a,R.para.heatmap&&R.para.heatmap.element_selector==="not_use_id");var w=R.heatmap.getElementPosition(a,v.$element_path,R.para.heatmap&&R.para.heatmap.element_selector==="not_use_id");return Qn(w)&&(v.$element_position=w),v},getPointerEventProp:function(a,f){function v(){var O=document.body.scrollLeft||document.documentElement.scrollLeft||0,U=document.body.scrollTop||document.documentElement.scrollTop||0;return{scrollLeft:O,scrollTop:U}}function w(O){if(document.documentElement.getBoundingClientRect){var U=O.getBoundingClientRect();return{targetEleX:U.left+v().scrollLeft||0,targetEleY:U.top+v().scrollTop||0}}}function S(O){return Number(Number(O).toFixed(3))}function C(O){var U=O.pageX||O.clientX+v().scrollLeft||O.offsetX+w(f).targetEleX||0,se=O.pageY||O.clientY+v().scrollTop||O.offsetY+w(f).targetEleY||0;return{$page_x:S(U),$page_y:S(se)}}return a?C(a):{}},start:function(a,f,v,w,S){if(i(R.para.heatmap)&&n(R.para.heatmap.collect_element)&&!R.para.heatmap.collect_element(f))return!1;var C=tr.getBasicEleInfo(a,f,v,w,S);Od(C)},getBasicEleInfo:function(a,f,v,w,S){var C=i(w)?w:{},O=n(S)?S:n(w)?w:void 0,U=this.getEleDetail(f);if(R.para.heatmap&&R.para.heatmap.custom_property){var se=R.para.heatmap.custom_property(f);i(se)&&(U=K(U,se))}return U=K(U,this.getPointerEventProp(a,f),C),{event:a,target:f,props:U,tagName:v,callback:O}},hasElement:function(a,f){var v;if(a.event){var w=a.event;v=w.path||w._getPath&&w._getPath()}else a.element&&(v=F(a.element).getParents());if(v&&L(v)&&v.length>0){for(var S=0;S<v.length;S++)if(typeof v[S]=="object"&&v[S].nodeType===1&&f(v[S]))return v[S]}},isStyleTag:function(a,f){var v=["a","div","input","button","textarea"],w=["mark","/mark","strong","b","em","i","u","abbr","ins","del","s","sup"];return!(cn(v,a)>-1)&&(!f||R.para.heatmap&&R.para.heatmap.collect_tags&&R.para.heatmap.collect_tags.div?!!(i(R.para.heatmap)&&i(R.para.heatmap.collect_tags)&&i(R.para.heatmap.collect_tags.div)&&L(R.para.heatmap.collect_tags.div.ignore_tags)&&cn(R.para.heatmap.collect_tags.div.ignore_tags,a)>-1):cn(w,a)>-1)},isCollectableDiv:function(a,f){try{if(a.children.length===0)return!0;for(var v=0;v<a.children.length;v++)if(a.children[v].nodeType===1){var w=a.children[v].tagName.toLowerCase(),S=R.para&&R.para.heatmap&&R.para.heatmap.collect_tags&&R.para.heatmap.collect_tags.div&&R.para.heatmap.collect_tags.div.max_level;if(!(w==="div"&&S>1||this.isStyleTag(w,f))||!this.isCollectableDiv(a.children[v],f))return!1}return!0}catch(C){gt("isCollectableDiv:"+C)}return!1},getCollectableParent:function(a,f){try{var v=a.parentNode,w=v?v.tagName.toLowerCase():"";if(w==="body")return!1;var S=R.para&&R.para.heatmap&&R.para.heatmap.collect_tags&&R.para.heatmap.collect_tags.div&&R.para.heatmap.collect_tags.div.max_level;if(w&&w==="div"&&(S>1||this.isCollectableDiv(v,f)))return v;if(v&&this.isStyleTag(w,f))return this.getCollectableParent(v,f)}catch(C){gt("getCollectableParent:"+C)}return!1},listenUrlChange:function(a){a(),R.ee.spa.on("switch",function(){a()})},initScrollmap:function(){if(!i(R.para.heatmap)||R.para.heatmap.scroll_notice_map!=="default")return!1;var a=!0;R.para.scrollmap&&n(R.para.scrollmap.collect_url)&&this.listenUrlChange(function(){a=!!R.para.scrollmap.collect_url()});var f=function(w){var S={};return S.timeout=w.timeout||1e3,S.func=w.func,S.hasInit=!1,S.inter=null,S.main=function(C,O){this.func(C,O),this.inter=null},S.go=function(C){var O={};this.inter||(O.$viewport_position=document.documentElement&&document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop||0,O.$viewport_position=Math.round(O.$viewport_position)||0,C?S.main(O,!0):this.inter=setTimeout(function(){S.main(O)},this.timeout))},S},v=f({timeout:1e3,func:function(w,S){var C=document.documentElement&&document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop||0,O=new Date,U=O-this.current_time;(U>R.para.heatmap.scroll_delay_time&&C-w.$viewport_position!==0||S)&&(w.$url=xt(),w.$title=document.title,w.$url_path=vr(),w.event_duration=Math.min(R.para.heatmap.scroll_event_duration,parseInt(U)/1e3),w.event_duration=w.event_duration<0?0:w.event_duration,ul(w)),this.current_time=O}});v.current_time=new Date,mi(window,"scroll",function(){return!!a&&void v.go()}),mi(window,"unload",function(){return!!a&&void v.go("notime")})},initHeatmap:function(){var a=this,f=!0;return!(!i(R.para.heatmap)||R.para.heatmap.clickmap!=="default")&&(n(R.para.heatmap.collect_url)&&this.listenUrlChange(function(){f=!!R.para.heatmap.collect_url()}),R.para.heatmap.collect_elements==="all"?R.para.heatmap.collect_elements="all":R.para.heatmap.collect_elements="interact",void(R.para.heatmap.collect_elements==="all"?mi(document,"click",function(v){if(!f)return!1;var w=v||window.event;if(!w)return!1;var S=w.target||w.srcElement;if(typeof S!="object"||typeof S.tagName!="string")return!1;var C=S.tagName.toLowerCase();if(C==="body"||C==="html"||!S||!S.parentNode||!S.parentNode.children)return!1;var O=S.parentNode.tagName.toLowerCase();O==="a"||O==="button"?a.start(w,S.parentNode,O):a.start(w,S,C)}):mi(document,"click",function(v){if(!f)return!1;var w=v||window.event;if(!w)return!1;var S=w.target||w.srcElement,C=R.heatmap.getTargetElement(S,v);C?a.start(w,C,C.tagName.toLowerCase()):P(S)&&S.tagName.toLowerCase()==="div"&&i(R.para.heatmap)&&R.para.heatmap.get_vtrack_config&&Ei.events.length>0&&Ei.isTargetEle(S)&&a.start(w,S,S.tagName.toLowerCase(),{$lib_method:"vtrack"})})))}},oa={autoTrackIsUsed:!1,isReady:function(a){return n(a)?void a():void R.log("error: isReady callback must be function")},getUtm:function(){return Tt.campaignParams()},getStayTime:function(){return(new Date-R._t)/1e3},setProfileLocal:function(a){if(!vt.isSupport())return R.setProfile(a),!1;if(!i(a)||In(a))return!1;var f=me.readObjectVal("sensorsdata_2015_jssdk_profile"),v=!1;if(i(f)&&!In(f)){for(var w in a)!(w in f&&f[w]!==a[w])&&w in f||(f[w]=a[w],v=!0);v&&(me.saveObjectVal("sensorsdata_2015_jssdk_profile",f),R.setProfile(a))}else me.saveObjectVal("sensorsdata_2015_jssdk_profile",a),R.setProfile(a)},setInitReferrer:function(){var a=ia();R.setOnceProfile({_init_referrer:a,_init_referrer_host:Tt.pageProp.referrer_host})},setSessionReferrer:function(){var a=ia();me.setSessionPropsOnce({_session_referrer:a,_session_referrer_host:Tt.pageProp.referrer_host})},setDefaultAttr:function(){Tt.register({_current_url:location.href,_referrer:ia(),_referring_host:Tt.pageProp.referrer_host})},trackHeatMap:function(a,f,v){if(typeof a=="object"&&a.tagName&&P(a.parentNode)){var w=a.tagName.toLowerCase(),S=a.parentNode.tagName.toLowerCase(),C=R.para.heatmap&&R.para.heatmap.track_attr?R.para.heatmap.track_attr:["data-sensors-click"];w==="button"||w==="a"||S==="a"||S==="button"||w==="input"||w==="textarea"||Gr(a,C)||tr.start(null,a,w,f,v)}},trackAllHeatMap:function(a,f,v){if(typeof a=="object"&&a.tagName){var w=a.tagName.toLowerCase();tr.start(null,a,w,f,v)}},autoTrackSinglePage:function(a,f){function v(C,O){R.track("$pageview",K({$referrer:w,$url:xt(),$url_path:vr(),$title:document.title},C,cl()),O),w=xt()}var w;w=this.autoTrackIsUsed?Tt.pageProp.url:Tt.pageProp.referrer,a=i(a)?a:{};var S=!a.not_set_profile;a.not_set_profile&&delete a.not_set_profile,v(a,f),this.autoTrackSinglePage=v,Dd(R.setOnceProfile,!1,S)},autoTrackWithoutProfile:function(a,f){a=i(a)?a:{},this.autoTrack(K(a,{not_set_profile:!0}),f)},autoTrack:function(a,f){a=i(a)?a:{};var v=cl(),w=!a.not_set_profile;a.not_set_profile&&delete a.not_set_profile;var S=location.href;R.para.is_single_page&&W(function(){var C=ia(S,!0);R.track("$pageview",K({$referrer:C,$url:xt(),$url_path:vr(),$title:document.title},v,a),f),S=xt()}),R.track("$pageview",K({$referrer:ia(null,!0),$url:xt(),$url_path:vr(),$title:document.title},v,a),f),Dd(R.setOnceProfile,!0,w),this.autoTrackIsUsed=!0},getAnonymousID:function(){return In(me._state)?"SDK is not initialized.":me._state._first_id||me._state.first_id||me._state._distinct_id||me._state.distinct_id},setPlugin:function(a){return!!i(a)&&void G(a,function(f,v){n(f)&&(i(window.SensorsDataWebJSSDKPlugin)&&window.SensorsDataWebJSSDKPlugin[v]||i(R.modules)&&R.modules[v]?f(window.SensorsDataWebJSSDKPlugin[v]):Qe(v+"is not found,please check sensorsdata documents."))})},useModulePlugin:function(){R.use.apply(R,arguments)},useAppPlugin:function(){this.setPlugin.apply(this,arguments)}},Dl=new p,nr=new p,Cn={};Cn.spa=Dl,Cn.sdk=nr,Cn.initSystemEvent=function(){Md(function(a){Dl.emit("switch",a)})},Cn.EVENT_LIST={spaSwitch:["spa","switch"],sdkBeforeInit:["sdk","beforeInit"],sdkInitPara:["sdk","initPara"],sdkAfterInitPara:["sdk","afterInitPara"],sdkInitAPI:["sdk","initAPI"],sdkAfterInitAPI:["sdk","afterInitAPI"],sdkAfterInit:["sdk","afterInit"],sdkReady:["sdk","ready"]};var Tm={state:0,historyState:[],stateType:{1:"1-init未开始",2:"2-init开始",3:"3-store完成"},getState:function(){return this.historyState.join(`
`)},setState:function(a){String(a)in this.stateType&&(this.state=a),this.historyState.push(this.stateType[a])}},Am=1,Pm={__proto__:null,setInitVar:ac,initPara:ic,quick:Ji,use:oc,track:$d,bind:_g,unbind:Bd,trackLink:Ud,trackLinks:Vd,setItem:Hd,deleteItem:yg,setProfile:bg,setOnceProfile:wg,appendProfile:zd,incrementProfile:Sg,deleteProfile:xg,unsetProfile:Eg,identify:kg,trackSignup:Cg,registerPage:Tg,clearAllRegister:Ag,clearPageRegister:Pg,register:jd,registerOnce:jt,registerSession:Ut,registerSessionOnce:Lg,login:Gd,loginWithKey:Ig,logout:Rg,getPresetProperties:Og,readyState:Tm,debug:za,on:rc,log:aa};kn.setup(aa);var Ml=K({},wi,xi),Lm={bridge_info:{touch_app_bridge:!1,verify_success:!1,platform:"",support_two_way_call:!1},is_verify_success:!1,initPara:function(){var a={is_send:R.para.use_app_track_is_send!==!1&&R.para.use_app_track!=="only",white_list:[],is_mui:R.para.use_app_track==="mui"};typeof R.para.app_js_bridge=="object"?R.para.app_js_bridge=K({},a,R.para.app_js_bridge):R.para.use_app_track!==!0&&R.para.app_js_bridge!==!0&&R.para.use_app_track!=="only"&&R.para.use_app_track!=="mui"||(R.para.app_js_bridge=K({},a)),R.para.app_js_bridge.is_send===!1&&Qe("设置了 is_send:false,如果打通失败，数据将被丢弃!")},app_js_bridge_v1:function(){function a(C){w=C,va(w)&&(w=JSON.parse(w)),S&&(S(w),S=null,w=null)}function f(){typeof window.SensorsData_APP_JS_Bridge=="object"&&window.SensorsData_APP_JS_Bridge.sensorsdata_call_app&&(w=window.SensorsData_APP_JS_Bridge.sensorsdata_call_app(),va(w)&&(w=JSON.parse(w)))}function v(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var C=document.createElement("iframe");C.setAttribute("src","sensorsanalytics://getAppInfo"),document.documentElement.appendChild(C),C.parentNode.removeChild(C),C=null}}var w=null,S=null;window.sensorsdata_app_js_bridge_call_js=function(C){a(C)},R.getAppStatus=function(C){return v(),f(),C?void(w===null?S=C:(C(w),w=null)):w}},hasVisualModeBridge:function(){var a=window.SensorsData_App_Visual_Bridge,f="sensorsdata_visualized_mode";return i(a)&&a[f]&&(a[f]===!0||a[f]())},validateAppUrl:Rn};Xi.prototype.call=function(a,f){var v=this,w=new Date().getTime().toString(16)+String(l()).replace(".","").slice(1,8);this.resultCbs[w]=v.resultCbs[w]||{result:null,callbacks:[]},this.timeoutCbs[w]=v.timeoutCbs[w]||{isTimeout:!1,callbacks:[]},a=a.data?a:{data:a},a.data.message_id=w;var S=K({callType:this.type},a);return f&&(this.timerId=setTimeout(function(){v.timeoutCbs[w].isTimeout=!0;for(var C in v.timeoutCbs[w].callbacks)v.timeoutCbs[w].callbacks[C].call(null),v.timeoutCbs[w].callbacks.splice(C,1)},f)),Wd(S),{onResult:function(C){return v.resultCbs[w].result?(C(v.resultCbs[w].result),this):(!v.timeoutCbs[w].isTimeout&&v.resultCbs[w].callbacks.push(C),this)},onTimeout:function(C){return v.timeoutCbs[w].isTimeout?(C(),this):(!v.resultCbs[w].result&&v.timeoutCbs[w].callbacks.push(C),this)}}},Xi.prototype.onAppNotify=function(a){this.appCallJsCallback=a},Xi.prototype.notifyApp=function(a,f){var v=K({callType:this.type},a);return f&&(v.message_id=f),Wd(v)},dl.prototype={double:function(){},getAppData:function(){},hasAppBridge:function(){return R.bridge.bridge_info.support_two_way_call},init:function(){},jsCallApp:function(){},requestToApp:function(a){this.bridge.call(a,a.timeout.time).onResult(function(f){n(a.callback)&&a.callback(f)}).onTimeout(function(){n(a.timeout.callback)&&a.timeout.callback()})}};var Dr={isSeachHasKeyword:function(){return it(location.href,"sa-request-id")!==""&&(typeof sessionStorage.getItem("sensors-visual-mode")=="string"&&sessionStorage.removeItem("sensors-visual-mode"),!0)},hasKeywordHandle:function(){var a=location.href,f=it(a,"sa-request-id")||null,v=it(a,"sa-request-type")||null,w=it(a,"sa-request-url")||null;if(tr.setNotice(w),oo.isSupport())if(w!==null&&sessionStorage.setItem("sensors_heatmap_url",w),sessionStorage.setItem("sensors_heatmap_id",f),v!==null)v==="1"||v==="2"||v==="3"?sessionStorage.setItem("sensors_heatmap_type",v):v=null;else{var S=sessionStorage.getItem("sensors_heatmap_type");v=S!==null?S:null}this.isReady(f,v)},isReady:function(a,f,v){R.para.heatmap_url?Zi({success:function(){setTimeout(function(){typeof sa_jssdk_heatmap_render<"u"&&(sa_jssdk_heatmap_render(R,a,f,v),typeof console=="object"&&typeof console.log=="function"&&(R.heatmap_version&&R.heatmap_version===R.lib_version||Qe("heatmap.js与sensorsdata.js版本号不一致，可能存在风险!")))},0)},error:function(){},type:"js",url:R.para.heatmap_url}):gt("没有指定heatmap_url的路径")},isStorageHasKeyword:function(){return oo.isSupport()&&typeof sessionStorage.getItem("sensors_heatmap_id")=="string"},storageHasKeywordHandle:function(){tr.setNotice(),Dr.isReady(sessionStorage.getItem("sensors_heatmap_id"),sessionStorage.getItem("sensors_heatmap_type"),location.href)},isWindowNameHasKeyword:function(){try{var a=JSON.parse(window.name),f=b(a["sa-request-page-url"])?g(a["sa-request-page-url"]):null;return a["sa-request-id"]&&b(a["sa-request-id"])&&f===location.href}catch{return!1}},windowNameHasKeywordHandle:function(){function a(C){var O=f[C];return b(O)?g(O):null}var f=JSON.parse(window.name),v=a("sa-request-id"),w=a("sa-request-type"),S=a("sa-request-url");tr.setNotice(S),oo.isSupport()&&(S!==null&&sessionStorage.setItem("sensors_heatmap_url",S),sessionStorage.setItem("sensors_heatmap_id",v),w!==null?w==="1"||w==="2"||w==="3"?sessionStorage.setItem("sensors_heatmap_type",w):w=null:w=sessionStorage.getItem("sensors_heatmap_type")!==null?sessionStorage.getItem("sensors_heatmap_type"):null),Dr.isReady(v,w)}},Mr={isStorageHasKeyword:function(){return oo.isSupport()&&typeof sessionStorage.getItem("sensors-visual-mode")=="string"},isSearchHasKeyword:function(){return(sc("sa-visual-mode")===!0||sc("sa-visual-mode")==="true")&&(typeof sessionStorage.getItem("sensors_heatmap_id")=="string"&&sessionStorage.removeItem("sensors_heatmap_id"),!0)},loadVtrack:function(){Zi({success:function(){},error:function(){},type:"js",url:R.para.vtrack_url?R.para.vtrack_url:Rd()+"//static.sensorsdata.cn/sdk/"+R.lib_version+"/vtrack.min.js"})},messageListener:function(a){function f(w){return pi(w)?Qs(w):(gt("可视化模式检测 URL 失败"),!1)}if(!a||!a.data||a.data.source!=="sa-fe")return!1;if(a.data.type==="v-track-mode"){if(a.data.data&&a.data.data.isVtrack)if(oo.isSupport()&&sessionStorage.setItem("sensors-visual-mode","true"),a.data.data.userURL&&location.href.match(/sa-visual-mode=true/)){var v=f(a.data.data.userURL);v&&(window.location.href=v)}else Mr.loadVtrack();window.removeEventListener("message",Mr.messageListener,!1)}},removeMessageHandle:function(){window.removeEventListener&&window.removeEventListener("message",Mr.messageListener,!1)},verifyVtrackMode:function(){window.addEventListener&&window.addEventListener("message",Mr.messageListener,!1),Mr.postMessage()},postMessage:function(){try{window.parent&&window.parent.postMessage&&window.parent.postMessage({source:"sa-web-sdk",type:"v-is-vtrack",data:{sdkversion:Ol}},"*")}catch{gt("浏览器版本过低，不支持 postMessage API")}},notifyUser:function(){var a=function(f){return!(!f||!f.data||f.data.source!=="sa-fe")&&void(f.data.type==="v-track-mode"&&(f.data.data&&f.data.data.isVtrack&&alert("当前版本不支持，请升级部署神策数据治理"),window.removeEventListener("message",a,!1)))};window.addEventListener&&window.addEventListener("message",a,!1),Mr.postMessage()}},Im=["setItem","deleteItem","getAppStatus","track","quick","register","registerPage","registerOnce","trackSignup","setProfile","setOnceProfile","appendProfile","incrementProfile","deleteProfile","unsetProfile","identify","login","logout","trackLink","clearAllRegister","clearPageRegister","bind","unbind","loginWithKey"],Rm={track:function(a,f,v){},quick:function(a,f,v,w){},register:function(a){},registerPage:function(a){},registerOnce:function(a){},clearAllRegister:function(a){},trackSignup:function(a,f,v,w){},setProfile:function(a,f){},setOnceProfile:function(a,f){},appendProfile:function(a,f){},incrementProfile:function(a,f){},deleteProfile:function(a){},unsetProfile:function(a,f){},identify:function(a,f){},login:function(a,f){},logout:function(a){},trackLink:function(a,f,v){},deleteItem:function(a,f){},setItem:function(a,f,v){},getAppStatus:function(a){},clearPageRegister:function(a){}};_i.prototype.process=function(a,f){if(!(a&&a in this.processDef))return void gt("process ["+a+"] is not supported");var v=this.registeredInterceptors[a];if(v&&L(v)&&v.length>0)for(var w={current:0,total:v.length},S=new _r(f,w,R),C=0;C<v.length;C++)try{if(w.current=C+1,f=v[C].call(null,f,S)||f,S.cancellationToken.getCanceled())break;if(S.cancellationToken.getStopped())return}catch(O){gt("interceptor error:"+O)}return this.processDef[a]&&this.processDef[a]in this.processDef&&(f=this.process(this.processDef[a],f)),f},_i.prototype.registerStageImplementation=function(a){a&&a.init&&n(a.init)&&(a.init(this),a.interceptor&&this.registerInterceptor(a.interceptor))},_i.prototype.registerInterceptor=function(a){if(a)for(var f in a){var v=a[f];if(v&&i(v)&&n(v.entry)){Qn(v.priority)||(v.priority=Number.MAX_VALUE),this.registeredInterceptors[f]||(this.registeredInterceptors[f]=[]);var w=this.registeredInterceptors[f];v.entry.priority=v.priority,w.push(v.entry),w.sort(function(S,C){return S.priority-C.priority})}}};var ls={basicProps:"extendProps",extendProps:"formatData",formatData:"finalAdjustData",finalAdjustData:null},Ah=new _i(ls),Om={send:null},Nl=new _i(Om),Ph={getUtmData:null,callSchema:null},Lh=new _i(Ph),Dm={webClickEvent:null,webStayEvent:null},Ih=new _i(Dm),Pc={buildDataStage:function(a){a&&Ah.registerInterceptor(a)},businessStage:function(a){a&&Lh.registerInterceptor(a)},sendDataStage:function(a){a&&Nl.registerInterceptor(a)},viewStage:function(a){a&&Ih.registerInterceptor(a)}},us={stage:null,init:function(a){this.stage=a}},Rh={stage:null,init:function(a){this.stage=a},interceptor:{send:{entry:function(a){return a}}}},ki={};ki.buildData=function(a){return Ld(a)},ki.sendData=function(a,f){var v=Ed(a.properties),w={server_url:R.para.server_url,data:a,config:v||{},callback:f};Ba(w),R.log(a)},ki.encodeTrackData=function(a){return Cd(a)},ki.getUtmData=function(){return Qd()};var Oh={webClickEvent:{entry:function(a,f){var v=f.sensors;a.tagName==="a"&&v.para.heatmap&&v.para.heatmap.isTrackLink===!0?v.trackLink({event:a.event,target:a.target},"$WebClick",a.props):v.track("$WebClick",a.props,a.callback)}},webStayEvent:{entry:function(a,f){var v=f.sensors;v.track("$WebStay",a)}}},Lc=window.sensors_data_pre_config,Ic=!!Ml.isObject(Lc)&&Lc.is_compliance_enabled;R.init=function(a){return Cn.sdk.emit("beforeInit"),!(R.readyState&&R.readyState.state&&R.readyState.state>=2)&&(Ic&&(Vt(!0),lc()),Cn.initSystemEvent(),R.setInitVar(),R.readyState.setState(2),R.initPara(a),Cn.sdk.emit("initPara"),Cn.sdk.emit("afterInitPara"),Cn.sdk.emit("initAPI"),Cn.sdk.emit("afterInitAPI"),R.detectMode(),Dg(),Cn.sdk.emit("afterInit"),void Cn.sdk.emit("ready"))},Ic?Vt(!1):(Vt(!0),lc());var cr,Fl,cs,on,fs,$l,fr,Ci,Ti,fo,Mn,wa,ot,dr,hr,Ai,Bl,ds,Mm="1.25.4",Nr={init:function(a){var f=a._.isString,v=a._.rot13defs,w=a._.dfmapping,S="data:enc;",C="dfm-enc-";a.ee.sdk.on("afterInitPara",function(){a.kit.userEncrypt=function(O){return C+w(O)},a.kit.userDecrypt=function(O){return O.indexOf(S)===0?(O=O.substring(S.length),O=v(O)):O.indexOf(C)===0&&(O=O.substring(C.length),O=w(O)),O},a.kit.userDecryptIfNeeded=function(O){return!f(O)||O.indexOf(S)!==0&&O.indexOf(C)!==0||(O=a.kit.userDecrypt(O)),O}})},plugin_name:"UserEncryptDefault"},Nm=Mg(Nr),Ul="1.25.4",Rc={sd:null,init:function(a){if(this.sd||(this.sd=a,!this.sd||!this.sd._))return!1;var f=this.sd._.cookie.get("sensors_amp_id"),v=this.sd.store._state.distinct_id;if(f&&f.length>0){var w=f.slice(0,4)==="amp-";if(f!==v){if(!w)return!1;this.sd.store._state.first_id?(this.sd.identify(f,!0),this.sd.saEvent.send({original_id:f,distinct_id:v,type:"track_signup",event:"$SignUp",properties:{}},null),this.setAmpId(v)):this.sd.identify(f,!0)}}else this.setAmpId(v);this.addListener()},addListener:function(){var a=this;this.sd.events.on("changeDistinctId",function(f){a.setAmpId(f)}),this.sd.events.isReady()},setAmpId:function(a){this.sd._.cookie.set("sensors_amp_id",a)}},Dh=Fg(Rc,"Amp","sdkReady"),Kr=window.SensorsData_App_Visual_Bridge,jn=Kr&&Kr.sensorsdata_visualized_mode,Sa=Kr&&Kr.sensorsdata_visualized_alert_info,Vl=Kr&&Kr.sensorsdata_hover_web_nodes,Oc={isVerify:function(){return jn&&(jn===!0||jn.call(Kr))},commands:{app_alert:$g,visualized_track:dc,page_info:dc,sensorsdata_get_app_visual_config:gl}},Hl="1.25.4",Dc={init:function(a){on=a,fs=on&&on._,$l=on&&on.log||console&&console.log||function(){},th()},handleCommand:pc},zl=eh(Dc,"AndroidBridge","sdkAfterInitPara"),Zr=window.SensorsData_App_Visual_Bridge,ho=Zr&&Zr.sensorsdata_visualized_mode,jl=Zr&&Zr.sensorsdata_visualized_alert_info,xa=Zr&&Zr.sensorsdata_hover_web_nodes,Mh={isVerify:function(){return ho&&(ho===!0||ho.call(Zr))},commands:{app_alert:nh,visualized_track:rh,page_info:rh,sensorsdata_get_app_visual_config:gc}},ja="1.25.4",Mc={init:function(a){Mn=a,wa=Mn&&Mn._,ot=Mn&&Mn.log||console&&console.log||function(){},yr()},handleCommand:Xo},Nc=ah(Mc,"AndroidObsoleteBridge","sdkAfterInitPara"),Fc="1.25.4",Sr={event_list:[],latest_event_initial_time:null,max_save_time:2592e6,init:function(a,f){function v(){return dr=hr._,Ai=hr.store,!!dr.localStorage.isSupport()&&(hr.para.max_string_length=1024,w.eventList.init(),w.addLatestChannelUrl(),void w.addIsChannelCallbackEvent())}if(hr||!a)return!1;f=f||{},Bl=f.cookie_name||"sensorsdata2015jssdkchannel",hr=a;var w=this;v()},addIsChannelCallbackEvent:function(){hr.registerPage({$is_channel_callback_event:function(a){if(dr.isObject(a)&&a.event&&a.event!=="$WebClick"&&a.event!=="$pageview"&&a.event!=="$WebStay"&&a.event!=="$SignUp")return!Sr.eventList.hasEvent(a.event)&&(Sr.eventList.add(a.event),!0)}})},addLatestChannelUrl:function(){var a=this.getUrlDomain(),f=this.cookie.getChannel();if(a==="url解析失败")this.registerAndSave({_sa_channel_landing_url:"",_sa_channel_landing_url_error:"url的domain解析失败"});else if(dr.isReferralTraffic(document.referrer)){var v=dr.getQueryParam(location.href,"sat_cf");dr.isString(v)&&v.length>0?(this.registerAndSave({_sa_channel_landing_url:location.href}),Sr.channelLinkHandler()):this.registerAndSave({_sa_channel_landing_url:""})}else f?hr.registerPage(f):hr.registerPage({_sa_channel_landing_url:"",_sa_channel_landing_url_error:"取值异常"})},registerAndSave:function(a){hr.registerPage(a),this.cookie.saveChannel(a)},cookie:{getChannel:function(){var a=hr.kit.userDecryptIfNeeded(dr.cookie.get(Bl));return a=dr.safeJSONParse(a),!(!dr.isObject(a)||!a.prop)&&a.prop},saveChannel:function(a){var f={prop:a},v=JSON.stringify(f);hr.para.encrypt_cookie&&(v=hr.kit.userEncrypt(v)),dr.cookie.set(Bl,v)}},channelLinkHandler:function(){this.eventList.reset(),hr.track("$ChannelLinkReaching")},getUrlDomain:function(){var a=dr.info.pageProp.url_domain;return a===""&&(a="url解析失败"),a},eventList:{init:function(){var a=this.get(),f=new Date().getTime();if(a&&dr.isNumber(a.latest_event_initial_time)&&dr.isArray(a.eventList)){var v=f-a.latest_event_initial_time;v>0&&v<Sr.max_save_time?(Sr.event_list=a.eventList,Sr.latest_event_initial_time=a.latest_event_initial_time):this.reset()}else this.reset()},get:function(){var a={};try{a=Ai.readObjectVal("sawebjssdkchannel")}catch(f){hr.log(f)}return a},add:function(a){Sr.event_list.push(a),this.save()},save:function(){var a={latest_event_initial_time:Sr.latest_event_initial_time,eventList:Sr.event_list};Ai.saveObjectVal("sawebjssdkchannel",a)},reset:function(){Sr.event_list=[],Sr.latest_event_initial_time=new Date().getTime(),this.save()},hasEvent:function(a){var f=!1;return dr.each(Sr.event_list,function(v){v===a&&(f=!0)}),f}}},Fm=Vg(Sr,"SensorsChannel","sdkAfterInitAPI"),$m="1.25.4",$c=function(){var a={};return typeof document.hidden<"u"?(a.hidden="hidden",a.visibilityChange="visibilitychange"):typeof document.msHidden<"u"?(a.hidden="msHidden",a.visibilityChange="msvisibilitychange"):typeof document.webkitHidden<"u"&&(a.hidden="webkitHidden",a.visibilityChange="webkitvisibilitychange"),a};ds=$c().hidden;var Gl,Pi,tn,po,Gn,Ot,go,Bc,mo={android:/Android/i,iOS:/iPhone|iPad|iPod/i},vo=function(){for(var a in mo)if(navigator.userAgent.match(mo[a]))return a;return""},Uc=vo(),Nh=function(){return mo.hasOwnProperty(Uc)},Vc=function(a){return a!=null&&Object.prototype.toString.call(a)=="[object Object]"},Fh=function(a){var f=/\/sd\/(\w+)\/(\w+)$/;return a.match(f)},_o=function(a){var f=a._.URL(a.para.server_url);return{origin:f.origin,project:f.searchParams.get("project")||"default"}},hs=function(a,f,v){a.log("尝试唤起 android app");var w=f;a.log("唤起APP的地址："+w),window.location=w,a.timer=setTimeout(function(){var S=sh();return a.log("hide:"+ds+":"+document[ds]),S?(a.log("The page is hidden, stop navigating to download page"),!1):(a.log("App可能未安装，跳转到下载地址"),void(window.location=v))},a.timeout)},Bm=function(a,f,v){a.log("尝试唤起 iOS app:"+f),window.location.href=f,a.timer=setTimeout(function(){var w=sh();return w?(a.log("The page is hidden, stop navigating to download page"),!1):(a.log("App可能未安装，跳转到下载地址"),void(window.location.href=v))},a.timeout),a.log("new timer:"+a.timer)},yo={key:null,timer:null,sd:null,data:null,timeout:2500,apiURL:"{origin}/sdk/deeplink/param?key={key}&system_type=JS&project={project}",init:function(a){if(this.sd)return this.log("deeplink已经初始化"),!1;if(this.sd=a,this.log("deeplink init called"),this.sd===null)return this.log("神策JS SDK未成功引入"),!1;var f={};if(arguments.length>0&&(arguments.length===1&&Vc(arguments[0])?f=arguments[0]:arguments.length>=2&&Vc(arguments[1])&&(f=arguments[1])),!Nh())return this.log("不支持当前系统，目前只支持Android和iOS"),!1;if(Vc(f)&&this.sd._.isNumber(f.timeout)&&f.timeout>=2500&&(this.timeout=f.timeout),!this.sd.para.server_url)return this.log("神策JS SDK配置项server_url未正确配置"),!1;var v=_o(this.sd);this.apiURL=this.apiURL.replace("{origin}",v.origin).replace("{project}",v.project);var w=this.sd._.getQueryParam(window.location.href,"deeplink");if(!w)return this.log("当前页面缺少deeplink参数"),!1;w=window.decodeURIComponent(w);var S=Fh(w);return S?(this.key=S[2],this.apiURL=this.apiURL.replace("{key}",window.encodeURIComponent(S[2])),this.sd._.ajax({url:this.apiURL,type:"GET",cors:!0,credentials:!1,success:function(C){return C.errorMsg?(yo.log("API报错："+C.errorMsg),!1):(yo.data=C,yo.log("API查询成功，数据："+JSON.stringify(C,null,"  ")),void(this.data.app_key&&(this.data.android_info&&this.data.android_info.url_schemes&&(this.data.android_info.url_schemes+="://sensorsdata/sd/"+this.data.app_key+"/"+this.key),this.data.ios_info&&this.data.ios_info.url_schemes&&(this.data.ios_info.url_schemes+="://sensorsdata/sd/"+this.data.app_key+"/"+this.key))))}.bind(this),error:function(){yo.log("API查询出错")}}),void this.addListeners()):(this.log("当前页面的deeplink参数无效"),!1)},openDeepLink:function(){if(this.log("openDeeplink()"),!this.data)return this.log("没有Deep link数据!"),!1;if(Uc==="iOS"){this.log("当前系统是iOS");var a=this.sd&&this.sd._&&this.sd._.getIOSVersion()>=9&&this.data.ios_info.ios_wake_url?this.data.ios_info.ios_wake_url:this.data.ios_info.url_schemes;this.log("唤起APP的地址："+a),Bm(this,a,this.data.ios_info.download_url)}else this.log("当前系统是 android"),hs(this,this.data.android_info.url_schemes,this.data.android_info.download_url)},log:function(a){this.sd&&this.sd.log(a)},addListeners:function(){var a=$c().visibilityChange;a&&document.addEventListener(a,function(){clearTimeout(this.timer),this.log("visibilitychange, clear timeout:"+this.timer)}.bind(this),!1),window.addEventListener("pagehide",function(){this.log("page hide, clear timeout:"+this.timer),clearTimeout(this.timer)}.bind(this),!1)}},$h=jg(yo,"Deeplink","sdkReady"),Wl="1.25.4",Hc={init:function(a){tn=a,po=tn&&tn._,Gn=tn&&tn.log||console&&console.log||function(){},_c()},handleCommand:Va},ps=Wg(Hc,"IOSBridge","sdkAfterInitPara"),zc="1.25.4",gs={init:function(a){Ot=a,go=Ot&&Ot._,Bc=Ot&&Ot.log||console&&console.log||function(){},Kg()}},Bh=Yg(gs,"IOSObsoleteBridge","sdkAfterInitPara"),Uh="1.25.4",ql=5e3,Vh=432e3;hn.prototype.init=function(a,f){if(a){if(this.sd=a,this._=this.sd._,f){this.option=f;var v=f.heartbeat_interval_time;v&&(this._.isNumber(v)||this._.isNumber(1*v))&&1*v>0&&(this.heartbeat_interval_time=1e3*v);var w=f.max_duration;w&&(this._.isNumber(w)||this._.isNumber(1*w))&&1*w>0&&(this.max_duration=w)}this.page_id=Number(String(this._.getRandom()).slice(2,5)+String(this._.getRandom()).slice(2,4)+String(new Date().getTime()).slice(-4)),this.addEventListener(),document.hidden===!0?this.page_show_status=!1:this.addHeartBeatInterval(),this.log("PageLeave初始化完毕")}else this.log("神策JS SDK未成功引入")},hn.prototype.log=function(a){this.sd&&this.sd.log(a)},hn.prototype.refreshPageEndTimer=function(){var a=this;this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(function(){a.page_hidden_status=!1},ql)},hn.prototype.hiddenStatusHandler=function(){clearTimeout(this.timer),this.timer=null,this.page_hidden_status=!1},hn.prototype.pageStartHandler=function(){this.start_time=+new Date,document.hidden?this.page_show_status=!1:this.page_show_status=!0,this.url=location.href,this.title=document.title},hn.prototype.pageEndHandler=function(){if(this.page_hidden_status!==!0){var a=this.getPageLeaveProperties();this.page_show_status===!1&&delete a.event_duration,this.page_show_status=!1,this.page_hidden_status=!0,this.isCollectUrl(this.url)&&this.sd.track("$WebPageLeave",a),this.refreshPageEndTimer(),this.delHeartBeatData()}},hn.prototype.addEventListener=function(){this.addPageStartListener(),this.addPageSwitchListener(),this.addSinglePageListener(),this.addPageEndListener()},hn.prototype.addPageStartListener=function(){var a=this;"onpageshow"in window&&this._.addEvent(window,"pageshow",function(){a.pageStartHandler(),a.hiddenStatusHandler()})},hn.prototype.isCollectUrl=function(a){return typeof this.option.isCollectUrl!="function"||typeof a!="string"||a===""||this.option.isCollectUrl(a)},hn.prototype.addSinglePageListener=function(){var a=this;this.sd.ee&&this.sd.ee.spa.prepend("switch",function(f){f!==location.href&&(a.url=f,a.pageEndHandler(),a.stopHeartBeatInterval(),a.current_page_url=a.url,a.pageStartHandler(),a.hiddenStatusHandler(),a.addHeartBeatInterval())})},hn.prototype.addPageEndListener=function(){var a=this;this._.each(["pagehide","beforeunload","unload"],function(f){"on"+f in window&&a._.addEvent(window,f,function(){a.pageEndHandler(),a.stopHeartBeatInterval()})})},hn.prototype.addPageSwitchListener=function(){var a=this;this._.listenPageState({visible:function(){a.pageStartHandler(),a.hiddenStatusHandler(),a.addHeartBeatInterval()},hidden:function(){a.url=location.href,a.title=document.title,a.pageEndHandler(),a.stopHeartBeatInterval()}})},hn.prototype.addHeartBeatInterval=function(){this._.localStorage.isSupport()&&this.startHeartBeatInterval()},hn.prototype.startHeartBeatInterval=function(){var a=this;this.heartbeat_interval_timer&&this.stopHeartBeatInterval();var f=!0;this.isCollectUrl(this.url)||(f=!1),this.heartbeat_interval_timer=setInterval(function(){f&&a.saveHeartBeatData()},this.heartbeat_interval_time),f&&this.saveHeartBeatData("is_first_heartbeat"),this.reissueHeartBeatData()},hn.prototype.stopHeartBeatInterval=function(){clearInterval(this.heartbeat_interval_timer),this.heartbeat_interval_timer=null},hn.prototype.saveHeartBeatData=function(a){var f=this.getPageLeaveProperties(),v=new Date;f.$time=v,a==="is_first_heartbeat"&&(f.event_duration=3.14);var w=this.sd.kit.buildData({type:"track",event:"$WebPageLeave",properties:f});try{this.sd.bridge.bridge_info.verify_success==="success"&&(w.properties.$time=1*v)}catch(S){this.log(S.message)}w.heartbeat_interval_time=this.heartbeat_interval_time,this.sd.store.saveObjectVal(this.storage_name+"-"+this.page_id,w)},hn.prototype.delHeartBeatData=function(a){this._.localStorage.isSupport()&&this._.localStorage.remove(a||this.storage_name+"-"+this.page_id)},hn.prototype.reissueHeartBeatData=function(){for(var a=window.localStorage.length,f=a-1;f>=0;f--){var v=window.localStorage.key(f);if(v&&v!==this.storage_name+"-"+this.page_id&&v.indexOf(this.storage_name+"-")===0){var w=this.sd.store.readObjectVal(v);this._.isObject(w)&&1*new Date-w.time>w.heartbeat_interval_time+5e3&&(delete w.heartbeat_interval_time,this.sd.kit.sendData(w),this.delHeartBeatData(v))}}},hn.prototype.getPageLeaveProperties=function(){var a=(+new Date-this.start_time)/1e3;(isNaN(a)||a<0||a>this.max_duration)&&(a=0),a=Number(a.toFixed(3));var f=this._.getReferrer(this.current_page_url),v=document.documentElement&&document.documentElement.scrollTop||window.pageYOffset||document.body&&document.body.scrollTop||0;v=Math.round(v)||0;var w={$title:this.title,$url:this._.getURL(this.url),$url_path:this._.getURLPath(this._.URL(this.url).pathname),$referrer_host:f?this._.getHostname(f):"",$referrer:f,$viewport_position:v};return a!==0&&(w.event_duration=a),w=this._.extend(w,this.option.custom_props)};var jc=new hn,Um=Xg(jc,"PageLeave","sdkReady"),Hh="1.25.4",sa=!1,zh={init:function(a,f){function v(O,U){if(O.getEntries&&typeof O.getEntries=="function"){for(var se=O.getEntries(),ye=null,Te=0;Te<se.length;Te++)"transferSize"in se[Te]&&(ye+=se[Te].transferSize);a._.isNumber(ye)&&ye>=0&&ye<10737418240&&(U.$page_resource_size=Number((ye/1024).toFixed(3)))}}function w(O){var U=0;if(O.timing){var se=O.timing;se.fetchStart!==0&&a._.isNumber(se.fetchStart)&&se.domContentLoadedEventEnd!==0&&a._.isNumber(se.domContentLoadedEventEnd)?U=se.domContentLoadedEventEnd-se.fetchStart:a.log("performance 数据获取异常")}return U}function S(O){var U=0;if(a._.isFunction(O.getEntriesByType)){var se=O.getEntriesByType("navigation")||[{}];U=(se[0]||{}).domContentLoadedEventEnd||0}return U}function C(){var O=0,U=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance,se={$url:a._.getURL(),$title:document.title,$url_path:a._.getURLPath(),$referrer:a._.getReferrer(null,!0)};if(U?(O=S(U)||w(U),v(U,se)):a.log("浏览器未支持 performance API."),O>0){var ye=a._.isObject(f)&&f.max_duration||1800;O=Number((O/1e3).toFixed(3)),(!a._.isNumber(ye)||ye<=0||O<=ye)&&(se.event_duration=O)}sa||(a.track("$WebPageLoad",se),sa=!0),window.removeEventListener?window.removeEventListener("load",C):window.detachEvent&&window.detachEvent("onload",C)}document.readyState=="complete"?C():window.addEventListener?window.addEventListener("load",C):window.attachEvent&&window.attachEvent("onload",C)}},jh=Z(zh,"PageLoad","sdkReady");ne.prototype.init=function(a){if(a){this.sd=a,this._=a._,this.log=a.log;var f=this;a.registerInterceptor("buildDataStage",{extendProps:{priority:0,entry:function(v){return fe(v,f)}}})}else this.log("神策JS SDK未成功引入")},ne.prototype.register=function(a){return this.sd?void(this._.isObject(a)&&this._.isArray(a.events)&&a.events.length>0&&this._.isObject(a.properties)&&!this._.isEmptyObject(a.properties)?this.customRegister.push(a):this.log("RegisterProperties: register 参数错误")):void this.log("神策JS SDK未成功引入")},ne.prototype.hookRegister=function(a){return this.sd?void(this._.isFunction(a)?this.customRegister.push(a):this.log("RegisterProperties: hookRegister 参数错误")):void this.log("神策JS SDK未成功引入")};var Vm="1.25.4";ne.prototype.plugin_name="RegisterProperties";var Ga,Gh,Hm=new ne,Ea=Et(Hm),Gc="1.25.4",Li=window.console&&window.console.log||function(){},Wc={init:function(a){return Ga=a,Li=Ga&&Ga.log||Li,a&&a.kit&&a.kit.buildData?(Gh=Ga.kit.buildData,Ga.kit.buildData=em,void Li("RegisterPropertyPageHeight 插件初始化完成")):void Li("RegisterPropertyPageHeight 插件初始化失败,当前主sdk不支持 RegisterPropertyPageHeight 插件，请升级主sdk")}},Yl=yc(Wc,"RegisterPropertyPageHeight","sdkReady"),bo="1.25.4",Fe={};Fe.getPart=function(a){var f=!1,v=this.option.length;if(v){for(var w=0;w<v;w++)if(a.indexOf(this.option[w].part_url)>-1)return!0}return f},Fe.getPartHash=function(a){var f=this.option.length,v=!1;if(f){for(var w=0;w<f;w++)if(a.indexOf(this.option[w].part_url)>-1)return this.option[w].after_hash}return!!v},Fe.getCurrenId=function(){var a=this.store.getDistinctId()||"",f=this.store.getFirstId()||"";this._.urlSafeBase64&&this._.urlSafeBase64.encode?a=a?this._.urlSafeBase64.trim(this._.urlSafeBase64.encode(this._.base64Encode(a))):"":this._.rot13obfs&&(a=a?this._.rot13obfs(a):"");var v=f?"f"+a:"d"+a;return encodeURIComponent(v)},Fe.rewriteUrl=function(a,f){var v=this,w=/([^?#]+)(\?[^#]*)?(#.*)?/,S=w.exec(a),C="";if(S){var O,U=S[1]||"",se=S[2]||"",ye=S[3]||"",Te="_sasdk="+this.getCurrenId(),rt=function(Lt){var pn=Lt.split("&"),$r=[];return v._.each(pn,function(eu){eu.indexOf("_sasdk=")>-1?$r.push(Te):$r.push(eu)}),$r.join("&")};if(this.getPartHash(a)){O=ye.indexOf("_sasdk");var et=ye.indexOf("?");C=et>-1?O>-1?U+se+"#"+ye.substring(1,O)+rt(ye.substring(O,ye.length)):U+se+ye+"&"+Te:U+se+"#"+ye.substring(1)+"?"+Te}else{O=se.indexOf("_sasdk");var Yt=/^\?(\w)+/.test(se);C=Yt?O>-1?U+"?"+rt(se.substring(1))+ye:U+se+"&"+Te+ye:U+"?"+Te+ye}return f&&(f.href=C),C}},Fe.getUrlId=function(){var a=location.href.match(/_sasdk=([aufd][^\?\#\&\=]+)/);if(this._.isArray(a)&&a[1]){var f=decodeURIComponent(a[1]);return!f||f.substring(0,1)!=="f"&&f.substring(0,1)!=="d"||(this._.urlSafeBase64&&this._.urlSafeBase64.isUrlSafeBase64&&this._.urlSafeBase64.isUrlSafeBase64(f)?f=f.substring(0,1)+this._.base64Decode(this._.urlSafeBase64.decode(f.substring(1))):this._.rot13defs&&(f=f.substring(0,1)+this._.rot13defs(f.substring(1)))),f}return""},Fe.setRefferId=function(a){var f=this.store.getDistinctId(),v=this.getUrlId();if(v&&v!==""){var w=v.substring(0,1)==="a"||v.substring(0,1)==="d";v=v.substring(1),v!==f&&(w?(this.sd.identify(v,!0),this.store.getFirstId()&&this.sd.saEvent.send({original_id:v,distinct_id:f,type:"track_signup",event:"$SignUp",properties:{}},null)):this.store.getFirstId()&&!a.re_login||this.sd.login(v))}},Fe.addListen=function(){var a=this,f=function(v){var w,S,C=v.target,O=C.tagName.toLowerCase(),U=C.parentNode;if(O==="a"&&C.href||U&&U.tagName&&U.tagName.toLowerCase()==="a"&&U.href){O==="a"&&C.href?(w=C.href,S=C):(w=U.href,S=U);var se=a._.URL(w),ye=se.protocol;ye!=="http:"&&ye!=="https:"||a.getPart(w)&&a.rewriteUrl(w,S)}};a._.addEvent(document,"mousedown",f),window.PointerEvent&&"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>=0&&a._.addEvent(document,"pointerdown",f)},Fe.init=function(a,f){function v(w){for(var S=w.length,C=[],O=0;O<S;O++)/[A-Za-z0-9]+\./.test(w[O].part_url)&&Object.prototype.toString.call(w[O].after_hash)=="[object Boolean]"?C.push(w[O]):a.log("linker 配置的第 "+(O+1)+" 项格式不正确，请检查参数格式！");return C}return this.sd=a,this._=a._,this.store=a.store,this.para=a.para,this._.isObject(f)&&this._.isArray(f.linker)&&f.linker.length>0?(this.setRefferId(f),this.addListen(),this.option=f.linker,void(this.option=v(this.option))):void a.log("请配置打通域名参数！")};var xr,Ht,Er,Wn,ka,Nn,nn,Fr,ms,kr,vs,rr,Kl,zm=tm(Fe,"SiteLinker","sdkReady"),jm="utm_source utm_medium utm_campaign utm_content utm_term",Ca="1.25.4",ar={init:function(a){function f(){var v=jm.split(" "),w="",S={};return xr._.isArray(xr.para.source_channel)&&xr.para.source_channel.length>0&&(v=v.concat(xr.para.source_channel),v=xr._.unique(v)),xr._.each(v,function(C){w=xr._.getQueryParam(location.href,C),w.length&&(S[C]=w)}),S}a&&!xr&&(xr=a,xr.registerInterceptor("businessStage",{getUtmData:{priority:0,entry:function(){return f()}}}))}},Zl=yl(ar,"Utm","sdkAfterInitPara"),Gm="1.25.4",_s=!1,Jl=null,Wm={init:function(a){Jl=a,Jl.disableSDK=bl,Jl.enableSDK=rm,Jl.getDisabled=am}},wo=ch(Wm,"DisableSDK","sdkInitAPI"),Wh="1.25.4",qh={plugin_name:"DebugSender",init:function(a){Ht=a,Er=Ht._,dh()}},Yh=Ha(qh),qm="1.25.4",Ym={plugin_name:"JsappSender",init:function(a){Wn=a,ka=Wn._,yi()}},Kh=ph(Ym),Zh="1.25.4",ys=null,Km={plugin_name:"BatchSender",init:function(a){Nn=a,nn=Nn._,bc()}},Xl=lm(Km),Jh="1.25.4",bs={plugin_name:"BeaconSender",init:function(a){Fr=a,ms=Fr._,fm()}},Ql=cm(bs),Xh="1.25.4",Qh={plugin_name:"AjaxSender",init:function(a){kr=a,vs=kr._,ao()}},ws=hm(Qh),ep="1.25.4",la={plugin_name:"ImageSender",init:function(a){rr=a,Kl=rr._,mm()}},Wa=Pl(la),Tn=null,ir=null,Ss=[],Zm={init:function(a){a&&(Tn=a,ir=Tn._,Tn.logger&&Tn.logger.appendWriter(yh),Tn.on&&Tn.on("sdkAfterInitPara",function(){for(var f=0;f<Ss.length;f++)D(Ss[f]);Ss=null}),Tn.on&&Tn.on("sdkInitAPI",function(){Tn.enableLocalLog=ym,Tn.disableLocalLog=bm}))}},tp=rs(Zm,"ConsoleLogger"),qc="sensorsdata_jssdk_debug";R.modules=R.modules||{};for(var np=[tp,Dh,zl,Nc,Fm,$h,ps,Bh,Um,jh,Ea,Yl,zm,Zl,wo,Yh,Kh,Xl,Ql,ws,Wa],rp=[tp,Nm,Zl,wo,Kh,Yh,zl,ps,Nc,Bh,Xl,Ql,ws,Wa],Ii=0;Ii<np.length;Ii++){var So=np[Ii];R._.isString(So.plugin_name)?R.modules[So.plugin_name]=So:R._.isArray(So.plugin_name)&&R._.each(So.plugin_name,function(a){R.modules[a]=So})}for(Ii=0;Ii<rp.length;Ii++)R.use(rp[Ii]);var ap=R;try{typeof window.sensorsDataAnalytic201505=="string"?(R.para=window[sensorsDataAnalytic201505].para,R._q=window[sensorsDataAnalytic201505]._q,window[sensorsDataAnalytic201505]=R,window.sensorsDataAnalytic201505=R,R.init()):typeof window.sensorsDataAnalytic201505>"u"?window.sensorsDataAnalytic201505=R:ap=window.sensorsDataAnalytic201505}catch(a){gt(a)}var Jm=ap;return Jm})})(Zj);const Fi=H1,Jj=()=>{const e=navigator.userAgent,t=/Mobile/i.test(e);return{}.VITE_PAD?"Pad":t?"Mobile":"PC"};console.log(" => 环境变量","production");const Xj={install:e=>{Fi.init({server_url:"https://dataaccess.mblock.cc/sa?project=xcsproduction",heatmap:{clickmap:"default",scroll_notice_map:"default"},is_track_single_page:!0,use_client_time:!0,show_log:!0,send_type:"ajax"}),Fi.registerPage({platform_type:Jj()}),Fi.use("PageLeave",{}),Fi.use("PageLoad",{}),Fi.quick("autoTrack"),e.provide("$sensors",Fi)}},OG=e=>{Fi.track("deviceConnect",{...e})},DG=e=>{Fi.track("startProcessing",{...e})},MG=e=>{Fi.track("Processing",{...e})};TH(ii.mobile).then(async e=>{const t=LC(),n=e5(qj);n.config.performance=!1,n.config.errorHandler=(r,i,l)=>{console.error("VUE CONFIG ERROR",r,l)},n.use(t),n.use(Q5),n.use(Uo),n.use(e),n.use(Ij),n.use(Tk),n.use(Xj),n.mount("#app"),Kj(),Bz(n),Cj(n)});window.openApi=Object.assign(window.openApi||{},{onPause:()=>{rw.saveTmp()},onBackPressed:()=>!1});export{aw as $,sG as A,si as B,Da as C,D1 as D,Zk as E,j5 as F,Xt as G,i_ as H,zi as I,Wt as J,Qp as K,l8 as L,Ye as M,Vs as N,t0 as O,s_ as P,od as Q,sr as R,G0 as S,Du as T,Ws as U,zk as V,XT as W,oz as X,kk as Y,N0 as Z,$a as _,qs as a,Mk as a$,iw as a0,Ui as a1,Zs as a2,o4 as a3,tw as a4,Vn as a5,hC as a6,Bk as a7,Dk as a8,Q8 as a9,pk as aA,ig as aB,dG as aC,oG as aD,mG as aE,vG as aF,wf as aG,J6 as aH,Tk as aI,iG as aJ,DG as aK,sn as aL,m5 as aM,Jn as aN,cG as aO,$H as aP,Rf as aQ,MG as aR,GH as aS,SG as aT,OG as aU,ff as aV,Ru as aW,rG as aX,zp as aY,Y1 as aZ,X5 as a_,ek as aa,n0 as ab,$s as ac,Vi as ad,Z_ as ae,bG as af,K5 as ag,Vf as ah,a0 as ai,g1 as aj,Bo as ak,rw as al,ib as am,sd as an,Fa as ao,iE as ap,li as aq,Hi as ar,oi as as,Fs as at,n_ as au,o_ as av,p5 as aw,Q1 as ax,mr as ay,e_ as az,Jk as b,z2 as b$,y5 as b0,H5 as b1,A5 as b2,mf as b3,Ff as b4,bC as b5,B2 as b6,X_ as b7,b_ as b8,r_ as b9,gA as bA,ni as bB,gr as bC,c1 as bD,f1 as bE,ra as bF,AA as bG,LA as bH,cA as bI,oA as bJ,sA as bK,Bu as bL,$u as bM,fA as bN,h1 as bO,j9 as bP,yG as bQ,I6 as bR,lA as bS,Z$ as bT,Lp as bU,Gt as bV,Rt as bW,l1 as bX,LG as bY,s4 as bZ,IG as b_,I0 as ba,vf as bb,Oo as bc,TE as bd,O0 as be,a_ as bf,Mu as bg,E5 as bh,wG as bi,zH as bj,OE as bk,dw as bl,q6 as bm,aG as bn,e0 as bo,t4 as bp,pt as bq,M6 as br,kj as bs,ha as bt,zs as bu,xj as bv,_u as bw,Ts as bx,uA as by,dA as bz,uG as c,TG as c0,AG as c1,kG as c2,CG as c3,PG as c4,Lz as c5,EG as c6,xG as c7,Iz as c8,_P as c9,S_ as ca,pP as cb,RG as cc,_G as cd,Nu as d,pa as e,og as f,gG as g,eb as h,pG as i,kf as j,lG as k,M1 as l,Xk as m,jf as n,kA as o,r4 as p,ii as q,Uo as r,fG as s,At as t,ln as u,wn as v,dt as w,Bt as x,Qt as y,hG as z};
