import{n as S,S as y,p as U,q as V,I as D,a6 as k,B as x,m as C,_ as B}from"../assets/index-83a10b2e.js";import{k as I,f as l,b as N,w as r,c as z,D as A,I as M,J as d,G as t,j as i,K as c,u as _,y as L}from"./xcs-vue-family-70642f71.js";import"./index-55948043.js";import"./xcs-canvas-5c2592d6.js";const K={class:"update_dialog"},Y={class:"content"},$={class:"content-title"},j={class:"new_version_title"},q={class:"new_version"},E={class:"description"},G=I({__name:"UpdateDialog",setup(J){const e=S(),p=l(()=>e.description),u=l(()=>e.version),a=N(!1),v=()=>{a.value=!1},f=()=>{window.MeApi&&window.MeApi.app.updateAppVersion()};r(()=>a.value,o=>{o&&(e.isShowed=!0)}),r(()=>e.version,o=>{o!=="latest"&&(a.value=!e.isShowed,e.isShowed=!0)});const m=async o=>{const s=await e.checkVersionUpdate(o).catch(n=>(console.log(n),!1));if(s){e.version=s.latestVersion;const n=U(V.mobile);return e.description=s.changeLog[n==="zh-CN"?"zh":"en"],s.downloadUrl&&(e.downloadUrl=s.downloadUrl[0]),!0}else return e.version="latest",!1};return z(()=>{y().get("PRIVACY_KEY",!1)&&m("test")}),(o,s)=>{const n=D,w=k,h=x,g=C;return A(),M(g,{show:a.value,"onUpdate:show":s[0]||(s[0]=b=>a.value=b),"show-confirm-button":!1,"show-cancel-button":!1,class:"van-dialog-visible van-dialog-update-log"},{default:d(()=>[t("div",K,[i(n,{name:"close",size:"24",color:"#fff",class:"close",style:{position:"absolute",top:"-40px",right:"0"},onClick:v}),i(w,{size:20}),t("div",Y,[t("div",$,[t("div",j,c(o.$t("mobile.common.discovered_new_version")),1),t("p",q,c("V"+_(u)),1)]),t("p",E,c(_(p)),1),i(h,{block:"",class:"btn",onClick:f},{default:d(()=>[L(c(o.$t("mobile.common.update_now")),1)]),_:1})])])]),_:1},8,["show"])}}});const H=B(G,[["__scopeId","data-v-0114cd32"]]);export{H as default};
