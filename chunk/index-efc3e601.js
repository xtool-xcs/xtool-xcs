import{t as Fe,T as tt,ao as Ue,b0 as nt,J as ke,y as Ae,G as ot,b1 as ze,w as st,U as it,b2 as at,b3 as lt,b4 as rt,N as Ie,a5 as me,Z as J,b5 as $e,a as ie,B as H,a7 as Me,a8 as Ne,a6 as Z,F as Se,m as oe,_ as j,u as Q,ak as ye,j as te,e as ct,b6 as Ce,d as pe,ag as We,b7 as dt,f as ut,ah as Oe,I as mt,b8 as re,b as pt}from"../assets/index-83a10b2e.js";import{k as E,j as e,b as I,f as z,w as ee,n as ft,q as se,s as Ee,v as Te,H as ae,D as R,E as N,J as o,G as c,I as W,y as F,K as h,F as q,u as S,M as ne,c as Ge,a2 as Xe,Z as _t,r as Be,o as Le,L as de,_ as ue,ac as Pe,ad as xe,a5 as vt}from"./xcs-vue-family-70642f71.js";import{G as qe,a as Ye}from"./index-ac8ea00e.js";import{u as gt,N as fe}from"./datasource-5dbe607a.js";import{C as wt,S as ht}from"./constant-2a798a0e.js";import{A as be,r as bt,b as kt,B as yt,q as $t}from"./xcs-canvas-5c2592d6.js";import{u as St}from"./systemback-e5f1562f.js";const[He,Ct]=Fe("collapse"),je=Symbol(He),Bt={border:ke,accordion:Boolean,modelValue:{type:[String,Number,Array],default:""}};var Lt=E({name:He,props:Bt,emits:["change","update:modelValue"],setup(a,{emit:r,slots:i}){const{linkChildren:v,children:L}=tt(je),b=p=>{r("change",p),r("update:modelValue",p)},y=(p,$)=>{const{accordion:B,modelValue:V}=a;b(B?p===V?"":p:$?V.concat(p):V.filter(O=>O!==p))},t=(p={})=>{if(a.accordion)return;typeof p=="boolean"&&(p={expanded:p});const{expanded:$,skipDisabled:B}=p,O=L.filter(D=>D.disabled&&B?D.expanded.value:$??!D.expanded.value).map(D=>D.itemName.value);b(O)},g=p=>{const{accordion:$,modelValue:B}=a;return $?B===p:B.includes(p)};return Ue({toggleAll:t}),v({toggle:y,isExpanded:g}),()=>{var p;return e("div",{class:[Ct(),{[nt]:a.border}]},[(p=i.default)==null?void 0:p.call(i)])}}});const _e=Ae(Lt),[Pt,ce]=Fe("collapse-item"),xt=["icon","title","value","label","right-icon"],Vt=ot({},ze,{name:st,isLink:ke,disabled:Boolean,readonly:Boolean,lazyRender:ke});var Dt=E({name:Pt,props:Vt,setup(a,{slots:r}){const i=I(),v=I(),{parent:L,index:b}=it(je);if(!L)return;const y=z(()=>{var k;return(k=a.name)!=null?k:b.value}),t=z(()=>L.isExpanded(y.value)),g=I(t.value),p=at(()=>g.value||!a.lazyRender),$=()=>{t.value?i.value&&(i.value.style.height=""):g.value=!1};ee(t,(k,n)=>{if(n===null)return;k&&(g.value=!0),(k?ft:rt)(()=>{if(!v.value||!i.value)return;const{offsetHeight:d}=v.value;if(d){const l=`${d}px`;i.value.style.height=k?"0":l,lt(()=>{i.value&&(i.value.style.height=k?l:"0")})}else $()})});const B=(k=!t.value)=>{L.toggle(y.value,k)},V=()=>{!a.disabled&&!a.readonly&&B()},O=()=>{const{border:k,disabled:n,readonly:f}=a,d=Ie(a,Object.keys(ze));return f&&(d.isLink=!1),(n||f)&&(d.clickable=!1),e(me,se({role:"button",class:ce("title",{disabled:n,expanded:t.value,borderless:!k}),"aria-expanded":String(t.value),onClick:V},d),Ie(r,xt))},D=p(()=>{var k;return Ee(e("div",{ref:i,class:ce("wrapper"),onTransitionend:$},[e("div",{ref:v,class:ce("content")},[(k=r.default)==null?void 0:k.call(r)])]),[[Te,g.value]])});return Ue({toggle:B,expanded:t,itemName:y}),()=>e("div",{class:[ce({border:b.value&&a.border})]},[O(),D()])}});const ve=Ae(Dt);const Rt={class:"device-content device-setting-wrap"},It={class:"name-label-wrap"},Ot=E({__name:"DeviceSetting",props:{ext:null,info:null,checkUpdateFirmware:null,updateDeviceSettingInfo:null,isInProcessing:{type:Boolean}},setup(a){const r=a,{t:i}=ae(),v=I([]),L=I(!1),b=I(r.info.name),y=I(!1),t=-5,g=5;ee(()=>r.info.name,d=>{b.value=d});const p=d=>d==null?void 0:d.trim(),$=()=>{L.value=!0},B=z(()=>{var l,u;const{ext:d}=r;return((u=(l=d==null?void 0:d.config)==null?void 0:l.supportUrls)==null?void 0:u.laserFaq)||""}),V=d=>{var u,s;const{ext:l}=r;d?(u=l==null?void 0:l.apis)==null||u.toLowLightMode():((s=l==null?void 0:l.apis)==null||s.toRedCrossMode(),l==null||l.apis.setLaserPower({params:{cmd:"M9 S0 N0"}})),r.updateDeviceSettingInfo({gMode:d})},O=(d,l)=>{var _;const{ext:u,info:s}=r;if(d>=t&&d<=g){const x={};x[l]=d,r.updateDeviceSettingInfo(x),(_=u==null?void 0:u.apis)==null||_.setRedCrossOffset({params:{cmd:`M98 X${s.redCrossOffsetX} Y${s.redCrossOffsetY}`}})}},D=()=>{b.value=r.info.name},k=()=>{var l;const{ext:d}=r;(l=d==null?void 0:d.apis)==null||l.setDeviceName({params:{cmd:`M100 ${JSON.stringify(b.value)}`}}),r.updateDeviceSettingInfo({name:b.value})},n=()=>{$e(B.value)},f=async()=>{y.value=!0,await r.checkUpdateFirmware(),y.value=!1};return(d,l)=>{const u=ie,s=me,_=H,x=Me,P=Ne,U=ve,M=_e,G=Z,Y=Se,m=oe;return R(),N("div",Rt,[e(G,{direction:"vertical",size:"8px",fill:!0},{default:o(()=>[c("section",null,[e(s,{title:d.$t("device.setting.name"),value:a.info.name,center:""},{"right-icon":o(()=>[e(u,{class:"ml-6",name:"editor",size:"12px",onClick:$})]),_:1},8,["title","value"])]),c("section",null,[a.info.power>0?(R(),W(s,{key:0,title:d.$t("device.setting.model"),value:`${a.info.power} W`},null,8,["title","value"])):(R(),W(s,{key:1,center:"",title:d.$t("device.setting.model"),value:d.$t("device.setting.unrecognized_laser_model"),onClick:n},{extra:o(()=>[e(_,{size:"small",plain:"",style:{"margin-left":"10px"},onClick:n},{default:o(()=>[F(h(d.$t("device.setting.unrecognized_laser_faq")),1)]),_:1})]),_:1},8,["title","value"])),e(s,{title:d.$t("device.setting.serial_num"),center:"",label:a.info.snCode},null,8,["title","label"]),e(s,{title:d.$t("device.setting.firmware_version"),center:"",label:a.info.version},{extra:o(()=>[e(_,{size:"small",type:"primary",plain:"",loading:y.value,style:{"margin-left":"10px"},onClick:f},{default:o(()=>[F(h(d.$t("device.setting.check_firmware")),1)]),_:1},8,["loading"])]),_:1},8,["title","label"]),e(s,{title:d.$t("device.connect.wifi"),center:"",label:a.info.ip},null,8,["title","label"])]),c("section",null,[e(M,{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=w=>v.value=w)},{default:o(()=>[e(U,{title:d.$t("device.setting.work_param"),name:"1"},{default:o(()=>[e(s,{title:d.$t("device.setting.position_mode")},{label:o(()=>[a.info.isRedLight?(R(),W(s,{key:0},{extra:o(()=>[e(P,{"model-value":0,direction:"vertical"},{default:o(()=>[e(x,{name:0},{default:o(()=>[F(h(d.$t("device.setting.red_dot")),1)]),_:1})]),_:1})]),_:1})):(R(),W(P,{key:1,"model-value":a.info.gMode,direction:"vertical","onUpdate:modelValue":V},{default:o(()=>[e(s,null,{extra:o(()=>[e(x,{name:0},{default:o(()=>[F(h(d.$t("device.setting.red_cross")),1)]),_:1})]),_:1}),e(s,null,{extra:o(()=>[e(x,{name:1},{default:o(()=>[F(h(d.$t("device.setting.laser_spot")),1)]),_:1})]),_:1})]),_:1},8,["model-value"]))]),_:1},8,["title"]),a.info.isRedLight?ne("",!0):(R(),N(q,{key:0},[e(S(J),{key:"redCrossOffsetX","model-value":a.info.redCrossOffsetX,"fraction-digits":1,suffix:"mm",disabled:a.info.gMode===1,min:t,max:g,label:`${d.$t("device.setting.red_cross_offset")} (X)`,"onUpdate:modelValue":l[0]||(l[0]=w=>O(w,"redCrossOffsetX"))},null,8,["model-value","disabled","label"]),e(S(J),{key:"redCrossOffsetY","model-value":a.info.redCrossOffsetY,"fraction-digits":1,suffix:"mm",disabled:a.info.gMode===1,min:t,max:g,label:`${d.$t("device.setting.red_cross_offset")} (Y)`,"onUpdate:modelValue":l[1]||(l[1]=w=>O(w,"redCrossOffsetY"))},null,8,["model-value","disabled","label"])],64))]),_:1},8,["title"])]),_:1},8,["modelValue"])])]),_:1}),e(m,{show:L.value,"onUpdate:show":l[4]||(l[4]=w=>L.value=w),class:"device-name-wrapper",title:d.$t("device.setting.name"),"show-cancel-button":"","confirm-button-disabled":!b.value,"confirm-button-text":S(i)("common.msg.ok"),"cancel-button-text":S(i)("common.msg.cancel"),onCancel:D,onConfirm:k},{default:o(()=>[c("div",It,[e(Y,{modelValue:b.value,"onUpdate:modelValue":l[3]||(l[3]=w=>b.value=w),formatter:p,maxlength:"15",class:"project-new-name-input",placeholder:d.$t("device.setting.name_is_empty")},null,8,["modelValue","placeholder"])])]),_:1},8,["show","title","confirm-button-disabled","confirm-button-text","cancel-button-text"])])}}});const Ft=j(Ot,[["__scopeId","data-v-e63fe710"]]),Ut={class:"process-view-setting"},At=E({__name:"WalkBorder",props:{calculateGCodeing:{type:Boolean},isFrameMode:{type:Boolean},walkBorder:null,walkBorderText:{default:"device.process.framing"},walkBorderSetting:null},emits:["walkBorder"],setup(a,{expose:r,emit:i}){const v=a,L=I(!1),b=I(!1),{t:y}=ae(),t=Q(),g=ye();Ge(()=>{console.log(v.walkBorderSetting)});const p=()=>{L.value=!1},$=z(()=>t.isFrameMode),B=async()=>{const D=ye();try{const k=await D.checkProcess(!0);if(k){te(y(k.text));return}if(t.isInProcessing){te(y("device.setting.setting_error_in_processing"));return}b.value=!0,i("walkBorder")}catch(k){te(y("device.process.gcode_upload_fail")),console.log(k),b.value=!1}},V=()=>{var f;const{config:{walkBorder:D},walkBorderConfig:k}=t.ext,n=D||k;return n.values||((f=t.ext)==null?void 0:f.walkBorderParams)||{type:"rect",power:n.power.default,speed:n.speed.default}};return r({startWalkBorder:async D=>{var n,f;let k=D??V();try{(n=t.ext)!=null&&n.mapPower&&(k=(f=t.ext)==null?void 0:f.mapPower(k)),await g.walkBorder({running:$.value,...k})}catch(d){te(y("device.process.gcode_upload_fail")),console.log(d)}return b.value=!1,k}}),(D,k)=>{const n=H,f=Z;return R(),W(f,{size:"10px"},{default:o(()=>[e(n,{class:"go-border-btn",disabled:a.calculateGCodeing,loading:b.value,onClick:B},{default:o(()=>[F(h(D.$t(a.walkBorderText)),1)]),_:1},8,["disabled","loading"]),c("div",Ut,[e(n,{class:"setting-btn",disabled:S($),onClick:k[0]||(k[0]=d=>L.value=!0)},{default:o(()=>[F(h(D.$t("mobile.process.set_up")),1)]),_:1},8,["disabled"]),Xe(D.$slots,"default",{isSettingVisible:L.value,closeSetting:p},void 0,!0)])]),_:3})}}});const ge=j(At,[["__scopeId","data-v-b0f6f2b8"]]),zt=E({__name:"TextButton",props:{text:{default:"按钮"},color:{default:"#333"},size:{default:"14px"}},emits:["click"],setup(a,{emit:r}){const i=a,v={"--text-btn-color":i.color,"--text-btn-size":i.size},L=()=>{r("click")};return(b,y)=>{const t=H;return R(),W(t,{class:"text-btn",style:v,text:a.text,onClick:L},null,8,["text"])}}});const we=j(zt,[["__scopeId","data-v-73e3397f"]]),he=E({__name:"WalkBorderSetting",setup(a,{expose:r}){const i=I(),v=Q(),L=ct(),b=ye(),{deviceValues:y}=gt(),t=z(()=>{const{ext:$}=v;return $?$.ui.WalkBorderSettings:null}),g=z(()=>L.currentId);return r({getWalkBorderData:()=>{const $=i.value;return $?$.values??{mode:"rect",power:3,speed:20}:b.checkProcess(!0)}}),($,B)=>(R(),W(_t(S(t)),{ref_key:"walkBorderRef",ref:i,ext:S(v).ext,"device-info":S(v).info,"canvas-id":S(g),"device-values":S(y),class:"walk-border-wrap"},null,8,["ext","device-info","canvas-id","device-values"]))}}),Mt=a=>(Pe("data-v-399b489d"),a=a(),xe(),a),Nt={class:"pop-header"},Wt=Mt(()=>c("div",null,null,-1)),Et={class:"title"},Tt={class:"setting-main"},Gt={class:"params-setting"},Xt={class:"control-wrap"},qt={class:"control-setting"},Yt={class:"main"},Ht={class:"left-wrap"},jt={class:"title"},Kt={class:"field-title"},Jt={class:"field-title"},Zt={class:"right-wrap"},Qt={class:"position-control"},en={key:0,class:"low-light-warp"},tn={class:"field-title"},nn={class:"origin-setting-wrap"},on={class:"font-size-16 title-1"},sn={class:"font-size-14 title-2"},an={class:"dialog-content"},ln=["src"],rn={class:"dialog-content-text"},cn=E({__name:"PreviewSettingPop",props:{calculateGcodeing:{type:Boolean},deviceErrorVisible:{type:Boolean}},setup(a){const r=a,i=Q(),v=I(),L=I(),b=z(()=>({isFrameMode:i.isFrameMode,calculateGCodeing:r.calculateGcodeing})),y=[{name:"hidden"},{name:"up",type:"top"},{name:"hidden"},{name:"left",type:"left"},{name:"hidden",type:"center"},{name:"right",type:"right"},{name:"hidden"},{name:"down",type:"bottom"},{name:"hidden"}];ee(()=>r.deviceErrorVisible,n=>{n&&(t.pressButtonRemindVisible=!n)});const t=Be({pressButtonRemindVisible:!1,...i.ext.settingParams,...i.ext.walkBorderParams,isSettingVisible:!1});Le(()=>{i.ext.walkBorderParams={power:t.power,speed:t.speed}});const g=z(()=>!i.ext.deviceInfo.gMode),p=z(()=>!i.ext.info.isRedLight),$=n=>{t.startPointOrder=n;const f=n-1;console.log("[设置加工原点]"),i.ext.settingParams.startPointOrder=f+1,i.ext.processParams.startPointId=f},B=()=>{t.isLowLight=!t.isLowLight;const n=i.ext;n.settingParams.isLowLight=t.isLowLight,n.settingParams.lightPower=t.lightPower,n.setLowLight({isLowLight:t.isLowLight,lightPower:t.lightPower})},V=()=>{var f,d,l;const n=i.ext.deviceInfo.power;t.lightPower=((l=(d=(f=i.ext.config.process)==null?void 0:f.lowLightPower[n])==null?void 0:d.formula)==null?void 0:l.call(d,n))||t.lightPower,i.ext.setLowLight({isLowLight:t.isLowLight,lightPower:t.lightPower})},O=n=>{i.ext.movingLaserHead(Object.assign(t,{direction:n}))},D=async()=>{var n;await L.value.startWalkBorder((n=v.value)==null?void 0:n.getWalkBorderData()),t.pressButtonRemindVisible=!0},k=()=>{var n;(n=i.ext)==null||n.stopWalkBorder(),t.pressButtonRemindVisible=!1};return(n,f)=>{const d=we,l=fe,u=J,s=ie,_=H,x=qe,P=Ye,U=Z,M=pe,G=ge,Y=oe;return R(),N(q,null,[e(G,se({ref_key:"walkBorderRef",ref:L},S(b),{onWalkBorder:D}),{default:o(({isSettingVisible:m,closeSetting:w})=>[e(M,{round:!0,show:m,position:"bottom"},{default:o(()=>[c("div",Nt,[Wt,c("span",Et,h(n.$t("mobile.process.set_up")),1),e(d,{class:"cancel-btn",text:n.$t("device.common.ok"),color:"#28be44",onClick:w},null,8,["text","onClick"])]),e(l,{text:n.$t("device.process.framing_power_tip")},null,8,["text"]),c("div",Tt,[e(he,{ref_key:"walkBorderSettingRef",ref:v,style:{width:"100%"}},null,512),c("div",Gt,[c("div",Xt,[c("div",qt,[c("div",Yt,[c("div",Ht,[c("div",jt,h(n.$t("device.process.move_laser_module")),1),c("div",Kt,h(n.$t("device.process.distance"))+"("+h(n.$t("device.process.unit_mm"))+") ",1),e(u,{key:"distance",modelValue:t.distance,"onUpdate:modelValue":f[0]||(f[0]=C=>t.distance=C),"input-align":"left",min:1,max:400,class:"custom-field"},null,8,["modelValue"]),c("div",Jt,h(n.$t("device.process.speed"))+"("+h(n.$t("device.process.unit_mm_s"))+") ",1),e(u,{key:"distance",modelValue:t.moveSpeed,"onUpdate:modelValue":f[1]||(f[1]=C=>t.moveSpeed=C),"input-align":"left",min:1,max:180,class:"custom-field"},null,8,["modelValue"])]),c("div",Zt,[c("div",Qt,[e(P,{"column-num":"3",gutter:"7"},{default:o(()=>[(R(),N(q,null,de(y,(C,A)=>e(x,{key:A,class:ue(C.name)},{default:o(()=>[e(_,{type:"primary",class:"default-control-btn",onClick:K=>O(C.type||"")},{default:o(()=>[e(s,{name:C.name,size:"22px"},null,8,["name"])]),_:2},1032,["onClick"])]),_:2},1032,["class"])),64))]),_:1})])])])])]),S(p)?(R(),N("div",en,[e(U,{fill:"",class:"low-light-setting-content",direction:"vertical"},{default:o(()=>[c("div",tn,h(n.$t("device.process.laser_spot"))+"(%) ",1),e(U,{class:"field-content",fill:""},{default:o(()=>[e(u,{key:"distance",modelValue:t.lightPower,"onUpdate:modelValue":f[2]||(f[2]=C=>t.lightPower=C),disabled:!t.isLowLight||S(g),"input-align":"left",min:1,max:10,class:"custom-field",onBlur:V},null,8,["modelValue","disabled"]),e(_,{type:"success",plain:"",size:"small",disabled:S(g),onClick:B},{default:o(()=>[F(h(t.isLowLight?n.$t("device.process.disable"):n.$t("device.process.enable")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})])):ne("",!0),c("div",nn,[e(U,{class:"origin-setting-content",fill:""},{default:o(()=>[c("div",null,[c("div",on,h(n.$t("device.process.origin")),1),c("div",sn,h(n.$t("device.process.click_start_point")),1)]),e(P,{"column-num":"3",border:!1,square:"",style:{width:"140px"}},{default:o(()=>[(R(),N(q,null,de(9,C=>e(x,{key:C,modelValue:t.startPointOrder,"onUpdate:modelValue":f[3]||(f[3]=A=>t.startPointOrder=A),onClick:A=>$(C)},{default:o(()=>[c("div",{class:ue(["p-item",{active:C===t.startPointOrder}])},null,2)]),_:2},1032,["modelValue","onClick"])),64))]),_:1})]),_:1})])])])]),_:2},1032,["show"])]),_:1},16),e(Y,{show:t.pressButtonRemindVisible,"onUpdate:show":f[4]||(f[4]=m=>t.pressButtonRemindVisible=m),"message-align":"center","show-confirm-button":!1,"close-on-click-overlay":!1},{default:o(()=>[c("div",an,[c("img",{src:S(Ce),width:"300"},null,8,ln),c("span",rn,h(n.$t("device.process.walk_border")),1),e(_,{type:"primary",onClick:k},{default:o(()=>[F(h(n.$t("device.modal.end")),1)]),_:1})])]),_:1},8,["show"])],64)}}});const dn=j(cn,[["__scopeId","data-v-399b489d"]]),un={DeviceSetting:Ft,PreviewSettingPop:dn},mn={class:"device-content device-setting-wrap"},pn={class:"name-label-wrap"},fn=E({__name:"DeviceSetting",props:{ext:null,info:null,checkUpdateFirmware:null,updateDeviceSettingInfo:null},setup(a){const r=a,{t:i}=ae(),v=I([]),L=I(!1),b=I(r.info.name),y=I(!1),t=-5,g=5;ee(()=>r.info.name,s=>{b.value=s});const p=s=>s==null?void 0:s.trim(),$=()=>{L.value=!0},B=z(()=>{var _,x;const{ext:s}=r;return((x=(_=s==null?void 0:s.config)==null?void 0:_.supportUrls)==null?void 0:x.laserFaq)||""}),V=s=>{var x,P;const{ext:_}=r;s?(x=_==null?void 0:_.apis)==null||x.toLowLightMode():((P=_==null?void 0:_.apis)==null||P.toRedCrossMode(),_==null||_.apis.setLaserPower({params:{cmd:"M9 S0 N0"}})),r.updateDeviceSettingInfo({gMode:s})},O=(s,_)=>{var U;const{ext:x,info:P}=r;if(s>=t&&s<=g){const M={};M[_]=s,r.updateDeviceSettingInfo(M),(U=x==null?void 0:x.apis)==null||U.setRedCrossOffset({params:{cmd:`M98 X${P.redCrossOffsetX} Y${P.redCrossOffsetY}`}})}},D=s=>{var x;console.log(s);const{ext:_}=r;(x=_==null?void 0:_.apis)==null||x.setFlameAlarmSensitivity({params:{cmd:`M309 N${s}`}}),r.updateDeviceSettingInfo({flameAlarmSensitivity:s})},k=s=>{var P,U;const{ext:_}=r,x=s?1:0;(P=_==null?void 0:_.apis)==null||P.setMoveStop({params:{cmd:`M318 N${x}`}}),(U=_==null?void 0:_.apis)==null||U.setTiltStop({params:{cmd:`M317 N${x}`}}),r.updateDeviceSettingInfo({moveStop:x})},n=s=>{var P;const{ext:_}=r,x=s?1:0;(P=_==null?void 0:_.apis)==null||P.setLimitSwitch({params:{cmd:`M319 N${x}`}}),r.updateDeviceSettingInfo({limitSwitch:x})},f=()=>{b.value=r.info.name},d=()=>{var _;const{ext:s}=r;(_=s==null?void 0:s.apis)==null||_.setDeviceName({params:{cmd:`M100 ${JSON.stringify(b.value)}`}}),r.updateDeviceSettingInfo({name:b.value})},l=()=>{console.log("aaa"),$e(B.value)},u=async()=>{y.value=!0,await r.checkUpdateFirmware(),y.value=!1};return(s,_)=>{const x=ie,P=me,U=H,M=Me,G=Ne,Y=We,m=Se,w=ve,C=_e,A=Z,K=oe;return R(),N(q,null,[c("div",mn,[e(A,{direction:"vertical",size:"8px",fill:!0},{default:o(()=>[c("section",null,[e(P,{title:s.$t("device.setting.name"),value:a.info.name,center:""},{"right-icon":o(()=>[e(x,{class:"ml-6",name:"editor",size:"12px",onClick:$})]),_:1},8,["title","value"])]),c("section",null,[a.info.power>0?(R(),W(P,{key:0,title:s.$t("device.setting.model"),value:`${a.info.power} W`},null,8,["title","value"])):(R(),W(P,{key:1,center:"",title:s.$t("device.setting.model"),value:s.$t("device.setting.unrecognized_laser_model"),onClick:l},{extra:o(()=>[e(U,{size:"small",plain:"",style:{"margin-left":"10px"},onClick:l},{default:o(()=>[F(h(s.$t("device.setting.unrecognized_laser_faq")),1)]),_:1})]),_:1},8,["title","value"])),e(P,{title:s.$t("device.setting.serial_num"),center:"",label:a.info.snCode},null,8,["title","label"]),e(P,{title:s.$t("device.setting.firmware_version"),center:"",label:a.info.version},{extra:o(()=>[e(U,{size:"small",type:"primary",plain:"",loading:y.value,style:{"margin-left":"10px"},onClick:u},{default:o(()=>[F(h(s.$t("device.setting.check_firmware")),1)]),_:1},8,["loading"])]),_:1},8,["title","label"]),e(P,{title:s.$t("device.connect.wifi"),center:"",label:a.info.ip},null,8,["title","label"])]),c("section",null,[e(C,{modelValue:v.value,"onUpdate:modelValue":_[2]||(_[2]=T=>v.value=T)},{default:o(()=>[e(w,{title:s.$t("device.setting.work_param"),name:"1"},{default:o(()=>[e(P,{title:s.$t("device.setting.position_mode")},{label:o(()=>[a.info.isRedLight?(R(),W(P,{key:0},{extra:o(()=>[e(G,{"model-value":0,direction:"vertical"},{default:o(()=>[e(M,{name:0},{default:o(()=>[F(h(s.$t("device.setting.red_dot")),1)]),_:1})]),_:1})]),_:1})):(R(),W(G,{key:1,"model-value":a.info.gMode,direction:"vertical","onUpdate:modelValue":V},{default:o(()=>[e(P,null,{extra:o(()=>[e(M,{name:0},{default:o(()=>[F(h(s.$t("device.setting.red_cross")),1)]),_:1})]),_:1}),e(P,null,{extra:o(()=>[e(M,{name:1},{default:o(()=>[F(h(s.$t("device.setting.laser_spot")),1)]),_:1})]),_:1})]),_:1},8,["model-value"]))]),_:1},8,["title"]),a.info.isRedLight?ne("",!0):(R(),N(q,{key:0},[e(S(J),{key:"redCrossOffsetX",class:"red-cross-offset","model-value":a.info.redCrossOffsetX,"fraction-digits":1,disabled:a.info.gMode===1,min:t,max:g,label:`${s.$t("device.setting.red_cross_offset")} _X（mm）`,"onUpdate:modelValue":_[0]||(_[0]=T=>O(T,"redCrossOffsetX"))},null,8,["model-value","disabled","label"]),e(S(J),{key:"redCrossOffsetY",class:"red-cross-offset","model-value":a.info.redCrossOffsetY,"fraction-digits":1,disabled:a.info.gMode===1,min:t,max:g,label:`${s.$t("device.setting.red_cross_offset")} _Y（mm）`,"onUpdate:modelValue":_[1]||(_[1]=T=>O(T,"redCrossOffsetY"))},null,8,["model-value","disabled","label"])],64)),e(P,{title:s.$t("device.setting.flame_alarm")},{label:o(()=>[e(G,{"model-value":a.info.flameAlarmSensitivity,direction:"vertical","onUpdate:modelValue":D},{default:o(()=>[e(P,null,{extra:o(()=>[e(M,{name:1},{default:o(()=>[F(h(s.$t("device.setting.high_sensitivity")),1)]),_:1})]),_:1}),e(P,null,{extra:o(()=>[e(M,{name:2},{default:o(()=>[F(h(s.$t("device.setting.low_sensitivity")),1)]),_:1})]),_:1}),e(P,null,{extra:o(()=>[e(M,{name:3},{default:o(()=>[F(h(s.$t("device.setting.not_show_sensitivity_again")),1)]),_:1})]),_:1})]),_:1},8,["model-value"])]),_:1},8,["title"]),e(m,{name:"switch",class:"control-switch-wrap","input-align":"right",label:s.$t("device.setting.stop_move")},{input:o(()=>[e(Y,{size:"20px","model-value":!!a.info.moveStop,"onUpdate:modelValue":k},null,8,["model-value"])]),_:1},8,["label"]),e(m,{name:"switch",class:"control-switch-wrap","input-align":"right",label:s.$t("device.setting.limit")},{input:o(()=>[e(Y,{size:"20px","model-value":!!a.info.limitSwitch,"onUpdate:modelValue":n},null,8,["model-value"])]),_:1},8,["label"])]),_:1},8,["title"])]),_:1},8,["modelValue"])])]),_:1})]),e(K,{show:L.value,"onUpdate:show":_[4]||(_[4]=T=>L.value=T),class:"device-name-wrapper",title:s.$t("device.setting.name"),"show-cancel-button":"","confirm-button-disabled":!b.value,"confirm-button-text":S(i)("common.msg.ok"),"cancel-button-text":S(i)("common.msg.cancel"),onCancel:f,onConfirm:d},{default:o(()=>[c("div",pn,[e(m,{modelValue:b.value,"onUpdate:modelValue":_[3]||(_[3]=T=>b.value=T),maxlength:"15",formatter:p,class:"project-new-name-input",placeholder:s.$t("device.setting.name_is_empty")},null,8,["modelValue","placeholder"])])]),_:1},8,["show","title","confirm-button-disabled","confirm-button-text","cancel-button-text"])],64)}}});const _n=j(fn,[["__scopeId","data-v-8ac8b7c4"]]),vn=a=>(Pe("data-v-6ba3d48a"),a=a(),xe(),a),gn={class:"pop-header"},wn=vn(()=>c("div",null,null,-1)),hn={class:"title"},bn={class:"setting-main"},kn={class:"params-setting"},yn={class:"control-wrap"},$n={class:"control-setting"},Sn={class:"main"},Cn={class:"left-wrap"},Bn={class:"title"},Ln={class:"field-title"},Pn={class:"field-title"},xn={class:"right-wrap"},Vn={class:"position-control"},Dn={key:0,class:"low-light-warp"},Rn={class:"field-title"},In={class:"origin-setting-wrap"},On={class:"font-size-16 title-1"},Fn={class:"font-size-14 title-2"},Un={class:"dialog-content"},An=["src"],zn={class:"dialog-content-text"},Mn=E({__name:"PreviewSettingPop",props:{calculateGcodeing:{type:Boolean},deviceErrorVisible:{type:Boolean}},setup(a){const r=a,i=Q(),v=I(),L=I(),b=z(()=>({isFrameMode:i.isFrameMode,calculateGCodeing:r.calculateGcodeing})),y=[{name:"hidden"},{name:"up",type:"top"},{name:"hidden"},{name:"left",type:"left"},{name:"back-origin",type:"center"},{name:"right",type:"right"},{name:"hidden"},{name:"down",type:"bottom"},{name:"hidden"}];ee(()=>r.deviceErrorVisible,n=>{n&&(t.pressButtonRemindVisible=!n)});const t=Be({pressButtonRemindVisible:!1,...i.ext.settingParams,...i.ext.walkBorderParams,isSettingVisible:!1});Le(()=>{i.ext.walkBorderParams={power:t.power,speed:t.speed}});const g=z(()=>!i.ext.deviceInfo.gMode),p=z(()=>!i.ext.info.isRedLight),$=n=>{t.startPointOrder=n;const f=n-1;console.log("[设置加工原点]"),i.ext.settingParams.startPointOrder=f+1,i.ext.processParams.startPointId=f},B=()=>{t.isLowLight=!t.isLowLight;const n=i.ext;n.settingParams.isLowLight=t.isLowLight,n.settingParams.lightPower=t.lightPower,n.setLowLight({isLowLight:t.isLowLight,lightPower:t.lightPower})},V=()=>{var f,d,l;const n=i.ext.deviceInfo.power;t.lightPower=((l=(d=(f=i.ext.config.process)==null?void 0:f.lowLightPower[n])==null?void 0:d.formula)==null?void 0:l.call(d,n))||t.lightPower,i.ext.setLowLight({isLowLight:t.isLowLight,lightPower:t.lightPower})},O=n=>{if(i.ext.movingLaserHead(Object.assign(t,{direction:n})),n==="center"){t.isLowLight=!1;const f=i.ext;f.settingParams.isLowLight=t.isLowLight,f.setLowLight({isLowLight:t.isLowLight,lightPower:t.lightPower})}},D=async()=>{var n;await L.value.startWalkBorder((n=v.value)==null?void 0:n.getWalkBorderData()),t.pressButtonRemindVisible=!0},k=()=>{var n;(n=i.ext)==null||n.stopWalkBorder(),t.pressButtonRemindVisible=!1};return(n,f)=>{const d=we,l=fe,u=J,s=ie,_=H,x=qe,P=Ye,U=Z,M=pe,G=ge,Y=oe;return R(),N(q,null,[e(G,se({ref_key:"walkBorderRef",ref:L},S(b),{onWalkBorder:D}),{default:o(({isSettingVisible:m,closeSetting:w})=>[e(M,{round:!0,show:m,position:"bottom"},{default:o(()=>[c("div",gn,[wn,c("span",hn,h(n.$t("mobile.process.set_up")),1),e(d,{class:"cancel-btn",text:n.$t("device.common.ok"),color:"#28be44",onClick:w},null,8,["text","onClick"])]),e(l,{text:n.$t("device.process.framing_power_tip")},null,8,["text"]),c("div",bn,[e(he,{ref_key:"walkBorderSettingRef",ref:v,style:{width:"100%"}},null,512),c("div",kn,[c("div",yn,[c("div",$n,[c("div",Sn,[c("div",Cn,[c("div",Bn,h(n.$t("device.process.move_laser_module")),1),c("div",Ln,h(n.$t("device.process.distance"))+"("+h(n.$t("device.process.unit_mm"))+") ",1),e(u,{key:"distance",modelValue:t.distance,"onUpdate:modelValue":f[0]||(f[0]=C=>t.distance=C),"input-align":"left",min:1,max:400,class:"custom-field"},null,8,["modelValue"]),c("div",Pn,h(n.$t("device.process.speed"))+"("+h(n.$t("device.process.unit_mm_s"))+") ",1),e(u,{key:"distance",modelValue:t.moveSpeed,"onUpdate:modelValue":f[1]||(f[1]=C=>t.moveSpeed=C),"input-align":"left",min:1,max:180,class:"custom-field"},null,8,["modelValue"])]),c("div",xn,[c("div",Vn,[e(P,{"column-num":"3",gutter:"7"},{default:o(()=>[(R(),N(q,null,de(y,(C,A)=>e(x,{key:A,class:ue(C.name)},{default:o(()=>[e(_,{type:"primary",class:"default-control-btn",onClick:K=>O(C.type||"")},{default:o(()=>[e(s,{name:C.name,size:"22px"},null,8,["name"])]),_:2},1032,["onClick"])]),_:2},1032,["class"])),64))]),_:1})])])])])]),S(p)?(R(),N("div",Dn,[e(U,{fill:"",class:"low-light-setting-content",direction:"vertical"},{default:o(()=>[c("div",Rn,h(n.$t("device.process.laser_spot"))+"(%) ",1),e(U,{class:"field-content",fill:""},{default:o(()=>[e(u,{key:"distance",modelValue:t.lightPower,"onUpdate:modelValue":f[2]||(f[2]=C=>t.lightPower=C),disabled:!t.isLowLight||S(g),"input-align":"left",min:1,max:10,class:"custom-field",onBlur:V},null,8,["modelValue","disabled"]),e(_,{type:"success",size:"small",disabled:S(g),onClick:B},{default:o(()=>[F(h(t.isLowLight?n.$t("device.process.disable"):n.$t("device.process.enable")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})])):ne("",!0),c("div",In,[e(U,{class:"origin-setting-content",fill:""},{default:o(()=>[c("div",null,[c("div",On,h(n.$t("device.process.origin")),1),c("div",Fn,h(n.$t("device.process.click_start_point")),1)]),e(P,{"column-num":"3",border:!1,square:"",style:{width:"140px"}},{default:o(()=>[(R(),N(q,null,de(9,C=>e(x,{key:C,modelValue:t.startPointOrder,"onUpdate:modelValue":f[3]||(f[3]=A=>t.startPointOrder=A),onClick:A=>$(C)},{default:o(()=>[c("div",{class:ue(["p-item",{active:C===t.startPointOrder}])},null,2)]),_:2},1032,["modelValue","onClick"])),64))]),_:1})]),_:1})])])])]),_:2},1032,["show"])]),_:1},16),e(Y,{show:t.pressButtonRemindVisible,"onUpdate:show":f[4]||(f[4]=m=>t.pressButtonRemindVisible=m),"message-align":"center","show-confirm-button":!1,"close-on-click-overlay":!1},{default:o(()=>[c("div",Un,[c("img",{src:S(Ce),width:"300"},null,8,An),c("span",zn,h(n.$t("device.process.walk_border")),1),e(_,{type:"primary",onClick:k},{default:o(()=>[F(h(n.$t("device.modal.end")),1)]),_:1})])]),_:1},8,["show"])],64)}}});const Nn=j(Mn,[["__scopeId","data-v-6ba3d48a"]]),Wn={DeviceSetting:_n,PreviewSettingPop:Nn},En=E({__name:"DeviceSetting",props:{ext:null,info:null,isInProcessing:{type:Boolean},laserFaq:null,checkUpdateFirmware:{type:Function},updateDeviceSettingInfo:{type:Function}},setup(a){const r=a,{ext:i}=Q(),v=I([]),L=[{name:"name",label:"device.setting.name",widget:"edit",widgetAttrs:{maxLength:15}}],b=[{name:"power",label:"device.setting.model",widget:"devicePower",widgetAttrs:{format(l){return`${l}w`}},suffix:{widget:"button",label:"device.setting.unrecognized_laser_faq",widgetAttrs:{size:"small"}}},{name:"snCode",label:"device.setting.serial_num",widget:"deviceInfo"},{name:"version",label:"device.setting.firmware_version",widget:"deviceVersion",suffix:{name:"checkFirmware",label:"device.setting.check_firmware",widget:"button",widgetAttrs:{value:"device.setting.check_firmware",size:"small"}}},{name:"ip",label:"device.connect.wifi_config",widget:"deviceInfo",suffix:{name:"configWifi",label:"device.connect.wifi_config_button_label",widget:"button",widgetAttrs:{size:"small"}}}],y=[{name:"redCrossOffsetX",label:"device.setting.red_cross_offset",widget:"unitInput",labelSuffix:"_X",widgetAttrs:{size:"small",min:0,max:100,step:1,defaultValue:0},inline:!0},{name:"redCrossOffsetY",label:"device.setting.red_cross_offset",widget:"unitInput",labelSuffix:"_Y",widgetAttrs:{size:"small",min:0,max:100,step:1,defaultValue:0},inline:!0},{name:"flameAlarm",label:"device.setting.flame_alarm",widget:"select",widgetAttrs:{options:[{value:3,label:"device.setting.high_sensitivity"},{value:1,label:"device.setting.low_sensitivity"},{value:0,label:"device.setting.not_show_sensitivity_again"}],defaultValue:void 0,disabled:!0}},{name:"moveStop",label:"device.setting.stop_move",widget:"switch",widgetAttrs:{size:"small"},inline:!0},{name:"airAssist",label:"空气辅助自动调节",widget:"switch",widgetAttrs:{disabled:!1},childs:[{name:"cutAirAssist",label:"切割",widget:"select",widgetAttrs:{options:[{value:0,label:"0"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"}],defaultValue:wt,disabled:!r.info.airAssist},inline:!0},{name:"scoreAirAssist",label:"雕刻",widget:"select",widgetAttrs:{options:[{value:0,label:"0"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"}],defaultValue:ht,disabled:!r.info.airAssist},inline:!0}],inline:!0},{name:"airAssistCloseDelay",label:"device.setting.purifier_timeout",widget:"input",widgetAttrs:{size:"small",labelSuffix:"s",step:1,min:0,max:600,defaultValue:10},inline:!0},{name:"fillLight",label:"补光灯亮度",widget:"input",widgetAttrs:{size:"small",labelSuffix:"%",min:0,max:100,defaultValue:10},inline:!0}],t={name(l){var u;return(u=i==null?void 0:i.apis)==null?void 0:u.setDeviceName(l)},gMode(l){var u;return(u=i==null?void 0:i.apis)==null?void 0:u.setGMode(l)},redCrossOffsetX(l){var u;return(u=i==null?void 0:i.apis)==null?void 0:u.redCrossOffset(`X${l}`)},redCrossOffsetY(l){var u;return(u=i==null?void 0:i.apis)==null?void 0:u.redCrossOffset(`Y${l}`)},fillLight(l){var u;return(u=i==null?void 0:i.apis)==null?void 0:u.setFillLight(`A${l}B${l}`)},configWifi(){console.log("configWifi")},checkFirmware(){return r.checkUpdateFirmware()},flameAlarm(l){console.log(l)},moveStop(l){var u;return(u=i==null?void 0:i.apis)==null?void 0:u.moveStop(`N${l===!0?1:0}`)},airAssistCloseDelay(l){var u;return(u=i==null?void 0:i.apis)==null?void 0:u.airAssistCloseDelay(`T${l}`)},airAssist(l){return l},scoreAirAssist(l){return l},cutAirAssist(l){return l}},g=(l,u)=>{if(console.log({key:l,value:u}),l in t){const s=t[l](u);return s instanceof Promise?s.then(()=>{i.deviceInfo={[l]:u}}):(i.deviceInfo={[l]:u},s)}},p=be(L,"name"),$=be(b,"name"),B=be(y,"name"),V=l=>{const u={};return l.forEach(s=>{u[s]=r.info[s]}),u},O=z(()=>V(p)),D=z(()=>V($)),k=z(()=>V([...B,"redCrossOffsetX","redCrossOffsetY","flameAlarmSensitivity"])),n=(...l)=>{const[u,s]=l;O[u]=s,g(u,s)},f=(...l)=>{const[u,s]=l;D[u]=s,g(u,s)},d=async(...l)=>{const[u,s]=l;k[u]=s,g(u,s)};return(l,u)=>{const s=dt,_=ve,x=_e,P=Z;return R(),W(P,{class:"device-setting-wrap",direction:"vertical",size:"8px",fill:!0},{default:o(()=>[c("section",null,[e(s,{items:L,values:S(O),handler:n},null,8,["values"])]),c("section",null,[e(s,{items:b,values:S(D),handler:f},null,8,["values"])]),c("section",null,[e(x,{modelValue:v.value,"onUpdate:modelValue":u[0]||(u[0]=U=>v.value=U)},{default:o(()=>[e(_,{title:l.$t("device.setting.work_param"),name:"1"},{default:o(()=>[e(s,{items:y,values:S(k),handler:d},null,8,["values"])]),_:1},8,["title"])]),_:1},8,["modelValue"])])]),_:1})}}}),Tn=a=>(Pe("data-v-a27d3b39"),a=a(),xe(),a),Gn={class:"pop-header"},Xn=Tn(()=>c("div",null,null,-1)),qn={class:"title"},Yn={class:"main"},Hn={class:"dialog-content"},jn=["src"],Kn={class:"dialog-content-text"},Jn=E({__name:"PreviewSettingPop",props:{calculateGcodeing:{type:Boolean},deviceErrorVisible:{type:Boolean}},setup(a){const r=a,i=Q(),v=I(),L=I(),b=z(()=>({calculateGCodeing:r.calculateGcodeing}));ee(()=>r.deviceErrorVisible,p=>{p&&(y.pressButtonRemindVisible=!p)});const y=Be({pressButtonRemindVisible:!1,...i.ext.settingParams,...i.ext.walkBorderParams,isSettingVisible:!1});Le(()=>{i.ext.walkBorderParams={power:y.power,speed:y.speed}});const t=async()=>{var B;const p=await L.value.startWalkBorder((B=v.value)==null?void 0:B.getWalkBorderData());y.pressButtonRemindVisible=!0;const{power:$}=p;i.ext.setLowLight({lightPower:$,isLowLight:y.isLowLight})},g=()=>{var p;(p=i.ext)==null||p.stopWalkBorder(),y.pressButtonRemindVisible=!1};return(p,$)=>{const B=we,V=fe,O=pe,D=ge,k=H,n=oe;return R(),N(q,null,[e(D,se({ref_key:"walkBorderRef",ref:L},S(b),{onWalkBorder:t}),{default:o(({isSettingVisible:f,closeSetting:d})=>[e(O,{round:!0,show:f,position:"bottom"},{default:o(()=>[c("div",Gn,[Xn,c("span",qn,h(p.$t("mobile.process.set_up")),1),e(B,{class:"cancel-btn",text:p.$t("device.common.ok"),color:"#28be44",onClick:d},null,8,["text","onClick"])]),e(V,{text:p.$t("device.process.framing_power_tip")},null,8,["text"]),c("div",Yn,[e(he,{ref_key:"walkBorderSettingRef",ref:v,style:{width:"100%"}},null,512)])]),_:2},1032,["show"])]),_:1},16),e(n,{show:y.pressButtonRemindVisible,"onUpdate:show":$[0]||($[0]=f=>y.pressButtonRemindVisible=f),"message-align":"center","show-confirm-button":!1,"close-on-click-overlay":!1},{default:o(()=>[c("div",Hn,[c("img",{src:S(Ce),width:"300"},null,8,jn),c("span",Kn,h(p.$t("device.process.walk_border")),1),e(k,{type:"primary",onClick:g},{default:o(()=>[F(h(p.$t("device.modal.end")),1)]),_:1})])]),_:1},8,["show"])],64)}}});const Zn=j(Jn,[["__scopeId","data-v-a27d3b39"]]),Qn={DeviceSetting:En,PreviewSettingPop:Zn},eo={class:"device-content device-setting-wrap"},to={style:{"margin-right":"4px"}};const no={class:"name-label-wrap"},oo={style:{"font-size":"16px","font-weight":"500"}},so={style:{"font-size":"14px","font-weight":"400","line-height":"1.4"}},io={style:{color:"#28be44","text-decoration":"underline"}},ao={style:{padding:"20px 24px"}},lo=E({__name:"DeviceSetting",props:{ext:null,info:null,isInProcessing:{type:Boolean},checkUpdateFirmware:null,updateDeviceSettingInfo:null},setup(a){const r=a,i=ut(),{t:v}=ae(),L=vt(),b=I(!1),y=I(!1),t=bt(r.info.power)&&r.info.power.map(m=>{if(m===10)return`455-${m}W`;if(m===2)return`1064-${m}W`}),g=Oe.some(r.info.power,m=>!Oe.isNumber(m)||m<=0),p=()=>{$e(f.value)},$=I([""]),B=I(!1),V=I(r.info.name),O=I(!1),D=600;ee(()=>r.info.name,m=>{V.value=m});const k=m=>m==null?void 0:m.trim();Ge(()=>{St(()=>!!(y.value||B.value||i.isNotSupportedFile))});const n=()=>{B.value=!0},f=z(()=>{var w,C;const{ext:m}=r;return((C=(w=m==null?void 0:m.config)==null?void 0:w.supportUrls)==null?void 0:C.laserFaq)||""}),d=()=>r.isInProcessing?(te(v("device.process.device_is_working")),!0):!1,l=m=>{i.showNotSupportedFileDialog(!0,m)},u=m=>{var A;if(d())return;const{ext:w}=r;let C={};m?C={flameSensitivity:3,flameAlarm:!0}:C={flameAlarm:!1},(A=w==null?void 0:w.apis)==null||A.setConfigs({data:{alias:"config",type:"user",kv:C}}),r.updateDeviceSettingInfo({flameSensitivity:3,flameAlarm:C.flameAlarm})},s=m=>{if(d())return;const{ext:w}=r,C=m?"NORMAL":"HANDLE";w.apis.setConfigs({data:{alias:"config",type:"user",kv:{workingMode:C}}}),r.updateDeviceSettingInfo({workingMode:C})},_=m=>{if(d())return;const{ext:w}=r;w.apis.setConfigs({data:{alias:"config",type:"user",kv:{gapCheck:m}}}),w.addonStatus={...w.addonStatus,gapCheck:m},r.updateDeviceSettingInfo({gapCheck:m})},x=m=>{b.value=m},P=m=>{const{ext:w}=r;w==null||w.setConfigs({data:{alias:"config",type:"user",kv:{purifierTimeout:m}}}),r.updateDeviceSettingInfo({purifierTimeout:m})},U=()=>{V.value=r.info.name},M=()=>{var w;const{ext:m}=r;(w=m==null?void 0:m.apis)==null||w.setDeviceName({data:{deviceName:V.value}}),r.updateDeviceSettingInfo({name:V.value})},G=async()=>{d()||(O.value=!0,await r.checkUpdateFirmware(),O.value=!1)},Y=()=>{L.push("/check-steps")};return(m,w)=>{const C=ie,A=me,K=H,T=We,le=Se,Ke=mt,Je=J,Ze=ve,Qe=_e,et=Z,Ve=oe;return R(),N("div",eo,[e(et,{direction:"vertical",size:"8px",fill:!0},{default:o(()=>[c("section",null,[e(A,{title:m.$t("device.setting.name"),value:a.info.name,center:""},{"right-icon":o(()=>[e(C,{class:"ml-6",name:"editor",size:"12px",onClick:n})]),_:1},8,["title","value"])]),c("section",null,[a.info.power!=null?(R(),W(A,{key:0,title:m.$t("device.setting.model"),value:S(g)?S(v)("device.setting.unrecognized_laser_model"):`${S(t)[0]} / ${S(t)[1]}`},null,8,["title","value"])):(R(),W(A,{key:1,center:"",tag:"a",target:"_blank",href:S(f),title:m.$t("device.setting.model"),value:m.$t("device.setting.unrecognized_laser_model")},{extra:o(()=>[e(K,{size:"small",plain:"",style:{"margin-left":"10px"},onClick:p},{default:o(()=>[F(h(m.$t("device.setting.unrecognized_laser_faq")),1)]),_:1})]),_:1},8,["href","title","value"])),e(A,{title:m.$t("device.setting.serial_num"),center:"",label:a.info.snCode},null,8,["title","label"]),e(A,{title:m.$t("device.setting.firmware_version"),center:"",label:a.info.version},{extra:o(()=>[e(K,{size:"small",type:"primary",plain:"",loading:O.value,style:{"margin-left":"10px"},onClick:G},{default:o(()=>[F(h(m.$t("device.setting.check_firmware")),1)]),_:1},8,["loading"])]),_:1},8,["title","label"]),e(A,{title:m.$t("device.connect.wifi"),center:"",label:a.info.ip},null,8,["title","label"])]),c("section",null,[e(Qe,{modelValue:$.value,"onUpdate:modelValue":w[3]||(w[3]=X=>$.value=X)},{default:o(()=>[e(Ze,{title:m.$t("device.setting.setting"),name:"2"},{default:o(()=>{var X,De;return[e(le,{name:"switch","input-align":"right",label:S(v)("device.setting.flame_alarm")},{input:o(()=>[e(T,{size:"20px","model-value":a.info.flameAlarm,"onUpdate:modelValue":u},null,8,["model-value"])]),_:1},8,["label"]),ne("",!0),e(le,{name:"switch","input-align":"right",label:S(v)("device.setting.handheld")},{input:o(()=>[e(T,{size:"20px","model-value":a.info.workingMode==="NORMAL","onUpdate:modelValue":s},null,8,["model-value"])]),_:1},8,["label"]),e(le,{name:"switch","input-align":"right",class:"open-lid-stop"},{label:o(()=>[c("div",{onClick:w[0]||(w[0]=Re=>l("device.setting.open_gap_stop_tips"))},[c("span",to,h(S(v)("device.setting.open_gap_stop_work")),1),e(Ke,{name:"info-o",size:"14"})])]),input:o(()=>[e(T,{size:"20px","model-value":a.info.gapCheck,"onUpdate:modelValue":_},null,8,["model-value"])]),_:1}),ne("",!0),Ee(e(Je,{key:"redCrossOffsetX","model-value":a.info.purifierTimeout,"fraction-digits":1,min:0,max:D,label:S(v)("device.setting.purifier_timeout")+"（s）","onUpdate:modelValue":w[2]||(w[2]=Re=>P(Re))},null,8,["model-value","label"]),[[Te,(De=(X=a.ext)==null?void 0:X.addonStatus)==null?void 0:De.purifierExist]])]}),_:1},8,["title"])]),_:1},8,["modelValue"])])]),_:1}),e(Ve,{show:B.value,"onUpdate:show":w[5]||(w[5]=X=>B.value=X),class:"device-name-wrapper",title:m.$t("device.setting.name"),"show-cancel-button":"","confirm-button-disabled":!V.value,"confirm-button-text":S(v)("common.msg.ok"),"cancel-button-text":S(v)("common.msg.cancel"),onCancel:U,onConfirm:M},{default:o(()=>[c("div",no,[e(le,{modelValue:V.value,"onUpdate:modelValue":w[4]||(w[4]=X=>V.value=X),maxlength:"15",formatter:k,class:"project-new-name-input",placeholder:m.$t("device.setting.name_is_empty")},null,8,["modelValue","placeholder"])])]),_:1},8,["show","title","confirm-button-disabled","confirm-button-text","cancel-button-text"]),e(Ve,{show:y.value,"onUpdate:show":w[7]||(w[7]=X=>y.value=X)},{title:o(()=>[c("div",oo,h(S(v)("device.setting.infrared_light_preheat")),1)]),default:o(()=>[c("div",so,[c("span",null,h(S(v)("device.setting.infrared_light_preheat_info")),1),c("span",io,h(S(v)("device.setting.infrared_light_preheat_info_link")),1)])]),footer:o(()=>[c("div",ao,[e(K,{type:"primary",block:"",onClick:w[6]||(w[6]=()=>y.value=!1)},{default:o(()=>[F(h(S(v)("component.button.iknow")),1)]),_:1})])]),_:1},8,["show"])])}}});const ro=j(lo,[["__scopeId","data-v-58ea57c4"]]),co={class:"pop-header"},uo={class:"title"},mo={class:"main"},po=E({__name:"PreviewSettingPop",props:{calculateGcodeing:{type:Boolean}},setup(a){const r=a,i=I(),v=I(),L=Q(),b=z(()=>L.isFrameMode),y=z(()=>{let g=b.value;return{isFrameMode:g,calculateGCodeing:r.calculateGcodeing,walkBorderText:g?"device.process.stop_framing":"device.process.framing"}}),t=async()=>{var g;await i.value.startWalkBorder((g=v.value)==null?void 0:g.getWalkBorderData())};return(g,p)=>{const $=we,B=fe,V=pe,O=ge;return R(),W(O,se({ref_key:"walkBorderRef",ref:i},S(y),{onWalkBorder:t}),{default:o(({isSettingVisible:D,closeSetting:k})=>[e(V,{round:!0,show:D,"close-on-click-overlay":!1,position:"bottom"},{default:o(()=>[c("div",co,[e($,{class:"cancel-btn",text:g.$t("device.common.cancel"),color:"#969799",onClick:k},null,8,["text","onClick"]),c("span",uo,h(g.$t("mobile.process.set_up")),1),e($,{class:"ok-btn",text:g.$t("device.common.ok"),color:"#28be44",onClick:k},null,8,["text","onClick"])]),e(B,{text:g.$t("device.process.framing_power_tip")},null,8,["text"]),c("div",mo,[e(he,{ref_key:"walkBorderSettingRef",ref:v},null,512)])]),_:2},1032,["show"])]),_:1},16)}}});const fo=j(po,[["__scopeId","data-v-cafe4b91"]]),_o=E({__name:"CheckButton",props:{checkList:null,ext:null},emits:["click"],setup(a,{emit:r}){const i=a,{t:v}=ae(),L={[re.text]:t=>{te(v(t.text))},[re.textWidthEvent]:t=>{const{text:g="",handler:p=()=>{}}=t.event||{};pt({message:v(t.text),confirmButtonText:v(g),cancelButtonText:v("common.msg.cancel")}).then(()=>{p()})}},b={UsbKeyLockStatus:t=>t.UsbKeyLockStatus?!1:{type:re.text,text:"device.process.no_key_lock"},gapCheck:t=>{const{gapCheck:g=!1,gapStatus:p=!1}=t,$=g&&p,B={type:re.textWidthEvent,text:"device.process.gap_check_close_tips",event:{text:"device.process.go_to_close",handler:()=>{const V=i.ext;V.apis.setConfigs({data:{alias:"config",type:"user",kv:{gapCheck:!1}}}),V.addonStatus.gapCheck=!1}}};return $?B:!1}},y=async()=>{const t=i.ext.addonStatus;if(!kt(t)){const g=i.checkList||[];for(const p in t){const $=yt(g,p)||!g.length;if(b[p]&&$t(b[p])&&$){const B=await b[p](t);if(B)return L[B.type](B),!1}}}r("click")};return(t,g)=>{const p=H;return R(),N("div",null,[e(p,se(t.$attrs,{onClick:y}),{default:o(()=>[Xe(t.$slots,"default")]),_:3},16)])}}}),vo={DeviceSetting:ro,PreviewSettingPop:fo,CheckButton:_o},So={D1Pro:Wn,F1:vo,D1:un,D2:Qn};export{So as D};
