import{m as k,B as C,_ as x,n as B,S as u,r as d,p as D,q as I}from"../assets/index-83a10b2e.js";import{I as L}from"./index-e902da34.js";import{k as v,H as V,f as M,E as P,j as _,J as y,D as h,G as n,u as f,K as m,y as S,b as A,c as U,I as $}from"./xcs-vue-family-70642f71.js";import"./index-55948043.js";import"./xcs-canvas-5c2592d6.js";const H=""+new URL("../assets/privacy-icon-9a1b2658.png",import.meta.url).href,E={class:"privacy-container"},N={class:"title"},Y=["innerHTML"],K=v({__name:"PrivacyDialog",props:{callback:{type:Function},show:{type:Boolean}},setup(i){const c=i,{t:e}=V(),l=t=>{const p=t.target.classList;p.contains("privacy")?a("https://passport.xtool.com/policy.html"):p.contains("user")&&a("https://passport.xtool.com/terms.html")},r=M(()=>e("mobile.common.privacy_policy_detail",{privacy_policy:`<a class="privacy" style="color: #28be44;">${e("mobile.common.privacy_policy_des")}</a>`,user_policy:`<a class="user" style="color: #28be44;">${e("mobile.common.user_policy_des")}</a>`}));function o(){c.callback(!1)}function s(){c.callback(!0)}function a(t){window.MeApi.app.openBrowser(t)}return(t,p)=>{const g=L,b=C,w=k;return h(),P("div",null,[_(w,{show:i.show,"show-confirm-button":!1,"show-cancel-button":!1,class:"van-dialog-policy"},{default:y(()=>[n("div",E,[_(g,{class:"icon",fit:"contain",src:f(H),width:"60",height:"60"},null,8,["src"]),n("div",N,m(t.$t("mobile.common.privacy_policy")),1),n("div",{class:"content",onClick:l},[n("p",{class:"description",innerHTML:f(r)},null,8,Y)]),_(b,{type:"success",class:"agree_btn",onClick:s},{default:y(()=>[S(m(t.$t("mobile.common.agree_and_continue")),1)]),_:1}),n("p",{class:"disagree-but",onClick:o},m(t.$t("mobile.common.disagree")),1)])]),_:1},8,["show"])])}}});const R=x(K,[["__scopeId","data-v-b51b2124"]]),G=v({__name:"Privacy",setup(i){const c=A(!1),e=B();function l(o){o?(u().set("PRIVACY_KEY",!0),r("test"),d.replace({path:"/"})):window.MeApi&&window.MeApi.app.exit()}const r=async o=>{const s=await e.checkVersionUpdate(o).catch(a=>(console.log(a),!1));if(s){e.version=s.latestVersion;const a=D(I.mobile);return e.description=s.changeLog[a==="zh-CN"?"zh":"en"],s.downloadUrl&&(e.downloadUrl=s.downloadUrl[0]),!0}else return e.version="latest",!1};return U(()=>{const o=u().get("PRIVACY_KEY",!1);c.value=!o,o&&d.replace("/")}),(o,s)=>(h(),$(R,{show:c.value,callback:l},null,8,["show"]))}});export{G as default};
