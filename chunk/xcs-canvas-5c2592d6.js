var nx=Object.defineProperty;var sx=(e,i,t)=>i in e?nx(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t;var x=(e,i,t)=>(sx(e,typeof i!="symbol"?i+"":i,t),t),Vl=(e,i,t)=>{if(!i.has(e))throw TypeError("Cannot "+t)};var B=(e,i,t)=>(Vl(e,i,"read from private field"),t?t.call(e):i.get(e)),lt=(e,i,t)=>{if(i.has(e))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(e):i.set(e,t)},It=(e,i,t,r)=>(Vl(e,i,"write to private field"),r?r.call(e,t):i.set(e,t),t);var Gt=(e,i,t)=>(Vl(e,i,"access private method"),t);var ox=typeof global=="object"&&global&&global.Object===Object&&global;const Sy=ox;var ax=typeof self=="object"&&self&&self.Object===Object&&self,hx=Sy||ax||Function("return this")();const Ei=hx;var lx=Ei.Symbol;const vi=lx;var Ny=Object.prototype,ux=Ny.hasOwnProperty,cx=Ny.toString,Ss=vi?vi.toStringTag:void 0;function fx(e){var i=ux.call(e,Ss),t=e[Ss];try{e[Ss]=void 0;var r=!0}catch{}var n=cx.call(e);return r&&(i?e[Ss]=t:delete e[Ss]),n}var dx=Object.prototype,Ax=dx.toString;function px(e){return Ax.call(e)}var gx="[object Null]",vx="[object Undefined]",mA=vi?vi.toStringTag:void 0;function Ki(e){return e==null?e===void 0?vx:gx:mA&&mA in Object(e)?fx(e):px(e)}function We(e){return e!=null&&typeof e=="object"}var yx="[object Symbol]";function ra(e){return typeof e=="symbol"||We(e)&&Ki(e)==yx}function dl(e,i){for(var t=-1,r=e==null?0:e.length,n=Array(r);++t<r;)n[t]=i(e[t],t,e);return n}var mx=Array.isArray;const ce=mx;var Ix=1/0,IA=vi?vi.prototype:void 0,CA=IA?IA.toString:void 0;function ad(e){if(typeof e=="string")return e;if(ce(e))return dl(e,ad)+"";if(ra(e))return CA?CA.call(e):"";var i=e+"";return i=="0"&&1/e==-Ix?"-0":i}var Cx=/\s/;function _x(e){for(var i=e.length;i--&&Cx.test(e.charAt(i)););return i}var xx=/^\s+/;function Oy(e){return e&&e.slice(0,_x(e)+1).replace(xx,"")}function Qe(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}var _A=0/0,Ex=/^[-+]0x[0-9a-f]+$/i,bx=/^0b[01]+$/i,wx=/^0o[0-7]+$/i,Tx=parseInt;function ch(e){if(typeof e=="number")return e;if(ra(e))return _A;if(Qe(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=Qe(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=Oy(e);var t=bx.test(e);return t||wx.test(e)?Tx(e.slice(2),t?2:8):Ex.test(e)?_A:+e}var xA=1/0,Bx=17976931348623157e292;function Rx(e){if(!e)return e===0?e:0;if(e=ch(e),e===xA||e===-xA){var i=e<0?-1:1;return i*Bx}return e===e?e:0}function hd(e){var i=Rx(e),t=i%1;return i===i?t?i-t:i:0}function Al(e){return e}var Px="[object AsyncFunction]",Sx="[object Function]",Nx="[object GeneratorFunction]",Ox="[object Proxy]";function er(e){if(!Qe(e))return!1;var i=Ki(e);return i==Sx||i==Nx||i==Px||i==Ox}var Dx=Ei["__core-js_shared__"];const zl=Dx;var EA=function(){var e=/[^.]+$/.exec(zl&&zl.keys&&zl.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Fx(e){return!!EA&&EA in e}var Lx=Function.prototype,Mx=Lx.toString;function On(e){if(e!=null){try{return Mx.call(e)}catch{}try{return e+""}catch{}}return""}var Qx=/[\\^$.*+?()[\]{}|]/g,Ux=/^\[object .+?Constructor\]$/,Gx=Function.prototype,kx=Object.prototype,Hx=Gx.toString,Xx=kx.hasOwnProperty,Yx=RegExp("^"+Hx.call(Xx).replace(Qx,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Vx(e){if(!Qe(e)||Fx(e))return!1;var i=er(e)?Yx:Ux;return i.test(On(e))}function zx(e,i){return e==null?void 0:e[i]}function Dn(e,i){var t=zx(e,i);return Vx(t)?t:void 0}var Wx=Dn(Ei,"WeakMap");const zu=Wx;var bA=Object.create,jx=function(){function e(){}return function(i){if(!Qe(i))return{};if(bA)return bA(i);e.prototype=i;var t=new e;return e.prototype=void 0,t}}();const Kx=jx;function Dy(e,i,t){switch(t.length){case 0:return e.call(i);case 1:return e.call(i,t[0]);case 2:return e.call(i,t[0],t[1]);case 3:return e.call(i,t[0],t[1],t[2])}return e.apply(i,t)}function $x(){}function Fy(e,i){var t=-1,r=e.length;for(i||(i=Array(r));++t<r;)i[t]=e[t];return i}var Jx=800,qx=16,Zx=Date.now;function tE(e){var i=0,t=0;return function(){var r=Zx(),n=qx-(r-t);if(t=r,n>0){if(++i>=Jx)return arguments[0]}else i=0;return e.apply(void 0,arguments)}}function eE(e){return function(){return e}}var iE=function(){try{var e=Dn(Object,"defineProperty");return e({},"",{}),e}catch{}}();const fh=iE;var rE=fh?function(e,i){return fh(e,"toString",{configurable:!0,enumerable:!1,value:eE(i),writable:!0})}:Al;const nE=rE;var sE=tE(nE);const Ly=sE;function oE(e,i){for(var t=-1,r=e==null?0:e.length;++t<r&&i(e[t],t,e)!==!1;);return e}function My(e,i,t,r){for(var n=e.length,s=t+(r?1:-1);r?s--:++s<n;)if(i(e[s],s,e))return s;return-1}function aE(e){return e!==e}function hE(e,i,t){for(var r=t-1,n=e.length;++r<n;)if(e[r]===i)return r;return-1}function pl(e,i,t){return i===i?hE(e,i,t):My(e,aE,t)}function lE(e,i){var t=e==null?0:e.length;return!!t&&pl(e,i,0)>-1}var uE=9007199254740991,cE=/^(?:0|[1-9]\d*)$/;function na(e,i){var t=typeof e;return i=i??uE,!!i&&(t=="number"||t!="symbol"&&cE.test(e))&&e>-1&&e%1==0&&e<i}function gl(e,i,t){i=="__proto__"&&fh?fh(e,i,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[i]=t}function xs(e,i){return e===i||e!==e&&i!==i}var fE=Object.prototype,dE=fE.hasOwnProperty;function ld(e,i,t){var r=e[i];(!(dE.call(e,i)&&xs(r,t))||t===void 0&&!(i in e))&&gl(e,i,t)}function Es(e,i,t,r){var n=!t;t||(t={});for(var s=-1,o=i.length;++s<o;){var a=i[s],h=r?r(t[a],e[a],a,t,e):void 0;h===void 0&&(h=e[a]),n?gl(t,a,h):ld(t,a,h)}return t}var wA=Math.max;function Qy(e,i,t){return i=wA(i===void 0?e.length-1:i,0),function(){for(var r=arguments,n=-1,s=wA(r.length-i,0),o=Array(s);++n<s;)o[n]=r[i+n];n=-1;for(var a=Array(i+1);++n<i;)a[n]=r[n];return a[i]=t(o),Dy(e,this,a)}}function Uy(e,i){return Ly(Qy(e,i,Al),e+"")}var AE=9007199254740991;function ud(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=AE}function xr(e){return e!=null&&ud(e.length)&&!er(e)}function cd(e,i,t){if(!Qe(t))return!1;var r=typeof i;return(r=="number"?xr(t)&&na(i,t.length):r=="string"&&i in t)?xs(t[i],e):!1}function Gy(e){return Uy(function(i,t){var r=-1,n=t.length,s=n>1?t[n-1]:void 0,o=n>2?t[2]:void 0;for(s=e.length>3&&typeof s=="function"?(n--,s):void 0,o&&cd(t[0],t[1],o)&&(s=n<3?void 0:s,n=1),i=Object(i);++r<n;){var a=t[r];a&&e(i,a,r,s)}return i})}var pE=Object.prototype;function vl(e){var i=e&&e.constructor,t=typeof i=="function"&&i.prototype||pE;return e===t}function gE(e,i){for(var t=-1,r=Array(e);++t<e;)r[t]=i(t);return r}var vE="[object Arguments]";function TA(e){return We(e)&&Ki(e)==vE}var ky=Object.prototype,yE=ky.hasOwnProperty,mE=ky.propertyIsEnumerable,IE=TA(function(){return arguments}())?TA:function(e){return We(e)&&yE.call(e,"callee")&&!mE.call(e,"callee")};const ds=IE;function CE(){return!1}var Hy=typeof exports=="object"&&exports&&!exports.nodeType&&exports,BA=Hy&&typeof module=="object"&&module&&!module.nodeType&&module,_E=BA&&BA.exports===Hy,RA=_E?Ei.Buffer:void 0,xE=RA?RA.isBuffer:void 0,EE=xE||CE;const As=EE;var bE="[object Arguments]",wE="[object Array]",TE="[object Boolean]",BE="[object Date]",RE="[object Error]",PE="[object Function]",SE="[object Map]",NE="[object Number]",OE="[object Object]",DE="[object RegExp]",FE="[object Set]",LE="[object String]",ME="[object WeakMap]",QE="[object ArrayBuffer]",UE="[object DataView]",GE="[object Float32Array]",kE="[object Float64Array]",HE="[object Int8Array]",XE="[object Int16Array]",YE="[object Int32Array]",VE="[object Uint8Array]",zE="[object Uint8ClampedArray]",WE="[object Uint16Array]",jE="[object Uint32Array]",ae={};ae[GE]=ae[kE]=ae[HE]=ae[XE]=ae[YE]=ae[VE]=ae[zE]=ae[WE]=ae[jE]=!0;ae[bE]=ae[wE]=ae[QE]=ae[TE]=ae[UE]=ae[BE]=ae[RE]=ae[PE]=ae[SE]=ae[NE]=ae[OE]=ae[DE]=ae[FE]=ae[LE]=ae[ME]=!1;function KE(e){return We(e)&&ud(e.length)&&!!ae[Ki(e)]}function fd(e){return function(i){return e(i)}}var Xy=typeof exports=="object"&&exports&&!exports.nodeType&&exports,zs=Xy&&typeof module=="object"&&module&&!module.nodeType&&module,$E=zs&&zs.exports===Xy,Wl=$E&&Sy.process,JE=function(){try{var e=zs&&zs.require&&zs.require("util").types;return e||Wl&&Wl.binding&&Wl.binding("util")}catch{}}();const ps=JE;var PA=ps&&ps.isTypedArray,qE=PA?fd(PA):KE;const yl=qE;var ZE=Object.prototype,tb=ZE.hasOwnProperty;function Yy(e,i){var t=ce(e),r=!t&&ds(e),n=!t&&!r&&As(e),s=!t&&!r&&!n&&yl(e),o=t||r||n||s,a=o?gE(e.length,String):[],h=a.length;for(var l in e)(i||tb.call(e,l))&&!(o&&(l=="length"||n&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||na(l,h)))&&a.push(l);return a}function Vy(e,i){return function(t){return e(i(t))}}var eb=Vy(Object.keys,Object);const ib=eb;var rb=Object.prototype,nb=rb.hasOwnProperty;function zy(e){if(!vl(e))return ib(e);var i=[];for(var t in Object(e))nb.call(e,t)&&t!="constructor"&&i.push(t);return i}function Hr(e){return xr(e)?Yy(e):zy(e)}function sb(e){var i=[];if(e!=null)for(var t in Object(e))i.push(t);return i}var ob=Object.prototype,ab=ob.hasOwnProperty;function hb(e){if(!Qe(e))return sb(e);var i=vl(e),t=[];for(var r in e)r=="constructor"&&(i||!ab.call(e,r))||t.push(r);return t}function bs(e){return xr(e)?Yy(e,!0):hb(e)}var lb=Gy(function(e,i,t,r){Es(i,bs(i),e,r)});const SA=lb;var ub=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cb=/^\w*$/;function dd(e,i){if(ce(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||ra(e)?!0:cb.test(e)||!ub.test(e)||i!=null&&e in Object(i)}var fb=Dn(Object,"create");const ao=fb;function db(){this.__data__=ao?ao(null):{},this.size=0}function Ab(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}var pb="__lodash_hash_undefined__",gb=Object.prototype,vb=gb.hasOwnProperty;function yb(e){var i=this.__data__;if(ao){var t=i[e];return t===pb?void 0:t}return vb.call(i,e)?i[e]:void 0}var mb=Object.prototype,Ib=mb.hasOwnProperty;function Cb(e){var i=this.__data__;return ao?i[e]!==void 0:Ib.call(i,e)}var _b="__lodash_hash_undefined__";function xb(e,i){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=ao&&i===void 0?_b:i,this}function Rn(e){var i=-1,t=e==null?0:e.length;for(this.clear();++i<t;){var r=e[i];this.set(r[0],r[1])}}Rn.prototype.clear=db;Rn.prototype.delete=Ab;Rn.prototype.get=yb;Rn.prototype.has=Cb;Rn.prototype.set=xb;function Eb(){this.__data__=[],this.size=0}function ml(e,i){for(var t=e.length;t--;)if(xs(e[t][0],i))return t;return-1}var bb=Array.prototype,wb=bb.splice;function Tb(e){var i=this.__data__,t=ml(i,e);if(t<0)return!1;var r=i.length-1;return t==r?i.pop():wb.call(i,t,1),--this.size,!0}function Bb(e){var i=this.__data__,t=ml(i,e);return t<0?void 0:i[t][1]}function Rb(e){return ml(this.__data__,e)>-1}function Pb(e,i){var t=this.__data__,r=ml(t,e);return r<0?(++this.size,t.push([e,i])):t[r][1]=i,this}function Er(e){var i=-1,t=e==null?0:e.length;for(this.clear();++i<t;){var r=e[i];this.set(r[0],r[1])}}Er.prototype.clear=Eb;Er.prototype.delete=Tb;Er.prototype.get=Bb;Er.prototype.has=Rb;Er.prototype.set=Pb;var Sb=Dn(Ei,"Map");const ho=Sb;function Nb(){this.size=0,this.__data__={hash:new Rn,map:new(ho||Er),string:new Rn}}function Ob(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function Il(e,i){var t=e.__data__;return Ob(i)?t[typeof i=="string"?"string":"hash"]:t.map}function Db(e){var i=Il(this,e).delete(e);return this.size-=i?1:0,i}function Fb(e){return Il(this,e).get(e)}function Lb(e){return Il(this,e).has(e)}function Mb(e,i){var t=Il(this,e),r=t.size;return t.set(e,i),this.size+=t.size==r?0:1,this}function br(e){var i=-1,t=e==null?0:e.length;for(this.clear();++i<t;){var r=e[i];this.set(r[0],r[1])}}br.prototype.clear=Nb;br.prototype.delete=Db;br.prototype.get=Fb;br.prototype.has=Lb;br.prototype.set=Mb;var Qb="Expected a function";function Ad(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new TypeError(Qb);var t=function(){var r=arguments,n=i?i.apply(this,r):r[0],s=t.cache;if(s.has(n))return s.get(n);var o=e.apply(this,r);return t.cache=s.set(n,o)||s,o};return t.cache=new(Ad.Cache||br),t}Ad.Cache=br;var Ub=500;function Gb(e){var i=Ad(e,function(r){return t.size===Ub&&t.clear(),r}),t=i.cache;return i}var kb=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Hb=/\\(\\)?/g,Xb=Gb(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(kb,function(t,r,n,s){i.push(n?s.replace(Hb,"$1"):r||t)}),i});const Yb=Xb;function _r(e){return e==null?"":ad(e)}function sa(e,i){return ce(e)?e:dd(e,i)?[e]:Yb(_r(e))}var Vb=1/0;function ws(e){if(typeof e=="string"||ra(e))return e;var i=e+"";return i=="0"&&1/e==-Vb?"-0":i}function Cl(e,i){i=sa(i,e);for(var t=0,r=i.length;e!=null&&t<r;)e=e[ws(i[t++])];return t&&t==r?e:void 0}function zb(e,i,t){var r=e==null?void 0:Cl(e,i);return r===void 0?t:r}function pd(e,i){for(var t=-1,r=i.length,n=e.length;++t<r;)e[n+t]=i[t];return e}var NA=vi?vi.isConcatSpreadable:void 0;function Wb(e){return ce(e)||ds(e)||!!(NA&&e&&e[NA])}function Wy(e,i,t,r,n){var s=-1,o=e.length;for(t||(t=Wb),n||(n=[]);++s<o;){var a=e[s];i>0&&t(a)?i>1?Wy(a,i-1,t,r,n):pd(n,a):r||(n[n.length]=a)}return n}function jb(e){var i=e==null?0:e.length;return i?Wy(e,1):[]}function Kb(e){return Ly(Qy(e,void 0,jb),e+"")}var $b=Vy(Object.getPrototypeOf,Object);const gd=$b;var Jb="[object Object]",qb=Function.prototype,Zb=Object.prototype,jy=qb.toString,tw=Zb.hasOwnProperty,ew=jy.call(Object);function Ky(e){if(!We(e)||Ki(e)!=Jb)return!1;var i=gd(e);if(i===null)return!0;var t=tw.call(i,"constructor")&&i.constructor;return typeof t=="function"&&t instanceof t&&jy.call(t)==ew}var iw="[object DOMException]",rw="[object Error]";function $y(e){if(!We(e))return!1;var i=Ki(e);return i==rw||i==iw||typeof e.message=="string"&&typeof e.name=="string"&&!Ky(e)}var nw=Uy(function(e,i){try{return Dy(e,void 0,i)}catch(t){return $y(t)?t:new Error(t)}});const sw=nw;function Jy(e,i,t){var r=-1,n=e.length;i<0&&(i=-i>n?0:n+i),t=t>n?n:t,t<0&&(t+=n),n=i>t?0:t-i>>>0,i>>>=0;for(var s=Array(n);++r<n;)s[r]=e[r+i];return s}function qy(e,i,t){var r=e.length;return t=t===void 0?r:t,!i&&t>=r?e:Jy(e,i,t)}var ow="\\ud800-\\udfff",aw="\\u0300-\\u036f",hw="\\ufe20-\\ufe2f",lw="\\u20d0-\\u20ff",uw=aw+hw+lw,cw="\\ufe0e\\ufe0f",fw="\\u200d",dw=RegExp("["+fw+ow+uw+cw+"]");function Zy(e){return dw.test(e)}function Aw(e){return e.split("")}var tm="\\ud800-\\udfff",pw="\\u0300-\\u036f",gw="\\ufe20-\\ufe2f",vw="\\u20d0-\\u20ff",yw=pw+gw+vw,mw="\\ufe0e\\ufe0f",Iw="["+tm+"]",Wu="["+yw+"]",ju="\\ud83c[\\udffb-\\udfff]",Cw="(?:"+Wu+"|"+ju+")",em="[^"+tm+"]",im="(?:\\ud83c[\\udde6-\\uddff]){2}",rm="[\\ud800-\\udbff][\\udc00-\\udfff]",_w="\\u200d",nm=Cw+"?",sm="["+mw+"]?",xw="(?:"+_w+"(?:"+[em,im,rm].join("|")+")"+sm+nm+")*",Ew=sm+nm+xw,bw="(?:"+[em+Wu+"?",Wu,im,rm,Iw].join("|")+")",ww=RegExp(ju+"(?="+ju+")|"+bw+Ew,"g");function Tw(e){return e.match(ww)||[]}function Ku(e){return Zy(e)?Tw(e):Aw(e)}function Bw(e){return function(i){i=_r(i);var t=Zy(i)?Ku(i):void 0,r=t?t[0]:i.charAt(0),n=t?qy(t,1).join(""):i.slice(1);return r[e]()+n}}var Rw=Bw("toUpperCase");const UH=Rw;function Pw(e,i,t,r){var n=-1,s=e==null?0:e.length;for(r&&s&&(t=e[++n]);++n<s;)t=i(t,e[n],n,e);return t}function om(e){return function(i){return e==null?void 0:e[i]}}var Sw={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Nw=om(Sw);const Ow=Nw;var Dw=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Fw="\\u0300-\\u036f",Lw="\\ufe20-\\ufe2f",Mw="\\u20d0-\\u20ff",Qw=Fw+Lw+Mw,Uw="["+Qw+"]",Gw=RegExp(Uw,"g");function kw(e){return e=_r(e),e&&e.replace(Dw,Ow).replace(Gw,"")}var Hw=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Xw(e){return e.match(Hw)||[]}var Yw=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Vw(e){return Yw.test(e)}var am="\\ud800-\\udfff",zw="\\u0300-\\u036f",Ww="\\ufe20-\\ufe2f",jw="\\u20d0-\\u20ff",Kw=zw+Ww+jw,hm="\\u2700-\\u27bf",lm="a-z\\xdf-\\xf6\\xf8-\\xff",$w="\\xac\\xb1\\xd7\\xf7",Jw="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",qw="\\u2000-\\u206f",Zw=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",um="A-Z\\xc0-\\xd6\\xd8-\\xde",t1="\\ufe0e\\ufe0f",cm=$w+Jw+qw+Zw,fm="['’]",OA="["+cm+"]",e1="["+Kw+"]",dm="\\d+",i1="["+hm+"]",Am="["+lm+"]",pm="[^"+am+cm+dm+hm+lm+um+"]",r1="\\ud83c[\\udffb-\\udfff]",n1="(?:"+e1+"|"+r1+")",s1="[^"+am+"]",gm="(?:\\ud83c[\\udde6-\\uddff]){2}",vm="[\\ud800-\\udbff][\\udc00-\\udfff]",jn="["+um+"]",o1="\\u200d",DA="(?:"+Am+"|"+pm+")",a1="(?:"+jn+"|"+pm+")",FA="(?:"+fm+"(?:d|ll|m|re|s|t|ve))?",LA="(?:"+fm+"(?:D|LL|M|RE|S|T|VE))?",ym=n1+"?",mm="["+t1+"]?",h1="(?:"+o1+"(?:"+[s1,gm,vm].join("|")+")"+mm+ym+")*",l1="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",u1="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",c1=mm+ym+h1,f1="(?:"+[i1,gm,vm].join("|")+")"+c1,d1=RegExp([jn+"?"+Am+"+"+FA+"(?="+[OA,jn,"$"].join("|")+")",a1+"+"+LA+"(?="+[OA,jn+DA,"$"].join("|")+")",jn+"?"+DA+"+"+FA,jn+"+"+LA,u1,l1,dm,f1].join("|"),"g");function A1(e){return e.match(d1)||[]}function p1(e,i,t){return e=_r(e),i=t?void 0:i,i===void 0?Vw(e)?A1(e):Xw(e):e.match(i)||[]}var g1="['’]",v1=RegExp(g1,"g");function y1(e){return function(i){return Pw(p1(kw(i).replace(v1,"")),e,"")}}var m1=Ei.isFinite,I1=Math.min;function Im(e){var i=Math[e];return function(t,r){if(t=ch(t),r=r==null?0:I1(hd(r),292),r&&m1(t)){var n=(_r(t)+"e").split("e"),s=i(n[0]+"e"+(+n[1]+r));return n=(_r(s)+"e").split("e"),+(n[0]+"e"+(+n[1]-r))}return i(t)}}var C1=Im("ceil");const GH=C1;function _1(){this.__data__=new Er,this.size=0}function x1(e){var i=this.__data__,t=i.delete(e);return this.size=i.size,t}function E1(e){return this.__data__.get(e)}function b1(e){return this.__data__.has(e)}var w1=200;function T1(e,i){var t=this.__data__;if(t instanceof Er){var r=t.__data__;if(!ho||r.length<w1-1)return r.push([e,i]),this.size=++t.size,this;t=this.__data__=new br(r)}return t.set(e,i),this.size=t.size,this}function Hi(e){var i=this.__data__=new Er(e);this.size=i.size}Hi.prototype.clear=_1;Hi.prototype.delete=x1;Hi.prototype.get=E1;Hi.prototype.has=b1;Hi.prototype.set=T1;function B1(e,i){return e&&Es(i,Hr(i),e)}function R1(e,i){return e&&Es(i,bs(i),e)}var Cm=typeof exports=="object"&&exports&&!exports.nodeType&&exports,MA=Cm&&typeof module=="object"&&module&&!module.nodeType&&module,P1=MA&&MA.exports===Cm,QA=P1?Ei.Buffer:void 0,UA=QA?QA.allocUnsafe:void 0;function _m(e,i){if(i)return e.slice();var t=e.length,r=UA?UA(t):new e.constructor(t);return e.copy(r),r}function vd(e,i){for(var t=-1,r=e==null?0:e.length,n=0,s=[];++t<r;){var o=e[t];i(o,t,e)&&(s[n++]=o)}return s}function xm(){return[]}var S1=Object.prototype,N1=S1.propertyIsEnumerable,GA=Object.getOwnPropertySymbols,O1=GA?function(e){return e==null?[]:(e=Object(e),vd(GA(e),function(i){return N1.call(e,i)}))}:xm;const yd=O1;function D1(e,i){return Es(e,yd(e),i)}var F1=Object.getOwnPropertySymbols,L1=F1?function(e){for(var i=[];e;)pd(i,yd(e)),e=gd(e);return i}:xm;const Em=L1;function M1(e,i){return Es(e,Em(e),i)}function bm(e,i,t){var r=i(e);return ce(e)?r:pd(r,t(e))}function $u(e){return bm(e,Hr,yd)}function wm(e){return bm(e,bs,Em)}var Q1=Dn(Ei,"DataView");const Ju=Q1;var U1=Dn(Ei,"Promise");const qu=U1;var G1=Dn(Ei,"Set");const ts=G1;var kA="[object Map]",k1="[object Object]",HA="[object Promise]",XA="[object Set]",YA="[object WeakMap]",VA="[object DataView]",H1=On(Ju),X1=On(ho),Y1=On(qu),V1=On(ts),z1=On(zu),tn=Ki;(Ju&&tn(new Ju(new ArrayBuffer(1)))!=VA||ho&&tn(new ho)!=kA||qu&&tn(qu.resolve())!=HA||ts&&tn(new ts)!=XA||zu&&tn(new zu)!=YA)&&(tn=function(e){var i=Ki(e),t=i==k1?e.constructor:void 0,r=t?On(t):"";if(r)switch(r){case H1:return VA;case X1:return kA;case Y1:return HA;case V1:return XA;case z1:return YA}return i});const gs=tn;var W1=Object.prototype,j1=W1.hasOwnProperty;function K1(e){var i=e.length,t=new e.constructor(i);return i&&typeof e[0]=="string"&&j1.call(e,"index")&&(t.index=e.index,t.input=e.input),t}var $1=Ei.Uint8Array;const dh=$1;function md(e){var i=new e.constructor(e.byteLength);return new dh(i).set(new dh(e)),i}function J1(e,i){var t=i?md(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}var q1=/\w*$/;function Z1(e){var i=new e.constructor(e.source,q1.exec(e));return i.lastIndex=e.lastIndex,i}var zA=vi?vi.prototype:void 0,WA=zA?zA.valueOf:void 0;function tT(e){return WA?Object(WA.call(e)):{}}function Tm(e,i){var t=i?md(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}var eT="[object Boolean]",iT="[object Date]",rT="[object Map]",nT="[object Number]",sT="[object RegExp]",oT="[object Set]",aT="[object String]",hT="[object Symbol]",lT="[object ArrayBuffer]",uT="[object DataView]",cT="[object Float32Array]",fT="[object Float64Array]",dT="[object Int8Array]",AT="[object Int16Array]",pT="[object Int32Array]",gT="[object Uint8Array]",vT="[object Uint8ClampedArray]",yT="[object Uint16Array]",mT="[object Uint32Array]";function IT(e,i,t){var r=e.constructor;switch(i){case lT:return md(e);case eT:case iT:return new r(+e);case uT:return J1(e,t);case cT:case fT:case dT:case AT:case pT:case gT:case vT:case yT:case mT:return Tm(e,t);case rT:return new r;case nT:case aT:return new r(e);case sT:return Z1(e);case oT:return new r;case hT:return tT(e)}}function Bm(e){return typeof e.constructor=="function"&&!vl(e)?Kx(gd(e)):{}}var CT="[object Map]";function _T(e){return We(e)&&gs(e)==CT}var jA=ps&&ps.isMap,xT=jA?fd(jA):_T;const ET=xT;var bT="[object Set]";function wT(e){return We(e)&&gs(e)==bT}var KA=ps&&ps.isSet,TT=KA?fd(KA):wT;const BT=TT;var RT=1,PT=2,ST=4,Rm="[object Arguments]",NT="[object Array]",OT="[object Boolean]",DT="[object Date]",FT="[object Error]",Pm="[object Function]",LT="[object GeneratorFunction]",MT="[object Map]",QT="[object Number]",Sm="[object Object]",UT="[object RegExp]",GT="[object Set]",kT="[object String]",HT="[object Symbol]",XT="[object WeakMap]",YT="[object ArrayBuffer]",VT="[object DataView]",zT="[object Float32Array]",WT="[object Float64Array]",jT="[object Int8Array]",KT="[object Int16Array]",$T="[object Int32Array]",JT="[object Uint8Array]",qT="[object Uint8ClampedArray]",ZT="[object Uint16Array]",tB="[object Uint32Array]",re={};re[Rm]=re[NT]=re[YT]=re[VT]=re[OT]=re[DT]=re[zT]=re[WT]=re[jT]=re[KT]=re[$T]=re[MT]=re[QT]=re[Sm]=re[UT]=re[GT]=re[kT]=re[HT]=re[JT]=re[qT]=re[ZT]=re[tB]=!0;re[FT]=re[Pm]=re[XT]=!1;function Ws(e,i,t,r,n,s){var o,a=i&RT,h=i&PT,l=i&ST;if(t&&(o=n?t(e,r,n,s):t(e)),o!==void 0)return o;if(!Qe(e))return e;var u=ce(e);if(u){if(o=K1(e),!a)return Fy(e,o)}else{var c=gs(e),f=c==Pm||c==LT;if(As(e))return _m(e,a);if(c==Sm||c==Rm||f&&!n){if(o=h||f?{}:Bm(e),!a)return h?M1(e,R1(o,e)):D1(e,B1(o,e))}else{if(!re[c])return n?e:{};o=IT(e,c,a)}}s||(s=new Hi);var d=s.get(e);if(d)return d;s.set(e,o),BT(e)?e.forEach(function(g){o.add(Ws(g,i,t,g,e,s))}):ET(e)&&e.forEach(function(g,y){o.set(y,Ws(g,i,t,y,e,s))});var A=l?h?wm:$u:h?bs:Hr,p=u?void 0:A(e);return oE(p||e,function(g,y){p&&(y=g,g=e[y]),ld(o,y,Ws(g,i,t,y,e,s))}),o}var eB=4;function kH(e){return Ws(e,eB)}var iB=1,rB=4;function $A(e){return Ws(e,iB|rB)}var nB="__lodash_hash_undefined__";function sB(e){return this.__data__.set(e,nB),this}function oB(e){return this.__data__.has(e)}function lo(e){var i=-1,t=e==null?0:e.length;for(this.__data__=new br;++i<t;)this.add(e[i])}lo.prototype.add=lo.prototype.push=sB;lo.prototype.has=oB;function Nm(e,i){for(var t=-1,r=e==null?0:e.length;++t<r;)if(i(e[t],t,e))return!0;return!1}function Om(e,i){return e.has(i)}var aB=1,hB=2;function Dm(e,i,t,r,n,s){var o=t&aB,a=e.length,h=i.length;if(a!=h&&!(o&&h>a))return!1;var l=s.get(e),u=s.get(i);if(l&&u)return l==i&&u==e;var c=-1,f=!0,d=t&hB?new lo:void 0;for(s.set(e,i),s.set(i,e);++c<a;){var A=e[c],p=i[c];if(r)var g=o?r(p,A,c,i,e,s):r(A,p,c,e,i,s);if(g!==void 0){if(g)continue;f=!1;break}if(d){if(!Nm(i,function(y,I){if(!Om(d,I)&&(A===y||n(A,y,t,r,s)))return d.push(I)})){f=!1;break}}else if(!(A===p||n(A,p,t,r,s))){f=!1;break}}return s.delete(e),s.delete(i),f}function lB(e){var i=-1,t=Array(e.size);return e.forEach(function(r,n){t[++i]=[n,r]}),t}function Id(e){var i=-1,t=Array(e.size);return e.forEach(function(r){t[++i]=r}),t}var uB=1,cB=2,fB="[object Boolean]",dB="[object Date]",AB="[object Error]",pB="[object Map]",gB="[object Number]",vB="[object RegExp]",yB="[object Set]",mB="[object String]",IB="[object Symbol]",CB="[object ArrayBuffer]",_B="[object DataView]",JA=vi?vi.prototype:void 0,jl=JA?JA.valueOf:void 0;function xB(e,i,t,r,n,s,o){switch(t){case _B:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case CB:return!(e.byteLength!=i.byteLength||!s(new dh(e),new dh(i)));case fB:case dB:case gB:return xs(+e,+i);case AB:return e.name==i.name&&e.message==i.message;case vB:case mB:return e==i+"";case pB:var a=lB;case yB:var h=r&uB;if(a||(a=Id),e.size!=i.size&&!h)return!1;var l=o.get(e);if(l)return l==i;r|=cB,o.set(e,i);var u=Dm(a(e),a(i),r,n,s,o);return o.delete(e),u;case IB:if(jl)return jl.call(e)==jl.call(i)}return!1}var EB=1,bB=Object.prototype,wB=bB.hasOwnProperty;function TB(e,i,t,r,n,s){var o=t&EB,a=$u(e),h=a.length,l=$u(i),u=l.length;if(h!=u&&!o)return!1;for(var c=h;c--;){var f=a[c];if(!(o?f in i:wB.call(i,f)))return!1}var d=s.get(e),A=s.get(i);if(d&&A)return d==i&&A==e;var p=!0;s.set(e,i),s.set(i,e);for(var g=o;++c<h;){f=a[c];var y=e[f],I=i[f];if(r)var E=o?r(I,y,f,i,e,s):r(y,I,f,e,i,s);if(!(E===void 0?y===I||n(y,I,t,r,s):E)){p=!1;break}g||(g=f=="constructor")}if(p&&!g){var w=e.constructor,T=i.constructor;w!=T&&"constructor"in e&&"constructor"in i&&!(typeof w=="function"&&w instanceof w&&typeof T=="function"&&T instanceof T)&&(p=!1)}return s.delete(e),s.delete(i),p}var BB=1,qA="[object Arguments]",ZA="[object Array]",pa="[object Object]",RB=Object.prototype,tp=RB.hasOwnProperty;function PB(e,i,t,r,n,s){var o=ce(e),a=ce(i),h=o?ZA:gs(e),l=a?ZA:gs(i);h=h==qA?pa:h,l=l==qA?pa:l;var u=h==pa,c=l==pa,f=h==l;if(f&&As(e)){if(!As(i))return!1;o=!0,u=!1}if(f&&!u)return s||(s=new Hi),o||yl(e)?Dm(e,i,t,r,n,s):xB(e,i,h,t,r,n,s);if(!(t&BB)){var d=u&&tp.call(e,"__wrapped__"),A=c&&tp.call(i,"__wrapped__");if(d||A){var p=d?e.value():e,g=A?i.value():i;return s||(s=new Hi),n(p,g,t,r,s)}}return f?(s||(s=new Hi),TB(e,i,t,r,n,s)):!1}function _l(e,i,t,r,n){return e===i?!0:e==null||i==null||!We(e)&&!We(i)?e!==e&&i!==i:PB(e,i,t,r,_l,n)}var SB=1,NB=2;function OB(e,i,t,r){var n=t.length,s=n,o=!r;if(e==null)return!s;for(e=Object(e);n--;){var a=t[n];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++n<s;){a=t[n];var h=a[0],l=e[h],u=a[1];if(o&&a[2]){if(l===void 0&&!(h in e))return!1}else{var c=new Hi;if(r)var f=r(l,u,h,e,i,c);if(!(f===void 0?_l(u,l,SB|NB,r,c):f))return!1}}return!0}function Fm(e){return e===e&&!Qe(e)}function DB(e){for(var i=Hr(e),t=i.length;t--;){var r=i[t],n=e[r];i[t]=[r,n,Fm(n)]}return i}function Lm(e,i){return function(t){return t==null?!1:t[e]===i&&(i!==void 0||e in Object(t))}}function FB(e){var i=DB(e);return i.length==1&&i[0][2]?Lm(i[0][0],i[0][1]):function(t){return t===e||OB(t,e,i)}}function LB(e,i){return e!=null&&i in Object(e)}function Mm(e,i,t){i=sa(i,e);for(var r=-1,n=i.length,s=!1;++r<n;){var o=ws(i[r]);if(!(s=e!=null&&t(e,o)))break;e=e[o]}return s||++r!=n?s:(n=e==null?0:e.length,!!n&&ud(n)&&na(o,n)&&(ce(e)||ds(e)))}function Qm(e,i){return e!=null&&Mm(e,i,LB)}var MB=1,QB=2;function UB(e,i){return dd(e)&&Fm(i)?Lm(ws(e),i):function(t){var r=zb(t,e);return r===void 0&&r===i?Qm(t,e):_l(i,r,MB|QB)}}function GB(e){return function(i){return i==null?void 0:i[e]}}function kB(e){return function(i){return Cl(i,e)}}function HB(e){return dd(e)?GB(ws(e)):kB(e)}function or(e){return typeof e=="function"?e:e==null?Al:typeof e=="object"?ce(e)?UB(e[0],e[1]):FB(e):HB(e)}function XB(e,i,t,r){for(var n=-1,s=e==null?0:e.length;++n<s;){var o=e[n];i(r,o,t(o),e)}return r}function YB(e){return function(i,t,r){for(var n=-1,s=Object(i),o=r(i),a=o.length;a--;){var h=o[e?a:++n];if(t(s[h],h,s)===!1)break}return i}}var VB=YB();const Um=VB;function zB(e,i){return e&&Um(e,i,Hr)}function WB(e,i){return function(t,r){if(t==null)return t;if(!xr(t))return e(t,r);for(var n=t.length,s=i?n:-1,o=Object(t);(i?s--:++s<n)&&r(o[s],s,o)!==!1;);return t}}var jB=WB(zB);const xl=jB;function KB(e,i,t,r){return xl(e,function(n,s,o){i(r,n,t(n),o)}),r}function $B(e,i){return function(t,r){var n=ce(t)?XB:KB,s=i?i():{};return n(t,e,or(r),s)}}var JB=function(){return Ei.Date.now()};const Kl=JB;var qB="Expected a function",ZB=Math.max,t2=Math.min;function Zu(e,i,t){var r,n,s,o,a,h,l=0,u=!1,c=!1,f=!0;if(typeof e!="function")throw new TypeError(qB);i=ch(i)||0,Qe(t)&&(u=!!t.leading,c="maxWait"in t,s=c?ZB(ch(t.maxWait)||0,i):s,f="trailing"in t?!!t.trailing:f);function d(_){var F=r,R=n;return r=n=void 0,l=_,o=e.apply(R,F),o}function A(_){return l=_,a=setTimeout(y,i),u?d(_):o}function p(_){var F=_-h,R=_-l,S=i-F;return c?t2(S,s-R):S}function g(_){var F=_-h,R=_-l;return h===void 0||F>=i||F<0||c&&R>=s}function y(){var _=Kl();if(g(_))return I(_);a=setTimeout(y,p(_))}function I(_){return a=void 0,f&&r?d(_):(r=n=void 0,o)}function E(){a!==void 0&&clearTimeout(a),l=0,r=h=n=a=void 0}function w(){return a===void 0?o:I(Kl())}function T(){var _=Kl(),F=g(_);if(r=arguments,n=this,h=_,F){if(a===void 0)return A(h);if(c)return clearTimeout(a),a=setTimeout(y,i),d(h)}return a===void 0&&(a=setTimeout(y,i)),o}return T.cancel=E,T.flush=w,T}function tc(e,i,t){(t!==void 0&&!xs(e[i],t)||t===void 0&&!(i in e))&&gl(e,i,t)}function e2(e){return We(e)&&xr(e)}function ec(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}function i2(e){return Es(e,bs(e))}function r2(e,i,t,r,n,s,o){var a=ec(e,t),h=ec(i,t),l=o.get(h);if(l){tc(e,t,l);return}var u=s?s(a,h,t+"",e,i,o):void 0,c=u===void 0;if(c){var f=ce(h),d=!f&&As(h),A=!f&&!d&&yl(h);u=h,f||d||A?ce(a)?u=a:e2(a)?u=Fy(a):d?(c=!1,u=_m(h,!0)):A?(c=!1,u=Tm(h,!0)):u=[]:Ky(h)||ds(h)?(u=a,ds(a)?u=i2(a):(!Qe(a)||er(a))&&(u=Bm(h))):c=!1}c&&(o.set(h,u),n(u,h,r,s,o),o.delete(h)),tc(e,t,u)}function Gm(e,i,t,r,n){e!==i&&Um(i,function(s,o){if(n||(n=new Hi),Qe(s))r2(e,i,o,t,Gm,r,n);else{var a=r?r(ec(e,o),s,o+"",e,i,n):void 0;a===void 0&&(a=s),tc(e,o,a)}},bs)}function n2(e,i,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(i,e[r]))return!0;return!1}function s2(e){var i=e==null?0:e.length;return i?e[i-1]:void 0}var o2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},a2=om(o2);const h2=a2;var km=/[&<>"']/g,l2=RegExp(km.source);function u2(e){return e=_r(e),e&&l2.test(e)?e.replace(km,h2):e}function Hm(e,i){var t=[];return xl(e,function(r,n,s){i(r,n,s)&&t.push(r)}),t}function HH(e,i){var t=ce(e)?vd:Hm;return t(e,or(i))}function c2(e){return function(i,t,r){var n=Object(i);if(!xr(i)){var s=or(t);i=Hr(i),t=function(a){return s(n[a],a,n)}}var o=e(i,t,r);return o>-1?n[s?i[o]:o]:void 0}}var f2=Math.max;function d2(e,i,t){var r=e==null?0:e.length;if(!r)return-1;var n=t==null?0:hd(t);return n<0&&(n=f2(r+n,0)),My(e,or(i),n)}var A2=c2(d2);const XH=A2;function p2(e,i){var t=-1,r=xr(e)?Array(e.length):[];return xl(e,function(n,s,o){r[++t]=i(n,s,o)}),r}function YH(e,i){var t=ce(e)?dl:p2;return t(e,or(i))}var g2=Im("floor");const VH=g2;var v2=Object.prototype,y2=v2.hasOwnProperty,m2=$B(function(e,i,t){y2.call(e,t)?e[t].push(i):gl(e,t,[i])});const zH=m2;function I2(e,i){return e>i}var C2=Object.prototype,_2=C2.hasOwnProperty;function x2(e,i){return e!=null&&_2.call(e,i)}function Xm(e,i){return e!=null&&Mm(e,i,x2)}var E2="[object String]";function b2(e){return typeof e=="string"||!ce(e)&&We(e)&&Ki(e)==E2}function Ym(e,i){return dl(i,function(t){return e[t]})}function w2(e){return e==null?[]:Ym(e,Hr(e))}var T2=Math.max;function WH(e,i,t,r){e=xr(e)?e:w2(e),t=t&&!r?hd(t):0;var n=e.length;return t<0&&(t=T2(n+t,0)),b2(e)?t<=n&&e.indexOf(i,t)>-1:!!n&&pl(e,i,t)>-1}function B2(e,i){return i.length<2?e:Cl(e,Jy(i,0,-1))}var R2="[object Boolean]";function P2(e){return e===!0||e===!1||We(e)&&Ki(e)==R2}var S2="[object Map]",N2="[object Set]",O2=Object.prototype,D2=O2.hasOwnProperty;function Cd(e){if(e==null)return!0;if(xr(e)&&(ce(e)||typeof e=="string"||typeof e.splice=="function"||As(e)||yl(e)||ds(e)))return!e.length;var i=gs(e);if(i==S2||i==N2)return!e.size;if(vl(e))return!zy(e).length;for(var t in e)if(D2.call(e,t))return!1;return!0}function ep(e,i){return _l(e,i)}var F2="[object Number]";function Fe(e){return typeof e=="number"||We(e)&&Ki(e)==F2}function jH(e){return Fe(e)&&e!=+e}function KH(e){return e===null}function ic(e){return e===void 0}var L2=y1(function(e,i,t){return e+(t?"-":"")+i.toLowerCase()});const $H=L2;function M2(e,i,t){for(var r=-1,n=e.length;++r<n;){var s=e[r],o=i(s);if(o!=null&&(a===void 0?o===o&&!ra(o):t(o,a)))var a=o,h=s}return h}function Q2(e){return e&&e.length?M2(e,Al,I2):void 0}var U2=Gy(function(e,i,t){Gm(e,i,t)});const uo=U2;var G2="Expected a function";function Vm(e){if(typeof e!="function")throw new TypeError(G2);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function k2(e,i){return i=sa(i,e),e=B2(e,i),e==null||delete e[ws(s2(i))]}function zm(e,i,t,r){if(!Qe(e))return e;i=sa(i,e);for(var n=-1,s=i.length,o=s-1,a=e;a!=null&&++n<s;){var h=ws(i[n]),l=t;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(n!=o){var u=a[h];l=r?r(u,h,a):void 0,l===void 0&&(l=Qe(u)?u:na(i[n+1])?[]:{})}ld(a,h,l),a=a[h]}return e}function Wm(e,i,t){for(var r=-1,n=i.length,s={};++r<n;){var o=i[r],a=Cl(e,o);t(a,o)&&zm(s,sa(o,e),a)}return s}function H2(e,i){if(e==null)return{};var t=dl(wm(e),function(r){return[r]});return i=or(i),Wm(e,t,function(r,n){return i(r,n[0])})}function JH(e,i){return H2(e,Vm(or(i)))}function X2(e,i){return Wm(e,i,function(t,r){return Qm(e,r)})}var Y2=Kb(function(e,i){return e==null?{}:X2(e,i)});const jm=Y2;var V2=Array.prototype,z2=V2.splice;function W2(e,i){for(var t=e?i.length:0,r=t-1;t--;){var n=i[t];if(t==r||n!==s){var s=n;na(n)?z2.call(e,n,1):k2(e,n)}}return e}function qH(e,i){var t=ce(e)?vd:Hm;return t(e,Vm(or(i)))}function ZH(e,i){var t=[];if(!(e&&e.length))return t;var r=-1,n=[],s=e.length;for(i=or(i);++r<s;){var o=e[r];i(o,r,e)&&(t.push(o),n.push(r))}return W2(e,n),t}function t4(e,i,t){return e==null?e:zm(e,i,t)}function j2(e,i){var t;return xl(e,function(r,n,s){return t=i(r,n,s),!t}),!!t}function e4(e,i,t){var r=ce(e)?Nm:j2;return t&&cd(e,i,t)&&(i=void 0),r(e,or(i))}var Km=Object.prototype,K2=Km.hasOwnProperty;function ip(e,i,t,r){return e===void 0||xs(e,Km[t])&&!K2.call(r,t)?i:e}var $2={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function J2(e){return"\\"+$2[e]}var q2=/<%=([\s\S]+?)%>/g;const $m=q2;var Z2=/<%-([\s\S]+?)%>/g;const tR=Z2;var eR=/<%([\s\S]+?)%>/g;const iR=eR;var rR={escape:tR,evaluate:iR,interpolate:$m,variable:"",imports:{_:{escape:u2}}};const rp=rR;var nR="Invalid `variable` option passed into `_.template`",sR=/\b__p \+= '';/g,oR=/\b(__p \+=) '' \+/g,aR=/(__e\(.*?\)|\b__t\)) \+\n'';/g,hR=/[()=,{}\[\]\/\s]/,lR=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ga=/($^)/,uR=/['\n\r\u2028\u2029\\]/g,cR=Object.prototype,np=cR.hasOwnProperty;function i4(e,i,t){var r=rp.imports._.templateSettings||rp;t&&cd(e,i,t)&&(i=void 0),e=_r(e),i=SA({},i,r,ip);var n=SA({},i.imports,r.imports,ip),s=Hr(n),o=Ym(n,s),a,h,l=0,u=i.interpolate||ga,c="__p += '",f=RegExp((i.escape||ga).source+"|"+u.source+"|"+(u===$m?lR:ga).source+"|"+(i.evaluate||ga).source+"|$","g"),d=np.call(i,"sourceURL")?"//# sourceURL="+(i.sourceURL+"").replace(/\s/g," ")+`
`:"";e.replace(f,function(g,y,I,E,w,T){return I||(I=E),c+=e.slice(l,T).replace(uR,J2),y&&(a=!0,c+=`' +
__e(`+y+`) +
'`),w&&(h=!0,c+=`';
`+w+`;
__p += '`),I&&(c+=`' +
((__t = (`+I+`)) == null ? '' : __t) +
'`),l=T+g.length,g}),c+=`';
`;var A=np.call(i,"variable")&&i.variable;if(!A)c=`with (obj) {
`+c+`
}
`;else if(hR.test(A))throw new Error(nR);c=(h?c.replace(sR,""):c).replace(oR,"$1").replace(aR,"$1;"),c="function("+(A||"obj")+`) {
`+(A?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(a?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+c+`return __p
}`;var p=sw(function(){return Function(s,d+"return "+c).apply(void 0,o)});if(p.source=c,$y(p))throw p;return p}var fR="Expected a function";function sp(e,i,t){var r=!0,n=!0;if(typeof e!="function")throw new TypeError(fR);return Qe(t)&&(r="leading"in t?!!t.leading:r,n="trailing"in t?!!t.trailing:n),Zu(e,i,{leading:r,maxWait:i,trailing:n})}function dR(e,i){for(var t=e.length;t--&&pl(i,e[t],0)>-1;);return t}function AR(e,i){for(var t=-1,r=e.length;++t<r&&pl(i,e[t],0)>-1;);return t}function r4(e,i,t){if(e=_r(e),e&&(t||i===void 0))return Oy(e);if(!e||!(i=ad(i)))return e;var r=Ku(e),n=Ku(i),s=AR(r,n),o=dR(r,n)+1;return qy(r,s,o).join("")}var pR=1/0,gR=ts&&1/Id(new ts([,-0]))[1]==pR?function(e){return new ts(e)}:$x;const vR=gR;var yR=200;function mR(e,i,t){var r=-1,n=lE,s=e.length,o=!0,a=[],h=a;if(t)o=!1,n=n2;else if(s>=yR){var l=i?null:vR(e);if(l)return Id(l);o=!1,n=Om,h=new lo}else h=i?[]:a;t:for(;++r<s;){var u=e[r],c=i?i(u):u;if(u=t||u!==0?u:0,o&&c===c){for(var f=h.length;f--;)if(h[f]===c)continue t;i&&h.push(c),a.push(u)}else n(h,c,t)||(h!==a&&h.push(c),a.push(u))}return a}function n4(e){return e&&e.length?mR(e):[]}/*!
 * @pixi/math - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var co=Math.PI*2,El=180/Math.PI,yi=Math.PI/180,ne;(function(e){e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC"})(ne||(ne={}));var M=function(){function e(i,t){i===void 0&&(i=0),t===void 0&&(t=0),this.x=0,this.y=0,this.x=i,this.y=t}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(i){return this.set(i.x,i.y),this},e.prototype.copyTo=function(i){return i.set(this.x,this.y),i},e.prototype.equals=function(i){return i.x===this.x&&i.y===this.y},e.prototype.set=function(i,t){return i===void 0&&(i=0),t===void 0&&(t=i),this.x=i,this.y=t,this},e.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},e}(),va=[new M,new M,new M,new M],Tt=function(){function e(i,t,r,n){i===void 0&&(i=0),t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),this.x=Number(i),this.y=Number(t),this.width=Number(r),this.height=Number(n),this.type=ne.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(i){return this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height,this},e.prototype.copyTo=function(i){return i.x=this.x,i.y=this.y,i.width=this.width,i.height=this.height,i},e.prototype.contains=function(i,t){return this.width<=0||this.height<=0?!1:i>=this.x&&i<this.x+this.width&&t>=this.y&&t<this.y+this.height},e.prototype.intersects=function(i,t){if(!t){var r=this.x<i.x?i.x:this.x,n=this.right>i.right?i.right:this.right;if(n<=r)return!1;var s=this.y<i.y?i.y:this.y,o=this.bottom>i.bottom?i.bottom:this.bottom;return o>s}var a=this.left,h=this.right,l=this.top,u=this.bottom;if(h<=a||u<=l)return!1;var c=va[0].set(i.left,i.top),f=va[1].set(i.left,i.bottom),d=va[2].set(i.right,i.top),A=va[3].set(i.right,i.bottom);if(d.x<=c.x||f.y<=c.y)return!1;var p=Math.sign(t.a*t.d-t.b*t.c);if(p===0||(t.apply(c,c),t.apply(f,f),t.apply(d,d),t.apply(A,A),Math.max(c.x,f.x,d.x,A.x)<=a||Math.min(c.x,f.x,d.x,A.x)>=h||Math.max(c.y,f.y,d.y,A.y)<=l||Math.min(c.y,f.y,d.y,A.y)>=u))return!1;var g=p*(f.y-c.y),y=p*(c.x-f.x),I=g*a+y*l,E=g*h+y*l,w=g*a+y*u,T=g*h+y*u;if(Math.max(I,E,w,T)<=g*c.x+y*c.y||Math.min(I,E,w,T)>=g*A.x+y*A.y)return!1;var _=p*(c.y-d.y),F=p*(d.x-c.x),R=_*a+F*l,S=_*h+F*l,D=_*a+F*u,$=_*h+F*u;return!(Math.max(R,S,D,$)<=_*c.x+F*c.y||Math.min(R,S,D,$)>=_*A.x+F*A.y)},e.prototype.pad=function(i,t){return i===void 0&&(i=0),t===void 0&&(t=i),this.x-=i,this.y-=t,this.width+=i*2,this.height+=t*2,this},e.prototype.fit=function(i){var t=Math.max(this.x,i.x),r=Math.min(this.x+this.width,i.x+i.width),n=Math.max(this.y,i.y),s=Math.min(this.y+this.height,i.y+i.height);return this.x=t,this.width=Math.max(r-t,0),this.y=n,this.height=Math.max(s-n,0),this},e.prototype.ceil=function(i,t){i===void 0&&(i=1),t===void 0&&(t=.001);var r=Math.ceil((this.x+this.width-t)*i)/i,n=Math.ceil((this.y+this.height-t)*i)/i;return this.x=Math.floor((this.x+t)*i)/i,this.y=Math.floor((this.y+t)*i)/i,this.width=r-this.x,this.height=n-this.y,this},e.prototype.enlarge=function(i){var t=Math.min(this.x,i.x),r=Math.max(this.x+this.width,i.x+i.width),n=Math.min(this.y,i.y),s=Math.max(this.y+this.height,i.y+i.height);return this.x=t,this.width=r-t,this.y=n,this.height=s-n,this},e.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),Jm=function(){function e(i,t,r){i===void 0&&(i=0),t===void 0&&(t=0),r===void 0&&(r=0),this.x=i,this.y=t,this.radius=r,this.type=ne.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(i,t){if(this.radius<=0)return!1;var r=this.radius*this.radius,n=this.x-i,s=this.y-t;return n*=n,s*=s,n+s<=r},e.prototype.getBounds=function(){return new Tt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},e.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},e}(),qm=function(){function e(i,t,r,n){i===void 0&&(i=0),t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),this.x=i,this.y=t,this.width=r,this.height=n,this.type=ne.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(i,t){if(this.width<=0||this.height<=0)return!1;var r=(i-this.x)/this.width,n=(t-this.y)/this.height;return r*=r,n*=n,r+n<=1},e.prototype.getBounds=function(){return new Tt(this.x-this.width,this.y-this.height,this.width,this.height)},e.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),Lr=function(){function e(){for(var i=arguments,t=[],r=0;r<arguments.length;r++)t[r]=i[r];var n=Array.isArray(t[0])?t[0]:t;if(typeof n[0]!="number"){for(var s=[],o=0,a=n.length;o<a;o++)s.push(n[o].x,n[o].y);n=s}this.points=n,this.type=ne.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var i=this.points.slice(),t=new e(i);return t.closeStroke=this.closeStroke,t},e.prototype.contains=function(i,t){for(var r=!1,n=this.points.length/2,s=0,o=n-1;s<n;o=s++){var a=this.points[s*2],h=this.points[s*2+1],l=this.points[o*2],u=this.points[o*2+1],c=h>t!=u>t&&i<(l-a)*((t-h)/(u-h))+a;c&&(r=!r)}return r},e.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(i,t){return i+", "+t},"")+"]")},e}(),Zm=function(){function e(i,t,r,n,s){i===void 0&&(i=0),t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),s===void 0&&(s=20),this.x=i,this.y=t,this.width=r,this.height=n,this.radius=s,this.type=ne.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(i,t){if(this.width<=0||this.height<=0)return!1;if(i>=this.x&&i<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){var r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+r&&t<=this.y+this.height-r||i>=this.x+r&&i<=this.x+this.width-r)return!0;var n=i-(this.x+r),s=t-(this.y+r),o=r*r;if(n*n+s*s<=o||(n=i-(this.x+this.width-r),n*n+s*s<=o)||(s=t-(this.y+this.height-r),n*n+s*s<=o)||(n=i-(this.x+r),n*n+s*s<=o))return!0}return!1},e.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},e}(),mr=function(){function e(i,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0),this._x=r,this._y=n,this.cb=i,this.scope=t}return e.prototype.clone=function(i,t){return i===void 0&&(i=this.cb),t===void 0&&(t=this.scope),new e(i,t,this._x,this._y)},e.prototype.set=function(i,t){return i===void 0&&(i=0),t===void 0&&(t=i),(this._x!==i||this._y!==t)&&(this._x=i,this._y=t,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(i){return(this._x!==i.x||this._y!==i.y)&&(this._x=i.x,this._y=i.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(i){return i.set(this._x,this._y),i},e.prototype.equals=function(i){return i.x===this._x&&i.y===this._y},e.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(i){this._x!==i&&(this._x=i,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(i){this._y!==i&&(this._y=i,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),kt=function(){function e(i,t,r,n,s,o){i===void 0&&(i=1),t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=1),s===void 0&&(s=0),o===void 0&&(o=0),this.array=null,this.a=i,this.b=t,this.c=r,this.d=n,this.tx=s,this.ty=o}return e.prototype.fromArray=function(i){this.a=i[0],this.b=i[1],this.c=i[3],this.d=i[4],this.tx=i[2],this.ty=i[5]},e.prototype.set=function(i,t,r,n,s,o){return this.a=i,this.b=t,this.c=r,this.d=n,this.tx=s,this.ty=o,this},e.prototype.toArray=function(i,t){this.array||(this.array=new Float32Array(9));var r=t||this.array;return i?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},e.prototype.apply=function(i,t){t=t||new M;var r=i.x,n=i.y;return t.x=this.a*r+this.c*n+this.tx,t.y=this.b*r+this.d*n+this.ty,t},e.prototype.applyInverse=function(i,t){t=t||new M;var r=1/(this.a*this.d+this.c*-this.b),n=i.x,s=i.y;return t.x=this.d*r*n+-this.c*r*s+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*s+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,t},e.prototype.translate=function(i,t){return this.tx+=i,this.ty+=t,this},e.prototype.scale=function(i,t){return this.a*=i,this.d*=t,this.c*=i,this.b*=t,this.tx*=i,this.ty*=t,this},e.prototype.rotate=function(i){var t=Math.cos(i),r=Math.sin(i),n=this.a,s=this.c,o=this.tx;return this.a=n*t-this.b*r,this.b=n*r+this.b*t,this.c=s*t-this.d*r,this.d=s*r+this.d*t,this.tx=o*t-this.ty*r,this.ty=o*r+this.ty*t,this},e.prototype.append=function(i){var t=this.a,r=this.b,n=this.c,s=this.d;return this.a=i.a*t+i.b*n,this.b=i.a*r+i.b*s,this.c=i.c*t+i.d*n,this.d=i.c*r+i.d*s,this.tx=i.tx*t+i.ty*n+this.tx,this.ty=i.tx*r+i.ty*s+this.ty,this},e.prototype.setTransform=function(i,t,r,n,s,o,a,h,l){return this.a=Math.cos(a+l)*s,this.b=Math.sin(a+l)*s,this.c=-Math.sin(a-h)*o,this.d=Math.cos(a-h)*o,this.tx=i-(r*this.a+n*this.c),this.ty=t-(r*this.b+n*this.d),this},e.prototype.prepend=function(i){var t=this.tx;if(i.a!==1||i.b!==0||i.c!==0||i.d!==1){var r=this.a,n=this.c;this.a=r*i.a+this.b*i.c,this.b=r*i.b+this.b*i.d,this.c=n*i.a+this.d*i.c,this.d=n*i.b+this.d*i.d}return this.tx=t*i.a+this.ty*i.c+i.tx,this.ty=t*i.b+this.ty*i.d+i.ty,this},e.prototype.decompose=function(i){var t=this.a,r=this.b,n=this.c,s=this.d,o=i.pivot,a=-Math.atan2(-n,s),h=Math.atan2(r,t),l=Math.abs(a+h);return l<1e-5||Math.abs(co-l)<1e-5?(i.rotation=h,i.skew.x=i.skew.y=0):(i.rotation=0,i.skew.x=a,i.skew.y=h),i.scale.x=Math.sqrt(t*t+r*r),i.scale.y=Math.sqrt(n*n+s*s),i.position.x=this.tx+(o.x*t+o.y*n),i.position.y=this.ty+(o.x*r+o.y*s),i},e.prototype.invert=function(){var i=this.a,t=this.b,r=this.c,n=this.d,s=this.tx,o=i*n-t*r;return this.a=n/o,this.b=-t/o,this.c=-r/o,this.d=i/o,this.tx=(r*this.ty-n*s)/o,this.ty=-(i*this.ty-t*s)/o,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var i=new e;return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i},e.prototype.copyTo=function(i){return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i},e.prototype.copyFrom=function(i){return this.a=i.a,this.b=i.b,this.c=i.c,this.d=i.d,this.tx=i.tx,this.ty=i.ty,this},e.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),en=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],rn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],nn=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],sn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rc=[],tI=[],ya=Math.sign;function IR(){for(var e=0;e<16;e++){var i=[];rc.push(i);for(var t=0;t<16;t++)for(var r=ya(en[e]*en[t]+nn[e]*rn[t]),n=ya(rn[e]*en[t]+sn[e]*rn[t]),s=ya(en[e]*nn[t]+nn[e]*sn[t]),o=ya(rn[e]*nn[t]+sn[e]*sn[t]),a=0;a<16;a++)if(en[a]===r&&rn[a]===n&&nn[a]===s&&sn[a]===o){i.push(a);break}}for(var e=0;e<16;e++){var h=new kt;h.set(en[e],rn[e],nn[e],sn[e],0,0),tI.push(h)}}IR();var he={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return en[e]},uY:function(e){return rn[e]},vX:function(e){return nn[e]},vY:function(e){return sn[e]},inv:function(e){return e&8?e&15:-e&7},add:function(e,i){return rc[e][i]},sub:function(e,i){return rc[e][he.inv(i)]},rotate180:function(e){return e^4},isVertical:function(e){return(e&3)===2},byDirection:function(e,i){return Math.abs(e)*2<=Math.abs(i)?i>=0?he.S:he.N:Math.abs(i)*2<=Math.abs(e)?e>0?he.E:he.W:i>0?e>0?he.SE:he.SW:e>0?he.NE:he.NW},matrixAppendRotationInv:function(e,i,t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=tI[he.inv(i)];n.tx=t,n.ty=r,e.append(n)}},oa=function(){function e(){this.worldTransform=new kt,this.localTransform=new kt,this.position=new mr(this.onChange,this,0,0),this.scale=new mr(this.onChange,this,1,1),this.pivot=new mr(this.onChange,this,0,0),this.skew=new mr(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},e.prototype.updateLocalTransform=function(){var i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(i){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==i._worldID){var r=i.worldTransform,n=this.worldTransform;n.a=t.a*r.a+t.b*r.c,n.b=t.a*r.b+t.b*r.d,n.c=t.c*r.a+t.d*r.c,n.d=t.c*r.b+t.d*r.d,n.tx=t.tx*r.a+t.ty*r.c+r.tx,n.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=i._worldID,this._worldID++}},e.prototype.setFromMatrix=function(i){i.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(i){this._rotation!==i&&(this._rotation=i,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e,e}();/*!
 * @pixi/settings - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var op;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(op||(op={}));var ap;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(ap||(ap={}));var hp;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(hp||(hp={}));var lp;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(lp||(lp={}));var up;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(up||(up={}));var cp;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(cp||(cp={}));var fp;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(fp||(fp={}));var dp;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(dp||(dp={}));var Ap;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(Ap||(Ap={}));var nc;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(nc||(nc={}));var sc;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(sc||(sc={}));var oc;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(oc||(oc={}));var pp;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(pp||(pp={}));var gp;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(gp||(gp={}));var ac;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(ac||(ac={}));var js;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(js||(js={}));var vp;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR"})(vp||(vp={}));var yp;(function(e){e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA"})(yp||(yp={}));var hc;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(hc||(hc={}));var mp;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(mp||(mp={}));var eI={createCanvas:function(e,i){var t=document.createElement("canvas");return t.width=e,t.height=i,t},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var e;return(e=document.baseURI)!==null&&e!==void 0?e:window.location.href},fetch:function(e,i){return fetch(e,i)}},$l=/iPhone/i,Ip=/iPod/i,Cp=/iPad/i,_p=/\biOS-universal(?:.+)Mac\b/i,Jl=/\bAndroid(?:.+)Mobile\b/i,xp=/Android/i,Qn=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,ma=/Silk/i,ar=/Windows Phone/i,Ep=/\bWindows(?:.+)ARM\b/i,bp=/BlackBerry/i,wp=/BB10/i,Tp=/Opera Mini/i,Bp=/\b(CriOS|Chrome)(?:.+)Mobile/i,Rp=/Mobile(?:.+)Firefox\b/i,Pp=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function CR(e){return function(i){return i.test(e)}}function _R(e){var i={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?i={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?i.userAgent=e:e&&e.userAgent&&(i={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var t=i.userAgent,r=t.split("[FBAN");typeof r[1]<"u"&&(t=r[0]),r=t.split("Twitter"),typeof r[1]<"u"&&(t=r[0]);var n=CR(t),s={apple:{phone:n($l)&&!n(ar),ipod:n(Ip),tablet:!n($l)&&(n(Cp)||Pp(i))&&!n(ar),universal:n(_p),device:(n($l)||n(Ip)||n(Cp)||n(_p)||Pp(i))&&!n(ar)},amazon:{phone:n(Qn),tablet:!n(Qn)&&n(ma),device:n(Qn)||n(ma)},android:{phone:!n(ar)&&n(Qn)||!n(ar)&&n(Jl),tablet:!n(ar)&&!n(Qn)&&!n(Jl)&&(n(ma)||n(xp)),device:!n(ar)&&(n(Qn)||n(ma)||n(Jl)||n(xp))||n(/\bokhttp\b/i)},windows:{phone:n(ar),tablet:n(Ep),device:n(ar)||n(Ep)},other:{blackberry:n(bp),blackberry10:n(wp),opera:n(Tp),firefox:n(Rp),chrome:n(Bp),device:n(bp)||n(wp)||n(Tp)||n(Rp)||n(Bp)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}var Ai=_R(globalThis.navigator);function xR(){return!Ai.apple.device}function ER(e){var i=!0;if(Ai.tablet||Ai.phone){if(Ai.apple.device){var t=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(t){var r=parseInt(t[1],10);r<11&&(i=!1)}}if(Ai.android.device){var t=navigator.userAgent.match(/Android\s([0-9.]*)/);if(t){var r=parseInt(t[1],10);r<7&&(i=!1)}}}return i?e:4}var ft={ADAPTER:eI,MIPMAP_TEXTURES:oc.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:hc.NONE,SPRITE_MAX_TEXTURES:ER(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:ac.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:sc.CLAMP,SCALE_MODE:nc.LINEAR,PRECISION_VERTEX:js.HIGH,PRECISION_FRAGMENT:Ai.apple.device?js.HIGH:js.MEDIUM,CAN_UPLOAD_SAME_BUFFER:xR(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};/*!
 * @pixi/extensions - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ks=function(){return Ks=Object.assign||function(i){for(var t=arguments,r,n=1,s=arguments.length;n<s;n++){r=t[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},Ks.apply(this,arguments)},Zt;(function(e){e.Application="application",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Loader="loader",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser"})(Zt||(Zt={}));var Sp=function(e){if(typeof e=="function"||typeof e=="object"&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");var i=typeof e.extension!="object"?{type:e.extension}:e.extension;e=Ks(Ks({},i),{ref:e})}if(typeof e=="object")e=Ks({},e);else throw new Error("Invalid extension type");return typeof e.type=="string"&&(e.type=[e.type]),e},$i={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var e=arguments,i=this,t=[],r=0;r<arguments.length;r++)t[r]=e[r];return t.map(Sp).forEach(function(n){n.type.forEach(function(s){var o,a;return(a=(o=i._removeHandlers)[s])===null||a===void 0?void 0:a.call(o,n)})}),this},add:function(){for(var e=arguments,i=this,t=[],r=0;r<arguments.length;r++)t[r]=e[r];return t.map(Sp).forEach(function(n){n.type.forEach(function(s){var o=i._addHandlers,a=i._queue;o[s]?o[s](n):(a[s]=a[s]||[],a[s].push(n))})}),this},handle:function(e,i,t){var r=this._addHandlers=this._addHandlers||{},n=this._removeHandlers=this._removeHandlers||{};if(r[e]||n[e])throw new Error("Extension type "+e+" already has a handler");r[e]=i,n[e]=t;var s=this._queue;return s[e]&&(s[e].forEach(function(o){return i(o)}),delete s[e]),this},handleByMap:function(e,i){return this.handle(e,function(t){i[t.name]=t.ref},function(t){delete i[t.name]})},handleByList:function(e,i){return this.handle(e,function(t){var r,n;i.push(t.ref),e===Zt.Loader&&((n=(r=t.ref).add)===null||n===void 0||n.call(r))},function(t){var r=i.indexOf(t.ref);r!==-1&&i.splice(r,1)})}};/*!
 * @pixi/ticker - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ft.TARGET_FPMS=.06;var zi;(function(e){e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY"})(zi||(zi={}));var ql=function(){function e(i,t,r,n){t===void 0&&(t=null),r===void 0&&(r=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=i,this.context=t,this.priority=r,this.once=n}return e.prototype.match=function(i,t){return t===void 0&&(t=null),this.fn===i&&this.context===t},e.prototype.emit=function(i){this.fn&&(this.context?this.fn.call(this.context,i):this.fn(i));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},e.prototype.connect=function(i){this.previous=i,i.next&&(i.next.previous=this),this.next=i.next,i.next=this},e.prototype.destroy=function(i){i===void 0&&(i=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=i?null:t,this.previous=null,t},e}(),ye=function(){function e(){var i=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ql(null,null,1/0),this.deltaMS=1/ft.TARGET_FPMS,this.elapsedMS=1/ft.TARGET_FPMS,this._tick=function(t){i._requestId=null,i.started&&(i.update(t),i.started&&i._requestId===null&&i._head.next&&(i._requestId=requestAnimationFrame(i._tick)))}}return e.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(i,t,r){return r===void 0&&(r=zi.NORMAL),this._addListener(new ql(i,t,r))},e.prototype.addOnce=function(i,t,r){return r===void 0&&(r=zi.NORMAL),this._addListener(new ql(i,t,r,!0))},e.prototype._addListener=function(i){var t=this._head.next,r=this._head;if(!t)i.connect(r);else{for(;t;){if(i.priority>t.priority){i.connect(r);break}r=t,t=t.next}i.previous||i.connect(r)}return this._startIfPossible(),this},e.prototype.remove=function(i,t){for(var r=this._head.next;r;)r.match(i,t)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var i=0,t=this._head;t=t.next;)i++;return i},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var i=this._head.next;i;)i=i.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(i){i===void 0&&(i=performance.now());var t;if(i>this.lastTime){if(t=this.elapsedMS=i-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var r=i-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=i-r%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*ft.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=i},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(i){var t=Math.min(this.maxFPS,i),r=Math.min(Math.max(0,t)/1e3,ft.TARGET_FPMS);this._maxElapsedMS=1/r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(i){if(i===0)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,i);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var i=e._shared=new e;i.autoStart=!0,i._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var i=e._system=new e;i.autoStart=!0,i._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),iI=function(){function e(){}return e.init=function(i){var t=this;i=Object.assign({autoStart:!0,sharedTicker:!1},i),Object.defineProperty(this,"ticker",{set:function(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,zi.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=i.sharedTicker?ye.shared:new ye,i.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var i=this._ticker;this.ticker=null,i.destroy()}},e.extension=Zt.Application,e}(),$s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bR(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s4(e){if(e.__esModule)return e;var i=e.default;if(typeof i=="function"){var t=function r(){if(this instanceof r){var n=[null];n.push.apply(n,arguments);var s=Function.bind.apply(i,n);return new s}return i.apply(this,arguments)};t.prototype=i.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}),t}var je={},wR={get exports(){return je},set exports(e){je=e}};(function(e){var i=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function n(h,l,u){this.fn=h,this.context=l,this.once=u||!1}function s(h,l,u,c,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var d=new n(u,c||h,f),A=t?t+l:l;return h._events[A]?h._events[A].fn?h._events[A]=[h._events[A],d]:h._events[A].push(d):(h._events[A]=d,h._eventsCount++),h}function o(h,l){--h._eventsCount===0?h._events=new r:delete h._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,c;if(this._eventsCount===0)return l;for(c in u=this._events)i.call(u,c)&&l.push(t?c.slice(1):c);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=t?t+l:l,c=this._events[u];if(!c)return[];if(c.fn)return[c.fn];for(var f=0,d=c.length,A=new Array(d);f<d;f++)A[f]=c[f].fn;return A},a.prototype.listenerCount=function(l){var u=t?t+l:l,c=this._events[u];return c?c.fn?1:c.length:0},a.prototype.emit=function(l,u,c,f,d,A){var p=t?t+l:l;if(!this._events[p])return!1;var g=this._events[p],y=arguments.length,I,E;if(g.fn){switch(g.once&&this.removeListener(l,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,c),!0;case 4:return g.fn.call(g.context,u,c,f),!0;case 5:return g.fn.call(g.context,u,c,f,d),!0;case 6:return g.fn.call(g.context,u,c,f,d,A),!0}for(E=1,I=new Array(y-1);E<y;E++)I[E-1]=arguments[E];g.fn.apply(g.context,I)}else{var w=g.length,T;for(E=0;E<w;E++)switch(g[E].once&&this.removeListener(l,g[E].fn,void 0,!0),y){case 1:g[E].fn.call(g[E].context);break;case 2:g[E].fn.call(g[E].context,u);break;case 3:g[E].fn.call(g[E].context,u,c);break;case 4:g[E].fn.call(g[E].context,u,c,f);break;default:if(!I)for(T=1,I=new Array(y-1);T<y;T++)I[T-1]=arguments[T];g[E].fn.apply(g[E].context,I)}}return!0},a.prototype.on=function(l,u,c){return s(this,l,u,c,!1)},a.prototype.once=function(l,u,c){return s(this,l,u,c,!0)},a.prototype.removeListener=function(l,u,c,f){var d=t?t+l:l;if(!this._events[d])return this;if(!u)return o(this,d),this;var A=this._events[d];if(A.fn)A.fn===u&&(!f||A.once)&&(!c||A.context===c)&&o(this,d);else{for(var p=0,g=[],y=A.length;p<y;p++)(A[p].fn!==u||f&&!A[p].once||c&&A[p].context!==c)&&g.push(A[p]);g.length?this._events[d]=g.length===1?g[0]:g:o(this,d)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=t?t+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,e.exports=a})(wR);var vs={},TR={get exports(){return vs},set exports(e){vs=e}};TR.exports=bl;vs.default=bl;function bl(e,i,t){t=t||2;var r=i&&i.length,n=r?i[0]*t:e.length,s=rI(e,0,n,t,!0),o=[];if(!s||s.next===s.prev)return o;var a,h,l,u,c,f,d;if(r&&(s=NR(e,i,s,t)),e.length>80*t){a=l=e[0],h=u=e[1];for(var A=t;A<n;A+=t)c=e[A],f=e[A+1],c<a&&(a=c),f<h&&(h=f),c>l&&(l=c),f>u&&(u=f);d=Math.max(l-a,u-h),d=d!==0?32767/d:0}return fo(s,o,t,a,h,d,0),o}function rI(e,i,t,r,n){var s,o;if(n===cc(e,i,t,r)>0)for(s=i;s<t;s+=r)o=Np(s,e[s],e[s+1],o);else for(s=t-r;s>=i;s-=r)o=Np(s,e[s],e[s+1],o);return o&&wl(o,o.next)&&(po(o),o=o.next),o}function Pn(e,i){if(!e)return e;i||(i=e);var t=e,r;do if(r=!1,!t.steiner&&(wl(t,t.next)||fe(t.prev,t,t.next)===0)){if(po(t),t=i=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==i);return i}function fo(e,i,t,r,n,s,o){if(e){!o&&s&&MR(e,r,n,s);for(var a=e,h,l;e.prev!==e.next;){if(h=e.prev,l=e.next,s?RR(e,r,n,s):BR(e)){i.push(h.i/t|0),i.push(e.i/t|0),i.push(l.i/t|0),po(e),e=l.next,a=l.next;continue}if(e=l,e===a){o?o===1?(e=PR(Pn(e),i,t),fo(e,i,t,r,n,s,2)):o===2&&SR(e,i,t,r,n,s):fo(Pn(e),i,t,r,n,s,1);break}}}}function BR(e){var i=e.prev,t=e,r=e.next;if(fe(i,t,r)>=0)return!1;for(var n=i.x,s=t.x,o=r.x,a=i.y,h=t.y,l=r.y,u=n<s?n<o?n:o:s<o?s:o,c=a<h?a<l?a:l:h<l?h:l,f=n>s?n>o?n:o:s>o?s:o,d=a>h?a>l?a:l:h>l?h:l,A=r.next;A!==i;){if(A.x>=u&&A.x<=f&&A.y>=c&&A.y<=d&&Kn(n,a,s,h,o,l,A.x,A.y)&&fe(A.prev,A,A.next)>=0)return!1;A=A.next}return!0}function RR(e,i,t,r){var n=e.prev,s=e,o=e.next;if(fe(n,s,o)>=0)return!1;for(var a=n.x,h=s.x,l=o.x,u=n.y,c=s.y,f=o.y,d=a<h?a<l?a:l:h<l?h:l,A=u<c?u<f?u:f:c<f?c:f,p=a>h?a>l?a:l:h>l?h:l,g=u>c?u>f?u:f:c>f?c:f,y=lc(d,A,i,t,r),I=lc(p,g,i,t,r),E=e.prevZ,w=e.nextZ;E&&E.z>=y&&w&&w.z<=I;){if(E.x>=d&&E.x<=p&&E.y>=A&&E.y<=g&&E!==n&&E!==o&&Kn(a,u,h,c,l,f,E.x,E.y)&&fe(E.prev,E,E.next)>=0||(E=E.prevZ,w.x>=d&&w.x<=p&&w.y>=A&&w.y<=g&&w!==n&&w!==o&&Kn(a,u,h,c,l,f,w.x,w.y)&&fe(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;E&&E.z>=y;){if(E.x>=d&&E.x<=p&&E.y>=A&&E.y<=g&&E!==n&&E!==o&&Kn(a,u,h,c,l,f,E.x,E.y)&&fe(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;w&&w.z<=I;){if(w.x>=d&&w.x<=p&&w.y>=A&&w.y<=g&&w!==n&&w!==o&&Kn(a,u,h,c,l,f,w.x,w.y)&&fe(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function PR(e,i,t){var r=e;do{var n=r.prev,s=r.next.next;!wl(n,s)&&nI(n,r,r.next,s)&&Ao(n,s)&&Ao(s,n)&&(i.push(n.i/t|0),i.push(r.i/t|0),i.push(s.i/t|0),po(r),po(r.next),r=e=s),r=r.next}while(r!==e);return Pn(r)}function SR(e,i,t,r,n,s){var o=e;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&GR(o,a)){var h=sI(o,a);o=Pn(o,o.next),h=Pn(h,h.next),fo(o,i,t,r,n,s,0),fo(h,i,t,r,n,s,0);return}a=a.next}o=o.next}while(o!==e)}function NR(e,i,t,r){var n=[],s,o,a,h,l;for(s=0,o=i.length;s<o;s++)a=i[s]*r,h=s<o-1?i[s+1]*r:e.length,l=rI(e,a,h,r,!1),l===l.next&&(l.steiner=!0),n.push(UR(l));for(n.sort(OR),s=0;s<n.length;s++)t=DR(n[s],t);return t}function OR(e,i){return e.x-i.x}function DR(e,i){var t=FR(e,i);if(!t)return i;var r=sI(t,e);return Pn(r,r.next),Pn(t,t.next)}function FR(e,i){var t=i,r=e.x,n=e.y,s=-1/0,o;do{if(n<=t.y&&n>=t.next.y&&t.next.y!==t.y){var a=t.x+(n-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=r&&a>s&&(s=a,o=t.x<t.next.x?t:t.next,a===r))return o}t=t.next}while(t!==i);if(!o)return null;var h=o,l=o.x,u=o.y,c=1/0,f;t=o;do r>=t.x&&t.x>=l&&r!==t.x&&Kn(n<u?r:s,n,l,u,n<u?s:r,n,t.x,t.y)&&(f=Math.abs(n-t.y)/(r-t.x),Ao(t,e)&&(f<c||f===c&&(t.x>o.x||t.x===o.x&&LR(o,t)))&&(o=t,c=f)),t=t.next;while(t!==h);return o}function LR(e,i){return fe(e.prev,e,i.prev)<0&&fe(i.next,e,e.next)<0}function MR(e,i,t,r){var n=e;do n.z===0&&(n.z=lc(n.x,n.y,i,t,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,QR(n)}function QR(e){var i,t,r,n,s,o,a,h,l=1;do{for(t=e,e=null,s=null,o=0;t;){for(o++,r=t,a=0,i=0;i<l&&(a++,r=r.nextZ,!!r);i++);for(h=l;a>0||h>0&&r;)a!==0&&(h===0||!r||t.z<=r.z)?(n=t,t=t.nextZ,a--):(n=r,r=r.nextZ,h--),s?s.nextZ=n:e=n,n.prevZ=s,s=n;t=r}s.nextZ=null,l*=2}while(o>1);return e}function lc(e,i,t,r,n){return e=(e-t)*n|0,i=(i-r)*n|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e|i<<1}function UR(e){var i=e,t=e;do(i.x<t.x||i.x===t.x&&i.y<t.y)&&(t=i),i=i.next;while(i!==e);return t}function Kn(e,i,t,r,n,s,o,a){return(n-o)*(i-a)>=(e-o)*(s-a)&&(e-o)*(r-a)>=(t-o)*(i-a)&&(t-o)*(s-a)>=(n-o)*(r-a)}function GR(e,i){return e.next.i!==i.i&&e.prev.i!==i.i&&!kR(e,i)&&(Ao(e,i)&&Ao(i,e)&&HR(e,i)&&(fe(e.prev,e,i.prev)||fe(e,i.prev,i))||wl(e,i)&&fe(e.prev,e,e.next)>0&&fe(i.prev,i,i.next)>0)}function fe(e,i,t){return(i.y-e.y)*(t.x-i.x)-(i.x-e.x)*(t.y-i.y)}function wl(e,i){return e.x===i.x&&e.y===i.y}function nI(e,i,t,r){var n=Ca(fe(e,i,t)),s=Ca(fe(e,i,r)),o=Ca(fe(t,r,e)),a=Ca(fe(t,r,i));return!!(n!==s&&o!==a||n===0&&Ia(e,t,i)||s===0&&Ia(e,r,i)||o===0&&Ia(t,e,r)||a===0&&Ia(t,i,r))}function Ia(e,i,t){return i.x<=Math.max(e.x,t.x)&&i.x>=Math.min(e.x,t.x)&&i.y<=Math.max(e.y,t.y)&&i.y>=Math.min(e.y,t.y)}function Ca(e){return e>0?1:e<0?-1:0}function kR(e,i){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==i.i&&t.next.i!==i.i&&nI(t,t.next,e,i))return!0;t=t.next}while(t!==e);return!1}function Ao(e,i){return fe(e.prev,e,e.next)<0?fe(e,i,e.next)>=0&&fe(e,e.prev,i)>=0:fe(e,i,e.prev)<0||fe(e,e.next,i)<0}function HR(e,i){var t=e,r=!1,n=(e.x+i.x)/2,s=(e.y+i.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&n<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==e);return r}function sI(e,i){var t=new uc(e.i,e.x,e.y),r=new uc(i.i,i.x,i.y),n=e.next,s=i.prev;return e.next=i,i.prev=e,t.next=n,n.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function Np(e,i,t,r){var n=new uc(e,i,t);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function po(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function uc(e,i,t){this.i=e,this.x=i,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}bl.deviation=function(e,i,t,r){var n=i&&i.length,s=n?i[0]*t:e.length,o=Math.abs(cc(e,0,s,t));if(n)for(var a=0,h=i.length;a<h;a++){var l=i[a]*t,u=a<h-1?i[a+1]*t:e.length;o-=Math.abs(cc(e,l,u,t))}var c=0;for(a=0;a<r.length;a+=3){var f=r[a]*t,d=r[a+1]*t,A=r[a+2]*t;c+=Math.abs((e[f]-e[A])*(e[d+1]-e[f+1])-(e[f]-e[d])*(e[A+1]-e[f+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function cc(e,i,t,r){for(var n=0,s=i,o=t-r;s<t;s+=r)n+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return n}bl.flatten=function(e){for(var i=e[0][0].length,t={vertices:[],holes:[],dimensions:i},r=0,n=0;n<e.length;n++){for(var s=0;s<e[n].length;s++)for(var o=0;o<i;o++)t.vertices.push(e[n][s][o]);n>0&&(r+=e[n-1].length,t.holes.push(r))}return t};var Ah={},XR={get exports(){return Ah},set exports(e){Ah=e}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(e,i){(function(t){var r=i&&!i.nodeType&&i,n=e&&!e.nodeType&&e,s=typeof $s=="object"&&$s;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,h=36,l=1,u=26,c=38,f=700,d=72,A=128,p="-",g=/^xn--/,y=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=h-l,T=Math.floor,_=String.fromCharCode,F;function R(N){throw RangeError(E[N])}function S(N,W){for(var it=N.length,ot=[];it--;)ot[it]=W(N[it]);return ot}function D(N,W){var it=N.split("@"),ot="";it.length>1&&(ot=it[0]+"@",N=it[1]),N=N.replace(I,".");var dt=N.split("."),Ct=S(dt,W).join(".");return ot+Ct}function $(N){for(var W=[],it=0,ot=N.length,dt,Ct;it<ot;)dt=N.charCodeAt(it++),dt>=55296&&dt<=56319&&it<ot?(Ct=N.charCodeAt(it++),(Ct&64512)==56320?W.push(((dt&1023)<<10)+(Ct&1023)+65536):(W.push(dt),it--)):W.push(dt);return W}function z(N){return S(N,function(W){var it="";return W>65535&&(W-=65536,it+=_(W>>>10&1023|55296),W=56320|W&1023),it+=_(W),it}).join("")}function q(N){return N-48<10?N-22:N-65<26?N-65:N-97<26?N-97:h}function _t(N,W){return N+22+75*(N<26)-((W!=0)<<5)}function V(N,W,it){var ot=0;for(N=it?T(N/f):N>>1,N+=T(N/W);N>w*u>>1;ot+=h)N=T(N/w);return T(ot+(w+1)*N/(N+c))}function X(N){var W=[],it=N.length,ot,dt=0,Ct=A,gt=d,Pt,jt,Xt,zt,pt,Lt,Et,U,H;for(Pt=N.lastIndexOf(p),Pt<0&&(Pt=0),jt=0;jt<Pt;++jt)N.charCodeAt(jt)>=128&&R("not-basic"),W.push(N.charCodeAt(jt));for(Xt=Pt>0?Pt+1:0;Xt<it;){for(zt=dt,pt=1,Lt=h;Xt>=it&&R("invalid-input"),Et=q(N.charCodeAt(Xt++)),(Et>=h||Et>T((a-dt)/pt))&&R("overflow"),dt+=Et*pt,U=Lt<=gt?l:Lt>=gt+u?u:Lt-gt,!(Et<U);Lt+=h)H=h-U,pt>T(a/H)&&R("overflow"),pt*=H;ot=W.length+1,gt=V(dt-zt,ot,zt==0),T(dt/ot)>a-Ct&&R("overflow"),Ct+=T(dt/ot),dt%=ot,W.splice(dt++,0,Ct)}return z(W)}function et(N){var W,it,ot,dt,Ct,gt,Pt,jt,Xt,zt,pt,Lt=[],Et,U,H,L;for(N=$(N),Et=N.length,W=A,it=0,Ct=d,gt=0;gt<Et;++gt)pt=N[gt],pt<128&&Lt.push(_(pt));for(ot=dt=Lt.length,dt&&Lt.push(p);ot<Et;){for(Pt=a,gt=0;gt<Et;++gt)pt=N[gt],pt>=W&&pt<Pt&&(Pt=pt);for(U=ot+1,Pt-W>T((a-it)/U)&&R("overflow"),it+=(Pt-W)*U,W=Pt,gt=0;gt<Et;++gt)if(pt=N[gt],pt<W&&++it>a&&R("overflow"),pt==W){for(jt=it,Xt=h;zt=Xt<=Ct?l:Xt>=Ct+u?u:Xt-Ct,!(jt<zt);Xt+=h)L=jt-zt,H=h-zt,Lt.push(_(_t(zt+L%H,0))),jt=T(L/H);Lt.push(_(_t(jt,0))),Ct=V(it,U,ot==dt),it=0,++ot}++it,++W}return Lt.join("")}function At(N){return D(N,function(W){return g.test(W)?X(W.slice(4).toLowerCase()):W})}function Z(N){return D(N,function(W){return y.test(W)?"xn--"+et(W):W})}if(o={version:"1.3.2",ucs2:{decode:$,encode:z},decode:X,encode:et,toASCII:Z,toUnicode:At},r&&n)if(e.exports==r)n.exports=o;else for(F in o)o.hasOwnProperty(F)&&(r[F]=o[F]);else t.punycode=o})($s)})(XR,Ah);var YR={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},go={};function VR(e,i){return Object.prototype.hasOwnProperty.call(e,i)}var zR=function(e,i,t,r){i=i||"&",t=t||"=";var n={};if(typeof e!="string"||e.length===0)return n;var s=/\+/g;e=e.split(i);var o=1e3;r&&typeof r.maxKeys=="number"&&(o=r.maxKeys);var a=e.length;o>0&&a>o&&(a=o);for(var h=0;h<a;++h){var l=e[h].replace(s,"%20"),u=l.indexOf(t),c,f,d,A;u>=0?(c=l.substr(0,u),f=l.substr(u+1)):(c=l,f=""),d=decodeURIComponent(c),A=decodeURIComponent(f),VR(n,d)?Array.isArray(n[d])?n[d].push(A):n[d]=[n[d],A]:n[d]=A}return n},Ns=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},WR=function(e,i,t,r){return i=i||"&",t=t||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(n){var s=encodeURIComponent(Ns(n))+t;return Array.isArray(e[n])?e[n].map(function(o){return s+encodeURIComponent(Ns(o))}).join(i):s+encodeURIComponent(Ns(e[n]))}).join(i):r?encodeURIComponent(Ns(r))+t+encodeURIComponent(Ns(e)):""};go.decode=go.parse=zR;go.encode=go.stringify=WR;var jR=Ah,tr=YR,KR=Tl,$R=aP,JR=oP;function Xi(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var qR=/^([a-z0-9.+-]+:)/i,ZR=/:[0-9]*$/,tP=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,eP=["<",">",'"',"`"," ","\r",`
`,"	"],iP=["{","}","|","\\","^","`"].concat(eP),fc=["'"].concat(iP),Op=["%","/","?",";","#"].concat(fc),Dp=["/","?","#"],rP=255,Fp=/^[+a-z0-9A-Z_-]{0,63}$/,nP=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,sP={javascript:!0,"javascript:":!0},dc={javascript:!0,"javascript:":!0},es={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Ac=go;function Tl(e,i,t){if(e&&tr.isObject(e)&&e instanceof Xi)return e;var r=new Xi;return r.parse(e,i,t),r}Xi.prototype.parse=function(e,i,t){if(!tr.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),n=r!==-1&&r<e.indexOf("#")?"?":"#",s=e.split(n),o=/\\/g;s[0]=s[0].replace(o,"/"),e=s.join(n);var a=e;if(a=a.trim(),!t&&e.split("#").length===1){var h=tP.exec(a);if(h)return this.path=a,this.href=a,this.pathname=h[1],h[2]?(this.search=h[2],i?this.query=Ac.parse(this.search.substr(1)):this.query=this.search.substr(1)):i&&(this.search="",this.query={}),this}var l=qR.exec(a);if(l){l=l[0];var u=l.toLowerCase();this.protocol=u,a=a.substr(l.length)}if(t||l||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var c=a.substr(0,2)==="//";c&&!(l&&dc[l])&&(a=a.substr(2),this.slashes=!0)}if(!dc[l]&&(c||l&&!es[l])){for(var f=-1,d=0;d<Dp.length;d++){var A=a.indexOf(Dp[d]);A!==-1&&(f===-1||A<f)&&(f=A)}var p,g;f===-1?g=a.lastIndexOf("@"):g=a.lastIndexOf("@",f),g!==-1&&(p=a.slice(0,g),a=a.slice(g+1),this.auth=decodeURIComponent(p)),f=-1;for(var d=0;d<Op.length;d++){var A=a.indexOf(Op[d]);A!==-1&&(f===-1||A<f)&&(f=A)}f===-1&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var I=this.hostname.split(/\./),d=0,E=I.length;d<E;d++){var w=I[d];if(w&&!w.match(Fp)){for(var T="",_=0,F=w.length;_<F;_++)w.charCodeAt(_)>127?T+="x":T+=w[_];if(!T.match(Fp)){var R=I.slice(0,d),S=I.slice(d+1),D=w.match(nP);D&&(R.push(D[1]),S.unshift(D[2])),S.length&&(a="/"+S.join(".")+a),this.hostname=R.join(".");break}}}this.hostname.length>rP?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=jR.toASCII(this.hostname));var $=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+$,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!sP[u])for(var d=0,E=fc.length;d<E;d++){var q=fc[d];if(a.indexOf(q)!==-1){var _t=encodeURIComponent(q);_t===q&&(_t=escape(q)),a=a.split(q).join(_t)}}var V=a.indexOf("#");V!==-1&&(this.hash=a.substr(V),a=a.slice(0,V));var X=a.indexOf("?");if(X!==-1?(this.search=a.substr(X),this.query=a.substr(X+1),i&&(this.query=Ac.parse(this.query)),a=a.slice(0,X)):i&&(this.search="",this.query={}),a&&(this.pathname=a),es[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var $=this.pathname||"",et=this.search||"";this.path=$+et}return this.href=this.format(),this};function oP(e){return tr.isString(e)&&(e=Tl(e)),e instanceof Xi?e.format():Xi.prototype.format.call(e)}Xi.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var i=this.protocol||"",t=this.pathname||"",r=this.hash||"",n=!1,s="";this.host?n=e+this.host:this.hostname&&(n=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&tr.isObject(this.query)&&Object.keys(this.query).length&&(s=Ac.stringify(this.query));var o=this.search||s&&"?"+s||"";return i&&i.substr(-1)!==":"&&(i+=":"),this.slashes||(!i||es[i])&&n!==!1?(n="//"+(n||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):n||(n=""),r&&r.charAt(0)!=="#"&&(r="#"+r),o&&o.charAt(0)!=="?"&&(o="?"+o),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),i+n+t+o+r};function aP(e,i){return Tl(e,!1,!0).resolve(i)}Xi.prototype.resolve=function(e){return this.resolveObject(Tl(e,!1,!0)).format()};Xi.prototype.resolveObject=function(e){if(tr.isString(e)){var i=new Xi;i.parse(e,!1,!0),e=i}for(var t=new Xi,r=Object.keys(this),n=0;n<r.length;n++){var s=r[n];t[s]=this[s]}if(t.hash=e.hash,e.href==="")return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),a=0;a<o.length;a++){var h=o[a];h!=="protocol"&&(t[h]=e[h])}return es[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!es[e.protocol]){for(var l=Object.keys(e),u=0;u<l.length;u++){var c=l[u];t[c]=e[c]}return t.href=t.format(),t}if(t.protocol=e.protocol,!e.host&&!dc[e.protocol]){for(var E=(e.pathname||"").split("/");E.length&&!(e.host=E.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),E[0]!==""&&E.unshift(""),E.length<2&&E.unshift(""),t.pathname=E.join("/")}else t.pathname=e.pathname;if(t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,t.pathname||t.search){var f=t.pathname||"",d=t.search||"";t.path=f+d}return t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var A=t.pathname&&t.pathname.charAt(0)==="/",p=e.host||e.pathname&&e.pathname.charAt(0)==="/",g=p||A||t.host&&e.pathname,y=g,I=t.pathname&&t.pathname.split("/")||[],E=e.pathname&&e.pathname.split("/")||[],w=t.protocol&&!es[t.protocol];if(w&&(t.hostname="",t.port=null,t.host&&(I[0]===""?I[0]=t.host:I.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(E[0]===""?E[0]=e.host:E.unshift(e.host)),e.host=null),g=g&&(E[0]===""||I[0]==="")),p)t.host=e.host||e.host===""?e.host:t.host,t.hostname=e.hostname||e.hostname===""?e.hostname:t.hostname,t.search=e.search,t.query=e.query,I=E;else if(E.length)I||(I=[]),I.pop(),I=I.concat(E),t.search=e.search,t.query=e.query;else if(!tr.isNullOrUndefined(e.search)){if(w){t.hostname=t.host=I.shift();var T=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;T&&(t.auth=T.shift(),t.host=t.hostname=T.shift())}return t.search=e.search,t.query=e.query,(!tr.isNull(t.pathname)||!tr.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!I.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var _=I.slice(-1)[0],F=(t.host||e.host||I.length>1)&&(_==="."||_==="..")||_==="",R=0,S=I.length;S>=0;S--)_=I[S],_==="."?I.splice(S,1):_===".."?(I.splice(S,1),R++):R&&(I.splice(S,1),R--);if(!g&&!y)for(;R--;R)I.unshift("..");g&&I[0]!==""&&(!I[0]||I[0].charAt(0)!=="/")&&I.unshift(""),F&&I.join("/").substr(-1)!=="/"&&I.push("");var D=I[0]===""||I[0]&&I[0].charAt(0)==="/";if(w){t.hostname=t.host=D?"":I.length?I.shift():"";var T=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;T&&(t.auth=T.shift(),t.host=t.hostname=T.shift())}return g=g||t.host&&I.length,g&&!D&&I.unshift(""),I.length?t.pathname=I.join("/"):(t.pathname=null,t.path=null),(!tr.isNull(t.pathname)||!tr.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t};Xi.prototype.parseHost=function(){var e=this.host,i=ZR.exec(e);i&&(i=i[0],i!==":"&&(this.port=i.substr(1)),e=e.substr(0,e.length-i.length)),e&&(this.hostname=e)};/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Wi;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(Wi||(Wi={}));var ys;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(ys||(ys={}));var vo;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(vo||(vo={}));var Nt;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(Nt||(Nt={}));var pi;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(pi||(pi={}));var ut;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(ut||(ut={}));var Mr;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Mr||(Mr={}));var Dt;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(Dt||(Dt={}));var yo;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(yo||(yo={}));var ni;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(ni||(ni={}));var rr;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(rr||(rr={}));var mi;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(mi||(mi={}));var Ii;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Ii||(Ii={}));var Ar;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(Ar||(Ar={}));var ph;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(ph||(ph={}));var Gi;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(Gi||(Gi={}));var Ie;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR"})(Ie||(Ie={}));var pc;(function(e){e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA"})(pc||(pc={}));var ve;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(ve||(ve={}));var Yi;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Yi||(Yi={}));/*!
 * @pixi/utils - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var dn={parse:KR,format:JR,resolve:$R};function wi(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function hP(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function lP(e,i,t){return e.replace(new RegExp(hP(i),"g"),t)}function uP(e,i){for(var t="",r=0,n=-1,s=0,o,a=0;a<=e.length;++a){if(a<e.length)o=e.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(n===a-1||s===1))if(n!==a-1&&s===2){if(t.length<2||r!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var h=t.lastIndexOf("/");if(h!==t.length-1){h===-1?(t="",r=0):(t=t.slice(0,h),r=t.length-1-t.lastIndexOf("/")),n=a,s=0;continue}}else if(t.length===2||t.length===1){t="",r=0,n=a,s=0;continue}}i&&(t.length>0?t+="/..":t="..",r=2)}else t.length>0?t+="/"+e.slice(n+1,a):t=e.slice(n+1,a),r=a-n-1;n=a,s=0}else o===46&&s!==-1?++s:s=-1}return t}var oI={toPosix:function(e){return lP(e,"\\","/")},isUrl:function(e){return/^https?:/.test(this.toPosix(e))},isDataUrl:function(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},hasProtocol:function(e){return/^[^/:]+:\//.test(this.toPosix(e))},getProtocol:function(e){wi(e),e=this.toPosix(e);var i="",t=/^file:\/\/\//.exec(e),r=/^[^/:]+:\/\//.exec(e),n=/^[^/:]+:\//.exec(e);if(t||r||n){var s=(t==null?void 0:t[0])||(r==null?void 0:r[0])||(n==null?void 0:n[0]);i=s,e=e.slice(s.length)}return i},toAbsolute:function(e,i,t){if(this.isDataUrl(e))return e;var r=this.toPosix(i??ft.ADAPTER.getBaseUrl()),n=this.toPosix(t??this.rootname(r));if(wi(e),e=this.toPosix(e),e.startsWith("/"))return oI.join(n,e.slice(1));var s=this.isAbsolute(e)?e:this.join(r,e);return s},normalize:function(e){if(e=this.toPosix(e),wi(e),e.length===0)return".";var i="",t=e.startsWith("/");this.hasProtocol(e)&&(i=this.rootname(e),e=e.slice(i.length));var r=e.endsWith("/");return e=uP(e,!1),e.length>0&&r&&(e+="/"),t?"/"+e:i+e},isAbsolute:function(e){return wi(e),e=this.toPosix(e),this.hasProtocol(e)?!0:e.startsWith("/")},join:function(){for(var e=arguments,i=[],t=0;t<arguments.length;t++)i[t]=e[t];if(i.length===0)return".";for(var r,n=0;n<i.length;++n){var s=i[n];wi(s),s.length>0&&(r===void 0?r=s:r+="/"+s)}return r===void 0?".":this.normalize(r)},dirname:function(e){if(wi(e),e.length===0)return".";e=this.toPosix(e);var i=e.charCodeAt(0),t=i===47,r=-1,n=!0,s=this.getProtocol(e),o=e;e=e.slice(s.length);for(var a=e.length-1;a>=1;--a)if(i=e.charCodeAt(a),i===47){if(!n){r=a;break}}else n=!1;return r===-1?t?"/":this.isUrl(o)?s+e:s:t&&r===1?"//":s+e.slice(0,r)},rootname:function(e){wi(e),e=this.toPosix(e);var i="";if(e.startsWith("/")?i="/":i=this.getProtocol(e),this.isUrl(e)){var t=e.indexOf("/",i.length);t!==-1?i=e.slice(0,t):i=e,i.endsWith("/")||(i+="/")}return i},basename:function(e,i){wi(e),i&&wi(i),e=this.toPosix(e);var t=0,r=-1,n=!0,s;if(i!==void 0&&i.length>0&&i.length<=e.length){if(i.length===e.length&&i===e)return"";var o=i.length-1,a=-1;for(s=e.length-1;s>=0;--s){var h=e.charCodeAt(s);if(h===47){if(!n){t=s+1;break}}else a===-1&&(n=!1,a=s+1),o>=0&&(h===i.charCodeAt(o)?--o===-1&&(r=s):(o=-1,r=a))}return t===r?r=a:r===-1&&(r=e.length),e.slice(t,r)}for(s=e.length-1;s>=0;--s)if(e.charCodeAt(s)===47){if(!n){t=s+1;break}}else r===-1&&(n=!1,r=s+1);return r===-1?"":e.slice(t,r)},extname:function(e){wi(e),e=this.toPosix(e);for(var i=-1,t=0,r=-1,n=!0,s=0,o=e.length-1;o>=0;--o){var a=e.charCodeAt(o);if(a===47){if(!n){t=o+1;break}continue}r===-1&&(n=!1,r=o+1),a===46?i===-1?i=o:s!==1&&(s=1):i!==-1&&(s=-1)}return i===-1||r===-1||s===0||s===1&&i===r-1&&i===t+1?"":e.slice(i,r)},parse:function(e){wi(e);var i={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return i;e=this.toPosix(e);var t=e.charCodeAt(0),r=this.isAbsolute(e),n;i.root=this.rootname(e),r||this.hasProtocol(e)?n=1:n=0;for(var s=-1,o=0,a=-1,h=!0,l=e.length-1,u=0;l>=n;--l){if(t=e.charCodeAt(l),t===47){if(!h){o=l+1;break}continue}a===-1&&(h=!1,a=l+1),t===46?s===-1?s=l:u!==1&&(u=1):s!==-1&&(u=-1)}return s===-1||a===-1||u===0||u===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&r?i.base=i.name=e.slice(1,a):i.base=i.name=e.slice(o,a)):(o===0&&r?(i.name=e.slice(1,s),i.base=e.slice(1,a)):(i.name=e.slice(o,s),i.base=e.slice(o,a)),i.ext=e.slice(s,a)),i.dir=this.dirname(e),i},sep:"/",delimiter:":"};ft.RETINA_PREFIX=/@([0-9\.]+)x/;ft.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var gc=!1,Lp="6.5.2";function cP(){gc=!0}function aI(e){var i;if(!gc){if(ft.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var t=[`
 %c %c %c PixiJS `+Lp+" - ✰ "+e+` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(i=globalThis.console).log.apply(i,t)}else globalThis.console&&globalThis.console.log("PixiJS "+Lp+" - "+e+" - http://www.pixijs.com/");gc=!0}}var Zl;function hI(){return typeof Zl>"u"&&(Zl=function(){var i={stencil:!0,failIfMajorPerformanceCaveat:ft.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!ft.ADAPTER.getWebGLRenderingContext())return!1;var t=ft.ADAPTER.createCanvas(),r=t.getContext("webgl",i)||t.getContext("experimental-webgl",i),n=!!(r&&r.getContextAttributes().stencil);if(r){var s=r.getExtension("WEBGL_lose_context");s&&s.loseContext()}return r=null,n}catch{return!1}}()),Zl}var fP="#f0f8ff",dP="#faebd7",AP="#00ffff",pP="#7fffd4",gP="#f0ffff",vP="#f5f5dc",yP="#ffe4c4",mP="#000000",IP="#ffebcd",CP="#0000ff",_P="#8a2be2",xP="#a52a2a",EP="#deb887",bP="#5f9ea0",wP="#7fff00",TP="#d2691e",BP="#ff7f50",RP="#6495ed",PP="#fff8dc",SP="#dc143c",NP="#00ffff",OP="#00008b",DP="#008b8b",FP="#b8860b",LP="#a9a9a9",MP="#006400",QP="#a9a9a9",UP="#bdb76b",GP="#8b008b",kP="#556b2f",HP="#ff8c00",XP="#9932cc",YP="#8b0000",VP="#e9967a",zP="#8fbc8f",WP="#483d8b",jP="#2f4f4f",KP="#2f4f4f",$P="#00ced1",JP="#9400d3",qP="#ff1493",ZP="#00bfff",tS="#696969",eS="#696969",iS="#1e90ff",rS="#b22222",nS="#fffaf0",sS="#228b22",oS="#ff00ff",aS="#dcdcdc",hS="#f8f8ff",lS="#daa520",uS="#ffd700",cS="#808080",fS="#008000",dS="#adff2f",AS="#808080",pS="#f0fff0",gS="#ff69b4",vS="#cd5c5c",yS="#4b0082",mS="#fffff0",IS="#f0e68c",CS="#fff0f5",_S="#e6e6fa",xS="#7cfc00",ES="#fffacd",bS="#add8e6",wS="#f08080",TS="#e0ffff",BS="#fafad2",RS="#d3d3d3",PS="#90ee90",SS="#d3d3d3",NS="#ffb6c1",OS="#ffa07a",DS="#20b2aa",FS="#87cefa",LS="#778899",MS="#778899",QS="#b0c4de",US="#ffffe0",GS="#00ff00",kS="#32cd32",HS="#faf0e6",XS="#ff00ff",YS="#800000",VS="#66cdaa",zS="#0000cd",WS="#ba55d3",jS="#9370db",KS="#3cb371",$S="#7b68ee",JS="#00fa9a",qS="#48d1cc",ZS="#c71585",tN="#191970",eN="#f5fffa",iN="#ffe4e1",rN="#ffe4b5",nN="#ffdead",sN="#000080",oN="#fdf5e6",aN="#808000",hN="#6b8e23",lN="#ffa500",uN="#ff4500",cN="#da70d6",fN="#eee8aa",dN="#98fb98",AN="#afeeee",pN="#db7093",gN="#ffefd5",vN="#ffdab9",yN="#cd853f",mN="#ffc0cb",IN="#dda0dd",CN="#b0e0e6",_N="#800080",xN="#663399",EN="#ff0000",bN="#bc8f8f",wN="#4169e1",TN="#8b4513",BN="#fa8072",RN="#f4a460",PN="#2e8b57",SN="#fff5ee",NN="#a0522d",ON="#c0c0c0",DN="#87ceeb",FN="#6a5acd",LN="#708090",MN="#708090",QN="#fffafa",UN="#00ff7f",GN="#4682b4",kN="#d2b48c",HN="#008080",XN="#d8bfd8",YN="#ff6347",VN="#40e0d0",zN="#ee82ee",WN="#f5deb3",jN="#ffffff",KN="#f5f5f5",$N="#ffff00",JN="#9acd32",qN={aliceblue:fP,antiquewhite:dP,aqua:AP,aquamarine:pP,azure:gP,beige:vP,bisque:yP,black:mP,blanchedalmond:IP,blue:CP,blueviolet:_P,brown:xP,burlywood:EP,cadetblue:bP,chartreuse:wP,chocolate:TP,coral:BP,cornflowerblue:RP,cornsilk:PP,crimson:SP,cyan:NP,darkblue:OP,darkcyan:DP,darkgoldenrod:FP,darkgray:LP,darkgreen:MP,darkgrey:QP,darkkhaki:UP,darkmagenta:GP,darkolivegreen:kP,darkorange:HP,darkorchid:XP,darkred:YP,darksalmon:VP,darkseagreen:zP,darkslateblue:WP,darkslategray:jP,darkslategrey:KP,darkturquoise:$P,darkviolet:JP,deeppink:qP,deepskyblue:ZP,dimgray:tS,dimgrey:eS,dodgerblue:iS,firebrick:rS,floralwhite:nS,forestgreen:sS,fuchsia:oS,gainsboro:aS,ghostwhite:hS,goldenrod:lS,gold:uS,gray:cS,green:fS,greenyellow:dS,grey:AS,honeydew:pS,hotpink:gS,indianred:vS,indigo:yS,ivory:mS,khaki:IS,lavenderblush:CS,lavender:_S,lawngreen:xS,lemonchiffon:ES,lightblue:bS,lightcoral:wS,lightcyan:TS,lightgoldenrodyellow:BS,lightgray:RS,lightgreen:PS,lightgrey:SS,lightpink:NS,lightsalmon:OS,lightseagreen:DS,lightskyblue:FS,lightslategray:LS,lightslategrey:MS,lightsteelblue:QS,lightyellow:US,lime:GS,limegreen:kS,linen:HS,magenta:XS,maroon:YS,mediumaquamarine:VS,mediumblue:zS,mediumorchid:WS,mediumpurple:jS,mediumseagreen:KS,mediumslateblue:$S,mediumspringgreen:JS,mediumturquoise:qS,mediumvioletred:ZS,midnightblue:tN,mintcream:eN,mistyrose:iN,moccasin:rN,navajowhite:nN,navy:sN,oldlace:oN,olive:aN,olivedrab:hN,orange:lN,orangered:uN,orchid:cN,palegoldenrod:fN,palegreen:dN,paleturquoise:AN,palevioletred:pN,papayawhip:gN,peachpuff:vN,peru:yN,pink:mN,plum:IN,powderblue:CN,purple:_N,rebeccapurple:xN,red:EN,rosybrown:bN,royalblue:wN,saddlebrown:TN,salmon:BN,sandybrown:RN,seagreen:PN,seashell:SN,sienna:NN,silver:ON,skyblue:DN,slateblue:FN,slategray:LN,slategrey:MN,snow:QN,springgreen:UN,steelblue:GN,tan:kN,teal:HN,thistle:XN,tomato:YN,turquoise:VN,violet:zN,wheat:WN,white:jN,whitesmoke:KN,yellow:$N,yellowgreen:JN};function Re(e,i){return i===void 0&&(i=[]),i[0]=(e>>16&255)/255,i[1]=(e>>8&255)/255,i[2]=(e&255)/255,i}function _d(e){var i=e.toString(16);return i="000000".substring(0,6-i.length)+i,"#"+i}function mo(e){return typeof e=="string"&&(e=qN[e.toLowerCase()]||e,e[0]==="#"&&(e=e.slice(1))),parseInt(e,16)}function Ci(e){return(e[0]*255<<16)+(e[1]*255<<8)+(e[2]*255|0)}function ZN(){for(var e=[],i=[],t=0;t<32;t++)e[t]=t,i[t]=t;e[Nt.NORMAL_NPM]=Nt.NORMAL,e[Nt.ADD_NPM]=Nt.ADD,e[Nt.SCREEN_NPM]=Nt.SCREEN,i[Nt.NORMAL]=Nt.NORMAL_NPM,i[Nt.ADD]=Nt.ADD_NPM,i[Nt.SCREEN]=Nt.SCREEN_NPM;var r=[];return r.push(i),r.push(e),r}var xd=ZN();function Ed(e,i){return xd[i?1:0][e]}function lI(e,i,t,r){return t=t||new Float32Array(4),r||r===void 0?(t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i):(t[0]=e[0],t[1]=e[1],t[2]=e[2]),t[3]=i,t}function Bl(e,i){if(i===1)return(i*255<<24)+e;if(i===0)return 0;var t=e>>16&255,r=e>>8&255,n=e&255;return t=t*i+.5|0,r=r*i+.5|0,n=n*i+.5|0,(i*255<<24)+(t<<16)+(r<<8)+n}function bd(e,i,t,r){return t=t||new Float32Array(4),t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(e&255)/255,(r||r===void 0)&&(t[0]*=i,t[1]*=i,t[2]*=i),t[3]=i,t}function uI(e,i){i===void 0&&(i=null);var t=e*6;if(i=i||new Uint16Array(t),i.length!==t)throw new Error("Out buffer length is incorrect, got "+i.length+" and expected "+t);for(var r=0,n=0;r<t;r+=6,n+=4)i[r+0]=n+0,i[r+1]=n+1,i[r+2]=n+2,i[r+3]=n+0,i[r+4]=n+2,i[r+5]=n+3;return i}function Rl(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}var tO={Float32Array,Uint32Array,Int32Array,Uint8Array};function eO(e,i){for(var t=0,r=0,n={},s=0;s<e.length;s++)r+=i[s],t+=e[s].length;for(var o=new ArrayBuffer(t*4),a=null,h=0,s=0;s<e.length;s++){var l=i[s],u=e[s],c=Rl(u);n[c]||(n[c]=new tO[c](o)),a=n[c];for(var f=0;f<u.length;f++){var d=(f/l|0)*r+h,A=f%l;a[d+A]=u[f]}h+=l}return new Float32Array(o)}function Io(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function vc(e){return!(e&e-1)&&!!e}function yc(e){var i=(e>65535?1:0)<<4;e>>>=i;var t=(e>255?1:0)<<3;return e>>>=t,i|=t,t=(e>15?1:0)<<2,e>>>=t,i|=t,t=(e>3?1:0)<<1,e>>>=t,i|=t,i|e>>1}function bn(e,i,t){var r=e.length,n;if(!(i>=r||t===0)){t=i+t>r?r-i:t;var s=r-t;for(n=i;n<s;++n)e[n]=e[n+t];e.length=s}}function An(e){return e===0?0:e<0?-1:1}var iO=0;function Gr(){return++iO}var Mp={};function ze(e,i,t){if(t===void 0&&(t=3),!Mp[i]){var r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",i+`
Deprecated since v`+e):(r=r.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",i+`
Deprecated since v`+e),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",i+`
Deprecated since v`+e),console.warn(r))),Mp[i]=!0}}var mc={},Xe=Object.create(null),ci=Object.create(null);function rO(){var e;for(e in Xe)Xe[e].destroy();for(e in ci)ci[e].destroy()}function nO(){var e;for(e in Xe)delete Xe[e];for(e in ci)delete ci[e]}var Ic=function(){function e(i,t,r){this.canvas=ft.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=r||ft.RESOLUTION,this.resize(i,t)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(i,t){this.canvas.width=Math.round(i*this.resolution),this.canvas.height=Math.round(t*this.resolution)},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(i){this.canvas.width=Math.round(i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(i){this.canvas.height=Math.round(i)},enumerable:!1,configurable:!0}),e}();function cI(e){var i=e.width,t=e.height,r=e.getContext("2d"),n=r.getImageData(0,0,i,t),s=n.data,o=s.length,a={top:null,left:null,right:null,bottom:null},h=null,l,u,c;for(l=0;l<o;l+=4)s[l+3]!==0&&(u=l/4%i,c=~~(l/4/i),a.top===null&&(a.top=c),(a.left===null||u<a.left)&&(a.left=u),(a.right===null||a.right<u)&&(a.right=u+1),(a.bottom===null||a.bottom<c)&&(a.bottom=c));return a.top!==null&&(i=a.right-a.left,t=a.bottom-a.top+1,h=r.getImageData(a.left,a.top,i,t)),{height:t,width:i,data:h}}var fI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function sO(e){var i=fI.exec(e);if(i)return{mediaType:i[1]?i[1].toLowerCase():void 0,subType:i[2]?i[2].toLowerCase():void 0,charset:i[3]?i[3].toLowerCase():void 0,encoding:i[4]?i[4].toLowerCase():void 0,data:i[5]}}var _a;function dI(e,i){if(i===void 0&&(i=globalThis.location),e.indexOf("data:")===0)return"";i=i||globalThis.location,_a||(_a=document.createElement("a")),_a.href=e;var t=dn.parse(_a.href),r=!t.port&&i.port===""||t.port===i.port;return t.hostname!==i.hostname||!r||t.protocol!==i.protocol?"anonymous":""}function Co(e,i){var t=ft.RETINA_PREFIX.exec(e);return t?parseFloat(t[1]):i!==void 0?i:1}const oO=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:ci,CanvasRenderTarget:Ic,DATA_URI:fI,EventEmitter:je,ProgramCache:mc,TextureCache:Xe,clearTextureCache:nO,correctBlendMode:Ed,createIndicesForQuads:uI,decomposeDataUri:sO,deprecation:ze,destroyTextureCache:rO,determineCrossOrigin:dI,get earcut(){return vs},getBufferType:Rl,getResolutionOfUrl:Co,hex2rgb:Re,hex2string:_d,interleaveTypedArrays:eO,isMobile:Ai,isPow2:vc,isWebGLSupported:hI,log2:yc,nextPow2:Io,path:oI,premultiplyBlendMode:xd,premultiplyRgba:lI,premultiplyTint:Bl,premultiplyTintToRgba:bd,removeItems:bn,rgb2hex:Ci,sayHello:aI,sign:An,skipHello:cP,string2hex:mo,trimCanvas:cI,uid:Gr,url:dn},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/display - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ft.SORTABLE_CHILDREN=!1;var _i=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(i){return this.minX>this.maxX||this.minY>this.maxY?Tt.EMPTY:(i=i||new Tt(0,0,1,1),i.x=this.minX,i.y=this.minY,i.width=this.maxX-this.minX,i.height=this.maxY-this.minY,i)},e.prototype.addPoint=function(i){this.minX=Math.min(this.minX,i.x),this.maxX=Math.max(this.maxX,i.x),this.minY=Math.min(this.minY,i.y),this.maxY=Math.max(this.maxY,i.y)},e.prototype.addPointMatrix=function(i,t){var r=i.a,n=i.b,s=i.c,o=i.d,a=i.tx,h=i.ty,l=r*t.x+s*t.y+a,u=n*t.x+o*t.y+h;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)},e.prototype.addQuad=function(i){var t=this.minX,r=this.minY,n=this.maxX,s=this.maxY,o=i[0],a=i[1];t=o<t?o:t,r=a<r?a:r,n=o>n?o:n,s=a>s?a:s,o=i[2],a=i[3],t=o<t?o:t,r=a<r?a:r,n=o>n?o:n,s=a>s?a:s,o=i[4],a=i[5],t=o<t?o:t,r=a<r?a:r,n=o>n?o:n,s=a>s?a:s,o=i[6],a=i[7],t=o<t?o:t,r=a<r?a:r,n=o>n?o:n,s=a>s?a:s,this.minX=t,this.minY=r,this.maxX=n,this.maxY=s},e.prototype.addFrame=function(i,t,r,n,s){this.addFrameMatrix(i.worldTransform,t,r,n,s)},e.prototype.addFrameMatrix=function(i,t,r,n,s){var o=i.a,a=i.b,h=i.c,l=i.d,u=i.tx,c=i.ty,f=this.minX,d=this.minY,A=this.maxX,p=this.maxY,g=o*t+h*r+u,y=a*t+l*r+c;f=g<f?g:f,d=y<d?y:d,A=g>A?g:A,p=y>p?y:p,g=o*n+h*r+u,y=a*n+l*r+c,f=g<f?g:f,d=y<d?y:d,A=g>A?g:A,p=y>p?y:p,g=o*t+h*s+u,y=a*t+l*s+c,f=g<f?g:f,d=y<d?y:d,A=g>A?g:A,p=y>p?y:p,g=o*n+h*s+u,y=a*n+l*s+c,f=g<f?g:f,d=y<d?y:d,A=g>A?g:A,p=y>p?y:p,this.minX=f,this.minY=d,this.maxX=A,this.maxY=p},e.prototype.addVertexData=function(i,t,r){for(var n=this.minX,s=this.minY,o=this.maxX,a=this.maxY,h=t;h<r;h+=2){var l=i[h],u=i[h+1];n=l<n?l:n,s=u<s?u:s,o=l>o?l:o,a=u>a?u:a}this.minX=n,this.minY=s,this.maxX=o,this.maxY=a},e.prototype.addVertices=function(i,t,r,n){this.addVerticesMatrix(i.worldTransform,t,r,n)},e.prototype.addVerticesMatrix=function(i,t,r,n,s,o){s===void 0&&(s=0),o===void 0&&(o=s);for(var a=i.a,h=i.b,l=i.c,u=i.d,c=i.tx,f=i.ty,d=this.minX,A=this.minY,p=this.maxX,g=this.maxY,y=r;y<n;y+=2){var I=t[y],E=t[y+1],w=a*I+l*E+c,T=u*E+h*I+f;d=Math.min(d,w-s),p=Math.max(p,w+s),A=Math.min(A,T-o),g=Math.max(g,T+o)}this.minX=d,this.minY=A,this.maxX=p,this.maxY=g},e.prototype.addBounds=function(i){var t=this.minX,r=this.minY,n=this.maxX,s=this.maxY;this.minX=i.minX<t?i.minX:t,this.minY=i.minY<r?i.minY:r,this.maxX=i.maxX>n?i.maxX:n,this.maxY=i.maxY>s?i.maxY:s},e.prototype.addBoundsMask=function(i,t){var r=i.minX>t.minX?i.minX:t.minX,n=i.minY>t.minY?i.minY:t.minY,s=i.maxX<t.maxX?i.maxX:t.maxX,o=i.maxY<t.maxY?i.maxY:t.maxY;if(r<=s&&n<=o){var a=this.minX,h=this.minY,l=this.maxX,u=this.maxY;this.minX=r<a?r:a,this.minY=n<h?n:h,this.maxX=s>l?s:l,this.maxY=o>u?o:u}},e.prototype.addBoundsMatrix=function(i,t){this.addFrameMatrix(t,i.minX,i.minY,i.maxX,i.maxY)},e.prototype.addBoundsArea=function(i,t){var r=i.minX>t.x?i.minX:t.x,n=i.minY>t.y?i.minY:t.y,s=i.maxX<t.x+t.width?i.maxX:t.x+t.width,o=i.maxY<t.y+t.height?i.maxY:t.y+t.height;if(r<=s&&n<=o){var a=this.minX,h=this.minY,l=this.maxX,u=this.maxY;this.minX=r<a?r:a,this.minY=n<h?n:h,this.maxX=s>l?s:l,this.maxY=o>u?o:u}},e.prototype.pad=function(i,t){i===void 0&&(i=0),t===void 0&&(t=i),this.isEmpty()||(this.minX-=i,this.maxX+=i,this.minY-=t,this.maxY+=t)},e.prototype.addFramePad=function(i,t,r,n,s,o){i-=s,t-=o,r+=s,n+=o,this.minX=this.minX<i?this.minX:i,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>n?this.maxY:n},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Cc=function(e,i){return Cc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Cc(e,i)};function wd(e,i){Cc(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var Jt=function(e){wd(i,e);function i(){var t=e.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new oa,t.alpha=1,t.visible=!0,t.renderable=!0,t.cullable=!1,t.cullArea=null,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new _i,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._maskRefCount=0,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return i.mixin=function(t){for(var r=Object.keys(t),n=0;n<r.length;++n){var s=r[n];Object.defineProperty(i.prototype,s,Object.getOwnPropertyDescriptor(t,s))}},Object.defineProperty(i.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),i.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},i.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},i.prototype.getBounds=function(t,r){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new Tt),r=this._boundsRect),this._bounds.getRectangle(r)},i.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Tt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new _i);var r=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,o=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,t);return this.parent=n,this.transform=r,this._bounds=s,this._bounds.updateID+=this._boundsID-o,a},i.prototype.toGlobal=function(t,r,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,r)},i.prototype.toLocal=function(t,r,n,s){return r&&(t=r.toGlobal(t,n,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},i.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},i.prototype.setTransform=function(t,r,n,s,o,a,h,l,u){return t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=1),s===void 0&&(s=1),o===void 0&&(o=0),a===void 0&&(a=0),h===void 0&&(h=0),l===void 0&&(l=0),u===void 0&&(u=0),this.position.x=t,this.position.y=r,this.scale.x=n||1,this.scale.y=s||1,this.rotation=o,this.skew.x=a,this.skew.y=h,this.pivot.x=l,this.pivot.y=u,this},i.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(i.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new Td),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),i.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},i.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(i.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"angle",{get:function(){return this.transform.rotation*El},set:function(t){this.transform.rotation=t*yi},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mask",{get:function(){return this._mask},set:function(t){if(this._mask!==t){if(this._mask){var r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=t,this._mask){var r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}},enumerable:!1,configurable:!0}),i}(je),Td=function(e){wd(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.sortDirty=null,t}return i}(Jt);Jt.prototype.displayObjectUpdateTransform=Jt.prototype.updateTransform;/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Qp;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(Qp||(Qp={}));var Up;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(Up||(Up={}));var Gp;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(Gp||(Gp={}));var kp;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(kp||(kp={}));var Hp;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Hp||(Hp={}));var Xp;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Xp||(Xp={}));var Yp;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Yp||(Yp={}));var Vp;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(Vp||(Vp={}));var zp;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(zp||(zp={}));var Wp;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(Wp||(Wp={}));var jp;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(jp||(jp={}));var Kp;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(Kp||(Kp={}));var $p;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})($p||($p={}));var Jp;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(Jp||(Jp={}));var qp;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(qp||(qp={}));var Zp;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(Zp||(Zp={}));var _c;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR"})(_c||(_c={}));var tg;(function(e){e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA"})(tg||(tg={}));var eg;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(eg||(eg={}));var ig;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(ig||(ig={}));function aO(e,i){return e.zIndex===i.zIndex?e._lastSortedIndex-i._lastSortedIndex:e.zIndex-i.zIndex}var $t=function(e){wd(i,e);function i(){var t=e.call(this)||this;return t.children=[],t.sortableChildren=ft.SORTABLE_CHILDREN,t.sortDirty=!1,t}return i.prototype.onChildrenChange=function(t){},i.prototype.addChild=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];if(r.length>1)for(var s=0;s<r.length;s++)this.addChild(r[s]);else{var o=r[0];o.parent&&o.parent.removeChild(o),o.parent=this,this.sortDirty=!0,o.transform._parentID=-1,this.children.push(o),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",o,this,this.children.length-1),o.emit("added",this)}return r[0]},i.prototype.addChildAt=function(t,r){if(r<0||r>this.children.length)throw new Error(t+"addChildAt: The index "+r+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(r,0,t),this._boundsID++,this.onChildrenChange(r),t.emit("added",this),this.emit("childAdded",t,this,r),t},i.prototype.swapChildren=function(t,r){if(t!==r){var n=this.getChildIndex(t),s=this.getChildIndex(r);this.children[n]=r,this.children[s]=t,this.onChildrenChange(n<s?n:s)}},i.prototype.getChildIndex=function(t){var r=this.children.indexOf(t);if(r===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return r},i.prototype.setChildIndex=function(t,r){if(r<0||r>=this.children.length)throw new Error("The index "+r+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(t);bn(this.children,n,1),this.children.splice(r,0,t),this.onChildrenChange(r)},i.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},i.prototype.removeChild=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];if(r.length>1)for(var s=0;s<r.length;s++)this.removeChild(r[s]);else{var o=r[0],a=this.children.indexOf(o);if(a===-1)return null;o.parent=null,o.transform._parentID=-1,bn(this.children,a,1),this._boundsID++,this.onChildrenChange(a),o.emit("removed",this),this.emit("childRemoved",o,this,a)}return r[0]},i.prototype.removeChildAt=function(t){var r=this.getChildAt(t);return r.parent=null,r.transform._parentID=-1,bn(this.children,t,1),this._boundsID++,this.onChildrenChange(t),r.emit("removed",this),this.emit("childRemoved",r,this,t),r},i.prototype.removeChildren=function(t,r){t===void 0&&(t=0),r===void 0&&(r=this.children.length);var n=t,s=r,o=s-n,a;if(o>0&&o<=s){a=this.children.splice(n,o);for(var h=0;h<a.length;++h)a[h].parent=null,a[h].transform&&(a[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var h=0;h<a.length;++h)a[h].emit("removed",this),this.emit("childRemoved",a[h],this,h);return a}else if(o===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},i.prototype.sortChildren=function(){for(var t=!1,r=0,n=this.children.length;r<n;++r){var s=this.children[r];s._lastSortedIndex=r,!t&&s.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(aO),this.sortDirty=!1},i.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,r=this.children.length;t<r;++t){var n=this.children[t];n.visible&&n.updateTransform()}},i.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var r=this.children[t];if(!(!r.visible||!r.renderable))if(r.calculateBounds(),r._mask){var n=r._mask.isMaskData?r._mask.maskObject:r._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(r._bounds,n._bounds)):this._bounds.addBounds(r._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID},i.prototype.getLocalBounds=function(t,r){r===void 0&&(r=!1);var n=e.prototype.getLocalBounds.call(this,t);if(!r)for(var s=0,o=this.children.length;s<o;++s){var a=this.children[s];a.visible&&a.updateTransform()}return n},i.prototype._calculateBounds=function(){},i.prototype._renderWithCulling=function(t){var r=t.renderTexture.sourceFrame;if(r.width>0&&r.height>0){var n,s;if(this.cullArea?(n=this.cullArea,s=this.worldTransform):this._render!==i.prototype._render&&(n=this.getBounds(!0)),n&&r.intersects(n,s))this._render(t);else if(this.cullArea)return;for(var o=0,a=this.children.length;o<a;++o){var h=this.children[o],l=h.cullable;h.cullable=l||!this.cullArea,h.render(t),h.cullable=l}}},i.prototype.render=function(t){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var r=0,n=this.children.length;r<n;++r)this.children[r].render(t)}},i.prototype.renderAdvanced=function(t){var r=this.filters,n=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<r.length;s++)r[s].enabled&&this._enabledFilters.push(r[s])}var o=r&&this._enabledFilters&&this._enabledFilters.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==_c.NONE));if(o&&t.batch.flush(),r&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),n&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(var s=0,a=this.children.length;s<a;++s)this.children[s].render(t)}o&&t.batch.flush(),n&&t.mask.pop(this),r&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},i.prototype._render=function(t){},i.prototype.destroy=function(t){e.prototype.destroy.call(this),this.sortDirty=!1;var r=typeof t=="boolean"?t:t&&t.children,n=this.removeChildren(0,this.children.length);if(r)for(var s=0;s<n.length;++s)n[s].destroy(t)},Object.defineProperty(i.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var r=this.getLocalBounds().width;r!==0?this.scale.x=t/r:this.scale.x=1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var r=this.getLocalBounds().height;r!==0?this.scale.y=t/r:this.scale.y=1,this._height=t},enumerable:!1,configurable:!0}),i}(Jt);$t.prototype.containerUpdateTransform=$t.prototype.updateTransform;/*!
 * @pixi/runner - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Oe=function(){function e(i){this.items=[],this._name=i,this._aliasCount=0}return e.prototype.emit=function(i,t,r,n,s,o,a,h){if(arguments.length>8)throw new Error("max arguments reached");var l=this,u=l.name,c=l.items;this._aliasCount++;for(var f=0,d=c.length;f<d;f++)c[f][u](i,t,r,n,s,o,a,h);return c===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(i){return i[this._name]&&(this.ensureNonAliasedItems(),this.remove(i),this.items.push(i)),this},e.prototype.remove=function(i){var t=this.items.indexOf(i);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},e.prototype.contains=function(i){return this.items.indexOf(i)!==-1},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Oe.prototype,{dispatch:{value:Oe.prototype.emit},run:{value:Oe.prototype.emit}});/*!
 * @pixi/core - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ft.PREFER_ENV=Ai.any?Wi.WEBGL:Wi.WEBGL2;ft.STRICT_TEXTURE_CACHE=!1;var _o=[];function Pl(e,i){if(!e)return null;var t="";if(typeof e=="string"){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);r&&(t=r[1].toLowerCase())}for(var n=_o.length-1;n>=0;--n){var s=_o[n];if(s.test&&s.test(e,t))return new s(e,i)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xc=function(e,i){return xc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},xc(e,i)};function se(e,i){xc(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var Ec=function(){return Ec=Object.assign||function(i){for(var t=arguments,r,n=1,s=arguments.length;n<s;n++){r=t[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},Ec.apply(this,arguments)};function hO(e,i){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&i.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)i.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(t[r[n]]=e[r[n]]);return t}var Sn=function(){function e(i,t){i===void 0&&(i=0),t===void 0&&(t=0),this._width=i,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Oe("setRealSize"),this.onUpdate=new Oe("update"),this.onError=new Oe("onError")}return e.prototype.bind=function(i){this.onResize.add(i),this.onUpdate.add(i),this.onError.add(i),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(i){this.onResize.remove(i),this.onUpdate.remove(i),this.onError.remove(i)},e.prototype.resize=function(i,t){(i!==this._width||t!==this._height)&&(this._width=i,this._height=t,this.onResize.emit(i,t))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(i,t,r){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(i,t){return!1},e}(),Fn=function(e){se(i,e);function i(t,r){var n=this,s=r||{},o=s.width,a=s.height;if(!o||!a)throw new Error("BufferResource width or height invalid");return n=e.call(this,o,a)||this,n.data=t,n}return i.prototype.upload=function(t,r,n){var s=t.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Ii.UNPACK);var o=r.realWidth,a=r.realHeight;return n.width===o&&n.height===a?s.texSubImage2D(r.target,0,0,0,o,a,r.format,n.type,this.data):(n.width=o,n.height=a,s.texImage2D(r.target,0,n.internalFormat,o,a,0,r.format,n.type,this.data)),!0},i.prototype.dispose=function(){this.data=null},i.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},i}(Sn),lO={scaleMode:ni.NEAREST,format:ut.RGBA,alphaMode:Ii.NPM},Wt=function(e){se(i,e);function i(t,r){t===void 0&&(t=null),r===void 0&&(r=null);var n=e.call(this)||this;r=r||{};var s=r.alphaMode,o=r.mipmap,a=r.anisotropicLevel,h=r.scaleMode,l=r.width,u=r.height,c=r.wrapMode,f=r.format,d=r.type,A=r.target,p=r.resolution,g=r.resourceOptions;return t&&!(t instanceof Sn)&&(t=Pl(t,g),t.internal=!0),n.resolution=p||ft.RESOLUTION,n.width=Math.round((l||0)*n.resolution)/n.resolution,n.height=Math.round((u||0)*n.resolution)/n.resolution,n._mipmap=o!==void 0?o:ft.MIPMAP_TEXTURES,n.anisotropicLevel=a!==void 0?a:ft.ANISOTROPIC_LEVEL,n._wrapMode=c||ft.WRAP_MODE,n._scaleMode=h!==void 0?h:ft.SCALE_MODE,n.format=f||ut.RGBA,n.type=d||Dt.UNSIGNED_BYTE,n.target=A||Mr.TEXTURE_2D,n.alphaMode=s!==void 0?s:Ii.UNPACK,n.uid=Gr(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=l>0&&u>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(t),n}return Object.defineProperty(i.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),i.prototype.setStyle=function(t,r){var n;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),r!==void 0&&r!==this.mipmap&&(this.mipmap=r,n=!0),n&&this.dirtyStyleId++,this},i.prototype.setSize=function(t,r,n){return n=n||this.resolution,this.setRealSize(t*n,r*n,n)},i.prototype.setRealSize=function(t,r,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(r)/this.resolution,this._refreshPOT(),this.update(),this},i.prototype._refreshPOT=function(){this.isPowerOfTwo=vc(this.realWidth)&&vc(this.realHeight)},i.prototype.setResolution=function(t){var r=this.resolution;return r===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*r)/t,this.height=Math.round(this.height*r)/t,this.emit("update",this)),this._refreshPOT(),this)},i.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},i.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},i.prototype.onError=function(t){this.emit("error",this,t)},i.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ci[this.cacheId],delete Xe[this.cacheId],this.cacheId=null),this.dispose(),i.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},i.prototype.dispose=function(){this.emit("dispose",this)},i.prototype.castToBaseTexture=function(){return this},i.from=function(t,r,n){n===void 0&&(n=ft.STRICT_TEXTURE_CACHE);var s=typeof t=="string",o=null;if(s)o=t;else{if(!t._pixiId){var a=r&&r.pixiIdPrefix||"pixiid";t._pixiId=a+"_"+Gr()}o=t._pixiId}var h=ci[o];if(s&&n&&!h)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return h||(h=new i(t,r),h.cacheId=o,i.addToCache(h,o)),h},i.fromBuffer=function(t,r,n,s){t=t||new Float32Array(r*n*4);var o=new Fn(t,{width:r,height:n}),a=t instanceof Float32Array?Dt.FLOAT:Dt.UNSIGNED_BYTE;return new i(o,Object.assign(lO,s||{width:r,height:n,type:a}))},i.addToCache=function(t,r){r&&(t.textureCacheIds.indexOf(r)===-1&&t.textureCacheIds.push(r),ci[r]&&console.warn("BaseTexture added to the cache with an id ["+r+"] that already had an entry"),ci[r]=t)},i.removeFromCache=function(t){if(typeof t=="string"){var r=ci[t];if(r){var n=r.textureCacheIds.indexOf(t);return n>-1&&r.textureCacheIds.splice(n,1),delete ci[t],r}}else if(t&&t.textureCacheIds){for(var s=0;s<t.textureCacheIds.length;++s)delete ci[t.textureCacheIds[s]];return t.textureCacheIds.length=0,t}return null},i._globalBatch=0,i}(je),Sl=function(e){se(i,e);function i(t,r){var n=this,s=r||{},o=s.width,a=s.height;n=e.call(this,o,a)||this,n.items=[],n.itemDirtyIds=[];for(var h=0;h<t;h++){var l=new Wt;n.items.push(l),n.itemDirtyIds.push(-2)}return n.length=t,n._load=null,n.baseTexture=null,n}return i.prototype.initFromArray=function(t,r){for(var n=0;n<this.length;n++)t[n]&&(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof Sn?this.addResourceAt(t[n],n):this.addResourceAt(Pl(t[n],r),n))},i.prototype.dispose=function(){for(var t=0,r=this.length;t<r;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},i.prototype.addResourceAt=function(t,r){if(!this.items[r])throw new Error("Index "+r+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[r].setResource(t),this},i.prototype.bind=function(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");e.prototype.bind.call(this,t);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=t,this.items[r].on("update",t.update,t)},i.prototype.unbind=function(t){e.prototype.unbind.call(this,t);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",t.update,t)},i.prototype.load=function(){var t=this;if(this._load)return this._load;var r=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=r.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=t.items[0],o=s.realWidth,a=s.realHeight;return t.resize(o,a),Promise.resolve(t)}),this._load},i}(Sn),Bd=function(e){se(i,e);function i(t,r){var n=this,s=r||{},o=s.width,a=s.height,h,l;return Array.isArray(t)?(h=t,l=t.length):l=t,n=e.call(this,l,{width:o,height:a})||this,h&&n.initFromArray(h,r),n}return i.prototype.addBaseTextureAt=function(t,r){if(t.resource)this.addResourceAt(t.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this},i.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=Mr.TEXTURE_2D_ARRAY},i.prototype.upload=function(t,r,n){var s=this,o=s.length,a=s.itemDirtyIds,h=s.items,l=t.gl;n.dirtyId<0&&l.texImage3D(l.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,o,0,r.format,n.type,null);for(var u=0;u<o;u++){var c=h[u];a[u]<c.dirtyId&&(a[u]=c.dirtyId,c.valid&&l.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,u,c.resource.width,c.resource.height,1,r.format,n.type,c.resource.source))}return!0},i}(Sl),sr=function(e){se(i,e);function i(t){var r=this,n=t,s=n.naturalWidth||n.videoWidth||n.width,o=n.naturalHeight||n.videoHeight||n.height;return r=e.call(this,s,o)||this,r.source=t,r.noSubImage=!1,r}return i.crossOrigin=function(t,r,n){n===void 0&&r.indexOf("data:")!==0?t.crossOrigin=dI(r):n!==!1&&(t.crossOrigin=typeof n=="string"?n:"anonymous")},i.prototype.upload=function(t,r,n,s){var o=t.gl,a=r.realWidth,h=r.realHeight;if(s=s||this.source,s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Ii.UNPACK),!this.noSubImage&&r.target===o.TEXTURE_2D&&n.width===a&&n.height===h?o.texSubImage2D(o.TEXTURE_2D,0,0,0,r.format,n.type,s):(n.width=a,n.height=h,o.texImage2D(r.target,0,n.internalFormat,r.format,n.type,s)),!0},i.prototype.update=function(){if(!this.destroyed){var t=this.source,r=t.naturalWidth||t.videoWidth||t.width,n=t.naturalHeight||t.videoHeight||t.height;this.resize(r,n),e.prototype.update.call(this)}},i.prototype.dispose=function(){this.source=null},i}(Sn),Rd=function(e){se(i,e);function i(t){return e.call(this,t)||this}return i.test=function(t){var r=globalThis.OffscreenCanvas;return r&&t instanceof r?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},i}(sr),Pd=function(e){se(i,e);function i(t,r){var n=this,s=r||{},o=s.width,a=s.height,h=s.autoLoad,l=s.linkBaseTexture;if(t&&t.length!==i.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");n=e.call(this,6,{width:o,height:a})||this;for(var u=0;u<i.SIDES;u++)n.items[u].target=Mr.TEXTURE_CUBE_MAP_POSITIVE_X+u;return n.linkBaseTexture=l!==!1,t&&n.initFromArray(t,r),h!==!1&&n.load(),n}return i.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=Mr.TEXTURE_CUBE_MAP},i.prototype.addBaseTextureAt=function(t,r,n){if(!this.items[r])throw new Error("Index "+r+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,r);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=Mr.TEXTURE_CUBE_MAP_POSITIVE_X+r,t.parentTextureArray=this.baseTexture,this.items[r]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[r]=t,this},i.prototype.upload=function(t,r,n){for(var s=this.itemDirtyIds,o=0;o<i.SIDES;o++){var a=this.items[o];(s[o]<a.dirtyId||n.dirtyId<r.dirtyId)&&(a.valid&&a.resource?(a.resource.upload(t,a,n),s[o]=a.dirtyId):s[o]<-1&&(t.gl.texImage2D(a.target,0,n.internalFormat,r.realWidth,r.realHeight,0,r.format,n.type,null),s[o]=-1))}return!0},i.test=function(t){return Array.isArray(t)&&t.length===i.SIDES},i.SIDES=6,i}(Sl),Nl=function(e){se(i,e);function i(t,r){var n=this;if(r=r||{},!(t instanceof HTMLImageElement)){var s=new Image;sr.crossOrigin(s,t,r.crossorigin),s.src=t,t=s}return n=e.call(this,t)||this,!t.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=t.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(r.createBitmap!==void 0?r.createBitmap:ft.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,n.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,n.bitmap=null,n._load=null,r.autoLoad!==!1&&n.load(),n}return i.prototype.load=function(t){var r=this;return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise(function(n,s){var o=r.source;r.url=o.src;var a=function(){r.destroyed||(o.onload=null,o.onerror=null,r.resize(o.width,o.height),r._load=null,r.createBitmap?n(r.process()):n(r))};o.complete&&o.src?a():(o.onload=a,o.onerror=function(h){s(h),r.onError.emit(h)})}),this._load)},i.prototype.process=function(){var t=this,r=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var n=globalThis.createImageBitmap,s=!r.crossOrigin||r.crossOrigin==="anonymous";return this._process=fetch(r.src,{mode:s?"cors":"no-cors"}).then(function(o){return o.blob()}).then(function(o){return n(o,0,0,r.width,r.height,{premultiplyAlpha:t.alphaMode===Ii.UNPACK?"premultiply":"none"})}).then(function(o){return t.destroyed?Promise.reject():(t.bitmap=o,t.update(),t._process=null,Promise.resolve(t))}),this._process},i.prototype.upload=function(t,r,n){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,t,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,t,r,n,this.bitmap),!this.preserveBitmap){var s=!0,o=r._glTextures;for(var a in o){var h=o[a];if(h!==n&&h.dirtyId!==r.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},i.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},i.test=function(t){return typeof t=="string"||t instanceof HTMLImageElement},i}(sr),Sd=function(e){se(i,e);function i(t,r){var n=this;return r=r||{},n=e.call(this,ft.ADAPTER.createCanvas())||this,n._width=0,n._height=0,n.svg=t,n.scale=r.scale||1,n._overrideWidth=r.width,n._overrideHeight=r.height,n._resolve=null,n._crossorigin=r.crossorigin,n._load=null,r.autoLoad!==!1&&n.load(),n}return i.prototype.load=function(){var t=this;return this._load?this._load:(this._load=new Promise(function(r){if(t._resolve=function(){t.resize(t.source.width,t.source.height),r(t)},i.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}),this._load)},i.prototype._loadSvg=function(){var t=this,r=new Image;sr.crossOrigin(r,this.svg,this._crossorigin),r.src=this.svg,r.onerror=function(n){t._resolve&&(r.onerror=null,t.onError.emit(n))},r.onload=function(){if(t._resolve){var n=r.width,s=r.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var o=n*t.scale,a=s*t.scale;(t._overrideWidth||t._overrideHeight)&&(o=t._overrideWidth||t._overrideHeight/s*n,a=t._overrideHeight||t._overrideWidth/n*s),o=Math.round(o),a=Math.round(a);var h=t.source;h.width=o,h.height=a,h._pixiId="canvas_"+Gr(),h.getContext("2d").drawImage(r,0,0,n,s,0,0,o,a),t._resolve(),t._resolve=null}}},i.getSize=function(t){var r=i.SVG_SIZE.exec(t),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n},i.prototype.dispose=function(){e.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},i.test=function(t,r){return r==="svg"||typeof t=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||typeof t=="string"&&i.SVG_XML.test(t)},i.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,i.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,i}(sr),Nd=function(e){se(i,e);function i(t,r){var n=this;if(r=r||{},!(t instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof t=="string"&&(t=[t]);var o=t[0].src||t[0];sr.crossOrigin(s,o,r.crossorigin);for(var a=0;a<t.length;++a){var h=document.createElement("source"),l=t[a],u=l.src,c=l.mime;u=u||t[a];var f=u.split("?").shift().toLowerCase(),d=f.slice(f.lastIndexOf(".")+1);c=c||i.MIME_TYPES[d]||"video/"+d,h.src=u,h.type=c,s.appendChild(h)}t=s}return n=e.call(this,t)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=r.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=r.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),r.autoLoad!==!1&&n.load(),n}return i.prototype.update=function(t){if(!this.destroyed){var r=ye.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r),(!this._updateFPS||this._msToNextUpdate<=0)&&(e.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},i.prototype.load=function(){var t=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){t.valid?n(t):(t._resolve=n,r.load())}),this._load},i.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},i.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&t.paused===!1&&t.ended===!1&&t.readyState>2},i.prototype._isSourceReady=function(){var t=this.source;return t.readyState===3||t.readyState===4},i.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(ye.shared.add(this.update,this),this._isConnectedToTicker=!0)},i.prototype._onPlayStop=function(){this._isConnectedToTicker&&(ye.shared.remove(this.update,this),this._isConnectedToTicker=!1)},i.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var r=this.valid;this.resize(t.videoWidth,t.videoHeight),!r&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},i.prototype.dispose=function(){this._isConnectedToTicker&&(ye.shared.remove(this.update,this),this._isConnectedToTicker=!1);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(ye.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(ye.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),i.test=function(t,r){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||i.TYPES.indexOf(r)>-1},i.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],i.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},i}(sr),Od=function(e){se(i,e);function i(t){return e.call(this,t)||this}return i.test=function(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&t instanceof ImageBitmap},i}(sr);_o.push(Nl,Od,Rd,Nd,Sd,Fn,Pd,Bd);var AI={__proto__:null,Resource:Sn,BaseImageResource:sr,INSTALLED:_o,autoDetectResource:Pl,AbstractMultiResource:Sl,ArrayResource:Bd,BufferResource:Fn,CanvasResource:Rd,CubeResource:Pd,ImageResource:Nl,SVGResource:Sd,VideoResource:Nd,ImageBitmapResource:Od},uO=function(e){se(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.upload=function(t,r,n){var s=t.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Ii.UNPACK);var o=r.realWidth,a=r.realHeight;return n.width===o&&n.height===a?s.texSubImage2D(r.target,0,0,0,o,a,r.format,n.type,this.data):(n.width=o,n.height=a,s.texImage2D(r.target,0,n.internalFormat,o,a,0,r.format,n.type,this.data)),!0},i}(Fn),gh=function(){function e(i,t){this.width=Math.round(i||100),this.height=Math.round(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Oe("disposeFramebuffer"),this.multisample=ve.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(i,t){return i===void 0&&(i=0),this.colorTextures[i]=t||new Wt(null,{scaleMode:ni.NEAREST,resolution:1,mipmap:mi.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(i){return this.depthTexture=i||new Wt(new uO(null,{width:this.width,height:this.height}),{scaleMode:ni.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:mi.OFF,format:ut.DEPTH_COMPONENT,type:Dt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(i,t){if(i=Math.round(i),t=Math.round(t),!(i===this.width&&t===this.height)){this.width=i,this.height=t,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var n=this.colorTextures[r],s=n.resolution;n.setSize(i/s,t/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(i/s,t/s)}}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),Dd=function(e){se(i,e);function i(t){t===void 0&&(t={});var r=this;if(typeof t=="number"){var n=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];t={width:n,height:s,scaleMode:o,resolution:a}}return t.width=t.width||100,t.height=t.height||100,t.multisample=t.multisample!==void 0?t.multisample:ve.NONE,r=e.call(this,null,t)||this,r.mipmap=mi.OFF,r.valid=!0,r.clearColor=[0,0,0,0],r.framebuffer=new gh(r.realWidth,r.realHeight).addColorTexture(0,r),r.framebuffer.multisample=t.multisample,r.maskStack=[],r.filterStack=[{}],r}return i.prototype.resize=function(t,r){this.framebuffer.resize(t*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},i.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},i}(Wt),Fd=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(i,t,r){var n=t.width,s=t.height;if(r){var o=i.width/2/n,a=i.height/2/s,h=i.x/n+o,l=i.y/s+a;r=he.add(r,he.NW),this.x0=h+o*he.uX(r),this.y0=l+a*he.uY(r),r=he.add(r,2),this.x1=h+o*he.uX(r),this.y1=l+a*he.uY(r),r=he.add(r,2),this.x2=h+o*he.uX(r),this.y2=l+a*he.uY(r),r=he.add(r,2),this.x3=h+o*he.uX(r),this.y3=l+a*he.uY(r)}else this.x0=i.x/n,this.y0=i.y/s,this.x1=(i.x+i.width)/n,this.y1=i.y/s,this.x2=(i.x+i.width)/n,this.y2=(i.y+i.height)/s,this.x3=i.x/n,this.y3=(i.y+i.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},e}(),rg=new Fd;function xa(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}var Ot=function(e){se(i,e);function i(t,r,n,s,o,a){var h=e.call(this)||this;if(h.noFrame=!1,r||(h.noFrame=!0,r=new Tt(0,0,1,1)),t instanceof i&&(t=t.baseTexture),h.baseTexture=t,h._frame=r,h.trim=s,h.valid=!1,h._uvs=rg,h.uvMatrix=null,h.orig=n||r,h._rotate=Number(o||0),o===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=a?new M(a.x,a.y):new M(0,0),h._updateID=0,h.textureCacheIds=[],t.valid?h.noFrame?t.valid&&h.onBaseTextureUpdated(t):h.frame=r:t.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&t.on("update",h.onBaseTextureUpdated,h),h}return i.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},i.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},i.prototype.destroy=function(t){if(this.baseTexture){if(t){var r=this.baseTexture.resource;r&&r.url&&Xe[r.url]&&i.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,i.removeFromCache(this),this.textureCacheIds=null},i.prototype.clone=function(){var t=this._frame.clone(),r=this._frame===this.orig?t:this.orig.clone(),n=new i(this.baseTexture,!this.noFrame&&t,r,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=t),n},i.prototype.updateUvs=function(){this._uvs===rg&&(this._uvs=new Fd),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},i.from=function(t,r,n){r===void 0&&(r={}),n===void 0&&(n=ft.STRICT_TEXTURE_CACHE);var s=typeof t=="string",o=null;if(s)o=t;else if(t instanceof Wt){if(!t.cacheId){var a=r&&r.pixiIdPrefix||"pixiid";t.cacheId=a+"-"+Gr(),Wt.addToCache(t,t.cacheId)}o=t.cacheId}else{if(!t._pixiId){var a=r&&r.pixiIdPrefix||"pixiid";t._pixiId=a+"_"+Gr()}o=t._pixiId}var h=Xe[o];if(s&&n&&!h)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return!h&&!(t instanceof Wt)?(r.resolution||(r.resolution=Co(t)),h=new i(new Wt(t,r)),h.baseTexture.cacheId=o,Wt.addToCache(h.baseTexture,o),i.addToCache(h,o)):!h&&t instanceof Wt&&(h=new i(t),i.addToCache(h,o)),h},i.fromURL=function(t,r){var n=Object.assign({autoLoad:!1},r==null?void 0:r.resourceOptions),s=i.from(t,Object.assign({resourceOptions:n},r),!1),o=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):o.load().then(function(){return Promise.resolve(s)})},i.fromBuffer=function(t,r,n,s){return new i(Wt.fromBuffer(t,r,n,s))},i.fromLoader=function(t,r,n,s){var o=new Wt(t,Object.assign({scaleMode:ft.SCALE_MODE,resolution:Co(r)},s)),a=o.resource;a instanceof Nl&&(a.url=r);var h=new i(o);return n||(n=r),Wt.addToCache(h.baseTexture,n),i.addToCache(h,n),n!==r&&(Wt.addToCache(h.baseTexture,r),i.addToCache(h,r)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(l){h.baseTexture.once("loaded",function(){return l(h)})})},i.addToCache=function(t,r){r&&(t.textureCacheIds.indexOf(r)===-1&&t.textureCacheIds.push(r),Xe[r]&&console.warn("Texture added to the cache with an id ["+r+"] that already had an entry"),Xe[r]=t)},i.removeFromCache=function(t){if(typeof t=="string"){var r=Xe[t];if(r){var n=r.textureCacheIds.indexOf(t);return n>-1&&r.textureCacheIds.splice(n,1),delete Xe[t],r}}else if(t&&t.textureCacheIds){for(var s=0;s<t.textureCacheIds.length;++s)Xe[t.textureCacheIds[s]]===t&&delete Xe[t.textureCacheIds[s]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(i.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var r=t.x,n=t.y,s=t.width,o=t.height,a=r+s>this.baseTexture.width,h=n+o>this.baseTexture.height;if(a||h){var l=a&&h?"and":"or",u="X: "+r+" + "+s+" = "+(r+s)+" > "+this.baseTexture.width,c="Y: "+n+" + "+o+" = "+(n+o)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(u+" "+l+" "+c))}this.valid=s&&o&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),i.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(i,"EMPTY",{get:function(){return i._EMPTY||(i._EMPTY=new i(new Wt),xa(i._EMPTY),xa(i._EMPTY.baseTexture)),i._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(i,"WHITE",{get:function(){if(!i._WHITE){var t=ft.ADAPTER.createCanvas(16,16),r=t.getContext("2d");t.width=16,t.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),i._WHITE=new i(Wt.from(t)),xa(i._WHITE),xa(i._WHITE.baseTexture)}return i._WHITE},enumerable:!1,configurable:!0}),i}(je),oi=function(e){se(i,e);function i(t,r){var n=e.call(this,t,r)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(i.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),i.prototype.resize=function(t,r,n){n===void 0&&(n=!0);var s=this.baseTexture.resolution,o=Math.round(t*s)/s,a=Math.round(r*s)/s;this.valid=o>0&&a>0,this._frame.width=this.orig.width=o,this._frame.height=this.orig.height=a,n&&this.baseTexture.resize(o,a),this.updateUvs()},i.prototype.setResolution=function(t){var r=this.baseTexture;r.resolution!==t&&(r.setResolution(t),this.resize(r.width,r.height,!1))},i.create=function(t){for(var r=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=r[s];return typeof t=="number"&&(ze("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:n[0],scaleMode:n[1],resolution:n[2]}),new i(new Dd(t))},i}(Ot),pI=function(){function e(i){this.texturePool={},this.textureOptions=i||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(i,t,r){r===void 0&&(r=ve.NONE);var n=new Dd(Object.assign({width:i,height:t,resolution:1,multisample:r},this.textureOptions));return new oi(n)},e.prototype.getOptimalTexture=function(i,t,r,n){r===void 0&&(r=1),n===void 0&&(n=ve.NONE);var s;i=Math.ceil(i*r-1e-6),t=Math.ceil(t*r-1e-6),!this.enableFullScreen||i!==this._pixelsWidth||t!==this._pixelsHeight?(i=Io(i),t=Io(t),s=((i&65535)<<16|t&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);var o=this.texturePool[s].pop();return o||(o=this.createTexture(i,t,n)),o.filterPoolKey=s,o.setResolution(r),o},e.prototype.getFilterTexture=function(i,t,r){var n=this.getOptimalTexture(i.width,i.height,t||i.resolution,r||ve.NONE);return n.filterFrame=i.filterFrame,n},e.prototype.returnTexture=function(i){var t=i.filterPoolKey;i.filterFrame=null,this.texturePool[t].push(i)},e.prototype.returnFilterTexture=function(i){this.returnTexture(i)},e.prototype.clear=function(i){if(i=i!==!1,i)for(var t in this.texturePool){var r=this.texturePool[t];if(r)for(var n=0;n<r.length;n++)r[n].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(i){if(!(i.width===this._pixelsWidth&&i.height===this._pixelsHeight)){this.enableFullScreen=i.width>0&&i.height>0;for(var t in this.texturePool)if(Number(t)<0){var r=this.texturePool[t];if(r)for(var n=0;n<r.length;n++)r[n].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=i.width,this._pixelsHeight=i.height}},e.SCREEN_KEY=-1,e}(),bc=function(){function e(i,t,r,n,s,o,a){t===void 0&&(t=0),r===void 0&&(r=!1),n===void 0&&(n=Dt.FLOAT),this.buffer=i,this.size=t,this.normalized=r,this.type=n,this.stride=s,this.start=o,this.instance=a}return e.prototype.destroy=function(){this.buffer=null},e.from=function(i,t,r,n,s){return new e(i,t,r,n,s)},e}(),cO=0,Ce=function(){function e(i,t,r){t===void 0&&(t=!0),r===void 0&&(r=!1),this.data=i||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=cO++,this.disposeRunner=new Oe("disposeBuffer")}return e.prototype.update=function(i){i instanceof Array&&(i=new Float32Array(i)),this.data=i||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(e.prototype,"index",{get:function(){return this.type===Yi.ELEMENT_ARRAY_BUFFER},set:function(i){this.type=i?Yi.ELEMENT_ARRAY_BUFFER:Yi.ARRAY_BUFFER},enumerable:!1,configurable:!0}),e.from=function(i){return i instanceof Array&&(i=new Float32Array(i)),new e(i)},e}(),fO={Float32Array,Uint32Array,Int32Array,Uint8Array};function dO(e,i){for(var t=0,r=0,n={},s=0;s<e.length;s++)r+=i[s],t+=e[s].length;for(var o=new ArrayBuffer(t*4),a=null,h=0,s=0;s<e.length;s++){var l=i[s],u=e[s],c=Rl(u);n[c]||(n[c]=new fO[c](o)),a=n[c];for(var f=0;f<u.length;f++){var d=(f/l|0)*r+h,A=f%l;a[d+A]=u[f]}h+=l}return new Float32Array(o)}var ng={5126:4,5123:2,5121:1},AO=0,pO={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Ts=function(){function e(i,t){i===void 0&&(i=[]),t===void 0&&(t={}),this.buffers=i,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=AO++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Oe("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(i,t,r,n,s,o,a,h){if(r===void 0&&(r=0),n===void 0&&(n=!1),h===void 0&&(h=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof Ce||(t instanceof Array&&(t=new Float32Array(t)),t=new Ce(t));var l=i.split("|");if(l.length>1){for(var u=0;u<l.length;u++)this.addAttribute(l[u],t,r,n,s);return this}var c=this.buffers.indexOf(t);return c===-1&&(this.buffers.push(t),c=this.buffers.length-1),this.attributes[i]=new bc(c,r,n,s,o,a,h),this.instanced=this.instanced||h,this},e.prototype.getAttribute=function(i){return this.attributes[i]},e.prototype.getBuffer=function(i){return this.buffers[this.getAttribute(i).buffer]},e.prototype.addIndex=function(i){return i instanceof Ce||(i instanceof Array&&(i=new Uint16Array(i)),i=new Ce(i)),i.type=Yi.ELEMENT_ARRAY_BUFFER,this.indexBuffer=i,this.buffers.indexOf(i)===-1&&this.buffers.push(i),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var i=[],t=[],r=new Ce,n;for(n in this.attributes){var s=this.attributes[n],o=this.buffers[s.buffer];i.push(o.data),t.push(s.size*ng[s.type]/4),s.buffer=0}for(r.data=dO(i,t),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var i in this.attributes){var t=this.attributes[i],r=this.buffers[t.buffer];return r.data.length/(t.stride/4||t.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var i=new e,t=0;t<this.buffers.length;t++)i.buffers[t]=new Ce(this.buffers[t].data.slice(0));for(var t in this.attributes){var r=this.attributes[t];i.attributes[t]=new bc(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(i.indexBuffer=i.buffers[this.buffers.indexOf(this.indexBuffer)],i.indexBuffer.type=Yi.ELEMENT_ARRAY_BUFFER),i},e.merge=function(i){for(var t=new e,r=[],n=[],s=[],o,a=0;a<i.length;a++){o=i[a];for(var h=0;h<o.buffers.length;h++)n[h]=n[h]||0,n[h]+=o.buffers[h].data.length,s[h]=0}for(var a=0;a<o.buffers.length;a++)r[a]=new pO[Rl(o.buffers[a].data)](n[a]),t.buffers[a]=new Ce(r[a]);for(var a=0;a<i.length;a++){o=i[a];for(var h=0;h<o.buffers.length;h++)r[h].set(o.buffers[h].data,s[h]),s[h]+=o.buffers[h].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=Yi.ELEMENT_ARRAY_BUFFER;for(var l=0,u=0,c=0,f=0,a=0;a<o.buffers.length;a++)if(o.buffers[a]!==o.indexBuffer){f=a;break}for(var a in o.attributes){var d=o.attributes[a];(d.buffer|0)===f&&(u+=d.size*ng[d.type]/4)}for(var a=0;a<i.length;a++){for(var A=i[a].indexBuffer.data,h=0;h<A.length;h++)t.indexBuffer.data[h+c]+=l;l+=i[a].buffers[f].data.length/u,c+=A.length}}return t},e}(),gI=function(e){se(i,e);function i(){var t=e.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return i}(Ts),Ld=function(e){se(i,e);function i(){var t=e.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new Ce(t.vertices),t.uvBuffer=new Ce(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return i.prototype.map=function(t,r){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+r.width/t.width,this.uvs[3]=s,this.uvs[4]=n+r.width/t.width,this.uvs[5]=s+r.height/t.height,this.uvs[6]=n,this.uvs[7]=s+r.height/t.height,n=r.x,s=r.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+r.width,this.vertices[3]=s,this.vertices[4]=n+r.width,this.vertices[5]=s+r.height,this.vertices[6]=n,this.vertices[7]=s+r.height,this.invalidate(),this},i.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},i}(Ts),gO=0,Qr=function(){function e(i,t,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=gO++,this.static=!!t,this.ubo=!!r,i instanceof Ce?(this.buffer=i,this.buffer.type=Yi.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=i,this.ubo&&(this.buffer=new Ce(new Float32Array(1)),this.buffer.type=Yi.UNIFORM_BUFFER,this.autoManage=!0))}return e.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},e.prototype.add=function(i,t,r){if(!this.ubo)this.uniforms[i]=new e(t,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},e.from=function(i,t,r){return new e(i,t,r)},e.uboFrom=function(i,t){return new e(i,t??!0,!0)},e}(),vI=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=ve.NONE,this.sourceFrame=new Tt,this.destinationFrame=new Tt,this.bindingSourceFrame=new Tt,this.bindingDestinationFrame=new Tt,this.filters=[],this.transform=null}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),Ea=[new M,new M,new M,new M],tu=new kt,Md=function(){function e(i){this.renderer=i,this.defaultFilterStack=[{}],this.texturePool=new pI,this.texturePool.setScreenSize(i.view),this.statePool=[],this.quad=new gI,this.quadUv=new Ld,this.tempRect=new Tt,this.activeState={},this.globalUniforms=new Qr({outputFrame:new Tt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return e.prototype.push=function(i,t){for(var r,n,s=this.renderer,o=this.defaultFilterStack,a=this.statePool.pop()||new vI,h=this.renderer.renderTexture,l=t[0].resolution,u=t[0].multisample,c=t[0].padding,f=t[0].autoFit,d=(r=t[0].legacy)!==null&&r!==void 0?r:!0,A=1;A<t.length;A++){var p=t[A];l=Math.min(l,p.resolution),u=Math.min(u,p.multisample),c=this.useMaxPadding?Math.max(c,p.padding):c+p.padding,f=f&&p.autoFit,d=d||((n=p.legacy)!==null&&n!==void 0?n:!0)}o.length===1&&(this.defaultFilterStack[0].renderTexture=h.current),o.push(a),a.resolution=l,a.multisample=u,a.legacy=d,a.target=i,a.sourceFrame.copyFrom(i.filterArea||i.getBounds(!0)),a.sourceFrame.pad(c);var g=this.tempRect.copyFrom(h.sourceFrame);s.projection.transform&&this.transformAABB(tu.copyFrom(s.projection.transform).invert(),g),f?(a.sourceFrame.fit(g),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(g)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,h.current?h.current.resolution:s.resolution,h.sourceFrame,h.destinationFrame,s.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,l,u),a.filters=t,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var y=this.tempRect;y.x=0,y.y=0,y.width=a.sourceFrame.width,y.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(h.sourceFrame),a.bindingDestinationFrame.copyFrom(h.destinationFrame),a.transform=s.projection.transform,s.projection.transform=null,h.bind(a.renderTexture,a.sourceFrame,y),s.framebuffer.clear(0,0,0,0)},e.prototype.pop=function(){var i=this.defaultFilterStack,t=i.pop(),r=t.filters;this.activeState=t;var n=this.globalUniforms.uniforms;n.outputFrame=t.sourceFrame,n.resolution=t.resolution;var s=n.inputSize,o=n.inputPixel,a=n.inputClamp;if(s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*t.resolution),o[1]=Math.round(s[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*s[2]-.5*o[2],a[3]=t.sourceFrame.height*s[3]-.5*o[3],t.legacy){var h=n.filterArea;h[0]=t.destinationFrame.width,h[1]=t.destinationFrame.height,h[2]=t.sourceFrame.x,h[3]=t.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var l=i[i.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,t.renderTexture,l.renderTexture,Ar.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var u=t.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,t.resolution);c.filterFrame=u.filterFrame;var f=0;for(f=0;f<r.length-1;++f){f===1&&t.multisample>1&&(c=this.getOptimalFilterTexture(u.width,u.height,t.resolution),c.filterFrame=u.filterFrame),r[f].apply(this,u,c,Ar.CLEAR,t);var d=u;u=c,c=d}r[f].apply(this,u,l.renderTexture,Ar.BLEND,t),f>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(c)}t.clear(),this.statePool.push(t)},e.prototype.bindAndClear=function(i,t){t===void 0&&(t=Ar.CLEAR);var r=this.renderer,n=r.renderTexture,s=r.state;if(i===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,i&&i.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=i.filterFrame.width,o.height=i.filterFrame.height,n.bind(i,i.filterFrame,o)}else i!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(i):this.renderer.renderTexture.bind(i,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=s.stateId&1||this.forceClear;(t===Ar.CLEAR||t===Ar.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},e.prototype.applyFilter=function(i,t,r,n){var s=this.renderer;s.state.set(i.state),this.bindAndClear(r,n),i.uniforms.uSampler=t,i.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(i),i.legacy=!!i.program.attributeData.aTextureCoord,i.legacy?(this.quadUv.map(t._frame,t.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(pi.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(pi.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(i,t){var r=this.activeState,n=r.sourceFrame,s=r.destinationFrame,o=t._texture.orig,a=i.set(s.width,0,0,s.height,n.x,n.y),h=t.worldTransform.copyTo(kt.TEMP_MATRIX);return h.invert(),a.prepend(h),a.scale(1/o.width,1/o.height),a.translate(t.anchor.x,t.anchor.y),a},e.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(i,t,r,n){return r===void 0&&(r=1),n===void 0&&(n=ve.NONE),this.texturePool.getOptimalTexture(i,t,r,n)},e.prototype.getFilterTexture=function(i,t,r){if(typeof i=="number"){var n=i;i=t,t=n}i=i||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(i.width,i.height,t||i.resolution,r||ve.NONE);return s.filterFrame=i.filterFrame,s},e.prototype.returnFilterTexture=function(i){this.texturePool.returnTexture(i)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e.prototype.transformAABB=function(i,t){var r=Ea[0],n=Ea[1],s=Ea[2],o=Ea[3];r.set(t.left,t.top),n.set(t.left,t.bottom),s.set(t.right,t.top),o.set(t.right,t.bottom),i.apply(r,r),i.apply(n,n),i.apply(s,s),i.apply(o,o);var a=Math.min(r.x,n.x,s.x,o.x),h=Math.min(r.y,n.y,s.y,o.y),l=Math.max(r.x,n.x,s.x,o.x),u=Math.max(r.y,n.y,s.y,o.y);t.x=a,t.y=h,t.width=l-a,t.height=u-h},e.prototype.roundFrame=function(i,t,r,n,s){if(!(i.width<=0||i.height<=0||r.width<=0||r.height<=0)){if(s){var o=s.a,a=s.b,h=s.c,l=s.d;if((Math.abs(a)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(l)>1e-4))return}s=s?tu.copyFrom(s):tu.identity(),s.translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.transformAABB(s,i),i.ceil(t),this.transformAABB(s.invert(),i)}},e}(),aa=function(){function e(i){this.renderer=i}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(i){},e}(),Qd=function(){function e(i){this.renderer=i,this.emptyRenderer=new aa(i),this.currentRenderer=this.emptyRenderer}return e.prototype.setObjectRenderer=function(i){this.currentRenderer!==i&&(this.currentRenderer.stop(),this.currentRenderer=i,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(i,t){for(var r=this.renderer.texture.boundTextures,n=t-1;n>=0;--n)i[n]=r[n]||null,i[n]&&(i[n]._batchLocation=n)},e.prototype.boundArray=function(i,t,r,n){for(var s=i.elements,o=i.ids,a=i.count,h=0,l=0;l<a;l++){var u=s[l],c=u._batchLocation;if(c>=0&&c<n&&t[c]===u){o[l]=c;continue}for(;h<n;){var f=t[h];if(f&&f._batchEnabled===r&&f._batchLocation===h){h++;continue}o[l]=h,u._batchLocation=h,t[h]=u;break}}},e.prototype.destroy=function(){this.renderer=null},e}(),sg=0,Ud=function(){function e(i){this.renderer=i,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),i.view.addEventListener("webglcontextlost",this.handleContextLost,!1),i.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(i){this.gl=i,this.renderer.gl=i,this.renderer.CONTEXT_UID=sg++,i.isContextLost()&&i.getExtension("WEBGL_lose_context")&&i.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(i){this.gl=i,this.validateContext(i),this.renderer.gl=i,this.renderer.CONTEXT_UID=sg++,this.renderer.runners.contextChange.emit(i)},e.prototype.initFromOptions=function(i){var t=this.createContext(this.renderer.view,i);this.initFromContext(t)},e.prototype.createContext=function(i,t){var r;if(ft.PREFER_ENV>=Wi.WEBGL2&&(r=i.getContext("webgl2",t)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=i.getContext("webgl",t)||i.getContext("experimental-webgl",t),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var i=this.gl,t={anisotropicFiltering:i.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:i.getExtension("OES_texture_float_linear"),s3tc:i.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:i.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:i.getExtension("WEBGL_compressed_texture_etc"),etc1:i.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:i.getExtension("WEBGL_compressed_texture_atc"),astc:i.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:i.getExtension("WEBGL_draw_buffers"),depthTexture:i.getExtension("WEBGL_depth_texture"),loseContext:i.getExtension("WEBGL_lose_context"),vertexArrayObject:i.getExtension("OES_vertex_array_object")||i.getExtension("MOZ_OES_vertex_array_object")||i.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:i.getExtension("OES_element_index_uint"),floatTexture:i.getExtension("OES_texture_float"),floatTextureLinear:i.getExtension("OES_texture_float_linear"),textureHalfFloat:i.getExtension("OES_texture_half_float"),textureHalfFloatLinear:i.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:i.getExtension("EXT_color_buffer_float")})},e.prototype.handleContextLost=function(i){i.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var i=this.renderer.view;this.renderer=null,i.removeEventListener("webglcontextlost",this.handleContextLost),i.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(i){var t=i.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&i instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=r||!!i.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(),yI=function(){function e(i){this.framebuffer=i,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=ve.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return e}(),vO=new Tt,Gd=function(){function e(i){this.renderer=i,this.managedFramebuffers=[],this.unknownFramebuffer=new gh(10,10),this.msaaSamples=null}return e.prototype.contextChange=function(){var i=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Tt,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var t=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;ft.PREFER_ENV===Wi.WEBGL_LEGACY&&(t=null,r=null),t?i.drawBuffers=function(n){return t.drawBuffersWEBGL(n)}:(this.hasMRT=!1,i.drawBuffers=function(){}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=i.getInternalformatParameter(i.RENDERBUFFER,i.RGBA8,i.SAMPLES)},e.prototype.bind=function(i,t,r){r===void 0&&(r=0);var n=this.gl;if(i){var s=i.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(i);this.current!==i&&(this.current=i,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==r&&(i.dirtyId++,i.dirtyFormat++,s.mipLevel=r),s.dirtyId!==i.dirtyId&&(s.dirtyId=i.dirtyId,s.dirtyFormat!==i.dirtyFormat?(s.dirtyFormat=i.dirtyFormat,s.dirtySize=i.dirtySize,this.updateFramebuffer(i,r)):s.dirtySize!==i.dirtySize&&(s.dirtySize=i.dirtySize,this.resizeFramebuffer(i)));for(var o=0;o<i.colorTextures.length;o++){var a=i.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(i.depthTexture&&this.renderer.texture.unbind(i.depthTexture),t){var h=t.width>>r,l=t.height>>r,u=h/t.width;this.setViewport(t.x*u,t.y*u,h,l)}else{var h=i.width>>r,l=i.height>>r;this.setViewport(0,0,h,l)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(i,t,r,n){var s=this.viewport;i=Math.round(i),t=Math.round(t),r=Math.round(r),n=Math.round(n),(s.width!==r||s.height!==n||s.x!==i||s.y!==t)&&(s.x=i,s.y=t,s.width=r,s.height=n,this.gl.viewport(i,t,r,n))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(i,t,r,n,s){s===void 0&&(s=vo.COLOR|vo.DEPTH);var o=this.gl;o.clearColor(i,t,r,n),o.clear(s)},e.prototype.initFramebuffer=function(i){var t=this.gl,r=new yI(t.createFramebuffer());return r.multisample=this.detectSamples(i.multisample),i.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(i),i.disposeRunner.add(this),r},e.prototype.resizeFramebuffer=function(i){var t=this.gl,r=i.glFramebuffers[this.CONTEXT_UID];r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.RGBA8,i.width,i.height)),r.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,r.stencil),r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.DEPTH24_STENCIL8,i.width,i.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.width,i.height));var n=i.colorTextures,s=n.length;t.drawBuffers||(s=Math.min(s,1));for(var o=0;o<s;o++){var a=n[o],h=a.parentTextureArray||a;this.renderer.texture.bind(h,0)}i.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(i.depthTexture,0)},e.prototype.updateFramebuffer=function(i,t){var r=this.gl,n=i.glFramebuffers[this.CONTEXT_UID],s=i.colorTextures,o=s.length;r.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(i)?(n.msaaBuffer=n.msaaBuffer||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.RGBA8,i.width,i.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(r.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));for(var a=[],h=0;h<o;h++){var l=s[h],u=l.parentTextureArray||l;this.renderer.texture.bind(u,0),!(h===0&&n.msaaBuffer)&&(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+h,l.target,u._glTextures[this.CONTEXT_UID].texture,t),a.push(r.COLOR_ATTACHMENT0+h))}if(a.length>1&&r.drawBuffers(a),i.depthTexture){var c=this.writeDepthTexture;if(c){var f=i.depthTexture;this.renderer.texture.bind(f,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,f._glTextures[this.CONTEXT_UID].texture,t)}}(i.stencil||i.depth)&&!(i.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,i.width,i.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,i.width,i.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n.stencil)):n.stencil&&(r.deleteRenderbuffer(n.stencil),n.stencil=null)},e.prototype.canMultisampleFramebuffer=function(i){return this.renderer.context.webGLVersion!==1&&i.colorTextures.length<=1&&!i.depthTexture},e.prototype.detectSamples=function(i){var t=this.msaaSamples,r=ve.NONE;if(i<=1||t===null)return r;for(var n=0;n<t.length;n++)if(t[n]<=i){r=t[n];break}return r===1&&(r=ve.NONE),r},e.prototype.blit=function(i,t,r){var n=this,s=n.current,o=n.renderer,a=n.gl,h=n.CONTEXT_UID;if(o.context.webGLVersion===2&&s){var l=s.glFramebuffers[h];if(l){if(!i){if(!l.msaaBuffer)return;var u=s.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new gh(s.width,s.height),l.blitFramebuffer.addColorTexture(0,u)),i=l.blitFramebuffer,i.colorTextures[0]!==u&&(i.colorTextures[0]=u,i.dirtyId++,i.dirtyFormat++),(i.width!==s.width||i.height!==s.height)&&(i.width=s.width,i.height=s.height,i.dirtyId++,i.dirtySize++)}t||(t=vO,t.width=s.width,t.height=s.height),r||(r=t);var c=t.width===r.width&&t.height===r.height;this.bind(i),a.bindFramebuffer(a.READ_FRAMEBUFFER,l.framebuffer),a.blitFramebuffer(t.left,t.top,t.right,t.bottom,r.left,r.top,r.right,r.bottom,a.COLOR_BUFFER_BIT,c?a.NEAREST:a.LINEAR)}}},e.prototype.disposeFramebuffer=function(i,t){var r=i.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(r){delete i.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(i);s>=0&&this.managedFramebuffers.splice(s,1),i.disposeRunner.remove(this),t||(n.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&n.deleteRenderbuffer(r.msaaBuffer),r.stencil&&n.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&r.blitFramebuffer.dispose()}},e.prototype.disposeAll=function(i){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<t.length;r++)this.disposeFramebuffer(t[r],i)},e.prototype.forceStencil=function(){var i=this.current;if(i){var t=i.glFramebuffers[this.CONTEXT_UID];if(!(!t||t.stencil)){i.stencil=!0;var r=i.width,n=i.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),t.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,t.multisample,s.DEPTH24_STENCIL8,r,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,r,n),t.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Tt},e.prototype.destroy=function(){this.renderer=null},e}(),eu={5126:4,5123:2,5121:1},kd=function(){function e(i){this.renderer=i,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return e.prototype.contextChange=function(){this.disposeAll(!0);var i=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){var r=this.renderer.context.extensions.vertexArrayObject;ft.PREFER_ENV===Wi.WEBGL_LEGACY&&(r=null),r?(i.createVertexArray=function(){return r.createVertexArrayOES()},i.bindVertexArray=function(s){return r.bindVertexArrayOES(s)},i.deleteVertexArray=function(s){return r.deleteVertexArrayOES(s)}):(this.hasVao=!1,i.createVertexArray=function(){return null},i.bindVertexArray=function(){return null},i.deleteVertexArray=function(){return null})}if(t.webGLVersion!==2){var n=i.getExtension("ANGLE_instanced_arrays");n?(i.vertexAttribDivisor=function(s,o){return n.vertexAttribDivisorANGLE(s,o)},i.drawElementsInstanced=function(s,o,a,h,l){return n.drawElementsInstancedANGLE(s,o,a,h,l)},i.drawArraysInstanced=function(s,o,a,h){return n.drawArraysInstancedANGLE(s,o,a,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex},e.prototype.bind=function(i,t){t=t||this.renderer.shader.shader;var r=this.gl,n=i.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[i.id]=i,i.disposeRunner.add(this),i.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var o=n[t.program.id]||this.initGeometryVao(i,t,s);this._activeGeometry=i,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(i,t.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var i=this._activeGeometry,t=this.renderer.buffer,r=0;r<i.buffers.length;r++){var n=i.buffers[r];t.update(n)}},e.prototype.checkCompatibility=function(i,t){var r=i.attributes,n=t.attributeData;for(var s in n)if(!r[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},e.prototype.getSignature=function(i,t){var r=i.attributes,n=t.attributeData,s=["g",i.id];for(var o in r)n[o]&&s.push(o,n[o].location);return s.join("-")},e.prototype.initGeometryVao=function(i,t,r){r===void 0&&(r=!0);var n=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=t.program;a.glPrograms[s]||this.renderer.shader.generateProgram(t),this.checkCompatibility(i,a);var h=this.getSignature(i,a),l=i.glVertexArrayObjects[this.CONTEXT_UID],u=l[h];if(u)return l[a.id]=u,u;var c=i.buffers,f=i.attributes,d={},A={};for(var p in c)d[p]=0,A[p]=0;for(var p in f)!f[p].size&&a.attributeData[p]?f[p].size=a.attributeData[p].size:f[p].size||console.warn("PIXI Geometry attribute '"+p+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[f[p].buffer]+=f[p].size*eu[f[p].type];for(var p in f){var g=f[p],y=g.size;g.stride===void 0&&(d[g.buffer]===y*eu[g.type]?g.stride=0:g.stride=d[g.buffer]),g.start===void 0&&(g.start=A[g.buffer],A[g.buffer]+=y*eu[g.type])}u=n.createVertexArray(),n.bindVertexArray(u);for(var I=0;I<c.length;I++){var E=c[I];o.bind(E),r&&E._glBuffers[s].refCount++}return this.activateVao(i,a),this._activeVao=u,l[a.id]=u,l[h]=u,u},e.prototype.disposeGeometry=function(i,t){var r;if(this.managedGeometries[i.id]){delete this.managedGeometries[i.id];var n=i.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,o=i.buffers,a=(r=this.renderer)===null||r===void 0?void 0:r.buffer;if(i.disposeRunner.remove(this),!!n){if(a)for(var h=0;h<o.length;h++){var l=o[h]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&a.dispose(o[h],t))}if(!t){for(var u in n)if(u[0]==="g"){var c=n[u];this._activeVao===c&&this.unbind(),s.deleteVertexArray(c)}}delete i.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(i){for(var t=Object.keys(this.managedGeometries),r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],i)},e.prototype.activateVao=function(i,t){var r=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,o=i.buffers,a=i.attributes;i.indexBuffer&&s.bind(i.indexBuffer);var h=null;for(var l in a){var u=a[l],c=o[u.buffer],f=c._glBuffers[n];if(t.attributeData[l]){h!==f&&(s.bind(c),h=f);var d=t.attributeData[l].location;if(r.enableVertexAttribArray(d),r.vertexAttribPointer(d,u.size,u.type||r.FLOAT,u.normalized,u.stride,u.start),u.instance)if(this.hasInstance)r.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},e.prototype.draw=function(i,t,r,n){var s=this.gl,o=this._activeGeometry;if(o.indexBuffer){var a=o.indexBuffer.data.BYTES_PER_ELEMENT,h=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(i,t||o.indexBuffer.data.length,h,(r||0)*a,n||1):s.drawElements(i,t||o.indexBuffer.data.length,h,(r||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(i,r,t||o.getSize(),n||1):s.drawArrays(i,r,t||o.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e.prototype.destroy=function(){this.renderer=null},e}(),mI=function(){function e(i){i===void 0&&(i=null),this.type=Ie.NONE,this.autoDetect=!0,this.maskObject=i||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=ft.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(e.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(i){i?this._filters?this._filters[0]=i:this._filters=[i]:this._filters=null},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Ie.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},e.prototype.copyCountersOrReset=function(i){i?(this._stencilCounter=i._stencilCounter,this._scissorCounter=i._scissorCounter,this._scissorRect=i._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function og(e,i,t){var r=e.createShader(i);return e.shaderSource(r,t),e.compileShader(r),r}function ag(e,i){var t=e.getShaderSource(i).split(`
`).map(function(l,u){return u+": "+l}),r=e.getShaderInfoLog(i),n=r.split(`
`),s={},o=n.map(function(l){return parseFloat(l.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(l){return l&&!s[l]?(s[l]=!0,!0):!1}),a=[""];o.forEach(function(l){t[l-1]="%c"+t[l-1]+"%c",a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var h=t.join(`
`);a[0]=h,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,a),console.groupEnd()}function yO(e,i,t,r){e.getProgramParameter(i,e.LINK_STATUS)||(e.getShaderParameter(t,e.COMPILE_STATUS)||ag(e,t),e.getShaderParameter(r,e.COMPILE_STATUS)||ag(e,r),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(i)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(i)))}function iu(e){for(var i=new Array(e),t=0;t<i.length;t++)i[t]=!1;return i}function II(e,i){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*i);case"vec3":return new Float32Array(3*i);case"vec4":return new Float32Array(4*i);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*i);case"ivec3":return new Int32Array(3*i);case"ivec4":return new Int32Array(4*i);case"uvec2":return new Uint32Array(2*i);case"uvec3":return new Uint32Array(3*i);case"uvec4":return new Uint32Array(4*i);case"bool":return!1;case"bvec2":return iu(2*i);case"bvec3":return iu(3*i);case"bvec4":return iu(4*i);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var CI={},Os=CI;function _I(){if(Os===CI||Os&&Os.isContextLost()){var e=ft.ADAPTER.createCanvas(),i=void 0;ft.PREFER_ENV>=Wi.WEBGL2&&(i=e.getContext("webgl2",{})),i||(i=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),i?i.getExtension("WEBGL_draw_buffers"):i=null),Os=i}return Os}var ba;function mO(){if(!ba){ba=Gi.MEDIUM;var e=_I();if(e&&e.getShaderPrecisionFormat){var i=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);ba=i.precision?Gi.HIGH:Gi.MEDIUM}}return ba}function hg(e,i,t){if(e.substring(0,9)!=="precision"){var r=i;return i===Gi.HIGH&&t!==Gi.HIGH&&(r=Gi.MEDIUM),"precision "+r+` float;
`+e}else if(t!==Gi.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}var IO={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function xI(e){return IO[e]}var wa=null,lg={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function EI(e,i){if(!wa){var t=Object.keys(lg);wa={};for(var r=0;r<t.length;++r){var n=t[r];wa[e[n]]=lg[n]}}return wa[i]}var wn=[{test:function(e){return e.type==="float"&&e.size===1},code:function(e){return`
            if(uv["`+e+'"] !== ud["'+e+`"].value)
            {
                ud["`+e+'"].value = uv["'+e+`"]
                gl.uniform1f(ud["`+e+'"].location, uv["'+e+`"])
            }
            `}},{test:function(e){return(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray},code:function(e){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+e+`"], t);

            if(ud["`+e+`"].value !== t)
            {
                ud["`+e+`"].value = t;
                gl.uniform1i(ud["`+e+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(e,i){return e.type==="mat3"&&e.size===1&&i.a!==void 0},code:function(e){return`
            gl.uniformMatrix3fv(ud["`+e+'"].location, false, uv["'+e+`"].toArray(true));
            `},codeUbo:function(e){return`
                var `+e+"_matrix = uv."+e+`.toArray(true);

                data[offset] = `+e+`_matrix[0];
                data[offset+1] = `+e+`_matrix[1];
                data[offset+2] = `+e+`_matrix[2];
        
                data[offset + 4] = `+e+`_matrix[3];
                data[offset + 5] = `+e+`_matrix[4];
                data[offset + 6] = `+e+`_matrix[5];
        
                data[offset + 8] = `+e+`_matrix[6];
                data[offset + 9] = `+e+`_matrix[7];
                data[offset + 10] = `+e+`_matrix[8];
            `}},{test:function(e,i){return e.type==="vec2"&&e.size===1&&i.x!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+e+`"].location, v.x, v.y);
                }`},codeUbo:function(e){return`
                v = uv.`+e+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(e){return e.type==="vec2"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+e+`"].location, v[0], v[1]);
                }
            `}},{test:function(e,i){return e.type==="vec4"&&e.size===1&&i.width!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+e+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(e){return`
                    v = uv.`+e+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(e){return e.type==="vec4"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+e+`"].location, v[0], v[1], v[2], v[3])
                }`}}],CO={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},_O={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function xO(e,i){var t,r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var n in e.uniforms){var s=i[n];if(!s){!((t=e.uniforms[n])===null||t===void 0)&&t.group&&(e.uniforms[n].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+n+", '"+n+`');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.`+n+`, syncData);
                    `));continue}for(var o=e.uniforms[n],a=!1,h=0;h<wn.length;h++)if(wn[h].test(s,o)){r.push(wn[h].code(n,o)),a=!0;break}if(!a){var l=s.size===1?CO:_O,u=l[s.type].replace("location",'ud["'+n+'"].location');r.push(`
            cu = ud["`+n+`"];
            cv = cu.value;
            v = uv["`+n+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}var EO=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function bO(e){for(var i="",t=0;t<e;++t)t>0&&(i+=`
else `),t<e-1&&(i+="if(test == "+t+".0){}");return i}function bI(e,i){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var t=i.createShader(i.FRAGMENT_SHADER);;){var r=EO.replace(/%forloop%/gi,bO(e));if(i.shaderSource(t,r),i.compileShader(t),!i.getShaderParameter(t,i.COMPILE_STATUS))e=e/2|0;else break}return e}var Ds;function wO(){if(typeof Ds=="boolean")return Ds;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");Ds=e({a:"b"},"a","b")===!0}catch{Ds=!1}return Ds}var TO=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,BO=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,RO=0,Ta={},Bs=function(){function e(i,t,r){r===void 0&&(r="pixi-shader"),this.id=RO++,this.vertexSrc=i||e.defaultVertexSrc,this.fragmentSrc=t||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),Ta[r]?(Ta[r]++,r+="-"+Ta[r]):Ta[r]=1,this.vertexSrc="#define SHADER_NAME "+r+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+`
`+this.fragmentSrc,this.vertexSrc=hg(this.vertexSrc,ft.PRECISION_VERTEX,Gi.HIGH),this.fragmentSrc=hg(this.fragmentSrc,ft.PRECISION_FRAGMENT,mO())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(e,"defaultVertexSrc",{get:function(){return BO},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return TO},enumerable:!1,configurable:!0}),e.from=function(i,t,r){var n=i+t,s=mc[n];return s||(mc[n]=s=new e(i,t,r)),s},e}(),Cr=function(){function e(i,t){this.uniformBindCount=0,this.program=i,t?t instanceof Qr?this.uniformGroup=t:this.uniformGroup=new Qr(t):this.uniformGroup=new Qr({})}return e.prototype.checkUniformExists=function(i,t){if(t.uniforms[i])return!0;for(var r in t.uniforms){var n=t.uniforms[r];if(n.group&&this.checkUniformExists(i,n))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(i,t,r){var n=Bs.from(i,t);return new e(n,r)},e}(),ru=0,nu=1,su=2,ou=3,au=4,hu=5,Xr=function(){function e(){this.data=0,this.blendMode=Nt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(this.data&1<<ru)},set:function(i){!!(this.data&1<<ru)!==i&&(this.data^=1<<ru)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(this.data&1<<nu)},set:function(i){!!(this.data&1<<nu)!==i&&(this.data^=1<<nu)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(this.data&1<<su)},set:function(i){!!(this.data&1<<su)!==i&&(this.data^=1<<su)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(this.data&1<<ou)},set:function(i){!!(this.data&1<<ou)!==i&&(this.data^=1<<ou)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return!!(this.data&1<<hu)},set:function(i){!!(this.data&1<<hu)!==i&&(this.data^=1<<hu)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<au)},set:function(i){!!(this.data&1<<au)!==i&&(this.data^=1<<au)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(i){this.blend=i!==Nt.NONE,this._blendMode=i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(i){this.offsets=!!i,this._polygonOffset=i},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},e.for2d=function(){var i=new e;return i.depthTest=!1,i.blend=!0,i},e}(),PO=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,SO=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Ht=function(e){se(i,e);function i(t,r,n){var s=this,o=Bs.from(t||i.defaultVertexSrc,r||i.defaultFragmentSrc);return s=e.call(this,o,n)||this,s.padding=0,s.resolution=ft.FILTER_RESOLUTION,s.multisample=ft.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new Xr,s}return i.prototype.apply=function(t,r,n,s,o){t.applyFilter(this,r,n,s)},Object.defineProperty(i.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultVertexSrc",{get:function(){return SO},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultFragmentSrc",{get:function(){return PO},enumerable:!1,configurable:!0}),i}(Cr),NO=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,OO=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,ug=new kt,Ol=function(){function e(i,t){this._texture=i,this.mapCoord=new kt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(i){this._texture=i,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(i,t){t===void 0&&(t=i);for(var r=this.mapCoord,n=0;n<i.length;n+=2){var s=i[n],o=i[n+1];t[n]=s*r.a+o*r.c+r.tx,t[n+1]=s*r.b+o*r.d+r.ty}return t},e.prototype.update=function(i){var t=this._texture;if(!t||!t.valid||!i&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=t.orig,s=t.trim;s&&(ug.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(ug));var o=t.baseTexture,a=this.uClampFrame,h=this.clampMargin/o.resolution,l=this.clampOffset;return a[0]=(t._frame.x+h+l)/o.width,a[1]=(t._frame.y+h+l)/o.height,a[2]=(t._frame.x+t._frame.width-h+l)/o.width,a[3]=(t._frame.y+t._frame.height-h+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&t.rotate===0,!0},e}(),wI=function(e){se(i,e);function i(t,r,n){var s=this,o=null;return typeof t!="string"&&r===void 0&&n===void 0&&(o=t,t=void 0,r=void 0,n=void 0),s=e.call(this,t||NO,r||OO,n)||this,s.maskSprite=o,s.maskMatrix=new kt,s}return Object.defineProperty(i.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),i.prototype.apply=function(t,r,n,s){var o=this._maskSprite,a=o._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new Ol(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,o).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=o.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,t.applyFilter(this,r,n,s))},i}(Ht),Hd=function(){function e(i){this.renderer=i,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return e.prototype.setMaskStack=function(i){this.maskStack=i,this.renderer.scissor.setMaskStack(i),this.renderer.stencil.setMaskStack(i)},e.prototype.push=function(i,t){var r=t;if(!r.isMaskData){var n=this.maskDataPool.pop()||new mI;n.pooled=!0,n.maskObject=t,r=n}var s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(s),r._colorMask=s?s._colorMask:15,r.autoDetect&&this.detect(r),r._target=i,r.type!==Ie.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case Ie.SCISSOR:this.renderer.scissor.push(r);break;case Ie.STENCIL:this.renderer.stencil.push(r);break;case Ie.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case Ie.COLOR:this.pushColorMask(r);break}r.type===Ie.SPRITE&&this.maskStack.push(r)},e.prototype.pop=function(i){var t=this.maskStack.pop();if(!(!t||t._target!==i)){if(t.enabled)switch(t.type){case Ie.SCISSOR:this.renderer.scissor.pop(t);break;case Ie.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case Ie.SPRITE:this.popSpriteMask(t);break;case Ie.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){var r=this.maskStack[this.maskStack.length-1];r.type===Ie.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}},e.prototype.detect=function(i){var t=i.maskObject;t?t.isSprite?i.type=Ie.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(i)?i.type=Ie.SCISSOR:i.type=Ie.STENCIL:i.type=Ie.COLOR},e.prototype.pushSpriteMask=function(i){var t,r,n=i.maskObject,s=i._target,o=i._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex],o||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new wI]));var a=this.renderer,h=a.renderTexture,l,u;if(h.current){var c=h.current;l=i.resolution||c.resolution,u=(t=i.multisample)!==null&&t!==void 0?t:c.multisample}else l=i.resolution||a.resolution,u=(r=i.multisample)!==null&&r!==void 0?r:a.multisample;o[0].resolution=l,o[0].multisample=u,o[0].maskSprite=n;var f=s.filterArea;s.filterArea=n.getBounds(!0),a.filter.push(s,o),s.filterArea=f,i._filters||this.alphaMaskIndex++},e.prototype.popSpriteMask=function(i){this.renderer.filter.pop(),i._filters?i._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},e.prototype.pushColorMask=function(i){var t=i._colorMask,r=i._colorMask=t&i.colorMask;r!==t&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)},e.prototype.popColorMask=function(i){var t=i._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==t&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)},e.prototype.destroy=function(){this.renderer=null},e}(),TI=function(){function e(i){this.renderer=i,this.maskStack=[],this.glConst=0}return e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(i){var t=this.renderer.gl,r=this.getStackLength();this.maskStack=i;var n=this.getStackLength();n!==r&&(n===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){this.renderer=null,this.maskStack=null},e}(),cg=new kt,fg=[],Xd=function(e){se(i,e);function i(t){var r=e.call(this,t)||this;return r.glConst=ft.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,r}return i.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},i.prototype.calcScissorRect=function(t){var r;if(!t._scissorRectLocal){var n=t._scissorRect,s=t.maskObject,o=this.renderer,a=o.renderTexture,h=s.getBounds(!0,(r=fg.pop())!==null&&r!==void 0?r:new Tt);this.roundFrameToPixels(h,a.current?a.current.resolution:o.resolution,a.sourceFrame,a.destinationFrame,o.projection.transform),n&&h.fit(n),t._scissorRectLocal=h}},i.isMatrixRotated=function(t){if(!t)return!1;var r=t.a,n=t.b,s=t.c,o=t.d;return(Math.abs(n)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(r)>1e-4||Math.abs(o)>1e-4)},i.prototype.testScissor=function(t){var r=t.maskObject;if(!r.isFastRect||!r.isFastRect()||i.isMatrixRotated(r.worldTransform)||i.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var n=t._scissorRectLocal;return n.width>0&&n.height>0},i.prototype.roundFrameToPixels=function(t,r,n,s,o){i.isMatrixRotated(o)||(o=o?cg.copyFrom(o):cg.identity(),o.translate(-n.x,-n.y).scale(s.width/n.width,s.height/n.height).translate(s.x,s.y),this.renderer.filter.transformAABB(o,t),t.fit(s),t.x=Math.round(t.x*r),t.y=Math.round(t.y*r),t.width=Math.round(t.width*r),t.height=Math.round(t.height*r))},i.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var r=this.renderer.gl;t._scissorRect||r.enable(r.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},i.prototype.pop=function(t){var r=this.renderer.gl;t&&fg.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)},i.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,r;this.renderer.renderTexture.current?r=t.y:r=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,r,t.width,t.height)},i}(TI),Yd=function(e){se(i,e);function i(t){var r=e.call(this,t)||this;return r.glConst=ft.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,r}return i.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},i.prototype.push=function(t){var r=t.maskObject,n=this.renderer.gl,s=t._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),t._stencilCounter++;var o=t._colorMask;o!==0&&(t._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,s,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,o!==0&&(t._colorMask=o,n.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()},i.prototype.pop=function(t){var r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{var n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=n?n._colorMask:15;s!==0&&(n._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(n._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}},i.prototype._useCurrent=function(){var t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},i}(TI),Vd=function(){function e(i){this.renderer=i,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new kt,this.transform=null}return e.prototype.update=function(i,t,r,n){this.destinationFrame=i||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||i,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(i,t,r,n){var s=this.projectionMatrix,o=n?-1:1;s.identity(),s.a=1/t.width*2,s.d=o*(1/t.height*2),s.tx=-1-t.x*s.a,s.ty=-o-t.y*s.d},e.prototype.setTransform=function(i){},e.prototype.destroy=function(){this.renderer=null},e}(),Kr=new Tt,Fs=new Tt,zd=function(){function e(i){this.renderer=i,this.clearColor=i._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Tt,this.destinationFrame=new Tt,this.viewportFrame=new Tt}return e.prototype.bind=function(i,t,r){i===void 0&&(i=null);var n=this.renderer;this.current=i;var s,o,a;i?(s=i.baseTexture,a=s.resolution,t||(Kr.width=i.frame.width,Kr.height=i.frame.height,t=Kr),r||(Fs.x=i.frame.x,Fs.y=i.frame.y,Fs.width=t.width,Fs.height=t.height,r=Fs),o=s.framebuffer):(a=n.resolution,t||(Kr.width=n.screen.width,Kr.height=n.screen.height,t=Kr),r||(r=Kr,r.width=t.width,r.height=t.height));var h=this.viewportFrame;h.x=r.x*a,h.y=r.y*a,h.width=r.width*a,h.height=r.height*a,i||(h.y=n.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(o,h),this.renderer.projection.update(r,t,a,!o),i?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)},e.prototype.clear=function(i,t){this.current?i=i||this.current.baseTexture.clearColor:i=i||this.clearColor;var r=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=r.width!==n.width||r.height!==n.height;if(s){var o=this.viewportFrame,a=o.x,h=o.y,l=o.width,u=o.height;a=Math.round(a),h=Math.round(h),l=Math.round(l),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,h,l,u)}this.renderer.framebuffer.clear(i[0],i[1],i[2],i[3],t),s&&this.renderer.scissor.pop()},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e.prototype.destroy=function(){this.renderer=null},e}();function DO(e,i,t,r,n){t.buffer.update(n)}var FO={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},BI={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function RI(e){for(var i=e.map(function(h){return{data:h,offset:0,dataLen:0,dirty:0}}),t=0,r=0,n=0,s=0;s<i.length;s++){var o=i[s];if(t=BI[o.data.type],o.data.size>1&&(t=Math.max(t,16)*o.data.size),o.dataLen=t,r%t!==0&&r<16){var a=r%t%16;r+=a,n+=a}r+t>16?(n=Math.ceil(n/16)*16,o.offset=n,n+=t,r=t):(o.offset=n,r+=t,n+=t)}return n=Math.ceil(n/16)*16,{uboElements:i,size:n}}function PI(e,i){var t=[];for(var r in e)i[r]&&t.push(i[r]);return t.sort(function(n,s){return n.index-s.index}),t}function SI(e,i){if(!e.autoManage)return{size:0,syncFunc:DO};for(var t=PI(e.uniforms,i),r=RI(t),n=r.uboElements,s=r.size,o=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],a=0;a<n.length;a++){for(var h=n[a],l=e.uniforms[h.data.name],u=h.data.name,c=!1,f=0;f<wn.length;f++){var d=wn[f];if(d.codeUbo&&d.test(h.data,l)){o.push("offset = "+h.offset/4+";",wn[f].codeUbo(h.data.name,l)),c=!0;break}}if(!c)if(h.data.size>1){var A=xI(h.data.type),p=Math.max(BI[h.data.type]/16,1),g=A/p,y=(4-g%4)%4;o.push(`
                cv = ud.`+u+`.value;
                v = uv.`+u+`;
                offset = `+h.offset/4+`;

                t = 0;

                for(var i=0; i < `+h.data.size*p+`; i++)
                {
                    for(var j = 0; j < `+g+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+y+`;
                }

                `)}else{var I=FO[h.data.type];o.push(`
                cv = ud.`+u+`.value;
                v = uv.`+u+`;
                offset = `+h.offset/4+`;
                `+I+`;
                `)}}return o.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join(`
`))}}var LO=function(){function e(){}return e}(),NI=function(){function e(i,t){this.program=i,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},e}();function MO(e,i){for(var t={},r=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES),n=0;n<r;n++){var s=i.getActiveAttrib(e,n);if(s.name.indexOf("gl_")!==0){var o=EI(i,s.type),a={type:o,name:s.name,size:xI(o),location:i.getAttribLocation(e,s.name)};t[s.name]=a}}return t}function QO(e,i){for(var t={},r=i.getProgramParameter(e,i.ACTIVE_UNIFORMS),n=0;n<r;n++){var s=i.getActiveUniform(e,n),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),h=EI(i,s.type);t[o]={name:o,index:n,type:h,size:s.size,isArray:a,value:II(h,s.size)}}return t}function OI(e,i){var t=og(e,e.VERTEX_SHADER,i.vertexSrc),r=og(e,e.FRAGMENT_SHADER,i.fragmentSrc),n=e.createProgram();if(e.attachShader(n,t),e.attachShader(n,r),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS)||yO(e,n,t,r),i.attributeData=MO(n,e),i.uniformData=QO(n,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(i.vertexSrc)){var s=Object.keys(i.attributeData);s.sort(function(u,c){return u>c?1:-1});for(var o=0;o<s.length;o++)i.attributeData[s[o]].location=o,e.bindAttribLocation(n,o,s[o]);e.linkProgram(n)}e.deleteShader(t),e.deleteShader(r);var a={};for(var o in i.uniformData){var h=i.uniformData[o];a[o]={location:e.getUniformLocation(n,o),value:II(h.type,h.size)}}var l=new NI(n,a);return l}var UO=0,Ba={textureCount:0,uboCount:0},Wd=function(){function e(i){this.destroyed=!1,this.renderer=i,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=UO++}return e.prototype.systemCheck=function(){if(!wO())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(i){this.gl=i,this.reset()},e.prototype.bind=function(i,t){i.uniforms.globals=this.renderer.globalUniforms;var r=i.program,n=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(i);return this.shader=i,this.program!==r&&(this.program=r,this.gl.useProgram(n.program)),t||(Ba.textureCount=0,Ba.uboCount=0,this.syncUniformGroup(i.uniformGroup,Ba)),n},e.prototype.setUniforms=function(i){var t=this.shader.program,r=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(r.uniformData,i,this.renderer)},e.prototype.syncUniformGroup=function(i,t){var r=this.getGlProgram();(!i.static||i.dirtyId!==r.uniformDirtyGroups[i.id])&&(r.uniformDirtyGroups[i.id]=i.dirtyId,this.syncUniforms(i,r,t))},e.prototype.syncUniforms=function(i,t,r){var n=i.syncUniforms[this.shader.program.id]||this.createSyncGroups(i);n(t.uniformData,i.uniforms,this.renderer,r)},e.prototype.createSyncGroups=function(i){var t=this.getSignature(i,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=xO(i,this.shader.program.uniformData)),i.syncUniforms[this.shader.program.id]=this.cache[t],i.syncUniforms[this.shader.program.id]},e.prototype.syncUniformBufferGroup=function(i,t){var r=this.getGlProgram();if(!i.static||i.dirtyId!==0||!r.uniformGroups[i.id]){i.dirtyId=0;var n=r.uniformGroups[i.id]||this.createSyncBufferGroup(i,r,t);i.buffer.update(),n(r.uniformData,i.uniforms,this.renderer,Ba,i.buffer)}this.renderer.buffer.bindBufferBase(i.buffer,r.uniformBufferBindings[t])},e.prototype.createSyncBufferGroup=function(i,t,r){var n=this.renderer.gl;this.renderer.buffer.bind(i.buffer);var s=this.gl.getUniformBlockIndex(t.program,r);t.uniformBufferBindings[r]=this.shader.uniformBindCount,n.uniformBlockBinding(t.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(i,this.shader.program.uniformData,"ubo"),a=this._uboCache[o];if(a||(a=this._uboCache[o]=SI(i,this.shader.program.uniformData)),i.autoManage){var h=new Float32Array(a.size/4);i.buffer.update(h)}return t.uniformGroups[i.id]=a.syncFunc,t.uniformGroups[i.id]},e.prototype.getSignature=function(i,t,r){var n=i.uniforms,s=[r+"-"];for(var o in n)s.push(o),t[o]&&s.push(t[o].type);return s.join("-")},e.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateProgram=function(i){var t=this.gl,r=i.program,n=OI(t,r);return r.glPrograms[this.renderer.CONTEXT_UID]=n,n},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},e}();function GO(e,i){return i===void 0&&(i=[]),i[Nt.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[Nt.ADD]=[e.ONE,e.ONE],i[Nt.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],i[Nt.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],i[Nt.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[Nt.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[Nt.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[Nt.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[Nt.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[Nt.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[Nt.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[Nt.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[Nt.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[Nt.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[Nt.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[Nt.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[Nt.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[Nt.NONE]=[0,0],i[Nt.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],i[Nt.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],i[Nt.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],i[Nt.SRC_IN]=[e.DST_ALPHA,e.ZERO],i[Nt.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],i[Nt.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],i[Nt.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],i[Nt.DST_IN]=[e.ZERO,e.SRC_ALPHA],i[Nt.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],i[Nt.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],i[Nt.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],i[Nt.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],i}var kO=0,HO=1,XO=2,YO=3,VO=4,zO=5,jd=function(){function e(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Nt.NONE,this._blendEq=!1,this.map=[],this.map[kO]=this.setBlend,this.map[HO]=this.setOffset,this.map[XO]=this.setCullFace,this.map[YO]=this.setDepthTest,this.map[VO]=this.setFrontFace,this.map[zO]=this.setDepthMask,this.checks=[],this.defaultState=new Xr,this.defaultState.blend=!0}return e.prototype.contextChange=function(i){this.gl=i,this.blendModes=GO(i),this.set(this.defaultState),this.reset()},e.prototype.set=function(i){if(i=i||this.defaultState,this.stateId!==i.data){for(var t=this.stateId^i.data,r=0;t;)t&1&&this.map[r].call(this,!!(i.data&1<<r)),t=t>>1,r++;this.stateId=i.data}for(var r=0;r<this.checks.length;r++)this.checks[r](this,i)},e.prototype.forceState=function(i){i=i||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(i.data&1<<t));for(var t=0;t<this.checks.length;t++)this.checks[t](this,i);this.stateId=i.data},e.prototype.setBlend=function(i){this.updateCheck(e.checkBlendMode,i),this.gl[i?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(i){this.updateCheck(e.checkPolygonOffset,i),this.gl[i?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(i){this.gl[i?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setDepthMask=function(i){this.gl.depthMask(i)},e.prototype.setCullFace=function(i){this.gl[i?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(i){this.gl.frontFace(this.gl[i?"CW":"CCW"])},e.prototype.setBlendMode=function(i){if(i!==this.blendMode){this.blendMode=i;var t=this.blendModes[i],r=this.gl;t.length===2?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}},e.prototype.setPolygonOffset=function(i,t){this.gl.polygonOffset(i,t)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(i,t){var r=this.checks.indexOf(i);t&&r===-1?this.checks.push(i):!t&&r!==-1&&this.checks.splice(r,1)},e.checkBlendMode=function(i,t){i.setBlendMode(t.blendMode)},e.checkPolygonOffset=function(i,t){i.setPolygonOffset(1,t.polygonOffset)},e.prototype.destroy=function(){this.gl=null},e}(),Kd=function(){function e(i){this.renderer=i,this.count=0,this.checkCount=0,this.maxIdle=ft.GC_MAX_IDLE,this.checkCountMax=ft.GC_MAX_CHECK_COUNT,this.mode=ft.GC_MODE}return e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==ph.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var i=this.renderer.texture,t=i.managedTextures,r=!1,n=0;n<t.length;n++){var s=t[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(i.destroyTexture(s,!0),t[n]=null,r=!0)}if(r){for(var o=0,n=0;n<t.length;n++)t[n]!==null&&(t[o++]=t[n]);t.length=o}},e.prototype.unload=function(i){var t=this.renderer.texture,r=i._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(var n=i.children.length-1;n>=0;n--)this.unload(i.children[n])},e.prototype.destroy=function(){this.renderer=null},e}();function WO(e){var i,t,r,n,s,o,a,h,l,u,c,f,d,A,p,g,y,I,E,w,T,_,F;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?F=(i={},i[Dt.UNSIGNED_BYTE]=(t={},t[ut.RGBA]=e.RGBA8,t[ut.RGB]=e.RGB8,t[ut.RG]=e.RG8,t[ut.RED]=e.R8,t[ut.RGBA_INTEGER]=e.RGBA8UI,t[ut.RGB_INTEGER]=e.RGB8UI,t[ut.RG_INTEGER]=e.RG8UI,t[ut.RED_INTEGER]=e.R8UI,t[ut.ALPHA]=e.ALPHA,t[ut.LUMINANCE]=e.LUMINANCE,t[ut.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,t),i[Dt.BYTE]=(r={},r[ut.RGBA]=e.RGBA8_SNORM,r[ut.RGB]=e.RGB8_SNORM,r[ut.RG]=e.RG8_SNORM,r[ut.RED]=e.R8_SNORM,r[ut.RGBA_INTEGER]=e.RGBA8I,r[ut.RGB_INTEGER]=e.RGB8I,r[ut.RG_INTEGER]=e.RG8I,r[ut.RED_INTEGER]=e.R8I,r),i[Dt.UNSIGNED_SHORT]=(n={},n[ut.RGBA_INTEGER]=e.RGBA16UI,n[ut.RGB_INTEGER]=e.RGB16UI,n[ut.RG_INTEGER]=e.RG16UI,n[ut.RED_INTEGER]=e.R16UI,n[ut.DEPTH_COMPONENT]=e.DEPTH_COMPONENT16,n),i[Dt.SHORT]=(s={},s[ut.RGBA_INTEGER]=e.RGBA16I,s[ut.RGB_INTEGER]=e.RGB16I,s[ut.RG_INTEGER]=e.RG16I,s[ut.RED_INTEGER]=e.R16I,s),i[Dt.UNSIGNED_INT]=(o={},o[ut.RGBA_INTEGER]=e.RGBA32UI,o[ut.RGB_INTEGER]=e.RGB32UI,o[ut.RG_INTEGER]=e.RG32UI,o[ut.RED_INTEGER]=e.R32UI,o[ut.DEPTH_COMPONENT]=e.DEPTH_COMPONENT24,o),i[Dt.INT]=(a={},a[ut.RGBA_INTEGER]=e.RGBA32I,a[ut.RGB_INTEGER]=e.RGB32I,a[ut.RG_INTEGER]=e.RG32I,a[ut.RED_INTEGER]=e.R32I,a),i[Dt.FLOAT]=(h={},h[ut.RGBA]=e.RGBA32F,h[ut.RGB]=e.RGB32F,h[ut.RG]=e.RG32F,h[ut.RED]=e.R32F,h[ut.DEPTH_COMPONENT]=e.DEPTH_COMPONENT32F,h),i[Dt.HALF_FLOAT]=(l={},l[ut.RGBA]=e.RGBA16F,l[ut.RGB]=e.RGB16F,l[ut.RG]=e.RG16F,l[ut.RED]=e.R16F,l),i[Dt.UNSIGNED_SHORT_5_6_5]=(u={},u[ut.RGB]=e.RGB565,u),i[Dt.UNSIGNED_SHORT_4_4_4_4]=(c={},c[ut.RGBA]=e.RGBA4,c),i[Dt.UNSIGNED_SHORT_5_5_5_1]=(f={},f[ut.RGBA]=e.RGB5_A1,f),i[Dt.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[ut.RGBA]=e.RGB10_A2,d[ut.RGBA_INTEGER]=e.RGB10_A2UI,d),i[Dt.UNSIGNED_INT_10F_11F_11F_REV]=(A={},A[ut.RGB]=e.R11F_G11F_B10F,A),i[Dt.UNSIGNED_INT_5_9_9_9_REV]=(p={},p[ut.RGB]=e.RGB9_E5,p),i[Dt.UNSIGNED_INT_24_8]=(g={},g[ut.DEPTH_STENCIL]=e.DEPTH24_STENCIL8,g),i[Dt.FLOAT_32_UNSIGNED_INT_24_8_REV]=(y={},y[ut.DEPTH_STENCIL]=e.DEPTH32F_STENCIL8,y),i):F=(I={},I[Dt.UNSIGNED_BYTE]=(E={},E[ut.RGBA]=e.RGBA,E[ut.RGB]=e.RGB,E[ut.ALPHA]=e.ALPHA,E[ut.LUMINANCE]=e.LUMINANCE,E[ut.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,E),I[Dt.UNSIGNED_SHORT_5_6_5]=(w={},w[ut.RGB]=e.RGB,w),I[Dt.UNSIGNED_SHORT_4_4_4_4]=(T={},T[ut.RGBA]=e.RGBA,T),I[Dt.UNSIGNED_SHORT_5_5_5_1]=(_={},_[ut.RGBA]=e.RGBA,_),I),F}var Za=function(){function e(i){this.texture=i,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Dt.UNSIGNED_BYTE,this.internalFormat=ut.RGBA,this.samplerType=0}return e}(),$d=function(){function e(i){this.renderer=i,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Wt,this.hasIntegerTextures=!1}return e.prototype.contextChange=function(){var i=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=WO(i);var t=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var r=0;r<t;r++)this.boundTextures[r]=null;this.emptyTextures={};var n=new Za(i.createTexture());i.bindTexture(i.TEXTURE_2D,n.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[i.TEXTURE_2D]=n,this.emptyTextures[i.TEXTURE_CUBE_MAP]=new Za(i.createTexture()),i.bindTexture(i.TEXTURE_CUBE_MAP,this.emptyTextures[i.TEXTURE_CUBE_MAP].texture);for(var r=0;r<6;r++)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,null);i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MIN_FILTER,i.LINEAR);for(var r=0;r<this.boundTextures.length;r++)this.bind(null,r)},e.prototype.bind=function(i,t){t===void 0&&(t=0);var r=this.gl;if(i=i==null?void 0:i.castToBaseTexture(),i&&i.valid&&!i.parentTextureArray){i.touched=this.renderer.textureGC.count;var n=i._glTextures[this.CONTEXT_UID]||this.initTexture(i);this.boundTextures[t]!==i&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(i.target,n.texture)),n.dirtyId!==i.dirtyId&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(i)),this.boundTextures[t]=i}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]=this.unknownTexture},e.prototype.unbind=function(i){var t=this,r=t.gl,n=t.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<n.length;s++)n[s]===i&&(this.currentLocation!==s&&(r.activeTexture(r.TEXTURE0+s),this.currentLocation=s),r.bindTexture(i.target,this.emptyTextures[i.target].texture),n[s]=null)},e.prototype.ensureSamplerType=function(i){var t=this,r=t.boundTextures,n=t.hasIntegerTextures,s=t.CONTEXT_UID;if(n)for(var o=i-1;o>=0;--o){var a=r[o];if(a){var h=a._glTextures[s];h.samplerType!==yo.FLOAT&&this.renderer.texture.unbind(a)}}},e.prototype.initTexture=function(i){var t=new Za(this.gl.createTexture());return t.dirtyId=-1,i._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(i),i.on("dispose",this.destroyTexture,this),t},e.prototype.initTextureType=function(i,t){var r,n;t.internalFormat=(n=(r=this.internalFormats[i.type])===null||r===void 0?void 0:r[i.format])!==null&&n!==void 0?n:i.format,this.webGLVersion===2&&i.type===Dt.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=i.type},e.prototype.updateTexture=function(i){var t=i._glTextures[this.CONTEXT_UID];if(t){var r=this.renderer;if(this.initTextureType(i,t),i.resource&&i.resource.upload(r,i,t))t.samplerType!==yo.FLOAT&&(this.hasIntegerTextures=!0);else{var n=i.realWidth,s=i.realHeight,o=r.gl;(t.width!==n||t.height!==s||t.dirtyId<0)&&(t.width=n,t.height=s,o.texImage2D(i.target,0,t.internalFormat,n,s,0,i.format,t.type,null))}i.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(i),t.dirtyId=i.dirtyId}},e.prototype.destroyTexture=function(i,t){var r=this.gl;if(i=i.castToBaseTexture(),i._glTextures[this.CONTEXT_UID]&&(this.unbind(i),r.deleteTexture(i._glTextures[this.CONTEXT_UID].texture),i.off("dispose",this.destroyTexture,this),delete i._glTextures[this.CONTEXT_UID],!t)){var n=this.managedTextures.indexOf(i);n!==-1&&bn(this.managedTextures,n,1)}},e.prototype.updateTextureStyle=function(i){var t=i._glTextures[this.CONTEXT_UID];t&&((i.mipmap===mi.POW2||this.webGLVersion!==2)&&!i.isPowerOfTwo?t.mipmap=!1:t.mipmap=i.mipmap>=1,this.webGLVersion!==2&&!i.isPowerOfTwo?t.wrapMode=rr.CLAMP:t.wrapMode=i.wrapMode,i.resource&&i.resource.style(this.renderer,i,t)||this.setStyle(i,t),t.dirtyStyleId=i.dirtyStyleId)},e.prototype.setStyle=function(i,t){var r=this.gl;if(t.mipmap&&i.mipmap!==mi.ON_MANUAL&&r.generateMipmap(i.target),r.texParameteri(i.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(i.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(i.target,r.TEXTURE_MIN_FILTER,i.scaleMode===ni.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&i.anisotropicLevel>0&&i.scaleMode===ni.LINEAR){var s=Math.min(i.anisotropicLevel,r.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(i.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else r.texParameteri(i.target,r.TEXTURE_MIN_FILTER,i.scaleMode===ni.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(i.target,r.TEXTURE_MAG_FILTER,i.scaleMode===ni.LINEAR?r.LINEAR:r.NEAREST)},e.prototype.destroy=function(){this.renderer=null},e}(),DI={__proto__:null,FilterSystem:Md,BatchSystem:Qd,ContextSystem:Ud,FramebufferSystem:Gd,GeometrySystem:kd,MaskSystem:Hd,ScissorSystem:Xd,StencilSystem:Yd,ProjectionSystem:Vd,RenderTextureSystem:zd,ShaderSystem:Wd,StateSystem:jd,TextureGCSystem:Kd,TextureSystem:$d},lu=new kt,FI=function(e){se(i,e);function i(t,r){t===void 0&&(t=ys.UNKNOWN);var n=e.call(this)||this;return r=Object.assign({},ft.RENDER_OPTIONS,r),n.options=r,n.type=t,n.screen=new Tt(0,0,r.width,r.height),n.view=r.view||ft.ADAPTER.createCanvas(),n.resolution=r.resolution||ft.RESOLUTION,n.useContextAlpha=r.useContextAlpha,n.autoDensity=!!r.autoDensity,n.preserveDrawingBuffer=r.preserveDrawingBuffer,n.clearBeforeRender=r.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=r.backgroundColor||n._backgroundColor,n.backgroundAlpha=r.backgroundAlpha,r.transparent!==void 0&&(ze("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=r.transparent,n.backgroundAlpha=r.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return i.prototype.initPlugins=function(t){for(var r in t)this.plugins[r]=new t[r](this)},Object.defineProperty(i.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),i.prototype.resize=function(t,r){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(r*this.resolution);var n=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=s+"px"),this.emit("resize",n,s)},i.prototype.generateTexture=function(t,r,n,s){r===void 0&&(r={}),typeof r=="number"&&(ze("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),r={scaleMode:r,resolution:n,region:s});var o=r.region,a=hO(r,["region"]);s=o||t.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var h=oi.create(Ec({width:s.width,height:s.height},a));return lu.tx=-s.x,lu.ty=-s.y,this.render(t,{renderTexture:h,clear:!1,transform:lu,skipUpdateTransform:!!t.parent}),h},i.prototype.destroy=function(t){for(var r in this.plugins)this.plugins[r].destroy(),this.plugins[r]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=ys.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(i.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=_d(t),Re(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),i}(je),jO=function(){function e(i){this.buffer=i||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return e}(),KO=function(){function e(i){this.renderer=i,this.managedBuffers={},this.boundBufferBases={}}return e.prototype.destroy=function(){this.renderer=null},e.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},e.prototype.bind=function(i){var t=this,r=t.gl,n=t.CONTEXT_UID,s=i._glBuffers[n]||this.createGLBuffer(i);r.bindBuffer(i.type,s.buffer)},e.prototype.bindBufferBase=function(i,t){var r=this,n=r.gl,s=r.CONTEXT_UID;if(this.boundBufferBases[t]!==i){var o=i._glBuffers[s]||this.createGLBuffer(i);this.boundBufferBases[t]=i,n.bindBufferBase(n.UNIFORM_BUFFER,t,o.buffer)}},e.prototype.bindBufferRange=function(i,t,r){var n=this,s=n.gl,o=n.CONTEXT_UID;r=r||0;var a=i._glBuffers[o]||this.createGLBuffer(i);s.bindBufferRange(s.UNIFORM_BUFFER,t||0,a.buffer,r*256,256)},e.prototype.update=function(i){var t=this,r=t.gl,n=t.CONTEXT_UID,s=i._glBuffers[n];if(i._updateID!==s.updateID)if(s.updateID=i._updateID,r.bindBuffer(i.type,s.buffer),s.byteLength>=i.data.byteLength)r.bufferSubData(i.type,0,i.data);else{var o=i.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;s.byteLength=i.data.byteLength,r.bufferData(i.type,i.data,o)}},e.prototype.dispose=function(i,t){if(this.managedBuffers[i.id]){delete this.managedBuffers[i.id];var r=i._glBuffers[this.CONTEXT_UID],n=this.gl;i.disposeRunner.remove(this),r&&(t||n.deleteBuffer(r.buffer),delete i._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeAll=function(i){for(var t=Object.keys(this.managedBuffers),r=0;r<t.length;r++)this.dispose(this.managedBuffers[t[r]],i)},e.prototype.createGLBuffer=function(i){var t=this,r=t.CONTEXT_UID,n=t.gl;return i._glBuffers[r]=new jO(n.createBuffer()),this.managedBuffers[i.id]=i,i.disposeRunner.add(this),i._glBuffers[r]},e}(),ha=function(e){se(i,e);function i(t){var r=e.call(this,ys.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new Oe("destroy"),contextChange:new Oe("contextChange"),reset:new Oe("reset"),update:new Oe("update"),postrender:new Oe("postrender"),prerender:new Oe("prerender"),resize:new Oe("resize")},r.runners.contextChange.add(r),r.globalUniforms=new Qr({projectionMatrix:new kt},!0),r.addSystem(Hd,"mask").addSystem(Ud,"context").addSystem(jd,"state").addSystem(Wd,"shader").addSystem($d,"texture").addSystem(KO,"buffer").addSystem(kd,"geometry").addSystem(Gd,"framebuffer").addSystem(Xd,"scissor").addSystem(Yd,"stencil").addSystem(Vd,"projection").addSystem(Kd,"textureGC").addSystem(Md,"filter").addSystem(zd,"renderTexture").addSystem(Qd,"batch"),r.initPlugins(i.__plugins),r.multisample=void 0,t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&r.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,aI(r.context.webGLVersion===2?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return i.create=function(t){if(hI())return new i(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},i.prototype.contextChange=function(){var t=this.gl,r;if(this.context.webGLVersion===1){var n=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,n)}else{var n=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,n)}r>=ve.HIGH?this.multisample=ve.HIGH:r>=ve.MEDIUM?this.multisample=ve.MEDIUM:r>=ve.LOW?this.multisample=ve.LOW:this.multisample=ve.NONE},i.prototype.addSystem=function(t,r){var n=new t(this);if(this[r])throw new Error('Whoops! The name "'+r+'" is already in use');this[r]=n;for(var s in this.runners)this.runners[s].add(n);return this},i.prototype.render=function(t,r){var n,s,o,a;if(r&&(r instanceof oi?(ze("6.0.0","Renderer#render arguments changed, use options instead."),n=r,s=arguments[2],o=arguments[3],a=arguments[4]):(n=r.renderTexture,s=r.clear,o=r.transform,a=r.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=o,!this.context.isLost){if(n||(this._lastObjectRendered=t),!a){var h=t.enableTempParent();t.updateTransform(),t.disableTempParent(h)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},i.prototype.generateTexture=function(t,r,n,s){r===void 0&&(r={});var o=e.prototype.generateTexture.call(this,t,r,n,s);return this.framebuffer.blit(),o},i.prototype.resize=function(t,r){e.prototype.resize.call(this,t,r),this.runners.resize.emit(this.screen.height,this.screen.width)},i.prototype.reset=function(){return this.runners.reset.emit(),this},i.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},i.prototype.destroy=function(t){this.runners.destroy.emit();for(var r in this.runners)this.runners[r].destroy();e.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(i.prototype,"extract",{get:function(){return ze("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),i.registerPlugin=function(t,r){ze("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),$i.add({name:t,type:Zt.RendererPlugin,ref:r})},i.__plugins={},i}(FI);$i.handleByMap(Zt.RendererPlugin,ha.__plugins);function LI(e){return ha.create(e)}var $O=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,JO=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,MI=$O,Jd=JO,qO=function(){function e(i){ze("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=i}return e.prototype.destroy=function(){this.renderer=null},e}(),vh=function(){function e(){this.texArray=null,this.blend=0,this.type=pi.TRIANGLES,this.start=0,this.size=0,this.data=null}return e}(),yh=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var i=0;i<this.count;i++)this.elements[i]=null;this.count=0},e}(),mh=function(){function e(i){typeof i=="number"?this.rawBinaryData=new ArrayBuffer(i):i instanceof Uint8Array?this.rawBinaryData=i.buffer:this.rawBinaryData=i,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(i){return this[i+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(i){switch(i){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(i+" isn't a valid view type")}},e}(),QI=function(e){se(i,e);function i(t){var r=e.call(this,t)||this;return r.shaderGenerator=null,r.geometryClass=null,r.vertexSize=null,r.state=Xr.for2d(),r.size=ft.SPRITE_BATCH_SIZE*4,r._vertexCount=0,r._indexCount=0,r._bufferedElements=[],r._bufferedTextures=[],r._bufferSize=0,r._shader=null,r._packedGeometries=[],r._packedGeometryPoolSize=2,r._flushId=0,r._aBuffers={},r._iBuffers={},r.MAX_TEXTURES=1,r.renderer.on("prerender",r.onPrerender,r),t.runners.contextChange.add(r),r._dcIndex=0,r._aIndex=0,r._iIndex=0,r._attributeBuffer=null,r._indexBuffer=null,r._tempBoundTextures=[],r}return i.prototype.contextChange=function(){var t=this.renderer.gl;ft.PREFER_ENV===Wi.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),ft.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=bI(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()},i.prototype.initFlushBuffers=function(){for(var t=i._drawCallPool,r=i._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;t.length<n;)t.push(new vh);for(;r.length<s;)r.push(new yh);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},i.prototype.onPrerender=function(){this._flushId=0},i.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},i.prototype.buildTexturesAndDrawCalls=function(){var t=this,r=t._bufferedTextures,n=t.MAX_TEXTURES,s=i._textureArrayPool,o=this.renderer.batch,a=this._tempBoundTextures,h=this.renderer.textureGC.count,l=++Wt._globalBatch,u=0,c=s[0],f=0;o.copyBoundTextures(a,n);for(var d=0;d<this._bufferSize;++d){var A=r[d];r[d]=null,A._batchEnabled!==l&&(c.count>=n&&(o.boundArray(c,a,l,n),this.buildDrawCalls(c,f,d),f=d,c=s[++u],++l),A._batchEnabled=l,A.touched=h,c.elements[c.count++]=A)}c.count>0&&(o.boundArray(c,a,l,n),this.buildDrawCalls(c,f,this._bufferSize),++u,++l);for(var d=0;d<a.length;d++)a[d]=null;Wt._globalBatch=l},i.prototype.buildDrawCalls=function(t,r,n){var s=this,o=s._bufferedElements,a=s._attributeBuffer,h=s._indexBuffer,l=s.vertexSize,u=i._drawCallPool,c=this._dcIndex,f=this._aIndex,d=this._iIndex,A=u[c];A.start=this._iIndex,A.texArray=t;for(var p=r;p<n;++p){var g=o[p],y=g._texture.baseTexture,I=xd[y.alphaMode?1:0][g.blendMode];o[p]=null,r<p&&A.blend!==I&&(A.size=d-A.start,r=p,A=u[++c],A.texArray=t,A.start=d),this.packInterleavedGeometry(g,a,h,f,d),f+=g.vertexData.length/2*l,d+=g.indices.length,A.blend=I}r<n&&(A.size=d-A.start,++c),this._dcIndex=c,this._aIndex=f,this._iIndex=d},i.prototype.bindAndClearTexArray=function(t){for(var r=this.renderer.texture,n=0;n<t.count;n++)r.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0},i.prototype.updateGeometry=function(){var t=this,r=t._packedGeometries,n=t._attributeBuffer,s=t._indexBuffer;ft.CAN_UPLOAD_SAME_BUFFER?(r[this._flushId]._buffer.update(n.rawBinaryData),r[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,r[this._flushId]=new this.geometryClass),r[this._flushId]._buffer.update(n.rawBinaryData),r[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(r[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},i.prototype.drawBatches=function(){for(var t=this._dcIndex,r=this.renderer,n=r.gl,s=r.state,o=i._drawCallPool,a=null,h=0;h<t;h++){var l=o[h],u=l.texArray,c=l.type,f=l.size,d=l.start,A=l.blend;a!==u&&(a=u,this.bindAndClearTexArray(u)),this.state.blendMode=A,s.set(this.state),n.drawElements(c,f,n.UNSIGNED_SHORT,d*2)}},i.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},i.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),ft.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},i.prototype.stop=function(){this.flush()},i.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},i.prototype.getAttributeBuffer=function(t){var r=Io(Math.ceil(t/8)),n=yc(r),s=r*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var o=this._aBuffers[s];return o||(this._aBuffers[s]=o=new mh(s*this.vertexSize*4)),o},i.prototype.getIndexBuffer=function(t){var r=Io(Math.ceil(t/12)),n=yc(r),s=r*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var o=this._iBuffers[n];return o||(this._iBuffers[n]=o=new Uint16Array(s)),o},i.prototype.packInterleavedGeometry=function(t,r,n,s,o){for(var a=r.uint32View,h=r.float32View,l=s/this.vertexSize,u=t.uvs,c=t.indices,f=t.vertexData,d=t._texture.baseTexture._batchLocation,A=Math.min(t.worldAlpha,1),p=A<1&&t._texture.baseTexture.alphaMode?Bl(t._tintRGB,A):t._tintRGB+(A*255<<24),g=0;g<f.length;g+=2)h[s++]=f[g],h[s++]=f[g+1],h[s++]=u[g],h[s++]=u[g+1],a[s++]=p,h[s++]=d;for(var g=0;g<c.length;g++)n[o++]=l+c[g]},i._drawCallPool=[],i._textureArrayPool=[],i}(aa),UI=function(){function e(i,t){if(this.vertexSrc=i,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(i){if(!this.programCache[i]){for(var t=new Int32Array(i),r=0;r<i;r++)t[r]=r;this.defaultGroupCache[i]=Qr.from({uSamplers:t},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+i),n=n.replace(/%forloop%/gi,this.generateSampleSrc(i)),this.programCache[i]=new Bs(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new kt,default:this.defaultGroupCache[i]};return new Cr(this.programCache[i],s)},e.prototype.generateSampleSrc=function(i){var t="";t+=`
`,t+=`
`;for(var r=0;r<i;r++)r>0&&(t+=`
else `),r<i-1&&(t+="if(vTextureId < "+r+".5)"),t+=`
{`,t+=`
	color = texture2D(uSamplers[`+r+"], vTextureCoord);",t+=`
}`;return t+=`
`,t+=`
`,t},e}(),qd=function(e){se(i,e);function i(t){t===void 0&&(t=!1);var r=e.call(this)||this;return r._buffer=new Ce(null,t,!1),r._indexBuffer=new Ce(null,t,!0),r.addAttribute("aVertexPosition",r._buffer,2,!1,Dt.FLOAT).addAttribute("aTextureCoord",r._buffer,2,!1,Dt.FLOAT).addAttribute("aColor",r._buffer,4,!0,Dt.UNSIGNED_BYTE).addAttribute("aTextureId",r._buffer,1,!0,Dt.FLOAT).addIndex(r._indexBuffer),r}return i}(Ts),dg=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,Ag=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,GI=function(){function e(){}return e.create=function(i){var t=Object.assign({vertex:dg,fragment:Ag,geometryClass:qd,vertexSize:6},i),r=t.vertex,n=t.fragment,s=t.vertexSize,o=t.geometryClass;return function(a){se(h,a);function h(l){var u=a.call(this,l)||this;return u.shaderGenerator=new UI(r,n),u.geometryClass=o,u.vertexSize=s,u}return h}(QI)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return dg},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return Ag},enumerable:!1,configurable:!0}),e}(),Zd=GI.create();Object.assign(Zd,{extension:{name:"batch",type:Zt.RendererPlugin}});var kI={},ZO=function(e){Object.defineProperty(kI,e,{get:function(){return ze("6.0.0","PIXI.systems."+e+" has moved to PIXI."+e),AI[e]}})};for(var tA in AI)ZO(tA);var HI={},tD=function(e){Object.defineProperty(HI,e,{get:function(){return ze("6.0.0","PIXI.resources."+e+" has moved to PIXI."+e),DI[e]}})};for(var tA in DI)tD(tA);var eD="6.5.2";/*!
 * @pixi/interaction - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var wc=function(){function e(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new M,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),e.prototype.getLocalPosition=function(i,t,r){return i.worldTransform.applyInverse(r||this.global,t)},e.prototype.copyEvent=function(i){"isPrimary"in i&&i.isPrimary&&(this.isPrimary=!0),this.button="button"in i&&i.button;var t="buttons"in i&&i.buttons;this.buttons=Number.isInteger(t)?t:"which"in i&&i.which,this.width="width"in i&&i.width,this.height="height"in i&&i.height,this.tiltX="tiltX"in i&&i.tiltX,this.tiltY="tiltY"in i&&i.tiltY,this.pointerType="pointerType"in i&&i.pointerType,this.pressure="pressure"in i&&i.pressure,this.rotationAngle="rotationAngle"in i&&i.rotationAngle,this.twist="twist"in i&&i.twist||0,this.tangentialPressure="tangentialPressure"in i&&i.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Tc=function(e,i){return Tc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Tc(e,i)};function iD(e,i){Tc(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var XI=function(){function e(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},e.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},e}(),th=function(){function e(i){this._pointerId=i,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(i,t){t?this._flags=this._flags|i:this._flags=this._flags&~i},Object.defineProperty(e.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return this._flags},set:function(i){this._flags=i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this._flags===e.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return(this._flags&e.FLAGS.OVER)!==0},set:function(i){this._doSet(e.FLAGS.OVER,i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightDown",{get:function(){return(this._flags&e.FLAGS.RIGHT_DOWN)!==0},set:function(i){this._doSet(e.FLAGS.RIGHT_DOWN,i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftDown",{get:function(){return(this._flags&e.FLAGS.LEFT_DOWN)!==0},set:function(i){this._doSet(e.FLAGS.LEFT_DOWN,i)},enumerable:!1,configurable:!0}),e.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2}),e}(),rD=function(){function e(){this._tempPoint=new M}return e.prototype.recursiveFindHit=function(i,t,r,n,s){var o;if(!t||!t.visible)return!1;var a=i.data.global;s=t.interactive||s;var h=!1,l=s,u=!0;if(t.hitArea)n&&(t.worldTransform.applyInverse(a,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?h=!0:(n=!1,u=!1)),l=!1;else if(t._mask&&n){var c=t._mask.isMaskData?t._mask.maskObject:t._mask;c&&!(!((o=c.containsPoint)===null||o===void 0)&&o.call(c,a))&&(n=!1)}if(u&&t.interactiveChildren&&t.children)for(var f=t.children,d=f.length-1;d>=0;d--){var A=f[d],p=this.recursiveFindHit(i,A,r,n,l);if(p){if(!A.parent)continue;l=!1,p&&(i.target&&(n=!1),h=!0)}}return s&&(n&&!i.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(a)&&(h=!0),t.interactive&&(h&&!i.target&&(i.target=t),r&&r(i,t,!!h))),h},e.prototype.findHit=function(i,t,r,n){this.recursiveFindHit(i,t,r,n,!1)},e}(),YI={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(e){e?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Jt.mixin(YI);var Ra=1,Pa={target:null,data:{global:null}},eA=function(e){iD(i,e);function i(t,r){var n=e.call(this)||this;return r=r||{},n.renderer=t,n.autoPreventDefault=r.autoPreventDefault!==void 0?r.autoPreventDefault:!0,n.interactionFrequency=r.interactionFrequency||10,n.mouse=new wc,n.mouse.identifier=Ra,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[Ra]=n.mouse,n.interactionDataPool=[],n.eventData=new XI,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.tickerAdded=!1,n.mouseOverRenderer=!("PointerEvent"in globalThis),n.supportsTouchEvents="ontouchstart"in globalThis,n.supportsPointerEvents=!!globalThis.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n.resolution=1,n.delayedEvents=[],n.search=new rD,n._tempDisplayObject=new Td,n._eventListenerOptions={capture:!0,passive:!1},n._useSystemTicker=r.useSystemTicker!==void 0?r.useSystemTicker:!0,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return Object.defineProperty(i.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),i.prototype.hitTest=function(t,r){return Pa.target=null,Pa.data.global=t,r||(r=this.lastObjectRendered),this.processInteractive(Pa,r,null,!0),Pa.target},i.prototype.setTargetElement=function(t,r){r===void 0&&(r=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=r,this.addEvents(),this.addTickerListener()},i.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(ye.system.add(this.tickerUpdate,this,zi.INTERACTION),this.tickerAdded=!0)},i.prototype.removeTickerListener=function(){this.tickerAdded&&(ye.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},i.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},i.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},i.prototype.tickerUpdate=function(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},i.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var t in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var r=this.activeInteractionData[t];if(r.originalEvent&&r.pointerType!=="touch"){var n=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},i.prototype.setCursorMode=function(t){t=t||"default";var r=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(r=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var n=this.cursorStyles[t];if(n)switch(typeof n){case"string":r&&(this.interactionDOMElement.style.cursor=n);break;case"function":n(t);break;case"object":r&&Object.assign(this.interactionDOMElement.style,n);break}else r&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},i.prototype.dispatchEvent=function(t,r,n){(!n.stopPropagationHint||t===n.stopsPropagatingAt)&&(n.currentTarget=t,n.type=r,t.emit(r,n),t[r]&&t[r](n))},i.prototype.delayDispatchEvent=function(t,r,n){this.delayedEvents.push({displayObject:t,eventString:r,eventData:n})},i.prototype.mapPositionToPoint=function(t,r,n){var s;this.interactionDOMElement.parentElement?s=this.interactionDOMElement.getBoundingClientRect():s={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var o=1/this.resolution;t.x=(r-s.left)*(this.interactionDOMElement.width/s.width)*o,t.y=(n-s.top)*(this.interactionDOMElement.height/s.height)*o},i.prototype.processInteractive=function(t,r,n,s){var o=this.search.findHit(t,r,n,s),a=this.delayedEvents;if(!a.length)return o;t.stopPropagationHint=!1;var h=a.length;this.delayedEvents=[];for(var l=0;l<h;l++){var u=a[l],c=u.displayObject,f=u.eventString,d=u.eventData;d.stopsPropagatingAt===c&&(d.stopPropagationHint=!0),this.dispatchEvent(c,f,d)}return o},i.prototype.onPointerDown=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var r=this.normalizeToPointerData(t);if(this.autoPreventDefault&&r[0].isNormalized){var n=t.cancelable||!("cancelable"in t);n&&t.preventDefault()}for(var s=r.length,o=0;o<s;o++){var a=r[o],h=this.getInteractionDataForPointerId(a),l=this.configureInteractionEventForDOMEvent(this.eventData,a,h);if(l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",l),a.pointerType==="touch")this.emit("touchstart",l);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var u=a.button===2;this.emit(u?"rightdown":"mousedown",this.eventData)}}}},i.prototype.processPointerDown=function(t,r,n){var s=t.data,o=t.data.identifier;if(n){if(r.trackedPointers[o]||(r.trackedPointers[o]=new th(o)),this.dispatchEvent(r,"pointerdown",t),s.pointerType==="touch")this.dispatchEvent(r,"touchstart",t);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var a=s.button===2;a?r.trackedPointers[o].rightDown=!0:r.trackedPointers[o].leftDown=!0,this.dispatchEvent(r,a?"rightdown":"mousedown",t)}}},i.prototype.onPointerComplete=function(t,r,n){var s=this.normalizeToPointerData(t),o=s.length,a=t.target;t.composedPath&&t.composedPath().length>0&&(a=t.composedPath()[0]);for(var h=a!==this.interactionDOMElement?"outside":"",l=0;l<o;l++){var u=s[l],c=this.getInteractionDataForPointerId(u),f=this.configureInteractionEventForDOMEvent(this.eventData,u,c);if(f.data.originalEvent=t,this.processInteractive(f,this.lastObjectRendered,n,r||!h),this.emit(r?"pointercancel":"pointerup"+h,f),u.pointerType==="mouse"||u.pointerType==="pen"){var d=u.button===2;this.emit(d?"rightup"+h:"mouseup"+h,f)}else u.pointerType==="touch"&&(this.emit(r?"touchcancel":"touchend"+h,f),this.releaseInteractionDataForPointerId(u.pointerId))}},i.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!0,this.processPointerCancel)},i.prototype.processPointerCancel=function(t,r){var n=t.data,s=t.data.identifier;r.trackedPointers[s]!==void 0&&(delete r.trackedPointers[s],this.dispatchEvent(r,"pointercancel",t),n.pointerType==="touch"&&this.dispatchEvent(r,"touchcancel",t))},i.prototype.onPointerUp=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!1,this.processPointerUp)},i.prototype.processPointerUp=function(t,r,n){var s=t.data,o=t.data.identifier,a=r.trackedPointers[o],h=s.pointerType==="touch",l=s.pointerType==="mouse"||s.pointerType==="pen",u=!1;if(l){var c=s.button===2,f=th.FLAGS,d=c?f.RIGHT_DOWN:f.LEFT_DOWN,A=a!==void 0&&a.flags&d;n?(this.dispatchEvent(r,c?"rightup":"mouseup",t),A&&(this.dispatchEvent(r,c?"rightclick":"click",t),u=!0)):A&&this.dispatchEvent(r,c?"rightupoutside":"mouseupoutside",t),a&&(c?a.rightDown=!1:a.leftDown=!1)}n?(this.dispatchEvent(r,"pointerup",t),h&&this.dispatchEvent(r,"touchend",t),a&&((!l||u)&&this.dispatchEvent(r,"pointertap",t),h&&(this.dispatchEvent(r,"tap",t),a.over=!1))):a&&(this.dispatchEvent(r,"pointerupoutside",t),h&&this.dispatchEvent(r,"touchendoutside",t)),a&&a.none&&delete r.trackedPointers[o]},i.prototype.onPointerMove=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var r=this.normalizeToPointerData(t);(r[0].pointerType==="mouse"||r[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var n=r.length,s=0;s<n;s++){var o=r[s],a=this.getInteractionDataForPointerId(o),h=this.configureInteractionEventForDOMEvent(this.eventData,o,a);h.data.originalEvent=t,this.processInteractive(h,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",h),o.pointerType==="touch"&&this.emit("touchmove",h),(o.pointerType==="mouse"||o.pointerType==="pen")&&this.emit("mousemove",h)}r[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},i.prototype.processPointerMove=function(t,r,n){var s=t.data,o=s.pointerType==="touch",a=s.pointerType==="mouse"||s.pointerType==="pen";a&&this.processPointerOverOut(t,r,n),(!this.moveWhenInside||n)&&(this.dispatchEvent(r,"pointermove",t),o&&this.dispatchEvent(r,"touchmove",t),a&&this.dispatchEvent(r,"mousemove",t))},i.prototype.onPointerOut=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var r=this.normalizeToPointerData(t),n=r[0];n.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var s=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,s);o.data.originalEvent=n,this.processInteractive(o,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",o),n.pointerType==="mouse"||n.pointerType==="pen"?this.emit("mouseout",o):this.releaseInteractionDataForPointerId(s.identifier)}},i.prototype.processPointerOverOut=function(t,r,n){var s=t.data,o=t.data.identifier,a=s.pointerType==="mouse"||s.pointerType==="pen",h=r.trackedPointers[o];n&&!h&&(h=r.trackedPointers[o]=new th(o)),h!==void 0&&(n&&this.mouseOverRenderer?(h.over||(h.over=!0,this.delayDispatchEvent(r,"pointerover",t),a&&this.delayDispatchEvent(r,"mouseover",t)),a&&this.cursor===null&&(this.cursor=r.cursor)):h.over&&(h.over=!1,this.dispatchEvent(r,"pointerout",this.eventData),a&&this.dispatchEvent(r,"mouseout",t),h.none&&delete r.trackedPointers[o]))},i.prototype.onPointerOver=function(t){var r=this.normalizeToPointerData(t),n=r[0],s=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,s);o.data.originalEvent=n,n.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",o),(n.pointerType==="mouse"||n.pointerType==="pen")&&this.emit("mouseover",o)},i.prototype.getInteractionDataForPointerId=function(t){var r=t.pointerId,n;return r===Ra||t.pointerType==="mouse"?n=this.mouse:this.activeInteractionData[r]?n=this.activeInteractionData[r]:(n=this.interactionDataPool.pop()||new wc,n.identifier=r,this.activeInteractionData[r]=n),n.copyEvent(t),n},i.prototype.releaseInteractionDataForPointerId=function(t){var r=this.activeInteractionData[t];r&&(delete this.activeInteractionData[t],r.reset(),this.interactionDataPool.push(r))},i.prototype.configureInteractionEventForDOMEvent=function(t,r,n){return t.data=n,this.mapPositionToPoint(n.global,r.clientX,r.clientY),r.pointerType==="touch"&&(r.globalX=n.global.x,r.globalY=n.global.y),n.originalEvent=r,t.reset(),t},i.prototype.normalizeToPointerData=function(t){var r=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,s=t.changedTouches.length;n<s;n++){var o=t.changedTouches[n];typeof o.button>"u"&&(o.button=t.touches.length?1:0),typeof o.buttons>"u"&&(o.buttons=t.touches.length?1:0),typeof o.isPrimary>"u"&&(o.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof o.width>"u"&&(o.width=o.radiusX||1),typeof o.height>"u"&&(o.height=o.radiusY||1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="touch"),typeof o.pointerId>"u"&&(o.pointerId=o.identifier||0),typeof o.pressure>"u"&&(o.pressure=o.force||.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),typeof o.layerX>"u"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY>"u"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,r.push(o)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){var a=t;typeof a.isPrimary>"u"&&(a.isPrimary=!0),typeof a.width>"u"&&(a.width=1),typeof a.height>"u"&&(a.height=1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="mouse"),typeof a.pointerId>"u"&&(a.pointerId=Ra),typeof a.pressure>"u"&&(a.pressure=.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),a.isNormalized=!0,r.push(a)}else r.push(t);return r},i.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},i.extension={name:"interaction",type:[Zt.RendererPlugin,Zt.CanvasRendererPlugin]},i}(je);class Ih{constructor(i=0,t=0,r=0,n=0){this._x=Number(i),this._y=Number(t),this._width=Number(r),this._height=Number(n),this._hull=[new M,new M,new M,new M],this.currentID=-1,this.dirtyID=0}get x(){return this._x}set x(i){this._x=i,this.dirtyID++}get y(){return this._y}set y(i){this._y=i,this.dirtyID++}get width(){return this._width}set width(i){this._width=i,this.dirtyID++}get height(){return this._height}set height(i){this._height=i,this.dirtyID++}get hull(){return this.isDirty()&&this.update(),this._hull}get topLeft(){return this.isDirty()&&this.update(),this._hull[0]}get topRight(){return this.isDirty()&&this.update(),this._hull[1]}get bottomRight(){return this.isDirty()&&this.update(),this._hull[2]}get bottomLeft(){return this.isDirty()&&this.update(),this._hull[3]}isDirty(){return this.currentID!==this.dirtyID}update(){const[i,t,r,n]=this._hull;i.set(this._x,this._y),t.set(this._x+this._width,this._y),r.set(this._x+this._width,this._y+this._height),n.set(this._x,this._y+this._height)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}clone(){return new Ih(this.x,this.y,this.width,this.height)}copyFrom(i){return this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height,this}copyTo(i){return i.x=this.x,i.y=this.y,i.width=this.width,i.height=this.height,i}contains(i,t){return this.width<=0||this.height<=0?!1:i>=this.x&&i<this.x+this.width&&t>=this.y&&t<this.y+this.height}equals(i){return i?i.x===this.x&&i.y===this.y&&i.width===this.width&&i.height===this.height:!1}pad(i=0,t=i){return this.x-=i,this.y-=t,this.width+=i*2,this.height+=t*2,this}fit(i){const t=Math.max(this.x,i.x),r=Math.min(this.x+this.width,i.x+i.width),n=Math.max(this.y,i.y),s=Math.min(this.y+this.height,i.y+i.height);return this.x=t,this.width=Math.max(r-t,0),this.y=n,this.height=Math.max(s-n,0),this}ceil(i=1,t=.001){const r=Math.ceil((this.x+this.width-t)*i)/i,n=Math.ceil((this.y+this.height-t)*i)/i;return this.x=Math.floor((this.x+t)*i)/i,this.y=Math.floor((this.y+t)*i)/i,this.width=r-this.x,this.height=n-this.y,this}enlarge(i){const t=Math.min(this.x,i.x),r=Math.max(this.x+this.width,i.x+i.width),n=Math.min(this.y,i.y),s=Math.max(this.y+this.height,i.y+i.height);return this.x=t,this.width=r-t,this.y=n,this.height=s-n,this}}const pg=new M;class Js{constructor(i=0,t=0,r=0,n=0,s=0){i instanceof Ih&&(s=t||0,t=i.y,r=i.width,n=i.height,i=i.x),this.innerBounds=new Ih(i,t,r,n),this._rotation=s,this._center=new mr(this.updateCenter,this),this._hull=[new M,new M,new M,new M],this._matrix=new kt,this.currentID=-1,this.dirtyID=0}get rotation(){return this._rotation}set rotation(i){this._rotation=i,this.dirtyID++}get center(){return this.isDirty()&&this.update(),this._center}set center(i){this.center.copyFrom(i)}get hull(){return this.isDirty()&&this.update(),this._hull}get topLeft(){return this.isDirty()&&this.update(),this._hull[0]}get topRight(){return this.isDirty()&&this.update(),this._hull[1]}get bottomRight(){return this.isDirty()&&this.update(),this._hull[2]}get bottomLeft(){return this.isDirty()&&this.update(),this._hull[3]}equals(i){return i?this.innerBounds.equals(i.innerBounds)&&this.rotation===i.rotation:!1}contains(i,t){typeof i=="number"&&(i=pg.set(i,t));const r=this._matrix.applyInverse(i,pg);return this.innerBounds.contains(r.x,r.y)}copyFrom(i){return this.innerBounds.copyFrom(i.innerBounds),this.rotation=i.rotation,this.dirtyID++,this}isDirty(){return this.currentID!==this.dirtyID+this.innerBounds.dirtyID}update(){const i=this.innerBounds,t=this._rotation,r=this._center,[n,s,o,a]=this._hull,h=this._matrix;r._x=i.x+i.width/2,r._y=i.y+i.height/2,h.identity().translate(-r.x,-r.y).rotate(t).translate(r.x,r.y),h.apply(i.topLeft,n),h.apply(i.topRight,s),h.apply(i.bottomRight,o),h.apply(i.bottomLeft,a),this.currentID=this.dirtyID+this.innerBounds.dirtyID}updateCenter(){const i=this.center,t=this.innerBounds;t.x=i.x-t.width/2,t.y=i.y-t.height/2}}class gg{constructor(i,t){this._history=new Array(i),this._decayRatio=t,this._currentIndex=0;for(let r=0;r<i;r++)this._history[r]=0}next(i){const{_history:t,_decayRatio:r}=this,n=t.length;this._currentIndex=this._currentIndex<n-1?this._currentIndex+1:0,t[this._currentIndex]=i;let s=0,o=0;for(let a=this._currentIndex+1;a<n;a++)s=(s+t[a])*r,o=(o+1)*r;for(let a=0;a<=this._currentIndex;a++)s=(s+t[a])*r,o=(o+1)*r;return this._average=s/o,this._average}absDev(){let i=0;for(let t=0,r=this._history.length;t<r;t++)i+=Math.abs(this._history[t]-this._average);return i/this._history.length}}class Ch{constructor(i={}){Ch.prototype.__init.call(this),this._freeList=[],this._freeCount=0,this._borrowRate=0,this._returnRate=0,this._flowRate=0,this._borrowRateAverage=0,this._reserveCount=i.reserve||0,this._capacityRatio=i.capacityRatio||1.2,this._decayRatio=i.decayRatio||.67,this._marginAverage=0,this._borrowRateAverageProvider=new gg(128,this._decayRatio),this._marginAverageProvider=new gg(128,this._decayRatio)}get capacity(){return this._freeList.length}set capacity(i){this._freeList.length=Math.ceil(i)}allocate(){return++this._borrowRate,++this._flowRate,this._freeCount>0?this._freeList[--this._freeCount]:this.create()}allocateArray(i){let t,r;Array.isArray(i)?(t=i,r=i.length):(r=i,t=new Array(r)),this._borrowRate+=r,this._flowRate+=r;let n=0;if(this._freeCount>0){const s=this._freeList,o=Math.min(this._freeCount,r);let a=this._freeCount;for(let h=0;h<o;h++)t[n]=s[a-1],++n,--a;this._freeCount=a}for(;n<r;)t[n]=this.create(),++n;return t}release(i){++this._returnRate,--this._flowRate,this._freeCount===this.capacity&&(this.capacity*=this._capacityRatio),this._freeList[this._freeCount]=i,++this._freeCount}releaseArray(i){this._returnRate+=i.length,this._flowRate-=i.length,this._freeCount+i.length>this.capacity&&(this.capacity=Math.max(this.capacity*this._capacityRatio,this._freeCount+i.length));for(let t=0,r=i.length;t<r;t++)this._freeList[this._freeCount]=i[t],++this._freeCount}reserve(i){if(this._reserveCount=i,this._freeCount<i){const t=this._freeCount-i;for(let r=0;r<t;r++)this._freeList[this._freeCount]=this.create(),++this._freeCount}}limit(i){if(this._freeCount>i){this.capacity>i*this._capacityRatio&&(this.capacity=i*this._capacityRatio);const r=Math.min(this._freeCount,this.capacity);for(let n=i;n<r;n++)this._freeList[n]=null}}startGC(i=ye.shared){i.add(this._gcTick,null,zi.UTILITY)}stopGC(i=ye.shared){i.remove(this._gcTick)}__init(){this._gcTick=()=>{this._borrowRateAverage=this._borrowRateAverageProvider.next(this._borrowRate),this._marginAverage=this._marginAverageProvider.next(this._freeCount-this._borrowRate);const i=this._borrowRateAverageProvider.absDev();this._flowRate=0,this._borrowRate=0,this._returnRate=0;const t=this._freeCount,r=this._freeList.length;if(t<128&&this._borrowRateAverage<128&&r<128)return;const n=Math.max(this._borrowRateAverage*(this._capacityRatio-1),this._reserveCount);if(this._freeCount>n+i){const s=n+i;this.capacity=Math.min(this._freeList.length,Math.ceil(s)),this._freeCount=this._freeList.length}}}}var uu;const vg=new Map;class VI{static build(i){let t=vg.get(i);return t||(t=new class extends Ch{create(){return new i}},vg.set(i,t),t)}static buildFunctional(i){return new(uu=class extends Ch{constructor(...r){super(...r),uu.prototype.__init.call(this)}__init(){this.create=i}},uu)}}/*!
 * @pixi/graphics - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var si;(function(e){e.MITER="miter",e.BEVEL="bevel",e.ROUND="round"})(si||(si={}));var Me;(function(e){e.BUTT="butt",e.ROUND="round",e.SQUARE="square"})(Me||(Me={}));var xi={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e,i){if(i===void 0&&(i=20),!this.adaptive||!e||isNaN(e))return i;var t=Math.ceil(e/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}},Dl=function(){function e(){this.color=16777215,this.alpha=1,this.texture=Ot.WHITE,this.matrix=null,this.visible=!1,this.reset()}return e.prototype.clone=function(){var i=new e;return i.color=this.color,i.alpha=this.alpha,i.texture=this.texture,i.matrix=this.matrix,i.visible=this.visible,i},e.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Ot.WHITE,this.matrix=null,this.visible=!1},e.prototype.destroy=function(){this.texture=null,this.matrix=null},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Bc=function(e,i){return Bc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Bc(e,i)};function iA(e,i){Bc(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}function yg(e,i){var t,r;i===void 0&&(i=!1);var n=e.length;if(!(n<6)){for(var s=0,o=0,a=e[n-2],h=e[n-1];o<n;o+=2){var l=e[o],u=e[o+1];s+=(l-a)*(u+h),a=l,h=u}if(!i&&s>0||i&&s<=0)for(var c=n/2,o=c+c%2;o<n;o+=2){var f=n-o-2,d=n-o-1,A=o,p=o+1;t=[e[A],e[f]],e[f]=t[0],e[A]=t[1],r=[e[p],e[d]],e[d]=r[0],e[p]=r[1]}}}var rA={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,i){var t=e.points,r=e.holes,n=i.points,s=i.indices;if(t.length>=6){yg(t,!1);for(var o=[],a=0;a<r.length;a++){var h=r[a];yg(h.points,!0),o.push(t.length/2),t=t.concat(h.points)}var l=vs(t,o,2);if(!l)return;for(var u=n.length/2,a=0;a<l.length;a+=3)s.push(l[a]+u),s.push(l[a+1]+u),s.push(l[a+2]+u);for(var a=0;a<t.length;a++)n.push(t[a])}}},xo={build:function(e){var i=e.points,t,r,n,s,o,a;if(e.type===ne.CIRC){var h=e.shape;t=h.x,r=h.y,o=a=h.radius,n=s=0}else if(e.type===ne.ELIP){var l=e.shape;t=l.x,r=l.y,o=l.width,a=l.height,n=s=0}else{var u=e.shape,c=u.width/2,f=u.height/2;t=u.x+c,r=u.y+f,o=a=Math.max(0,Math.min(u.radius,Math.min(c,f))),n=c-o,s=f-a}if(!(o>=0&&a>=0&&n>=0&&s>=0)){i.length=0;return}var d=Math.ceil(2.3*Math.sqrt(o+a)),A=d*8+(n?4:0)+(s?4:0);if(i.length=A,A!==0){if(d===0){i.length=8,i[0]=i[6]=t+n,i[1]=i[3]=r+s,i[2]=i[4]=t-n,i[5]=i[7]=r-s;return}var p=0,g=d*4+(n?2:0)+2,y=g,I=A;{var E=n+o,w=s,T=t+E,_=t-E,F=r+w;if(i[p++]=T,i[p++]=F,i[--g]=F,i[--g]=_,s){var R=r-w;i[y++]=_,i[y++]=R,i[--I]=R,i[--I]=T}}for(var S=1;S<d;S++){var D=Math.PI/2*(S/d),E=n+Math.cos(D)*o,w=s+Math.sin(D)*a,T=t+E,_=t-E,F=r+w,R=r-w;i[p++]=T,i[p++]=F,i[--g]=F,i[--g]=_,i[y++]=_,i[y++]=R,i[--I]=R,i[--I]=T}{var E=n,w=s+a,T=t+E,_=t-E,F=r+w,R=r-w;i[p++]=T,i[p++]=F,i[--I]=R,i[--I]=T,n&&(i[p++]=_,i[p++]=F,i[--I]=R,i[--I]=_)}}},triangulate:function(e,i){var t=e.points,r=i.points,n=i.indices;if(t.length!==0){var s=r.length/2,o=s,a,h;if(e.type!==ne.RREC){var l=e.shape;a=l.x,h=l.y}else{var u=e.shape;a=u.x+u.width/2,h=u.y+u.height/2}var c=e.matrix;r.push(e.matrix?c.a*a+c.c*h+c.tx:a,e.matrix?c.b*a+c.d*h+c.ty:h),s++,r.push(t[0],t[1]);for(var f=2;f<t.length;f+=2)r.push(t[f],t[f+1]),n.push(s++,o,s);n.push(o+1,o,s)}}},zI={build:function(e){var i=e.shape,t=i.x,r=i.y,n=i.width,s=i.height,o=e.points;o.length=0,o.push(t,r,t+n,r,t+n,r+s,t,r+s)},triangulate:function(e,i){var t=e.points,r=i.points,n=r.length/2;r.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),i.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function Un(e,i,t){var r=i-e;return e+r*t}function Sa(e,i,t,r,n,s,o){o===void 0&&(o=[]);for(var a=20,h=o,l=0,u=0,c=0,f=0,d=0,A=0,p=0,g=0;p<=a;++p)g=p/a,l=Un(e,t,g),u=Un(i,r,g),c=Un(t,n,g),f=Un(r,s,g),d=Un(l,c,g),A=Un(u,f,g),!(p===0&&h[h.length-2]===d&&h[h.length-1]===A)&&h.push(d,A);return h}var WI={build:function(e){if(Kt.nextRoundedRectBehavior){xo.build(e);return}var i=e.shape,t=e.points,r=i.x,n=i.y,s=i.width,o=i.height,a=Math.max(0,Math.min(i.radius,Math.min(s,o)/2));t.length=0,a?(Sa(r,n+a,r,n,r+a,n,t),Sa(r+s-a,n,r+s,n,r+s,n+a,t),Sa(r+s,n+o-a,r+s,n+o,r+s-a,n+o,t),Sa(r+a,n+o,r,n+o,r,n+o-a,t)):t.push(r,n,r+s,n,r+s,n+o,r,n+o)},triangulate:function(e,i){if(Kt.nextRoundedRectBehavior){xo.triangulate(e,i);return}for(var t=e.points,r=i.points,n=i.indices,s=r.length/2,o=vs(t,null,2),a=0,h=o.length;a<h;a+=3)n.push(o[a]+s),n.push(o[a+1]+s),n.push(o[a+2]+s);for(var a=0,h=t.length;a<h;a++)r.push(t[a],t[++a])}};function mg(e,i,t,r,n,s,o,a){var h=e-t*n,l=i-r*n,u=e+t*s,c=i+r*s,f,d;o?(f=r,d=-t):(f=-r,d=t);var A=h+f,p=l+d,g=u+f,y=c+d;return a.push(A,p),a.push(g,y),2}function Gn(e,i,t,r,n,s,o,a){var h=t-e,l=r-i,u=Math.atan2(h,l),c=Math.atan2(n-e,s-i);a&&u<c?u+=Math.PI*2:!a&&u>c&&(c+=Math.PI*2);var f=u,d=c-u,A=Math.abs(d),p=Math.sqrt(h*h+l*l),g=(15*A*Math.sqrt(p)/Math.PI>>0)+1,y=d/g;if(f+=y,a){o.push(e,i),o.push(t,r);for(var I=1,E=f;I<g;I++,E+=y)o.push(e,i),o.push(e+Math.sin(E)*p,i+Math.cos(E)*p);o.push(e,i),o.push(n,s)}else{o.push(t,r),o.push(e,i);for(var I=1,E=f;I<g;I++,E+=y)o.push(e+Math.sin(E)*p,i+Math.cos(E)*p),o.push(e,i);o.push(n,s),o.push(e,i)}return g*2}function nD(e,i){var t=e.shape,r=e.points||t.points.slice(),n=i.closePointEps;if(r.length!==0){var s=e.lineStyle,o=new M(r[0],r[1]),a=new M(r[r.length-2],r[r.length-1]),h=t.type!==ne.POLY||t.closeStroke,l=Math.abs(o.x-a.x)<n&&Math.abs(o.y-a.y)<n;if(h){r=r.slice(),l&&(r.pop(),r.pop(),a.set(r[r.length-2],r[r.length-1]));var u=(o.x+a.x)*.5,c=(a.y+o.y)*.5;r.unshift(u,c),r.push(u,c)}var f=i.points,d=r.length/2,A=r.length,p=f.length/2,g=s.width/2,y=g*g,I=s.miterLimit*s.miterLimit,E=r[0],w=r[1],T=r[2],_=r[3],F=0,R=0,S=-(w-_),D=E-T,$=0,z=0,q=Math.sqrt(S*S+D*D);S/=q,D/=q,S*=g,D*=g;var _t=s.alignment,V=(1-_t)*2,X=_t*2;h||(s.cap===Me.ROUND?A+=Gn(E-S*(V-X)*.5,w-D*(V-X)*.5,E-S*V,w-D*V,E+S*X,w+D*X,f,!0)+2:s.cap===Me.SQUARE&&(A+=mg(E,w,S,D,V,X,!0,f))),f.push(E-S*V,w-D*V),f.push(E+S*X,w+D*X);for(var et=1;et<d-1;++et){E=r[(et-1)*2],w=r[(et-1)*2+1],T=r[et*2],_=r[et*2+1],F=r[(et+1)*2],R=r[(et+1)*2+1],S=-(w-_),D=E-T,q=Math.sqrt(S*S+D*D),S/=q,D/=q,S*=g,D*=g,$=-(_-R),z=T-F,q=Math.sqrt($*$+z*z),$/=q,z/=q,$*=g,z*=g;var At=T-E,Z=w-_,N=T-F,W=R-_,it=Z*N-W*At,ot=it<0;if(Math.abs(it)<.1){f.push(T-S*V,_-D*V),f.push(T+S*X,_+D*X);continue}var dt=(-S+E)*(-D+_)-(-S+T)*(-D+w),Ct=(-$+F)*(-z+_)-(-$+T)*(-z+R),gt=(At*Ct-N*dt)/it,Pt=(W*dt-Z*Ct)/it,jt=(gt-T)*(gt-T)+(Pt-_)*(Pt-_),Xt=T+(gt-T)*V,zt=_+(Pt-_)*V,pt=T-(gt-T)*X,Lt=_-(Pt-_)*X,Et=Math.min(At*At+Z*Z,N*N+W*W),U=ot?V:X,H=Et+U*U*y,L=jt<=H;L?s.join===si.BEVEL||jt/y>I?(ot?(f.push(Xt,zt),f.push(T+S*X,_+D*X),f.push(Xt,zt),f.push(T+$*X,_+z*X)):(f.push(T-S*V,_-D*V),f.push(pt,Lt),f.push(T-$*V,_-z*V),f.push(pt,Lt)),A+=2):s.join===si.ROUND?ot?(f.push(Xt,zt),f.push(T+S*X,_+D*X),A+=Gn(T,_,T+S*X,_+D*X,T+$*X,_+z*X,f,!0)+4,f.push(Xt,zt),f.push(T+$*X,_+z*X)):(f.push(T-S*V,_-D*V),f.push(pt,Lt),A+=Gn(T,_,T-S*V,_-D*V,T-$*V,_-z*V,f,!1)+4,f.push(T-$*V,_-z*V),f.push(pt,Lt)):(f.push(Xt,zt),f.push(pt,Lt)):(f.push(T-S*V,_-D*V),f.push(T+S*X,_+D*X),s.join===si.ROUND?ot?A+=Gn(T,_,T+S*X,_+D*X,T+$*X,_+z*X,f,!0)+2:A+=Gn(T,_,T-S*V,_-D*V,T-$*V,_-z*V,f,!1)+2:s.join===si.MITER&&jt/y<=I&&(ot?(f.push(pt,Lt),f.push(pt,Lt)):(f.push(Xt,zt),f.push(Xt,zt)),A+=2),f.push(T-$*V,_-z*V),f.push(T+$*X,_+z*X),A+=2)}E=r[(d-2)*2],w=r[(d-2)*2+1],T=r[(d-1)*2],_=r[(d-1)*2+1],S=-(w-_),D=E-T,q=Math.sqrt(S*S+D*D),S/=q,D/=q,S*=g,D*=g,f.push(T-S*V,_-D*V),f.push(T+S*X,_+D*X),h||(s.cap===Me.ROUND?A+=Gn(T-S*(V-X)*.5,_-D*(V-X)*.5,T-S*V,_-D*V,T+S*X,_+D*X,f,!1)+2:s.cap===Me.SQUARE&&(A+=mg(T,_,S,D,V,X,!1,f)));for(var G=i.indices,K=xi.epsilon*xi.epsilon,et=p;et<A+p-2;++et)E=f[et*2],w=f[et*2+1],T=f[(et+1)*2],_=f[(et+1)*2+1],F=f[(et+2)*2],R=f[(et+2)*2+1],!(Math.abs(E*(_-R)+T*(R-w)+F*(w-_))<K)&&G.push(et,et+1,et+2)}}function sD(e,i){var t=0,r=e.shape,n=e.points||r.points,s=r.type!==ne.POLY||r.closeStroke;if(n.length!==0){var o=i.points,a=i.indices,h=n.length/2,l=o.length/2,u=l;for(o.push(n[0],n[1]),t=1;t<h;t++)o.push(n[t*2],n[t*2+1]),a.push(u,u+1),u++;s&&a.push(u,l)}}function Rc(e,i){e.lineStyle.native?sD(e,i):nD(e,i)}var Pc=function(){function e(){}return e.curveTo=function(i,t,r,n,s,o){var a=o[o.length-2],h=o[o.length-1],l=h-t,u=a-i,c=n-t,f=r-i,d=Math.abs(l*f-u*c);if(d<1e-8||s===0)return(o[o.length-2]!==i||o[o.length-1]!==t)&&o.push(i,t),null;var A=l*l+u*u,p=c*c+f*f,g=l*c+u*f,y=s*Math.sqrt(A)/d,I=s*Math.sqrt(p)/d,E=y*g/A,w=I*g/p,T=y*f+I*u,_=y*c+I*l,F=u*(I+E),R=l*(I+E),S=f*(y+w),D=c*(y+w),$=Math.atan2(R-_,F-T),z=Math.atan2(D-_,S-T);return{cx:T+i,cy:_+t,radius:s,startAngle:$,endAngle:z,anticlockwise:u*c>f*l}},e.arc=function(i,t,r,n,s,o,a,h,l){for(var u=a-o,c=xi._segmentsCount(Math.abs(u)*s,Math.ceil(Math.abs(u)/co)*40),f=u/(c*2),d=f*2,A=Math.cos(f),p=Math.sin(f),g=c-1,y=g%1/g,I=0;I<=g;++I){var E=I+y*I,w=f+o+d*E,T=Math.cos(w),_=-Math.sin(w);l.push((A*T+p*_)*s+r,(A*-_+p*T)*s+n)}},e}(),jI=function(){function e(){}return e.curveLength=function(i,t,r,n,s,o,a,h){for(var l=10,u=0,c=0,f=0,d=0,A=0,p=0,g=0,y=0,I=0,E=0,w=0,T=i,_=t,F=1;F<=l;++F)c=F/l,f=c*c,d=f*c,A=1-c,p=A*A,g=p*A,y=g*i+3*p*c*r+3*A*f*s+d*a,I=g*t+3*p*c*n+3*A*f*o+d*h,E=T-y,w=_-I,T=y,_=I,u+=Math.sqrt(E*E+w*w);return u},e.curveTo=function(i,t,r,n,s,o,a){var h=a[a.length-2],l=a[a.length-1];a.length-=2;var u=xi._segmentsCount(e.curveLength(h,l,i,t,r,n,s,o)),c=0,f=0,d=0,A=0,p=0;a.push(h,l);for(var g=1,y=0;g<=u;++g)y=g/u,c=1-y,f=c*c,d=f*c,A=y*y,p=A*y,a.push(d*h+3*f*y*i+3*c*A*r+p*s,d*l+3*f*y*t+3*c*A*n+p*o)},e}(),KI=function(){function e(){}return e.curveLength=function(i,t,r,n,s,o){var a=i-2*r+s,h=t-2*n+o,l=2*r-2*i,u=2*n-2*t,c=4*(a*a+h*h),f=4*(a*l+h*u),d=l*l+u*u,A=2*Math.sqrt(c+f+d),p=Math.sqrt(c),g=2*c*p,y=2*Math.sqrt(d),I=f/p;return(g*A+p*f*(A-y)+(4*d*c-f*f)*Math.log((2*p+I+A)/(I+y)))/(4*g)},e.curveTo=function(i,t,r,n,s){for(var o=s[s.length-2],a=s[s.length-1],h=xi._segmentsCount(e.curveLength(o,a,i,t,r,n)),l=0,u=0,c=1;c<=h;++c){var f=c/h;l=o+(i-o)*f,u=a+(t-a)*f,s.push(l+(i+(r-i)*f-l)*f,u+(t+(n-t)*f-u)*f)}},e}(),$I=function(){function e(){this.reset()}return e.prototype.begin=function(i,t,r){this.reset(),this.style=i,this.start=t,this.attribStart=r},e.prototype.end=function(i,t){this.attribSize=t-this.attribStart,this.size=i-this.start},e.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},e}(),$r,eh=($r={},$r[ne.POLY]=rA,$r[ne.CIRC]=xo,$r[ne.ELIP]=xo,$r[ne.RECT]=zI,$r[ne.RREC]=WI,$r),Sc=[],Xs=[],Nc=function(){function e(i,t,r,n){t===void 0&&(t=null),r===void 0&&(r=null),n===void 0&&(n=null),this.points=[],this.holes=[],this.shape=i,this.lineStyle=r,this.fillStyle=t,this.matrix=n,this.type=i.type}return e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)},e.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},e}(),kn=new M,Fl=function(e){iA(i,e);function i(){var t=e.call(this)||this;return t.closePointEps=1e-4,t.boundsPadding=0,t.uvsFloat32=null,t.indicesUint16=null,t.batchable=!1,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.drawCalls=[],t.batchDirty=-1,t.batches=[],t.dirty=0,t.cacheDirty=-1,t.clearDirty=0,t.shapeIndex=0,t._bounds=new _i,t.boundsDirty=-1,t}return Object.defineProperty(i.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),i.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Xs.push(this.drawCalls[t]);this.drawCalls.length=0;for(var t=0;t<this.batches.length;t++){var r=this.batches[t];r.reset(),Sc.push(r)}this.batches.length=0},i.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},i.prototype.drawShape=function(t,r,n,s){r===void 0&&(r=null),n===void 0&&(n=null),s===void 0&&(s=null);var o=new Nc(t,r,n,s);return this.graphicsData.push(o),this.dirty++,this},i.prototype.drawHole=function(t,r){if(r===void 0&&(r=null),!this.graphicsData.length)return null;var n=new Nc(t,null,null,r),s=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=s.lineStyle,s.holes.push(n),this.dirty++,this},i.prototype.destroy=function(){e.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},i.prototype.containsPoint=function(t){for(var r=this.graphicsData,n=0;n<r.length;++n){var s=r[n];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(t,kn):kn.copyFrom(t),s.shape.contains(kn.x,kn.y))){var o=!1;if(s.holes)for(var a=0;a<s.holes.length;a++){var h=s.holes[a];if(h.shape.contains(kn.x,kn.y)){o=!0;break}}if(!o)return!0}}return!1},i.prototype.updateBatches=function(){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,r=this.graphicsData,n=null,s=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],s=n.style);for(var o=this.shapeIndex;o<r.length;o++){this.shapeIndex++;var a=r[o],h=a.fillStyle,l=a.lineStyle,u=eh[a.type];u.build(a),a.matrix&&this.transformPoints(a.points,a.matrix),(h.visible||l.visible)&&this.processHoles(a.holes);for(var c=0;c<2;c++){var f=c===0?h:l;if(f.visible){var d=f.texture.baseTexture,A=this.indices.length,p=this.points.length/2;d.wrapMode=rr.REPEAT,c===0?this.processFill(a):this.processLine(a);var g=this.points.length/2-p;g!==0&&(n&&!this._compareStyles(s,f)&&(n.end(A,p),n=null),n||(n=Sc.pop()||new $I,n.begin(f,A,p),this.batches.push(n),s=f),this.addUvs(this.points,t,f.texture,p,g,f.matrix))}}}var y=this.indices.length,I=this.points.length/2;if(n&&n.end(y,I),this.batches.length===0){this.batchable=!0;return}var E=I>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&E===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=E?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},i.prototype._compareStyles=function(t,r){return!(!t||!r||t.texture.baseTexture!==r.texture.baseTexture||t.color+t.alpha!==r.color+r.alpha||!!t.native!=!!r.native)},i.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,r=this.graphicsData.length;t<r;t++){var n=this.graphicsData[t],s=n.fillStyle,o=n.lineStyle;if(s&&!s.texture.baseTexture.valid||o&&!o.texture.baseTexture.valid)return!1}return!0},i.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,r=0,n=t.length;r<n;r++)for(var s=t[r],o=0;o<s.size;o++){var a=s.start+o;this.indicesUint16[a]=this.indicesUint16[a]-s.attribStart}},i.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var t=this.batches,r=0;r<t.length;r++)if(t[r].style.native)return!1;return this.points.length<i.BATCHABLE_SIZE*2},i.prototype.buildDrawCalls=function(){for(var t=++Wt._globalBatch,r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),Xs.push(this.drawCalls[r]);this.drawCalls.length=0;var n=this.colors,s=this.textureIds,o=Xs.pop();o||(o=new vh,o.texArray=new yh),o.texArray.count=0,o.start=0,o.size=0,o.type=pi.TRIANGLES;var a=0,h=null,l=0,u=!1,c=pi.TRIANGLES,f=0;this.drawCalls.push(o);for(var r=0;r<this.batches.length;r++){var d=this.batches[r],A=8,p=d.style,g=p.texture.baseTexture;u!==!!p.native&&(u=!!p.native,c=u?pi.LINES:pi.TRIANGLES,h=null,a=A,t++),h!==g&&(h=g,g._batchEnabled!==t&&(a===A&&(t++,a=0,o.size>0&&(o=Xs.pop(),o||(o=new vh,o.texArray=new yh),this.drawCalls.push(o)),o.start=f,o.size=0,o.texArray.count=0,o.type=c),g.touched=1,g._batchEnabled=t,g._batchLocation=a,g.wrapMode=rr.REPEAT,o.texArray.elements[o.texArray.count++]=g,a++)),o.size+=d.size,f+=d.size,l=g._batchLocation,this.addColors(n,p.color,p.alpha,d.attribSize,d.attribStart),this.addTextureIds(s,l,d.attribSize,d.attribStart)}Wt._globalBatch=t,this.packAttributes()},i.prototype.packAttributes=function(){for(var t=this.points,r=this.uvs,n=this.colors,s=this.textureIds,o=new ArrayBuffer(t.length*3*4),a=new Float32Array(o),h=new Uint32Array(o),l=0,u=0;u<t.length/2;u++)a[l++]=t[u*2],a[l++]=t[u*2+1],a[l++]=r[u*2],a[l++]=r[u*2+1],h[l++]=n[u],a[l++]=s[u];this._buffer.update(o),this._indexBuffer.update(this.indicesUint16)},i.prototype.processFill=function(t){if(t.holes.length)rA.triangulate(t,this);else{var r=eh[t.type];r.triangulate(t,this)}},i.prototype.processLine=function(t){Rc(t,this);for(var r=0;r<t.holes.length;r++)Rc(t.holes[r],this)},i.prototype.processHoles=function(t){for(var r=0;r<t.length;r++){var n=t[r],s=eh[n.type];s.build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},i.prototype.calculateBounds=function(){var t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)},i.prototype.transformPoints=function(t,r){for(var n=0;n<t.length/2;n++){var s=t[n*2],o=t[n*2+1];t[n*2]=r.a*s+r.c*o+r.tx,t[n*2+1]=r.b*s+r.d*o+r.ty}},i.prototype.addColors=function(t,r,n,s,o){o===void 0&&(o=0);var a=(r>>16)+(r&65280)+((r&255)<<16),h=Bl(a,n);t.length=Math.max(t.length,o+s);for(var l=0;l<s;l++)t[o+l]=h},i.prototype.addTextureIds=function(t,r,n,s){s===void 0&&(s=0),t.length=Math.max(t.length,s+n);for(var o=0;o<n;o++)t[s+o]=r},i.prototype.addUvs=function(t,r,n,s,o,a){a===void 0&&(a=null);for(var h=0,l=r.length,u=n.frame;h<o;){var c=t[(s+h)*2],f=t[(s+h)*2+1];if(a){var d=a.a*c+a.c*f+a.tx;f=a.b*c+a.d*f+a.ty,c=d}h++,r.push(c/u.width,f/u.height)}var A=n.baseTexture;(u.width<A.width||u.height<A.height)&&this.adjustUvs(r,n,l,o)},i.prototype.adjustUvs=function(t,r,n,s){for(var o=r.baseTexture,a=1e-6,h=n+s*2,l=r.frame,u=l.width/o.width,c=l.height/o.height,f=l.x/l.width,d=l.y/l.height,A=Math.floor(t[n]+a),p=Math.floor(t[n+1]+a),g=n+2;g<h;g+=2)A=Math.min(A,Math.floor(t[g]+a)),p=Math.min(p,Math.floor(t[g+1]+a));f-=A,d-=p;for(var g=n;g<h;g+=2)t[g]=(t[g]+f)*u,t[g+1]=(t[g+1]+d)*c},i.BATCHABLE_SIZE=100,i}(qd),Ll=function(e){iA(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=Me.BUTT,t.join=si.MITER,t.miterLimit=10,t}return i.prototype.clone=function(){var t=new i;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},i.prototype.reset=function(){e.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},i}(Dl),oD=new Float32Array(3),cu={},Kt=function(e){iA(i,e);function i(t){t===void 0&&(t=null);var r=e.call(this)||this;return r.shader=null,r.pluginName="batch",r.currentPath=null,r.batches=[],r.batchTint=-1,r.batchDirty=-1,r.vertexData=null,r._fillStyle=new Dl,r._lineStyle=new Ll,r._matrix=null,r._holeMode=!1,r.state=Xr.for2d(),r._geometry=t||new Fl,r._geometry.refCount++,r._transformID=-1,r.tint=16777215,r.blendMode=Nt.NORMAL,r}return Object.defineProperty(i.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),i.prototype.clone=function(){return this.finishPoly(),new i(this._geometry)},Object.defineProperty(i.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),i.prototype.lineStyle=function(t,r,n,s,o){return t===void 0&&(t=null),r===void 0&&(r=0),n===void 0&&(n=1),s===void 0&&(s=.5),o===void 0&&(o=!1),typeof t=="number"&&(t={width:t,color:r,alpha:n,alignment:s,native:o}),this.lineTextureStyle(t)},i.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:Ot.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Me.BUTT,join:si.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var r=t.width>0&&t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:r},t)):this._lineStyle.reset(),this},i.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new Lr,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[r-2],t[r-1]))}else this.currentPath=new Lr,this.currentPath.closeStroke=!1},i.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},i.prototype.moveTo=function(t,r){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=r,this},i.prototype.lineTo=function(t,r){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,s=n[n.length-2],o=n[n.length-1];return(s!==t||o!==r)&&n.push(t,r),this},i.prototype._initCurve=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,r]):this.moveTo(t,r)},i.prototype.quadraticCurveTo=function(t,r,n,s){this._initCurve();var o=this.currentPath.points;return o.length===0&&this.moveTo(0,0),KI.curveTo(t,r,n,s,o),this},i.prototype.bezierCurveTo=function(t,r,n,s,o,a){return this._initCurve(),jI.curveTo(t,r,n,s,o,a,this.currentPath.points),this},i.prototype.arcTo=function(t,r,n,s,o){this._initCurve(t,r);var a=this.currentPath.points,h=Pc.curveTo(t,r,n,s,o,a);if(h){var l=h.cx,u=h.cy,c=h.radius,f=h.startAngle,d=h.endAngle,A=h.anticlockwise;this.arc(l,u,c,f,d,A)}return this},i.prototype.arc=function(t,r,n,s,o,a){if(a===void 0&&(a=!1),s===o)return this;!a&&o<=s?o+=co:a&&s<=o&&(s+=co);var h=o-s;if(h===0)return this;var l=t+Math.cos(s)*n,u=r+Math.sin(s)*n,c=this._geometry.closePointEps,f=this.currentPath?this.currentPath.points:null;if(f){var d=Math.abs(f[f.length-2]-l),A=Math.abs(f[f.length-1]-u);d<c&&A<c||f.push(l,u)}else this.moveTo(l,u),f=this.currentPath.points;return Pc.arc(l,u,t,r,n,s,o,a,f),this},i.prototype.beginFill=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=1),this.beginTextureFill({texture:Ot.WHITE,color:t,alpha:r})},i.prototype.beginTextureFill=function(t){t=Object.assign({texture:Ot.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var r=t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:r},t)):this._fillStyle.reset(),this},i.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},i.prototype.drawRect=function(t,r,n,s){return this.drawShape(new Tt(t,r,n,s))},i.prototype.drawRoundedRect=function(t,r,n,s,o){return this.drawShape(new Zm(t,r,n,s,o))},i.prototype.drawCircle=function(t,r,n){return this.drawShape(new Jm(t,r,n))},i.prototype.drawEllipse=function(t,r,n,s){return this.drawShape(new qm(t,r,n,s))},i.prototype.drawPolygon=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];var s,o=!0,a=r[0];a.points?(o=a.closeStroke,s=a.points):Array.isArray(r[0])?s=r[0]:s=r;var h=new Lr(s);return h.closeStroke=o,this.drawShape(h),this},i.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},i.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},i.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===ne.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},i.prototype._render=function(t){this.finishPoly();var r=this._geometry;r.updateBatches(),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},i.prototype._populateBatches=function(){var t=this._geometry,r=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(var s=0;s<n;s++){var o=t.batches[s],a=o.style.color,h=new Float32Array(this.vertexData.buffer,o.attribStart*4*2,o.attribSize*2),l=new Float32Array(t.uvsFloat32.buffer,o.attribStart*4*2,o.attribSize*2),u=new Uint16Array(t.indicesUint16.buffer,o.start*2,o.size),c={vertexData:h,blendMode:r,indices:u,uvs:l,_batchRGB:Re(a),_tintRGB:a,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[s]=c}},i.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var r=0,n=this.batches.length;r<n;r++){var s=this.batches[r];s.worldAlpha=this.worldAlpha*s.alpha,t.plugins[this.pluginName].render(s)}}},i.prototype._renderDirect=function(t){var r=this._resolveDirectShader(t),n=this._geometry,s=this.tint,o=this.worldAlpha,a=r.uniforms,h=n.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(s>>16&255)/255*o,a.tint[1]=(s>>8&255)/255*o,a.tint[2]=(s&255)/255*o,a.tint[3]=o,t.shader.bind(r),t.geometry.bind(n,r),t.state.set(this.state);for(var l=0,u=h.length;l<u;l++)this._renderDrawCallDirect(t,n.drawCalls[l])},i.prototype._renderDrawCallDirect=function(t,r){for(var n=r.texArray,s=r.type,o=r.size,a=r.start,h=n.count,l=0;l<h;l++)t.texture.bind(n.elements[l],l);t.geometry.draw(s,o,a)},i.prototype._resolveDirectShader=function(t){var r=this.shader,n=this.pluginName;if(!r){if(!cu[n]){for(var s=t.plugins[n].MAX_TEXTURES,o=new Int32Array(s),a=0;a<s;a++)o[a]=a;var h={tint:new Float32Array([1,1,1,1]),translationMatrix:new kt,default:Qr.from({uSamplers:o},!0)},l=t.plugins[n]._shader.program;cu[n]=new Cr(l,h)}r=cu[n]}return r},i.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var r=t.bounds,n=r.minX,s=r.minY,o=r.maxX,a=r.maxY;this._bounds.addFrame(this.transform,n,s,o,a)}},i.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,i._TEMP_POINT),this._geometry.containsPoint(i._TEMP_POINT)},i.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Re(this.tint,oD),r=0;r<this.batches.length;r++){var n=this.batches[r],s=n._batchRGB,o=t[0]*s[0]*255,a=t[1]*s[1]*255,h=t[2]*s[2]*255,l=(o<<16)+(a<<8)+(h|0);n._tintRGB=(l>>16)+(l&65280)+((l&255)<<16)}}},i.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var r=this.transform.worldTransform,n=r.a,s=r.b,o=r.c,a=r.d,h=r.tx,l=r.ty,u=this._geometry.points,c=this.vertexData,f=0,d=0;d<u.length;d+=2){var A=u[d],p=u[d+1];c[f++]=n*A+o*p+h,c[f++]=a*p+s*A+l}}},i.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},i.prototype.setMatrix=function(t){return this._matrix=t,this},i.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},i.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},i.prototype.destroy=function(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,e.prototype.destroy.call(this,t)},i.nextRoundedRectBehavior=!1,i._TEMP_POINT=new M,i}($t),nA={buildPoly:rA,buildCircle:xo,buildRectangle:zI,buildRoundedRectangle:WI,buildLine:Rc,ArcUtils:Pc,BezierUtils:jI,QuadraticUtils:KI,BatchPart:$I,FILL_COMMANDS:eh,BATCH_POOL:Sc,DRAW_CALL_POOL:Xs};function Ig(e){const{data:{originalEvent:i}}=e;let t=!0;if(i instanceof TouchEvent){const{touches:r,type:n}=i;n!=="touchend"?r.length!==1&&(t=!1):r.length!==0&&(t=!1)}return t}const Cg={color:16777215,outlineColor:0,outlineThickness:1,radius:8,shape:"tooth"};class aD extends Kt{constructor(t,r,n={},s,o,a){super();x(this,"transformer");x(this,"onHandleDelta");x(this,"onHandleCommit");x(this,"_handle");x(this,"_style");x(this,"_dirty");x(this,"_pointerDown");x(this,"_pointerDragging");x(this,"_pointerPosition");x(this,"_pointerMoveTarget");this.transformer=t;const h=Object.assign({},Cg,n);this._handle=r,this._style=h,this.onHandleDelta=s,this.onHandleCommit=o,this._dirty=!0,this.interactive=!0,this.cursor=a||"move",this._pointerDown=!1,this._pointerDragging=!1,this._pointerPosition=new M,this._pointerMoveTarget=null,this.on("pointerdown",l=>this.onPointerDown(l,this._handle)),this.on("pointerup",this.onPointerUp,this),this.on("pointerupoutside",this.onPointerUp,this)}get handle(){return this._handle}set handle(t){this._handle=t,this._dirty=!0}get style(){return this._style}set style(t){this._style=Object.assign({},Cg,t),this._dirty=!0}render(t){this._dirty&&(this.draw(),this._dirty=!1),super.render(t)}draw(){var o;const t=this._handle,r=this._style,n=r.radius;if(this.removeChildren(),this.clear().lineStyle(r.outlineThickness,r.outlineColor).beginFill(r.color),r.shape==="square")this.drawRect(-n/2,-n/2,n,n);else if(r.shape==="component")switch(t){case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"rotator":const a=(o=this._style)==null?void 0:o.shapeAttrs[t].component;a&&this.addChild(a);break}else if(r.shape==="tooth")switch(t){case"middleLeft":this.drawPolygon([-n/2,-n/2,-n/2,n/2,n/2,n/2,n*1.1,0,n/2,-n/2]);break;case"topCenter":this.drawPolygon([-n/2,-n/2,n/2,-n/2,n/2,n/2,0,n*1.1,-n/2,n/2]);break;case"middleRight":this.drawPolygon([-n/2,n/2,-n*1.1,0,-n/2,-n/2,n/2,-n/2,n/2,n/2]);break;case"bottomCenter":this.drawPolygon([0,-n*1.1,n/2,-n/2,n/2,n/2,-n/2,n/2,-n/2,-n/2]);break;case"rotator":this.drawCircle(0,0,n/Math.sqrt(2));break;default:this.drawRect(-n/2,-n/2,n,n);break}else this.drawCircle(0,0,n);const{style:{hitAreaPadding:s}}=this;if(s){const{x:a,y:h,width:l,height:u}=this.getLocalBounds();l>0&&u>0&&(this.hitArea=new Tt(a-s,h-s,l+s*2,u+s*2))}this.endFill()}onPointerDown(t,r){var n,s,o;Ig(t)&&(this._pointerDown=!0,this._pointerDragging=!1,t.stopPropagation(),!((n=this._style)!=null&&n.shapeAttrs&&((o=(s=this._style)==null?void 0:s.shapeAttrs[r])!=null&&o.stopEvent))&&(this._pointerMoveTarget&&(this._pointerMoveTarget.off("pointermove",this.onPointerMove,this),this._pointerMoveTarget=null),this._pointerMoveTarget=this.transformer.stage||this,this._pointerMoveTarget.on("pointermove",this.onPointerMove,this)))}onPointerMove(t){Ig(t)&&this._pointerDown&&(this._pointerDragging?this.onDrag(t):this.onDragStart(t),t.stopPropagation())}onPointerUp(){this.reset()}reset(){this._pointerDown=!1,this._pointerDragging&&this.onDragEnd(),this._pointerMoveTarget&&(this._pointerMoveTarget.off("pointermove",this.onPointerMove,this),this._pointerMoveTarget=null)}onDragStart(t){this._pointerPosition.copyFrom(t.data.global),this._pointerDragging=!0}onDrag(t){const r=t.data.global;this.onHandleDelta&&this.onHandleDelta(r),this._pointerPosition.copyFrom(r)}onDragEnd(){this._pointerDragging=!1,this.onHandleCommit&&this.onHandleCommit()}}function Na(e,i,t,r){const{x:n,y:s}=t,{x:o,y:a}=r;if(Math.abs(o-n)<.01)return Math.abs(e-n);if(Math.abs(a-s)<.01)return Math.abs(i-s);const h=(a-s)/(o-n);return Math.abs((h*e-i+(a-h*o))/Math.sqrt(h*h+1))}const _g=VI.build(M),hD=[new M,new M,new M,new M],lD=new kt,Hn=new M,uD=[0,0,0,1,-1,1,-1,-1,1,-1,1,0],cD=[0,0,-1,0,-1,-1,1,-1,1,1,0,1],fD=[0,0,1,0,1,1,-1,1,-1,-1,0,-1],dD=[0,0,0,-1,1,-1,1,1,-1,1,-1,0],fu=new Array(12),AD=[uD,cD,fD,dD];class pD extends Kt{constructor(t){super();x(this,"transformer");x(this,"boxScalingHandles");this.transformer=t,this.boxScalingHandles=[this.addChild(new Kt),this.addChild(new Kt),this.addChild(new Kt),this.addChild(new Kt)],this.boxScalingHandles.forEach(r=>{r.interactive=!0}),this.boxScalingHandles[0].cursor=Ys.topCenter,this.boxScalingHandles[1].cursor=Ys.middleRight,this.boxScalingHandles[2].cursor=Ys.bottomCenter,this.boxScalingHandles[3].cursor=Ys.middleLeft}hitHandleType(t,r,n){const{boxRotationEnabled:s,boxRotationTolerance:o,boxScalingEnabled:a,boxScalingTolerance:h}=this.transformer,[l,u,c,f]=t.hull,{x:d,y:A}=r.applyInverse(n,Hn);if(a){const p=Na(d,A,l,u)*r.d,g=Na(d,A,l,f)*r.a,y=Na(d,A,u,c)*r.a,I=Na(d,A,f,c)*r.d,E=Math.min(p,g,y,I);if(E<h)switch(E){case p:return"topCenter";case g:return"middleLeft";case y:return"middleRight";case I:return"bottomCenter"}}if(s&&!t.contains(d,A)){const p=Math.sqrt((l.x-d)**2+(l.y-A)**2),g=Math.sqrt((u.x-d)**2+(u.y-A)**2),y=Math.sqrt((f.x-d)**2+(f.y-A)**2),I=Math.sqrt((c.x-d)**2+(c.y-A)**2),E=Math.min(p,g,y,I);if(E<o*1.45)switch(E){case p:return"boxRotateTopLeft";case g:return"boxRotateTopRight";case y:return"boxRotateBottomLeft";case I:return"boxRotateBottomRight"}}return null}drawBounds(t){const r=hD;for(let n=0;n<4;n++)this.transformer.projectToLocal(t.hull[n],r[n]);this.drawPolygon(r)}drawBoxScalingTolerance(t,r=this.transformer.boxScalingTolerance){t.innerBounds.pad(-r);const n=_g.allocateArray(4);n.forEach((o,a)=>{this.projectToLocal(t.hull[a],o)}),t.innerBounds.pad(2.5*r);const s=_g.allocateArray(4);s.forEach((o,a)=>{this.projectToLocal(t.hull[a],o)}),t.innerBounds.pad(-1.5*this.transformer.boxScalingTolerance);for(let o=0;o<4;o++){const a=n[o],h=n[(o+1)%4],l=s[o],u=s[(o+1)%4];this.boxScalingHandles[o].clear().beginFill(16777215,1e-4).drawPolygon(a,l,u,h).endFill()}}drawBoxRotationTolerance(){const{boxRotateTopLeft:t,boxRotateTopRight:r,boxRotateBottomLeft:n,boxRotateBottomRight:s}=this.transformer.handleAnchors,o=this.transformer.boxRotationTolerance*2,a=lD.identity().scale(o,o).rotate(this.transformer.getGroupBounds().rotation);for(let h=0;h<4;h++){const l=AD[h];let u;switch(h){case 0:u=t;break;case 1:u=r;break;case 2:u=n;break;case 3:u=s;break}for(let c=0;c<l.length;c+=2){const f=l[c],d=l[c+1];Hn.set(f,d),a.apply(Hn,Hn),fu[c]=Hn.x+u.x,fu[c+1]=Hn.y+u.y}this.drawPolygon(fu.slice())}}projectToLocal(t,r){return this.transformer.projectToLocal(t,r)}}function JI(e,i,t,r=e.pivot){const n=i.a,s=i.b,o=i.c,a=i.d,h=-Math.atan2(-o,a),l=Math.atan2(s,n);return t=t??l,e.pivot.set(r.x,r.y),e.rotation=t,e.skew.x=t+h,e.skew.y=-t+l,e.scale.x=Math.sqrt(n*n+s*s),e.scale.y=Math.sqrt(o*o+a*a),e.position.x=i.tx+(r.x*i.a+r.y*i.c),e.position.y=i.ty+(r.x*i.b+r.y*i.d),e}const Oa=new kt,gD=new kt;function vD(e,i,t){if(!t){const s=e.parent?e.parent:e.enableTempParent();e.updateTransform(),e.disableTempParent(s)}const r=e.worldTransform,n=e.parent?gD.copyFrom(e.parent.worldTransform):kt.IDENTITY;Oa.copyFrom(r),Oa.prepend(i),Oa.prepend(n.invert()),JI(e.transform,Oa)}const qI=new kt;function xg(e){const i=qI.identity();return i.c=Math.tan(e),i}function Eg(e){const i=qI.identity();return i.b=Math.tan(e),i}const Da=new oa,yD=[new M,new M,new M,new M],Xn=new kt,Yn=new M,bg=new Js,mD=new Tt,wg=[new M,new M,new M,new M],Tg=new M,Bg=new kt,Fa=VI.build(M),Ys={topLeft:"nw-resize",topCenter:"n-resize",topRight:"ne-resize",middleLeft:"w-resize",middleRight:"e-resize",bottomLeft:"sw-resize",bottomCenter:"s-resize",bottomRight:"se-resize"},ih=["topLeft","topCenter","topRight","middleLeft","middleRight","bottomLeft","bottomCenter","bottomRight"];var _h;(function(e){e.pixi="pixi",e.custom="custom"})(_h||(_h={}));const Rg={topLeft:{x:-1,y:-1},topCenter:{x:0,y:-1},topRight:{x:1,y:-1},middleLeft:{x:-1,y:0},middleCenter:{x:0,y:0},middleRight:{x:1,y:0},bottomLeft:{x:-1,y:1},bottomCenter:{x:0,y:1},bottomRight:{x:1,y:1}},ID=[...ih,"rotator","skewHorizontal","skewVertical"],CD=4,_D=16,xD=[Math.PI/4,Math.PI/2,Math.PI*3/4,Math.PI,0,-Math.PI/4,-Math.PI/2,-Math.PI*3/4,-Math.PI],ED=Math.PI/90,bD=[Math.PI/4,-Math.PI/4],wD=Math.PI/90,Pg={color:0,thickness:2};class ri extends $t{constructor(t={}){var h;super();x(this,"group");x(this,"boundingBoxes");x(this,"boxRotationEnabled");x(this,"boxRotationTolerance");x(this,"boxScalingEnabled");x(this,"boxScalingTolerance");x(this,"centeredScaling");x(this,"cursors");x(this,"lazyMode");x(this,"lazyDirty");x(this,"lockAspectRatio");x(this,"projectionTransform");x(this,"rotationSnaps");x(this,"rotationSnapTolerance");x(this,"skewRadius");x(this,"skewSnaps");x(this,"skewSnapTolerance");x(this,"stage");x(this,"translateEnabled");x(this,"transientGroupTilt");x(this,"groupBounds");x(this,"handles");x(this,"handleAnchors");x(this,"wireframe");x(this,"_enabledHandles");x(this,"_rotateEnabled");x(this,"_scaleEnabled");x(this,"_skewEnabled");x(this,"_skewX");x(this,"_skewY");x(this,"_transformHandle");x(this,"_transformType");x(this,"_handleStyle");x(this,"_wireframeStyle");x(this,"_pointerDown");x(this,"_pointerDragging");x(this,"_pointerPosition");x(this,"_pointerMoveTarget");x(this,"_isTranslateChange");x(this,"_handleMode");x(this,"_handleModes");x(this,"translateGroup",t=>{this._transformHandle=null,this._transformType="translate";const r=Xn.identity().translate(t.x,t.y);this.prependTransform(r)});x(this,"rotateGroup",(t,r)=>{this._transformHandle=t,this._transformType="rotate";const n=this.groupBounds,s=this.worldTransform.apply(this.handleAnchors[t],Yn);this.projectionTransform.applyInverse(s,s),r=this.projectionTransform.applyInverse(r,Tg);const o=n.center,a=Math.atan2(s.y-o.y,s.x-o.x);let l=Math.atan2(r.y-o.y,r.x-o.x)-a,u=this.groupBounds.rotation+l;u=this.snapAngle(u,this.rotationSnapTolerance,this.rotationSnaps),l=u-this.groupBounds.rotation;const c=Xn.identity().translate(-o.x,-o.y).rotate(l).translate(o.x,o.y);this.prependTransform(c,!0),this.updateGroupBounds(u),this._skewX+=l,this._skewY+=l});x(this,"skewGroup",(t,r)=>{this._transformHandle=t,this._transformType="skew";const n=this.groupBounds,s=Yn.copyFrom(r);this.projectionTransform.applyInverse(s,s);const o=n.center,a=Xn.identity().translate(-o.x,-o.y);let h=this.groupBounds.rotation;if(t==="skewHorizontal"){const l=this._skewX;this._skewX=Math.atan2(s.y-o.y,s.x-o.x),this._skewX=this.snapAngle(this._skewX,this.skewSnapTolerance,this.skewSnaps),a.prepend(Eg(-l)),a.prepend(Eg(this._skewX))}else{const l=this._skewY,u=Math.atan2(s.y-o.y,s.x-o.x)-Math.PI/2;this._skewY=u,this._skewY=this.snapAngle(this._skewY,this.skewSnapTolerance,this.skewSnaps),a.prepend(xg(l)),a.prepend(xg(-this._skewY)),h-=this._skewY-l}a.translate(o.x,o.y),this.prependTransform(a,!0),this.updateGroupBounds(h)});x(this,"commitGroup",()=>{const t=this._transformType;this._transformHandle=null,this._transformType="none",this.transientGroupTilt!==!1&&(this.updateGroupBounds(0),this.emit("transformchange")),this.emit("transformcommit",{type:t})});this.interactive=!0,this.cursors=Object.assign({default:"move"},t.cursors),this.cursor=this.cursors.default,this.boundingBoxes=t.boundingBoxes||"all",this.group=t.group||[],this.boxRotationTolerance=t.boxRotationTolerance||_D,this.boxScalingTolerance=t.boxScalingTolerance||CD,this.centeredScaling=!!t.centeredScaling,this.projectionTransform=new kt,this.lockAspectRatio=t.lockAspectRatio===!0,this.rotationSnaps=t.rotationSnaps||xD,this.rotationSnapTolerance=t.rotationSnapTolerance!==void 0?t.rotationSnapTolerance:ED,this.skewRadius=t.skewRadius||64,this.skewSnaps=t.skewSnaps||bD,this.skewSnapTolerance=t.skewSnapTolerance!==void 0?t.skewSnapTolerance:wD,this.boxRotationEnabled=t.boxRotationEnabled===!0,this.boxScalingEnabled=t.boxScalingEnabled===!0,this._rotateEnabled=t.rotateEnabled!==!1,this._scaleEnabled=t.scaleEnabled!==!1,this._skewEnabled=t.skewEnabled===!0,this.translateEnabled=t.translateEnabled!==!1,this.transientGroupTilt=t.transientGroupTilt!==void 0?t.transientGroupTilt:!0,this.wireframe=this.addChild(new pD(this)),this.wireframe.cursor="none",this.stage=t.stage||null,this._skewX=0,this._skewY=0,this._transformType="none",this._wireframeStyle=Object.assign({},Pg,t.wireframeStyle||{});const r=t.handleConstructor||aD;this._handleMode=t.defaultHandleMode||_h.custom,this._handleModes=t.handleModes||{};const n=((h=this._handleModes[this._handleMode])==null?void 0:h.handleStyle)||{};this._handleStyle=n;const s={rotator:this.addChild(new r(this,"rotator",n,l=>{this.rotateGroup("rotator",l)},this.commitGroup))},o=ih.reduce((l,u)=>{const c=new r(this,u,n,null,this.commitGroup,Ys[u]);return c.onHandleDelta=f=>{this.scaleGroup(c.handle,f)},c.visible=this._scaleEnabled,l[u]=c,this.addChild(l[u]),l},{}),a={skewHorizontal:this.addChild(new r(this,"skewHorizontal",n,l=>{this.skewGroup("skewHorizontal",l)},this.commitGroup,"pointer")),skewVertical:this.addChild(new r(this,"skewVertical",n,l=>{this.skewGroup("skewVertical",l)},this.commitGroup,"pointer"))};this.handles=Object.assign({},o,s,a),this.handles.skewHorizontal.visible=this._skewEnabled,this.handles.skewVertical.visible=this._skewEnabled,this.handleAnchors={rotator:new M,boxRotateTopLeft:new M,boxRotateTopRight:new M,boxRotateBottomLeft:new M,boxRotateBottomRight:new M,topLeft:new M,topCenter:new M,topRight:new M,middleLeft:new M,middleCenter:new M,middleRight:new M,bottomLeft:new M,bottomCenter:new M,bottomRight:new M,skewHorizontal:new M,skewVertical:new M},this.groupBounds=new Js,this.updateGroupBounds(),this._pointerDown=!1,this._pointerDragging=!1,this._pointerPosition=new M,this._pointerMoveTarget=null,this.on("pointerdown",this.onPointerDown,this),this.on("pointerup",this.onPointerUp,this),this.on("pointerupoutside",this.onPointerUp,this)}setSelection(t){this.group=t,this.updateGroupBounds(0)}get enabledHandles(){return this._enabledHandles}set enabledHandles(t){!this._enabledHandles&&!t||(this._enabledHandles=t,ID.forEach(r=>{this.handles[r].visible=!1}),t?t.forEach(r=>{this.handles[r].visible=!0}):(this.handles.rotator.visible=this._rotateEnabled,this.handles.skewHorizontal.visible=this._skewEnabled,this.handles.skewVertical.visible=this._skewEnabled,ih.forEach(r=>{r!=="middleCenter"&&(this.handles[r].visible=this._scaleEnabled)})))}get handleStyle(){return this._handleStyle}set handleStyle(t){const r=this.handles;for(const n in r)r[n].style=t;this._handleStyle=t}get rotateEnabled(){return this._rotateEnabled}set rotateEnabled(t){if(this._rotateEnabled!==t){if(this._rotateEnabled=t,this._enabledHandles)return;this.handles.rotator.visible=t}}get scaleEnabled(){return this._scaleEnabled}set scaleEnabled(t){if(this._scaleEnabled!==t){if(this._scaleEnabled=t,this._enabledHandles)return;ih.forEach(r=>{r!=="middleCenter"&&(this.handles[r].visible=t)})}}get skewEnabled(){return this._skewEnabled}set skewEnabled(t){if(this._skewEnabled!==t){if(this._skewEnabled=t,this._enabledHandles)return;this.handles.skewHorizontal.visible=t,this.handles.skewVertical.visible=t}}get transformType(){return this._transformType}get wireframeStyle(){return this._wireframeStyle}set wireframeStyle(t){this._wireframeStyle=Object.assign({},Pg,t)}getGroupBounds(t=!1){return t&&this.updateGroupBounds(),this.groupBounds}scaleGroup(t,r,n=1,s=1){this._transformHandle=t,this._transformType="scale";const o=Rg[t].x,a=Rg[t].y,h=this.handles,l=this.groupBounds,u=l.rotation,c=l.innerBounds,f=this.worldTransform.apply(this.handleAnchors[t],Yn);this.projectionTransform.applyInverse(f,f),r=this.projectionTransform.applyInverse(r,Tg);const d=r.x-f.x,A=r.y-f.y,p=(l.topRight.x-l.topLeft.x)/c.width,g=(l.topRight.y-l.topLeft.y)/c.width,y=(l.bottomLeft.x-l.topLeft.x)/c.height,I=(l.bottomLeft.y-l.topLeft.y)/c.height,E=d*p+A*g,w=d*y+A*I;let T=1+E*o/c.width,_=1+w*a/c.height;T<0&&(T=n/c.width*s),_<0&&(_=n/c.height*s);const F=this.lockAspectRatio,R=t==="bottomCenter"||t==="topCenter"||t==="middleLeft"||t==="middleRight";let S=o,D=a;F&&(R?o!==0?(_=T,S=D=o):a!==0&&(T=_,S=D=a):T>_?_=T:T=_);const $=Xn.identity();if(S!==0&&T!==0){const z=this.centeredScaling||F&&R?l.center:o===1?l.topLeft:l.topRight;$.translate(-z.x,-z.y).rotate(-u).scale(T,1).rotate(u).translate(z.x,z.y)}if(D!==0&&_!==0){const z=this.centeredScaling||F&&R?l.center:D===1?l.topLeft:l.bottomLeft;$.translate(-z.x,-z.y).rotate(-u).scale(1,_).rotate(u).translate(z.x,z.y)}if((_<0||T<0)&&!(_<0&&T<0))switch(t){case"topLeft":case"bottomLeft":this.swapHandles(h.topLeft,h.bottomLeft);break;case"topCenter":case"bottomCenter":this.swapHandles(h.topCenter,h.bottomCenter);break;case"topRight":case"bottomRight":this.swapHandles(h.topRight,h.bottomRight);break}this.prependTransform($)}render(t){this.renderable&&this.visible&&(!this.lazyMode||this.lazyDirty)&&this.draw(),super.render(t)}changeMode(t){const r=this._handleModes[t];r&&(this.handleStyle=r.handleStyle)}draw(){const t=this.group,{color:r,thickness:n}=this._wireframeStyle;this.wireframe.clear(),this.boundingBoxes!=="none"&&this.wireframe.lineStyle(n,r),this.translateEnabled&&this.wireframe.beginFill(16777215,1e-4);for(let o=0,a=t.length;o<a&&this.boundingBoxes==="all";o++)this.wireframe.drawBounds(ri.calculateOrientedBounds(t[o],bg));const s=ri.calculateGroupOrientedBounds(t,this.groupBounds.rotation,bg,!0);this.wireframe.drawBounds(s),this.drawHandles(s),this.groupBounds.copyFrom(s),this.boxRotationEnabled&&(this.wireframe.closePath().beginFill(16777215,1e-4).lineStyle(),this.wireframe.drawBoxRotationTolerance()),this.boxScalingEnabled&&(this.wireframe.closePath().beginFill(16773375,1e-4).lineStyle(),this.wireframe.drawBoxScalingTolerance(s)),this.lazyDirty=!1}drawHandles(t){var w;const{rotatorDistance:r=32}=this.handleStyle,n=this.handles,s=this.handleAnchors,{topLeft:o,topRight:a,bottomLeft:h,bottomRight:l,center:u}=t,[c,f,d,A]=wg,p=Yn;if(this.projectToLocal(o,c),this.projectToLocal(a,f),this.projectToLocal(h,d),this.projectToLocal(l,A),this.projectToLocal(u,p),s.topLeft.copyFrom(c),s.topCenter.set((c.x+f.x)/2,(c.y+f.y)/2),s.topRight.copyFrom(f),s.middleLeft.set((c.x+d.x)/2,(c.y+d.y)/2),s.middleCenter.set((c.x+A.x)/2,(c.y+A.y)/2),s.middleRight.set((f.x+A.x)/2,(f.y+A.y)/2),s.bottomLeft.copyFrom(d),s.bottomCenter.set((d.x+A.x)/2,(d.y+A.y)/2),s.bottomRight.copyFrom(A),this.boxRotationEnabled&&(s.boxRotateTopLeft.copyFrom(s.topLeft),s.boxRotateTopRight.copyFrom(s.topRight),s.boxRotateBottomLeft.copyFrom(s.bottomLeft),s.boxRotateBottomRight.copyFrom(s.bottomRight)),this._rotateEnabled){const T=(c.x+f.x)/2,_=(c.y+f.y)/2;let F=-(c.y-f.y),R=c.x-f.x;const S=Math.sqrt(F*F+R*R);F*=r/S,R*=r/S,n.rotator.position.x=T+F,n.rotator.position.y=_+R,this.wireframe.moveTo(T,_).lineTo(n.rotator.position.x,n.rotator.position.y),this.handleAnchors.rotator.copyFrom(n.rotator.position)}if(this._skewEnabled){const T=p.x,_=p.y;this.worldTransform.apply(p,p),s.skewHorizontal.set(p.x+Math.cos(this._skewX)*this.skewRadius,p.y+Math.sin(this._skewX)*this.skewRadius),s.skewVertical.set(p.x+-Math.sin(this._skewY)*this.skewRadius,p.y+Math.cos(this._skewY)*this.skewRadius),this.worldTransform.applyInverse(s.skewHorizontal,s.skewHorizontal),this.worldTransform.applyInverse(s.skewVertical,s.skewVertical),p.set(T,_),this.wireframe.beginFill(this.wireframeStyle.color).drawCircle(p.x,p.y,this.wireframeStyle.thickness*2).endFill(),this.wireframe.moveTo(p.x,p.y).lineTo(n.skewHorizontal.x,n.skewHorizontal.y).moveTo(p.x,p.y).lineTo(n.skewVertical.x,n.skewVertical.y)}const{width:g,height:y}=this.groupBounds.innerBounds,{minSize:I=0,keepHandles:E=[]}=this.handleStyle;for(const T in n){const _=n[T];let F=this.groupBounds.rotation;I>0&&(g<I||y<I)?E.includes(T)?_.visible=!0:(_.visible=!1,(w=_.reset)==null||w.call(_)):_.visible=!0,T==="skewHorizontal"?F=this._skewX:T==="skewVertical"&&(F=this._skewY),_.rotation=F,_.position.copyFrom(s[T]),_.getBounds(!1,mD)}}onPointerDown(t){this._pointerDown=!0,this._pointerDragging=!1,t.stopPropagation(),this._pointerMoveTarget&&(this._pointerMoveTarget.off("pointermove",this.onPointerMove,this),this._pointerMoveTarget=null),this._pointerMoveTarget=this.stage||this,this._pointerMoveTarget.on("pointermove",this.onPointerMove,this)}onPointerMove(t){const r=this._pointerPosition,n=Fa.allocate().copyFrom(t.data.global),s=this.wireframe.hitHandleType(this.groupBounds,this.projectionTransform,n);if(!this._pointerDown)this.setCursorFromHoveredHandle(s);else{const o=n.x,a=n.y;if(this._pointerDragging)switch(this._transformHandle){case"boxRotateTopLeft":case"boxRotateTopRight":case"boxRotateBottomLeft":case"boxRotateBottomRight":this.rotateGroup(this._transformHandle,n);break;case"topCenter":case"middleLeft":case"middleRight":case"bottomCenter":this.scaleGroup(this._transformHandle,n);break;default:if(this.translateEnabled){const[h,l,u]=wg;h.set(0,0),l.set(n.x-r.x,n.y-r.y),this.projectionTransform.applyInverse(h,h),this.projectionTransform.applyInverse(l,l),u.set(l.x-h.x,l.y-h.y),this._isTranslateChange=!0,this.translateGroup(u)}}else this._transformHandle=this.wireframe.hitHandleType(this.groupBounds,this.projectionTransform,n),this.setCursorFromHoveredHandle(s);this._pointerPosition.x=o,this._pointerPosition.y=a,this._pointerDragging=!0,t.stopPropagation()}Fa.release(n)}onPointerUp(t){this._pointerDown&&(this._pointerDragging=!1,this._pointerDown=!1,this._isTranslateChange&&this.commitGroup(),this._isTranslateChange=!1,t.stopPropagation(),this._pointerMoveTarget&&(this._pointerMoveTarget.off("pointermove",this.onPointerMove,this),this._pointerMoveTarget=null))}prependTransform(t,r=!1){const n=this.group;for(let s=0,o=n.length;s<o;s++)vD(n[s],t,!1);Bg.copyFrom(t),r||this.updateGroupBounds(),this.emit("transformchange",Bg)}updateGroupBounds(t=this.groupBounds.rotation){ri.calculateGroupOrientedBounds(this.group,t,this.groupBounds),this.drawHandles(this.groupBounds),this.lazyDirty=!0}snapAngle(t,r,n){if(t=t%(Math.PI*2),!n||n.length===1||!r)return t;for(let s=0,o=n.length;s<o;s++)if(Math.abs(t-n[s])<=r)return n[s];return t}swapHandles(t,r){const n=t.handle,s=r.handle,o=t.cursor,a=r.cursor,h=t.x,l=r.x,u=t.y,c=r.y;t.handle=s,r.handle=n,t.position.set(l,c),r.position.set(h,u),t.cursor=a,r.cursor=o,this.handles[n]=r,this.handles[s]=t,this._transformHandle===n?this._transformHandle=s:this._transformHandle===s&&(this._transformHandle=n)}setCursorFromHoveredHandle(t){if(t&&t.startsWith("boxRotate"))this.cursor=this.cursors.boxRotate||this.cursors.default;else if(t)switch(t){case"topCenter":this.cursor=this.cursors.boxScaleTop||this.cursors.default;break;case"middleLeft":this.cursor=this.cursors.boxScaleLeft||this.cursors.default;break;case"middleRight":this.cursor=this.cursors.boxScaleRight||this.cursors.default;break;case"bottomCenter":this.cursor=this.cursors.boxScaleBottom||this.cursors.default;break}else this.cursor=this.cursors.translate||this.cursors.default}projectToLocal(t,r){return r||(r=new M),this.projectionTransform.apply(t,r),this.worldTransform.applyInverse(r,r),r}static calculateTransformedCorners(t,r=t.worldTransform,n,s=0){const o=t.getLocalBounds();return t.getBounds(),n=n||[new M,new M,new M,new M],n[s].set(o.x,o.y),n[s+1].set(o.x+o.width,o.y),n[s+2].set(o.x+o.width,o.y+o.height),n[s+3].set(o.x,o.y+o.height),r.apply(n[s],n[s]),r.apply(n[s+1],n[s+1]),r.apply(n[s+2],n[s+2]),r.apply(n[s+3],n[s+3]),n}static calculateOrientedBounds(t,r){const n=t.parent?t.parent:t.enableTempParent();t.updateTransform(),t.disableTempParent(n),JI(Da,t.worldTransform),Da.updateLocalTransform();const s=Da.rotation,o=ri.calculateTransformedCorners(t,t.worldTransform,yD),a=(o[0].x+o[1].x+o[2].x+o[3].x)/4,h=(o[0].y+o[1].y+o[2].y+o[3].y)/4,l=Xn.identity().translate(-a,-h).rotate(-Da.rotation).translate(a,h);return l.apply(o[0],o[0]),l.apply(o[1],o[1]),l.apply(o[2],o[2]),l.apply(o[3],o[3]),r=r||new Js,r.rotation=s,r.innerBounds.x=Math.min(o[0].x,o[1].x,o[2].x,o[3].x),r.innerBounds.y=Math.min(o[0].y,o[1].y,o[2].y,o[3].y),r.innerBounds.width=Math.max(o[0].x,o[1].x,o[2].x,o[3].x)-r.innerBounds.x,r.innerBounds.height=Math.max(o[0].y,o[1].y,o[2].y,o[3].y)-r.innerBounds.y,r}static calculateGroupOrientedBounds(t,r,n,s=!1){const o=[];t.forEach(A=>{const p=A;p.children.length>0?p.children.forEach(g=>{const{width:y,height:I}=g.getLocalBounds();(y>0||I>0)&&o.push(g)}):o.push(A)}),t=o;const a=t.length,h=Fa.allocateArray(a*4);for(let A=0;A<a;A++){const p=t[A];if(!s){const g=p.parent?p.parent:p.enableTempParent();p.updateTransform(),p.disableTempParent(g)}ri.calculateTransformedCorners(p,p.worldTransform,h,A*4)}const l=Xn.identity().rotate(-r);let u=Number.MAX_VALUE,c=Number.MAX_VALUE,f=-Number.MAX_VALUE,d=-Number.MAX_VALUE;for(let A=0,p=h.length;A<p;A++){const g=h[A];l.apply(g,g);const y=g.x,I=g.y;u=y<u?y:u,c=I<c?I:c,f=y>f?y:f,d=I>d?I:d}return Fa.releaseArray(h),n=n||new Js,n.innerBounds.x=u,n.innerBounds.y=c,n.innerBounds.width=f-u,n.innerBounds.height=d-c,n.rotation=r,l.applyInverse(n.center,Yn),n.center.copyFrom(Yn),n}onUpdateState(t){var r;if((r=this._handleStyle)!=null&&r.shapeAttrs)for(const n in this._handleStyle.shapeAttrs){const s=this._handleStyle.shapeAttrs[n];(s==null?void 0:s.bindAttrKey)in t&&(s.component.isActive=t[s.bindAttrKey])}}}var Qt;(function(e){e.CIRCLE="CIRCLE",e.RECT="RECT",e.TEXT="TEXT",e.PATH="PATH",e.LINE="LINE",e.PEN="PEN",e.BITMAP="BITMAP",e.POLYGON="POLYGON"})(Qt||(Qt={}));var Le;(function(e){e.DRAW_BEGIN="DRAW_BEGIN",e.DRAW_DONE="DRAW_DONE",e.DRAW_UPDATE="DRAW_UPDATE"})(Le||(Le={}));var an;(function(e){e.UNION="union",e.DIFFERENCE="difference",e.INTERSECTION="intersection",e.XOR="xor"})(an||(an={}));var Sg;(function(e){e.LEFT="alignToLeft",e.RIGHT="alignToRight",e.TOP="alignToTop",e.BOTTOM="alignToBottom",e.HORIZONTAL_CENTER="alignToHorizontalCenter",e.VERTICAL_CENTER="alignToVerticalCenter",e.HORIZONTAL_DISTRIBUTE="horizontalDistribute",e.VERTICAL_DISTRIBUTE="verticalDistribute"})(Sg||(Sg={}));var xh;(function(e){e.LINER="createLinerArrays",e.RADIAL="createRadialArrays"})(xh||(xh={}));const ZI={ADD_TO_VIEWPORT:"ADD_TO_VIEWPORT",ADD_TO_TEMP_LAYER:"ADD_TO_TEMP_LAYER",SELECT_VIEWPORT_ELEMENTS:"SELECT_VIEWPORT_ELEMENTS",SET_VIEWPORT_MODE:"SET_VIEWPORT_MODE"},Ye={TRANSFORM_CHANGE:"transformchange",TRANSFORM_COMMIT:"transformcommit",SELECT:"SELECT",SELECTED_ATTRS_CHANGE:"SELECTED_ATTRS_CHANGE"},be={DOUBLE_CLICK:"DOUBLE_CLICK",PINCH:"PINCH",PAN:"PAN",PINCH_START:"PINCH_START",PINCH_CHANGE:"PINCH_CHANGE",PINCH_END:"PINCH_END",TWO_FINGER_TAP:"TWO_FINGER_TAP",LONG_PRESS:"LONG_PRESS"},Ui={SELECT_OBJECT:"SELECT_OBJECT",SELECTED_TRANSFORM_COMMIT:"SELECTED_TRANSFORM_COMMIT",SELECT_OBJECT_TRANSFORMERED:"SELECT_OBJECT_TRANSFORMERED",ZOOMED:"ZOOMED",RESIZE:"resize",UPDATE_BACKDROP_RESULT:"UPDATE_BACKDROP_RESULT",UPDATE_CENTRAL_AXIS:"UPDATE_CENTRAL_AXIS",DRAW_DISPLAY_DONE:"DRAW_DISPLAY_DONE",UPDATE_IMAGE_PROCESS_VISIBLE:"UPDATE_IMAGE_PROCESS_VISIBLE",NEW_DISPLAYS_ADDED:"NEW_DISPLAYS_ADDED",DISPLAYS_REMOVED:"DISPLAYS_REMOVED"},tC={ATTRS_CHANGED:"ATTRS_CHANGED"};var Eo;(function(e){e.CHANGE="MODE_CHANGE"})(Eo||(Eo={}));var Oc;(function(e){e.ZOOMED="zoomed",e.MOVED="moved"})(Oc||(Oc={}));var Dc;(function(e){e.DISPLAY_CONFIG_CHANGE="DISPLAY_CONFIG_CHANGE"})(Dc||(Dc={}));var Ir;(function(e){e.CAN_DO_CHANGE="UNDO_HISTORY_CAN_DO_CHANGE"})(Ir||(Ir={}));var bo;(function(e){e.GET_POSITION="GET_POSITION",e.CANCEL="CANCEL",e.CURVE_GET_POSITION="CURVE_GET_POSITION",e.CURVE_GET_POSITION_ERROR="CURVE_GET_POSITION_ERROR"})(bo||(bo={}));const h4=_h;var ue;(function(e){e.SELECT="SELECT",e.TEXT="TEXT",e.RECT="RECT",e.CIRCLE="CIRCLE",e.LINE="LINE",e.PEN="PEN",e.DRAG="DRAG",e.ZOOM="ZOOM",e.INSERT="INSERT"})(ue||(ue={}));const Ng={[ue.CIRCLE]:Qt.CIRCLE,[ue.RECT]:Qt.RECT,[ue.LINE]:Qt.LINE,[ue.TEXT]:Qt.TEXT,[ue.PEN]:Qt.PEN};Qt.CIRCLE+"",ue.CIRCLE,Qt.RECT+"",ue.RECT,Qt.LINE+"",ue.LINE,Qt.TEXT+"",ue.TEXT,Qt.PEN+"",ue.PEN;var Ve;(function(e){e.TOP="TOP",e.BOTTOM="BOTTOM",e.LEFT="LEFT",e.RIGHT="RIGHT"})(Ve||(Ve={}));var qs;(function(e){e[e.CENTER=0]="CENTER",e[e.TOP_LEFT=1]="TOP_LEFT"})(qs||(qs={}));var pn;(function(e){e.UP="UP",e.DOWN="DOWN",e.TOP="TOP",e.END="END"})(pn||(pn={}));var Og;(function(e){e.INNER="inner",e.OUTER="outer"})(Og||(Og={}));var Dg;(function(e){e.FLIP_X="flipX",e.FLIP_Y="flipY"})(Dg||(Dg={}));var kr;(function(e){e.CUTTER="cutter",e.MAGIC_WAND="magicWand",e.ERASER="eraser"})(kr||(kr={}));var hn;(function(e){e.TOP_LEFT="topLeft",e.TOP_RIGHT="topRight",e.BOTTOM_LEFT="bottomLeft",e.BOTTOM_RIGHT="bottomRight"})(hn||(hn={}));var fr;(function(e){e.ALL="all",e.SPECIFIED="specified",e.SELECTED="selected"})(fr||(fr={}));const Fg=5,TD={vectorScaleNum:10,imageData:!0,path:!0,excludeOutSide:!0},Ml={hoverColor:327677,enableFill:!0},nr={width:1,color:Ml.fillColor,alignment:0,native:!0},Ti={worldWidth:388,worldHeight:300,minScale:.25,maxScale:10,fitOffsetRatio:50,backgroundColor:16777215,backgroundAlpha:1,outlineNative:!0,outlineWidth:1,outlineColor:3583338,outlineAlpha:.5,offsetX:0,offsetY:0},BD={fillColor:3276,fillAlpha:.2},RD={fillColor:3276,fillAlpha:.2,buttonWidth:30,buttonHeight:27},PD=15724527,SD={positions:[Ve.TOP,Ve.BOTTOM,Ve.LEFT,Ve.RIGHT],pixelPerUnit:1,backgroundColor:16777215,backgroundAlpha:1,borderColor:0,borderAlpha:1,scaleColor:0,scaleAlpha:1,fontSize:10,fontColor:0,fontOffset:2,markColor:8900346,markAlpha:1,size:20},ND={cellSize:10,lineNative:!0,lineWidth:1,lineColor:0,lineAlpha:.3,cellSize2:100,lineNative2:!0,lineWidth2:1,lineColor2:0,lineAlpha2:.8},OD={alignLineColor:6591981,distanceLineColor:14423100,unit:"mm",pixelPerUnit:1,fractionDigits:0,fontSize:12,fontColor:0,enableAdsorb:!0};var wo;(function(e){e[e.Point=3583338]="Point",e[e.Hollow=16777215]="Hollow",e[e.ControlPoint=8900346]="ControlPoint"})(wo||(wo={}));const Zs={SHARPNESS:50,GRAY_VALUE:[0,255],COLOR_INVERTED:!1},sA=3,DD={rotateEnabled:!0,boxRotationEnabled:!1,group:[],wireframeStyle:{thickness:1,color:0},elementMinWidth:1},Vn=1,La=5,l4=100,Lg=2,FD=3,Mg="HELLO",LD={fontSize:72,fontFamily:"Lato",fontSubfamily:"Regular",fontSource:"build-in",letterSpacing:0,leading:0,align:"left"},du=10;function MD(e){var i=this.constructor;return this.then(function(t){return i.resolve(e()).then(function(){return t})},function(t){return i.resolve(e()).then(function(){return i.reject(t)})})}function QD(e){var i=this;return new i(function(t,r){if(!(e&&typeof e.length<"u"))return r(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(e);if(n.length===0)return t([]);var s=n.length;function o(h,l){if(l&&(typeof l=="object"||typeof l=="function")){var u=l.then;if(typeof u=="function"){u.call(l,function(c){o(h,c)},function(c){n[h]={status:"rejected",reason:c},--s===0&&t(n)});return}}n[h]={status:"fulfilled",value:l},--s===0&&t(n)}for(var a=0;a<n.length;a++)o(a,n[a])})}function eC(e,i){this.name="AggregateError",this.errors=e,this.message=i||""}eC.prototype=Error.prototype;function UD(e){var i=this;return new i(function(t,r){if(!(e&&typeof e.length<"u"))return r(new TypeError("Promise.any accepts an array"));var n=Array.prototype.slice.call(e);if(n.length===0)return r();for(var s=[],o=0;o<n.length;o++)try{i.resolve(n[o]).then(t).catch(function(a){s.push(a),s.length===n.length&&r(new eC(s,"All promises were rejected"))})}catch(a){r(a)}})}var GD=setTimeout;function iC(e){return!!(e&&typeof e.length<"u")}function kD(){}function HD(e,i){return function(){e.apply(i,arguments)}}function pe(e){if(!(this instanceof pe))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],nC(e,this)}function rC(e,i){for(;e._state===3;)e=e._value;if(e._state===0){e._deferreds.push(i);return}e._handled=!0,pe._immediateFn(function(){var t=e._state===1?i.onFulfilled:i.onRejected;if(t===null){(e._state===1?Fc:To)(i.promise,e._value);return}var r;try{r=t(e._value)}catch(n){To(i.promise,n);return}Fc(i.promise,r)})}function Fc(e,i){try{if(i===e)throw new TypeError("A promise cannot be resolved with itself.");if(i&&(typeof i=="object"||typeof i=="function")){var t=i.then;if(i instanceof pe){e._state=3,e._value=i,Lc(e);return}else if(typeof t=="function"){nC(HD(t,i),e);return}}e._state=1,e._value=i,Lc(e)}catch(r){To(e,r)}}function To(e,i){e._state=2,e._value=i,Lc(e)}function Lc(e){e._state===2&&e._deferreds.length===0&&pe._immediateFn(function(){e._handled||pe._unhandledRejectionFn(e._value)});for(var i=0,t=e._deferreds.length;i<t;i++)rC(e,e._deferreds[i]);e._deferreds=null}function XD(e,i,t){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof i=="function"?i:null,this.promise=t}function nC(e,i){var t=!1;try{e(function(r){t||(t=!0,Fc(i,r))},function(r){t||(t=!0,To(i,r))})}catch(r){if(t)return;t=!0,To(i,r)}}pe.prototype.catch=function(e){return this.then(null,e)};pe.prototype.then=function(e,i){var t=new this.constructor(kD);return rC(this,new XD(e,i,t)),t};pe.prototype.finally=MD;pe.all=function(e){return new pe(function(i,t){if(!iC(e))return t(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(r.length===0)return i([]);var n=r.length;function s(a,h){try{if(h&&(typeof h=="object"||typeof h=="function")){var l=h.then;if(typeof l=="function"){l.call(h,function(u){s(a,u)},t);return}}r[a]=h,--n===0&&i(r)}catch(u){t(u)}}for(var o=0;o<r.length;o++)s(o,r[o])})};pe.any=UD;pe.allSettled=QD;pe.resolve=function(e){return e&&typeof e=="object"&&e.constructor===pe?e:new pe(function(i){i(e)})};pe.reject=function(e){return new pe(function(i,t){t(e)})};pe.race=function(e){return new pe(function(i,t){if(!iC(e))return t(new TypeError("Promise.race accepts an array"));for(var r=0,n=e.length;r<n;r++)pe.resolve(e[r]).then(i,t)})};pe._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){GD(e,0)};pe._unhandledRejectionFn=function(i){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",i)};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Qg=Object.getOwnPropertySymbols,YD=Object.prototype.hasOwnProperty,VD=Object.prototype.propertyIsEnumerable;function zD(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function WD(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var i={},t=0;t<10;t++)i["_"+String.fromCharCode(t)]=t;var r=Object.getOwnPropertyNames(i).map(function(s){return i[s]});if(r.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(s){n[s]=s}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var jD=WD()?Object.assign:function(e,i){for(var t,r=zD(e),n,s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var o in t)YD.call(t,o)&&(r[o]=t[o]);if(Qg){n=Qg(t);for(var a=0;a<n.length;a++)VD.call(t,n[a])&&(r[n[a]]=t[n[a]])}}return r};/*!
 * @pixi/polyfill - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis>"u"&&(typeof self<"u"?self.globalThis=self:typeof global<"u"&&(global.globalThis=global));globalThis.Promise||(globalThis.Promise=pe);Object.assign||(Object.assign=jD);var KD=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var $D=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-$D}}var Au=Date.now(),Ug=["ms","moz","webkit","o"];for(var pu=0;pu<Ug.length&&!globalThis.requestAnimationFrame;++pu){var gu=Ug[pu];globalThis.requestAnimationFrame=globalThis[gu+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[gu+"CancelAnimationFrame"]||globalThis[gu+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(e){if(typeof e!="function")throw new TypeError(e+"is not a function");var i=Date.now(),t=KD+Au-i;return t<0&&(t=0),Au=i,globalThis.self.setTimeout(function(){Au=Date.now(),e(performance.now())},t)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(e){return clearTimeout(e)});Math.sign||(Math.sign=function(i){return i=Number(i),i===0||isNaN(i)?i:i>0?1:-1});Number.isInteger||(Number.isInteger=function(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);/*!
 * @pixi/accessibility - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var sC={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Jt.mixin(sC);var JD=9,Ma=100,qD=0,ZD=0,Gg=2,kg=1,tF=-1e3,eF=-1e3,iF=2,oC=function(){function e(i){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Ai.tablet||Ai.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width=Ma+"px",t.style.height=Ma+"px",t.style.position="absolute",t.style.top=qD+"px",t.style.left=ZD+"px",t.style.zIndex=Gg.toString(),this.div=t,this.renderer=i,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),e.prototype.createTouchHook=function(){var i=this,t=document.createElement("button");t.style.width=kg+"px",t.style.height=kg+"px",t.style.position="absolute",t.style.top=tF+"px",t.style.left=eF+"px",t.style.zIndex=iF.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",function(){i._isMobileAccessibility=!0,i.activate(),i.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t},e.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},e.prototype.activate=function(){var i;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(i=this.renderer.view.parentNode)===null||i===void 0||i.appendChild(this.div))},e.prototype.deactivate=function(){var i;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(i=this.div.parentNode)===null||i===void 0||i.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(i){if(!(!i.visible||!i.accessibleChildren)){i.accessible&&i.interactive&&(i._accessibleActive||this.addChild(i),i.renderId=this.renderId);var t=i.children;if(t)for(var r=0;r<t.length;r++)this.updateAccessibleObjects(t[r])}},e.prototype.update=function(){var i=performance.now();if(!(Ai.android.device&&i<this.androidUpdateCount)&&(this.androidUpdateCount=i+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),r=t.left,n=t.top,s=t.width,o=t.height,a=this.renderer,h=a.width,l=a.height,u=a.resolution,c=s/h*u,f=o/l*u,d=this.div;d.style.left=r+"px",d.style.top=n+"px",d.style.width=h+"px",d.style.height=l+"px";for(var A=0;A<this.children.length;A++){var p=this.children[A];if(p.renderId!==this.renderId)p._accessibleActive=!1,bn(this.children,A,1),this.div.removeChild(p._accessibleDiv),this.pool.push(p._accessibleDiv),p._accessibleDiv=null,A--;else{d=p._accessibleDiv;var g=p.hitArea,y=p.worldTransform;p.hitArea?(d.style.left=(y.tx+g.x*y.a)*c+"px",d.style.top=(y.ty+g.y*y.d)*f+"px",d.style.width=g.width*y.a*c+"px",d.style.height=g.height*y.d*f+"px"):(g=p.getBounds(),this.capHitArea(g),d.style.left=g.x*c+"px",d.style.top=g.y*f+"px",d.style.width=g.width*c+"px",d.style.height=g.height*f+"px",d.title!==p.accessibleTitle&&p.accessibleTitle!==null&&(d.title=p.accessibleTitle),d.getAttribute("aria-label")!==p.accessibleHint&&p.accessibleHint!==null&&d.setAttribute("aria-label",p.accessibleHint)),(p.accessibleTitle!==d.title||p.tabIndex!==d.tabIndex)&&(d.title=p.accessibleTitle,d.tabIndex=p.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},e.prototype.updateDebugHTML=function(i){i.innerHTML="type: "+i.type+"</br> title : "+i.title+"</br> tabIndex: "+i.tabIndex},e.prototype.capHitArea=function(i){i.x<0&&(i.width+=i.x,i.x=0),i.y<0&&(i.height+=i.y,i.y=0);var t=this.renderer,r=t.width,n=t.height;i.x+i.width>r&&(i.width=r-i.x),i.y+i.height>n&&(i.height=n-i.y)},e.prototype.addChild=function(i){var t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=Ma+"px",t.style.height=Ma+"px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=Gg.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=i.accessiblePointerEvents,t.type=i.accessibleType,i.accessibleTitle&&i.accessibleTitle!==null?t.title=i.accessibleTitle:(!i.accessibleHint||i.accessibleHint===null)&&(t.title="displayObject "+i.tabIndex),i.accessibleHint&&i.accessibleHint!==null&&t.setAttribute("aria-label",i.accessibleHint),this.debug&&this.updateDebugHTML(t),i._accessibleActive=!0,i._accessibleDiv=t,t.displayObject=i,this.children.push(i),this.div.appendChild(i._accessibleDiv),i._accessibleDiv.tabIndex=i.tabIndex},e.prototype._onClick=function(i){var t=this.renderer.plugins.interaction,r=i.target.displayObject,n=t.eventData;t.dispatchEvent(r,"click",n),t.dispatchEvent(r,"pointertap",n),t.dispatchEvent(r,"tap",n)},e.prototype._onFocus=function(i){i.target.getAttribute("aria-live")||i.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction,r=i.target.displayObject,n=t.eventData;t.dispatchEvent(r,"mouseover",n)},e.prototype._onFocusOut=function(i){i.target.getAttribute("aria-live")||i.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction,r=i.target.displayObject,n=t.eventData;t.dispatchEvent(r,"mouseout",n)},e.prototype._onKeyDown=function(i){i.keyCode===JD&&this.activate()},e.prototype._onMouseMove=function(i){i.movementX===0&&i.movementY===0||this.deactivate()},e.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e.extension={name:"accessibility",type:[Zt.RendererPlugin,Zt.CanvasRendererPlugin]},e}();/*!
 * @pixi/extract - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Hg=new Tt,Xg=4,aC=function(){function e(i){this.renderer=i}return e.prototype.image=function(i,t,r){var n=new Image;return n.src=this.base64(i,t,r),n},e.prototype.base64=function(i,t,r){return this.canvas(i).toDataURL(t,r)},e.prototype.canvas=function(i,t){var r=this.renderer,n,s=!1,o,a=!1;i&&(i instanceof oi?o=i:(o=this.renderer.generateTexture(i),a=!0)),o?(n=o.baseTexture.resolution,t=t??o.frame,s=!1,r.renderTexture.bind(o)):(n=r.resolution,t||(t=Hg,t.width=r.width,t.height=r.height),s=!0,r.renderTexture.bind(null));var h=Math.round(t.width*n),l=Math.round(t.height*n),u=new Ic(h,l,1),c=new Uint8Array(Xg*h*l),f=r.gl;f.readPixels(Math.round(t.x*n),Math.round(t.y*n),h,l,f.RGBA,f.UNSIGNED_BYTE,c);var d=u.context.getImageData(0,0,h,l);if(e.arrayPostDivide(c,d.data),u.context.putImageData(d,0,0),s){var A=new Ic(u.width,u.height,1);A.context.scale(1,-1),A.context.drawImage(u.canvas,0,-l),u.destroy(),u=A}return a&&o.destroy(!0),u.canvas},e.prototype.pixels=function(i,t){var r=this.renderer,n,s,o=!1;i&&(i instanceof oi?s=i:(s=this.renderer.generateTexture(i),o=!0)),s?(n=s.baseTexture.resolution,t=t??s.frame,r.renderTexture.bind(s)):(n=r.resolution,t||(t=Hg,t.width=r.width,t.height=r.height),r.renderTexture.bind(null));var a=Math.round(t.width*n),h=Math.round(t.height*n),l=new Uint8Array(Xg*a*h),u=r.gl;return u.readPixels(Math.round(t.x*n),Math.round(t.y*n),a,h,u.RGBA,u.UNSIGNED_BYTE,l),o&&s.destroy(!0),e.arrayPostDivide(l,l),l},e.prototype.destroy=function(){this.renderer=null},e.arrayPostDivide=function(i,t){for(var r=0;r<i.length;r+=4){var n=t[r+3]=i[r+3];n!==0?(t[r]=Math.round(Math.min(i[r]*255/n,255)),t[r+1]=Math.round(Math.min(i[r+1]*255/n,255)),t[r+2]=Math.round(Math.min(i[r+2]*255/n,255))):(t[r]=i[r],t[r+1]=i[r+1],t[r+2]=i[r+2])}},e.extension={name:"extract",type:Zt.RendererPlugin},e}();/*!
 * @pixi/loaders - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Qa=function(){function e(i,t,r){t===void 0&&(t=!1),this._fn=i,this._once=t,this._thisArg=r,this._next=this._prev=this._owner=null}return e.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},e}();function Yg(e,i){return e._head?(e._tail._next=i,i._prev=e._tail,e._tail=i):(e._head=i,e._tail=i),i._owner=e,i}var yr=function(){function e(){this._head=this._tail=void 0}return e.prototype.handlers=function(i){i===void 0&&(i=!1);var t=this._head;if(i)return!!t;for(var r=[];t;)r.push(t),t=t._next;return r},e.prototype.has=function(i){if(!(i instanceof Qa))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return i._owner===this},e.prototype.dispatch=function(){for(var i=arguments,t=[],r=0;r<arguments.length;r++)t[r]=i[r];var n=this._head;if(!n)return!1;for(;n;)n._once&&this.detach(n),n._fn.apply(n._thisArg,t),n=n._next;return!0},e.prototype.add=function(i,t){if(t===void 0&&(t=null),typeof i!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return Yg(this,new Qa(i,!1,t))},e.prototype.once=function(i,t){if(t===void 0&&(t=null),typeof i!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return Yg(this,new Qa(i,!0,t))},e.prototype.detach=function(i){if(!(i instanceof Qa))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return i._owner!==this?this:(i._prev&&(i._prev._next=i._next),i._next&&(i._next._prev=i._prev),i===this._head?(this._head=i._next,i._next===null&&(this._tail=null)):i===this._tail&&(this._tail=i._prev,this._tail._next=null),i._owner=null,this)},e.prototype.detachAll=function(){var i=this._head;if(!i)return this;for(this._head=this._tail=null;i;)i._owner=null,i=i._next;return this},e}();function hC(e,i){i=i||{};for(var t={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=t.parser[i.strictMode?"strict":"loose"].exec(e),n={},s=14;s--;)n[t.key[s]]=r[s]||"";return n[t.q.name]={},n[t.key[12]].replace(t.q.parser,function(o,a,h){a&&(n[t.q.name][a]=h)}),n}var vu,Ua=null,rF=0,Vg=200,nF=204,sF=1223,oF=2;function zg(){}function Wg(e,i,t){i&&i.indexOf(".")===0&&(i=i.substring(1)),i&&(e[i]=t)}function yu(e){return e.toString().replace("object ","")}var de=function(){function e(i,t,r){if(this._dequeue=zg,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof i!="string"||typeof t!="string")throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,t.indexOf("data:")===0),this.name=i,this.url=t,this.extension=this._getExtension(),this.data=null,this.crossOrigin=r.crossOrigin===!0?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=zg,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new yr,this.onProgress=new yr,this.onComplete=new yr,this.onAfterMiddleware=new yr}return e.setExtensionLoadType=function(i,t){Wg(e._loadTypeMap,i,t)},e.setExtensionXhrType=function(i,t){Wg(e._xhrTypeMap,i,t)},Object.defineProperty(e.prototype,"isDataUrl",{get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),e.prototype.complete=function(){this._clearEvents(),this._finish()},e.prototype.abort=function(i){if(!this.error){if(this.error=new Error(i),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.prototype.load=function(i){var t=this;if(!this.isLoading){if(this.isComplete){i&&setTimeout(function(){return i(t)},1);return}else i&&this.onComplete.once(i);switch(this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:typeof vu>"u"&&(vu=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),vu&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},e.prototype._hasFlag=function(i){return(this._flags&i)!==0},e.prototype._setFlag=function(i,t){this._flags=t?this._flags|i:this._flags&~i},e.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype._loadElement=function(i){this.metadata.loadElement?this.data=this.metadata.loadElement:i==="image"&&typeof globalThis.Image<"u"?this.data=new Image:this.data=document.createElement(i),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadSourceElement=function(i){if(this.metadata.loadElement?this.data=this.metadata.loadElement:i==="audio"&&typeof globalThis.Audio<"u"?this.data=new Audio:this.data=document.createElement(i),this.data===null){this.abort("Unsupported element: "+i);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(i,this.url[r],Array.isArray(t)?t[r]:t));else{var t=this.metadata.mimeType;this.data.appendChild(this._createSource(i,this.url,Array.isArray(t)?t[0]:t))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var i=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(i.withCredentials=!0),i.open("GET",this.url,!0),i.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?i.responseType=e.XHR_RESPONSE_TYPE.TEXT:i.responseType=this.xhrType,i.addEventListener("error",this._boundXhrOnError,!1),i.addEventListener("timeout",this._boundXhrOnTimeout,!1),i.addEventListener("abort",this._boundXhrOnAbort,!1),i.addEventListener("progress",this._boundOnProgress,!1),i.addEventListener("load",this._boundXhrOnLoad,!1),i.send()},e.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var i=this.xhr=new globalThis.XDomainRequest;i.timeout=this.timeout||5e3,i.onerror=this._boundXhrOnError,i.ontimeout=this._boundXhrOnTimeout,i.onprogress=this._boundOnProgress,i.onload=this._boundXhrOnLoad,i.open("GET",this.url,!0),setTimeout(function(){return i.send()},1)},e.prototype._createSource=function(i,t,r){r||(r=i+"/"+this._getExtension(t));var n=document.createElement("source");return n.src=t,n.type=r,n},e.prototype._onError=function(i){this.abort("Failed to load element using: "+i.target.nodeName)},e.prototype._onProgress=function(i){i&&i.lengthComputable&&this.onProgress.dispatch(this,i.loaded/i.total)},e.prototype._onTimeout=function(){this.abort("Load timed out.")},e.prototype._xhrOnError=function(){var i=this.xhr;this.abort(yu(i)+" Request failed. Status: "+i.status+', text: "'+i.statusText+'"')},e.prototype._xhrOnTimeout=function(){var i=this.xhr;this.abort(yu(i)+" Request timed out.")},e.prototype._xhrOnAbort=function(){var i=this.xhr;this.abort(yu(i)+" Request was aborted by the user.")},e.prototype._xhrOnLoad=function(){var i=this.xhr,t="",r=typeof i.status>"u"?Vg:i.status;(i.responseType===""||i.responseType==="text"||typeof i.responseType>"u")&&(t=i.responseText),r===rF&&(t.length>0||i.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?r=Vg:r===sF&&(r=nF);var n=r/100|0;if(n===oF)if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=t,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t),this.type=e.TYPE.JSON}catch(a){this.abort("Error trying to parse loaded json: "+a);return}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var s=new DOMParser;this.data=s.parseFromString(t,"text/xml")}else{var o=document.createElement("div");o.innerHTML=t,this.data=o}this.type=e.TYPE.XML}catch(a){this.abort("Error trying to parse loaded xml: "+a);return}else this.data=i.response||t;else{this.abort("["+i.status+"] "+i.statusText+": "+i.responseURL);return}this.complete()},e.prototype._determineCrossOrigin=function(i,t){if(i.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";t=t||globalThis.location,Ua||(Ua=document.createElement("a")),Ua.href=i;var r=hC(Ua.href,{strictMode:!0}),n=!r.port&&t.port===""||r.port===t.port,s=r.protocol?r.protocol+":":"";return r.host!==t.hostname||!n||s!==t.protocol?"anonymous":""},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(i){i===void 0&&(i=this.url);var t="";if(this.isDataUrl){var r=i.indexOf("/");t=i.substring(r+1,i.indexOf(";",r))}else{var n=i.indexOf("?"),s=i.indexOf("#"),o=Math.min(n>-1?n:i.length,s>-1?s:i.length);i=i.substring(0,o),t=i.substring(i.lastIndexOf(".")+1)}return t.toLowerCase()},e.prototype._getMimeFromXhrType=function(i){switch(i){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},e}();(function(e){(function(i){i[i.NONE=0]="NONE",i[i.DATA_URL=1]="DATA_URL",i[i.COMPLETE=2]="COMPLETE",i[i.LOADING=4]="LOADING"})(e.STATUS_FLAGS||(e.STATUS_FLAGS={})),function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.JSON=1]="JSON",i[i.XML=2]="XML",i[i.IMAGE=3]="IMAGE",i[i.AUDIO=4]="AUDIO",i[i.VIDEO=5]="VIDEO",i[i.TEXT=6]="TEXT"}(e.TYPE||(e.TYPE={})),function(i){i[i.XHR=1]="XHR",i[i.IMAGE=2]="IMAGE",i[i.AUDIO=3]="AUDIO",i[i.VIDEO=4]="VIDEO"}(e.LOAD_TYPE||(e.LOAD_TYPE={})),function(i){i.DEFAULT="text",i.BUFFER="arraybuffer",i.BLOB="blob",i.DOCUMENT="document",i.JSON="json",i.TEXT="text"}(e.XHR_RESPONSE_TYPE||(e.XHR_RESPONSE_TYPE={})),e._loadTypeMap={gif:e.LOAD_TYPE.IMAGE,png:e.LOAD_TYPE.IMAGE,bmp:e.LOAD_TYPE.IMAGE,jpg:e.LOAD_TYPE.IMAGE,jpeg:e.LOAD_TYPE.IMAGE,tif:e.LOAD_TYPE.IMAGE,tiff:e.LOAD_TYPE.IMAGE,webp:e.LOAD_TYPE.IMAGE,tga:e.LOAD_TYPE.IMAGE,svg:e.LOAD_TYPE.IMAGE,"svg+xml":e.LOAD_TYPE.IMAGE,mp3:e.LOAD_TYPE.AUDIO,ogg:e.LOAD_TYPE.AUDIO,wav:e.LOAD_TYPE.AUDIO,mp4:e.LOAD_TYPE.VIDEO,webm:e.LOAD_TYPE.VIDEO},e._xhrTypeMap={xhtml:e.XHR_RESPONSE_TYPE.DOCUMENT,html:e.XHR_RESPONSE_TYPE.DOCUMENT,htm:e.XHR_RESPONSE_TYPE.DOCUMENT,xml:e.XHR_RESPONSE_TYPE.DOCUMENT,tmx:e.XHR_RESPONSE_TYPE.DOCUMENT,svg:e.XHR_RESPONSE_TYPE.DOCUMENT,tsx:e.XHR_RESPONSE_TYPE.DOCUMENT,gif:e.XHR_RESPONSE_TYPE.BLOB,png:e.XHR_RESPONSE_TYPE.BLOB,bmp:e.XHR_RESPONSE_TYPE.BLOB,jpg:e.XHR_RESPONSE_TYPE.BLOB,jpeg:e.XHR_RESPONSE_TYPE.BLOB,tif:e.XHR_RESPONSE_TYPE.BLOB,tiff:e.XHR_RESPONSE_TYPE.BLOB,webp:e.XHR_RESPONSE_TYPE.BLOB,tga:e.XHR_RESPONSE_TYPE.BLOB,json:e.XHR_RESPONSE_TYPE.JSON,text:e.XHR_RESPONSE_TYPE.TEXT,txt:e.XHR_RESPONSE_TYPE.TEXT,ttf:e.XHR_RESPONSE_TYPE.BUFFER,otf:e.XHR_RESPONSE_TYPE.BUFFER},e.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(de||(de={}));function Jr(){}function aF(e){return function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];if(e===null)throw new Error("Callback was already called.");var s=e;e=null,s.apply(this,r)}}var hF=function(){function e(i,t){this.data=i,this.callback=t}return e}(),mu=function(){function e(i,t){var r=this;if(t===void 0&&(t=1),this.workers=0,this.saturated=Jr,this.unsaturated=Jr,this.empty=Jr,this.drain=Jr,this.error=Jr,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(n,s,o){if(o&&typeof o!="function")throw new Error("task callback must be a function");if(r.started=!0,n==null&&r.idle()){setTimeout(function(){return r.drain()},1);return}var a=new hF(n,typeof o=="function"?o:Jr);s?r._tasks.unshift(a):r._tasks.push(a),setTimeout(r.process,1)},this.process=function(){for(;!r.paused&&r.workers<r.concurrency&&r._tasks.length;){var n=r._tasks.shift();r._tasks.length===0&&r.empty(),r.workers+=1,r.workers===r.concurrency&&r.saturated(),r._worker(n.data,aF(r._next(n)))}},this._worker=i,t===0)throw new Error("Concurrency must not be zero");this.concurrency=t,this.buffer=t/4}return e.prototype._next=function(i){var t=this;return function(){for(var r=arguments,n=[],s=0;s<arguments.length;s++)n[s]=r[s];t.workers-=1,i.callback.apply(i,n),n[0]!=null&&t.error(n[0],i.data),t.workers<=t.concurrency-t.buffer&&t.unsaturated(),t.idle()&&t.drain(),t.process()}},e.prototype.push=function(i,t){this._insert(i,!1,t)},e.prototype.kill=function(){this.workers=0,this.drain=Jr,this.started=!1,this._tasks=[]},e.prototype.unshift=function(i,t){this._insert(i,!0,t)},e.prototype.length=function(){return this._tasks.length},e.prototype.running=function(){return this.workers},e.prototype.idle=function(){return this._tasks.length+this.workers===0},e.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},e.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var i=1;i<=this.concurrency;i++)this.process()}},e.eachSeries=function(i,t,r,n){var s=0,o=i.length;function a(h){if(h||s===o){r&&r(h);return}n?setTimeout(function(){t(i[s++],a)},1):t(i[s++],a)}a()},e.queue=function(i,t){return new e(i,t)},e}(),Iu=100,lF=/(#[\w-]+)?$/,Bo=function(){function e(i,t){var r=this;i===void 0&&(i=""),t===void 0&&(t=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(h,l){return r._loadResource(h,l)},this.resources={},this.baseUrl=i,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(h,l){return r._loadResource(h,l)},this._queue=mu.queue(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new yr,this.onError=new yr,this.onLoad=new yr,this.onStart=new yr,this.onComplete=new yr;for(var n=0;n<e._plugins.length;++n){var s=e._plugins[n],o=s.pre,a=s.use;o&&this.pre(o),a&&this.use(a)}this._protected=!1}return e.prototype._add=function(i,t,r,n){if(this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[i])throw new Error('Resource named "'+i+'" already exists.');if(t=this._prepareUrl(t),this.resources[i]=new de(i,t,r),typeof n=="function"&&this.resources[i].onAfterMiddleware.once(n),this.loading){for(var s=r.parentResource,o=[],a=0;a<s.children.length;++a)s.children[a].isComplete||o.push(s.children[a]);var h=s.progressChunk*(o.length+1),l=h/(o.length+2);s.children.push(this.resources[i]),s.progressChunk=l;for(var a=0;a<o.length;++a)o[a].progressChunk=l;this.resources[i].progressChunk=l}return this._queue.push(this.resources[i]),this},e.prototype.pre=function(i){return this._beforeMiddleware.push(i),this},e.prototype.use=function(i){return this._afterMiddleware.push(i),this},e.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var i in this.resources){var t=this.resources[i];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort("loader reset")}return this.resources={},this},e.prototype.load=function(i){if(ze("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),typeof i=="function"&&this.onComplete.once(i),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=this._queue._tasks.length,r=Iu/t,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=r;this._onStart(),this._queue.resume()}return this},Object.defineProperty(e.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(i){this._queue.concurrency=i},enumerable:!1,configurable:!0}),e.prototype._prepareUrl=function(i){var t=hC(i,{strictMode:!0}),r;if(t.protocol||!t.path||i.indexOf("//")===0?r=i:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&i.charAt(0)!=="/"?r=this.baseUrl+"/"+i:r=this.baseUrl+i,this.defaultQueryString){var n=lF.exec(r)[0];r=r.slice(0,r.length-n.length),r.indexOf("?")!==-1?r+="&"+this.defaultQueryString:r+="?"+this.defaultQueryString,r+=n}return r},e.prototype._loadResource=function(i,t){var r=this;i._dequeue=t,mu.eachSeries(this._beforeMiddleware,function(n,s){n.call(r,i,function(){s(i.isComplete?{}:null)})},function(){i.isComplete?r._onLoad(i):(i._onLoadBinding=i.onComplete.once(r._onLoad,r),i.load())},!0)},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=Iu,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(i){var t=this;i._onLoadBinding=null,this._resourcesParsing.push(i),i._dequeue(),mu.eachSeries(this._afterMiddleware,function(r,n){r.call(t,i,n)},function(){i.onAfterMiddleware.dispatch(i),t.progress=Math.min(Iu,t.progress+i.progressChunk),t.onProgress.dispatch(t,i),i.error?t.onError.dispatch(i.error,t,i):t.onLoad.dispatch(t,i),t._resourcesParsing.splice(t._resourcesParsing.indexOf(i),1),t._queue.idle()&&t._resourcesParsing.length===0&&t._onComplete()},!0)},e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var i=e._shared;return i||(i=new e,i._protected=!0,e._shared=i),i},enumerable:!1,configurable:!0}),e.registerPlugin=function(i){return ze("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),$i.add({type:Zt.Loader,ref:i}),e},e._plugins=[],e}();$i.handleByList(Zt.Loader,Bo._plugins);Bo.prototype.add=function(i,t,r,n){if(Array.isArray(i)){for(var s=0;s<i.length;++s)this.add(i[s]);return this}if(typeof i=="object"&&(r=i,n=t||r.callback||r.onComplete,t=r.url,i=r.name||r.key||r.url),typeof t!="string"&&(n=r,r=t,t=i),typeof t!="string")throw new Error("No url passed to add resource to loader.");return typeof r=="function"&&(n=r,r=null),this._add(i,t,r,n)};var lC=function(){function e(){}return e.init=function(i){i=Object.assign({sharedLoader:!1},i),this.loader=i.sharedLoader?Bo.shared:new Bo},e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e.extension=Zt.Application,e}(),uC=function(){function e(){}return e.add=function(){de.setExtensionLoadType("svg",de.LOAD_TYPE.XHR),de.setExtensionXhrType("svg",de.XHR_RESPONSE_TYPE.TEXT)},e.use=function(i,t){if(i.data&&(i.type===de.TYPE.IMAGE||i.extension==="svg")){var r=i.data,n=i.url,s=i.name,o=i.metadata;Ot.fromLoader(r,n,s,o).then(function(a){i.texture=a,t()}).catch(t)}else t()},e.extension=Zt.Loader,e}(),uF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function cF(e){for(var i="",t=0;t<e.length;){for(var r=[0,0,0],n=[0,0,0,0],s=0;s<r.length;++s)t<e.length?r[s]=e.charCodeAt(t++)&255:r[s]=0;n[0]=r[0]>>2,n[1]=(r[0]&3)<<4|r[1]>>4,n[2]=(r[1]&15)<<2|r[2]>>6,n[3]=r[2]&63;var o=t-(e.length-1);switch(o){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64;break}for(var s=0;s<n.length;++s)i+=uF.charAt(n[s])}return i}function fF(e,i){if(!e.data){i();return}if(e.xhr&&e.xhrType===de.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof e.data=="string"){var t=e.xhr.getResponseHeader("content-type");if(t&&t.indexOf("image")===0){e.data=new Image,e.data.src="data:"+t+";base64,"+cF(e.xhr.responseText),e.type=de.TYPE.IMAGE,e.data.onload=function(){e.data.onload=null,i()};return}}else if(e.data.type.indexOf("image")===0){var r=globalThis.URL||globalThis.webkitURL,n=r.createObjectURL(e.data);e.blob=e.data,e.data=new Image,e.data.src=n,e.type=de.TYPE.IMAGE,e.data.onload=function(){r.revokeObjectURL(n),e.data.onload=null,i()};return}}i()}var dF=function(){function e(){}return e.extension=Zt.Loader,e.use=fF,e}();$i.add(uC,dF);/*!
 * @pixi/compressed-textures - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var te,Yt;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"})(Yt||(Yt={}));var Ro=(te={},te[Yt.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,te[Yt.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,te[Yt.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,te[Yt.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,te[Yt.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,te[Yt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,te[Yt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,te[Yt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,te[Yt.COMPRESSED_R11_EAC]=.5,te[Yt.COMPRESSED_SIGNED_R11_EAC]=.5,te[Yt.COMPRESSED_RG11_EAC]=1,te[Yt.COMPRESSED_SIGNED_RG11_EAC]=1,te[Yt.COMPRESSED_RGB8_ETC2]=.5,te[Yt.COMPRESSED_RGBA8_ETC2_EAC]=1,te[Yt.COMPRESSED_SRGB8_ETC2]=.5,te[Yt.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,te[Yt.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,te[Yt.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,te[Yt.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,te[Yt.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,te[Yt.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,te[Yt.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,te[Yt.COMPRESSED_RGB_ETC1_WEBGL]=.5,te[Yt.COMPRESSED_RGB_ATC_WEBGL]=.5,te[Yt.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,te[Yt.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,te);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Mc=function(e,i){return Mc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Mc(e,i)};function cC(e,i){Mc(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}function AF(e,i,t,r){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(c){o(c)}}function h(u){try{l(r.throw(u))}catch(c){o(c)}}function l(u){u.done?s(u.value):n(u.value).then(a,h)}l((r=r.apply(e,i||[])).next())})}function pF(e,i){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return h([l,u])}}function h(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,n&&(s=l[0]&2?n.return:l[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,l[1])).done)return s;switch(n=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,n=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=i.call(e,t)}catch(u){l=[6,u],n=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var fC=function(e){cC(i,e);function i(t,r){r===void 0&&(r={width:1,height:1,autoLoad:!0});var n=this,s,o;return typeof t=="string"?(s=t,o=new Uint8Array):(s=null,o=t),n=e.call(this,o,r)||this,n.origin=s,n.buffer=o?new mh(o):null,n.origin&&r.autoLoad!==!1&&n.load(),o&&o.length&&(n.loaded=!0,n.onBlobLoaded(n.buffer.rawBinaryData)),n}return i.prototype.onBlobLoaded=function(t){},i.prototype.load=function(){return AF(this,void 0,Promise,function(){var t,r,n;return pF(this,function(s){switch(s.label){case 0:return[4,fetch(this.origin)];case 1:return t=s.sent(),[4,t.blob()];case 2:return r=s.sent(),[4,r.arrayBuffer()];case 3:return n=s.sent(),this.data=new Uint32Array(n),this.buffer=new mh(n),this.loaded=!0,this.onBlobLoaded(n),this.update(),[2,this]}})})},i}(Fn),Eh=function(e){cC(i,e);function i(t,r){var n=e.call(this,t,r)||this;return n.format=r.format,n.levels=r.levels||1,n._width=r.width,n._height=r.height,n._extension=i._formatToExtension(n.format),(r.levelBuffers||n.buffer)&&(n._levelBuffers=r.levelBuffers||i._createLevelBuffers(t instanceof Uint8Array?t:n.buffer.uint8View,n.format,n.levels,4,4,n.width,n.height)),n}return i.prototype.upload=function(t,r,n){var s=t.gl,o=t.context.extensions[this._extension];if(!o)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var a=0,h=this.levels;a<h;a++){var l=this._levelBuffers[a],u=l.levelID,c=l.levelWidth,f=l.levelHeight,d=l.levelBuffer;s.compressedTexImage2D(s.TEXTURE_2D,u,this.format,c,f,0,d)}return!0},i.prototype.onBlobLoaded=function(){this._levelBuffers=i._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},i._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},i._createLevelBuffers=function(t,r,n,s,o,a,h){for(var l=new Array(n),u=t.byteOffset,c=a,f=h,d=c+s-1&~(s-1),A=f+o-1&~(o-1),p=d*A*Ro[r],g=0;g<n;g++)l[g]={levelID:g,levelWidth:n>1?c:d,levelHeight:n>1?f:A,levelBuffer:new Uint8Array(t.buffer,u,p)},u+=p,c=c>>1||1,f=f>>1||1,d=c+s-1&~(s-1),A=f+o-1&~(o-1),p=d*A*Ro[r];return l},i}(fC),dC=function(){function e(){}return e.use=function(i,t){var r=i.data,n=this;if(i.type===de.TYPE.JSON&&r&&r.cacheID&&r.textures){for(var s=r.textures,o=void 0,a=void 0,h=0,l=s.length;h<l;h++){var u=s[h],c=u.src,f=u.format;if(f||(a=c),e.textureFormats[f]){o=c;break}}if(o=o||a,!o){t(new Error("Cannot load compressed-textures in "+i.url+", make sure you provide a fallback"));return}if(o===i.url){t(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var d={crossOrigin:i.crossOrigin,metadata:i.metadata.imageMetadata,parentResource:i},A=dn.resolve(i.url.replace(n.baseUrl,""),o),p=r.cacheID;n.add(p,A,d,function(g){if(g.error){t(g.error);return}var y=g.texture,I=y===void 0?null:y,E=g.textures,w=E===void 0?{}:E;Object.assign(i,{texture:I,textures:w}),t()})}else t()},Object.defineProperty(e,"textureExtensions",{get:function(){if(!e._textureExtensions){var i=ft.ADAPTER.createCanvas(),t=i.getContext("webgl");if(!t)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var r={s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};e._textureExtensions=r}return e._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(e,"textureFormats",{get:function(){if(!e._textureFormats){var i=e.textureExtensions;e._textureFormats={};for(var t in i){var r=i[t];r&&Object.assign(e._textureFormats,Object.getPrototypeOf(r))}}return e._textureFormats},enumerable:!1,configurable:!0}),e.extension=Zt.Loader,e}();function AC(e,i,t){var r={textures:{},texture:null};if(!i)return r;var n=i.map(function(s){return new Ot(new Wt(s,Object.assign({mipmap:mi.OFF,alphaMode:Ii.NO_PREMULTIPLIED_ALPHA},t)))});return n.forEach(function(s,o){var a=s.baseTexture,h=e+"-"+(o+1);Wt.addToCache(a,h),Ot.addToCache(s,h),o===0&&(Wt.addToCache(a,e),Ot.addToCache(s,e),r.texture=s),r.textures[h]=s}),r}var Ls,Bi,Cu=4,Ga=124,gF=32,jg=20,vF=542327876,ka={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},yF={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Ha={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},Si;(function(e){e[e.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",e[e.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",e[e.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",e[e.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",e[e.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",e[e.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",e[e.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",e[e.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",e[e.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",e[e.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",e[e.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",e[e.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",e[e.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",e[e.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",e[e.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",e[e.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",e[e.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",e[e.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",e[e.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",e[e.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",e[e.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",e[e.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",e[e.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",e[e.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",e[e.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",e[e.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",e[e.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",e[e.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",e[e.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",e[e.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",e[e.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",e[e.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",e[e.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",e[e.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",e[e.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",e[e.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",e[e.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",e[e.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",e[e.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",e[e.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",e[e.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",e[e.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",e[e.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",e[e.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",e[e.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",e[e.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",e[e.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",e[e.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",e[e.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",e[e.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",e[e.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",e[e.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",e[e.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",e[e.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",e[e.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",e[e.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",e[e.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",e[e.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",e[e.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",e[e.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",e[e.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",e[e.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",e[e.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",e[e.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",e[e.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",e[e.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",e[e.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",e[e.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",e[e.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",e[e.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",e[e.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",e[e.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",e[e.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",e[e.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",e[e.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",e[e.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",e[e.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",e[e.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",e[e.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",e[e.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",e[e.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",e[e.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",e[e.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",e[e.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",e[e.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",e[e.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",e[e.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",e[e.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",e[e.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",e[e.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",e[e.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",e[e.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",e[e.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",e[e.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",e[e.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",e[e.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",e[e.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",e[e.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",e[e.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",e[e.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",e[e.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",e[e.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",e[e.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",e[e.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",e[e.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",e[e.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",e[e.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",e[e.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",e[e.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",e[e.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",e[e.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",e[e.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(Si||(Si={}));var Qc;(function(e){e[e.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",e[e.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",e[e.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(Qc||(Qc={}));var mF=1,IF=2,CF=4,_F=64,xF=512,EF=131072,bF=827611204,wF=861165636,TF=894720068,BF=808540228,RF=4,PF=(Ls={},Ls[bF]=Yt.COMPRESSED_RGBA_S3TC_DXT1_EXT,Ls[wF]=Yt.COMPRESSED_RGBA_S3TC_DXT3_EXT,Ls[TF]=Yt.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ls),SF=(Bi={},Bi[Si.DXGI_FORMAT_BC1_TYPELESS]=Yt.COMPRESSED_RGBA_S3TC_DXT1_EXT,Bi[Si.DXGI_FORMAT_BC1_UNORM]=Yt.COMPRESSED_RGBA_S3TC_DXT1_EXT,Bi[Si.DXGI_FORMAT_BC2_TYPELESS]=Yt.COMPRESSED_RGBA_S3TC_DXT3_EXT,Bi[Si.DXGI_FORMAT_BC2_UNORM]=Yt.COMPRESSED_RGBA_S3TC_DXT3_EXT,Bi[Si.DXGI_FORMAT_BC3_TYPELESS]=Yt.COMPRESSED_RGBA_S3TC_DXT5_EXT,Bi[Si.DXGI_FORMAT_BC3_UNORM]=Yt.COMPRESSED_RGBA_S3TC_DXT5_EXT,Bi[Si.DXGI_FORMAT_BC1_UNORM_SRGB]=Yt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Bi[Si.DXGI_FORMAT_BC2_UNORM_SRGB]=Yt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Bi[Si.DXGI_FORMAT_BC3_UNORM_SRGB]=Yt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Bi);function pC(e){var i=new Uint32Array(e),t=i[0];if(t!==vF)throw new Error("Invalid DDS file magic word");var r=new Uint32Array(e,0,Ga/Uint32Array.BYTES_PER_ELEMENT),n=r[ka.HEIGHT],s=r[ka.WIDTH],o=r[ka.MIPMAP_COUNT],a=new Uint32Array(e,ka.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,gF/Uint32Array.BYTES_PER_ELEMENT),h=a[mF];if(h&CF){var l=a[yF.FOURCC];if(l!==BF){var u=PF[l],c=Cu+Ga,f=new Uint8Array(e,c),d=new Eh(f,{format:u,width:s,height:n,levels:o});return[d]}var A=Cu+Ga,p=new Uint32Array(i.buffer,A,jg/Uint32Array.BYTES_PER_ELEMENT),g=p[Ha.DXGI_FORMAT],y=p[Ha.RESOURCE_DIMENSION],I=p[Ha.MISC_FLAG],E=p[Ha.ARRAY_SIZE],w=SF[g];if(w===void 0)throw new Error("DDSParser cannot parse texture data with DXGI format "+g);if(I===RF)throw new Error("DDSParser does not support cubemap textures");if(y===Qc.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var T=new Array,_=Cu+Ga+jg;if(E===1)T.push(new Uint8Array(e,_));else{for(var F=Ro[w],R=0,S=s,D=n,$=0;$<o;$++){var z=Math.max(1,S+3&-4),q=Math.max(1,D+3&-4),_t=z*q*F;R+=_t,S=S>>>1,D=D>>>1}for(var V=_,$=0;$<E;$++)T.push(new Uint8Array(e,V,R)),V+=R}return T.map(function(X){return new Eh(X,{format:w,width:s,height:n,levels:o})})}throw h&_F?new Error("DDSParser does not support uncompressed texture data."):h&xF?new Error("DDSParser does not supported YUV uncompressed texture data."):h&EF?new Error("DDSParser does not support single-channel (lumninance) texture data!"):h&IF?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var Tr,hr,Ms,Kg=[171,75,84,88,32,49,49,187,13,10,26,10],NF=67305985,Ri={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Uc=64,Gc=(Tr={},Tr[Dt.UNSIGNED_BYTE]=1,Tr[Dt.UNSIGNED_SHORT]=2,Tr[Dt.INT]=4,Tr[Dt.UNSIGNED_INT]=4,Tr[Dt.FLOAT]=4,Tr[Dt.HALF_FLOAT]=8,Tr),gC=(hr={},hr[ut.RGBA]=4,hr[ut.RGB]=3,hr[ut.RG]=2,hr[ut.RED]=1,hr[ut.LUMINANCE]=1,hr[ut.LUMINANCE_ALPHA]=2,hr[ut.ALPHA]=1,hr),vC=(Ms={},Ms[Dt.UNSIGNED_SHORT_4_4_4_4]=2,Ms[Dt.UNSIGNED_SHORT_5_5_5_1]=2,Ms[Dt.UNSIGNED_SHORT_5_6_5]=2,Ms);function yC(e,i,t){t===void 0&&(t=!1);var r=new DataView(i);if(!OF(e,r))return null;var n=r.getUint32(Ri.ENDIANNESS,!0)===NF,s=r.getUint32(Ri.GL_TYPE,n),o=r.getUint32(Ri.GL_FORMAT,n),a=r.getUint32(Ri.GL_INTERNAL_FORMAT,n),h=r.getUint32(Ri.PIXEL_WIDTH,n),l=r.getUint32(Ri.PIXEL_HEIGHT,n)||1,u=r.getUint32(Ri.PIXEL_DEPTH,n)||1,c=r.getUint32(Ri.NUMBER_OF_ARRAY_ELEMENTS,n)||1,f=r.getUint32(Ri.NUMBER_OF_FACES,n),d=r.getUint32(Ri.NUMBER_OF_MIPMAP_LEVELS,n),A=r.getUint32(Ri.BYTES_OF_KEY_VALUE_DATA,n);if(l===0||u!==1)throw new Error("Only 2D textures are supported");if(f!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(c!==1)throw new Error("WebGL does not support array textures");var p=4,g=4,y=h+3&-4,I=l+3&-4,E=new Array(c),w=h*l;s===0&&(w=y*I);var T;if(s!==0?Gc[s]?T=Gc[s]*gC[o]:T=vC[s]:T=Ro[a],T===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var _=t?FF(r,A,n):null,F=w*T,R=F,S=h,D=l,$=y,z=I,q=Uc+A,_t=0;_t<d;_t++){for(var V=r.getUint32(q,n),X=q+4,et=0;et<c;et++){var At=E[et];At||(At=E[et]=new Array(d)),At[_t]={levelID:_t,levelWidth:d>1||s!==0?S:$,levelHeight:d>1||s!==0?D:z,levelBuffer:new Uint8Array(i,X,R)},X+=R}q+=V+4,q=q%4!==0?q+4-q%4:q,S=S>>1||1,D=D>>1||1,$=S+p-1&~(p-1),z=D+g-1&~(g-1),R=$*z*T}return s!==0?{uncompressed:E.map(function(Z){var N=Z[0].levelBuffer,W=!1;return s===Dt.FLOAT?N=new Float32Array(Z[0].levelBuffer.buffer,Z[0].levelBuffer.byteOffset,Z[0].levelBuffer.byteLength/4):s===Dt.UNSIGNED_INT?(W=!0,N=new Uint32Array(Z[0].levelBuffer.buffer,Z[0].levelBuffer.byteOffset,Z[0].levelBuffer.byteLength/4)):s===Dt.INT&&(W=!0,N=new Int32Array(Z[0].levelBuffer.buffer,Z[0].levelBuffer.byteOffset,Z[0].levelBuffer.byteLength/4)),{resource:new Fn(N,{width:Z[0].levelWidth,height:Z[0].levelHeight}),type:s,format:W?DF(o):o}}),kvData:_}:{compressed:E.map(function(Z){return new Eh(null,{format:a,width:h,height:l,levels:d,levelBuffers:Z})}),kvData:_}}function OF(e,i){for(var t=0;t<Kg.length;t++)if(i.getUint8(t)!==Kg[t])return console.error(e+" is not a valid *.ktx file!"),!1;return!0}function DF(e){switch(e){case ut.RGBA:return ut.RGBA_INTEGER;case ut.RGB:return ut.RGB_INTEGER;case ut.RG:return ut.RG_INTEGER;case ut.RED:return ut.RED_INTEGER;default:return e}}function FF(e,i,t){for(var r=new Map,n=0;n<i;){var s=e.getUint32(Uc+n,t),o=Uc+n+4,a=3-(s+3)%4;if(s===0||s>i-n){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var h=0;h<s&&e.getUint8(o+h)!==0;h++);if(h===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var l=new TextDecoder().decode(new Uint8Array(e.buffer,o,h)),u=new DataView(e.buffer,o+h+1,s-h-1);r.set(l,u),n+=4+s+a}return r}de.setExtensionXhrType("dds",de.XHR_RESPONSE_TYPE.BUFFER);var mC=function(){function e(){}return e.use=function(i,t){if(i.extension==="dds"&&i.data)try{Object.assign(i,AC(i.name||i.url,pC(i.data),i.metadata))}catch(r){t(r);return}t()},e.extension=Zt.Loader,e}();de.setExtensionXhrType("ktx",de.XHR_RESPONSE_TYPE.BUFFER);var IC=function(){function e(){}return e.use=function(i,t){if(i.extension==="ktx"&&i.data)try{var r=i.name||i.url,n=yC(r,i.data,this.loadKeyValueData),s=n.compressed,o=n.uncompressed,a=n.kvData;if(s){var h=AC(r,s,i.metadata);if(a&&h.textures)for(var l in h.textures)h.textures[l].baseTexture.ktxKeyValueData=a;Object.assign(i,h)}else if(o){var u={};o.forEach(function(c,f){var d=new Ot(new Wt(c.resource,{mipmap:mi.OFF,alphaMode:Ii.NO_PREMULTIPLIED_ALPHA,type:c.type,format:c.format})),A=r+"-"+(f+1);a&&(d.baseTexture.ktxKeyValueData=a),Wt.addToCache(d.baseTexture,A),Ot.addToCache(d,A),f===0&&(u[r]=d,Wt.addToCache(d.baseTexture,r),Ot.addToCache(d,r)),u[A]=d}),Object.assign(i,{textures:u})}}catch(c){t(c);return}t()},e.extension=Zt.Loader,e.loadKeyValueData=!1,e}();/*!
 * @pixi/particle-container - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var kc=function(e,i){return kc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},kc(e,i)};function CC(e,i){kc(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var LF=function(e){CC(i,e);function i(t,r,n,s){t===void 0&&(t=1500),n===void 0&&(n=16384),s===void 0&&(s=!1);var o=e.call(this)||this,a=16384;return n>a&&(n=a),o._properties=[!1,!0,!1,!1,!1],o._maxSize=t,o._batchSize=n,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=Nt.NORMAL,o.autoResize=s,o.roundPixels=!0,o.baseTexture=null,o.setProperties(r),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return i.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},i.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(i.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,Re(t,this.tintRgb)},enumerable:!1,configurable:!0}),i.prototype.render=function(t){var r=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return r.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},i.prototype.onChildrenChange=function(t){for(var r=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<r;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[r]=++this._updateID},i.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},i.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},i}($t),$g=function(){function e(i,t,r){this.geometry=new Ts,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<i.length;++n){var s=i[n];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||Dt.FLOAT,offset:s.offset},t[n]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var i=this.geometry,t=0;this.indexBuffer=new Ce(uI(this.size),!0,!0),i.addIndex(this.indexBuffer),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){var n=this.dynamicProperties[r];n.offset=t,t+=n.size,this.dynamicStride+=n.size}var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new Ce(this.dynamicData,!1,!1);var o=0;this.staticStride=0;for(var r=0;r<this.staticProperties.length;++r){var n=this.staticProperties[r];n.offset=o,o+=n.size,this.staticStride+=n.size}var a=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new Ce(this.staticData,!0,!1);for(var r=0;r<this.dynamicProperties.length;++r){var n=this.dynamicProperties[r];i.addAttribute(n.attributeName,this.dynamicBuffer,0,n.type===Dt.UNSIGNED_BYTE,n.type,this.dynamicStride*4,n.offset*4)}for(var r=0;r<this.staticProperties.length;++r){var n=this.staticProperties[r];i.addAttribute(n.attributeName,this.staticBuffer,0,n.type===Dt.UNSIGNED_BYTE,n.type,this.staticStride*4,n.offset*4)}},e.prototype.uploadDynamic=function(i,t,r){for(var n=0;n<this.dynamicProperties.length;n++){var s=this.dynamicProperties[n];s.uploadFunction(i,t,r,s.type===Dt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++},e.prototype.uploadStatic=function(i,t,r){for(var n=0;n<this.staticProperties.length;n++){var s=this.staticProperties[n];s.uploadFunction(i,t,r,s.type===Dt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++},e.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},e}(),MF=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,QF=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,_C=function(e){CC(i,e);function i(t){var r=e.call(this,t)||this;return r.shader=null,r.properties=null,r.tempMatrix=new kt,r.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:r.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:r.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:r.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:r.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Dt.UNSIGNED_BYTE,uploadFunction:r.uploadTint,offset:0}],r.shader=Cr.from(QF,MF,{}),r.state=Xr.for2d(),r}return i.prototype.render=function(t){var r=t.children,n=t._maxSize,s=t._batchSize,o=this.renderer,a=r.length;if(a!==0){a>n&&!t.autoResize&&(a=n);var h=t._buffers;h||(h=t._buffers=this.generateBuffers(t));var l=r[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=Ed(t.blendMode,u),o.state.set(this.state);var c=o.gl,f=t.worldTransform.copyTo(this.tempMatrix);f.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=lI(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,u),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);for(var d=!1,A=0,p=0;A<a;A+=s,p+=1){var g=a-A;g>s&&(g=s),p>=h.length&&h.push(this._generateOneMoreBuffer(t));var y=h[p];y.uploadDynamic(r,A,g);var I=t._bufferUpdateIDs[p]||0;d=d||y._updateID<I,d&&(y._updateID=t._updateID,y.uploadStatic(r,A,g)),o.geometry.bind(y.geometry),c.drawElements(c.TRIANGLES,g*6,c.UNSIGNED_SHORT,0)}}},i.prototype.generateBuffers=function(t){for(var r=[],n=t._maxSize,s=t._batchSize,o=t._properties,a=0;a<n;a+=s)r.push(new $g(this.properties,o,s));return r},i.prototype._generateOneMoreBuffer=function(t){var r=t._batchSize,n=t._properties;return new $g(this.properties,n,r)},i.prototype.uploadVertices=function(t,r,n,s,o,a){for(var h=0,l=0,u=0,c=0,f=0;f<n;++f){var d=t[r+f],A=d._texture,p=d.scale.x,g=d.scale.y,y=A.trim,I=A.orig;y?(l=y.x-d.anchor.x*I.width,h=l+y.width,c=y.y-d.anchor.y*I.height,u=c+y.height):(h=I.width*(1-d.anchor.x),l=I.width*-d.anchor.x,u=I.height*(1-d.anchor.y),c=I.height*-d.anchor.y),s[a]=l*p,s[a+1]=c*g,s[a+o]=h*p,s[a+o+1]=c*g,s[a+o*2]=h*p,s[a+o*2+1]=u*g,s[a+o*3]=l*p,s[a+o*3+1]=u*g,a+=o*4}},i.prototype.uploadPosition=function(t,r,n,s,o,a){for(var h=0;h<n;h++){var l=t[r+h].position;s[a]=l.x,s[a+1]=l.y,s[a+o]=l.x,s[a+o+1]=l.y,s[a+o*2]=l.x,s[a+o*2+1]=l.y,s[a+o*3]=l.x,s[a+o*3+1]=l.y,a+=o*4}},i.prototype.uploadRotation=function(t,r,n,s,o,a){for(var h=0;h<n;h++){var l=t[r+h].rotation;s[a]=l,s[a+o]=l,s[a+o*2]=l,s[a+o*3]=l,a+=o*4}},i.prototype.uploadUvs=function(t,r,n,s,o,a){for(var h=0;h<n;++h){var l=t[r+h]._texture._uvs;l?(s[a]=l.x0,s[a+1]=l.y0,s[a+o]=l.x1,s[a+o+1]=l.y1,s[a+o*2]=l.x2,s[a+o*2+1]=l.y2,s[a+o*3]=l.x3,s[a+o*3+1]=l.y3,a+=o*4):(s[a]=0,s[a+1]=0,s[a+o]=0,s[a+o+1]=0,s[a+o*2]=0,s[a+o*2+1]=0,s[a+o*3]=0,s[a+o*3+1]=0,a+=o*4)}},i.prototype.uploadTint=function(t,r,n,s,o,a){for(var h=0;h<n;++h){var l=t[r+h],u=l._texture.baseTexture.alphaMode>0,c=l.alpha,f=c<1&&u?Bl(l._tintRGB,c):l._tintRGB+(c*255<<24);s[a]=f,s[a+o]=f,s[a+o*2]=f,s[a+o*3]=f,a+=o*4}},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},i.extension={name:"particle",type:Zt.RendererPlugin},i}(aa);/*!
 * @pixi/sprite - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Hc=function(e,i){return Hc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Hc(e,i)};function UF(e,i){Hc(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var Qs=new M,GF=new Uint16Array([0,1,2,0,2,3]),Ke=function(e){UF(i,e);function i(t){var r=e.call(this)||this;return r._anchor=new mr(r._onAnchorUpdate,r,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=Nt.NORMAL,r._cachedTint=16777215,r.uvs=null,r.texture=t||Ot.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.indices=GF,r.pluginName="batch",r.isSprite=!0,r._roundPixels=ft.ROUND_PIXELS,r}return i.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=An(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=An(this.scale.y)*this._height/this._texture.orig.height)},i.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},i.prototype.calculateVertices=function(){var t=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===t._updateID)){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var r=this.transform.worldTransform,n=r.a,s=r.b,o=r.c,a=r.d,h=r.tx,l=r.ty,u=this.vertexData,c=t.trim,f=t.orig,d=this._anchor,A=0,p=0,g=0,y=0;if(c?(p=c.x-d._x*f.width,A=p+c.width,y=c.y-d._y*f.height,g=y+c.height):(p=-d._x*f.width,A=p+f.width,y=-d._y*f.height,g=y+f.height),u[0]=n*p+o*y+h,u[1]=a*y+s*p+l,u[2]=n*A+o*y+h,u[3]=a*y+s*A+l,u[4]=n*A+o*g+h,u[5]=a*g+s*A+l,u[6]=n*p+o*g+h,u[7]=a*g+s*p+l,this._roundPixels)for(var I=ft.RESOLUTION,E=0;E<u.length;++E)u[E]=Math.round((u[E]*I|0)/I)}},i.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,r=this.vertexTrimmedData,n=t.orig,s=this._anchor,o=this.transform.worldTransform,a=o.a,h=o.b,l=o.c,u=o.d,c=o.tx,f=o.ty,d=-s._x*n.width,A=d+n.width,p=-s._y*n.height,g=p+n.height;r[0]=a*d+l*p+c,r[1]=u*p+h*d+f,r[2]=a*A+l*p+c,r[3]=u*p+h*A+f,r[4]=a*A+l*g+c,r[5]=u*g+h*A+f,r[6]=a*d+l*g+c,r[7]=u*g+h*d+f},i.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},i.prototype._calculateBounds=function(){var t=this._texture.trim,r=this._texture.orig;!t||t.width===r.width&&t.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},i.prototype.getLocalBounds=function(t){return this.children.length===0?(this._localBounds||(this._localBounds=new _i),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Tt),t=this._localBoundsRect),this._localBounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},i.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Qs);var r=this._texture.orig.width,n=this._texture.orig.height,s=-r*this.anchor.x,o=0;return Qs.x>=s&&Qs.x<s+r&&(o=-n*this.anchor.y,Qs.y>=o&&Qs.y<o+n)},i.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var r=typeof t=="boolean"?t:t&&t.texture;if(r){var n=typeof t=="boolean"?t:t&&t.baseTexture;this._texture.destroy(!!n)}this._texture=null},i.from=function(t,r){var n=t instanceof Ot?t:Ot.from(t,r);return new i(n)},Object.defineProperty(i.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var r=An(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var r=An(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Ot.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),i}($t);/*!
 * @pixi/text - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Xc=function(e,i){return Xc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Xc(e,i)};function kF(e,i){Xc(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var ms;(function(e){e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(ms||(ms={}));var _u={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:ms.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},HF=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Nn=function(){function e(i){this.styleID=0,this.reset(),Eu(this,i,i)}return e.prototype.clone=function(){var i={};return Eu(i,this,_u),new e(i)},e.prototype.reset=function(){Eu(this,_u,_u)},Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(i){this._align!==i&&(this._align=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakWords",{get:function(){return this._breakWords},set:function(i){this._breakWords!==i&&(this._breakWords=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(i){this._dropShadow!==i&&(this._dropShadow=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(i){this._dropShadowAlpha!==i&&(this._dropShadowAlpha=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(i){this._dropShadowAngle!==i&&(this._dropShadowAngle=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(i){this._dropShadowBlur!==i&&(this._dropShadowBlur=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(i){var t=xu(i);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(i){this._dropShadowDistance!==i&&(this._dropShadowDistance=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(i){var t=xu(i);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(i){this._fillGradientType!==i&&(this._fillGradientType=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(i){XF(this._fillGradientStops,i)||(this._fillGradientStops=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(i){this.fontFamily!==i&&(this._fontFamily=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(i){this._fontSize!==i&&(this._fontSize=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(i){this._fontStyle!==i&&(this._fontStyle=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(i){this._fontVariant!==i&&(this._fontVariant=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(i){this._fontWeight!==i&&(this._fontWeight=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(i){this._letterSpacing!==i&&(this._letterSpacing=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(i){this._lineHeight!==i&&(this._lineHeight=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading},set:function(i){this._leading!==i&&(this._leading=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(i){this._lineJoin!==i&&(this._lineJoin=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(i){this._miterLimit!==i&&(this._miterLimit=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._padding},set:function(i){this._padding!==i&&(this._padding=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(i){var t=xu(i);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(i){this._strokeThickness!==i&&(this._strokeThickness=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(i){this._textBaseline!==i&&(this._textBaseline=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trim",{get:function(){return this._trim},set:function(i){this._trim!==i&&(this._trim=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(i){this._whiteSpace!==i&&(this._whiteSpace=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(i){this._wordWrap!==i&&(this._wordWrap=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(i){this._wordWrapWidth!==i&&(this._wordWrapWidth=i,this.styleID++)},enumerable:!1,configurable:!0}),e.prototype.toFontString=function(){var i=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var r=t.length-1;r>=0;r--){var n=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&HF.indexOf(n)<0&&(n='"'+n+'"'),t[r]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+i+" "+t.join(",")},e}();function Jg(e){return typeof e=="number"?_d(e):(typeof e=="string"&&e.indexOf("0x")===0&&(e=e.replace("0x","#")),e)}function xu(e){if(Array.isArray(e)){for(var i=0;i<e.length;++i)e[i]=Jg(e[i]);return e}else return Jg(e)}function XF(e,i){if(!Array.isArray(e)||!Array.isArray(i)||e.length!==i.length)return!1;for(var t=0;t<e.length;++t)if(e[t]!==i[t])return!1;return!0}function Eu(e,i,t){for(var r in t)Array.isArray(i[r])?e[r]=i[r].slice():e[r]=i[r]}var Ji=function(){function e(i,t,r,n,s,o,a,h,l){this.text=i,this.style=t,this.width=r,this.height=n,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=h,this.fontProperties=l}return e.measureText=function(i,t,r,n){n===void 0&&(n=e._canvas),r=r??t.wordWrap;var s=t.toFontString(),o=e.measureFont(s);o.fontSize===0&&(o.fontSize=t.fontSize,o.ascent=t.fontSize);var a=n.getContext("2d");a.font=s;for(var h=r?e.wordWrap(i,t,n):i,l=h.split(/(?:\r\n|\r|\n)/),u=new Array(l.length),c=0,f=0;f<l.length;f++){var d=a.measureText(l[f]).width+(l[f].length-1)*t.letterSpacing;u[f]=d,c=Math.max(c,d)}var A=c+t.strokeThickness;t.dropShadow&&(A+=t.dropShadowDistance);var p=t.lineHeight||o.fontSize+t.strokeThickness,g=Math.max(p,o.fontSize+t.strokeThickness)+(l.length-1)*(p+t.leading);return t.dropShadow&&(g+=t.dropShadowDistance),new e(i,t,A,g,l,u,p+t.leading,c,o)},e.wordWrap=function(i,t,r){r===void 0&&(r=e._canvas);for(var n=r.getContext("2d"),s=0,o="",a="",h=Object.create(null),l=t.letterSpacing,u=t.whiteSpace,c=e.collapseSpaces(u),f=e.collapseNewlines(u),d=!c,A=t.wordWrapWidth+l,p=e.tokenize(i),g=0;g<p.length;g++){var y=p[g];if(e.isNewline(y)){if(!f){a+=e.addLine(o),d=!c,o="",s=0;continue}y=" "}if(c){var I=e.isBreakingSpace(y),E=e.isBreakingSpace(o[o.length-1]);if(I&&E)continue}var w=e.getFromCache(y,l,h,n);if(w>A)if(o!==""&&(a+=e.addLine(o),o="",s=0),e.canBreakWords(y,t.breakWords))for(var T=e.wordWrapSplit(y),_=0;_<T.length;_++){for(var F=T[_],R=1;T[_+R];){var S=T[_+R],D=F[F.length-1];if(!e.canBreakChars(D,S,y,_,t.breakWords))F+=S;else break;R++}_+=F.length-1;var $=e.getFromCache(F,l,h,n);$+s>A&&(a+=e.addLine(o),d=!1,o="",s=0),o+=F,s+=$}else{o.length>0&&(a+=e.addLine(o),o="",s=0);var z=g===p.length-1;a+=e.addLine(y,!z),d=!1,o="",s=0}else w+s>A&&(d=!1,a+=e.addLine(o),o="",s=0),(o.length>0||!e.isBreakingSpace(y)||d)&&(o+=y,s+=w)}return a+=e.addLine(o,!1),a},e.addLine=function(i,t){return t===void 0&&(t=!0),i=e.trimRight(i),i=t?i+`
`:i,i},e.getFromCache=function(i,t,r,n){var s=r[i];if(typeof s!="number"){var o=i.length*t;s=n.measureText(i).width+o,r[i]=s}return s},e.collapseSpaces=function(i){return i==="normal"||i==="pre-line"},e.collapseNewlines=function(i){return i==="normal"},e.trimRight=function(i){if(typeof i!="string")return"";for(var t=i.length-1;t>=0;t--){var r=i[t];if(!e.isBreakingSpace(r))break;i=i.slice(0,-1)}return i},e.isNewline=function(i){return typeof i!="string"?!1:e._newlines.indexOf(i.charCodeAt(0))>=0},e.isBreakingSpace=function(i,t){return typeof i!="string"?!1:e._breakingSpaces.indexOf(i.charCodeAt(0))>=0},e.tokenize=function(i){var t=[],r="";if(typeof i!="string")return t;for(var n=0;n<i.length;n++){var s=i[n],o=i[n+1];if(e.isBreakingSpace(s,o)||e.isNewline(s)){r!==""&&(t.push(r),r=""),t.push(s);continue}r+=s}return r!==""&&t.push(r),t},e.canBreakWords=function(i,t){return t},e.canBreakChars=function(i,t,r,n,s){return!0},e.wordWrapSplit=function(i){return i.split("")},e.measureFont=function(i){if(e._fonts[i])return e._fonts[i];var t={ascent:0,descent:0,fontSize:0},r=e._canvas,n=e._context;n.font=i;var s=e.METRICS_STRING+e.BASELINE_SYMBOL,o=Math.ceil(n.measureText(s).width),a=Math.ceil(n.measureText(e.BASELINE_SYMBOL).width),h=Math.ceil(e.HEIGHT_MULTIPLIER*a);a=a*e.BASELINE_MULTIPLIER|0,r.width=o,r.height=h,n.fillStyle="#f00",n.fillRect(0,0,o,h),n.font=i,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s,0,a);var l=n.getImageData(0,0,o,h).data,u=l.length,c=o*4,f=0,d=0,A=!1;for(f=0;f<a;++f){for(var p=0;p<c;p+=4)if(l[d+p]!==255){A=!0;break}if(!A)d+=c;else break}for(t.ascent=a-f,d=u-c,A=!1,f=h;f>a;--f){for(var p=0;p<c;p+=4)if(l[d+p]!==255){A=!0;break}if(!A)d-=c;else break}return t.descent=f-a,t.fontSize=t.ascent+t.descent,e._fonts[i]=t,t},e.clearMetrics=function(i){i===void 0&&(i=""),i?delete e._fonts[i]:e._fonts={}},Object.defineProperty(e,"_canvas",{get:function(){if(!e.__canvas){var i=void 0;try{var t=new OffscreenCanvas(0,0),r=t.getContext("2d");if(r&&r.measureText)return e.__canvas=t,t;i=ft.ADAPTER.createCanvas()}catch{i=ft.ADAPTER.createCanvas()}i.width=i.height=10,e.__canvas=i}return e.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e,"_context",{get:function(){return e.__context||(e.__context=e._canvas.getContext("2d")),e.__context},enumerable:!1,configurable:!0}),e}();Ji._fonts={};Ji.METRICS_STRING="|ÉqÅ";Ji.BASELINE_SYMBOL="M";Ji.BASELINE_MULTIPLIER=1.4;Ji.HEIGHT_MULTIPLIER=2;Ji._newlines=[10,13];Ji._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var YF={texture:!0,children:!1,baseTexture:!0},Is=function(e){kF(i,e);function i(t,r,n){var s=this,o=!1;n||(n=ft.ADAPTER.createCanvas(),o=!0),n.width=3,n.height=3;var a=Ot.from(n);return a.orig=new Tt,a.trim=new Tt,s=e.call(this,a)||this,s._ownCanvas=o,s.canvas=n,s.context=n.getContext("2d"),s._resolution=ft.RESOLUTION,s._autoResolution=!0,s._text=null,s._style=null,s._styleListener=null,s._font="",s.text=t,s.style=r,s.localStyleID=-1,s}return i.prototype.updateText=function(t){var r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!(!this.dirty&&t)){this._font=this._style.toFontString();var n=this.context,s=Ji.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=s.width,a=s.height,h=s.lines,l=s.lineHeight,u=s.lineWidths,c=s.maxLineWidth,f=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o)+r.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,a)+r.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=r.strokeThickness,n.textBaseline=r.textBaseline,n.lineJoin=r.lineJoin,n.miterLimit=r.miterLimit;for(var d,A,p=r.dropShadow?2:1,g=0;g<p;++g){var y=r.dropShadow&&g===0,I=y?Math.ceil(Math.max(1,a)+r.padding*2):0,E=I*this._resolution;if(y){n.fillStyle="black",n.strokeStyle="black";var w=r.dropShadowColor,T=Re(typeof w=="number"?w:mo(w)),_=r.dropShadowBlur*this._resolution,F=r.dropShadowDistance*this._resolution;n.shadowColor="rgba("+T[0]*255+","+T[1]*255+","+T[2]*255+","+r.dropShadowAlpha+")",n.shadowBlur=_,n.shadowOffsetX=Math.cos(r.dropShadowAngle)*F,n.shadowOffsetY=Math.sin(r.dropShadowAngle)*F+E}else n.fillStyle=this._generateFillStyle(r,h,s),n.strokeStyle=r.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;var R=(l-f.fontSize)/2;(!i.nextLineHeightBehavior||l-f.fontSize<0)&&(R=0);for(var S=0;S<h.length;S++)d=r.strokeThickness/2,A=r.strokeThickness/2+S*l+f.ascent+R,r.align==="right"?d+=c-u[S]:r.align==="center"&&(d+=(c-u[S])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(h[S],d+r.padding,A+r.padding-I,!0),r.fill&&this.drawLetterSpacing(h[S],d+r.padding,A+r.padding-I)}this.updateTexture()}},i.prototype.drawLetterSpacing=function(t,r,n,s){s===void 0&&(s=!1);var o=this._style,a=o.letterSpacing,h=i.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(a===0||h){h&&(this.context.letterSpacing=a,this.context.textLetterSpacing=a),s?this.context.strokeText(t,r,n):this.context.fillText(t,r,n);return}for(var l=r,u=Array.from?Array.from(t):t.split(""),c=this.context.measureText(t).width,f=0,d=0;d<u.length;++d){var A=u[d];s?this.context.strokeText(A,l,n):this.context.fillText(A,l,n);for(var p="",g=d+1;g<u.length;++g)p+=u[g];f=this.context.measureText(p).width,l+=c-f+a,c=f}},i.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var r=cI(t);r.data&&(t.width=r.width,t.height=r.height,this.context.putImageData(r.data,0,0))}var n=this._texture,s=this._style,o=s.trim?0:s.padding,a=n.baseTexture;n.trim.width=n._frame.width=t.width/this._resolution,n.trim.height=n._frame.height=t.height/this._resolution,n.trim.x=-o,n.trim.y=-o,n.orig.width=n._frame.width-o*2,n.orig.height=n._frame.height-o*2,this._onTextureUpdate(),a.setRealSize(t.width,t.height,this._resolution),n.updateUvs(),this.dirty=!1},i.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._render.call(this,t)},i.prototype.updateTransform=function(){this.updateText(!0),e.prototype.updateTransform.call(this)},i.prototype.getBounds=function(t,r){return this.updateText(!0),this._textureID===-1&&(t=!1),e.prototype.getBounds.call(this,t,r)},i.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},i.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},i.prototype._generateFillStyle=function(t,r,n){var s=t.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var o,a=t.dropShadow?t.dropShadowDistance:0,h=t.padding||0,l=this.canvas.width/this._resolution-a-h*2,u=this.canvas.height/this._resolution-a-h*2,c=s.slice(),f=t.fillGradientStops.slice();if(!f.length)for(var d=c.length+1,A=1;A<d;++A)f.push(A/d);if(c.unshift(s[0]),f.unshift(0),c.push(s[s.length-1]),f.push(1),t.fillGradientType===ms.LINEAR_VERTICAL){o=this.context.createLinearGradient(l/2,h,l/2,u+h);for(var p=n.fontProperties.fontSize+t.strokeThickness,A=0;A<r.length;A++){var g=n.lineHeight*(A-1)+p,y=n.lineHeight*A,I=y;A>0&&g>y&&(I=(y+g)/2);var E=y+p,w=n.lineHeight*(A+1),T=E;A+1<r.length&&w<E&&(T=(E+w)/2);for(var _=(T-I)/u,F=0;F<c.length;F++){var R=0;typeof f[F]=="number"?R=f[F]:R=F/c.length;var S=Math.min(1,Math.max(0,I/u+R*_));S=Number(S.toFixed(5)),o.addColorStop(S,c[F])}}}else{o=this.context.createLinearGradient(h,u/2,l+h,u/2);for(var D=c.length+1,$=1,A=0;A<c.length;A++){var z=void 0;typeof f[A]=="number"?z=f[A]:z=$/D,o.addColorStop(z,c[A]),$++}}return o},i.prototype.destroy=function(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},YF,t),e.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(i.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var r=An(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var r=An(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},t instanceof Nn?this._style=t:this._style=new Nn(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),i.nextLineHeightBehavior=!1,i.experimentalLetterSpacing=!1,i}(Ke);/*!
 * @pixi/prepare - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ft.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Yc=function(e,i){return Yc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Yc(e,i)};function VF(e,i){Yc(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var xC=function(){function e(i){this.maxItemsPerFrame=i,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();function zF(e,i){var t=!1;if(e&&e._textures&&e._textures.length){for(var r=0;r<e._textures.length;r++)if(e._textures[r]instanceof Ot){var n=e._textures[r].baseTexture;i.indexOf(n)===-1&&(i.push(n),t=!0)}}return t}function WF(e,i){if(e.baseTexture instanceof Wt){var t=e.baseTexture;return i.indexOf(t)===-1&&i.push(t),!0}return!1}function jF(e,i){if(e._texture&&e._texture instanceof Ot){var t=e._texture.baseTexture;return i.indexOf(t)===-1&&i.push(t),!0}return!1}function KF(e,i){return i instanceof Is?(i.updateText(!0),!0):!1}function $F(e,i){if(i instanceof Nn){var t=i.toFontString();return Ji.measureFont(t),!0}return!1}function JF(e,i){if(e instanceof Is){i.indexOf(e.style)===-1&&i.push(e.style),i.indexOf(e)===-1&&i.push(e);var t=e._texture.baseTexture;return i.indexOf(t)===-1&&i.push(t),!0}return!1}function qF(e,i){return e instanceof Nn?(i.indexOf(e)===-1&&i.push(e),!0):!1}var EC=function(){function e(i){var t=this;this.limiter=new xC(ft.UPLOADS_PER_FRAME),this.renderer=i,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){t.queue&&t.prepareItems()},this.registerFindHook(JF),this.registerFindHook(qF),this.registerFindHook(zF),this.registerFindHook(WF),this.registerFindHook(jF),this.registerUploadHook(KF),this.registerUploadHook($F)}return e.prototype.upload=function(i,t){var r=this;return typeof i=="function"&&(t=i,i=null),t&&ze("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(n){i&&r.add(i);var s=function(){t==null||t(),n()};r.queue.length?(r.completes.push(s),r.ticking||(r.ticking=!0,ye.system.addOnce(r.tick,r,zi.UTILITY))):s()})},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var i=this.queue[0],t=!1;if(i&&!i._destroyed){for(var r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,i)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)ye.system.addOnce(this.tick,this,zi.UTILITY);else{this.ticking=!1;var s=this.completes.slice(0);this.completes.length=0;for(var r=0,n=s.length;r<n;r++)s[r]()}},e.prototype.registerFindHook=function(i){return i&&this.addHooks.push(i),this},e.prototype.registerUploadHook=function(i){return i&&this.uploadHooks.push(i),this},e.prototype.add=function(i){for(var t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](i,this.queue);t++);if(i instanceof $t)for(var t=i.children.length-1;t>=0;t--)this.add(i.children[t]);return this},e.prototype.destroy=function(){this.ticking&&ye.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();function bC(e,i){return i instanceof Wt?(i._glTextures[e.CONTEXT_UID]||e.texture.bind(i),!0):!1}function ZF(e,i){if(!(i instanceof Kt))return!1;var t=i.geometry;i.finishPoly(),t.updateBatches();for(var r=t.batches,n=0;n<r.length;n++){var s=r[n].style.texture;s&&bC(e,s.baseTexture)}return t.batchable||e.geometry.bind(t,i._resolveDirectShader(e)),!0}function tL(e,i){return e instanceof Kt?(i.push(e),!0):!1}var wC=function(e){VF(i,e);function i(t){var r=e.call(this,t)||this;return r.uploadHookHelper=r.renderer,r.registerFindHook(tL),r.registerUploadHook(bC),r.registerUploadHook(ZF),r}return i.extension={name:"prepare",type:Zt.RendererPlugin},i}(EC),eL=function(){function e(i){this.maxMilliseconds=i,this.frameStart=0}return e.prototype.beginFrame=function(){this.frameStart=Date.now()},e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},e}();/*!
 * @pixi/spritesheet - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var TC=function(){function e(i,t,r){r===void 0&&(r=null),this.linkedSheets=[],this._texture=i instanceof Ot?i:null,this.baseTexture=i instanceof Wt?i:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var n=this.baseTexture.resource;this.resolution=this._updateResolution(r||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e.prototype._updateResolution=function(i){i===void 0&&(i=null);var t=this.data.meta.scale,r=Co(i,null);return r===null&&(r=t!==void 0?parseFloat(t):1),r!==1&&this.baseTexture.setResolution(r),r},e.prototype.parse=function(i){var t=this;return i&&ze("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(r){t._callback=function(n){i==null||i(n),r(n)},t._batchIndex=0,t._frameKeys.length<=e.BATCH_SIZE?(t._processFrames(0),t._processAnimations(),t._parseComplete()):t._nextBatch()})},e.prototype._processFrames=function(i){for(var t=i,r=e.BATCH_SIZE;t-i<r&&t<this._frameKeys.length;){var n=this._frameKeys[t],s=this._frames[n],o=s.frame;if(o){var a=null,h=null,l=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,u=new Tt(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);s.rotated?a=new Tt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new Tt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(h=new Tt(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[n]=new Ot(this.baseTexture,a,u,h,s.rotated?2:0,s.anchor),Ot.addToCache(this.textures[n],n)}t++}},e.prototype._processAnimations=function(){var i=this.data.animations||{};for(var t in i){this.animations[t]=[];for(var r=0;r<i[t].length;r++){var n=i[t][r];this.animations[t].push(this.textures[n])}}},e.prototype._parseComplete=function(){var i=this._callback;this._callback=null,this._batchIndex=0,i.call(this,this.textures)},e.prototype._nextBatch=function(){var i=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){i._batchIndex*e.BATCH_SIZE<i._frameKeys.length?i._nextBatch():(i._processAnimations(),i._parseComplete())},0)},e.prototype.destroy=function(i){var t;i===void 0&&(i=!1);for(var r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,i&&((t=this._texture)===null||t===void 0||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},e.BATCH_SIZE=1e3,e}(),BC=function(){function e(){}return e.use=function(i,t){var r,n,s=this,o=i.name+"_image";if(!i.data||i.type!==de.TYPE.JSON||!i.data.frames||s.resources[o]){t();return}var a=(n=(r=i.data)===null||r===void 0?void 0:r.meta)===null||n===void 0?void 0:n.related_multi_packs;if(Array.isArray(a))for(var h=function(A){if(typeof A!="string")return"continue";var p=A.replace(".json",""),g=dn.resolve(i.url.replace(s.baseUrl,""),A);if(s.resources[p]||Object.values(s.resources).some(function(I){return dn.format(dn.parse(I.url))===g}))return"continue";var y={crossOrigin:i.crossOrigin,loadType:de.LOAD_TYPE.XHR,xhrType:de.XHR_RESPONSE_TYPE.JSON,parentResource:i,metadata:i.metadata};s.add(p,g,y)},l=0,u=a;l<u.length;l++){var c=u[l];h(c)}var f={crossOrigin:i.crossOrigin,metadata:i.metadata.imageMetadata,parentResource:i},d=e.getResourcePath(i,s.baseUrl);s.add(o,d,f,function(p){if(p.error){t(p.error);return}var g=new TC(p.texture,i.data,i.url);g.parse().then(function(){i.spritesheet=g,i.textures=g.textures,t()})})},e.getResourcePath=function(i,t){return i.isDataUrl?i.data.meta.image:dn.resolve(i.url.replace(t,""),i.data.meta.image)},e.extension=Zt.Loader,e}();/*!
 * @pixi/sprite-tiling - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Vc=function(e,i){return Vc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Vc(e,i)};function RC(e,i){Vc(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var Us=new M,PC=function(e){RC(i,e);function i(t,r,n){r===void 0&&(r=100),n===void 0&&(n=100);var s=e.call(this,t)||this;return s.tileTransform=new oa,s._width=r,s._height=n,s.uvMatrix=s.texture.uvMatrix||new Ol(t),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return Object.defineProperty(i.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),i.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},i.prototype._render=function(t){var r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},i.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,r=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),s=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,r,n,s)},i.prototype.getLocalBounds=function(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Tt),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},i.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Us);var r=this._width,n=this._height,s=-r*this.anchor._x;if(Us.x>=s&&Us.x<s+r){var o=-n*this.anchor._y;if(Us.y>=o&&Us.y<o+n)return!0}return!1},i.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},i.from=function(t,r){var n=t instanceof Ot?t:Ot.from(t,r);return new i(n,r.width,r.height)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),i}(Ke),iL=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,qg=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,rL=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,nL=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,sL=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,Xa=new kt,SC=function(e){RC(i,e);function i(t){var r=e.call(this,t)||this;return t.runners.contextChange.add(r),r.quad=new Ld,r.state=Xr.for2d(),r}return i.prototype.contextChange=function(){var t=this.renderer,r={globals:t.globalUniforms};this.simpleShader=Cr.from(qg,iL,r),this.shader=t.context.webGLVersion>1?Cr.from(nL,sL,r):Cr.from(qg,rL,r)},i.prototype.render=function(t){var r=this.renderer,n=this.quad,s=n.vertices;s[0]=s[6]=t._width*-t.anchor.x,s[1]=s[3]=t._height*-t.anchor.y,s[2]=s[4]=t._width*(1-t.anchor.x),s[5]=s[7]=t._height*(1-t.anchor.y);var o=t.uvRespectAnchor?t.anchor.x:0,a=t.uvRespectAnchor?t.anchor.y:0;s=n.uvs,s[0]=s[6]=-o,s[1]=s[3]=-a,s[2]=s[4]=1-o,s[5]=s[7]=1-a,n.invalidate();var h=t._texture,l=h.baseTexture,u=l.alphaMode>0,c=t.tileTransform.localTransform,f=t.uvMatrix,d=l.isPowerOfTwo&&h.frame.width===l.width&&h.frame.height===l.height;d&&(l._glTextures[r.CONTEXT_UID]?d=l.wrapMode!==rr.CLAMP:l.wrapMode===rr.CLAMP&&(l.wrapMode=rr.REPEAT));var A=d?this.simpleShader:this.shader,p=h.width,g=h.height,y=t._width,I=t._height;Xa.set(c.a*p/y,c.b*p/I,c.c*g/y,c.d*g/I,c.tx/y,c.ty/I),Xa.invert(),d?Xa.prepend(f.mapCoord):(A.uniforms.uMapCoord=f.mapCoord.toArray(!0),A.uniforms.uClampFrame=f.uClampFrame,A.uniforms.uClampOffset=f.uClampOffset),A.uniforms.uTransform=Xa.toArray(!0),A.uniforms.uColor=bd(t.tint,t.worldAlpha,A.uniforms.uColor,u),A.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),A.uniforms.uSampler=h,r.shader.bind(A),r.geometry.bind(n),this.state.blendMode=Ed(t.blendMode,u),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},i.extension={name:"tilingSprite",type:Zt.RendererPlugin},i}(aa);/*!
 * @pixi/mesh - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zc=function(e,i){return zc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},zc(e,i)};function oA(e,i){zc(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var NC=function(){function e(i,t){this.uvBuffer=i,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return e.prototype.update=function(i){if(!(!i&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},e}(),bu=new M,Zg=new Lr,Cs=function(e){oA(i,e);function i(t,r,n,s){s===void 0&&(s=pi.TRIANGLES);var o=e.call(this)||this;return o.geometry=t,o.shader=r,o.state=n||Xr.for2d(),o.drawMode=s,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=-1,o._transformID=-1,o._roundPixels=ft.ROUND_PIXELS,o.batchUvs=null,o}return Object.defineProperty(i.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),i.prototype._render=function(t){var r=this.geometry.buffers[0].data,n=this.shader;n.batchable&&this.drawMode===pi.TRIANGLES&&r.length<i.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)},i.prototype._renderDefault=function(t){var r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),t.batch.flush(),r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(r),t.state.set(this.state),t.geometry.bind(this.geometry,r),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},i.prototype._renderToBatch=function(t){var r=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;var s=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[s]),t.plugins[s].render(this)},i.prototype.calculateVertices=function(){var t=this.geometry,r=t.buffers[0],n=r.data,s=r._updateID;if(!(s===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));for(var o=this.transform.worldTransform,a=o.a,h=o.b,l=o.c,u=o.d,c=o.tx,f=o.ty,d=this.vertexData,A=0;A<d.length/2;A++){var p=n[A*2],g=n[A*2+1];d[A*2]=a*p+l*g+c,d[A*2+1]=h*p+u*g+f}if(this._roundPixels)for(var y=ft.RESOLUTION,A=0;A<d.length;++A)d[A]=Math.round((d[A]*y|0)/y);this.vertexDirty=s}},i.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],r=this.shader;r.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new NC(t,r.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},i.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},i.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,bu);for(var r=this.geometry.getBuffer("aVertexPosition").data,n=Zg.points,s=this.geometry.getIndex().data,o=s.length,a=this.drawMode===4?3:1,h=0;h+2<o;h+=a){var l=s[h]*2,u=s[h+1]*2,c=s[h+2]*2;if(n[0]=r[l],n[1]=r[l+1],n[2]=r[u],n[3]=r[u+1],n[4]=r[c],n[5]=r[c+1],Zg.contains(bu.x,bu.y))return!0}return!1},i.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},i.BATCHABLE_SIZE=100,i}($t),oL=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,aL=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,_s=function(e){oA(i,e);function i(t,r){var n=this,s={uSampler:t,alpha:1,uTextureMatrix:kt.IDENTITY,uColor:new Float32Array([1,1,1,1])};return r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(s,r.uniforms),n=e.call(this,r.program||Bs.from(aL,oL),s)||this,n._colorDirty=!1,n.uvMatrix=new Ol(t),n.batchable=r.program===void 0,n.pluginName=r.pluginName,n.tint=r.tint,n.alpha=r.alpha,n}return Object.defineProperty(i.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),i.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;bd(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},i}(Cr),la=function(e){oA(i,e);function i(t,r,n){var s=e.call(this)||this,o=new Ce(t),a=new Ce(r,!0),h=new Ce(n,!0,!0);return s.addAttribute("aVertexPosition",o,2,!1,Dt.FLOAT).addAttribute("aTextureCoord",a,2,!1,Dt.FLOAT).addIndex(h),s._updateId=-1,s}return Object.defineProperty(i.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),i}(Ts);/*!
 * @pixi/text-bitmap - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Wc=function(e,i){return Wc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Wc(e,i)};function hL(e,i){Wc(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var Po=function(){function e(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return e}(),OC=function(){function e(){}return e.test=function(i){return typeof i=="string"&&i.indexOf("info face=")===0},e.parse=function(i){var t=i.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var n in t){var s=t[n].match(/^[a-z]+/gm)[0],o=t[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var h in o){var l=o[h].split("="),u=l[0],c=l[1].replace(/"/gm,""),f=parseFloat(c),d=isNaN(f)?c:f;a[u]=d}r[s].push(a)}var A=new Po;return r.info.forEach(function(p){return A.info.push({face:p.face,size:parseInt(p.size,10)})}),r.common.forEach(function(p){return A.common.push({lineHeight:parseInt(p.lineHeight,10)})}),r.page.forEach(function(p){return A.page.push({id:parseInt(p.id,10),file:p.file})}),r.char.forEach(function(p){return A.char.push({id:parseInt(p.id,10),page:parseInt(p.page,10),x:parseInt(p.x,10),y:parseInt(p.y,10),width:parseInt(p.width,10),height:parseInt(p.height,10),xoffset:parseInt(p.xoffset,10),yoffset:parseInt(p.yoffset,10),xadvance:parseInt(p.xadvance,10)})}),r.kerning.forEach(function(p){return A.kerning.push({first:parseInt(p.first,10),second:parseInt(p.second,10),amount:parseInt(p.amount,10)})}),r.distanceField.forEach(function(p){return A.distanceField.push({distanceRange:parseInt(p.distanceRange,10),fieldType:p.fieldType})}),A},e}(),bh=function(){function e(){}return e.test=function(i){return i instanceof XMLDocument&&i.getElementsByTagName("page").length&&i.getElementsByTagName("info")[0].getAttribute("face")!==null},e.parse=function(i){for(var t=new Po,r=i.getElementsByTagName("info"),n=i.getElementsByTagName("common"),s=i.getElementsByTagName("page"),o=i.getElementsByTagName("char"),a=i.getElementsByTagName("kerning"),h=i.getElementsByTagName("distanceField"),l=0;l<r.length;l++)t.info.push({face:r[l].getAttribute("face"),size:parseInt(r[l].getAttribute("size"),10)});for(var l=0;l<n.length;l++)t.common.push({lineHeight:parseInt(n[l].getAttribute("lineHeight"),10)});for(var l=0;l<s.length;l++)t.page.push({id:parseInt(s[l].getAttribute("id"),10)||0,file:s[l].getAttribute("file")});for(var l=0;l<o.length;l++){var u=o[l];t.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(var l=0;l<a.length;l++)t.kerning.push({first:parseInt(a[l].getAttribute("first"),10),second:parseInt(a[l].getAttribute("second"),10),amount:parseInt(a[l].getAttribute("amount"),10)});for(var l=0;l<h.length;l++)t.distanceField.push({fieldType:h[l].getAttribute("fieldType"),distanceRange:parseInt(h[l].getAttribute("distanceRange"),10)});return t},e}(),DC=function(){function e(){}return e.test=function(i){if(typeof i=="string"&&i.indexOf("<font>")>-1){var t=new globalThis.DOMParser().parseFromString(i,"text/xml");return bh.test(t)}return!1},e.parse=function(i){var t=new globalThis.DOMParser().parseFromString(i,"text/xml");return bh.parse(t)},e}(),wu=[OC,bh,DC];function aA(e){for(var i=0;i<wu.length;i++)if(wu[i].test(e))return wu[i];return null}function lL(e,i,t,r,n,s){var o=t.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var a,h=t.dropShadow?t.dropShadowDistance:0,l=t.padding||0,u=e.width/r-h-l*2,c=e.height/r-h-l*2,f=o.slice(),d=t.fillGradientStops.slice();if(!d.length)for(var A=f.length+1,p=1;p<A;++p)d.push(p/A);if(f.unshift(o[0]),d.unshift(0),f.push(o[o.length-1]),d.push(1),t.fillGradientType===ms.LINEAR_VERTICAL){a=i.createLinearGradient(u/2,l,u/2,c+l);for(var g=0,y=s.fontProperties.fontSize+t.strokeThickness,I=y/c,p=0;p<n.length;p++)for(var E=s.lineHeight*p,w=0;w<f.length;w++){var T=0;typeof d[w]=="number"?T=d[w]:T=w/f.length;var _=E/c+T*I,F=Math.max(g,_);F=Math.min(F,1),a.addColorStop(F,f[w]),g=F}}else{a=i.createLinearGradient(l,c/2,u+l,c/2);for(var R=f.length+1,S=1,p=0;p<f.length;p++){var D=void 0;typeof d[p]=="number"?D=d[p]:D=S/R,a.addColorStop(D,f[p]),S++}}return a}function uL(e,i,t,r,n,s,o){var a=t.text,h=t.fontProperties;i.translate(r,n),i.scale(s,s);var l=o.strokeThickness/2,u=-(o.strokeThickness/2);if(i.font=o.toFontString(),i.lineWidth=o.strokeThickness,i.textBaseline=o.textBaseline,i.lineJoin=o.lineJoin,i.miterLimit=o.miterLimit,i.fillStyle=lL(e,i,o,s,[a],t),i.strokeStyle=o.stroke,o.dropShadow){var c=o.dropShadowColor,f=Re(typeof c=="number"?c:mo(c)),d=o.dropShadowBlur*s,A=o.dropShadowDistance*s;i.shadowColor="rgba("+f[0]*255+","+f[1]*255+","+f[2]*255+","+o.dropShadowAlpha+")",i.shadowBlur=d,i.shadowOffsetX=Math.cos(o.dropShadowAngle)*A,i.shadowOffsetY=Math.sin(o.dropShadowAngle)*A}else i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;o.stroke&&o.strokeThickness&&i.strokeText(a,l,u+t.lineHeight-h.descent),o.fill&&i.fillText(a,l,u+t.lineHeight-h.descent),i.setTransform(1,0,0,1,0,0),i.fillStyle="rgba(0, 0, 0, 0)"}function FC(e){return Array.from?Array.from(e):e.split("")}function cL(e){typeof e=="string"&&(e=[e]);for(var i=[],t=0,r=e.length;t<r;t++){var n=e[t];if(Array.isArray(n)){if(n.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var s=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(var a=s,h=o;a<=h;a++)i.push(String.fromCharCode(a))}else i.push.apply(i,FC(n))}if(i.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return i}function rh(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}var ln=function(){function e(i,t,r){var n,s,o=i.info[0],a=i.common[0],h=i.page[0],l=i.distanceField[0],u=Co(h.file),c={};this._ownsTextures=r,this.font=o.face,this.size=o.size,this.lineHeight=a.lineHeight/u,this.chars={},this.pageTextures=c;for(var f=0;f<i.page.length;f++){var d=i.page[f],A=d.id,p=d.file;c[A]=t instanceof Array?t[f]:t[p],l!=null&&l.fieldType&&l.fieldType!=="none"&&(c[A].baseTexture.alphaMode=Ii.NO_PREMULTIPLIED_ALPHA)}for(var f=0;f<i.char.length;f++){var g=i.char[f],A=g.id,y=g.page,I=i.char[f],E=I.x,w=I.y,T=I.width,_=I.height,F=I.xoffset,R=I.yoffset,S=I.xadvance;E/=u,w/=u,T/=u,_/=u,F/=u,R/=u,S/=u;var D=new Tt(E+c[y].frame.x/u,w+c[y].frame.y/u,T,_);this.chars[A]={xOffset:F,yOffset:R,xAdvance:S,kerning:{},texture:new Ot(c[y].baseTexture,D),page:y}}for(var f=0;f<i.kerning.length;f++){var $=i.kerning[f],z=$.first,q=$.second,_t=$.amount;z/=u,q/=u,_t/=u,this.chars[q]&&(this.chars[q].kerning[z]=_t)}this.distanceFieldRange=l==null?void 0:l.distanceRange,this.distanceFieldType=(s=(n=l==null?void 0:l.fieldType)===null||n===void 0?void 0:n.toLowerCase())!==null&&s!==void 0?s:"none"}return e.prototype.destroy=function(){for(var i in this.chars)this.chars[i].texture.destroy(),this.chars[i].texture=null;for(var i in this.pageTextures)this._ownsTextures&&this.pageTextures[i].destroy(!0),this.pageTextures[i]=null;this.chars=null,this.pageTextures=null},e.install=function(i,t,r){var n;if(i instanceof Po)n=i;else{var s=aA(i);if(!s)throw new Error("Unrecognized data format for font.");n=s.parse(i)}t instanceof Ot&&(t=[t]);var o=new e(n,t,r);return e.available[o.font]=o,o},e.uninstall=function(i){var t=e.available[i];if(!t)throw new Error("No font found named '"+i+"'");t.destroy(),delete e.available[i]},e.from=function(i,t,r){if(!i)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},e.defaultOptions,r),s=n.chars,o=n.padding,a=n.resolution,h=n.textureWidth,l=n.textureHeight,u=cL(s),c=t instanceof Nn?t:new Nn(t),f=h,d=new Po;d.info[0]={face:c.fontFamily,size:c.fontSize},d.common[0]={lineHeight:c.fontSize};for(var A=0,p=0,g,y,I,E=0,w=[],T=0;T<u.length;T++){g||(g=ft.ADAPTER.createCanvas(),g.width=h,g.height=l,y=g.getContext("2d"),I=new Wt(g,{resolution:a}),w.push(new Ot(I)),d.page.push({id:w.length-1,file:""}));var _=Ji.measureText(u[T],c,!1,g),F=_.width,R=Math.ceil(_.height),S=Math.ceil((c.fontStyle==="italic"?2:1)*F);if(p>=l-R*a){if(p===0)throw new Error("[BitmapFont] textureHeight "+l+"px is "+("too small for "+c.fontSize+"px fonts"));--T,g=null,y=null,I=null,p=0,A=0,E=0;continue}if(E=Math.max(R+_.fontProperties.descent,E),S*a+A>=f){--T,p+=E*a,p=Math.ceil(p),A=0,E=0;continue}uL(g,y,_,A,p,a,c);var D=rh(_.text);d.char.push({id:D,page:w.length-1,x:A/a,y:p/a,width:S,height:R,xoffset:0,yoffset:0,xadvance:Math.ceil(F-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0))}),A+=(S+2*o)*a,A=Math.ceil(A)}for(var T=0,$=u.length;T<$;T++)for(var z=u[T],q=0;q<$;q++){var _t=u[q],V=y.measureText(z).width,X=y.measureText(_t).width,et=y.measureText(z+_t).width,At=et-(V+X);At&&d.kerning.push({first:rh(z),second:rh(_t),amount:At})}var Z=new e(d,w,!0);return e.available[i]!==void 0&&e.uninstall(i),e.available[i]=Z,Z},e.ALPHA=[["a","z"],["A","Z"]," "],e.NUMERIC=[["0","9"]],e.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],e.ASCII=[[" ","~"]],e.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:e.ALPHANUMERIC},e.available={},e}(),fL=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,dL=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,AL=[],pL=[],tv=[],gL=function(e){hL(i,e);function i(t,r){r===void 0&&(r={});var n=e.call(this)||this;n._tint=16777215;var s=Object.assign({},i.styleDefaults,r),o=s.align,a=s.tint,h=s.maxWidth,l=s.letterSpacing,u=s.fontName,c=s.fontSize;if(!ln.available[u])throw new Error('Missing BitmapFont "'+u+'"');return n._activePagesMeshData=[],n._textWidth=0,n._textHeight=0,n._align=o,n._tint=a,n._fontName=u,n._fontSize=c||ln.available[u].size,n.text=t,n._maxWidth=h,n._maxLineHeight=0,n._letterSpacing=l,n._anchor=new mr(function(){n.dirty=!0},n,0,0),n._roundPixels=ft.ROUND_PIXELS,n.dirty=!0,n._resolution=ft.RESOLUTION,n._autoResolution=!0,n._textureCache={},n}return i.prototype.updateText=function(){for(var t,r=ln.available[this._fontName],n=this._fontSize/r.size,s=new M,o=[],a=[],h=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=FC(l),c=this._maxWidth*r.size/this._fontSize,f=r.distanceFieldType==="none"?AL:pL,d=null,A=0,p=0,g=0,y=-1,I=0,E=0,w=0,T=0,_=0;_<u.length;_++){var F=u[_],R=rh(F);if(/(?:\s)/.test(F)&&(y=_,I=A,T++),F==="\r"||F===`
`){a.push(A),h.push(-1),p=Math.max(p,A),++g,++E,s.x=0,s.y+=r.lineHeight,d=null,T=0;continue}var S=r.chars[R];if(S){d&&S.kerning[d]&&(s.x+=S.kerning[d]);var D=tv.pop()||{texture:Ot.EMPTY,line:0,charCode:0,prevSpaces:0,position:new M};D.texture=S.texture,D.line=g,D.charCode=R,D.position.x=s.x+S.xOffset+this._letterSpacing/2,D.position.y=s.y+S.yOffset,D.prevSpaces=T,o.push(D),A=D.position.x+Math.max(S.xAdvance-S.xOffset,S.texture.orig.width),s.x+=S.xAdvance+this._letterSpacing,w=Math.max(w,S.yOffset+S.texture.height),d=R,y!==-1&&c>0&&s.x>c&&(++E,bn(o,1+y-E,1+_-y),_=y,y=-1,a.push(I),h.push(o.length>0?o[o.length-1].prevSpaces:0),p=Math.max(p,I),g++,s.x=0,s.y+=r.lineHeight,d=null,T=0)}}var $=u[u.length-1];$!=="\r"&&$!==`
`&&(/(?:\s)/.test($)&&(A=I),a.push(A),p=Math.max(p,A),h.push(-1));for(var z=[],_=0;_<=g;_++){var q=0;this._align==="right"?q=p-a[_]:this._align==="center"?q=(p-a[_])/2:this._align==="justify"&&(q=h[_]<0?0:(p-a[_])/h[_]),z.push(q)}for(var _t=o.length,V={},X=[],et=this._activePagesMeshData,_=0;_<et.length;_++)f.push(et[_]);for(var _=0;_<_t;_++){var At=o[_].texture,Z=At.baseTexture.uid;if(!V[Z]){var N=f.pop();if(!N){var W=new la,it=void 0,ot=void 0;r.distanceFieldType==="none"?(it=new _s(Ot.EMPTY),ot=Nt.NORMAL):(it=new _s(Ot.EMPTY,{program:Bs.from(dL,fL),uniforms:{uFWidth:0}}),ot=Nt.NORMAL_NPM);var dt=new Cs(W,it);dt.blendMode=ot,N={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:dt,vertices:null,uvs:null,indices:null}}N.index=0,N.indexCount=0,N.vertexCount=0,N.uvsCount=0,N.total=0;var Ct=this._textureCache;Ct[Z]=Ct[Z]||new Ot(At.baseTexture),N.mesh.texture=Ct[Z],N.mesh.tint=this._tint,X.push(N),V[Z]=N}V[Z].total++}for(var _=0;_<et.length;_++)X.indexOf(et[_])===-1&&this.removeChild(et[_].mesh);for(var _=0;_<X.length;_++)X[_].mesh.parent!==this&&this.addChild(X[_].mesh);this._activePagesMeshData=X;for(var _ in V){var N=V[_],gt=N.total;if(!(((t=N.indices)===null||t===void 0?void 0:t.length)>6*gt)||N.vertices.length<Cs.BATCHABLE_SIZE*2)N.vertices=new Float32Array(4*2*gt),N.uvs=new Float32Array(4*2*gt),N.indices=new Uint16Array(6*gt);else for(var Pt=N.total,jt=N.vertices,Xt=Pt*4*2;Xt<jt.length;Xt++)jt[Xt]=0;N.mesh.size=6*gt}for(var _=0;_<_t;_++){var F=o[_],zt=F.position.x+z[F.line]*(this._align==="justify"?F.prevSpaces:1);this._roundPixels&&(zt=Math.round(zt));var pt=zt*n,Lt=F.position.y*n,At=F.texture,Et=V[At.baseTexture.uid],U=At.frame,H=At._uvs,L=Et.index++;Et.indices[L*6+0]=0+L*4,Et.indices[L*6+1]=1+L*4,Et.indices[L*6+2]=2+L*4,Et.indices[L*6+3]=0+L*4,Et.indices[L*6+4]=2+L*4,Et.indices[L*6+5]=3+L*4,Et.vertices[L*8+0]=pt,Et.vertices[L*8+1]=Lt,Et.vertices[L*8+2]=pt+U.width*n,Et.vertices[L*8+3]=Lt,Et.vertices[L*8+4]=pt+U.width*n,Et.vertices[L*8+5]=Lt+U.height*n,Et.vertices[L*8+6]=pt,Et.vertices[L*8+7]=Lt+U.height*n,Et.uvs[L*8+0]=H.x0,Et.uvs[L*8+1]=H.y0,Et.uvs[L*8+2]=H.x1,Et.uvs[L*8+3]=H.y1,Et.uvs[L*8+4]=H.x2,Et.uvs[L*8+5]=H.y2,Et.uvs[L*8+6]=H.x3,Et.uvs[L*8+7]=H.y3}this._textWidth=p*n,this._textHeight=(s.y+r.lineHeight)*n;for(var _ in V){var N=V[_];if(this.anchor.x!==0||this.anchor.y!==0)for(var G=0,K=this._textWidth*this.anchor.x,vt=this._textHeight*this.anchor.y,yt=0;yt<N.total;yt++)N.vertices[G++]-=K,N.vertices[G++]-=vt,N.vertices[G++]-=K,N.vertices[G++]-=vt,N.vertices[G++]-=K,N.vertices[G++]-=vt,N.vertices[G++]-=K,N.vertices[G++]-=vt;this._maxLineHeight=w*n;var Ft=N.mesh.geometry.getBuffer("aVertexPosition"),xt=N.mesh.geometry.getBuffer("aTextureCoord"),Mt=N.mesh.geometry.getIndex();Ft.data=N.vertices,xt.data=N.uvs,Mt.data=N.indices,Ft.update(),xt.update(),Mt.update()}for(var _=0;_<o.length;_++)tv.push(o[_])},i.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},i.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);var r=ln.available[this._fontName],n=r.distanceFieldRange,s=r.distanceFieldType,o=r.size;if(s!=="none")for(var a=this.worldTransform,h=a.a,l=a.b,u=a.c,c=a.d,f=Math.sqrt(h*h+l*l),d=Math.sqrt(u*u+c*c),A=(Math.abs(f)+Math.abs(d))/2,p=this._fontSize/o,g=0,y=this._activePagesMeshData;g<y.length;g++){var I=y[g];I.mesh.shader.uniforms.uFWidth=A*n*p*this._resolution}e.prototype._render.call(this,t)},i.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},i.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(i.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var r=0;r<this._activePagesMeshData.length;r++)this._activePagesMeshData[r].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!ln.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"anchor",{get:function(){return this._anchor},set:function(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),i.prototype.destroy=function(t){var r=this._textureCache;for(var n in r){var s=r[n];s.destroy(),delete r[n]}this._textureCache=null,e.prototype.destroy.call(this,t)},i.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},i}($t),LC=function(){function e(){}return e.add=function(){de.setExtensionXhrType("fnt",de.XHR_RESPONSE_TYPE.TEXT)},e.use=function(i,t){var r=aA(i.data);if(!r){t();return}for(var n=e.getBaseUrl(this,i),s=r.parse(i.data),o={},a=function(p){o[p.metadata.pageFile]=p.texture,Object.keys(o).length===s.page.length&&(i.bitmapFont=ln.install(s,o,!0),t())},h=0;h<s.page.length;++h){var l=s.page[h].file,u=n+l,c=!1;for(var f in this.resources){var d=this.resources[f];if(d.url===u){d.metadata.pageFile=l,d.texture?a(d):d.onAfterMiddleware.add(a),c=!0;break}}if(!c){var A={crossOrigin:i.crossOrigin,loadType:de.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},i.metadata.imageMetadata),parentResource:i};this.add(u,A,a)}}},e.getBaseUrl=function(i,t){var r=t.isDataUrl?"":e.dirname(t.url);return t.isDataUrl&&(r==="."&&(r=""),i.baseUrl&&r&&i.baseUrl.charAt(i.baseUrl.length-1)==="/"&&(r+="/")),r=r.replace(i.baseUrl,""),r&&r.charAt(r.length-1)!=="/"&&(r+="/"),r},e.dirname=function(i){var t=i.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===i?".":t===""?"/":t},e.extension=Zt.Loader,e}();/*!
 * @pixi/filter-alpha - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jc=function(e,i){return jc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},jc(e,i)};function vL(e,i){jc(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var yL=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,MC=function(e){vL(i,e);function i(t){t===void 0&&(t=1);var r=e.call(this,MI,yL,{uAlpha:1})||this;return r.alpha=t,r}return Object.defineProperty(i.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),i}(Ht);/*!
 * @pixi/filter-blur - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Kc=function(e,i){return Kc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Kc(e,i)};function QC(e,i){Kc(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var mL=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function IL(e,i){var t=Math.ceil(e/2),r=mL,n="",s;i?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<e;o++){var a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",o-(t-1)+".0"),n+=a,n+=`
`}return r=r.replace("%blur%",n),r=r.replace("%size%",e.toString()),r}var CL={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},_L=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function xL(e){for(var i=CL[e],t=i.length,r=_L,n="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",o,a=0;a<e;a++){var h=s.replace("%index%",a.toString());o=a,a>=t&&(o=e-a-1),h=h.replace("%value%",i[o].toString()),n+=h,n+=`
`}return r=r.replace("%blur%",n),r=r.replace("%size%",e.toString()),r}/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ev;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(ev||(ev={}));var iv;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(iv||(iv={}));var rv;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(rv||(rv={}));var nv;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(nv||(nv={}));var sv;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(sv||(sv={}));var ov;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(ov||(ov={}));var av;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(av||(av={}));var hv;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(hv||(hv={}));var lv;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(lv||(lv={}));var uv;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(uv||(uv={}));var cv;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(cv||(cv={}));var fv;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(fv||(fv={}));var dv;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(dv||(dv={}));var So;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(So||(So={}));var Av;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(Av||(Av={}));var pv;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(pv||(pv={}));var gv;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR"})(gv||(gv={}));var vv;(function(e){e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA"})(vv||(vv={}));var yv;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(yv||(yv={}));var mv;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(mv||(mv={}));var No=function(e){QC(i,e);function i(t,r,n,s,o){r===void 0&&(r=8),n===void 0&&(n=4),s===void 0&&(s=ft.FILTER_RESOLUTION),o===void 0&&(o=5);var a=this,h=IL(o,t),l=xL(o);return a=e.call(this,h,l)||this,a.horizontal=t,a.resolution=s,a._quality=0,a.quality=n,a.blur=r,a}return i.prototype.apply=function(t,r,n,s){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/r.width):this.uniforms.strength=1/n.height*(n.height/r.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/r.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,r,n,s);else{var o=t.getFilterTexture(),a=t.renderer,h=r,l=o;this.state.blend=!1,t.applyFilter(this,h,l,So.CLEAR);for(var u=1;u<this.passes-1;u++){t.bindAndClear(h,So.BLIT),this.uniforms.uSampler=l;var c=l;l=h,h=c,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,n,s),t.returnFilterTexture(o)}},Object.defineProperty(i.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+Math.abs(t)*2,this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),i}(Ht),EL=function(e){QC(i,e);function i(t,r,n,s){t===void 0&&(t=8),r===void 0&&(r=4),n===void 0&&(n=ft.FILTER_RESOLUTION),s===void 0&&(s=5);var o=e.call(this)||this;return o.blurXFilter=new No(!0,t,r,n,s),o.blurYFilter=new No(!1,t,r,n,s),o.resolution=n,o.quality=r,o.blur=t,o.repeatEdgePixels=!1,o}return i.prototype.apply=function(t,r,n,s){var o=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(o&&a){var h=t.getFilterTexture();this.blurXFilter.apply(t,r,h,So.CLEAR),this.blurYFilter.apply(t,h,n,s),t.returnFilterTexture(h)}else a?this.blurYFilter.apply(t,r,n,s):this.blurXFilter.apply(t,r,n,s)},i.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(i.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),i}(Ht);/*!
 * @pixi/filter-color-matrix - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $c=function(e,i){return $c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},$c(e,i)};function bL(e,i){$c(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var wL=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,wh=function(e){bL(i,e);function i(){var t=this,r={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return t=e.call(this,Jd,wL,r)||this,t.alpha=1,t}return i.prototype._loadMatrix=function(t,r){r===void 0&&(r=!1);var n=t;r&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n},i.prototype._multiply=function(t,r,n){return t[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],t[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],t[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],t[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],t[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],t[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],t[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],t[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],t[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],t[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],t[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],t[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],t[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],t[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],t[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],t[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],t[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],t[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],t[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],t[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],t},i.prototype._colorMatrix=function(t){var r=new Float32Array(t);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r},i.prototype.brightness=function(t,r){var n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,r)},i.prototype.tint=function(t,r){var n=t>>16&255,s=t>>8&255,o=t&255,a=[n/255,0,0,0,0,0,s/255,0,0,0,0,0,o/255,0,0,0,0,0,1,0];this._loadMatrix(a,r)},i.prototype.greyscale=function(t,r){var n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,r)},i.prototype.blackAndWhite=function(t){var r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.hue=function(t,r){t=(t||0)/180*Math.PI;var n=Math.cos(t),s=Math.sin(t),o=Math.sqrt,a=1/3,h=o(a),l=n+(1-n)*a,u=a*(1-n)-h*s,c=a*(1-n)+h*s,f=a*(1-n)+h*s,d=n+a*(1-n),A=a*(1-n)-h*s,p=a*(1-n)-h*s,g=a*(1-n)+h*s,y=n+a*(1-n),I=[l,u,c,0,0,f,d,A,0,0,p,g,y,0,0,0,0,0,1,0];this._loadMatrix(I,r)},i.prototype.contrast=function(t,r){var n=(t||0)+1,s=-.5*(n-1),o=[n,0,0,0,s,0,n,0,0,s,0,0,n,0,s,0,0,0,1,0];this._loadMatrix(o,r)},i.prototype.saturate=function(t,r){t===void 0&&(t=0);var n=t*2/3+1,s=(n-1)*-.5,o=[n,s,s,0,0,s,n,s,0,0,s,s,n,0,0,0,0,0,1,0];this._loadMatrix(o,r)},i.prototype.desaturate=function(){this.saturate(-1)},i.prototype.negative=function(t){var r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.sepia=function(t){var r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.technicolor=function(t){var r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.polaroid=function(t){var r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.toBGR=function(t){var r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.kodachrome=function(t){var r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.browni=function(t){var r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.vintage=function(t){var r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.colorTone=function(t,r,n,s,o){t=t||.2,r=r||.15,n=n||16770432,s=s||3375104;var a=(n>>16&255)/255,h=(n>>8&255)/255,l=(n&255)/255,u=(s>>16&255)/255,c=(s>>8&255)/255,f=(s&255)/255,d=[.3,.59,.11,0,0,a,h,l,t,0,u,c,f,r,0,a-u,h-c,l-f,0,0];this._loadMatrix(d,o)},i.prototype.night=function(t,r){t=t||.1;var n=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(n,r)},i.prototype.predator=function(t,r){var n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,r)},i.prototype.lsd=function(t){var r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},Object.defineProperty(i.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),i}(Ht);wh.prototype.grayscale=wh.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Jc=function(e,i){return Jc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Jc(e,i)};function TL(e,i){Jc(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var BL=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,RL=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,PL=function(e){TL(i,e);function i(t,r){var n=this,s=new kt;return t.renderable=!1,n=e.call(this,RL,BL,{mapSampler:t._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,n.maskSprite=t,n.maskMatrix=s,r==null&&(r=20),n.scale=new M(r,r),n}return i.prototype.apply=function(t,r,n,s){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var o=this.maskSprite.worldTransform,a=Math.sqrt(o.a*o.a+o.b*o.b),h=Math.sqrt(o.c*o.c+o.d*o.d);a!==0&&h!==0&&(this.uniforms.rotation[0]=o.a/a,this.uniforms.rotation[1]=o.b/a,this.uniforms.rotation[2]=o.c/h,this.uniforms.rotation[3]=o.d/h),t.applyFilter(this,r,n,s)},Object.defineProperty(i.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),i}(Ht);/*!
 * @pixi/filter-fxaa - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qc=function(e,i){return qc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},qc(e,i)};function SL(e,i){qc(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var NL=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,OL=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,DL=function(e){SL(i,e);function i(){return e.call(this,NL,OL)||this}return i}(Ht);/*!
 * @pixi/filter-noise - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Zc=function(e,i){return Zc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},Zc(e,i)};function FL(e,i){Zc(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var LL=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,ML=function(e){FL(i,e);function i(t,r){t===void 0&&(t=.5),r===void 0&&(r=Math.random());var n=e.call(this,Jd,LL,{uNoise:0,uSeed:0})||this;return n.noise=t,n.seed=r,n}return Object.defineProperty(i.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),i}(Ht);/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Iv;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(Iv||(Iv={}));var Cv;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(Cv||(Cv={}));var _v;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(_v||(_v={}));var xv;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(xv||(xv={}));var Ev;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Ev||(Ev={}));var bv;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(bv||(bv={}));var wv;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(wv||(wv={}));var Tv;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(Tv||(Tv={}));var Bv;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(Bv||(Bv={}));var Rv;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(Rv||(Rv={}));var Pv;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Pv||(Pv={}));var Sv;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(Sv||(Sv={}));var Nv;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Nv||(Nv={}));var Ov;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(Ov||(Ov={}));var Dv;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(Dv||(Dv={}));var Fv;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(Fv||(Fv={}));var Lv;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR"})(Lv||(Lv={}));var Mv;(function(e){e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA"})(Mv||(Mv={}));var tf;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(tf||(tf={}));var Qv;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Qv||(Qv={}));var UC=new kt;Jt.prototype._cacheAsBitmap=!1;Jt.prototype._cacheData=null;Jt.prototype._cacheAsBitmapResolution=null;Jt.prototype._cacheAsBitmapMultisample=tf.NONE;var QL=function(){function e(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return e}();Object.defineProperties(Jt.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap!==e){this._cacheAsBitmap=e;var i;e?(this._cacheData||(this._cacheData=new QL),i=this._cacheData,i.originalRender=this.render,i.originalRenderCanvas=this.renderCanvas,i.originalUpdateTransform=this.updateTransform,i.originalCalculateBounds=this.calculateBounds,i.originalGetLocalBounds=this.getLocalBounds,i.originalDestroy=this.destroy,i.originalContainsPoint=this.containsPoint,i.originalMask=this._mask,i.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(i=this._cacheData,i.sprite&&this._destroyCachedDisplayObject(),this.render=i.originalRender,this.renderCanvas=i.originalRenderCanvas,this.calculateBounds=i.originalCalculateBounds,this.getLocalBounds=i.originalGetLocalBounds,this.destroy=i.originalDestroy,this.updateTransform=i.originalUpdateTransform,this.containsPoint=i.originalContainsPoint,this._mask=i.originalMask,this.filterArea=i.originalFilterArea)}}}});Jt.prototype._renderCached=function(i){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(i),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(i))};Jt.prototype._initCachedDisplayObject=function(i){var t;if(!(this._cacheData&&this._cacheData.sprite)){var r=this.alpha;this.alpha=1,i.batch.flush();var n=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var s=this.filters[0].padding;n.pad(s)}n.ceil(ft.RESOLUTION);var o=i.renderTexture.current,a=i.renderTexture.sourceFrame.clone(),h=i.renderTexture.destinationFrame.clone(),l=i.projection.transform,u=oi.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||i.resolution,multisample:(t=this.cacheAsBitmapMultisample)!==null&&t!==void 0?t:i.multisample}),c="cacheAsBitmap_"+Gr();this._cacheData.textureCacheId=c,Wt.addToCache(u.baseTexture,c),Ot.addToCache(u,c);var f=this.transform.localTransform.copyTo(UC).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,i.render(this,{renderTexture:u,clear:!0,transform:f,skipUpdateTransform:!1}),i.framebuffer.blit(),i.projection.transform=l,i.renderTexture.bind(o,a,h),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var d=new Ke(u);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(n.x/n.width),d.anchor.y=-(n.y/n.height),d.alpha=r,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}};Jt.prototype._renderCachedCanvas=function(i){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(i),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(i))};Jt.prototype._initCachedDisplayObjectCanvas=function(i){if(!(this._cacheData&&this._cacheData.sprite)){var t=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;var n=i.context,s=i._projTransform;t.ceil(ft.RESOLUTION);var o=oi.create({width:t.width,height:t.height}),a="cacheAsBitmap_"+Gr();this._cacheData.textureCacheId=a,Wt.addToCache(o.baseTexture,a),Ot.addToCache(o,a);var h=UC;this.transform.localTransform.copyTo(h),h.invert(),h.tx-=t.x,h.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,i.render(this,{renderTexture:o,clear:!0,transform:h,skipUpdateTransform:!1}),i.context=n,i._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var l=new Ke(o);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-(t.x/t.width),l.anchor.y=-(t.y/t.height),l.alpha=r,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=i._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}};Jt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Jt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Jt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Wt.removeFromCache(this._cacheData.textureCacheId),Ot.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Jt.prototype._cacheAsBitmapDestroy=function(i){this.cacheAsBitmap=!1,this.destroy(i)};/*!
 * @pixi/mixin-get-child-by-name - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Jt.prototype.name=null;$t.prototype.getChildByName=function(i,t){for(var r=0,n=this.children.length;r<n;r++)if(this.children[r].name===i)return this.children[r];if(t)for(var r=0,n=this.children.length;r<n;r++){var s=this.children[r];if(s.getChildByName){var o=s.getChildByName(i,!0);if(o)return o}}return null};/*!
 * @pixi/mixin-get-global-position - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Jt.prototype.getGlobalPosition=function(i,t){return i===void 0&&(i=new M),t===void 0&&(t=!1),this.parent?this.parent.toGlobal(this.position,i,t):(i.x=this.position.x,i.y=this.position.y),i};/*!
 * @pixi/app - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var GC=function(){function e(){}return e.init=function(i){var t=this;Object.defineProperty(this,"resizeTo",{set:function(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){t._resizeTo&&(t.cancelResize(),t._resizeId=requestAnimationFrame(function(){return t.resize()}))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(t._resizeTo){t.cancelResize();var r,n;if(t._resizeTo===globalThis.window)r=globalThis.innerWidth,n=globalThis.innerHeight;else{var s=t._resizeTo,o=s.clientWidth,a=s.clientHeight;r=o,n=a}t.renderer.resize(r,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=i.resizeTo||null},e.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e.extension=Zt.Application,e}();/*!
 * @pixi/settings - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Uv;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(Uv||(Uv={}));var Gv;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(Gv||(Gv={}));var kv;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(kv||(kv={}));var Hv;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(Hv||(Hv={}));var Xv;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Xv||(Xv={}));var Yv;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Yv||(Yv={}));var Vv;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Vv||(Vv={}));var zv;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(zv||(zv={}));var Wv;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(Wv||(Wv={}));var ef;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(ef||(ef={}));var rf;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(rf||(rf={}));var nf;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(nf||(nf={}));var jv;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(jv||(jv={}));var Kv;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(Kv||(Kv={}));var sf;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(sf||(sf={}));var to;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(to||(to={}));var $v;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR"})($v||($v={}));var Jv;(function(e){e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA"})(Jv||(Jv={}));var of;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(of||(of={}));var qv;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(qv||(qv={}));var UL={createCanvas:function(e,i){var t=document.createElement("canvas");return t.width=e,t.height=i,t},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var e;return(e=document.baseURI)!==null&&e!==void 0?e:window.location.href},fetch:function(e,i){return fetch(e,i)}},Tu=/iPhone/i,Zv=/iPod/i,t0=/iPad/i,e0=/\biOS-universal(?:.+)Mac\b/i,Bu=/\bAndroid(?:.+)Mobile\b/i,i0=/Android/i,zn=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Ya=/Silk/i,lr=/Windows Phone/i,r0=/\bWindows(?:.+)ARM\b/i,n0=/BlackBerry/i,s0=/BB10/i,o0=/Opera Mini/i,a0=/\b(CriOS|Chrome)(?:.+)Mobile/i,h0=/Mobile(?:.+)Firefox\b/i,l0=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function GL(e){return function(i){return i.test(e)}}function kL(e){var i={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?i={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?i.userAgent=e:e&&e.userAgent&&(i={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var t=i.userAgent,r=t.split("[FBAN");typeof r[1]<"u"&&(t=r[0]),r=t.split("Twitter"),typeof r[1]<"u"&&(t=r[0]);var n=GL(t),s={apple:{phone:n(Tu)&&!n(lr),ipod:n(Zv),tablet:!n(Tu)&&(n(t0)||l0(i))&&!n(lr),universal:n(e0),device:(n(Tu)||n(Zv)||n(t0)||n(e0)||l0(i))&&!n(lr)},amazon:{phone:n(zn),tablet:!n(zn)&&n(Ya),device:n(zn)||n(Ya)},android:{phone:!n(lr)&&n(zn)||!n(lr)&&n(Bu),tablet:!n(lr)&&!n(zn)&&!n(Bu)&&(n(Ya)||n(i0)),device:!n(lr)&&(n(zn)||n(Ya)||n(Bu)||n(i0))||n(/\bokhttp\b/i)},windows:{phone:n(lr),tablet:n(r0),device:n(lr)||n(r0)},other:{blackberry:n(n0),blackberry10:n(s0),opera:n(o0),firefox:n(h0),chrome:n(a0),device:n(n0)||n(s0)||n(o0)||n(h0)||n(a0)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}var $n=kL(globalThis.navigator);function HL(){return!$n.apple.device}function XL(e){var i=!0;if($n.tablet||$n.phone){if($n.apple.device){var t=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(t){var r=parseInt(t[1],10);r<11&&(i=!1)}}if($n.android.device){var t=navigator.userAgent.match(/Android\s([0-9.]*)/);if(t){var r=parseInt(t[1],10);r<7&&(i=!1)}}}return i?e:4}var Th={ADAPTER:UL,MIPMAP_TEXTURES:nf.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:of.NONE,SPRITE_MAX_TEXTURES:XL(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:sf.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:rf.CLAMP,SCALE_MODE:ef.LINEAR,PRECISION_VERTEX:to.HIGH,PRECISION_FRAGMENT:$n.apple.device?to.HIGH:to.MEDIUM,CAN_UPLOAD_SAME_BUFFER:HL(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Ru=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hA(e,i,t){return t={path:i,exports:{},require:function(r,n){return YL(r,n??t.path)}},e(t,t.exports),t.exports}function YL(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}hA(function(e){var i=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function n(h,l,u){this.fn=h,this.context=l,this.once=u||!1}function s(h,l,u,c,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var d=new n(u,c||h,f),A=t?t+l:l;return h._events[A]?h._events[A].fn?h._events[A]=[h._events[A],d]:h._events[A].push(d):(h._events[A]=d,h._eventsCount++),h}function o(h,l){--h._eventsCount===0?h._events=new r:delete h._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,c;if(this._eventsCount===0)return l;for(c in u=this._events)i.call(u,c)&&l.push(t?c.slice(1):c);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=t?t+l:l,c=this._events[u];if(!c)return[];if(c.fn)return[c.fn];for(var f=0,d=c.length,A=new Array(d);f<d;f++)A[f]=c[f].fn;return A},a.prototype.listenerCount=function(l){var u=t?t+l:l,c=this._events[u];return c?c.fn?1:c.length:0},a.prototype.emit=function(l,u,c,f,d,A){var p=arguments,g=t?t+l:l;if(!this._events[g])return!1;var y=this._events[g],I=arguments.length,E,w;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),I){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,c),!0;case 4:return y.fn.call(y.context,u,c,f),!0;case 5:return y.fn.call(y.context,u,c,f,d),!0;case 6:return y.fn.call(y.context,u,c,f,d,A),!0}for(w=1,E=new Array(I-1);w<I;w++)E[w-1]=p[w];y.fn.apply(y.context,E)}else{var T=y.length,_;for(w=0;w<T;w++)switch(y[w].once&&this.removeListener(l,y[w].fn,void 0,!0),I){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,u);break;case 3:y[w].fn.call(y[w].context,u,c);break;case 4:y[w].fn.call(y[w].context,u,c,f);break;default:if(!E)for(_=1,E=new Array(I-1);_<I;_++)E[_-1]=p[_];y[w].fn.apply(y[w].context,E)}}return!0},a.prototype.on=function(l,u,c){return s(this,l,u,c,!1)},a.prototype.once=function(l,u,c){return s(this,l,u,c,!0)},a.prototype.removeListener=function(l,u,c,f){var d=t?t+l:l;if(!this._events[d])return this;if(!u)return o(this,d),this;var A=this._events[d];if(A.fn)A.fn===u&&(!f||A.once)&&(!c||A.context===c)&&o(this,d);else{for(var p=0,g=[],y=A.length;p<y;p++)(A[p].fn!==u||f&&!A[p].once||c&&A[p].context!==c)&&g.push(A[p]);g.length?this._events[d]=g.length===1?g[0]:g:o(this,d)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=t?t+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,e.exports=a});hA(function(e,i){(function(t){var r=i&&!i.nodeType&&i,n=e&&!e.nodeType&&e,s=typeof Ru=="object"&&Ru;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,h=36,l=1,u=26,c=38,f=700,d=72,A=128,p="-",g=/^xn--/,y=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=h-l,T=Math.floor,_=String.fromCharCode,F;function R(N){throw RangeError(E[N])}function S(N,W){for(var it=N.length,ot=[];it--;)ot[it]=W(N[it]);return ot}function D(N,W){var it=N.split("@"),ot="";it.length>1&&(ot=it[0]+"@",N=it[1]),N=N.replace(I,".");var dt=N.split("."),Ct=S(dt,W).join(".");return ot+Ct}function $(N){for(var W=[],it=0,ot=N.length,dt,Ct;it<ot;)dt=N.charCodeAt(it++),dt>=55296&&dt<=56319&&it<ot?(Ct=N.charCodeAt(it++),(Ct&64512)==56320?W.push(((dt&1023)<<10)+(Ct&1023)+65536):(W.push(dt),it--)):W.push(dt);return W}function z(N){return S(N,function(W){var it="";return W>65535&&(W-=65536,it+=_(W>>>10&1023|55296),W=56320|W&1023),it+=_(W),it}).join("")}function q(N){return N-48<10?N-22:N-65<26?N-65:N-97<26?N-97:h}function _t(N,W){return N+22+75*(N<26)-((W!=0)<<5)}function V(N,W,it){var ot=0;for(N=it?T(N/f):N>>1,N+=T(N/W);N>w*u>>1;ot+=h)N=T(N/w);return T(ot+(w+1)*N/(N+c))}function X(N){var W=[],it=N.length,ot,dt=0,Ct=A,gt=d,Pt,jt,Xt,zt,pt,Lt,Et,U,H;for(Pt=N.lastIndexOf(p),Pt<0&&(Pt=0),jt=0;jt<Pt;++jt)N.charCodeAt(jt)>=128&&R("not-basic"),W.push(N.charCodeAt(jt));for(Xt=Pt>0?Pt+1:0;Xt<it;){for(zt=dt,pt=1,Lt=h;Xt>=it&&R("invalid-input"),Et=q(N.charCodeAt(Xt++)),(Et>=h||Et>T((a-dt)/pt))&&R("overflow"),dt+=Et*pt,U=Lt<=gt?l:Lt>=gt+u?u:Lt-gt,!(Et<U);Lt+=h)H=h-U,pt>T(a/H)&&R("overflow"),pt*=H;ot=W.length+1,gt=V(dt-zt,ot,zt==0),T(dt/ot)>a-Ct&&R("overflow"),Ct+=T(dt/ot),dt%=ot,W.splice(dt++,0,Ct)}return z(W)}function et(N){var W,it,ot,dt,Ct,gt,Pt,jt,Xt,zt,pt,Lt=[],Et,U,H,L;for(N=$(N),Et=N.length,W=A,it=0,Ct=d,gt=0;gt<Et;++gt)pt=N[gt],pt<128&&Lt.push(_(pt));for(ot=dt=Lt.length,dt&&Lt.push(p);ot<Et;){for(Pt=a,gt=0;gt<Et;++gt)pt=N[gt],pt>=W&&pt<Pt&&(Pt=pt);for(U=ot+1,Pt-W>T((a-it)/U)&&R("overflow"),it+=(Pt-W)*U,W=Pt,gt=0;gt<Et;++gt)if(pt=N[gt],pt<W&&++it>a&&R("overflow"),pt==W){for(jt=it,Xt=h;zt=Xt<=Ct?l:Xt>=Ct+u?u:Xt-Ct,!(jt<zt);Xt+=h)L=jt-zt,H=h-zt,Lt.push(_(_t(zt+L%H,0))),jt=T(L/H);Lt.push(_(_t(jt,0))),Ct=V(it,U,ot==dt),it=0,++ot}++it,++W}return Lt.join("")}function At(N){return D(N,function(W){return g.test(W)?X(W.slice(4).toLowerCase()):W})}function Z(N){return D(N,function(W){return y.test(W)?"xn--"+et(W):W})}if(o={version:"1.3.2",ucs2:{decode:$,encode:z},decode:X,encode:et,toASCII:Z,toUnicode:At},r&&n)if(e.exports==r)n.exports=o;else for(F in o)o.hasOwnProperty(F)&&(r[F]=o[F]);else t.punycode=o})(Ru)});function VL(e,i){return Object.prototype.hasOwnProperty.call(e,i)}var zL=function(e,i,t,r){i=i||"&",t=t||"=";var n={};if(typeof e!="string"||e.length===0)return n;var s=/\+/g;e=e.split(i);var o=1e3;r&&typeof r.maxKeys=="number"&&(o=r.maxKeys);var a=e.length;o>0&&a>o&&(a=o);for(var h=0;h<a;++h){var l=e[h].replace(s,"%20"),u=l.indexOf(t),c,f,d,A;u>=0?(c=l.substr(0,u),f=l.substr(u+1)):(c=l,f=""),d=decodeURIComponent(c),A=decodeURIComponent(f),VL(n,d)?Array.isArray(n[d])?n[d].push(A):n[d]=[n[d],A]:n[d]=A}return n},Gs=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},WL=function(e,i,t,r){return i=i||"&",t=t||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(n){var s=encodeURIComponent(Gs(n))+t;return Array.isArray(e[n])?e[n].map(function(o){return s+encodeURIComponent(Gs(o))}).join(i):s+encodeURIComponent(Gs(e[n]))}).join(i):r?encodeURIComponent(Gs(r))+t+encodeURIComponent(Gs(e)):""};hA(function(e,i){i.decode=i.parse=zL,i.encode=i.stringify=WL});/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var u0;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(u0||(u0={}));var c0;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(c0||(c0={}));var f0;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(f0||(f0={}));var Ge;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(Ge||(Ge={}));var d0;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(d0||(d0={}));var A0;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(A0||(A0={}));var p0;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(p0||(p0={}));var g0;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(g0||(g0={}));var v0;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(v0||(v0={}));var y0;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(y0||(y0={}));var m0;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(m0||(m0={}));var I0;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(I0||(I0={}));var C0;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(C0||(C0={}));var _0;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(_0||(_0={}));var x0;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(x0||(x0={}));var E0;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(E0||(E0={}));var b0;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR"})(b0||(b0={}));var w0;(function(e){e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA"})(w0||(w0={}));var T0;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(T0||(T0={}));var B0;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(B0||(B0={}));/*!
 * @pixi/utils - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Th.RETINA_PREFIX=/@([0-9\.]+)x/;Th.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;function jL(){for(var e=[],i=[],t=0;t<32;t++)e[t]=t,i[t]=t;e[Ge.NORMAL_NPM]=Ge.NORMAL,e[Ge.ADD_NPM]=Ge.ADD,e[Ge.SCREEN_NPM]=Ge.SCREEN,i[Ge.NORMAL]=Ge.NORMAL_NPM,i[Ge.ADD]=Ge.ADD_NPM,i[Ge.SCREEN]=Ge.SCREEN_NPM;var r=[];return r.push(i),r.push(e),r}jL();var R0={};function KL(e,i,t){if(t===void 0&&(t=3),!R0[i]){var r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",i+`
Deprecated since v`+e):(r=r.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",i+`
Deprecated since v`+e),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",i+`
Deprecated since v`+e),console.warn(r))),R0[i]=!0}}(function(){function e(i,t,r){this.canvas=Th.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=r||Th.RESOLUTION,this.resize(i,t)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(i,t){this.canvas.width=Math.round(i*this.resolution),this.canvas.height=Math.round(t*this.resolution)},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(i){this.canvas.width=Math.round(i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(i){this.canvas.height=Math.round(i)},enumerable:!1,configurable:!0}),e})();var lA=function(){function e(i){var t=this;this.stage=new $t,i=Object.assign({forceCanvas:!1},i),this.renderer=LI(i),e._plugins.forEach(function(r){r.init.call(t,i)})}return e.registerPlugin=function(i){KL("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),$i.add({type:Zt.Application,ref:i})},e.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(e.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),e.prototype.destroy=function(i,t){var r=this,n=e._plugins.slice(0);n.reverse(),n.forEach(function(s){s.destroy.call(r)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(i),this.renderer=null},e._plugins=[],e}();$i.handleByList(Zt.Application,lA._plugins);$i.add(GC);/*!
 * @pixi/mesh-extras - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var af=function(e,i){return af=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},af(e,i)};function Rs(e,i){af(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var kC=function(e){Rs(i,e);function i(t,r,n,s){t===void 0&&(t=100),r===void 0&&(r=100),n===void 0&&(n=10),s===void 0&&(s=10);var o=e.call(this)||this;return o.segWidth=n,o.segHeight=s,o.width=t,o.height=r,o.build(),o}return i.prototype.build=function(){for(var t=this.segWidth*this.segHeight,r=[],n=[],s=[],o=this.segWidth-1,a=this.segHeight-1,h=this.width/o,l=this.height/a,u=0;u<t;u++){var c=u%this.segWidth,f=u/this.segWidth|0;r.push(c*h,f*l),n.push(c/o,f/a)}for(var d=o*a,u=0;u<d;u++){var A=u%o,p=u/o|0,g=p*this.segWidth+A,y=p*this.segWidth+A+1,I=(p+1)*this.segWidth+A,E=(p+1)*this.segWidth+A+1;s.push(g,y,I,y,E,I)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},i}(la),HC=function(e){Rs(i,e);function i(t,r,n){t===void 0&&(t=200),n===void 0&&(n=0);var s=e.call(this,new Float32Array(r.length*4),new Float32Array(r.length*4),new Uint16Array((r.length-1)*6))||this;return s.points=r,s._width=t,s.textureScale=n,s.build(),s}return Object.defineProperty(i.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),i.prototype.build=function(){var t=this.points;if(t){var r=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),s=this.getIndex();if(!(t.length<1)){r.data.length/4!==t.length&&(r.data=new Float32Array(t.length*4),n.data=new Float32Array(t.length*4),s.data=new Uint16Array((t.length-1)*6));var o=n.data,a=s.data;o[0]=0,o[1]=0,o[2]=0,o[3]=1;for(var h=0,l=t[0],u=this._width*this.textureScale,c=t.length,f=0;f<c;f++){var d=f*4;if(this.textureScale>0){var A=l.x-t[f].x,p=l.y-t[f].y,g=Math.sqrt(A*A+p*p);l=t[f],h+=g/u}else h=f/(c-1);o[d]=h,o[d+1]=0,o[d+2]=h,o[d+3]=1}for(var y=0,f=0;f<c-1;f++){var d=f*2;a[y++]=d,a[y++]=d+1,a[y++]=d+2,a[y++]=d+2,a[y++]=d+1,a[y++]=d+3}n.update(),s.update(),this.updateVertices()}}},i.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var r=t[0],n,s=0,o=0,a=this.buffers[0].data,h=t.length,l=0;l<h;l++){var u=t[l],c=l*4;l<t.length-1?n=t[l+1]:n=u,o=-(n.x-r.x),s=n.y-r.y;var f=Math.sqrt(s*s+o*o),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;s/=f,o/=f,s*=d,o*=d,a[c]=u.x+s,a[c+1]=u.y+o,a[c+2]=u.x-s,a[c+3]=u.y-o,r=u}this.buffers[0].update()}},i.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},i}(la),$L=function(e){Rs(i,e);function i(t,r,n){n===void 0&&(n=0);var s=this,o=new HC(t.height,r,n),a=new _s(t);return n>0&&(t.baseTexture.wrapMode=rr.REPEAT),s=e.call(this,o,a)||this,s.autoUpdate=!0,s}return i.prototype._render=function(t){var r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),e.prototype._render.call(this,t)},i}(Cs),XC=function(e){Rs(i,e);function i(t,r,n){var s=this,o=new kC(t.width,t.height,r,n),a=new _s(Ot.WHITE);return s=e.call(this,o,a)||this,s.texture=t,s.autoResize=!0,s}return i.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,r=this.shader.texture,n=r.width,s=r.height;this.autoResize&&(t.width!==n||t.height!==s)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(i.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),i.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),e.prototype._render.call(this,t)},i.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),e.prototype.destroy.call(this,t)},i}(Cs),JL=function(e){Rs(i,e);function i(t,r,n,s,o){t===void 0&&(t=Ot.EMPTY);var a=this,h=new la(r,n,s);h.getBuffer("aVertexPosition").static=!1;var l=new _s(t);return a=e.call(this,h,l,null,o)||this,a.autoUpdate=!0,a}return Object.defineProperty(i.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),i.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),e.prototype._render.call(this,t)},i}(Cs),Va=10,qL=function(e){Rs(i,e);function i(t,r,n,s,o){r===void 0&&(r=Va),n===void 0&&(n=Va),s===void 0&&(s=Va),o===void 0&&(o=Va);var a=e.call(this,Ot.WHITE,4,4)||this;return a._origWidth=t.orig.width,a._origHeight=t.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=r,a._rightWidth=s,a._topHeight=n,a._bottomHeight=o,a.texture=t,a}return i.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(i.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),i.prototype.updateHorizontalVertices=function(){var t=this.vertices,r=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*r,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*r,t[25]=t[27]=t[29]=t[31]=this._height},i.prototype.updateVerticalVertices=function(){var t=this.vertices,r=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*r,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*r,t[6]=t[14]=t[22]=t[30]=this._width},i.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,r=this._width>t?1:this._width/t,n=this._topHeight+this._bottomHeight,s=this._height>n?1:this._height/n,o=Math.min(r,s);return o},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),i.prototype._refresh=function(){var t=this.texture,r=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var n=1/this._origWidth,s=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=n*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-n*this._rightWidth,r[9]=r[11]=r[13]=r[15]=s*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},i}(XC);/*!
 * @pixi/sprite-animated - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hf=function(e,i){return hf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},hf(e,i)};function ZL(e,i){hf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var tM=function(e){ZL(i,e);function i(t,r){r===void 0&&(r=!0);var n=e.call(this,t[0]instanceof Ot?t[0]:t[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=r,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=t,n}return i.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(ye.shared.remove(this.update,this),this._isConnectedToTicker=!1))},i.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(ye.shared.add(this.update,this,zi.HIGH),this._isConnectedToTicker=!0))},i.prototype.gotoAndStop=function(t){this.stop();var r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture()},i.prototype.gotoAndPlay=function(t){var r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture(),this.play()},i.prototype.update=function(t){if(this._playing){var r=this.animationSpeed*t,n=this.currentFrame;if(this._durations!==null){var s=this._currentTime%1*this._durations[this.currentFrame];for(s+=r/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];var o=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*o,this._currentTime+=o;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n?this.onLoop():this.animationSpeed<0&&this.currentFrame>n&&this.onLoop()),this.updateTexture())}},i.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},i.prototype.destroy=function(t){this.stop(),e.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},i.fromFrames=function(t){for(var r=[],n=0;n<t.length;++n)r.push(Ot.from(t[n]));return new i(r)},i.fromImages=function(t){for(var r=[],n=0;n<t.length;++n)r.push(Ot.from(t[n]));return new i(r)},Object.defineProperty(i.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof Ot)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var r=0;r<t.length;r++)this._textures.push(t[r].texture),this._durations.push(t[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(ye.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(ye.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),i}(Ke);/*!
 * pixi.js - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */$i.add(oC,aC,eA,_C,wC,Zd,SC,LC,dC,mC,IC,BC,iI,lC);var YC={AlphaFilter:MC,BlurFilter:EL,BlurFilterPass:No,ColorMatrixFilter:wh,DisplacementFilter:PL,FXAAFilter:DL,NoiseFilter:ML};const eM=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return Ii},AbstractBatchRenderer:QI,AbstractMultiResource:Sl,AbstractRenderer:FI,AccessibilityManager:oC,AnimatedSprite:tM,AppLoaderPlugin:lC,Application:lA,ArrayResource:Bd,Attribute:bc,get BLEND_MODES(){return Nt},get BUFFER_BITS(){return vo},get BUFFER_TYPE(){return Yi},BaseImageResource:sr,BasePrepare:EC,BaseRenderTexture:Dd,BaseTexture:Wt,BatchDrawCall:vh,BatchGeometry:qd,BatchPluginFactory:GI,BatchRenderer:Zd,BatchShaderGenerator:UI,BatchSystem:Qd,BatchTextureArray:yh,BitmapFont:ln,BitmapFontData:Po,BitmapFontLoader:LC,BitmapText:gL,BlobResource:fC,Bounds:_i,BrowserAdapter:eI,Buffer:Ce,BufferResource:Fn,get CLEAR_MODES(){return Ar},get COLOR_MASK_BITS(){return pc},CanvasResource:Rd,Circle:Jm,CompressedTextureLoader:dC,CompressedTextureResource:Eh,Container:$t,ContextSystem:Ud,CountLimiter:xC,CubeResource:Pd,DDSLoader:mC,DEG_TO_RAD:yi,get DRAW_MODES(){return pi},DisplayObject:Jt,get ENV(){return Wi},Ellipse:qm,get ExtensionType(){return Zt},Extract:aC,get FORMATS(){return ut},FORMATS_TO_COMPONENTS:gC,FillStyle:Dl,Filter:Ht,FilterState:vI,FilterSystem:Md,Framebuffer:gh,FramebufferSystem:Gd,get GC_MODES(){return ph},GLFramebuffer:yI,GLProgram:NI,GLTexture:Za,GRAPHICS_CURVES:xi,Geometry:Ts,GeometrySystem:kd,Graphics:Kt,GraphicsData:Nc,GraphicsGeometry:Fl,IGLUniformData:LO,INSTALLED:_o,get INTERNAL_FORMATS(){return Yt},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:Ro,ImageBitmapResource:Od,ImageResource:Nl,InteractionData:wc,InteractionEvent:XI,InteractionManager:eA,InteractionTrackingData:th,KTXLoader:IC,get LINE_CAP(){return Me},get LINE_JOIN(){return si},LineStyle:Ll,Loader:Bo,get LoaderResource(){return de},get MASK_TYPES(){return Ie},get MIPMAP_MODES(){return mi},get MSAA_QUALITY(){return ve},MaskData:mI,MaskSystem:Hd,Matrix:kt,Mesh:Cs,MeshBatchUvs:NC,MeshGeometry:la,MeshMaterial:_s,NineSlicePlane:qL,ObjectRenderer:aa,ObservablePoint:mr,PI_2:co,get PRECISION(){return Gi},ParticleContainer:LF,ParticleRenderer:_C,PlaneGeometry:kC,Point:M,Polygon:Lr,Prepare:wC,Program:Bs,ProjectionSystem:Vd,Quad:gI,QuadUv:Ld,RAD_TO_DEG:El,get RENDERER_TYPE(){return ys},Rectangle:Tt,RenderTexture:oi,RenderTexturePool:pI,RenderTextureSystem:zd,Renderer:ha,ResizePlugin:GC,Resource:Sn,RopeGeometry:HC,RoundedRectangle:Zm,Runner:Oe,get SAMPLER_TYPES(){return yo},get SCALE_MODES(){return ni},get SHAPES(){return ne},SVGResource:Sd,ScissorSystem:Xd,Shader:Cr,ShaderSystem:Wd,SimpleMesh:JL,SimplePlane:XC,SimpleRope:$L,Sprite:Ke,SpriteMaskFilter:wI,Spritesheet:TC,SpritesheetLoader:BC,State:Xr,StateSystem:jd,StencilSystem:Yd,System:qO,get TARGETS(){return Mr},get TEXT_GRADIENT(){return ms},get TYPES(){return Dt},TYPES_TO_BYTES_PER_COMPONENT:Gc,TYPES_TO_BYTES_PER_PIXEL:vC,TemporaryDisplayObject:Td,Text:Is,TextFormat:OC,TextMetrics:Ji,TextStyle:Nn,Texture:Ot,TextureGCSystem:Kd,TextureLoader:uC,TextureMatrix:Ol,TextureSystem:$d,TextureUvs:Fd,Ticker:ye,TickerPlugin:iI,TilingSprite:PC,TilingSpriteRenderer:SC,TimeLimiter:eL,Transform:oa,get UPDATE_PRIORITY(){return zi},UniformGroup:Qr,VERSION:eD,VideoResource:Nd,ViewableBuffer:mh,get WRAP_MODES(){return rr},XMLFormat:bh,XMLStringFormat:DC,accessibleTarget:sC,autoDetectFormat:aA,autoDetectRenderer:LI,autoDetectResource:Pl,checkMaxIfStatementsInShader:bI,createUBOElements:RI,defaultFilterVertex:Jd,defaultVertex:MI,extensions:$i,filters:YC,generateProgram:OI,generateUniformBufferSync:SI,getTestContext:_I,getUBOData:PI,graphicsUtils:nA,groupD8:he,interactiveTarget:YI,isMobile:Ai,parseDDS:pC,parseKTX:yC,resources:kI,settings:ft,systems:HI,uniformParsers:wn,utils:oO},Symbol.toStringTag,{value:"Module"}));function Tn(e,i){return i.some(t=>Xm(e,t))}function lf(e,i,t){let r=0;switch(e){case"left":r=0;break;case"right":r=i-t;break;case"center":r=(i-t)/2;break;default:r=0}return r}var uf={},iM={get exports(){return uf},set exports(e){uf=e}},nh={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},rM=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function nM(e){return e===10||e===13||e===8232||e===8233||e===32||e===9||e===11||e===12||e===160||e>=5760&&rM.indexOf(e)>=0}function sM(e){switch(e|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function oM(e){return(e|32)===97}function Wn(e){return e>=48&&e<=57}function aM(e){return e>=48&&e<=57||e===43||e===45||e===46}function hM(e){this.index=0,this.path=e,this.max=e.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function sh(e){for(;e.index<e.max&&nM(e.path.charCodeAt(e.index));)e.index++}function lM(e){var i=e.path.charCodeAt(e.index);if(i===48){e.param=0,e.index++;return}if(i===49){e.param=1,e.index++;return}e.err="SvgPath: arc flag can be 0 or 1 only (at pos "+e.index+")"}function uM(e){var i=e.index,t=i,r=e.max,n=!1,s=!1,o=!1,a=!1,h;if(t>=r){e.err="SvgPath: missed param (at pos "+t+")";return}if(h=e.path.charCodeAt(t),(h===43||h===45)&&(t++,h=t<r?e.path.charCodeAt(t):0),!Wn(h)&&h!==46){e.err="SvgPath: param should start with 0..9 or `.` (at pos "+t+")";return}if(h!==46){if(n=h===48,t++,h=t<r?e.path.charCodeAt(t):0,n&&t<r&&h&&Wn(h)){e.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+i+")";return}for(;t<r&&Wn(e.path.charCodeAt(t));)t++,s=!0;h=t<r?e.path.charCodeAt(t):0}if(h===46){for(a=!0,t++;Wn(e.path.charCodeAt(t));)t++,o=!0;h=t<r?e.path.charCodeAt(t):0}if(h===101||h===69){if(a&&!s&&!o){e.err="SvgPath: invalid float exponent (at pos "+t+")";return}if(t++,h=t<r?e.path.charCodeAt(t):0,(h===43||h===45)&&t++,t<r&&Wn(e.path.charCodeAt(t)))for(;t<r&&Wn(e.path.charCodeAt(t));)t++;else{e.err="SvgPath: invalid float exponent (at pos "+t+")";return}}e.index=t,e.param=parseFloat(e.path.slice(i,t))+0}function Pu(e){var i,t;i=e.path[e.segmentStart],t=i.toLowerCase();var r=e.data;if(t==="m"&&r.length>2&&(e.result.push([i,r[0],r[1]]),r=r.slice(2),t="l",i=i==="m"?"l":"L"),t==="r")e.result.push([i].concat(r));else for(;r.length>=nh[t]&&(e.result.push([i].concat(r.splice(0,nh[t]))),!!nh[t]););}function cM(e){var i=e.max,t,r,n,s,o;if(e.segmentStart=e.index,t=e.path.charCodeAt(e.index),r=oM(t),!sM(t)){e.err="SvgPath: bad command "+e.path[e.index]+" (at pos "+e.index+")";return}if(s=nh[e.path[e.index].toLowerCase()],e.index++,sh(e),e.data=[],!s){Pu(e);return}for(n=!1;;){for(o=s;o>0;o--){if(r&&(o===3||o===4)?lM(e):uM(e),e.err.length){Pu(e);return}e.data.push(e.param),sh(e),n=!1,e.index<i&&e.path.charCodeAt(e.index)===44&&(e.index++,sh(e),n=!0)}if(!n&&(e.index>=e.max||!aM(e.path.charCodeAt(e.index))))break}Pu(e)}var fM=function(i){var t=new hM(i),r=t.max;for(sh(t);t.index<r&&!t.err.length;)cM(t);return t.result.length&&("mM".indexOf(t.result[0][0])<0?(t.err="SvgPath: string should start with `M` or `m`",t.result=[]):t.result[0][0]="M"),{err:t.err,segments:t.result}};function dM(e,i){return[e[0]*i[0]+e[2]*i[1],e[1]*i[0]+e[3]*i[1],e[0]*i[2]+e[2]*i[3],e[1]*i[2]+e[3]*i[3],e[0]*i[4]+e[2]*i[5]+e[4],e[1]*i[4]+e[3]*i[5]+e[5]]}function ji(){if(!(this instanceof ji))return new ji;this.queue=[],this.cache=null}ji.prototype.matrix=function(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1&&e[4]===0&&e[5]===0?this:(this.cache=null,this.queue.push(e),this)};ji.prototype.translate=function(e,i){return(e!==0||i!==0)&&(this.cache=null,this.queue.push([1,0,0,1,e,i])),this};ji.prototype.scale=function(e,i){return(e!==1||i!==1)&&(this.cache=null,this.queue.push([e,0,0,i,0,0])),this};ji.prototype.rotate=function(e,i,t){var r,n,s;return e!==0&&(this.translate(i,t),r=e*Math.PI/180,n=Math.cos(r),s=Math.sin(r),this.queue.push([n,s,-s,n,0,0]),this.cache=null,this.translate(-i,-t)),this};ji.prototype.skewX=function(e){return e!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(e*Math.PI/180),1,0,0])),this};ji.prototype.skewY=function(e){return e!==0&&(this.cache=null,this.queue.push([1,Math.tan(e*Math.PI/180),0,1,0,0])),this};ji.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var e=1;e<this.queue.length;e++)this.cache=dM(this.cache,this.queue[e]);return this.cache};ji.prototype.calc=function(e,i,t){var r;return this.queue.length?(this.cache||(this.cache=this.toArray()),r=this.cache,[e*r[0]+i*r[2]+(t?0:r[4]),e*r[1]+i*r[3]+(t?0:r[5])]):[e,i]};var VC=ji,AM=VC,pM={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},gM=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,vM=/[\s,]+/,yM=function(i){var t=new AM,r,n;return i.split(gM).forEach(function(s){if(s.length){if(typeof pM[s]<"u"){r=s;return}switch(n=s.split(vM).map(function(o){return+o||0}),r){case"matrix":n.length===6&&t.matrix(n);return;case"scale":n.length===1?t.scale(n[0],n[0]):n.length===2&&t.scale(n[0],n[1]);return;case"rotate":n.length===1?t.rotate(n[0],0,0):n.length===3&&t.rotate(n[0],n[1],n[2]);return;case"translate":n.length===1?t.translate(n[0],0):n.length===2&&t.translate(n[0],n[1]);return;case"skewX":n.length===1&&t.skewX(n[0]);return;case"skewY":n.length===1&&t.skewY(n[0]);return}}}),t},eo=Math.PI*2;function P0(e,i,t,r){var n=e*r-i*t<0?-1:1,s=e*t+i*r;return s>1&&(s=1),s<-1&&(s=-1),n*Math.acos(s)}function mM(e,i,t,r,n,s,o,a,h,l){var u=l*(e-t)/2+h*(i-r)/2,c=-h*(e-t)/2+l*(i-r)/2,f=o*o,d=a*a,A=u*u,p=c*c,g=f*d-f*p-d*A;g<0&&(g=0),g/=f*p+d*A,g=Math.sqrt(g)*(n===s?-1:1);var y=g*o/a*c,I=g*-a/o*u,E=l*y-h*I+(e+t)/2,w=h*y+l*I+(i+r)/2,T=(u-y)/o,_=(c-I)/a,F=(-u-y)/o,R=(-c-I)/a,S=P0(1,0,T,_),D=P0(T,_,F,R);return s===0&&D>0&&(D-=eo),s===1&&D<0&&(D+=eo),[E,w,S,D]}function IM(e,i){var t=1.3333333333333333*Math.tan(i/4),r=Math.cos(e),n=Math.sin(e),s=Math.cos(e+i),o=Math.sin(e+i);return[r,n,r-n*t,n+r*t,s+o*t,o-s*t,s,o]}var CM=function(i,t,r,n,s,o,a,h,l){var u=Math.sin(l*eo/360),c=Math.cos(l*eo/360),f=c*(i-r)/2+u*(t-n)/2,d=-u*(i-r)/2+c*(t-n)/2;if(f===0&&d===0)return[];if(a===0||h===0)return[];a=Math.abs(a),h=Math.abs(h);var A=f*f/(a*a)+d*d/(h*h);A>1&&(a*=Math.sqrt(A),h*=Math.sqrt(A));var p=mM(i,t,r,n,s,o,a,h,u,c),g=[],y=p[2],I=p[3],E=Math.max(Math.ceil(Math.abs(I)/(eo/4)),1);I/=E;for(var w=0;w<E;w++)g.push(IM(y,I)),y+=I;return g.map(function(T){for(var _=0;_<T.length;_+=2){var F=T[_+0],R=T[_+1];F*=a,R*=h;var S=c*F-u*R,D=u*F+c*R;T[_+0]=S+p[0],T[_+1]=D+p[1]}return T})},io=1e-10,S0=Math.PI/180;function Oo(e,i,t){if(!(this instanceof Oo))return new Oo(e,i,t);this.rx=e,this.ry=i,this.ax=t}Oo.prototype.transform=function(e){var i=Math.cos(this.ax*S0),t=Math.sin(this.ax*S0),r=[this.rx*(e[0]*i+e[2]*t),this.rx*(e[1]*i+e[3]*t),this.ry*(-e[0]*t+e[2]*i),this.ry*(-e[1]*t+e[3]*i)],n=r[0]*r[0]+r[2]*r[2],s=r[1]*r[1]+r[3]*r[3],o=((r[0]-r[3])*(r[0]-r[3])+(r[2]+r[1])*(r[2]+r[1]))*((r[0]+r[3])*(r[0]+r[3])+(r[2]-r[1])*(r[2]-r[1])),a=(n+s)/2;if(o<io*a)return this.rx=this.ry=Math.sqrt(a),this.ax=0,this;var h=r[0]*r[1]+r[2]*r[3];o=Math.sqrt(o);var l=a+o/2,u=a-o/2;return this.ax=Math.abs(h)<io&&Math.abs(l-s)<io?90:Math.atan(Math.abs(h)>Math.abs(l-s)?(l-n)/h:h/(l-s))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(l),this.ry=Math.sqrt(u)):(this.ax+=90,this.rx=Math.sqrt(u),this.ry=Math.sqrt(l)),this};Oo.prototype.isDegenerate=function(){return this.rx<io*this.ry||this.ry<io*this.rx};var _M=Oo,xM=fM,EM=yM,Yr=VC,bM=CM,wM=_M;function Ae(e){if(!(this instanceof Ae))return new Ae(e);var i=xM(e);this.segments=i.segments,this.err=i.err,this.__stack=[]}Ae.from=function(e){if(typeof e=="string")return new Ae(e);if(e instanceof Ae){var i=new Ae("");return i.err=e.err,i.segments=e.segments.map(function(t){return t.slice()}),i.__stack=e.__stack.map(function(t){return Yr().matrix(t.toArray())}),i}throw new Error("SvgPath.from: invalid param type "+e)};Ae.prototype.__matrix=function(e){var i=this,t;e.queue.length&&this.iterate(function(r,n,s,o){var a,h,l,u;switch(r[0]){case"v":a=e.calc(0,r[1],!0),h=a[0]===0?["v",a[1]]:["l",a[0],a[1]];break;case"V":a=e.calc(s,r[1],!1),h=a[0]===e.calc(s,o,!1)[0]?["V",a[1]]:["L",a[0],a[1]];break;case"h":a=e.calc(r[1],0,!0),h=a[1]===0?["h",a[0]]:["l",a[0],a[1]];break;case"H":a=e.calc(r[1],o,!1),h=a[1]===e.calc(s,o,!1)[1]?["H",a[0]]:["L",a[0],a[1]];break;case"a":case"A":var c=e.toArray(),f=wM(r[1],r[2],r[3]).transform(c);if(c[0]*c[3]-c[1]*c[2]<0&&(r[5]=r[5]?"0":"1"),a=e.calc(r[6],r[7],r[0]==="a"),r[0]==="A"&&r[6]===s&&r[7]===o||r[0]==="a"&&r[6]===0&&r[7]===0){h=[r[0]==="a"?"l":"L",a[0],a[1]];break}f.isDegenerate()?h=[r[0]==="a"?"l":"L",a[0],a[1]]:h=[r[0],f.rx,f.ry,f.ax,r[4],r[5],a[0],a[1]];break;case"m":u=n>0,a=e.calc(r[1],r[2],u),h=["m",a[0],a[1]];break;default:for(l=r[0],h=[l],u=l.toLowerCase()===l,t=1;t<r.length;t+=2)a=e.calc(r[t],r[t+1],u),h.push(a[0],a[1])}i.segments[n]=h},!0)};Ae.prototype.__evaluateStack=function(){var e,i;if(this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(e=Yr(),i=this.__stack.length;--i>=0;)e.matrix(this.__stack[i].toArray());this.__matrix(e),this.__stack=[]}};Ae.prototype.toString=function(){var e="",i="",t=!1;this.__evaluateStack();for(var r=0,n=this.segments.length;r<n;r++){var s=this.segments[r],o=s[0];o!==i||o==="m"||o==="M"?(o==="m"&&i==="z"&&(e+=" "),e+=o,t=!1):t=!0;for(var a=1;a<s.length;a++){var h=s[a];a===1?t&&h>=0&&(e+=" "):h>=0&&(e+=" "),e+=h}i=o}return e};Ae.prototype.translate=function(e,i){return this.__stack.push(Yr().translate(e,i||0)),this};Ae.prototype.scale=function(e,i){return this.__stack.push(Yr().scale(e,!i&&i!==0?e:i)),this};Ae.prototype.rotate=function(e,i,t){return this.__stack.push(Yr().rotate(e,i||0,t||0)),this};Ae.prototype.skewX=function(e){return this.__stack.push(Yr().skewX(e)),this};Ae.prototype.skewY=function(e){return this.__stack.push(Yr().skewY(e)),this};Ae.prototype.matrix=function(e){return this.__stack.push(Yr().matrix(e)),this};Ae.prototype.transform=function(e){return e.trim()?(this.__stack.push(EM(e)),this):this};Ae.prototype.round=function(e){var i=0,t=0,r=0,n=0,s;return e=e||0,this.__evaluateStack(),this.segments.forEach(function(o){var a=o[0].toLowerCase()===o[0];switch(o[0]){case"H":case"h":a&&(o[1]+=r),r=o[1]-o[1].toFixed(e),o[1]=+o[1].toFixed(e);return;case"V":case"v":a&&(o[1]+=n),n=o[1]-o[1].toFixed(e),o[1]=+o[1].toFixed(e);return;case"Z":case"z":r=i,n=t;return;case"M":case"m":a&&(o[1]+=r,o[2]+=n),r=o[1]-o[1].toFixed(e),n=o[2]-o[2].toFixed(e),i=r,t=n,o[1]=+o[1].toFixed(e),o[2]=+o[2].toFixed(e);return;case"A":case"a":a&&(o[6]+=r,o[7]+=n),r=o[6]-o[6].toFixed(e),n=o[7]-o[7].toFixed(e),o[1]=+o[1].toFixed(e),o[2]=+o[2].toFixed(e),o[3]=+o[3].toFixed(e+2),o[6]=+o[6].toFixed(e),o[7]=+o[7].toFixed(e);return;default:s=o.length,a&&(o[s-2]+=r,o[s-1]+=n),r=o[s-2]-o[s-2].toFixed(e),n=o[s-1]-o[s-1].toFixed(e),o.forEach(function(h,l){l&&(o[l]=+o[l].toFixed(e))});return}}),this};Ae.prototype.iterate=function(e,i){var t=this.segments,r={},n=!1,s=0,o=0,a=0,h=0,l,u,c;if(i||this.__evaluateStack(),t.forEach(function(f,d){var A=e(f,d,s,o);Array.isArray(A)&&(r[d]=A,n=!0);var p=f[0]===f[0].toLowerCase();switch(f[0]){case"m":case"M":s=f[1]+(p?s:0),o=f[2]+(p?o:0),a=s,h=o;return;case"h":case"H":s=f[1]+(p?s:0);return;case"v":case"V":o=f[1]+(p?o:0);return;case"z":case"Z":s=a,o=h;return;default:s=f[f.length-2]+(p?s:0),o=f[f.length-1]+(p?o:0)}}),!n)return this;for(c=[],l=0;l<t.length;l++)if(typeof r[l]<"u")for(u=0;u<r[l].length;u++)c.push(r[l][u]);else c.push(t[l]);return this.segments=c,this};Ae.prototype.abs=function(){return this.iterate(function(e,i,t,r){var n=e[0],s=n.toUpperCase(),o;if(n!==s)switch(e[0]=s,n){case"v":e[1]+=r;return;case"a":e[6]+=t,e[7]+=r;return;default:for(o=1;o<e.length;o++)e[o]+=o%2?t:r}},!0),this};Ae.prototype.rel=function(){return this.iterate(function(e,i,t,r){var n=e[0],s=n.toLowerCase(),o;if(n!==s&&!(i===0&&n==="M"))switch(e[0]=s,n){case"V":e[1]-=r;return;case"A":e[6]-=t,e[7]-=r;return;default:for(o=1;o<e.length;o++)e[o]-=o%2?t:r}},!0),this};Ae.prototype.unarc=function(){return this.iterate(function(e,i,t,r){var n,s,o,a=[],h=e[0];return h!=="A"&&h!=="a"?null:(h==="a"?(s=t+e[6],o=r+e[7]):(s=e[6],o=e[7]),n=bM(t,r,s,o,e[4],e[5],e[1],e[2],e[3]),n.length===0?[[e[0]==="a"?"l":"L",e[6],e[7]]]:(n.forEach(function(l){a.push(["C",l[2],l[3],l[4],l[5],l[6],l[7]])}),a))}),this};Ae.prototype.unshort=function(){var e=this.segments,i,t,r,n,s;return this.iterate(function(o,a,h,l){var u=o[0],c=u.toUpperCase(),f;a&&(c==="T"?(f=u==="t",r=e[a-1],r[0]==="Q"?(i=r[1]-h,t=r[2]-l):r[0]==="q"?(i=r[1]-r[3],t=r[2]-r[4]):(i=0,t=0),n=-i,s=-t,f||(n+=h,s+=l),e[a]=[f?"q":"Q",n,s,o[1],o[2]]):c==="S"&&(f=u==="s",r=e[a-1],r[0]==="C"?(i=r[3]-h,t=r[4]-l):r[0]==="c"?(i=r[3]-r[5],t=r[4]-r[6]):(i=0,t=0),n=-i,s=-t,f||(n+=h,s+=l),e[a]=[f?"c":"C",n,s,o[1],o[2],o[3],o[4]]))}),this};var TM=Ae;(function(e){e.exports=TM})(iM);const u4=bR(uf);function BM(e){let i=0,t=0,r=0,n=0;const s=[];for(const{key:o,data:a}of e)switch(o){case"M":s.push({key:"M",data:[...a]}),[i,t]=a,[r,n]=a;break;case"m":i+=a[0],t+=a[1],s.push({key:"M",data:[i,t]}),r=i,n=t;break;case"L":s.push({key:"L",data:[...a]}),[i,t]=a;break;case"l":i+=a[0],t+=a[1],s.push({key:"L",data:[i,t]});break;case"C":s.push({key:"C",data:[...a]}),i=a[4],t=a[5];break;case"c":{const h=a.map((l,u)=>u%2?l+t:l+i);s.push({key:"C",data:h}),i=h[4],t=h[5];break}case"Q":s.push({key:"Q",data:[...a]}),i=a[2],t=a[3];break;case"q":{const h=a.map((l,u)=>u%2?l+t:l+i);s.push({key:"Q",data:h}),i=h[2],t=h[3];break}case"A":s.push({key:"A",data:[...a]}),i=a[5],t=a[6];break;case"a":i+=a[5],t+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],i,t]});break;case"H":s.push({key:"H",data:[...a]}),i=a[0];break;case"h":i+=a[0],s.push({key:"H",data:[i]});break;case"V":s.push({key:"V",data:[...a]}),t=a[0];break;case"v":t+=a[0],s.push({key:"V",data:[t]});break;case"S":s.push({key:"S",data:[...a]}),i=a[2],t=a[3];break;case"s":{const h=a.map((l,u)=>u%2?l+t:l+i);s.push({key:"S",data:h}),i=h[2],t=h[3];break}case"T":s.push({key:"T",data:[...a]}),i=a[0],t=a[1];break;case"t":i+=a[0],t+=a[1],s.push({key:"T",data:[i,t]});break;case"Z":case"z":s.push({key:"Z",data:[]}),i=r,t=n;break}return s}function RM(e){const i=[];let t="",r=0,n=0,s=0,o=0,a=0,h=0;for(const{key:l,data:u}of e){switch(l){case"M":i.push({key:"M",data:[...u]}),[r,n]=u,[s,o]=u;break;case"C":i.push({key:"C",data:[...u]}),r=u[4],n=u[5],a=u[2],h=u[3];break;case"L":i.push({key:"L",data:[...u]}),[r,n]=u;break;case"H":r=u[0],i.push({key:"L",data:[r,n]});break;case"V":n=u[0],i.push({key:"L",data:[r,n]});break;case"S":{let c=0,f=0;t==="C"||t==="S"?(c=r+(r-a),f=n+(n-h)):(c=r,f=n),i.push({key:"C",data:[c,f,...u]}),a=u[0],h=u[1],r=u[2],n=u[3];break}case"T":{const[c,f]=u;let d=0,A=0;t==="Q"||t==="T"?(d=r+(r-a),A=n+(n-h)):(d=r,A=n);const p=r+2*(d-r)/3,g=n+2*(A-n)/3,y=c+2*(d-c)/3,I=f+2*(A-f)/3;i.push({key:"C",data:[p,g,y,I,c,f]}),a=d,h=A,r=c,n=f;break}case"Q":{const[c,f,d,A]=u,p=r+2*(c-r)/3,g=n+2*(f-n)/3,y=d+2*(c-d)/3,I=A+2*(f-A)/3;i.push({key:"C",data:[p,g,y,I,d,A]}),a=c,h=f,r=d,n=A;break}case"A":{const c=Math.abs(u[0]),f=Math.abs(u[1]),d=u[2],A=u[3],p=u[4],g=u[5],y=u[6];c===0||f===0?(i.push({key:"C",data:[r,n,g,y,g,y]}),r=g,n=y):(r!==g||n!==y)&&(zC(r,n,g,y,c,f,d,A,p).forEach(function(E){i.push({key:"C",data:E})}),r=g,n=y);break}case"Z":i.push({key:"Z",data:[]}),r=s,n=o;break}t=l}return i}function PM(e){return Math.PI*e/180}function ks(e,i,t){const r=e*Math.cos(t)-i*Math.sin(t),n=e*Math.sin(t)+i*Math.cos(t);return[r,n]}function zC(e,i,t,r,n,s,o,a,h,l){const u=PM(o);let c=[],f=0,d=0,A=0,p=0;if(l)[f,d,A,p]=l;else{[e,i]=ks(e,i,-u),[t,r]=ks(t,r,-u);const z=(e-t)/2,q=(i-r)/2;let _t=z*z/(n*n)+q*q/(s*s);_t>1&&(_t=Math.sqrt(_t),n=_t*n,s=_t*s);const V=a===h?-1:1,X=n*n,et=s*s,At=X*et-X*q*q-et*z*z,Z=X*q*q+et*z*z,N=V*Math.sqrt(Math.abs(At/Z));A=N*n*q/s+(e+t)/2,p=N*-s*z/n+(i+r)/2,f=Math.asin(parseFloat(((i-p)/s).toFixed(9))),d=Math.asin(parseFloat(((r-p)/s).toFixed(9))),e<A&&(f=Math.PI-f),t<A&&(d=Math.PI-d),f<0&&(f=Math.PI*2+f),d<0&&(d=Math.PI*2+d),h&&f>d&&(f=f-Math.PI*2),!h&&d>f&&(d=d-Math.PI*2)}let g=d-f;if(Math.abs(g)>Math.PI*120/180){const z=d,q=t,_t=r;h&&d>f?d=f+Math.PI*120/180*1:d=f+Math.PI*120/180*-1,t=A+n*Math.cos(d),r=p+s*Math.sin(d),c=zC(t,r,q,_t,n,s,o,0,h,[d,z,A,p])}g=d-f;const y=Math.cos(f),I=Math.sin(f),E=Math.cos(d),w=Math.sin(d),T=Math.tan(g/4),_=4/3*n*T,F=4/3*s*T,R=[e,i],S=[e+_*I,i-F*y],D=[t+_*w,r-F*E],$=[t,r];if(S[0]=2*R[0]-S[0],S[1]=2*R[1]-S[1],l)return[S,D,$].concat(c);{c=[S,D,$].concat(c);const z=[];for(let q=0;q<c.length;q+=3){const _t=ks(c[q][0],c[q][1],u),V=ks(c[q+1][0],c[q+1][1],u),X=ks(c[q+2][0],c[q+2][1],u);z.push([_t[0],_t[1],V[0],V[1],X[0],X[1]])}return z}}const SM=0,cf=1,WC=2,za={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function NM(e){const i=[];for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))i[i.length]={type:SM,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))i[i.length]={type:cf,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return i[i.length]={type:WC,text:""},i}function Su(e,i){return e.type===i}function jC(e){const i=[],t=NM(e);let r="BOD",n=0,s=t[n];for(;!Su(s,WC);){let o=0;const a=[];if(r==="BOD")if(s.text==="M"||s.text==="m")n++,o=za[s.text],r=s.text;else return jC("M0,0"+e);else Su(s,cf)?o=za[r]:(n++,o=za[s.text],r=s.text);if(n+o<t.length){for(let h=n;h<n+o;h++){const l=t[h];if(Su(l,cf))a[a.length]=+l.text;else throw new Error("Param not a number: "+r+","+l.text)}if(typeof za[r]=="number"){const h={key:r,data:a};i.push(h),n+=o,s=t[n],r==="M"&&(r="L"),r==="m"&&(r="l")}else throw new Error("Bad segment: "+r)}else throw new Error("Path data ended short")}return i}function OM(e,i){return Math.sqrt(oh(e,i))}function oh(e,i){return Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2)}function DM(e,i,t){const r=oh(i,t);if(r===0)return oh(e,i);let n=((e[0]-i[0])*(t[0]-i[0])+(e[1]-i[1])*(t[1]-i[1]))/r;return n=Math.max(0,Math.min(1,n)),oh(e,on(i,t,n))}function on(e,i,t){return[e[0]+(i[0]-e[0])*t,e[1]+(i[1]-e[1])*t]}function FM(e,i){const t=e[i+0],r=e[i+1],n=e[i+2],s=e[i+3];let o=3*r[0]-2*t[0]-s[0];o*=o;let a=3*r[1]-2*t[1]-s[1];a*=a;let h=3*n[0]-2*s[0]-t[0];h*=h;let l=3*n[1]-2*s[1]-t[1];return l*=l,o<h&&(o=h),a<l&&(a=l),o+a}function ff(e,i,t,r){const n=r||[];if(FM(e,i)<t){const s=e[i+0];n.length?OM(n[n.length-1],s)>1&&n.push(s):n.push(s),n.push(e[i+3])}else{const o=e[i+0],a=e[i+1],h=e[i+2],l=e[i+3],u=on(o,a,.5),c=on(a,h,.5),f=on(h,l,.5),d=on(u,c,.5),A=on(c,f,.5),p=on(d,A,.5);ff([o,u,d,p],0,t,n),ff([p,A,f,l],0,t,n)}return n}function LM(e,i){return Bh(e,0,e.length,i)}function Bh(e,i,t,r,n){const s=n||[],o=e[i],a=e[t-1];let h=0,l=1;for(let u=i+1;u<t-1;++u){const c=DM(e[u],o,a);c>h&&(h=c,l=u)}return Math.sqrt(h)>r?(Bh(e,i,l+1,r,s),Bh(e,l,t,r,s)):(s.length||s.push(o),s.push(a)),s}function MM(e,i=.15,t){const r=[],n=(e.length-1)/3;for(let s=0;s<n;s++){const o=s*3;ff(e,o,i,r)}return t&&t>0?Bh(r,0,r.length,t):r}function QM(e,i,t){const r=jC(e),n=RM(BM(r)),s=[];let o=[],a=[0,0],h=[];const l=()=>{h.length>=4&&o.push(...MM(h,i)),h=[]},u=()=>{l(),o.length&&(s.push(o),o=[])};for(const{key:f,data:d}of n)switch(f){case"M":u(),a=[d[0],d[1]],o.push(a);break;case"L":l(),o.push([d[0],d[1]]);break;case"C":if(!h.length){const A=o.length?o[o.length-1]:a;h.push([A[0],A[1]])}h.push([d[0],d[1]]),h.push([d[2],d[3]]),h.push([d[4],d[5]]);break;case"Z":l(),o.push([a[0],a[1]]);break}if(u(),!t)return s;const c=[];for(const f of s){const d=LM(f,t);d.length&&c.push(d)}return c}const UM=(e,i)=>{var s;const t=e.getOriginalPoints(),r=$C(t);let n=r;return i&&(n=KC(r,e,i)),(s=e.exportOption)!=null&&s.removeSamePoint&&(n=YM(n)),[n]},GM=e=>{const i=[],t=HM(e);return t&&t.length>0&&t.forEach(r=>{const n=XM(r);i.push(n)}),i},kM=(e,i=1,t=!1,r=!0,n=0,s=0,o=3)=>{let a="";for(let h=0;h<e.length;h++){for(let l=0;l<e[h].length;l++){const u=t&&![0,e[h].length-1].includes(l);l?a+=u?"Q":"L":a+="M",a+=u?`${n+(e[h][l].x+e[h][l-1].x)/2/i} ${s+(e[h][l].y+e[h][l-1].y)/2/i} ${n+(e[h][l].x+e[h][l+1].x)/2/i} ${s+(e[h][l].y+e[h][l+1].y)/2/i}`:`${n+Number((e[h][l].x/i).toFixed(o))}, ${s+Number((e[h][l].y/i).toFixed(o))}`}r&&(a+="Z")}return a===""&&(a="M0,0"),a},HM=e=>e.match(/([Mm][^mM]*)+?/g)||[],XM=(e,i=!1)=>{let r=(QM(e)[0]||[]).map(n=>new M(n[0],n[1]));return i&&(r=r.reverse()),r},YM=e=>{const i=new Map;for(const t of e){const r=`${t.x}-${t.y}`;(!i.has(r)||i.get(r).y!==t.y)&&i.set(r,t)}return[...i.values()]},KC=(e,i,t)=>{const r=i.toGlobal(new M(0,0)),{x:n,y:s}=t.toLocal({x:r.x,y:r.y}),o=new kt,a=i.toJSON(t),{pivot:h,scale:l,angle:u,skew:c}=a;o.setTransform(n,s,h.x,h.y,l.x,l.y,u*yi,c.x,c.y);for(let f=0;f<e.length;f++)e[f]&&o.apply(e[f],e[f]);return e},$C=e=>{const i=[];for(let t=0;t<e.length/2;t++){if(isNaN(e[t])||typeof e[t]!="number"){console.log("pathPointUtils combinePoints points is NaN!!");continue}const r={x:e[t*2],y:e[t*2+1]};i.push(r)}return i};class Ps extends Kt{constructor(t){super();x(this,"config");x(this,"originWidth",0);x(this,"originHeight",0);x(this,"isFill",!1);x(this,"type",Qt.LINE);this.interactive=!0,this.config=t||{...Ml}}draw(){this.toggleFill(this.isFill)}addHitArea(t){if(t)this.hitArea=t;else{const{x:r,y:n,width:s,height:o}=this.getLocalBounds(),a=1,h=s||a,l=o||a;this.hitArea=new Tt(r-(s?0:a/2),n-(o?0:a/2),h,l)}}addLineHitArea(t,r,n=1){const s=Math.atan2(r.y-t.y,r.x-t.x),o=p=>parseFloat(p.toFixed(1)),a=o(Math.cos(s-.5*Math.PI)*n),h=o(Math.sin(s-.5*Math.PI)*n),l=o(Math.cos(s+.5*Math.PI)*n),u=o(Math.sin(s+.5*Math.PI)*n),c=new M(t.x+a,t.y+h),f=new M(t.x+l,t.y+u),d=new M(r.x+l,r.y+u),A=new M(r.x+a,r.y+h);this.hitArea=new Lr([c,f,d,A])}start(t,r){this.emit(Le.DRAW_BEGIN,this),this.position.set(t.x,t.y)}end(t,r){this.toggleFill(this.isFill),this.done()}destroy(t){super.destroy(t)}done(){this.emit(Le.DRAW_DONE,this)}reDraw(){const{geometry:t,isFill:r}=this,{lineColor:n,fillColor:s}=this.getRenderColor(),{geometry:{graphicsData:o}}=this;let a=!1;o.forEach(h=>{h.fillStyle.color=s,h.fillStyle.alpha=r?1:0,h.fillStyle.visible||(a=!0),h.fillStyle.visible=!0,h.lineStyle.color=n,h.lineStyle.native=!0,h.lineStyle.width=1,h.lineStyle.visible=!0}),a&&t.invalidate()}undo(){this.clear()}toggleFill(t=this.isFill){this.isFill=t,t?this.setFillMode():this.setLineMode(),this.reDraw()}setUpHoverEvent(){this.on("pointerover",this.highlightBound.bind(this)),this.on("pointerout",this.reset.bind(this))}reset(){const{lineColor:t,fillColor:r}=this.getRenderColor();this.changeColor({lineColor:t,fillColor:r,isFill:this.isFill}),this.line.color=t}getRenderColor(){let t=this.config.lineColor||0,r=this.config.fillColor||0;return this.layerColor&&(t=mo(this.layerColor),r=mo(this.layerColor)),{lineColor:t,fillColor:r}}changeColor(t){const{lineColor:r,fillColor:n,isFill:s=this.isFill}=t;this.geometry.batches.forEach(a=>{const h=new Ll,l=new Dl;a.style&&a.style.constructor.name===h.constructor.name&&(a.style.color=r),a.style&&a.style.constructor.name===l.constructor.name&&(a.style.color=n,a.style.alpha=s?1:0)}),this.geometry.buildDrawCalls()}highlightBound(){const{hoverColor:t}=this.config,{fillColor:r}=this.getRenderColor();this.changeColor({lineColor:t,isFill:this.isFill,fillColor:r}),this.line.color=t}setFillMode(){const{fillColor:t,lineColor:r}=this.getRenderColor();this.fill.color=t,this.line.color=r,this.changeColor({lineColor:r,fillColor:t,isFill:this.isFill})}setLineMode(){const{lineColor:t,fillColor:r}=this.getRenderColor();this.line.color=t,this.changeColor({lineColor:t,fillColor:r,isFill:this.isFill})}getRealBounds(t){this.finishPoly();const r=this.getRealPoints(),n=this.worldTransform,s=t??new _i;return r.forEach(o=>{for(let a=0;a<o.length;a++){const h=o[a];s.addPointMatrix(n,new M(h.x,h.y))}}),s}getOriginalPoints(){const{geometry:{graphicsData:t}}=this;let r=[];return t.forEach(n=>{const{points:s=[]}=n;r=r.concat(s.slice(0))}),r}getRealPoints(t){return UM(this,t)}toJSON(t){const{width:r,height:n,isFill:s}=this;return{...super.toJSON(t),width:r,height:n,isFill:s,lineColor:this.config.lineColor,fillColor:this.config.fillColor}}parseJSON(t){const{width:r=this.width,height:n=this.height,scale:s=this.scale,isFill:o=this.isFill,lineColor:a=this.config.lineColor,fillColor:h=this.config.fillColor}=t;super.parseJSON(t),Tn(t,["isFill","lineColor","fillColor","layerColor","layerTag"])&&(this.isFill=o,this.config.lineColor=a,this.config.fillColor=h,this.toggleFill(o)),this.originWidth=r/s.x,this.originHeight=n/s.y}setDefaultColor(){this.config.fillColor=this.fill.color,this.config.lineColor=this.line.color,this.isFill=!!this.fill.visible}isVaild(){return this.isValid&&this.geometry.graphicsData.length>0&&(this.width>0||this.height>0)}}const VM=100;class uA extends Ps{constructor(i){super(),i&&this.parseJSON(i),this.type=Qt.CIRCLE,this.isClosePath=!0}update(i,t){const{x:r,y:n}=this.position,{x:s,y:o}=i,a=s-r;let h=!1;t&&t.data.originalEvent.shiftKey&&(h=!0);const l=h?a:o-n;this.originWidth=Math.abs(a),this.originHeight=Math.abs(l),this.draw(new M(a/2,l/2))}draw(i=new M(0,0)){this.clear().lineStyle(nr),this.drawEllipse(i.x,i.y,this.originWidth/2,this.originHeight/2),super.draw()}transformUpdate(){const{geometry:{points:i},width:t,height:r}=this;if(r||t){const n=i.length/((Math.abs(t)+Math.abs(r))*2);n>0&&n<1&&this.smooth()}}toJSON(i){const t=super.toJSON(i),{scale:r}=t,{width:n,height:s}=this.getLocalBounds();return{...t,width:r.x*n,height:r.y*s}}parseJSON(i){const{width:t,height:r,scale:n}=i;!ic(t)&&!ic(r)&&!Cd(n)&&(this.originWidth=t/n.x,this.originHeight=r/n.y,this.draw(new M(this.originWidth/2,this.originHeight/2))),super.parseJSON(i),Tn(i,["height","width"])&&this.transformUpdate()}end(i,t){const{position:{x:r,y:n}}=this,{x:s,y:o}=i;s<r&&(this.position.x=s),o<n&&(this.position.y=o),this.smooth(),super.end(i,t)}smooth(i=VM){let{width:t,height:r}=this;this.clear(),t*=i,r*=i,this.originWidth=Math.abs(t),this.originHeight=Math.abs(r),this.scale.set(1/i),this.draw(new M(t/2,r/2))}embedCircle(i){var s,o,a,h,l,u;(o=(s=i.cx)==null?void 0:s.baseVal)==null||o.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX),(h=(a=i.cy)==null?void 0:a.baseVal)==null||h.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX),(u=(l=i.r)==null?void 0:l.baseVal)==null||u.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX);const t=i.cx.baseVal.valueInSpecifiedUnits,r=i.cy.baseVal.valueInSpecifiedUnits,n=i.r.baseVal.valueInSpecifiedUnits;this.originWidth=n*2,this.originHeight=n*2,this.position.x=t-n,this.position.y=r-n,this.draw(new M(n,n)),this.transform.updateLocalTransform()}}class Do extends Ps{constructor(t){super();x(this,"endPoint",new M(0,0));t&&(this.parseJSON(t),this.draw(),this.addLineHitArea(new M(0,0),this.endPoint)),this.type=Qt.LINE,this.isClosePath=!1}update(t,r){const{x:n,y:s}=this.position;let o=t.x-n,a=t.y-s;r&&r.data.originalEvent.shiftKey&&(Math.abs(o)>Math.abs(a)?a=0:o=0),this.endPoint=new M(o,a),this.draw()}draw(){const{x:t,y:r}=this.endPoint;this.clear().lineStyle(nr).moveTo(0,0).lineTo(t,r).endFill(),super.draw()}end(t,r){const{position:{x:n,y:s}}=this,{x:o,y:a}=t;let h=o-n,l=a-s;r&&r.data.originalEvent.shiftKey&&(Math.abs(h)>Math.abs(l)?l=0:h=0),this.endPoint=new M(h,l),this.draw(),this.toggleFill(this.isFill),this.addLineHitArea(new M(0,0),this.endPoint),this.done()}toJSON(t){const{endPoint:r}=this;return{...super.toJSON(t),endPoint:{x:r.x,y:r.y}}}parseJSON(t){const{endPoint:r=this.endPoint}=t;super.parseJSON(t),this.endPoint=new M(r.x,r.y)}embedLine(t){t.x1.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX),t.y1.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX),t.x2.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX),t.y2.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX);const r=t.x1.baseVal.valueInSpecifiedUnits,n=t.y1.baseVal.valueInSpecifiedUnits,s=t.x2.baseVal.valueInSpecifiedUnits,o=t.y2.baseVal.valueInSpecifiedUnits;this.x=r,this.y=n,this.endPoint=new M(s-r,o-n),this.draw(),this.addLineHitArea(new M(0,0),this.endPoint)}embedPolyline(t){const r=t.getAttribute("points").replace(/,/g," ").trim().split(/\s+/).map(h=>parseFloat(h)),[n,s,o,a]=r;this.x=n,this.y=s,this.endPoint=new M(o-n,a-s),this.draw(),this.addLineHitArea(new M(0,0),this.endPoint)}getLocalBounds(){const t=super.getLocalBounds(),{width:r,height:n}=t;return t.width=r||.001,t.height=n||.001,t}}const zM="modulepreload",WM=function(e,i){return new URL(e,i).href},N0={},df=function(i,t,r){if(!t||t.length===0)return i();const n=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=WM(s,r),s in N0)return;N0[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=n.length-1;u>=0;u--){const c=n[u];if(c.href===s&&(!o||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":zM,o||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),o)return new Promise((u,c)=>{l.addEventListener("load",u),l.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>i())};let Fr;function jM(){return Fr&&new Fr}function KM(e){try{e.delete()}catch{}}function Af(e){return Fr?e instanceof Fr:!1}async function $M(){var o,a;const e=(o=await df(()=>import("./canvaskit-77c53aca.js").then(h=>h.c),["./canvaskit-77c53aca.js","../assets/index-83a10b2e.js","./index-55948043.js","./xcs-vue-family-70642f71.js"],import.meta.url))==null?void 0:o.default,i=(a=await df(()=>import("./canvaskit-e7ced8e2.js"),[],import.meta.url))==null?void 0:a.default,t=await e({locateFile:()=>i}),r={width:1,miter_limit:4,cap:t.StrokeCap.Square,join:t.StrokeJoin.Miter,precision:1},n=t.Path;class s extends n{constructor(){try{super()}catch{const u=new n;return Object.setPrototypeOf(u,s.prototype),u}}style(l){if(l){if(l.fill&&(l.mode==="stroke"||l.mode==="none"))return this;const{sx:u=1,sy:c=1,viewportScale:f=1}=l,d=1+Math.max(Math.log10(f),-.3),p={width:l.width*d,cap:t.StrokeCap.Square};this.transform(u,0,0,0,c,0,0,0,1),l.fill&&(l.mode==="fill"||l.mode==="all")?this.unionStroke(p):!l.fill&&(l.mode==="stroke"||l.mode==="all")?this.stroke(p):this.stroke(r),this.transform(1/u,0,0,0,1/c,0,0,0,1)}return this}stroke(l){return l&&l.visible!==!1&&super.stroke(l),this}unionStroke(l){const u=this.copy().stroke(l);return this.op(u,t.PathOp.Union),u.delete(),this}addFromSVGPathD(l){const u=t.Path.MakeFromSVGString(l);return this.addPath(u),u.delete(),this}}return s}let Nu;async function JM(){return Fr||(Nu||(Nu=$M().then(e=>(Fr=e,Fr)).catch(console.warn)),Nu)}var Wa,qM=new Uint8Array(16);function ZM(){if(!Wa&&(Wa=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Wa))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Wa(qM)}const tQ=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function eQ(e){return typeof e=="string"&&tQ.test(e)}var Pe=[];for(var Ou=0;Ou<256;++Ou)Pe.push((Ou+256).toString(16).substr(1));function iQ(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Pe[e[i+0]]+Pe[e[i+1]]+Pe[e[i+2]]+Pe[e[i+3]]+"-"+Pe[e[i+4]]+Pe[e[i+5]]+"-"+Pe[e[i+6]]+Pe[e[i+7]]+"-"+Pe[e[i+8]]+Pe[e[i+9]]+"-"+Pe[e[i+10]]+Pe[e[i+11]]+Pe[e[i+12]]+Pe[e[i+13]]+Pe[e[i+14]]+Pe[e[i+15]]).toLowerCase();if(!eQ(t))throw TypeError("Stringified UUID is invalid");return t}function ua(e,i,t){e=e||{};var r=e.random||(e.rng||ZM)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,i){t=t||0;for(var n=0;n<16;++n)i[t+n]=r[n];return i}return iQ(r)}function JC(e,i,t,r=e.pivot){const n=i.a,s=i.b,o=i.c,a=i.d,h=-Math.atan2(-o,a),l=Math.atan2(s,n);return t=t??l,e.pivot.set(r.x,r.y),e.rotation=t,e.skew.x=t+h,e.skew.y=-t+l,e.scale.x=Math.sqrt(n*n+s*s),e.scale.y=Math.sqrt(o*o+a*a),e.position.x=i.tx+(r.x*i.a+r.y*i.c),e.position.y=i.ty+(r.x*i.b+r.y*i.d),e}function qC(e,i,t){const r=new kt,n=new kt;if(!t){const a=e.parent?e.parent:e.enableTempParent();e.updateTransform(),e.disableTempParent(a)}const s=e.worldTransform,o=e.parent?r.copyFrom(e.parent.worldTransform):kt.IDENTITY;n.copyFrom(s),n.prepend(i),n.prepend(o.invert()),JC(e.transform,n)}function pf(e,i){const t=i.clone().invert();return e.prepend(t).clone()}function rQ(e,i){const t=e.toLocal(new M(i.minX,i.minY)),r=e.toLocal(new M(i.maxX,i.maxY));return i.minX=t.x,i.minY=t.y,i.maxX=r.x,i.maxY=r.y,i}function nQ(e,i){const t=e.x-i.x,r=e.y-i.y,n=i.x-t,s=i.y-r;return new M(n,s)}function sQ(e,i,t){const r=new M,n=new M,s=20;if(e===t)return r.x=i.x,r.y=i.y-s,n.x=i.x,n.y=i.y+s,{cp1:r,cp2:n};const o=(t.y-e.y)/(t.x-e.x),a=t.x-e.x,h=t.y-e.y,l=Math.sqrt(a*a+h*h),u=4;return t.x>=e.x?(r.x=i.x-l/(u*Math.sqrt(o*o+1)),r.y=i.y-l*o/(u*Math.sqrt(o*o+1)),n.x=i.x+l/(u*Math.sqrt(o*o+1)),n.y=i.y+l*o/(u*Math.sqrt(o*o+1))):(r.x=i.x+l/(u*Math.sqrt(o*o+1)),r.y=i.y+l*o/(u*Math.sqrt(o*o+1)),n.x=i.x-l/(u*Math.sqrt(o*o+1)),n.y=i.y-l*o/(u*Math.sqrt(o*o+1))),{cp1:r,cp2:n}}function gf(e,i,t={x:0,y:0}){const r=e.x-t.x,n=e.y-t.y,s=r*Math.cos(i)-n*Math.sin(i),o=n*Math.cos(i)+r*Math.sin(i);return{x:s+t.x,y:o+t.y}}function oQ(e,i,t={x:0,y:0}){const{x:r,y:n,width:s,height:o}=e,a={x:r+s/2,y:n+o/2},h=gf(a,i,t),l={x:-s/2,y:-o/2},u=gf(l,i);return{x:h.x+u.x,y:h.y+u.y}}function Ql(e){const i=t=>{if(t.parent)if(t.parent.children.length<=1){const r=t.parent;t.destroy(!0),i(r)}else t.destroy(!0);else t.destroy(!0)};i(e)}function aQ(e){document.getElementById("preview")||document.body.insertAdjacentHTML("afterbegin",'<div id="preview" style="position: absolute; top: 0; z-index: 2"></div>'),document.getElementById("preview").appendChild(e)}function hQ(e,i,t){const{x:r,y:n}=e,{x:s,y:o}=i,a=s-r,h=o-n,l=5;let u=[];return Math.abs(a)<l||Math.abs(h)<l?u=[t.sort((f,d)=>d.displayOrder-f.displayOrder)[0]]:u=t,u}function Fo(e,i,t){const r=kt.IDENTITY,{x:n,y:s}=e.toJSON(t),o=t.toGlobal(i),a=t.toGlobal(new M(n,s));r.translate(o.x-a.x,o.y-a.y),qC(e,r)}function ZC(e,i,t){const{matrixByViewport:r,...n}=i;if(e.parseJSON(n),r&&e.parent){const s=t.worldTransform.clone(),o=e.parent.worldTransform.clone(),a=pf(o,s),h=pf(r.clone(),a.clone());e.transform.setFromMatrix(h)}}function O0(e){const i=document.createElement("canvas");return i.width=e.width,i.height=e.height,i.getContext("2d").putImageData(e,0,0),i}function lQ(e,i){const t=e.isClosePath;let r="";return er(e.getRealPath)?r=e.getRealPath(i):r=kM(e.getRealPoints(i),1,!1,t),r}function vf(e){if(e.getContext)return e.toDataURL("image/png",1);{const i=document.createElement("canvas");return i.width=e.naturalWidth,i.height=e.naturalHeight,i.getContext("2d").drawImage(e,0,0),i.toDataURL("image/png",1)}}function uQ(e,i,t=1,r,n,s){const o=i.parent,a=new $t,h=new $t;h.scale.set(t,t),a.addChild(h),h.addChild(i);const l=a.getLocalBounds();let u=document.createElement("canvas");if(l.width<.5||l.height<.5)u.width=1,u.height=1;else{r=r??0;const{x:d,y:A,width:p,height:g}=a.getLocalBounds(),y=new Tt(d-r,A-r,p+r*2,g+r*2),I=(E,w,T)=>{const _=e.renderer.generateTexture(E,{region:w}),F=e.canvas(_,T);return _.destroy(!0),F};if(s=s??r_(),y.width>s||y.height>s){u.width=y.width,u.height=y.height;const E=u.getContext("2d");mQ(y,s,s).forEach(T=>{const _=I(a,T,n);E.drawImage(_,T.x-y.x,T.y-y.y)})}else u=I(a,y,n)}o&&o.addChild(i),window.canvas_debug.previewImage&&aQ(u);const c=u.getContext("2d");return c==null?void 0:c.getImageData(0,0,u.width,u.height)}function D0(e){const{texture:{baseTexture:{resource:i}}}=e,t=i;if(!t.source)return null;const r=t.source;if(r.getContext){const o=r.getContext("2d");return{canvas:r,ctx:o}}const n=document.createElement("canvas");n.width=r.naturalWidth||0,n.height=r.naturalHeight||0;const s=n.getContext("2d");return s?(s.drawImage(r,0,0),{canvas:n,ctx:s}):null}function cQ(e,i,t){const{texture:{baseTexture:{resource:r}}}=e,n=r;if(!n.source)return null;const s=n.source,o=document.createElement("canvas");o.width=i,o.height=t;const a=o.getContext("2d");return a?(a.drawImage(s,0,0,i,t),{canvas:o,ctx:a}):null}function Rh(e,i){const t=ri.calculateGroupOrientedBounds([e],0),r=new _i,n=i.toLocal(t.topLeft),s=i.toLocal(t.bottomRight);return r.minX=n.x,r.minY=n.y,r.maxX=s.x,r.maxY=s.y,r}function fQ(e,i){const t=[],r=n=>{n.interactive?(i&&i(n),t.push(n)):n.children&&n.children.length>0&&n.children.forEach(s=>{r(s)})};return r(e),t}function t_(e,i,t){const r=[],{enableFill:n=!0}=t;let{layerColor:s,layerTag:o}=t;const a=h=>{h.children&&h.children.length>0?h.children.forEach(l=>{a(l)}):(h.interactive=!0,s=h.layerColor??s,o=h.layerTag??o,h.parseJSON({...t,isFill:n&&h.isFill,layerColor:s,layerTag:o}),h.parentGroup=i,h.isClosePath=cA(h),r.push(h))};return a(e),r}function Jn(e){if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const i=[];return e.forEach(t=>{i.push(t)}),i.map(t=>Jn(t))}if(e instanceof Object){const i={...e};for(const t in e)e.hasOwnProperty(t)&&(i[t]=Jn(e[t]));return i}return e}function ca(e,i,t,r){const n=Math.min(t/e,r/i);return{width:Math.min(e*n,e),height:Math.min(i*n,i)}}function F0(e){const{srcWidth:i,srcHeight:t,scaleNum:r,maxWidth:n,maxHeight:s}=e,{width:o,height:a}=ca(i*r,t*r,n,s);return Math.min(o/i,a/t)}function cA(e){const{BITMAP:i,LINE:t,PEN:r,TEXT:n,PATH:s}=Qt,o=[i,t],a=[s],h=[n],l=.05;let u=e.isClosePath;const c=e.type;if(o.includes(c))u=!1;else if(h.includes(c))u=!0;else if(c===r)e.isClosePath||(u=!1);else if(a.includes(c)){const f=e.getRealPoints();u=!0,f.some(A=>A.length===0?!1:A.length<=2?!0:Math.abs(A[0].x-A[A.length-1].x)>l||Math.abs(A[0].y-A[A.length-1].y)>l)&&(u=!1)}return u}function dQ(e){let i=!0;return e.forEach(({name:t,value:r})=>{i&&t==="sharpness"&&(i=Number(r)===50),i&&t==="grayValue"&&(i=Number(r[0])===0&&Number(r[1])===255),i&&t==="colorInverted"&&(i=!r)}),i}function ah(e){const i=[],t=e.filter(n=>{const s=n.isVaild&&!n.isVaild();return s||i.push(n),s}),r=[];return t.forEach(n=>{r.push({id:n.id}),n.destroy(),n=null}),{validDisplays:i,invalidData:r}}function e_(){return"g-"+ua()}function i_(e){const i=e_();return e.forEach(t=>{t.groupTag=i}),e}function yf(e){const i=[],t={};return e.forEach(r=>{r.groupTag?(t[r.groupTag]||(t[r.groupTag]=[]),t[r.groupTag].push(r)):i.push(r)}),Object.values(t).forEach(r=>{r.length>1?i.push(r):i.push(r[0])}),i}function AQ(e){yf(e).forEach(t=>{t=ce(t)?t:[t],i_(t)})}function pQ(e,i=e.hitArea,t=e.worldTransform,r){if(r=r||[],i instanceof Tt)r.push(new M(i.x,i.y)),r.push(new M(i.x+i.width,i.y)),r.push(new M(i.x+i.width,i.y+i.height)),r.push(new M(i.x,i.y+i.height));else if(i instanceof Lr)for(let n=0;n<i.points.length;n+=2)r.push(new M(i.points[n],i.points[n+1]));for(let n=0;n<r.length;n++)t.apply(r[n],r[n]);return r}function gQ(e,i,t,r){e.x>i.x&&([e,i]=[i,e]),t.x>r.x&&([t,r]=[r,t]);const n=(u,c=1e-12)=>{const f=Math.abs(u);return f>=0&&f<=c?0:u},s=n(i.y-e.y)/n(i.x-e.x),o=n(r.y-t.y)/n(r.x-t.x),a=e.y-s*e.x,h=t.y-o*t.x;if(Math.abs(s)===1/0){const u=o*e.x+h,c=Math.min(e.y,i.y),f=Math.max(e.y,i.y);if(u>=c&&u<=f&&t.x<=e.x&&r.x>=e.x)return!0}if(Math.abs(o)===1/0){const u=s*t.x+a,c=Math.min(t.y,r.y),f=Math.max(t.y,r.y);if(u>=c&&u<=f&&e.x<=t.x&&i.x>=t.x)return!0}const l=(h-a)/(s-o);return l>=e.x&&l<=i.x&&l>=t.x&&l<=r.x}function vQ(e,i){for(let t=0;t<e.length;t++)for(let r=0;r<i.length;r++)if(gQ(e[t][0],e[t][1],i[r][0],i[r][1]))return!0;return!1}function Du(e,i){const{include:t=[],exclude:r=[]}=i||{};let n=e;return t.length>0&&(n=n.filter(s=>t.includes(s.type)?s:!1)),r.length>0&&(n=n.filter(s=>r.includes(s.type)?!1:s)),n}function yQ(e){return e?e.trim().startsWith("data:image/"):!1}let Fu;function r_(){if(!Fu){const e=document.createElement("canvas"),i=e.getContext("webgl2")??e.getContext("webgl");if(!i)return;Fu=i.getParameter(i.MAX_TEXTURE_SIZE),i.getExtension("WEBGL_lose_context").loseContext()}return Fu}function mQ(e,i,t){const{x:r=0,y:n=0,width:s,height:o}=e,a=Math.ceil(s/i),h=Math.ceil(o/t),l=[];let u,c=0;for(let f=0;f<h;f++){u=0;const d=Math.min(t,o-c);for(let A=0;A<a;A++){const p=Math.min(i,s-u),g=new Tt(u+r,c+n,p,d);l.push(g),u+=p}c+=d}return l}function IQ(e){let i,t;return e instanceof HTMLImageElement?(i=e.naturalWidth,t=e.naturalHeight):(i=e.width,t=e.height),{width:i,height:t}}function CQ(e){const{width:i,height:t}=IQ(e),r=r_();if(i>r||t>r){const{width:n,height:s}=ca(i,t,r,r),o=document.createElement("canvas");return o.width=Math.floor(n),o.height=Math.floor(s),o.getContext("2d").drawImage(e,0,0,o.width,o.height),o}else return e}class Ul extends Ps{constructor(t,r={...Ml}){super(r);x(this,"points",[]);x(this,"type",Qt.POLYGON);t&&(this.type=Qt.POLYGON,this.parseJSON(t),this.points=t.points.map(n=>Number(n)),this.draw())}toJSON(t){const r=super.toJSON(t),n=this.getOriginalPoints();return{...r,points:n}}draw(){if(this.points.length>0){const t=new Lr(this.points);t.closeStroke=this.isClosePath,this.clear().lineStyle(nr).drawPolygon(t)}super.draw()}update(t,r){throw new Error("Method not implemented.")}}class _Q extends $t{done(){throw new Error("Method not implemented.")}clear(){this.children.forEach(i=>{i.clear()})}}var Ni={},xQ={get exports(){return Ni},set exports(e){Ni=e}};(function(e){var i;function t(v,m){return v.b===m.b&&v.a===m.a}function r(v,m){return v.b<m.b||v.b===m.b&&v.a<=m.a}function n(v,m,C){var b=m.b-v.b,P=C.b-m.b;return 0<b+P?b<P?m.a-v.a+b/(b+P)*(v.a-C.a):m.a-C.a+P/(b+P)*(C.a-v.a):0}function s(v,m,C){var b=m.b-v.b,P=C.b-m.b;return 0<b+P?(m.a-C.a)*b+(m.a-v.a)*P:0}function o(v,m){return v.a<m.a||v.a===m.a&&v.b<=m.b}function a(v,m,C){var b=m.a-v.a,P=C.a-m.a;return 0<b+P?b<P?m.b-v.b+b/(b+P)*(v.b-C.b):m.b-C.b+P/(b+P)*(C.b-v.b):0}function h(v,m,C){var b=m.a-v.a,P=C.a-m.a;return 0<b+P?(m.b-C.b)*b+(m.b-v.b)*P:0}function l(v){return r(v.b.a,v.a)}function u(v){return r(v.a,v.b.a)}function c(v,m,C,b){return v=0>v?0:v,C=0>C?0:C,v<=C?C===0?(m+b)/2:m+v/(v+C)*(b-m):b+C/(v+C)*(m-b)}function f(v){var m=y(v.b);return E(m,v.c),E(m.b,v.c),w(m,v.a),m}function d(v,m){var C=!1,b=!1;v!==m&&(m.a!==v.a&&(b=!0,_(m.a,v.a)),m.d!==v.d&&(C=!0,F(m.d,v.d)),I(m,v),b||(E(m,v.a),v.a.c=v),C||(w(m,v.d),v.d.a=v))}function A(v){var m=v.b,C=!1;v.d!==v.b.d&&(C=!0,F(v.d,v.b.d)),v.c===v?_(v.a,null):(v.b.d.a=G(v),v.a.c=v.c,I(v,G(v)),C||w(v,v.d)),m.c===m?(_(m.a,null),F(m.d,null)):(v.d.a=G(m),m.a.c=m.c,I(m,G(m))),T(v)}function p(v){var m=y(v),C=m.b;return I(m,v.e),m.a=v.b.a,E(C,m.a),m.d=C.d=v.d,m=m.b,I(v.b,G(v.b)),I(v.b,m),v.b.a=m.a,m.b.a.c=m.b,m.b.d=v.b.d,m.f=v.f,m.b.f=v.b.f,m}function g(v,m){var C=!1,b=y(v),P=b.b;return m.d!==v.d&&(C=!0,F(m.d,v.d)),I(b,v.e),I(P,m),b.a=v.b.a,P.a=m.a,b.d=P.d=v.d,v.d.a=P,C||w(b,v.d),b}function y(v){var m=new L,C=new L,b=v.b.h;return C.h=b,b.b.h=m,m.h=v,v.b.h=C,m.b=C,m.c=m,m.e=C,C.b=m,C.c=C,C.e=m}function I(v,m){var C=v.c,b=m.c;C.b.e=m,b.b.e=v,v.c=b,m.c=C}function E(v,m){var C=m.f,b=new vt(m,C);C.e=b,m.f=b,C=b.c=v;do C.a=b,C=C.c;while(C!==v)}function w(v,m){var C=m.d,b=new H(m,C);C.b=b,m.d=b,b.a=v,b.c=m.c,C=v;do C.d=b,C=C.e;while(C!==v)}function T(v){var m=v.h;v=v.b.h,m.b.h=v,v.b.h=m}function _(v,m){var C=v.c,b=C;do b.a=m,b=b.c;while(b!==C);C=v.f,b=v.e,b.f=C,C.e=b}function F(v,m){var C=v.a,b=C;do b.d=m,b=b.e;while(b!==C);C=v.d,b=v.b,b.d=C,C.b=b}function R(v){var m=0;return Math.abs(v[1])>Math.abs(v[0])&&(m=1),Math.abs(v[2])>Math.abs(v[m])&&(m=2),m}var S=4*1e150;function D(v,m){v.f+=m.f,v.b.f+=m.b.f}function $(v,m,C){return v=v.a,m=m.a,C=C.a,m.b.a===v?C.b.a===v?r(m.a,C.a)?0>=s(C.b.a,m.a,C.a):0<=s(m.b.a,C.a,m.a):0>=s(C.b.a,v,C.a):C.b.a===v?0<=s(m.b.a,v,m.a):(m=n(m.b.a,v,m.a),v=n(C.b.a,v,C.a),m>=v)}function z(v){v.a.i=null;var m=v.e;m.a.c=m.c,m.c.a=m.a,v.e=null}function q(v,m){A(v.a),v.c=!1,v.a=m,m.i=v}function _t(v){var m=v.a.a;do v=ht(v);while(v.a.a===m);return v.c&&(m=g(j(v).a.b,v.a.e),q(v,m),v=ht(v)),v}function V(v,m,C){var b=new rt;return b.a=C,b.e=Xt(v.f,m.e,b),C.i=b}function X(v,m){switch(v.s){case 100130:return(m&1)!==0;case 100131:return m!==0;case 100132:return 0<m;case 100133:return 0>m;case 100134:return 2<=m||-2>=m}return!1}function et(v){var m=v.a,C=m.d;C.c=v.d,C.a=m,z(v)}function At(v,m,C){for(v=m,m=m.a;v!==C;){v.c=!1;var b=j(v),P=b.a;if(P.a!==m.a){if(!b.c){et(v);break}P=g(m.c.b,P.b),q(b,P)}m.c!==P&&(d(G(P),P),d(m,P)),et(v),m=b.a,v=b}return m}function Z(v,m,C,b,P,Q){var k=!0;do V(v,m,C.b),C=C.c;while(C!==b);for(P===null&&(P=j(m).a.b.c);b=j(m),C=b.a.b,C.a===P.a;)C.c!==P&&(d(G(C),C),d(G(P),C)),b.f=m.f-C.f,b.d=X(v,b.f),m.b=!0,!k&&ot(v,m)&&(D(C,P),z(m),A(P)),k=!1,m=b,P=C;m.b=!0,Q&&Ct(v,m)}function N(v,m,C,b,P){var Q=[m.g[0],m.g[1],m.g[2]];m.d=null,m.d=v.o&&v.o(Q,C,b,v.c)||null,m.d===null&&(P?v.n||(U(v,100156),v.n=!0):m.d=C[0])}function W(v,m,C){var b=[null,null,null,null];b[0]=m.a.d,b[1]=C.a.d,N(v,m.a,b,[.5,.5,0,0],!1),d(m,C)}function it(v,m,C,b,P){var Q=Math.abs(m.b-v.b)+Math.abs(m.a-v.a),k=Math.abs(C.b-v.b)+Math.abs(C.a-v.a),st=P+1;b[P]=.5*k/(Q+k),b[st]=.5*Q/(Q+k),v.g[0]+=b[P]*m.g[0]+b[st]*C.g[0],v.g[1]+=b[P]*m.g[1]+b[st]*C.g[1],v.g[2]+=b[P]*m.g[2]+b[st]*C.g[2]}function ot(v,m){var C=j(m),b=m.a,P=C.a;if(r(b.a,P.a)){if(0<s(P.b.a,b.a,P.a))return!1;if(!t(b.a,P.a))p(P.b),d(b,G(P)),m.b=C.b=!0;else if(b.a!==P.a){var C=v.e,Q=b.a.h;if(0<=Q){var C=C.b,k=C.d,st=C.e,mt=C.c,wt=mt[Q];k[wt]=k[C.a],mt[k[wt]]=wt,wt<=--C.a&&(1>=wt||r(st[k[wt>>1]],st[k[wt]])?J(C,wt):tt(C,wt)),st[Q]=null,mt[Q]=C.b,C.b=Q}else for(C.c[-(Q+1)]=null;0<C.a&&C.c[C.d[C.a-1]]===null;)--C.a;W(v,G(P),b)}}else{if(0>s(b.b.a,P.a,b.a))return!1;ht(m).b=m.b=!0,p(b.b),d(G(P),b)}return!0}function dt(v,m){var C=j(m),b=m.a,P=C.a,Q=b.a,k=P.a,st=b.b.a,mt=P.b.a,wt=new vt;if(s(st,v.a,Q),s(mt,v.a,k),Q===k||Math.min(Q.a,st.a)>Math.max(k.a,mt.a))return!1;if(r(Q,k)){if(0<s(mt,Q,k))return!1}else if(0>s(st,k,Q))return!1;var Vt=st,Ut=Q,St=mt,bt=k,ct,Rt;if(r(Vt,Ut)||(ct=Vt,Vt=Ut,Ut=ct),r(St,bt)||(ct=St,St=bt,bt=ct),r(Vt,St)||(ct=Vt,Vt=St,St=ct,ct=Ut,Ut=bt,bt=ct),r(St,Ut)?r(Ut,bt)?(ct=n(Vt,St,Ut),Rt=n(St,Ut,bt),0>ct+Rt&&(ct=-ct,Rt=-Rt),wt.b=c(ct,St.b,Rt,Ut.b)):(ct=s(Vt,St,Ut),Rt=-s(Vt,bt,Ut),0>ct+Rt&&(ct=-ct,Rt=-Rt),wt.b=c(ct,St.b,Rt,bt.b)):wt.b=(St.b+Ut.b)/2,o(Vt,Ut)||(ct=Vt,Vt=Ut,Ut=ct),o(St,bt)||(ct=St,St=bt,bt=ct),o(Vt,St)||(ct=Vt,Vt=St,St=ct,ct=Ut,Ut=bt,bt=ct),o(St,Ut)?o(Ut,bt)?(ct=a(Vt,St,Ut),Rt=a(St,Ut,bt),0>ct+Rt&&(ct=-ct,Rt=-Rt),wt.a=c(ct,St.a,Rt,Ut.a)):(ct=h(Vt,St,Ut),Rt=-h(Vt,bt,Ut),0>ct+Rt&&(ct=-ct,Rt=-Rt),wt.a=c(ct,St.a,Rt,bt.a)):wt.a=(St.a+Ut.a)/2,r(wt,v.a)&&(wt.b=v.a.b,wt.a=v.a.a),Vt=r(Q,k)?Q:k,r(Vt,wt)&&(wt.b=Vt.b,wt.a=Vt.a),t(wt,Q)||t(wt,k))return ot(v,m),!1;if(!t(st,v.a)&&0<=s(st,v.a,wt)||!t(mt,v.a)&&0>=s(mt,v.a,wt)){if(mt===v.a)return p(b.b),d(P.b,b),m=_t(m),b=j(m).a,At(v,j(m),C),Z(v,m,G(b),b,b,!0),!0;if(st===v.a){p(P.b),d(b.e,G(P)),Q=C=m,k=Q.a.b.a;do Q=ht(Q);while(Q.a.b.a===k);return m=Q,Q=j(m).a.b.c,C.a=G(P),P=At(v,C,null),Z(v,m,P.c,b.b.c,Q,!0),!0}return 0<=s(st,v.a,wt)&&(ht(m).b=m.b=!0,p(b.b),b.a.b=v.a.b,b.a.a=v.a.a),0>=s(mt,v.a,wt)&&(m.b=C.b=!0,p(P.b),P.a.b=v.a.b,P.a.a=v.a.a),!1}return p(b.b),p(P.b),d(G(P),b),b.a.b=wt.b,b.a.a=wt.a,b.a.h=xt(v.e,b.a),b=b.a,P=[0,0,0,0],wt=[Q.d,st.d,k.d,mt.d],b.g[0]=b.g[1]=b.g[2]=0,it(b,Q,st,P,0),it(b,k,mt,P,2),N(v,b,wt,P,!0),ht(m).b=m.b=C.b=!0,!1}function Ct(v,m){for(var C=j(m);;){for(;C.b;)m=C,C=j(C);if(!m.b&&(C=m,m=ht(m),m===null||!m.b))break;m.b=!1;var b=m.a,P=C.a,Q;if(Q=b.b.a!==P.b.a)t:{Q=m;var k=j(Q),st=Q.a,mt=k.a,wt=void 0;if(r(st.b.a,mt.b.a)){if(0>s(st.b.a,mt.b.a,st.a)){Q=!1;break t}ht(Q).b=Q.b=!0,wt=p(st),d(mt.b,wt),wt.d.c=Q.d}else{if(0<s(mt.b.a,st.b.a,mt.a)){Q=!1;break t}Q.b=k.b=!0,wt=p(mt),d(st.e,mt.b),wt.b.d.c=Q.d}Q=!0}if(Q&&(C.c?(z(C),A(P),C=j(m),P=C.a):m.c&&(z(m),A(b),m=ht(C),b=m.a)),b.a!==P.a){if(b.b.a===P.b.a||m.c||C.c||b.b.a!==v.a&&P.b.a!==v.a)ot(v,m);else if(dt(v,m))break}b.a===P.a&&b.b.a===P.b.a&&(D(P,b),z(m),A(b),m=ht(C))}}function gt(v,m){v.a=m;for(var C=m.c;C.i===null;)if(C=C.c,C===m.c){var C=v,b=m,k=new rt;k.a=b.c.b;var P=C.f,st=P.a;do st=st.a;while(st.b!==null&&!P.c(P.b,k,st.b));var P=st.b,Q=j(P),k=P.a,st=Q.a;if(s(k.b.a,b,k.a)===0)k=P.a,t(k.a,b)||t(k.b.a,b)||(p(k.b),P.c&&(A(k.c),P.c=!1),d(b.c,k),gt(C,b));else{var mt=r(st.b.a,k.b.a)?P:Q,Q=void 0;P.d||mt.c?(mt===P?Q=g(b.c.b,k.e):Q=g(st.b.c.b,b.c).b,mt.c?q(mt,Q):(k=C,P=V(C,P,Q),P.f=ht(P).f+P.a.f,P.d=X(k,P.f)),gt(C,b)):Z(C,P,b.c,b.c,null,!0)}return}if(C=_t(C.i),k=j(C),P=k.a,k=At(v,k,null),k.c===P){var P=k,k=P.c,st=j(C),Q=C.a,mt=st.a,wt=!1;Q.b.a!==mt.b.a&&dt(v,C),t(Q.a,v.a)&&(d(G(k),Q),C=_t(C),k=j(C).a,At(v,j(C),st),wt=!0),t(mt.a,v.a)&&(d(P,G(mt)),P=At(v,st,null),wt=!0),wt?Z(v,C,P.c,k,k,!0):(r(mt.a,Q.a)?b=G(mt):b=Q,b=g(P.c.b,b),Z(v,C,b,b.c,b.c,!1),b.b.i.c=!0,Ct(v,C))}else Z(v,C,k.c,P,P,!0)}function Pt(v,m){var C=new rt,b=f(v.b);b.a.b=S,b.a.a=m,b.b.a.b=-S,b.b.a.a=m,v.a=b.b.a,C.a=b,C.f=0,C.d=!1,C.c=!1,C.h=!0,C.b=!1,b=v.f,b=Xt(b,b.a,C),C.e=b}function jt(v){this.a=new zt,this.b=v,this.c=$}function Xt(v,m,C){do m=m.c;while(m.b!==null&&!v.c(v.b,m.b,C));return v=new zt(C,m.a,m),m.a.c=v,m.a=v}function zt(v,m,C){this.b=v||null,this.a=m||this,this.c=C||this}function pt(){this.d=Lt,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}var Lt=0;i=pt.prototype,i.x=function(){Et(this,Lt)},i.B=function(v,m){switch(v){case 100142:return;case 100140:switch(m){case 100130:case 100131:case 100132:case 100133:case 100134:this.s=m;return}break;case 100141:this.m=!!m;return;default:U(this,100900);return}U(this,100901)},i.y=function(v){switch(v){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:U(this,100900)}return!1},i.A=function(v,m,C){this.j[0]=v,this.j[1]=m,this.j[2]=C},i.z=function(v,m){var C=m||null;switch(v){case 100100:case 100106:this.h=C;break;case 100104:case 100110:this.l=C;break;case 100101:case 100107:this.k=C;break;case 100102:case 100108:this.i=C;break;case 100103:case 100109:this.p=C;break;case 100105:case 100111:this.o=C;break;case 100112:this.r=C;break;default:U(this,100900)}},i.C=function(v,m){var C=!1,b=[0,0,0];Et(this,2);for(var P=0;3>P;++P){var Q=v[P];-1e150>Q&&(Q=-1e150,C=!0),1e150<Q&&(Q=1e150,C=!0),b[P]=Q}C&&U(this,100155),C=this.q,C===null?(C=f(this.b),d(C,C.b)):(p(C),C=C.e),C.a.d=m,C.a.g[0]=b[0],C.a.g[1]=b[1],C.a.g[2]=b[2],C.f=1,C.b.f=-1,this.q=C},i.u=function(v){Et(this,Lt),this.d=1,this.b=new K,this.c=v},i.t=function(){Et(this,1),this.d=2,this.q=null},i.v=function(){Et(this,2),this.d=1},i.w=function(){Et(this,1),this.d=Lt;var v=this.j[0],m=this.j[1],C=this.j[2],b=!1,P=[v,m,C];if(v===0&&m===0&&C===0){for(var m=[-2*1e150,-2*1e150,-2*1e150],Q=[2*1e150,2*1e150,2*1e150],C=[],k=[],b=this.b.c,v=b.e;v!==b;v=v.e)for(var st=0;3>st;++st){var mt=v.g[st];mt<Q[st]&&(Q[st]=mt,k[st]=v),mt>m[st]&&(m[st]=mt,C[st]=v)}if(v=0,m[1]-Q[1]>m[0]-Q[0]&&(v=1),m[2]-Q[2]>m[v]-Q[v]&&(v=2),Q[v]>=m[v])P[0]=0,P[1]=0,P[2]=1;else{for(m=0,Q=k[v],C=C[v],k=[0,0,0],Q=[Q.g[0]-C.g[0],Q.g[1]-C.g[1],Q.g[2]-C.g[2]],st=[0,0,0],v=b.e;v!==b;v=v.e)st[0]=v.g[0]-C.g[0],st[1]=v.g[1]-C.g[1],st[2]=v.g[2]-C.g[2],k[0]=Q[1]*st[2]-Q[2]*st[1],k[1]=Q[2]*st[0]-Q[0]*st[2],k[2]=Q[0]*st[1]-Q[1]*st[0],mt=k[0]*k[0]+k[1]*k[1]+k[2]*k[2],mt>m&&(m=mt,P[0]=k[0],P[1]=k[1],P[2]=k[2]);0>=m&&(P[0]=P[1]=P[2]=0,P[R(Q)]=1)}b=!0}for(k=R(P),v=this.b.c,m=(k+1)%3,C=(k+2)%3,k=0<P[k]?1:-1,P=v.e;P!==v;P=P.e)P.b=P.g[m],P.a=k*P.g[C];if(b){for(P=0,b=this.b.a,v=b.b;v!==b;v=v.b)if(m=v.a,!(0>=m.f))do P+=(m.a.b-m.b.a.b)*(m.a.a+m.b.a.a),m=m.e;while(m!==v.a);if(0>P)for(P=this.b.c,b=P.e;b!==P;b=b.e)b.a=-b.a}for(this.n=!1,P=this.b.b,v=P.h;v!==P;v=b)b=v.h,m=v.e,t(v.a,v.b.a)&&v.e.e!==v&&(W(this,m,v),A(v),v=m,m=v.e),m.e===v&&(m!==v&&((m===b||m===b.b)&&(b=b.h),A(m)),(v===b||v===b.b)&&(b=b.h),A(v));for(this.e=P=new yt,b=this.b.c,v=b.e;v!==b;v=v.e)v.h=xt(P,v);for(Ft(P),this.f=new jt(this),Pt(this,-S),Pt(this,S);(P=Mt(this.e))!==null;){for(;;){t:if(v=this.e,v.a===0)b=O(v.b);else if(b=v.c[v.d[v.a-1]],v.b.a!==0&&(v=O(v.b),r(v,b))){b=v;break t}if(b===null||!t(b,P))break;b=Mt(this.e),W(this,P.c,b.c)}gt(this,P)}for(this.a=this.f.a.a.b.a.a,P=0;(b=this.f.a.a.b)!==null;)b.h||++P,z(b);for(this.f=null,P=this.e,P.b=null,P.d=null,this.e=P.c=null,P=this.b,v=P.a.b;v!==P.a;v=b)b=v.b,v=v.a,v.e.e===v&&(D(v.c,v),A(v));if(!this.n){if(P=this.b,this.m)for(v=P.b.h;v!==P.b;v=b)b=v.h,v.b.d.c!==v.d.c?v.f=v.d.c?1:-1:A(v);else for(v=P.a.b;v!==P.a;v=b)if(b=v.b,v.c){for(v=v.a;r(v.b.a,v.a);v=v.c.b);for(;r(v.a,v.b.a);v=v.e);for(m=v.c.b,C=void 0;v.e!==m;)if(r(v.b.a,m.a)){for(;m.e!==v&&(l(m.e)||0>=s(m.a,m.b.a,m.e.b.a));)C=g(m.e,m),m=C.b;m=m.c.b}else{for(;m.e!==v&&(u(v.c.b)||0<=s(v.b.a,v.a,v.c.b.a));)C=g(v,v.c.b),v=C.b;v=v.e}for(;m.e.e!==v;)C=g(m.e,m),m=C.b}if(this.h||this.i||this.k||this.l)if(this.m){for(P=this.b,b=P.a.b;b!==P.a;b=b.b)if(b.c){this.h&&this.h(2,this.c),v=b.a;do this.k&&this.k(v.a.d,this.c),v=v.e;while(v!==b.a);this.i&&this.i(this.c)}}else{for(P=this.b,b=!!this.l,v=!1,m=-1,C=P.a.d;C!==P.a;C=C.d)if(C.c){v||(this.h&&this.h(4,this.c),v=!0),k=C.a;do b&&(Q=k.b.d.c?0:1,m!==Q&&(m=Q,this.l&&this.l(!!m,this.c))),this.k&&this.k(k.a.d,this.c),k=k.e;while(k!==C.a)}v&&this.i&&this.i(this.c)}if(this.r){for(P=this.b,v=P.a.b;v!==P.a;v=b)if(b=v.b,!v.c){m=v.a,C=m.e,k=void 0;do k=C,C=k.e,k.d=null,k.b.d===null&&(k.c===k?_(k.a,null):(k.a.c=k.c,I(k,G(k))),Q=k.b,Q.c===Q?_(Q.a,null):(Q.a.c=Q.c,I(Q,G(Q))),T(k));while(k!==m);m=v.d,v=v.b,v.d=m,m.b=v}this.r(this.b),this.c=this.b=null;return}}this.b=this.c=null};function Et(v,m){if(v.d!==m)for(;v.d!==m;)if(v.d<m)switch(v.d){case Lt:U(v,100151),v.u(null);break;case 1:U(v,100152),v.t()}else switch(v.d){case 2:U(v,100154),v.v();break;case 1:U(v,100153),v.w()}}function U(v,m){v.p&&v.p(m,v.c)}function H(v,m){this.b=v||this,this.d=m||this,this.a=null,this.c=!1}function L(){this.h=this,this.i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function G(v){return v.b.e}function K(){this.c=new vt,this.a=new H,this.b=new L,this.d=new L,this.b.b=this.d,this.d.b=this.b}function vt(v,m){this.e=v||this,this.f=m||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function yt(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new qt}function Ft(v){v.d=[];for(var m=0;m<v.a;m++)v.d[m]=m;v.d.sort(function(C){return function(b,P){return r(C[b],C[P])?1:-1}}(v.c)),v.e=!0,at(v.b)}function xt(v,m){if(v.e){var C=v.b,b=++C.a;2*b>C.f&&(C.f*=2,C.c=nt(C.c,C.f+1));var P;return C.b===0?P=b:(P=C.b,C.b=C.c[C.b]),C.e[P]=m,C.c[P]=b,C.d[b]=P,C.h&&tt(C,b),P}return C=v.a++,v.c[C]=m,-(C+1)}function Mt(v){if(v.a===0)return Y(v.b);var m=v.c[v.d[v.a-1]];if(v.b.a!==0&&r(O(v.b),m))return Y(v.b);do--v.a;while(0<v.a&&v.c[v.d[v.a-1]]===null);return m}function qt(){this.d=nt([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function nt(v,m){for(var C=Array(m),b=0;b<v.length;b++)C[b]=v[b];for(;b<m;b++)C[b]=0;return C}function at(v){for(var m=v.a;1<=m;--m)J(v,m);v.h=!0}function O(v){return v.e[v.d[1]]}function Y(v){var m=v.d,C=v.e,b=v.c,P=m[1],Q=C[P];return 0<v.a&&(m[1]=m[v.a],b[m[1]]=1,C[P]=null,b[P]=v.b,v.b=P,0<--v.a&&J(v,1)),Q}function J(v,m){for(var C=v.d,b=v.e,P=v.c,Q=m,k=C[Q];;){var st=Q<<1;st<v.a&&r(b[C[st+1]],b[C[st]])&&(st+=1);var mt=C[st];if(st>v.a||r(b[k],b[mt])){C[Q]=k,P[k]=Q;break}C[Q]=mt,P[mt]=Q,Q=st}}function tt(v,m){for(var C=v.d,b=v.e,P=v.c,Q=m,k=C[Q];;){var st=Q>>1,mt=C[st];if(st===0||r(b[mt],b[k])){C[Q]=k,P[k]=Q;break}C[Q]=mt,P[mt]=Q,Q=st}}function rt(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function j(v){return v.e.c.b}function ht(v){return v.e.a.b}$s.libtess={GluTesselator:pt,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},pt.prototype.gluDeleteTess=pt.prototype.x,pt.prototype.gluTessProperty=pt.prototype.B,pt.prototype.gluGetTessProperty=pt.prototype.y,pt.prototype.gluTessNormal=pt.prototype.A,pt.prototype.gluTessCallback=pt.prototype.z,pt.prototype.gluTessVertex=pt.prototype.C,pt.prototype.gluTessBeginPolygon=pt.prototype.u,pt.prototype.gluTessBeginContour=pt.prototype.t,pt.prototype.gluTessEndContour=pt.prototype.v,pt.prototype.gluTessEndPolygon=pt.prototype.w,e.exports=$s.libtess})(xQ);function L0(e,i){try{let s=function(d,A){A[A.length]=d[0],A[A.length]=d[1]},o=function(d){d!==Ni.primitiveType.GL_TRIANGLES&&console.warn(`expected TRIANGLES but got type: ${d}`)},a=function(d){console.error("error callback"),console.error(`error number: ${d}`)},h=function(d,A,p){return[d[0],d[1],d[2]]},l=function(d){};const t=e.points.filter(d=>!isNaN(d)),r=new Ni.GluTesselator,n=[];r.gluTessProperty(Ni.gluEnum.GLU_TESS_WINDING_RULE,Ni.windingRule.GLU_TESS_WINDING_NONZERO),r.gluTessCallback(Ni.gluEnum.GLU_TESS_VERTEX_DATA,s),r.gluTessCallback(Ni.gluEnum.GLU_TESS_BEGIN,o),r.gluTessCallback(Ni.gluEnum.GLU_TESS_ERROR,a),r.gluTessCallback(Ni.gluEnum.GLU_TESS_COMBINE,h),r.gluTessCallback(Ni.gluEnum.GLU_TESS_EDGE_FLAG,l),r.gluTessNormal(0,0,1),r.gluTessBeginPolygon(n),r.gluTessBeginContour();for(let d=0;d<t.length;){const A=t[d++],p=t[d++],g=[A,p,0];r.gluTessVertex(g,g)}r.gluTessEndContour(),r.gluTessEndPolygon();const u=i.points,c=i.indices,f=u.length/2;for(let d=0;d<n.length;)u.push(n[d++],n[d++]);for(let d=0;d<n.length/2;d++)c.push(d+f)}catch(t){console.error(t)}}class EQ extends Fl{processFill(i){if(i.holes.length)L0(i,this);else{const t=nA.FILL_COMMANDS[i.type];i.type===ne.POLY?L0(i,this):t.triangulate(i,this)}}}const bQ={color:wo.Point,radius:sA,hollow:!1,hollowColor:wo.Hollow};function M0(e,i){const t={...bQ,...i};e.clear(),e.beginFill(t.color,1),e.drawCircle(0,0,t.radius),t.hollow&&(e.beginFill(t.hollowColor,1),e.drawCircle(0,0,t.radius-1)),t.position&&e.position.set(t.position.x,t.position.y),e.endFill()}function Q0(e){e.off("pointerdown"),e.off("pointermove"),e.off("pointerup")}function wQ(e,i,t=sA){if(i.length<2)return!1;const r=i[0];let n=!0;for(let s=1;s<i.length;s++){const o=i[s];if(!U0(r,o,t)){n=!1;break}}return n?!1:U0(r,e,t)}function U0(e,i,t=sA){return Math.abs(e.x-i.x)<t&&Math.abs(e.y-i.y)<t}var qn;(function(e){e[e.Point=3]="Point",e[e.ControlPoint=2]="ControlPoint",e[e.ControlPointLine=1]="ControlPointLine",e[e.Line=0]="Line"})(qn||(qn={}));var Di;class fA extends _Q{constructor(t){super();x(this,"type",Qt.PEN);x(this,"points",[]);x(this,"controlPoints",{});x(this,"isClosePath",!1);x(this,"isDone",!1);x(this,"lineGraphics");x(this,"pointGraphics",[]);x(this,"controlPointGraphics",[]);x(this,"movingPointIndex",-1);x(this,"editingPointIndex",-1);x(this,"editingControlPointIndex",-1);lt(this,Di,!1);x(this,"enterEditMode",()=>{this.editingPointIndex===-1&&(this.editingPointIndex=0),this.drawPoints(),this.drawControlPoints(),It(this,Di,!0),this.setupPointsEvents()});if(this.lineGraphics=new Ul,this.addChild(this.lineGraphics),this.lineGraphics._geometry=new EQ,t){const{points:r,isClosePath:n,controlPoints:s,...o}=t;this.points=r,this.isClosePath=n,this.controlPoints=s,this.draw(),this.parseJSON(o),this.x=t.offsetX,this.y=t.offsetY}this.type=Qt.PEN,this.lineGraphics.zIndex=qn.Line,this.sortableChildren=!0,this.points.length>0&&(this.interactive=!0,this.isDone=!0,this.setupHitArea()),this.setUpLineGraphics()}highlightBound(){!B(this,Di)&&this.isDone&&this.lineGraphics.highlightBound()}reset(){!B(this,Di)&&this.isDone&&this.lineGraphics.reset()}setUpLineGraphics(){this.lineGraphics.interactive=!1}start(t){B(this,Di)||(wQ(t,this.points)?(this.isClosePath=!0,this.done()):(this.points.push(t),this.update(t),this.points.length===1?(this.emit(Le.DRAW_BEGIN,this),this.interactive=!0):this.emit(Le.DRAW_UPDATE,this)))}update(t){B(this,Di)||this.points.length<1||(this.draw(),this.drawAuxiliaryLine(t),this.drawPoints())}getRealBounds(){return this.lineGraphics.getRealBounds()}end(){}draw(){this.points.length<1||(this.lineGraphics.clear().lineStyle(nr),this.drawLine(this.isClosePath))}done(){this.isDone=!0,It(this,Di,!1),this.interactive=!0,this.removePointsEvents(),this.removePointGraphics(),this.removeControlPointsEvents(),this.removeControlPointGraphics(),this.draw(),this.lineGraphics.draw(),this.setupHitArea(),this.emit(Le.DRAW_DONE,this)}updateData(t,r){const{points:n,isClosePath:s,controlPoints:o}=t;this.points=n,this.isClosePath=s,this.controlPoints=o,r?this.done():(this.draw(),this.removePointGraphics(),this.removeControlPointGraphics(),B(this,Di)?this.enterEditMode():this.isDone||this.drawPoints(),this.setupHitArea())}getRealPoints(t){return this.lineGraphics.getRealPoints(t)}undo(){this.clear()}toJSON(t){const{points:r,controlPoints:n,width:s,height:o}=this,a=super.toJSON(t),{isFill:h,config:{fillColor:l,lineColor:u}}=this.lineGraphics;return{...a,points:Jn(r),controlPoints:Jn(n),isFill:h,fillColor:l,lineColor:u,width:s,height:o}}parseJSON(t){const{points:r=this.points,controlPoints:n=this.controlPoints,isFill:s,fillColor:o,lineColor:a,layerTag:h,layerColor:l,width:u=this.width,height:c=this.height}=t;super.parseJSON(t),this.lineGraphics.parseJSON({isFill:s,fillColor:o,lineColor:a,layerTag:h,layerColor:l,x:this.lineGraphics.x,y:this.lineGraphics.y}),this.points=Jn(r),this.controlPoints=Jn(n),this.width=u,this.height=c}get editing(){return B(this,Di)}get isFill(){return this.lineGraphics.isFill}drawLine(t=!1){const r=this.points[0];this.lineGraphics.moveTo(r.x,r.y);for(let n=1;n<this.points.length;n++){const s=this.points[n],o=this.controlPoints[n],a=this.controlPoints[n-1];this.drawLineWithControlPoints(o,a,s)}if(t){const n=this.controlPoints[0],s=this.controlPoints[this.points.length-1];this.drawLineWithControlPoints(n,s,r)}this.lineGraphics.finishPoly()}drawLineWithControlPoints(t,r,n){const s=r&&r.length>1;t?s?this.lineGraphics.bezierCurveTo(r[1].x,r[1].y,t[0].x,t[0].y,n.x,n.y):this.lineGraphics.quadraticCurveTo(t[0].x,t[0].y,n.x,n.y):s?this.lineGraphics.quadraticCurveTo(r[1].x,r[1].y,n.x,n.y):this.lineGraphics.lineTo(n.x,n.y)}drawAuxiliaryLine(t){const r=this.points[this.points.length-1];this.lineGraphics.moveTo(r.x,r.y).lineTo(t.x,t.y)}drawPoints(){for(let t=0;t<this.points.length;t++){const r=this.points[t];let n=this.pointGraphics[t];n||(n=new Kt,n.zIndex=qn.Point,this.pointGraphics.push(n),this.addChild(n)),M0(n,{position:r,hollow:t!==this.editingPointIndex})}}setupPointsEvents(){this.pointGraphics.forEach(t=>{t.interactive=!0,t.on("pointerdown",this.onPointPointerDown.bind(this)),t.on("pointermove",this.onPointPointerMove.bind(this)),t.on("pointerup",this.onPointPointerUp.bind(this)),t.on(be.DOUBLE_CLICK,this.onPointDoubleClick.bind(this))})}drawControlPoints(){if(this.editingPointIndex<0)return;const t=this.controlPoints[this.editingPointIndex];if(!t)return;this.removeControlPointGraphics();const r=new Kt;r.zIndex=qn.ControlPointLine,r.clear().lineStyle(nr),this.controlPointGraphics.push(r),this.addChild(r);for(let n=0;n<t.length;n++){const s=t[n],o=new Kt;o.zIndex=qn.ControlPoint,this.controlPointGraphics.push(o),this.addChild(o),M0(o,{position:s,color:wo.ControlPoint}),o.interactive=!0,o.on("pointerdown",this.onControlPointPointerDown.bind(this)),o.on("pointermove",this.onControlPointPointerMove.bind(this)),o.on("pointerup",this.onControlPointPointerUp.bind(this)),n===0?r.moveTo(s.x,s.y):r.lineTo(s.x,s.y)}}onControlPointPointerDown(t){t.stopPropagation(),t.currentTarget instanceof Kt&&(this.editingControlPointIndex=this.controlPointGraphics.indexOf(t.currentTarget)-1,this.on("pointerupoutside",this.onControlPointPointerUp))}onControlPointPointerMove(t){if(this.editingPointIndex<0||this.editingControlPointIndex<0)return;const r=t.data.getLocalPosition(this),n=this.controlPoints[this.editingPointIndex];if(n){n[this.editingControlPointIndex]=r;const s=this.points[this.editingPointIndex],o=nQ(r,s),a=this.editingControlPointIndex===0?1:0;n[a]=o,this.controlPoints[this.editingPointIndex]=n}this.draw(),this.drawControlPoints(),this.drawPoints()}onControlPointPointerUp(t){t.stopPropagation(),this.editingControlPointIndex=-1,this.off("pointerupoutside",this.onControlPointPointerUp),this.emit(Le.DRAW_UPDATE,this)}onPointPointerDown(t){t.stopPropagation(),t.currentTarget instanceof Kt&&(this.movingPointIndex=this.pointGraphics.indexOf(t.currentTarget),this.editingPointIndex=this.movingPointIndex,this.drawPoints(),this.removeControlPointGraphics(),this.drawControlPoints(),this.on("pointerupoutside",this.onPointPointerUp))}onPointDoubleClick(t){if(!(t.currentTarget instanceof Kt))return;const r=this.pointGraphics.indexOf(t.currentTarget);if(r===-1)return;this.movingPointIndex=-1,this.editingPointIndex=r;const n=this.points[this.editingPointIndex];let s,o;if(this.editingPointIndex===0?s=this.points[this.points.length-1]:s=this.points[this.editingPointIndex-1],this.editingPointIndex===this.points.length-1?o=this.points[0]:o=this.points[this.editingPointIndex+1],this.removeControlPointsEvents(),this.removeControlPointGraphics(),this.controlPoints[this.editingPointIndex])delete this.controlPoints[this.editingPointIndex];else{const{cp1:a,cp2:h}=sQ(s,n,o);this.controlPoints[this.editingPointIndex]=[a,h]}this.draw(),this.drawControlPoints(),this.drawPoints()}onPointPointerMove(t){if(this.movingPointIndex<0)return;const r=this.points[this.movingPointIndex],n=t.data.getLocalPosition(this);this.points[this.movingPointIndex]=n,this.draw(),this.removeControlPointGraphics(),this.updateControlPoints(n,r),this.drawPoints()}updateControlPoints(t,r){const n=t.x-r.x,s=t.y-r.y,o=this.controlPoints[this.movingPointIndex];if(o){for(let a=0;a<o.length;a++)o[a].x+=n,o[a].y+=s;this.controlPoints[this.movingPointIndex]=o,this.drawControlPoints()}}onPointPointerUp(t){t.stopPropagation(),this.movingPointIndex=-1,this.emit(Le.DRAW_UPDATE,this),this.off("pointerupoutside",this.onPointPointerUp)}removePointsEvents(){this.pointGraphics.forEach(t=>{Q0(t)})}removeControlPointsEvents(){this.controlPointGraphics.forEach(t=>{Q0(t)})}removePointGraphics(){this.pointGraphics.forEach(t=>{t.destroy()}),this.pointGraphics=[]}removeControlPointGraphics(){this.controlPointGraphics.forEach(t=>{t.destroy()}),this.controlPointGraphics=[]}containsPoint(t){return this.lineGraphics.containsPoint(t)}setupHitArea(){if(Af(this.hitArea))return;const t=Object.values(this.controlPoints).length;if(this.points.length===2&&!t){const[r,n]=this.points;this.lineGraphics.addLineHitArea(r,n),this.hitArea=this.lineGraphics.hitArea}else this.hitArea=null}}Di=new WeakMap;class n_ extends Ps{constructor(i){super(),i&&(this.parseJSON(i),this.draw()),this.type=Qt.RECT,this.isClosePath=!0}update(i,t){const{position:{x:r,y:n}}=this;let s=!1;t&&t.data.originalEvent.shiftKey&&(s=!0);const{x:o,y:a}=i,h=o-r,l=s?h:a-n;this.originWidth=h,this.originHeight=l,this.draw()}draw(){this.clear().lineStyle(nr).drawRect(0,0,this.originWidth,this.originHeight),super.draw()}end(i,t){const{position:{x:r,y:n}}=this,{x:s,y:o}=i;s<r&&(this.position.x=s),o<n&&(this.position.y=o);const a=Math.abs(s-r),h=t&&t.data.originalEvent.shiftKey?a:Math.abs(o-n);this.originWidth=a,this.originHeight=h,this.draw(),this.toggleFill(this.isFill),this.done()}}/*!
 * @pixi/filter-adjustment - v4.1.3
 * Compiled Thu, 17 Jun 2021 19:33:56 UTC
 *
 * @pixi/filter-adjustment is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var mf=function(e,i){return mf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},mf(e,i)};function TQ(e,i){mf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var BQ=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,RQ=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform float gamma;
uniform float contrast;
uniform float saturation;
uniform float brightness;
uniform float red;
uniform float green;
uniform float blue;
uniform float alpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (c.a > 0.0) {
        c.rgb /= c.a;

        vec3 rgb = pow(c.rgb, vec3(1. / gamma));
        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, saturation), contrast);
        rgb.r *= red;
        rgb.g *= green;
        rgb.b *= blue;
        c.rgb = rgb * brightness;

        c.rgb *= c.a;
    }

    gl_FragColor = c * alpha;
}
`;(function(e){TQ(i,e);function i(t){var r=e.call(this,BQ,RQ)||this;return r.gamma=1,r.saturation=1,r.contrast=1,r.brightness=1,r.red=1,r.green=1,r.blue=1,r.alpha=1,Object.assign(r,t),r}return i.prototype.apply=function(t,r,n,s){this.uniforms.gamma=Math.max(this.gamma,1e-4),this.uniforms.saturation=this.saturation,this.uniforms.contrast=this.contrast,this.uniforms.brightness=this.brightness,this.uniforms.red=this.red,this.uniforms.green=this.green,this.uniforms.blue=this.blue,this.uniforms.alpha=this.alpha,t.applyFilter(this,r,n,s)},i})(Ht);/*!
 * @pixi/filter-kawase-blur - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-kawase-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var If=function(e,i){return If=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},If(e,i)};function PQ(e,i){If(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var SQ=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,NQ=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample top right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample bottom right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));

    // Sample bottom left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}`,OQ=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;
uniform vec4 filterClamp;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample top right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}
`,Ph=function(e){PQ(i,e);function i(t,r,n){t===void 0&&(t=4),r===void 0&&(r=3),n===void 0&&(n=!1);var s=e.call(this,SQ,n?OQ:NQ)||this;return s._kernels=[],s._blur=4,s._quality=3,s.uniforms.uOffset=new Float32Array(2),s._pixelSize=new M,s.pixelSize=1,s._clamp=n,Array.isArray(t)?s.kernels=t:(s._blur=t,s.quality=r),s}return i.prototype.apply=function(t,r,n,s){var o=this._pixelSize.x/r._frame.width,a=this._pixelSize.y/r._frame.height,h;if(this._quality===1||this._blur===0)h=this._kernels[0]+.5,this.uniforms.uOffset[0]=h*o,this.uniforms.uOffset[1]=h*a,t.applyFilter(this,r,n,s);else{for(var l=t.getFilterTexture(),u=r,c=l,f=void 0,d=this._quality-1,A=0;A<d;A++)h=this._kernels[A]+.5,this.uniforms.uOffset[0]=h*o,this.uniforms.uOffset[1]=h*a,t.applyFilter(this,u,c,1),f=u,u=c,c=f;h=this._kernels[d]+.5,this.uniforms.uOffset[0]=h*o,this.uniforms.uOffset[1]=h*a,t.applyFilter(this,u,n,s),t.returnFilterTexture(l)}},i.prototype._updatePadding=function(){this.padding=Math.ceil(this._kernels.reduce(function(t,r){return t+r+.5},0))},i.prototype._generateKernels=function(){var t=this._blur,r=this._quality,n=[t];if(t>0)for(var s=t,o=t/r,a=1;a<r;a++)s-=o,n.push(s);this._kernels=n,this._updatePadding()},Object.defineProperty(i.prototype,"kernels",{get:function(){return this._kernels},set:function(t){Array.isArray(t)&&t.length>0?(this._kernels=t,this._quality=t.length,this._blur=Math.max.apply(Math,t)):(this._kernels=[0],this._quality=1)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clamp",{get:function(){return this._clamp},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pixelSize",{get:function(){return this._pixelSize},set:function(t){typeof t=="number"?(this._pixelSize.x=t,this._pixelSize.y=t):Array.isArray(t)?(this._pixelSize.x=t[0],this._pixelSize.y=t[1]):t instanceof M?(this._pixelSize.x=t.x,this._pixelSize.y=t.y):(this._pixelSize.x=1,this._pixelSize.y=1)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=Math.max(1,Math.round(t)),this._generateKernels()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blur",{get:function(){return this._blur},set:function(t){this._blur=t,this._generateKernels()},enumerable:!1,configurable:!0}),i}(Ht);/*!
 * @pixi/filter-advanced-bloom - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-advanced-bloom is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Cf=function(e,i){return Cf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Cf(e,i)};function s_(e,i){Cf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var o_=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,DQ=`
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform float threshold;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);

    // A simple & fast algorithm for getting brightness.
    // It's inaccuracy , but good enought for this feature.
    float _max = max(max(color.r, color.g), color.b);
    float _min = min(min(color.r, color.g), color.b);
    float brightness = (_max + _min) * 0.5;

    if(brightness > threshold) {
        gl_FragColor = color;
    } else {
        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
    }
}
`,FQ=function(e){s_(i,e);function i(t){t===void 0&&(t=.5);var r=e.call(this,o_,DQ)||this;return r.threshold=t,r}return Object.defineProperty(i.prototype,"threshold",{get:function(){return this.uniforms.threshold},set:function(t){this.uniforms.threshold=t},enumerable:!1,configurable:!0}),i}(Ht),LQ=`uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform sampler2D bloomTexture;
uniform float bloomScale;
uniform float brightness;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);
    color.rgb *= brightness;
    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);
    bloomColor.rgb *= bloomScale;
    gl_FragColor = color + bloomColor;
}
`;(function(e){s_(i,e);function i(t){var r=e.call(this,o_,LQ)||this;r.bloomScale=1,r.brightness=1,r._resolution=ft.FILTER_RESOLUTION,typeof t=="number"&&(t={threshold:t});var n=Object.assign(i.defaults,t);r.bloomScale=n.bloomScale,r.brightness=n.brightness;var s=n.kernels,o=n.blur,a=n.quality,h=n.pixelSize,l=n.resolution;return r._extractFilter=new FQ(n.threshold),r._extractFilter.resolution=l,r._blurFilter=s?new Ph(s):new Ph(o,a),r.pixelSize=h,r.resolution=l,r}return i.prototype.apply=function(t,r,n,s,o){var a=t.getFilterTexture();this._extractFilter.apply(t,r,a,1,o);var h=t.getFilterTexture();this._blurFilter.apply(t,a,h,1),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=h,t.applyFilter(this,r,n,s),t.returnFilterTexture(h),t.returnFilterTexture(a)},Object.defineProperty(i.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t,this._extractFilter&&(this._extractFilter.resolution=t),this._blurFilter&&(this._blurFilter.resolution=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"threshold",{get:function(){return this._extractFilter.threshold},set:function(t){this._extractFilter.threshold=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"kernels",{get:function(){return this._blurFilter.kernels},set:function(t){this._blurFilter.kernels=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blur",{get:function(){return this._blurFilter.blur},set:function(t){this._blurFilter.blur=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"quality",{get:function(){return this._blurFilter.quality},set:function(t){this._blurFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pixelSize",{get:function(){return this._blurFilter.pixelSize},set:function(t){this._blurFilter.pixelSize=t},enumerable:!1,configurable:!0}),i.defaults={threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:ft.FILTER_RESOLUTION},i})(Ht);/*!
 * @pixi/filter-ascii - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-ascii is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _f=function(e,i){return _f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},_f(e,i)};function MQ(e,i){_f(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var QQ=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,UQ=`varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform float pixelSize;
uniform sampler2D uSampler;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 pixelate(vec2 coord, vec2 size)
{
    return floor( coord / size ) * size;
}

vec2 getMod(vec2 coord, vec2 size)
{
    return mod( coord , size) / size;
}

float character(float n, vec2 p)
{
    p = floor(p*vec2(4.0, -4.0) + 2.5);

    if (clamp(p.x, 0.0, 4.0) == p.x)
    {
        if (clamp(p.y, 0.0, 4.0) == p.y)
        {
            if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;
        }
    }
    return 0.0;
}

void main()
{
    vec2 coord = mapCoord(vTextureCoord);

    // get the rounded color..
    vec2 pixCoord = pixelate(coord, vec2(pixelSize));
    pixCoord = unmapCoord(pixCoord);

    vec4 color = texture2D(uSampler, pixCoord);

    // determine the character to use
    float gray = (color.r + color.g + color.b) / 3.0;

    float n =  65536.0;             // .
    if (gray > 0.2) n = 65600.0;    // :
    if (gray > 0.3) n = 332772.0;   // *
    if (gray > 0.4) n = 15255086.0; // o
    if (gray > 0.5) n = 23385164.0; // &
    if (gray > 0.6) n = 15252014.0; // 8
    if (gray > 0.7) n = 13199452.0; // @
    if (gray > 0.8) n = 11512810.0; // #

    // get the mod..
    vec2 modd = getMod(coord, vec2(pixelSize));

    gl_FragColor = color * character( n, vec2(-1.0) + modd * 2.0);

}
`;(function(e){MQ(i,e);function i(t){t===void 0&&(t=8);var r=e.call(this,QQ,UQ)||this;return r.size=t,r}return Object.defineProperty(i.prototype,"size",{get:function(){return this.uniforms.pixelSize},set:function(t){this.uniforms.pixelSize=t},enumerable:!1,configurable:!0}),i})(Ht);/*!
 * @pixi/filter-bevel - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-bevel is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xf=function(e,i){return xf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},xf(e,i)};function GQ(e,i){xf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var kQ=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,HQ=`precision mediump float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform float transformX;
uniform float transformY;
uniform vec3 lightColor;
uniform float lightAlpha;
uniform vec3 shadowColor;
uniform float shadowAlpha;

void main(void) {
    vec2 transform = vec2(1.0 / filterArea) * vec2(transformX, transformY);
    vec4 color = texture2D(uSampler, vTextureCoord);
    float light = texture2D(uSampler, vTextureCoord - transform).a;
    float shadow = texture2D(uSampler, vTextureCoord + transform).a;

    color.rgb = mix(color.rgb, lightColor, clamp((color.a - light) * lightAlpha, 0.0, 1.0));
    color.rgb = mix(color.rgb, shadowColor, clamp((color.a - shadow) * shadowAlpha, 0.0, 1.0));
    gl_FragColor = vec4(color.rgb * color.a, color.a);
}
`;(function(e){GQ(i,e);function i(t){var r=e.call(this,kQ,HQ)||this;return r._thickness=2,r._angle=0,r.uniforms.lightColor=new Float32Array(3),r.uniforms.shadowColor=new Float32Array(3),Object.assign(r,{rotation:45,thickness:2,lightColor:16777215,lightAlpha:.7,shadowColor:0,shadowAlpha:.7},t),r.padding=1,r}return i.prototype._updateTransform=function(){this.uniforms.transformX=this._thickness*Math.cos(this._angle),this.uniforms.transformY=this._thickness*Math.sin(this._angle)},Object.defineProperty(i.prototype,"rotation",{get:function(){return this._angle/yi},set:function(t){this._angle=t*yi,this._updateTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"thickness",{get:function(){return this._thickness},set:function(t){this._thickness=t,this._updateTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lightColor",{get:function(){return Ci(this.uniforms.lightColor)},set:function(t){Re(t,this.uniforms.lightColor)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lightAlpha",{get:function(){return this.uniforms.lightAlpha},set:function(t){this.uniforms.lightAlpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shadowColor",{get:function(){return Ci(this.uniforms.shadowColor)},set:function(t){Re(t,this.uniforms.shadowColor)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shadowAlpha",{get:function(){return this.uniforms.shadowAlpha},set:function(t){this.uniforms.shadowAlpha=t},enumerable:!1,configurable:!0}),i})(Ht);/*!
 * @pixi/filter-bloom - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-bloom is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ef=function(e,i){return Ef=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Ef(e,i)};function XQ(e,i){Ef(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}(function(e){XQ(i,e);function i(t,r,n,s){t===void 0&&(t=2),r===void 0&&(r=4),n===void 0&&(n=ft.FILTER_RESOLUTION),s===void 0&&(s=5);var o=e.call(this)||this,a,h;return typeof t=="number"?(a=t,h=t):t instanceof M?(a=t.x,h=t.y):Array.isArray(t)&&(a=t[0],h=t[1]),o.blurXFilter=new No(!0,a,r,n,s),o.blurYFilter=new No(!1,h,r,n,s),o.blurYFilter.blendMode=Nt.SCREEN,o.defaultFilter=new MC,o}return i.prototype.apply=function(t,r,n,s){var o=t.getFilterTexture();this.defaultFilter.apply(t,r,n,s),this.blurXFilter.apply(t,r,o,1),this.blurYFilter.apply(t,o,n,0),t.returnFilterTexture(o)},Object.defineProperty(i.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t},enumerable:!1,configurable:!0}),i})(Ht);/*!
 * @pixi/filter-bulge-pinch - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-bulge-pinch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bf=function(e,i){return bf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},bf(e,i)};function YQ(e,i){bf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var VQ=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,zQ=`uniform float radius;
uniform float strength;
uniform vec2 center;
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

void main()
{
    vec2 coord = vTextureCoord * filterArea.xy;
    coord -= center * dimensions.xy;
    float distance = length(coord);
    if (distance < radius) {
        float percent = distance / radius;
        if (strength > 0.0) {
            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);
        } else {
            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);
        }
    }
    coord += center * dimensions.xy;
    coord /= filterArea.xy;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    gl_FragColor = color;
}
`;(function(e){YQ(i,e);function i(t){var r=e.call(this,VQ,zQ)||this;return r.uniforms.dimensions=new Float32Array(2),Object.assign(r,i.defaults,t),r}return i.prototype.apply=function(t,r,n,s){var o=r.filterFrame,a=o.width,h=o.height;this.uniforms.dimensions[0]=a,this.uniforms.dimensions[1]=h,t.applyFilter(this,r,n,s)},Object.defineProperty(i.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(t){this.uniforms.radius=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"strength",{get:function(){return this.uniforms.strength},set:function(t){this.uniforms.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"center",{get:function(){return this.uniforms.center},set:function(t){this.uniforms.center=t},enumerable:!1,configurable:!0}),i.defaults={center:[.5,.5],radius:100,strength:1},i})(Ht);/*!
 * @pixi/filter-color-map - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-color-map is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var wf=function(e,i){return wf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},wf(e,i)};function WQ(e,i){wf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var jQ=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,KQ=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform sampler2D colorMap;
uniform float _mix;
uniform float _size;
uniform float _sliceSize;
uniform float _slicePixelSize;
uniform float _sliceInnerSize;
void main() {
    vec4 color = texture2D(uSampler, vTextureCoord.xy);

    vec4 adjusted;
    if (color.a > 0.0) {
        color.rgb /= color.a;
        float innerWidth = _size - 1.0;
        float zSlice0 = min(floor(color.b * innerWidth), innerWidth);
        float zSlice1 = min(zSlice0 + 1.0, innerWidth);
        float xOffset = _slicePixelSize * 0.5 + color.r * _sliceInnerSize;
        float s0 = xOffset + (zSlice0 * _sliceSize);
        float s1 = xOffset + (zSlice1 * _sliceSize);
        float yOffset = _sliceSize * 0.5 + color.g * (1.0 - _sliceSize);
        vec4 slice0Color = texture2D(colorMap, vec2(s0,yOffset));
        vec4 slice1Color = texture2D(colorMap, vec2(s1,yOffset));
        float zOffset = fract(color.b * innerWidth);
        adjusted = mix(slice0Color, slice1Color, zOffset);

        color.rgb *= color.a;
    }
    gl_FragColor = vec4(mix(color, adjusted, _mix).rgb, color.a);

}`;(function(e){WQ(i,e);function i(t,r,n){r===void 0&&(r=!1),n===void 0&&(n=1);var s=e.call(this,jQ,KQ)||this;return s.mix=1,s._size=0,s._sliceSize=0,s._slicePixelSize=0,s._sliceInnerSize=0,s._nearest=!1,s._scaleMode=null,s._colorMap=null,s._scaleMode=null,s.nearest=r,s.mix=n,s.colorMap=t,s}return i.prototype.apply=function(t,r,n,s){this.uniforms._mix=this.mix,t.applyFilter(this,r,n,s)},Object.defineProperty(i.prototype,"colorSize",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"colorMap",{get:function(){return this._colorMap},set:function(t){var r;t&&(t instanceof Ot||(t=Ot.from(t)),!((r=t)===null||r===void 0)&&r.baseTexture&&(t.baseTexture.scaleMode=this._scaleMode,t.baseTexture.mipmap=mi.OFF,this._size=t.height,this._sliceSize=1/this._size,this._slicePixelSize=this._sliceSize/this._size,this._sliceInnerSize=this._slicePixelSize*(this._size-1),this.uniforms._size=this._size,this.uniforms._sliceSize=this._sliceSize,this.uniforms._slicePixelSize=this._slicePixelSize,this.uniforms._sliceInnerSize=this._sliceInnerSize,this.uniforms.colorMap=t),this._colorMap=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nearest",{get:function(){return this._nearest},set:function(t){this._nearest=t,this._scaleMode=t?ni.NEAREST:ni.LINEAR;var r=this._colorMap;r&&r.baseTexture&&(r.baseTexture._glTextures={},r.baseTexture.scaleMode=this._scaleMode,r.baseTexture.mipmap=mi.OFF,r._updateID++,r.baseTexture.emit("update",r.baseTexture))},enumerable:!1,configurable:!0}),i.prototype.updateColorMap=function(){var t=this._colorMap;t&&t.baseTexture&&(t._updateID++,t.baseTexture.emit("update",t.baseTexture),this.colorMap=t)},i.prototype.destroy=function(t){t===void 0&&(t=!1),this._colorMap&&this._colorMap.destroy(t),e.prototype.destroy.call(this)},i})(Ht);/*!
 * @pixi/filter-color-overlay - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-color-overlay is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Tf=function(e,i){return Tf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Tf(e,i)};function $Q(e,i){Tf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var JQ=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,qQ=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 color;
uniform float alpha;

void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    gl_FragColor = vec4(mix(currentColor.rgb, color.rgb, currentColor.a * alpha), currentColor.a);
}
`;(function(e){$Q(i,e);function i(t,r){t===void 0&&(t=0),r===void 0&&(r=1);var n=e.call(this,JQ,qQ)||this;return n._color=0,n._alpha=1,n.uniforms.color=new Float32Array(3),n.color=t,n.alpha=r,n}return Object.defineProperty(i.prototype,"color",{get:function(){return this._color},set:function(t){var r=this.uniforms.color;typeof t=="number"?(Re(t,r),this._color=t):(r[0]=t[0],r[1]=t[1],r[2]=t[2],this._color=Ci(r))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this.uniforms.alpha=t,this._alpha=t},enumerable:!1,configurable:!0}),i})(Ht);/*!
 * @pixi/filter-color-replace - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-color-replace is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Bf=function(e,i){return Bf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Bf(e,i)};function ZQ(e,i){Bf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var tU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,eU=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 originalColor;
uniform vec3 newColor;
uniform float epsilon;
void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    vec3 colorDiff = originalColor - (currentColor.rgb / max(currentColor.a, 0.0000000001));
    float colorDistance = length(colorDiff);
    float doReplace = step(colorDistance, epsilon);
    gl_FragColor = vec4(mix(currentColor.rgb, (newColor + colorDiff) * currentColor.a, doReplace), currentColor.a);
}
`;(function(e){ZQ(i,e);function i(t,r,n){t===void 0&&(t=16711680),r===void 0&&(r=0),n===void 0&&(n=.4);var s=e.call(this,tU,eU)||this;return s._originalColor=16711680,s._newColor=0,s.uniforms.originalColor=new Float32Array(3),s.uniforms.newColor=new Float32Array(3),s.originalColor=t,s.newColor=r,s.epsilon=n,s}return Object.defineProperty(i.prototype,"originalColor",{get:function(){return this._originalColor},set:function(t){var r=this.uniforms.originalColor;typeof t=="number"?(Re(t,r),this._originalColor=t):(r[0]=t[0],r[1]=t[1],r[2]=t[2],this._originalColor=Ci(r))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"newColor",{get:function(){return this._newColor},set:function(t){var r=this.uniforms.newColor;typeof t=="number"?(Re(t,r),this._newColor=t):(r[0]=t[0],r[1]=t[1],r[2]=t[2],this._newColor=Ci(r))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"epsilon",{get:function(){return this.uniforms.epsilon},set:function(t){this.uniforms.epsilon=t},enumerable:!1,configurable:!0}),i})(Ht);/*!
 * @pixi/filter-convolution - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-convolution is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Rf=function(e,i){return Rf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Rf(e,i)};function iU(e,i){Rf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var rU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,nU=`precision mediump float;

varying mediump vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec2 texelSize;
uniform float matrix[9];

void main(void)
{
   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left
   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center
   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right

   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left
   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center
   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right

   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left
   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center
   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right

   gl_FragColor =
       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +
       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +
       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];

   gl_FragColor.a = c22.a;
}
`;(function(e){iU(i,e);function i(t,r,n){r===void 0&&(r=200),n===void 0&&(n=200);var s=e.call(this,rU,nU)||this;return s.uniforms.texelSize=new Float32Array(2),s.uniforms.matrix=new Float32Array(9),t!==void 0&&(s.matrix=t),s.width=r,s.height=n,s}return Object.defineProperty(i.prototype,"matrix",{get:function(){return this.uniforms.matrix},set:function(t){var r=this;t.forEach(function(n,s){r.uniforms.matrix[s]=n})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return 1/this.uniforms.texelSize[0]},set:function(t){this.uniforms.texelSize[0]=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return 1/this.uniforms.texelSize[1]},set:function(t){this.uniforms.texelSize[1]=1/t},enumerable:!1,configurable:!0}),i})(Ht);/*!
 * @pixi/filter-cross-hatch - v4.1.3
 * Compiled Thu, 17 Jun 2021 19:33:56 UTC
 *
 * @pixi/filter-cross-hatch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Pf=function(e,i){return Pf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Pf(e,i)};function sU(e,i){Pf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var oU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,aU=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void)
{
    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);

    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);

    if (lum < 1.00)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.75)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.50)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.3)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }
}
`;(function(e){sU(i,e);function i(){return e.call(this,oU,aU)||this}return i})(Ht);/*!
 * @pixi/filter-crt - v4.1.6
 * Compiled Thu, 03 Feb 2022 14:30:04 UTC
 *
 * @pixi/filter-crt is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Sf=function(e,i){return Sf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Sf(e,i)};function hU(e,i){Sf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var lU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,uU=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec2 dimensions;

const float SQRT_2 = 1.414213;

const float light = 1.0;

uniform float curvature;
uniform float lineWidth;
uniform float lineContrast;
uniform bool verticalLine;
uniform float noise;
uniform float noiseSize;

uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;

uniform float seed;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 dir = vec2(vTextureCoord.xy * filterArea.xy / dimensions - vec2(0.5, 0.5));
    
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 rgb = gl_FragColor.rgb;

    if (noise > 0.0 && noiseSize > 0.0)
    {
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        rgb += _noise * noise;
    }

    if (lineWidth > 0.0)
    {
        float _c = curvature > 0. ? curvature : 1.;
        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;
        vec2 uv = dir * k;

        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;
        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;
        rgb *= j;
        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);
        rgb *= 0.99 + ceil(segment) * 0.015;
    }

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    gl_FragColor.rgb = rgb;
}
`;(function(e){hU(i,e);function i(t){var r=e.call(this,lU,uU)||this;return r.time=0,r.seed=0,r.uniforms.dimensions=new Float32Array(2),Object.assign(r,i.defaults,t),r}return i.prototype.apply=function(t,r,n,s){var o=r.filterFrame,a=o.width,h=o.height;this.uniforms.dimensions[0]=a,this.uniforms.dimensions[1]=h,this.uniforms.seed=this.seed,this.uniforms.time=this.time,t.applyFilter(this,r,n,s)},Object.defineProperty(i.prototype,"curvature",{get:function(){return this.uniforms.curvature},set:function(t){this.uniforms.curvature=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineWidth",{get:function(){return this.uniforms.lineWidth},set:function(t){this.uniforms.lineWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineContrast",{get:function(){return this.uniforms.lineContrast},set:function(t){this.uniforms.lineContrast=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"verticalLine",{get:function(){return this.uniforms.verticalLine},set:function(t){this.uniforms.verticalLine=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"noise",{get:function(){return this.uniforms.noise},set:function(t){this.uniforms.noise=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"noiseSize",{get:function(){return this.uniforms.noiseSize},set:function(t){this.uniforms.noiseSize=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vignetting",{get:function(){return this.uniforms.vignetting},set:function(t){this.uniforms.vignetting=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vignettingAlpha",{get:function(){return this.uniforms.vignettingAlpha},set:function(t){this.uniforms.vignettingAlpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vignettingBlur",{get:function(){return this.uniforms.vignettingBlur},set:function(t){this.uniforms.vignettingBlur=t},enumerable:!1,configurable:!0}),i.defaults={curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0},i})(Ht);/*!
 * @pixi/filter-dot - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-dot is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Nf=function(e,i){return Nf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Nf(e,i)};function cU(e,i){Nf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var fU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,dU=`precision mediump float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform vec4 filterArea;
uniform sampler2D uSampler;

uniform float angle;
uniform float scale;

float pattern()
{
   float s = sin(angle), c = cos(angle);
   vec2 tex = vTextureCoord * filterArea.xy;
   vec2 point = vec2(
       c * tex.x - s * tex.y,
       s * tex.x + c * tex.y
   ) * scale;
   return (sin(point.x) * sin(point.y)) * 4.0;
}

void main()
{
   vec4 color = texture2D(uSampler, vTextureCoord);
   float average = (color.r + color.g + color.b) / 3.0;
   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);
}
`,AU=function(e){cU(i,e);function i(t,r){t===void 0&&(t=1),r===void 0&&(r=5);var n=e.call(this,fU,dU)||this;return n.scale=t,n.angle=r,n}return Object.defineProperty(i.prototype,"scale",{get:function(){return this.uniforms.scale},set:function(t){this.uniforms.scale=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"angle",{get:function(){return this.uniforms.angle},set:function(t){this.uniforms.angle=t},enumerable:!1,configurable:!0}),i}(Ht);/*!
 * @pixi/filter-drop-shadow - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-drop-shadow is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Of=function(e,i){return Of=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Of(e,i)};function pU(e,i){Of(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var Sh=function(){return Sh=Object.assign||function(i){for(var t=arguments,r,n=1,s=arguments.length;n<s;n++){r=t[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},Sh.apply(this,arguments)},gU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,vU=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float alpha;
uniform vec3 color;

uniform vec2 shift;
uniform vec4 inputSize;

void main(void){
    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);

    // Premultiply alpha
    sample.rgb = color.rgb * sample.a;

    // alpha user alpha
    sample *= alpha;

    gl_FragColor = sample;
}`;(function(e){pU(i,e);function i(t){var r=e.call(this)||this;r.angle=45,r._distance=5,r._resolution=ft.FILTER_RESOLUTION;var n=t?Sh(Sh({},i.defaults),t):i.defaults,s=n.kernels,o=n.blur,a=n.quality,h=n.pixelSize,l=n.resolution;r._tintFilter=new Ht(gU,vU),r._tintFilter.uniforms.color=new Float32Array(4),r._tintFilter.uniforms.shift=new M,r._tintFilter.resolution=l,r._blurFilter=s?new Ph(s):new Ph(o,a),r.pixelSize=h,r.resolution=l;var u=n.shadowOnly,c=n.rotation,f=n.distance,d=n.alpha,A=n.color;return r.shadowOnly=u,r.rotation=c,r.distance=f,r.alpha=d,r.color=A,r._updatePadding(),r}return i.prototype.apply=function(t,r,n,s){var o=t.getFilterTexture();this._tintFilter.apply(t,r,o,1),this._blurFilter.apply(t,o,n,s),this.shadowOnly!==!0&&t.applyFilter(this,r,n,0),t.returnFilterTexture(o)},i.prototype._updatePadding=function(){this.padding=this.distance+this.blur*2},i.prototype._updateShift=function(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))},Object.defineProperty(i.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t,this._tintFilter&&(this._tintFilter.resolution=t),this._blurFilter&&(this._blurFilter.resolution=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"distance",{get:function(){return this._distance},set:function(t){this._distance=t,this._updatePadding(),this._updateShift()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rotation",{get:function(){return this.angle/yi},set:function(t){this.angle=t*yi,this._updateShift()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this._tintFilter.uniforms.alpha},set:function(t){this._tintFilter.uniforms.alpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return Ci(this._tintFilter.uniforms.color)},set:function(t){Re(t,this._tintFilter.uniforms.color)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"kernels",{get:function(){return this._blurFilter.kernels},set:function(t){this._blurFilter.kernels=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blur",{get:function(){return this._blurFilter.blur},set:function(t){this._blurFilter.blur=t,this._updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"quality",{get:function(){return this._blurFilter.quality},set:function(t){this._blurFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pixelSize",{get:function(){return this._blurFilter.pixelSize},set:function(t){this._blurFilter.pixelSize=t},enumerable:!1,configurable:!0}),i.defaults={rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:ft.FILTER_RESOLUTION},i})(Ht);/*!
 * @pixi/filter-emboss - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-emboss is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Df=function(e,i){return Df=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Df(e,i)};function yU(e,i){Df(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var mU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,IU=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float strength;
uniform vec4 filterArea;


void main(void)
{
	vec2 onePixel = vec2(1.0 / filterArea);

	vec4 color;

	color.rgb = vec3(0.5);

	color -= texture2D(uSampler, vTextureCoord - onePixel) * strength;
	color += texture2D(uSampler, vTextureCoord + onePixel) * strength;

	color.rgb = vec3((color.r + color.g + color.b) / 3.0);

	float alpha = texture2D(uSampler, vTextureCoord).a;

	gl_FragColor = vec4(color.rgb * alpha, alpha);
}
`;(function(e){yU(i,e);function i(t){t===void 0&&(t=5);var r=e.call(this,mU,IU)||this;return r.strength=t,r}return Object.defineProperty(i.prototype,"strength",{get:function(){return this.uniforms.strength},set:function(t){this.uniforms.strength=t},enumerable:!1,configurable:!0}),i})(Ht);/*!
 * @pixi/filter-glitch - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-glitch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ff=function(e,i){return Ff=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Ff(e,i)};function CU(e,i){Ff(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var _U=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,xU=`// precision highp float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;
uniform float aspect;

uniform sampler2D displacementMap;
uniform float offset;
uniform float sinDir;
uniform float cosDir;
uniform int fillMode;

uniform float seed;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

const int TRANSPARENT = 0;
const int ORIGINAL = 1;
const int LOOP = 2;
const int CLAMP = 3;
const int MIRROR = 4;

void main(void)
{
    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;

    if (coord.x > 1.0 || coord.y > 1.0) {
        return;
    }

    float cx = coord.x - 0.5;
    float cy = (coord.y - 0.5) * aspect;
    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;

    // displacementMap: repeat
    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);

    // displacementMap: mirror
    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);

    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));

    float displacement = (dc.r - dc.g) * (offset / filterArea.x);

    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);

    if (fillMode == CLAMP) {
        coord = clamp(coord, filterClamp.xy, filterClamp.zw);
    } else {
        if( coord.x > filterClamp.z ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x -= filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x = filterClamp.z * 2.0 - coord.x;
            }
        } else if( coord.x < filterClamp.x ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x += filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x *= -filterClamp.z;
            }
        }

        if( coord.y > filterClamp.w ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y -= filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y = filterClamp.w * 2.0 - coord.y;
            }
        } else if( coord.y < filterClamp.y ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y += filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y *= -filterClamp.w;
            }
        }
    }

    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;
    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;
    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;
    gl_FragColor.a = texture2D(uSampler, coord).a;
}
`;(function(e){CU(i,e);function i(t){var r=e.call(this,_U,xU)||this;return r.offset=100,r.fillMode=i.TRANSPARENT,r.average=!1,r.seed=0,r.minSize=8,r.sampleSize=512,r._slices=0,r._offsets=new Float32Array(1),r._sizes=new Float32Array(1),r._direction=-1,r.uniforms.dimensions=new Float32Array(2),r._canvas=document.createElement("canvas"),r._canvas.width=4,r._canvas.height=r.sampleSize,r.texture=Ot.from(r._canvas,{scaleMode:ni.NEAREST}),Object.assign(r,i.defaults,t),r}return i.prototype.apply=function(t,r,n,s){var o=r.filterFrame,a=o.width,h=o.height;this.uniforms.dimensions[0]=a,this.uniforms.dimensions[1]=h,this.uniforms.aspect=h/a,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,t.applyFilter(this,r,n,s)},i.prototype._randomizeSizes=function(){var t=this._sizes,r=this._slices-1,n=this.sampleSize,s=Math.min(this.minSize/n,.9/this._slices);if(this.average){for(var o=this._slices,a=1,h=0;h<r;h++){var l=a/(o-h),u=Math.max(l*(1-Math.random()*.6),s);t[h]=u,a-=u}t[r]=a}else{for(var a=1,c=Math.sqrt(1/this._slices),h=0;h<r;h++){var u=Math.max(c*a*Math.random(),s);t[h]=u,a-=u}t[r]=a}this.shuffle()},i.prototype.shuffle=function(){for(var t=this._sizes,r=this._slices-1,n=r;n>0;n--){var s=Math.random()*n>>0,o=t[n];t[n]=t[s],t[s]=o}},i.prototype._randomizeOffsets=function(){for(var t=0;t<this._slices;t++)this._offsets[t]=Math.random()*(Math.random()<.5?-1:1)},i.prototype.refresh=function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()},i.prototype.redraw=function(){var t=this.sampleSize,r=this.texture,n=this._canvas.getContext("2d");n.clearRect(0,0,8,t);for(var s,o=0,a=0;a<this._slices;a++){s=Math.floor(this._offsets[a]*256);var h=this._sizes[a]*t,l=s>0?s:0,u=s<0?-s:0;n.fillStyle="rgba("+l+", "+u+", 0, 1)",n.fillRect(0,o>>0,t,h+1>>0),o+=h}r.baseTexture.update(),this.uniforms.displacementMap=r},Object.defineProperty(i.prototype,"sizes",{get:function(){return this._sizes},set:function(t){for(var r=Math.min(this._slices,t.length),n=0;n<r;n++)this._sizes[n]=t[n]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offsets",{get:function(){return this._offsets},set:function(t){for(var r=Math.min(this._slices,t.length),n=0;n<r;n++)this._offsets[n]=t[n]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"slices",{get:function(){return this._slices},set:function(t){this._slices!==t&&(this._slices=t,this.uniforms.slices=t,this._sizes=this.uniforms.slicesWidth=new Float32Array(t),this._offsets=this.uniforms.slicesOffset=new Float32Array(t),this.refresh())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"direction",{get:function(){return this._direction},set:function(t){if(this._direction!==t){this._direction=t;var r=t*yi;this.uniforms.sinDir=Math.sin(r),this.uniforms.cosDir=Math.cos(r)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"red",{get:function(){return this.uniforms.red},set:function(t){this.uniforms.red=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"green",{get:function(){return this.uniforms.green},set:function(t){this.uniforms.green=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blue",{get:function(){return this.uniforms.blue},set:function(t){this.uniforms.blue=t},enumerable:!1,configurable:!0}),i.prototype.destroy=function(){var t;(t=this.texture)===null||t===void 0||t.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null},i.defaults={slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},i.TRANSPARENT=0,i.ORIGINAL=1,i.LOOP=2,i.CLAMP=3,i.MIRROR=4,i})(Ht);/*!
 * @pixi/filter-glow - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-glow is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Lf=function(e,i){return Lf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Lf(e,i)};function EU(e,i){Lf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var bU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,wU=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

uniform float outerStrength;
uniform float innerStrength;

uniform vec4 glowColor;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform bool knockout;

const float PI = 3.14159265358979323846264;

const float DIST = __DIST__;
const float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);
const float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);

const float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;

void main(void) {
    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);

    float totalAlpha = 0.0;

    vec2 direction;
    vec2 displaced;
    vec4 curColor;

    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {
       direction = vec2(cos(angle), sin(angle)) * px;

       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {
           displaced = clamp(vTextureCoord + direction * 
                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);

           curColor = texture2D(uSampler, displaced);

           totalAlpha += (DIST - curDistance) * curColor.a;
       }
    }
    
    curColor = texture2D(uSampler, vTextureCoord);

    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);

    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;
    float innerGlowStrength = min(1.0, innerGlowAlpha);
    
    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);

    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);
    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);

    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;
    
    if (knockout) {
      float resultAlpha = outerGlowAlpha + innerGlowAlpha;
      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);
    }
    else {
      gl_FragColor = innerColor + outerGlowColor;
    }
}
`;(function(e){EU(i,e);function i(t){var r=this,n=Object.assign({},i.defaults,t),s=n.outerStrength,o=n.innerStrength,a=n.color,h=n.knockout,l=n.quality,u=Math.round(n.distance);return r=e.call(this,bU,wU.replace(/__ANGLE_STEP_SIZE__/gi,""+(1/l/u).toFixed(7)).replace(/__DIST__/gi,u.toFixed(0)+".0"))||this,r.uniforms.glowColor=new Float32Array([0,0,0,1]),Object.assign(r,{color:a,outerStrength:s,innerStrength:o,padding:u,knockout:h}),r}return Object.defineProperty(i.prototype,"color",{get:function(){return Ci(this.uniforms.glowColor)},set:function(t){Re(t,this.uniforms.glowColor)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"outerStrength",{get:function(){return this.uniforms.outerStrength},set:function(t){this.uniforms.outerStrength=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"innerStrength",{get:function(){return this.uniforms.innerStrength},set:function(t){this.uniforms.innerStrength=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"knockout",{get:function(){return this.uniforms.knockout},set:function(t){this.uniforms.knockout=t},enumerable:!1,configurable:!0}),i.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1},i})(Ht);/*!
 * @pixi/filter-godray - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-godray is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Mf=function(e,i){return Mf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Mf(e,i)};function TU(e,i){Mf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var BU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,RU=`vec3 mod289(vec3 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 mod289(vec4 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 permute(vec4 x)
{
    return mod289(((x * 34.0) + 1.0) * x);
}
vec4 taylorInvSqrt(vec4 r)
{
    return 1.79284291400159 - 0.85373472095314 * r;
}
vec3 fade(vec3 t)
{
    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);
}
// Classic Perlin noise, periodic variant
float pnoise(vec3 P, vec3 rep)
{
    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period
    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); // Fractional part for interpolation
    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;
    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;
    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);
    vec3 fade_xyz = fade(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}
float turb(vec3 P, vec3 rep, float lacunarity, float gain)
{
    float sum = 0.0;
    float sc = 1.0;
    float totalgain = 1.0;
    for (float i = 0.0; i < 6.0; i++)
    {
        sum += totalgain * pnoise(P * sc, rep);
        sc *= lacunarity;
        totalgain *= gain;
    }
    return abs(sum);
}
`,PU=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform vec2 light;
uniform bool parallel;
uniform float aspect;

uniform float gain;
uniform float lacunarity;
uniform float time;
uniform float alpha;

\${perlin}

void main(void) {
    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    float d;

    if (parallel) {
        float _cos = light.x;
        float _sin = light.y;
        d = (_cos * coord.x) + (_sin * coord.y * aspect);
    } else {
        float dx = coord.x - light.x / dimensions.x;
        float dy = (coord.y - light.y / dimensions.y) * aspect;
        float dis = sqrt(dx * dx + dy * dy) + 0.00001;
        d = dy / dis;
    }

    vec3 dir = vec3(d, d, 0.0);

    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);
    noise = mix(noise, 0.0, 0.3);
    //fade vertically.
    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);
    mist.a = 1.0;
    // apply user alpha
    mist *= alpha;

    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;

}
`;(function(e){TU(i,e);function i(t){var r=e.call(this,BU,PU.replace("${perlin}",RU))||this;r.parallel=!0,r.time=0,r._angle=0,r.uniforms.dimensions=new Float32Array(2);var n=Object.assign(i.defaults,t);return r._angleLight=new M,r.angle=n.angle,r.gain=n.gain,r.lacunarity=n.lacunarity,r.alpha=n.alpha,r.parallel=n.parallel,r.center=n.center,r.time=n.time,r}return i.prototype.apply=function(t,r,n,s){var o=r.filterFrame,a=o.width,h=o.height;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=a,this.uniforms.dimensions[1]=h,this.uniforms.aspect=h/a,this.uniforms.time=this.time,this.uniforms.alpha=this.alpha,t.applyFilter(this,r,n,s)},Object.defineProperty(i.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t;var r=t*yi;this._angleLight.x=Math.cos(r),this._angleLight.y=Math.sin(r)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"gain",{get:function(){return this.uniforms.gain},set:function(t){this.uniforms.gain=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lacunarity",{get:function(){return this.uniforms.lacunarity},set:function(t){this.uniforms.lacunarity=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this.uniforms.alpha},set:function(t){this.uniforms.alpha=t},enumerable:!1,configurable:!0}),i.defaults={angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0],alpha:1},i})(Ht);/*!
 * @pixi/filter-motion-blur - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-motion-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Qf=function(e,i){return Qf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Qf(e,i)};function SU(e,i){Qf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var NU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,OU=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uVelocity;
uniform int uKernelSize;
uniform float uOffset;

const int MAX_KERNEL_SIZE = 2048;

// Notice:
// the perfect way:
//    int kernelSize = min(uKernelSize, MAX_KERNELSIZE);
// BUT in real use-case , uKernelSize < MAX_KERNELSIZE almost always.
// So use uKernelSize directly.

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    if (uKernelSize == 0)
    {
        gl_FragColor = color;
        return;
    }

    vec2 velocity = uVelocity / filterArea.xy;
    float offset = -uOffset / length(uVelocity) - 0.5;
    int k = uKernelSize - 1;

    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {
        if (i == k) {
            break;
        }
        vec2 bias = velocity * (float(i) / float(k) + offset);
        color += texture2D(uSampler, vTextureCoord + bias);
    }
    gl_FragColor = color / float(uKernelSize);
}
`;(function(e){SU(i,e);function i(t,r,n){t===void 0&&(t=[0,0]),r===void 0&&(r=5),n===void 0&&(n=0);var s=e.call(this,NU,OU)||this;return s.kernelSize=5,s.uniforms.uVelocity=new Float32Array(2),s._velocity=new mr(s.velocityChanged,s),s.setVelocity(t),s.kernelSize=r,s.offset=n,s}return i.prototype.apply=function(t,r,n,s){var o=this.velocity,a=o.x,h=o.y;this.uniforms.uKernelSize=a!==0||h!==0?this.kernelSize:0,t.applyFilter(this,r,n,s)},Object.defineProperty(i.prototype,"velocity",{get:function(){return this._velocity},set:function(t){this.setVelocity(t)},enumerable:!1,configurable:!0}),i.prototype.setVelocity=function(t){if(Array.isArray(t)){var r=t[0],n=t[1];this._velocity.set(r,n)}else this._velocity.copyFrom(t)},i.prototype.velocityChanged=function(){this.uniforms.uVelocity[0]=this._velocity.x,this.uniforms.uVelocity[1]=this._velocity.y,this.padding=(Math.max(Math.abs(this._velocity.x),Math.abs(this._velocity.y))>>0)+1},Object.defineProperty(i.prototype,"offset",{get:function(){return this.uniforms.uOffset},set:function(t){this.uniforms.uOffset=t},enumerable:!1,configurable:!0}),i})(Ht);/*!
 * @pixi/filter-multi-color-replace - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-multi-color-replace is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Uf=function(e,i){return Uf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Uf(e,i)};function DU(e,i){Uf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var FU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,LU=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform float epsilon;

const int MAX_COLORS = %maxColors%;

uniform vec3 originalColors[MAX_COLORS];
uniform vec3 targetColors[MAX_COLORS];

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);

    float alpha = gl_FragColor.a;
    if (alpha < 0.0001)
    {
      return;
    }

    vec3 color = gl_FragColor.rgb / alpha;

    for(int i = 0; i < MAX_COLORS; i++)
    {
      vec3 origColor = originalColors[i];
      if (origColor.r < 0.0)
      {
        break;
      }
      vec3 colorDiff = origColor - color;
      if (length(colorDiff) < epsilon)
      {
        vec3 targetColor = targetColors[i];
        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);
        return;
      }
    }
}
`;(function(e){DU(i,e);function i(t,r,n){r===void 0&&(r=.05),n===void 0&&(n=t.length);var s=e.call(this,FU,LU.replace(/%maxColors%/g,n.toFixed(0)))||this;return s._replacements=[],s._maxColors=0,s.epsilon=r,s._maxColors=n,s.uniforms.originalColors=new Float32Array(n*3),s.uniforms.targetColors=new Float32Array(n*3),s.replacements=t,s}return Object.defineProperty(i.prototype,"replacements",{get:function(){return this._replacements},set:function(t){var r=this.uniforms.originalColors,n=this.uniforms.targetColors,s=t.length;if(s>this._maxColors)throw new Error("Length of replacements ("+s+") exceeds the maximum colors length ("+this._maxColors+")");r[s*3]=-1;for(var o=0;o<s;o++){var a=t[o],h=a[0];typeof h=="number"?h=Re(h):a[0]=Ci(h),r[o*3]=h[0],r[o*3+1]=h[1],r[o*3+2]=h[2];var l=a[1];typeof l=="number"?l=Re(l):a[1]=Ci(l),n[o*3]=l[0],n[o*3+1]=l[1],n[o*3+2]=l[2]}this._replacements=t},enumerable:!1,configurable:!0}),i.prototype.refresh=function(){this.replacements=this._replacements},Object.defineProperty(i.prototype,"maxColors",{get:function(){return this._maxColors},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"epsilon",{get:function(){return this.uniforms.epsilon},set:function(t){this.uniforms.epsilon=t},enumerable:!1,configurable:!0}),i})(Ht);/*!
 * @pixi/filter-old-film - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-old-film is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Gf=function(e,i){return Gf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Gf(e,i)};function MU(e,i){Gf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var QU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,UU=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform float sepia;
uniform float noise;
uniform float noiseSize;
uniform float scratch;
uniform float scratchDensity;
uniform float scratchWidth;
uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;
uniform float seed;

const float SQRT_2 = 1.414213;
const vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

vec3 Overlay(vec3 src, vec3 dst)
{
    // if (dst <= 0.5) then: 2 * src * dst
    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)
    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),
                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),
                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));
}


void main()
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 color = gl_FragColor.rgb;

    if (sepia > 0.0)
    {
        float gray = (color.x + color.y + color.z) / 3.0;
        vec3 grayscale = vec3(gray);

        color = Overlay(SEPIA_RGB, grayscale);

        color = grayscale + sepia * (color - grayscale);
    }

    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        vec2 dir = vec2(vec2(0.5, 0.5) - coord);
        dir.y *= dimensions.y / dimensions.x;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    if (scratchDensity > seed && scratch != 0.0)
    {
        float phase = seed * 256.0;
        float s = mod(floor(phase), 2.0);
        float dist = 1.0 / scratchDensity;
        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));
        if (d < seed * 0.6 + 0.4)
        {
            highp float period = scratchDensity * 10.0;

            float xx = coord.x * period + phase;
            float aa = abs(mod(xx, 0.5) * 4.0);
            float bb = mod(floor(xx / 0.5), 2.0);
            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);

            float kk = 2.0 * period;
            float dw = scratchWidth / dimensions.x * (0.75 + seed);
            float dh = dw * kk;

            float tine = (yy - (2.0 - dh));

            if (tine > 0.0) {
                float _sign = sign(scratch);

                tine = s * tine / period + scratch + 0.1;
                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);

                color.rgb *= tine;
            }
        }
    }

    if (noise > 0.0 && noiseSize > 0.0)
    {
        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);
        // float _noise = snoise(d) * 0.5;
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        color += _noise * noise;
    }

    gl_FragColor.rgb = color;
}
`;(function(e){MU(i,e);function i(t,r){r===void 0&&(r=0);var n=e.call(this,QU,UU)||this;return n.seed=0,n.uniforms.dimensions=new Float32Array(2),typeof t=="number"?(n.seed=t,t=void 0):n.seed=r,Object.assign(n,i.defaults,t),n}return i.prototype.apply=function(t,r,n,s){var o,a;this.uniforms.dimensions[0]=(o=r.filterFrame)===null||o===void 0?void 0:o.width,this.uniforms.dimensions[1]=(a=r.filterFrame)===null||a===void 0?void 0:a.height,this.uniforms.seed=this.seed,t.applyFilter(this,r,n,s)},Object.defineProperty(i.prototype,"sepia",{get:function(){return this.uniforms.sepia},set:function(t){this.uniforms.sepia=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"noise",{get:function(){return this.uniforms.noise},set:function(t){this.uniforms.noise=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"noiseSize",{get:function(){return this.uniforms.noiseSize},set:function(t){this.uniforms.noiseSize=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scratch",{get:function(){return this.uniforms.scratch},set:function(t){this.uniforms.scratch=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scratchDensity",{get:function(){return this.uniforms.scratchDensity},set:function(t){this.uniforms.scratchDensity=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scratchWidth",{get:function(){return this.uniforms.scratchWidth},set:function(t){this.uniforms.scratchWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vignetting",{get:function(){return this.uniforms.vignetting},set:function(t){this.uniforms.vignetting=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vignettingAlpha",{get:function(){return this.uniforms.vignettingAlpha},set:function(t){this.uniforms.vignettingAlpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vignettingBlur",{get:function(){return this.uniforms.vignettingBlur},set:function(t){this.uniforms.vignettingBlur=t},enumerable:!1,configurable:!0}),i.defaults={sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3},i})(Ht);/*!
 * @pixi/filter-outline - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-outline is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var kf=function(e,i){return kf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},kf(e,i)};function GU(e,i){kf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var kU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,HU=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 thickness;
uniform vec4 outlineColor;
uniform vec4 filterClamp;

const float DOUBLE_PI = 3.14159265358979323846264 * 2.;

void main(void) {
    vec4 ownColor = texture2D(uSampler, vTextureCoord);
    vec4 curColor;
    float maxAlpha = 0.;
    vec2 displaced;
    for (float angle = 0.; angle <= DOUBLE_PI; angle += \${angleStep}) {
        displaced.x = vTextureCoord.x + thickness.x * cos(angle);
        displaced.y = vTextureCoord.y + thickness.y * sin(angle);
        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));
        maxAlpha = max(maxAlpha, curColor.a);
    }
    float resultAlpha = max(maxAlpha, ownColor.a);
    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);
}
`;(function(e){GU(i,e);function i(t,r,n){t===void 0&&(t=1),r===void 0&&(r=0),n===void 0&&(n=.1);var s=e.call(this,kU,HU.replace(/\$\{angleStep\}/,i.getAngleStep(n)))||this;return s._thickness=1,s.uniforms.thickness=new Float32Array([0,0]),s.uniforms.outlineColor=new Float32Array([0,0,0,1]),Object.assign(s,{thickness:t,color:r,quality:n}),s}return i.getAngleStep=function(t){var r=Math.max(t*i.MAX_SAMPLES,i.MIN_SAMPLES);return(Math.PI*2/r).toFixed(7)},i.prototype.apply=function(t,r,n,s){this.uniforms.thickness[0]=this._thickness/r._frame.width,this.uniforms.thickness[1]=this._thickness/r._frame.height,t.applyFilter(this,r,n,s)},Object.defineProperty(i.prototype,"color",{get:function(){return Ci(this.uniforms.outlineColor)},set:function(t){Re(t,this.uniforms.outlineColor)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"thickness",{get:function(){return this._thickness},set:function(t){this._thickness=t,this.padding=t},enumerable:!1,configurable:!0}),i.MIN_SAMPLES=1,i.MAX_SAMPLES=100,i})(Ht);/*!
 * @pixi/filter-pixelate - v4.1.3
 * Compiled Thu, 17 Jun 2021 19:33:56 UTC
 *
 * @pixi/filter-pixelate is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Hf=function(e,i){return Hf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Hf(e,i)};function XU(e,i){Hf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var YU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,VU=`precision mediump float;

varying vec2 vTextureCoord;

uniform vec2 size;
uniform sampler2D uSampler;

uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 pixelate(vec2 coord, vec2 size)
{
	return floor( coord / size ) * size;
}

void main(void)
{
    vec2 coord = mapCoord(vTextureCoord);

    coord = pixelate(coord, size);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord);
}
`;(function(e){XU(i,e);function i(t){t===void 0&&(t=10);var r=e.call(this,YU,VU)||this;return r.size=t,r}return Object.defineProperty(i.prototype,"size",{get:function(){return this.uniforms.size},set:function(t){typeof t=="number"&&(t=[t,t]),this.uniforms.size=t},enumerable:!1,configurable:!0}),i})(Ht);/*!
 * @pixi/filter-radial-blur - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-radial-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Xf=function(e,i){return Xf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Xf(e,i)};function zU(e,i){Xf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var WU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,jU=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform float uRadian;
uniform vec2 uCenter;
uniform float uRadius;
uniform int uKernelSize;

const int MAX_KERNEL_SIZE = 2048;

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    if (uKernelSize == 0)
    {
        gl_FragColor = color;
        return;
    }

    float aspect = filterArea.y / filterArea.x;
    vec2 center = uCenter.xy / filterArea.xy;
    float gradient = uRadius / filterArea.x * 0.3;
    float radius = uRadius / filterArea.x - gradient * 0.5;
    int k = uKernelSize - 1;

    vec2 coord = vTextureCoord;
    vec2 dir = vec2(center - coord);
    float dist = length(vec2(dir.x, dir.y * aspect));

    float radianStep = uRadian;
    if (radius >= 0.0 && dist > radius) {
        float delta = dist - radius;
        float gap = gradient;
        float scale = 1.0 - abs(delta / gap);
        if (scale <= 0.0) {
            gl_FragColor = color;
            return;
        }
        radianStep *= scale;
    }
    radianStep /= float(k);

    float s = sin(radianStep);
    float c = cos(radianStep);
    mat2 rotationMatrix = mat2(vec2(c, -s), vec2(s, c));

    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {
        if (i == k) {
            break;
        }

        coord -= center;
        coord.y *= aspect;
        coord = rotationMatrix * coord;
        coord.y /= aspect;
        coord += center;

        vec4 sample = texture2D(uSampler, coord);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample;
    }

    gl_FragColor = color / float(uKernelSize);
}
`;(function(e){zU(i,e);function i(t,r,n,s){t===void 0&&(t=0),r===void 0&&(r=[0,0]),n===void 0&&(n=5),s===void 0&&(s=-1);var o=e.call(this,WU,jU)||this;return o._angle=0,o.angle=t,o.center=r,o.kernelSize=n,o.radius=s,o}return i.prototype.apply=function(t,r,n,s){this.uniforms.uKernelSize=this._angle!==0?this.kernelSize:0,t.applyFilter(this,r,n,s)},Object.defineProperty(i.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this.uniforms.uRadian=t*Math.PI/180},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"center",{get:function(){return this.uniforms.uCenter},set:function(t){this.uniforms.uCenter=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"radius",{get:function(){return this.uniforms.uRadius},set:function(t){(t<0||t===1/0)&&(t=-1),this.uniforms.uRadius=t},enumerable:!1,configurable:!0}),i})(Ht);/*!
 * @pixi/filter-reflection - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-reflection is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Yf=function(e,i){return Yf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Yf(e,i)};function KU(e,i){Yf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var $U=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,JU=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

uniform bool mirror;
uniform float boundary;
uniform vec2 amplitude;
uniform vec2 waveLength;
uniform vec2 alpha;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 coord = pixelCoord / dimensions;

    if (coord.y < boundary) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    float k = (coord.y - boundary) / (1. - boundary + 0.0001);
    float areaY = boundary * dimensions.y / filterArea.y;
    float v = areaY + areaY - vTextureCoord.y;
    float y = mirror ? v : vTextureCoord.y;

    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;
    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;
    float _alpha = (alpha.y - alpha.x) * k + alpha.x;

    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;
    x = clamp(x, filterClamp.x, filterClamp.z);

    vec4 color = texture2D(uSampler, vec2(x, y));

    gl_FragColor = color * _alpha;
}
`;(function(e){KU(i,e);function i(t){var r=e.call(this,$U,JU)||this;return r.time=0,r.uniforms.amplitude=new Float32Array(2),r.uniforms.waveLength=new Float32Array(2),r.uniforms.alpha=new Float32Array(2),r.uniforms.dimensions=new Float32Array(2),Object.assign(r,i.defaults,t),r}return i.prototype.apply=function(t,r,n,s){var o,a;this.uniforms.dimensions[0]=(o=r.filterFrame)===null||o===void 0?void 0:o.width,this.uniforms.dimensions[1]=(a=r.filterFrame)===null||a===void 0?void 0:a.height,this.uniforms.time=this.time,t.applyFilter(this,r,n,s)},Object.defineProperty(i.prototype,"mirror",{get:function(){return this.uniforms.mirror},set:function(t){this.uniforms.mirror=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"boundary",{get:function(){return this.uniforms.boundary},set:function(t){this.uniforms.boundary=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"amplitude",{get:function(){return this.uniforms.amplitude},set:function(t){this.uniforms.amplitude[0]=t[0],this.uniforms.amplitude[1]=t[1]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"waveLength",{get:function(){return this.uniforms.waveLength},set:function(t){this.uniforms.waveLength[0]=t[0],this.uniforms.waveLength[1]=t[1]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this.uniforms.alpha},set:function(t){this.uniforms.alpha[0]=t[0],this.uniforms.alpha[1]=t[1]},enumerable:!1,configurable:!0}),i.defaults={mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0},i})(Ht);/*!
 * @pixi/filter-rgb-split - v4.1.3
 * Compiled Thu, 17 Jun 2021 19:33:56 UTC
 *
 * @pixi/filter-rgb-split is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Vf=function(e,i){return Vf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Vf(e,i)};function qU(e,i){Vf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var ZU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,tG=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

void main(void)
{
   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;
   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;
   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;
   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;
}
`;(function(e){qU(i,e);function i(t,r,n){t===void 0&&(t=[-10,0]),r===void 0&&(r=[0,10]),n===void 0&&(n=[0,0]);var s=e.call(this,ZU,tG)||this;return s.red=t,s.green=r,s.blue=n,s}return Object.defineProperty(i.prototype,"red",{get:function(){return this.uniforms.red},set:function(t){this.uniforms.red=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"green",{get:function(){return this.uniforms.green},set:function(t){this.uniforms.green=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blue",{get:function(){return this.uniforms.blue},set:function(t){this.uniforms.blue=t},enumerable:!1,configurable:!0}),i})(Ht);/*!
 * @pixi/filter-shockwave - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-shockwave is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zf=function(e,i){return zf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},zf(e,i)};function eG(e,i){zf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var iG=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,rG=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec4 filterClamp;

uniform vec2 center;

uniform float amplitude;
uniform float wavelength;
// uniform float power;
uniform float brightness;
uniform float speed;
uniform float radius;

uniform float time;

const float PI = 3.14159;

void main()
{
    float halfWavelength = wavelength * 0.5 / filterArea.x;
    float maxRadius = radius / filterArea.x;
    float currentRadius = time * speed / filterArea.x;

    float fade = 1.0;

    if (maxRadius > 0.0) {
        if (currentRadius > maxRadius) {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);
    }

    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);
    dir.y *= filterArea.y / filterArea.x;
    float dist = length(dir);

    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    vec2 diffUV = normalize(dir);

    float diff = (dist - currentRadius) / halfWavelength;

    float p = 1.0 - pow(abs(diff), 2.0);

    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );
    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );

    vec2 offset = diffUV * powDiff / filterArea.xy;

    // Do clamp :
    vec2 coord = vTextureCoord + offset;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    // No clamp :
    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);

    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;

    gl_FragColor = color;
}
`;(function(e){eG(i,e);function i(t,r,n){t===void 0&&(t=[0,0]),n===void 0&&(n=0);var s=e.call(this,iG,rG)||this;return s.center=t,Object.assign(s,i.defaults,r),s.time=n,s}return i.prototype.apply=function(t,r,n,s){this.uniforms.time=this.time,t.applyFilter(this,r,n,s)},Object.defineProperty(i.prototype,"center",{get:function(){return this.uniforms.center},set:function(t){this.uniforms.center=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"amplitude",{get:function(){return this.uniforms.amplitude},set:function(t){this.uniforms.amplitude=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wavelength",{get:function(){return this.uniforms.wavelength},set:function(t){this.uniforms.wavelength=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"brightness",{get:function(){return this.uniforms.brightness},set:function(t){this.uniforms.brightness=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"speed",{get:function(){return this.uniforms.speed},set:function(t){this.uniforms.speed=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(t){this.uniforms.radius=t},enumerable:!1,configurable:!0}),i.defaults={amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1},i})(Ht);/*!
 * @pixi/filter-simple-lightmap - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-simple-lightmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Wf=function(e,i){return Wf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Wf(e,i)};function nG(e,i){Wf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var sG=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,oG=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform sampler2D uLightmap;
uniform vec4 filterArea;
uniform vec2 dimensions;
uniform vec4 ambientColor;
void main() {
    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);
    vec2 lightCoord = (vTextureCoord * filterArea.xy) / dimensions;
    vec4 light = texture2D(uLightmap, lightCoord);
    vec3 ambient = ambientColor.rgb * ambientColor.a;
    vec3 intensity = ambient + light.rgb;
    vec3 finalColor = diffuseColor.rgb * intensity;
    gl_FragColor = vec4(finalColor, diffuseColor.a);
}
`;(function(e){nG(i,e);function i(t,r,n){r===void 0&&(r=0),n===void 0&&(n=1);var s=e.call(this,sG,oG)||this;return s._color=0,s.uniforms.dimensions=new Float32Array(2),s.uniforms.ambientColor=new Float32Array([0,0,0,n]),s.texture=t,s.color=r,s}return i.prototype.apply=function(t,r,n,s){var o,a;this.uniforms.dimensions[0]=(o=r.filterFrame)===null||o===void 0?void 0:o.width,this.uniforms.dimensions[1]=(a=r.filterFrame)===null||a===void 0?void 0:a.height,t.applyFilter(this,r,n,s)},Object.defineProperty(i.prototype,"texture",{get:function(){return this.uniforms.uLightmap},set:function(t){this.uniforms.uLightmap=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this._color},set:function(t){var r=this.uniforms.ambientColor;typeof t=="number"?(Re(t,r),this._color=t):(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],this._color=Ci(r))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this.uniforms.ambientColor[3]},set:function(t){this.uniforms.ambientColor[3]=t},enumerable:!1,configurable:!0}),i})(Ht);/*!
 * @pixi/filter-tilt-shift - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-tilt-shift is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jf=function(e,i){return jf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},jf(e,i)};function Gl(e,i){jf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var aG=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,hG=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float blur;
uniform float gradientBlur;
uniform vec2 start;
uniform vec2 end;
uniform vec2 delta;
uniform vec2 texSize;

float random(vec3 scale, float seed)
{
    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
}

void main(void)
{
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);
    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));
    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;

    for (float t = -30.0; t <= 30.0; t++)
    {
        float percent = (t + offset - 0.5) / 30.0;
        float weight = 1.0 - abs(percent);
        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);
        sample.rgb *= sample.a;
        color += sample * weight;
        total += weight;
    }

    color /= total;
    color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`,a_=function(e){Gl(i,e);function i(t,r,n,s){t===void 0&&(t=100),r===void 0&&(r=600);var o=e.call(this,aG,hG)||this;return o.uniforms.blur=t,o.uniforms.gradientBlur=r,o.uniforms.start=n||new M(0,window.innerHeight/2),o.uniforms.end=s||new M(600,window.innerHeight/2),o.uniforms.delta=new M(30,30),o.uniforms.texSize=new M(window.innerWidth,window.innerHeight),o.updateDelta(),o}return i.prototype.updateDelta=function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0},Object.defineProperty(i.prototype,"blur",{get:function(){return this.uniforms.blur},set:function(t){this.uniforms.blur=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"gradientBlur",{get:function(){return this.uniforms.gradientBlur},set:function(t){this.uniforms.gradientBlur=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"start",{get:function(){return this.uniforms.start},set:function(t){this.uniforms.start=t,this.updateDelta()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"end",{get:function(){return this.uniforms.end},set:function(t){this.uniforms.end=t,this.updateDelta()},enumerable:!1,configurable:!0}),i}(Ht),lG=function(e){Gl(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.updateDelta=function(){var t=this.uniforms.end.x-this.uniforms.start.x,r=this.uniforms.end.y-this.uniforms.start.y,n=Math.sqrt(t*t+r*r);this.uniforms.delta.x=t/n,this.uniforms.delta.y=r/n},i}(a_),uG=function(e){Gl(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.updateDelta=function(){var t=this.uniforms.end.x-this.uniforms.start.x,r=this.uniforms.end.y-this.uniforms.start.y,n=Math.sqrt(t*t+r*r);this.uniforms.delta.x=-r/n,this.uniforms.delta.y=t/n},i}(a_);(function(e){Gl(i,e);function i(t,r,n,s){t===void 0&&(t=100),r===void 0&&(r=600);var o=e.call(this)||this;return o.tiltShiftXFilter=new lG(t,r,n,s),o.tiltShiftYFilter=new uG(t,r,n,s),o}return i.prototype.apply=function(t,r,n,s){var o=t.getFilterTexture();this.tiltShiftXFilter.apply(t,r,o,1),this.tiltShiftYFilter.apply(t,o,n,s),t.returnFilterTexture(o)},Object.defineProperty(i.prototype,"blur",{get:function(){return this.tiltShiftXFilter.blur},set:function(t){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"gradientBlur",{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(t){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"start",{get:function(){return this.tiltShiftXFilter.start},set:function(t){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"end",{get:function(){return this.tiltShiftXFilter.end},set:function(t){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=t},enumerable:!1,configurable:!0}),i})(Ht);/*!
 * @pixi/filter-twist - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-twist is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Kf=function(e,i){return Kf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Kf(e,i)};function cG(e,i){Kf(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var fG=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,dG=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float radius;
uniform float angle;
uniform vec2 offset;
uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 twist(vec2 coord)
{
    coord -= offset;

    float dist = length(coord);

    if (dist < radius)
    {
        float ratioDist = (radius - dist) / radius;
        float angleMod = ratioDist * ratioDist * angle;
        float s = sin(angleMod);
        float c = cos(angleMod);
        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);
    }

    coord += offset;

    return coord;
}

void main(void)
{

    vec2 coord = mapCoord(vTextureCoord);

    coord = twist(coord);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord );

}
`;(function(e){cG(i,e);function i(t){var r=e.call(this,fG,dG)||this;return Object.assign(r,i.defaults,t),r}return Object.defineProperty(i.prototype,"offset",{get:function(){return this.uniforms.offset},set:function(t){this.uniforms.offset=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(t){this.uniforms.radius=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"angle",{get:function(){return this.uniforms.angle},set:function(t){this.uniforms.angle=t},enumerable:!1,configurable:!0}),i.defaults={radius:200,angle:4,padding:20,offset:new M},i})(Ht);/*!
 * @pixi/filter-zoom-blur - v4.1.5
 * Compiled Wed, 29 Sep 2021 14:05:57 UTC
 *
 * @pixi/filter-zoom-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $f=function(e,i){return $f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},$f(e,i)};function AG(e,i){$f(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}function pG(e,i){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&i.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)i.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(t[r[n]]=e[r[n]]);return t}var gG=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,vG=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uCenter;
uniform float uStrength;
uniform float uInnerRadius;
uniform float uRadius;

const float MAX_KERNEL_SIZE = \${maxKernelSize};

// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/
highp float rand(vec2 co, float seed) {
    const highp float a = 12.9898, b = 78.233, c = 43758.5453;
    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);
    return fract(sin(sn) * c + seed);
}

void main() {

    float minGradient = uInnerRadius * 0.3;
    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;

    float gradient = uRadius * 0.3;
    float radius = (uRadius - gradient * 0.5) / filterArea.x;

    float countLimit = MAX_KERNEL_SIZE;

    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);
    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));

    float strength = uStrength;

    float delta = 0.0;
    float gap;
    if (dist < innerRadius) {
        delta = innerRadius - dist;
        gap = minGradient;
    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity
        delta = dist - radius;
        gap = gradient;
    }

    if (delta > 0.0) {
        float normalCount = gap / filterArea.x;
        delta = (normalCount - delta) / normalCount;
        countLimit *= delta;
        strength *= delta;
        if (countLimit < 1.0)
        {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
    }

    // randomize the lookup values to hide the fixed number of samples
    float offset = rand(vTextureCoord, 0.0);

    float total = 0.0;
    vec4 color = vec4(0.0);

    dir *= strength;

    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {
        float percent = (t + offset) / MAX_KERNEL_SIZE;
        float weight = 4.0 * (percent - percent * percent);
        vec2 p = vTextureCoord + dir * percent;
        vec4 sample = texture2D(uSampler, p);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample * weight;
        total += weight;

        if (t > countLimit){
            break;
        }
    }

    color /= total;
    // switch back from pre-multiplied alpha
    // color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`;(function(e){AG(i,e);function i(t){var r=this,n=Object.assign(i.defaults,t),s=n.maxKernelSize,o=pG(n,["maxKernelSize"]);return r=e.call(this,gG,vG.replace("${maxKernelSize}",s.toFixed(1)))||this,Object.assign(r,o),r}return Object.defineProperty(i.prototype,"center",{get:function(){return this.uniforms.uCenter},set:function(t){this.uniforms.uCenter=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"strength",{get:function(){return this.uniforms.uStrength},set:function(t){this.uniforms.uStrength=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"innerRadius",{get:function(){return this.uniforms.uInnerRadius},set:function(t){this.uniforms.uInnerRadius=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"radius",{get:function(){return this.uniforms.uRadius},set:function(t){(t<0||t===1/0)&&(t=-1),this.uniforms.uRadius=t},enumerable:!1,configurable:!0}),i.defaults={strength:.1,center:[0,0],innerRadius:0,radius:-1,maxKernelSize:32},i})(Ht);function yG(e,i,t,r){const n=new ImageData(e.slice(),i,t),s=h_(n);r[0]>r[1]&&(r=r.sort((a,h)=>a-h));const o=r[1]-r[0];for(let a=0;a<s.length;a++)s[a]=o===0?r[0]:(s[a]-r[0])/o*255>>0;for(let a=0;a<s.length;a++){const h=a*4;n.data[h]=s[a],n.data[h+1]=s[a],n.data[h+2]=s[a]}return n}function mG(e,i,t,r){const n=new ImageData(e.slice(),i,t),s=h_(n);r<50?(r=Math.abs((50-r)/2),l_(s,i,t,r,Math.sqrt(r))):r>50&&(r=Math.abs(r-50),CG(s,i,t,r,0,60));for(let o=0;o<s.length;o++){const a=o*4;n.data[a]=s[o],n.data[a+1]=n.data[a],n.data[a+2]=n.data[a]}return n}function IG(e,i,t){const r=new ImageData(e.slice(),i,t);for(let n=0;n<r.data.length;n+=4)r.data[n]=255-r.data[n],r.data[n+1]=255-r.data[n+1],r.data[n+2]=255-r.data[n+2];return r}function h_(e){const i=[];for(let t=0;t<e.data.length;t+=4){const r=t,n=e.data[r]*.299+e.data[r+1]*.587+e.data[r+2]*.114>>0;i.push(n)}return i}function l_(e,i,t,r,n){const s=[];let o=0;r=Math.floor(r)||3,n=n||r/3;const a=1/(Math.sqrt(2*Math.PI)*n),h=-1/(2*n*n);for(let l=0,u=-r;u<=r;u++,l++){const c=a*Math.exp(h*u*u);s[l]=c,o+=c}for(let l=0;l<s.length;l++)s[l]/=o;for(let l=0;l<t;l++)for(let u=0;u<i;u++){let c=0;o=0;for(let f=-r;f<=r;f++){const d=u+f;d>=0&&d<i&&(c+=e[l*i+d]*s[f+r],o+=s[f+r])}e[l*i+u]=Math.floor(c/o)}for(let l=0;l<i;l++)for(let u=0;u<t;u++){let c=0;o=0;for(let f=-r;f<=r;f++){const d=u+f;d>=0&&d<t&&(c+=e[d*i+l]*s[f+r],o+=s[f+r])}e[u*i+l]=Math.floor(c/o)}}function CG(e,i,t,r,n,s){const o=e.slice();l_(o,i,t,r,Math.sqrt(r));for(let a=0;a<e.length;a++){let h=e[a]-o[a];(h>n||h<-n)&&(h=e[a]+s*h/100,e[a]=h)}}function G0(e,i){return i*=4,{r:e[i],g:e[i+1],b:e[i+2],a:e[i+3]}}function _G(e,i){i*=4,e[i+3]=0}function xG(e,i,t){if(i.a===0)return!1;const r=e.r-i.r,n=e.g-i.g,s=e.b-i.b;return-t<r&&r<t&&-t<n&&n<t&&-t<s&&s<t}function EG(e,i,t,r,n,s){const o=[[-1,0],[1,0],[0,-1],[0,1]],a=i*n+r,h=G0(e,a),l=[{x:r,y:n}];for(;l.length>0;){const u=l.pop();_G(e,i*u.y+u.x);for(let c=0;c<o.length;c++){const f=u.x+o[c][0],d=u.y+o[c][1],A=i*d+f,p=G0(e,A);f>=0&&f<i&&d>=0&&d<t&&xG(h,p,s)&&l.push({x:f,y:d})}}}class Vi extends Ke{constructor(t,r){super();x(this,"isFill");x(this,"svgPath");x(this,"originBase64");x(this,"grayValue");x(this,"sharpness");x(this,"colorInverted");x(this,"filterList");x(this,"hasChangedAttrs");this.isFill=!0,this.type=Qt.BITMAP,this.interactive=!0,this.filters=[],this.filterList=[],this.hasChangedAttrs=[],this.grayValue=Zs.GRAY_VALUE,this.sharpness=Zs.SHARPNESS,this.colorInverted=Zs.COLOR_INVERTED,this.lockRatio=!0;let n=t;typeof n=="string"&&(n=new Image,n.src=t),this.setupTexture(n),r&&(super.parseJSON(r),this.setImageAttrs(r),this.texture.baseTexture.once("update",()=>{this.parseImageAttr(r)}),this.texture.update()),typeof t=="string"?this.originBase64=t:this.originBase64=vf(t)}get originTextureData(){const t=Symbol.for("originTextureData");return!this[t]&&this.updateOriginTexture(),this[t]}set originTextureData(t){const r=Symbol.for("originTextureData");this[r]=t}updateOriginDatasource(t,r){t=this.updateOriginTexture(t,r),this.updateOriginBase64(t)}updateOriginTexture(t,r){t||({canvas:t,ctx:r}=D0(this));const n=r.getImageData(0,0,t.width,t.height);return this.originTextureData=n,t}updateOriginBase64(t){this.originBase64=vf(t)}toJSON(t,r){const{texture:n=!1}=r||{},{width:s,height:o,filterList:a,grayValue:h,sharpness:l,colorInverted:u}=this;let c="";n&&(c=this.originBase64);const f=super.toJSON(t);return{base64:c,...f,width:s,height:o,isFill:this.isFill,filterList:a.slice(),grayValue:h.slice(),sharpness:l,colorInverted:u}}parseJSON(t){const{base64:r}=t;if(r){const{width:n,height:s}=t;this.width=n||this.width,this.height=s||this.height}if(super.parseJSON(t),t.base64&&t.base64!==this.originBase64){const n=new Image;n.src=t.base64,this.setupTexture(n);const s=!!this.originTextureData;this.setImageAttrs(t,s),this.texture.baseTexture.on("update",()=>{this.updateOriginDatasource(),this.parseImageAttr(t)}),this.texture.update()}else this.setImageAttrs(t),this.parseImageAttr(t)}setImageAttrs(t,r=!1){const{filterList:n,grayValue:s,sharpness:o,colorInverted:a}=t,h=ep(this.grayValue,s),l=s&&!h||Fe(o)&&this.sharpness!==o||P2(a)&&this.colorInverted!==a;(r||l)&&(this.hasChangedAttrs.push("imageData"),this.grayValue=s??this.grayValue,this.colorInverted=a??this.colorInverted,this.sharpness=o??this.sharpness);const u=n&&!ep(n,this.filterList);(r||u)&&(this.hasChangedAttrs.push("filter"),this.filterList=n)}parseImageAttr(t){const{filterList:r,grayValue:n,sharpness:s,colorInverted:o=this.colorInverted}=t;if(this.hasChangedAttrs.includes("imageData")){const a=[{name:"grayValue",value:n??this.grayValue},...o?[{name:"colorInverted",value:o}]:[],{name:"sharpness",value:s??this.sharpness}];this.updateImageTexture(a)}this.hasChangedAttrs.includes("filter")&&this.updateFilterList(r),this.hasChangedAttrs=[]}cloneWithoutCompress(t){const r=Vi.from(this.texture.clone()),n=this.toJSON(t||this.parent);r.parseJSON(n),r.filters=this.filters;const s=this.texture.width/this.texture.height,o=this.width/this.height;return o>s?(r.height=this.texture.height,r.width=this.texture.height*o):(r.width=this.texture.width,r.height=this.texture.width/o),r}updateFilterList(t){if(t.length===0){this.filters=[];return}this.filters=[],t.forEach(r=>{this[r]&&er(this[r])&&this[r]()})}updateImageTexture(t){const r={grayValue:yG,colorInverted:IG,sharpness:mG},{canvas:n,ctx:s}=D0(this);if(!this.originTextureData){const a=s.getImageData(0,0,n.width,n.height);this.originTextureData=a}let o=this.originTextureData;dQ(t)||t.forEach(({name:a,value:h})=>{o=r[a](o.data,n.width,n.height,h)}),s.putImageData(o,0,0),this.setupTexture(n),this.texture.update()}dot(){this.filters.push(new AU(1,0))}transformUpdate(){this.width=this.width,this.height=this.height}embedImage(t){this.x=t.x.baseVal.value,this.y=t.y.baseVal.value,this.width=t.width.baseVal.value,this.height=t.height.baseVal.value}setupTexture(t){t=CQ(t),this.texture=Ot.from(t)}hitTest(t){const r=this.texture.width,n=this.texture.height;if(t.x<0||t.x>r||t.y<0||t.y>n)return!1;const s=this.originTextureData;t.x=Math.round(t.x),t.y=Math.round(t.y);const o=(t.x+t.y*r)/(r*n),a=Math.round(s.data.length/4*o);return s.data[a*4+3]!==0}}const k0=new Map;async function H0(e){const i=new URL(e,document.baseURI),t=i.host+i.pathname;let r=k0.get(t);return r||(r=await fetch(i.toString()).then(n=>n.text()).then(n=>new DOMParser().parseFromString(n,"image/svg+xml").documentElement),k0.set(t,r)),r}class X0{constructor(i,t){x(this,"parent");x(this,"provider");this.parent=i,this.provider=t}get dirtyId(){return this.parent.dirtyId+this.provider.dirtyId}get fill(){return this.provider.fill!==null?this.provider.fill:this.parent.fill}get opacity(){return typeof this.provider.opacity=="number"?this.provider.opacity:this.parent.opacity}get stroke(){return this.provider.stroke!==null?this.provider.stroke:this.parent.stroke}get strokeDashArray(){return Array.isArray(this.provider.strokeDashArray)?this.provider.strokeDashArray:this.parent.strokeDashArray}get strokeDashOffset(){return typeof this.provider.strokeDashOffset=="number"?this.provider.strokeDashOffset:this.parent.strokeDashOffset}get strokeLineCap(){return typeof this.provider.strokeLineCap=="string"?this.provider.strokeLineCap:this.parent.strokeLineCap}get strokeLineJoin(){return typeof this.provider.strokeLineJoin=="string"?this.provider.strokeLineJoin:this.parent.strokeLineJoin}get strokeMiterLimit(){return typeof this.provider.strokeMiterLimit=="number"?this.provider.strokeMiterLimit:this.parent.strokeMiterLimit}get strokeWidth(){return typeof this.provider.strokeWidth=="number"?this.provider.strokeWidth:this.parent.strokeWidth}}function Nh(e){return Nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Nh(e)}var bG=/^\s+/,wG=/\s+$/;function Bt(e,i){if(e=e||"",i=i||{},e instanceof Bt)return e;if(!(this instanceof Bt))return new Bt(e,i);var t=TG(e);this._originalInput=e,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=i.format||t.format,this._gradientType=i.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}Bt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var i=this.toRgb();return(i.r*299+i.g*587+i.b*114)/1e3},getLuminance:function(){var i=this.toRgb(),t,r,n,s,o,a;return t=i.r/255,r=i.g/255,n=i.b/255,t<=.03928?s=t/12.92:s=Math.pow((t+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),n<=.03928?a=n/12.92:a=Math.pow((n+.055)/1.055,2.4),.2126*s+.7152*o+.0722*a},setAlpha:function(i){return this._a=u_(i),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var i=V0(this._r,this._g,this._b);return{h:i.h*360,s:i.s,v:i.v,a:this._a}},toHsvString:function(){var i=V0(this._r,this._g,this._b),t=Math.round(i.h*360),r=Math.round(i.s*100),n=Math.round(i.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+n+"%)":"hsva("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var i=Y0(this._r,this._g,this._b);return{h:i.h*360,s:i.s,l:i.l,a:this._a}},toHslString:function(){var i=Y0(this._r,this._g,this._b),t=Math.round(i.h*360),r=Math.round(i.s*100),n=Math.round(i.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+n+"%)":"hsla("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(i){return z0(this._r,this._g,this._b,i)},toHexString:function(i){return"#"+this.toHex(i)},toHex8:function(i){return SG(this._r,this._g,this._b,this._a,i)},toHex8String:function(i){return"#"+this.toHex8(i)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(le(this._r,255)*100)+"%",g:Math.round(le(this._g,255)*100)+"%",b:Math.round(le(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(le(this._r,255)*100)+"%, "+Math.round(le(this._g,255)*100)+"%, "+Math.round(le(this._b,255)*100)+"%)":"rgba("+Math.round(le(this._r,255)*100)+"%, "+Math.round(le(this._g,255)*100)+"%, "+Math.round(le(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:XG[z0(this._r,this._g,this._b,!0)]||!1},toFilter:function(i){var t="#"+W0(this._r,this._g,this._b,this._a),r=t,n=this._gradientType?"GradientType = 1, ":"";if(i){var s=Bt(i);r="#"+W0(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+r+")"},toString:function(i){var t=!!i;i=i||this._format;var r=!1,n=this._a<1&&this._a>=0,s=!t&&n&&(i==="hex"||i==="hex6"||i==="hex3"||i==="hex4"||i==="hex8"||i==="name");return s?i==="name"&&this._a===0?this.toName():this.toRgbString():(i==="rgb"&&(r=this.toRgbString()),i==="prgb"&&(r=this.toPercentageRgbString()),(i==="hex"||i==="hex6")&&(r=this.toHexString()),i==="hex3"&&(r=this.toHexString(!0)),i==="hex4"&&(r=this.toHex8String(!0)),i==="hex8"&&(r=this.toHex8String()),i==="name"&&(r=this.toName()),i==="hsl"&&(r=this.toHslString()),i==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return Bt(this.toString())},_applyModification:function(i,t){var r=i.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(FG,arguments)},brighten:function(){return this._applyModification(LG,arguments)},darken:function(){return this._applyModification(MG,arguments)},desaturate:function(){return this._applyModification(NG,arguments)},saturate:function(){return this._applyModification(OG,arguments)},greyscale:function(){return this._applyModification(DG,arguments)},spin:function(){return this._applyModification(QG,arguments)},_applyCombination:function(i,t){return i.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(kG,arguments)},complement:function(){return this._applyCombination(UG,arguments)},monochromatic:function(){return this._applyCombination(HG,arguments)},splitcomplement:function(){return this._applyCombination(GG,arguments)},triad:function(){return this._applyCombination(j0,[3])},tetrad:function(){return this._applyCombination(j0,[4])}};Bt.fromRatio=function(e,i){if(Nh(e)=="object"){var t={};for(var r in e)e.hasOwnProperty(r)&&(r==="a"?t[r]=e[r]:t[r]=Vs(e[r]));e=t}return Bt(e,i)};function TG(e){var i={r:0,g:0,b:0},t=1,r=null,n=null,s=null,o=!1,a=!1;return typeof e=="string"&&(e=WG(e)),Nh(e)=="object"&&(ur(e.r)&&ur(e.g)&&ur(e.b)?(i=BG(e.r,e.g,e.b),o=!0,a=String(e.r).substr(-1)==="%"?"prgb":"rgb"):ur(e.h)&&ur(e.s)&&ur(e.v)?(r=Vs(e.s),n=Vs(e.v),i=PG(e.h,r,n),o=!0,a="hsv"):ur(e.h)&&ur(e.s)&&ur(e.l)&&(r=Vs(e.s),s=Vs(e.l),i=RG(e.h,r,s),o=!0,a="hsl"),e.hasOwnProperty("a")&&(t=e.a)),t=u_(t),{ok:o,format:e.format||a,r:Math.min(255,Math.max(i.r,0)),g:Math.min(255,Math.max(i.g,0)),b:Math.min(255,Math.max(i.b,0)),a:t}}function BG(e,i,t){return{r:le(e,255)*255,g:le(i,255)*255,b:le(t,255)*255}}function Y0(e,i,t){e=le(e,255),i=le(i,255),t=le(t,255);var r=Math.max(e,i,t),n=Math.min(e,i,t),s,o,a=(r+n)/2;if(r==n)s=o=0;else{var h=r-n;switch(o=a>.5?h/(2-r-n):h/(r+n),r){case e:s=(i-t)/h+(i<t?6:0);break;case i:s=(t-e)/h+2;break;case t:s=(e-i)/h+4;break}s/=6}return{h:s,s:o,l:a}}function RG(e,i,t){var r,n,s;e=le(e,360),i=le(i,100),t=le(t,100);function o(l,u,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?l+(u-l)*6*c:c<1/2?u:c<2/3?l+(u-l)*(2/3-c)*6:l}if(i===0)r=n=s=t;else{var a=t<.5?t*(1+i):t+i-t*i,h=2*t-a;r=o(h,a,e+1/3),n=o(h,a,e),s=o(h,a,e-1/3)}return{r:r*255,g:n*255,b:s*255}}function V0(e,i,t){e=le(e,255),i=le(i,255),t=le(t,255);var r=Math.max(e,i,t),n=Math.min(e,i,t),s,o,a=r,h=r-n;if(o=r===0?0:h/r,r==n)s=0;else{switch(r){case e:s=(i-t)/h+(i<t?6:0);break;case i:s=(t-e)/h+2;break;case t:s=(e-i)/h+4;break}s/=6}return{h:s,s:o,v:a}}function PG(e,i,t){e=le(e,360)*6,i=le(i,100),t=le(t,100);var r=Math.floor(e),n=e-r,s=t*(1-i),o=t*(1-n*i),a=t*(1-(1-n)*i),h=r%6,l=[t,o,s,s,a,t][h],u=[a,t,t,o,s,s][h],c=[s,s,a,t,t,o][h];return{r:l*255,g:u*255,b:c*255}}function z0(e,i,t,r){var n=[ki(Math.round(e).toString(16)),ki(Math.round(i).toString(16)),ki(Math.round(t).toString(16))];return r&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function SG(e,i,t,r,n){var s=[ki(Math.round(e).toString(16)),ki(Math.round(i).toString(16)),ki(Math.round(t).toString(16)),ki(c_(r))];return n&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function W0(e,i,t,r){var n=[ki(c_(r)),ki(Math.round(e).toString(16)),ki(Math.round(i).toString(16)),ki(Math.round(t).toString(16))];return n.join("")}Bt.equals=function(e,i){return!e||!i?!1:Bt(e).toRgbString()==Bt(i).toRgbString()};Bt.random=function(){return Bt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function NG(e,i){i=i===0?0:i||10;var t=Bt(e).toHsl();return t.s-=i/100,t.s=kl(t.s),Bt(t)}function OG(e,i){i=i===0?0:i||10;var t=Bt(e).toHsl();return t.s+=i/100,t.s=kl(t.s),Bt(t)}function DG(e){return Bt(e).desaturate(100)}function FG(e,i){i=i===0?0:i||10;var t=Bt(e).toHsl();return t.l+=i/100,t.l=kl(t.l),Bt(t)}function LG(e,i){i=i===0?0:i||10;var t=Bt(e).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(i/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(i/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(i/100)))),Bt(t)}function MG(e,i){i=i===0?0:i||10;var t=Bt(e).toHsl();return t.l-=i/100,t.l=kl(t.l),Bt(t)}function QG(e,i){var t=Bt(e).toHsl(),r=(t.h+i)%360;return t.h=r<0?360+r:r,Bt(t)}function UG(e){var i=Bt(e).toHsl();return i.h=(i.h+180)%360,Bt(i)}function j0(e,i){if(isNaN(i)||i<=0)throw new Error("Argument to polyad must be a positive number");for(var t=Bt(e).toHsl(),r=[Bt(e)],n=360/i,s=1;s<i;s++)r.push(Bt({h:(t.h+s*n)%360,s:t.s,l:t.l}));return r}function GG(e){var i=Bt(e).toHsl(),t=i.h;return[Bt(e),Bt({h:(t+72)%360,s:i.s,l:i.l}),Bt({h:(t+216)%360,s:i.s,l:i.l})]}function kG(e,i,t){i=i||6,t=t||30;var r=Bt(e).toHsl(),n=360/t,s=[Bt(e)];for(r.h=(r.h-(n*i>>1)+720)%360;--i;)r.h=(r.h+n)%360,s.push(Bt(r));return s}function HG(e,i){i=i||6;for(var t=Bt(e).toHsv(),r=t.h,n=t.s,s=t.v,o=[],a=1/i;i--;)o.push(Bt({h:r,s:n,v:s})),s=(s+a)%1;return o}Bt.mix=function(e,i,t){t=t===0?0:t||50;var r=Bt(e).toRgb(),n=Bt(i).toRgb(),s=t/100,o={r:(n.r-r.r)*s+r.r,g:(n.g-r.g)*s+r.g,b:(n.b-r.b)*s+r.b,a:(n.a-r.a)*s+r.a};return Bt(o)};Bt.readability=function(e,i){var t=Bt(e),r=Bt(i);return(Math.max(t.getLuminance(),r.getLuminance())+.05)/(Math.min(t.getLuminance(),r.getLuminance())+.05)};Bt.isReadable=function(e,i,t){var r=Bt.readability(e,i),n,s;switch(s=!1,n=jG(t),n.level+n.size){case"AAsmall":case"AAAlarge":s=r>=4.5;break;case"AAlarge":s=r>=3;break;case"AAAsmall":s=r>=7;break}return s};Bt.mostReadable=function(e,i,t){var r=null,n=0,s,o,a,h;t=t||{},o=t.includeFallbackColors,a=t.level,h=t.size;for(var l=0;l<i.length;l++)s=Bt.readability(e,i[l]),s>n&&(n=s,r=Bt(i[l]));return Bt.isReadable(e,r,{level:a,size:h})||!o?r:(t.includeFallbackColors=!1,Bt.mostReadable(e,["#fff","#000"],t))};var Jf=Bt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},XG=Bt.hexNames=YG(Jf);function YG(e){var i={};for(var t in e)e.hasOwnProperty(t)&&(i[e[t]]=t);return i}function u_(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function le(e,i){VG(e)&&(e="100%");var t=zG(e);return e=Math.min(i,Math.max(0,parseFloat(e))),t&&(e=parseInt(e*i,10)/100),Math.abs(e-i)<1e-6?1:e%i/parseFloat(i)}function kl(e){return Math.min(1,Math.max(0,e))}function qe(e){return parseInt(e,16)}function VG(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function zG(e){return typeof e=="string"&&e.indexOf("%")!=-1}function ki(e){return e.length==1?"0"+e:""+e}function Vs(e){return e<=1&&(e=e*100+"%"),e}function c_(e){return Math.round(parseFloat(e)*255).toString(16)}function K0(e){return qe(e)/255}var Pi=function(){var e="[-\\+]?\\d+%?",i="[-\\+]?\\d*\\.\\d+%?",t="(?:"+i+")|(?:"+e+")",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ur(e){return!!Pi.CSS_UNIT.exec(e)}function WG(e){e=e.replace(bG,"").replace(wG,"").toLowerCase();var i=!1;if(Jf[e])e=Jf[e],i=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=Pi.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=Pi.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Pi.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=Pi.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Pi.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=Pi.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Pi.hex8.exec(e))?{r:qe(t[1]),g:qe(t[2]),b:qe(t[3]),a:K0(t[4]),format:i?"name":"hex8"}:(t=Pi.hex6.exec(e))?{r:qe(t[1]),g:qe(t[2]),b:qe(t[3]),format:i?"name":"hex"}:(t=Pi.hex4.exec(e))?{r:qe(t[1]+""+t[1]),g:qe(t[2]+""+t[2]),b:qe(t[3]+""+t[3]),a:K0(t[4]+""+t[4]),format:i?"name":"hex8"}:(t=Pi.hex3.exec(e))?{r:qe(t[1]+""+t[1]),g:qe(t[2]+""+t[2]),b:qe(t[3]+""+t[3]),format:i?"name":"hex"}:!1}function jG(e){var i,t;return e=e||{level:"AA",size:"small"},i=(e.level||"AA").toUpperCase(),t=(e.size||"small").toLowerCase(),i!=="AA"&&i!=="AAA"&&(i="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:i,size:t}}class Lo{constructor(i){x(this,"element");x(this,"fill");x(this,"opacity");x(this,"stroke");x(this,"strokeDashArray");x(this,"strokeDashOffset");x(this,"strokeLineCap");x(this,"strokeLineJoin");x(this,"strokeMiterLimit");x(this,"strokeWidth");x(this,"dirtyId",0);this.element=i;const t=i.getAttribute("fill"),r=i.getAttribute("opacity"),n=i.getAttribute("stroke"),s=i.getAttribute("stroke-dasharray"),o=i.getAttribute("stroke-dashoffset"),a=i.getAttribute("stroke-linecap"),h=i.getAttribute("stroke-linejoin"),l=i.getAttribute("stroke-miterlimit"),u=i.getAttribute("stroke-width");this.fill=t!==null?t==="none"?"none":Lo.parseColor(t):null,this.opacity=r&&parseFloat(r),this.stroke=n&&Lo.parseColor(i.getAttribute("stroke")),this.strokeDashArray=s&&(s==null?void 0:s.split(/[, ]+/g).map(c=>parseFloat(c.trim()))),this.strokeDashOffset=o&&parseFloat(o),this.strokeLineCap=a,this.strokeLineJoin=h,this.strokeMiterLimit=l&&parseFloat(l),this.strokeWidth=u&&parseFloat(u)}static parseColor(i){if(!i)return 0;if(i==="none"||i.startsWith("url"))return i;if(i[0]==="#")return i=i.substr(1),i.length===3&&(i=i.replace(/([a-f0-9])/gi,"$1$1")),parseInt(i,16);const{r:t,g:r,b:n}=Bt(i).toRgb();return(t<<16)+(r<<8)+n}}function $0(e){let i=e.toString(16);for(;i.length<6;)i=`0${i}`;return`#${i}`}const J0=new Tt,q0=new Tt;class Z0{static createLinearGradient(i,t,r){const{x0:n,y0:s,x1:o,y1:a,colorStops:h}=r,l=document.createElement("canvas");l.width=t.width,l.height=t.height;const u=l.getContext("2d"),c=u.createLinearGradient(n,s,o,a);h.forEach(g=>{c.addColorStop(g.offset,$0(g.color))}),u.fillStyle=c,u.fillRect(0,0,t.width,t.height);const f=i.renderTexture.current,d=J0.copyFrom(i.renderTexture.sourceFrame),A=q0.copyFrom(i.renderTexture.destinationFrame),p=new Ke(Ot.from(l));return i.batch.flush(),i.renderTexture.bind(t),p.render(i),i.batch.flush(),i.renderTexture.bind(f,d,A),t}static createRadialGradient(i,t,r){const{x0:n,y0:s,r0:o,x1:a,y1:h,r1:l,colorStops:u}=r,c=document.createElement("canvas");c.width=t.width,c.height=t.height;const f=c.getContext("2d"),d=f.createRadialGradient(n,s,o,a,h,l);u.forEach(I=>{d.addColorStop(I.offset,$0(I.color))}),f.fillStyle=d,f.fillRect(0,0,t.width,t.height);const A=i.renderTexture.current,p=J0.copyFrom(i.renderTexture.sourceFrame),g=q0.copyFrom(i.renderTexture.destinationFrame),y=new Ke(Ot.from(c));return i.batch.flush(),i.renderTexture.bind(t),y.render(i),i.batch.flush(),i.renderTexture.bind(A,p,g),t}}function ty(e){e.x1.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE),e.y1.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE),e.x2.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE),e.y2.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE)}class KG{constructor(i,t){x(this,"paintServer");x(this,"paintTexture");x(this,"paintContexts");x(this,"dirtyId");this.paintServer=i,this.paintTexture=t,this.paintContexts={},this.dirtyId=0}resolvePaint(i){const t=this.paintContexts[i.CONTEXT_UID],r=this.dirtyId;(t===void 0||t<r)&&(this.updatePaint(i),this.paintContexts[i.CONTEXT_UID]=r)}resolvePaintDimensions(i){const t=Math.ceil(i.width),r=Math.ceil(i.height),n=t/r,s=this.paintServer,o=this.paintTexture;if(s instanceof SVGLinearGradientElement){ty(s);const a=s.children,h=s.x1.baseVal.valueInSpecifiedUnits,l=s.y1.baseVal.valueInSpecifiedUnits,u=s.x2.baseVal.valueInSpecifiedUnits,c=s.y2.baseVal.valueInSpecifiedUnits,f=Math.atan2(c-l,u-h),d=a.length===1?2:64;let A=Math.max(1,d*Math.cos(f)),p=Math.max(1,d*Math.sin(f));if(A<t&&p<r){Math.abs(f)>.01&&Math.abs(f)%(Math.PI/2)>.01&&(A/p>n?p=A/n:A=n*p),o.resize(A,p,!0);return}}o.resize(t,r,!0)}updatePaint(i){this.paintServer instanceof SVGLinearGradientElement?this.linearGradient(i):this.paintServer instanceof SVGRadialGradientElement&&this.radialGradient(i)}linearGradient(i){const t=this.paintServer,r=this.paintTexture;return ty(t),Z0.createLinearGradient(i,r,{x0:t.x1.baseVal.valueInSpecifiedUnits*r.width/100,y0:t.y1.baseVal.valueInSpecifiedUnits*r.height/100,x1:t.x2.baseVal.valueInSpecifiedUnits*r.width/100,y1:t.y2.baseVal.valueInSpecifiedUnits*r.height/100,colorStops:this.createColorStops(t.children)})}radialGradient(i){const t=this.paintServer,r=this.paintTexture;return t.fx.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_NUMBER),t.fy.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_NUMBER),t.cx.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_NUMBER),t.cy.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_NUMBER),Z0.createRadialGradient(i,r,{x0:t.fx.baseVal.valueInSpecifiedUnits*r.width/100,y0:t.fy.baseVal.valueInSpecifiedUnits*r.height/100,r0:t.fr.baseVal.valueInSpecifiedUnits*r.width/100,x1:t.cx.baseVal.valueInSpecifiedUnits*r.height/100,y1:t.cy.baseVal.valueInSpecifiedUnits*r.width/100,r1:t.r.baseVal.valueInSpecifiedUnits*r.width/100,colorStops:this.createColorStops(t.children)})}createColorStops(i){const t=[];for(let r=0,n=i.length;r<n;r++){const s=i.item(r);t.push({offset:s.offset.baseVal,color:Lo.parseColor(s.getAttribute("stop-color"))})}return t}}const Oh=100;var Ur;(function(e){e.NONZERO="nonzero",e.EVENODD="evenodd"})(Ur||(Ur={}));class dA{constructor(){x(this,"contours");x(this,"fillRule");x(this,"type");x(this,"dirty");x(this,"bounds",new _i);this.contours=[],this.fillRule=Ur.NONZERO,this.type=Oh,this.dirty=!0}get points(){return this.contours.length||this.contours.push([]),this.contours[this.contours.length-1]}contains(i,t){this.dirty&&(this.calculateBounds(),this.dirty=!1);const r=this.bounds;return i<r.minX||t<r.minY||i>r.maxX||t>r.maxY?!1:this.fillRule===Ur.EVENODD?this.hitEvenOdd(i,t):this.fillRule===Ur.NONZERO?this.hitNonZero(i,t):!1}clone(){const i=this.contours.map(r=>[...r]),t=new dA;return t.contours=i,t.fillRule=this.fillRule,t}closeContour(){this.points.length!==0&&this.contours.push([])}invalidate(){this.dirty=!0}toString(){return"[@pixi-essentials/svg:Path Don't expect points to be printed :P]"}calculateBounds(){const i=this.bounds;let t=1/0,r=1/0,n=-1/0,s=-1/0;for(const o of this.contours)for(let a=0,h=o.length;a<h;){const l=o[a++],u=o[a++];t=l<t?l:t,r=u<r?u:r,n=l>n?l:n,s=u>s?u:s}i.minX=t,i.minY=r,i.maxX=n,i.maxY=s}hitEvenOdd(i,t){let r=0;for(const n of this.contours)for(let s=0,o=n.length;s<o;){const a=n[s++],h=n[s++],l=n[s%n.length],u=n[(s+1)%n.length];if(h<t&&u>t||h>t&&u<t){const c=(t-h)/(u-h),f=a+c*(l-a);i<f&&++r}}return!!(r%2)}hitNonZero(i,t){let r=0;for(const n of this.contours)for(let s=0,o=n.length;s<o;){const a=n[s++],h=n[s++],l=n[s%n.length],u=n[(s+1)%n.length];h<=t?u>t&&ey(i,t,a,h,l,u)>0&&++r:u<=t&&ey(i,t,a,h,l,u)<0&&--r}return r!==0}}function ey(e,i,t,r,n,s){return(n-t)*(i-r)-(e-t)*(s-r)}function $G(e,i){return Math.sqrt((e.x-i.x)**2+(e.y-i.y)**2)}function iy(e,i,t,r,n,s,o,a){const h=e-t*n,l=i-r*n,u=e+t*s,c=i+r*s;let f,d;o?(f=r,d=-t):(f=-r,d=t);const A=h+f,p=l+d,g=u+f,y=c+d;return a.push(A,p),a.push(g,y),2}function ja(e,i,t,r,n,s,o,a){const h=t-e,l=r-i;let u=Math.atan2(h,l),c=Math.atan2(n-e,s-i);a&&u<c?u+=Math.PI*2:!a&&u>c&&(c+=Math.PI*2);let f=u;const d=c-u,A=Math.abs(d),p=Math.sqrt(h*h+l*l),g=(15*A*Math.sqrt(p)/Math.PI>>0)+1,y=d/g;if(f+=y,a){o.push(e,i),o.push(t,r);for(let I=1,E=f;I<g;I++,E+=y)o.push(e,i),o.push(e+Math.sin(E)*p,i+Math.cos(E)*p);o.push(e,i),o.push(n,s)}else{o.push(t,r),o.push(e,i);for(let I=1,E=f;I<g;I++,E+=y)o.push(e+Math.sin(E)*p,i+Math.cos(E)*p),o.push(e,i);o.push(n,s),o.push(e,i)}return g*2}function ry(e,i,t){const r=t.points,n=e.length/2;let s=e.length;const o=r.length/2,a=i.width/2,h=a*a,l=i.miterLimit*i.miterLimit;let u=e[0],c=e[1],f=e[2],d=e[3],A=0,p=0,g=-(c-d),y=u-f,I=0,E=0,w=Math.sqrt(g*g+y*y);g/=w,y/=w,g*=a,y*=a;const T=i.alignment,_=(1-T)*2,F=T*2;i.cap===Me.ROUND?s+=ja(u-g*(_-F)*.5,c-y*(_-F)*.5,u-g*_,c-y*_,u+g*F,c+y*F,r,!0)+2:i.cap===Me.SQUARE&&(s+=iy(u,c,g,y,_,F,!0,r)),r.push(u-g*_,c-y*_),r.push(u+g*F,c+y*F);for(let D=1;D<n-1;++D){u=e[(D-1)*2],c=e[(D-1)*2+1],f=e[D*2],d=e[D*2+1],A=e[(D+1)*2],p=e[(D+1)*2+1],g=-(c-d),y=u-f,w=Math.sqrt(g*g+y*y),g/=w,y/=w,g*=a,y*=a,I=-(d-p),E=f-A,w=Math.sqrt(I*I+E*E),I/=w,E/=w,I*=a,E*=a;const $=f-u,z=c-d,q=f-A,_t=p-d,V=z*q-_t*$,X=V<0;if(Math.abs(V)<.1){r.push(f-g*_,d-y*_),r.push(f+g*F,d+y*F);continue}const et=(-g+u)*(-y+d)-(-g+f)*(-y+c),At=(-I+A)*(-E+d)-(-I+f)*(-E+p),Z=($*At-q*et)/V,N=(_t*et-z*At)/V,W=(Z-f)*(Z-f)+(N-d)*(N-d),it=f+(Z-f)*_,ot=d+(N-d)*_,dt=f-(Z-f)*F,Ct=d-(N-d)*F;i.join===si.BEVEL||W/h>l?(X?(r.push(it,ot),r.push(f+g*F,d+y*F),r.push(it,ot),r.push(f+I*F,d+E*F)):(r.push(f-g*_,d-y*_),r.push(dt,Ct),r.push(f-I*_,d-E*_),r.push(dt,Ct)),s+=2):i.join===si.ROUND?X?(r.push(it,ot),r.push(f+g*F,d+y*F),s+=ja(f,d,f+g*F,d+y*F,f+I*F,d+E*F,r,!0)+4,r.push(it,ot),r.push(f+I*F,d+E*F)):(r.push(f-g*_,d-y*_),r.push(dt,Ct),s+=ja(f,d,f-g*_,d-y*_,f-I*_,d-E*_,r,!1)+4,r.push(f-I*_,d-E*_),r.push(dt,Ct)):(r.push(it,ot),r.push(dt,Ct))}u=e[(n-2)*2],c=e[(n-2)*2+1],f=e[(n-1)*2],d=e[(n-1)*2+1],g=-(c-d),y=u-f,w=Math.sqrt(g*g+y*y),g/=w,y/=w,g*=a,y*=a,r.push(f-g*_,d-y*_),r.push(f+g*F,d+y*F),i.cap===Me.ROUND?s+=ja(f-g*(_-F)*.5,d-y*(_-F)*.5,f-g*_,d-y*_,f+g*F,d+y*F,r,!1)+2:i.cap===Me.SQUARE&&(s+=iy(f,d,g,y,_,F,!1,r));const R=t.indices,S=xi.epsilon*xi.epsilon;for(let D=o;D<s+o-2;++D)u=r[D*2],c=r[D*2+1],f=r[(D+1)*2],d=r[(D+1)*2+1],A=r[(D+2)*2],p=r[(D+2)*2+1],!(Math.abs(u*(d-p)+f*(p-c)+A*(c-d))<S)&&R.push(D,D+1,D+2)}function Lu(e){return e%2===0}function JG(e,i){return(e+1)%i.length}function ny(e,i){const t=e.shape;let r=e.points||t.points.slice();const n=i.closePointEps;if(r.length===0)return;const s=new M(r[0],r[1]),o=new M(r[r.length-2],r[r.length-1]),a=t.type!==ne.POLY||t.closeStroke,h=Math.abs(s.x-o.x)<n&&Math.abs(s.y-o.y)<n;if(a){r=r.slice(),h&&(r.pop(),r.pop(),o.set(r[r.length-2],r[r.length-1]));const I=(s.x+o.x)*.5,E=(o.y+s.y)*.5;r.unshift(I,E),r.push(I,E)}const l=e.lineStyle;let u=l.dashOffset||0;const c=l.dashArray||[10,5],f=r.length/2-1,d=new M,A=new M,p=[],g=new M;let y=0;p.push(r[0],r[1]);for(let I=0;I<f;I++){d.set(r[I*2],r[I*2+1]),A.set(r[I*2+2],r[I*2+3]);const E=$G(d,A),w=Math.atan2(A.y-d.y,A.x-d.x),T=Math.sin(w),_=Math.cos(w);let F=E;for(g.copyFrom(d);F>=c[y]-u;){const R=c[y]-u;g.x+=_*R,g.y+=T*R,p.push(g.x,g.y),Lu(y)&&(ry(p,l,i),p.length=0),F-=R,y=JG(y,c),u=0}F>0&&(Lu(y)&&p.push(A.x,A.y),u+=F)}Lu(y)&&ry(p,l,i)}const qG=new _i;var Rr;(function(e){e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC"})(Rr||(Rr={}));class ZG extends Fl{processLine(i){if(i.shape.type===Oh){this.processPathLine(i);return}i.lineStyle.dashArray?ny(i,this):super.processLine(i)}processPathLine(i){const t=i.shape,r=i.lineStyle;t.contours.forEach(n=>{if(n.find(s=>isNaN(s))!==void 0){console.error("Contour has NaN, oops!");return}r.dashArray?ny({points:n,holes:[],shape:{points:n,type:Rr.POLY},lineStyle:r},this):super.processLine({closeStroke:!0,points:n.slice(),holes:[],shape:{points:n,type:Rr.POLY},lineStyle:r})})}calculateBounds(){const i=this._bounds,t=qG;let r=kt.IDENTITY;this._bounds.clear(),t.clear();for(let n=0;n<this.graphicsData.length;n++){const s=this.graphicsData[n],o=s.shape,a=s.type,h=s.matrix||kt.IDENTITY,l=0;if(r!==h&&(t.isEmpty()||(i.addBoundsMatrix(t,r),t.clear()),r=h),a===Rr.RECT||a===Rr.RREC){const u=o;t.addFramePad(u.x,u.y,u.x+u.width,u.y+u.height,l,l)}else if(a===Rr.CIRC){const u=o;t.addFramePad(u.x,u.y,u.x,u.y,u.radius+l,u.radius+l)}else if(a===Rr.ELIP){const u=o;t.addFramePad(u.x,u.y,u.x,u.y,u.width+l,u.height+l)}else if(a===Oh)o.contours.forEach(c=>{i.addVerticesMatrix(kt.IDENTITY,new Float32Array(c),0,c.length)});else{const u=o;i.addVerticesMatrix(r,u.points,0,u.points.length,l,l)}}t.isEmpty()||i.addBoundsMatrix(t,r),i.pad(this.boundsPadding,this.boundsPadding)}}class t3 extends Ll{constructor(){super(...arguments);x(this,"dashArray",null);x(this,"dashOffset",0)}clone(){const t=super.clone();return t.dashArray=this.dashArray?[...this.dashArray]:null,t.dashOffset=this.dashOffset,t}reset(){super.reset(),this.dashArray=null,this.dashOffset=0}}const e3={calculateArcLength(e,i,t,r,n=.05){const s=Math.sign(r),o=Math.abs(r),a=e*e,l=i*i-a;let u=0;for(let c=t+n*.5,f=0;f<o;c+=s*n,f+=n){const d=Math.cos(c),A=d*d,p=Math.sqrt(a+l*A);u+=n*p}return u}},Mu=new kt,i3=xi._segmentsCount.bind(xi);class Zn extends Ul{constructor(t){super();x(this,"paintServers");x(this,"context");this.context=t,this._geometry=new ZG,this._geometry.refCount++,this._lineStyle=new t3,this.interactive=!1,this.paintServers=[]}lineTextureStyle(t){t=Object.assign({width:0,texture:Ot.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Me.BUTT,join:si.MITER,miterLimit:10,dashArray:null,dashOffset:0},t),this.currentPath&&this.startPoly();const r=t.width>0&&t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:r},t)):this._lineStyle.reset(),this}ellipticArc(t,r,n,s,o,a,h=0,l=!1){const u=a-o,c=xi.adaptive?i3(e3.calculateArcLength(n,s,o,a-o))*4:20,f=(l?-1:1)*Math.abs(u)/(c-1);Mu.identity().translate(-t,-r).rotate(h).translate(t,r);for(let d=0;d<c;d++){const A=o+d*f,p=t+n*Math.cos(A),g=r+s*Math.sin(A),{x:y,y:I}=h!==0?Mu.apply({x:p,y:g}):{x:p,y:g};if(d===0){this._initCurve(y,I);continue}this.currentPath.points.push(y,I)}return this}ellipticArcTo(t,r,n,s,o=0,a=!1,h=!1){if(n===0||s===0)return this.lineTo(t,r);const l=this.currentPath.points,u=l[l.length-2],c=l[l.length-1],f=(u+t)/2,d=(c+r)/2,A=Mu.identity().translate(-f,-d).rotate(-o),{x:p,y:g}=A.apply({x:u,y:c}),y=Math.pow(p/n,2)+Math.pow(g/s,2);y>1&&(n=Math.sqrt(y)*n,s=Math.sqrt(y)*s);const I=n*n,E=s*s,T=(a===h?1:-1)*Math.sqrt(Math.abs(I*E-I*g*g-E*p*p)/(I*g*g+E*p*p)),_=T*(n*g/s),F=-T*(s*p/n),{x:R,y:S}=A.applyInverse({x:_,y:F}),D=(p-_)/n,$=(g-F)/s,z=Math.sqrt(D**2+$**2),q=($>=0?1:-1)*Math.acos(D/z),_t=(-p-_)/n,V=(-g-F)/s,X=Math.sqrt(_t**2+V**2);let et=(V>=0?1:-1)*Math.acos(_t/X);return et>q&&a?et-=Math.PI*2:q>et&&!a&&(et+=Math.PI*2),this.ellipticArc(R,S,n,s,q,et,o,a),this}embedCircle(t){t.cx.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX),t.cy.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX),t.r.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX);const r=t.cx.baseVal.valueInSpecifiedUnits,n=t.cy.baseVal.valueInSpecifiedUnits,s=t.r.baseVal.valueInSpecifiedUnits;this.drawCircle(r,n,s),this.isClosePath=!0}embedEllipse(t){t.cx.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX),t.cy.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX),t.rx.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX),t.ry.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX);const r=t.cx.baseVal.valueInSpecifiedUnits,n=t.cy.baseVal.valueInSpecifiedUnits,s=t.rx.baseVal.valueInSpecifiedUnits,o=t.ry.baseVal.valueInSpecifiedUnits;this.ellipticArc(r,n,s,o,0,2*Math.PI),this.isClosePath=!0}embedLine(t){t.x1.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX),t.y1.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX),t.x2.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX),t.y2.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX);const r=t.x1.baseVal.valueInSpecifiedUnits,n=t.y1.baseVal.valueInSpecifiedUnits,s=t.x2.baseVal.valueInSpecifiedUnits,o=t.y2.baseVal.valueInSpecifiedUnits;this.moveTo(r,n),this.lineTo(s,o),this.isClosePath=!1}embedRect(t){const r=t.x.baseVal.valueInSpecifiedUnits,n=t.y.baseVal.valueInSpecifiedUnits,s=t.width.baseVal.valueInSpecifiedUnits,o=t.height.baseVal.valueInSpecifiedUnits;let a=t.rx.baseVal.valueInSpecifiedUnits,h=t.ry.baseVal.valueInSpecifiedUnits||a;if(a=a||h,a===0||h===0)this.drawRect(r,n,s,o);else{a=a?Math.min(a,s/2):0,h=h?Math.min(h,o/2):0;const l=1-.5522847498;this.moveTo(r+a,n),this.lineTo(r+s-a,n),this.bezierCurveTo(r+s-l*a,n,r+s,n+l*h,r+s,n+h),this.lineTo(r+s,n+o-h),this.bezierCurveTo(r+s,n+o-l*h,r+s-l*a,n+o,r+s-a,n+o),this.lineTo(r+a,n+o),this.bezierCurveTo(r+l*a,n+o,r,n+o-l*h,r,n+o-h),this.lineTo(r,n+h),this.bezierCurveTo(r,n+l*h,r+l*a,n,r+a,n),this.closePath()}this.isClosePath=!0}embedPolygon(t){const r=t.getAttribute("points").replace(/,/g," ").trim().split(/\s+/).map(n=>parseFloat(n,10));this.moveTo(r[0],r[1]);for(let n=2;n<r.length;n+=2)this.lineTo(r[n],r[n+1]);this.closePath(),this.isClosePath=!0,this.exportOption.removeSamePoint=!1}embedPolyline(t){const r=t.getAttribute("points").replace(/,/g," ").trim().split(/\s+/).map(s=>parseFloat(s,10));this.moveTo(r[0],r[1]);for(let s=2;s<r.length;s+=2)this.lineTo(r[s],r[s+1]);this.isClosePath=!1;const n=r.length;n>=4&&r[0]===r[n-2]&&r[1]===r[n-1]&&(this.isClosePath=!0),this.exportOption.removeSamePoint=!1}render(t){const r=this.paintServers;for(let n=0,s=r.length;n<s;n++)r[n].resolvePaint(t);super.render(t)}}new kt;var f_=function(){var e=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(i){i=i||{};var t;t||(t=typeof i<"u"?i:{});var r,n;t.ready=new Promise(function(O,Y){r=O,n=Y});var s=t,o,a,h,l,u,c,f,d,A;function p(O,Y,J){if(!Y||0>Y)throw"Size should be a greater 0";if(!O)throw"Invalid pointer!";return J=J||Uint8Array,Y=new J(s.HEAP8.buffer,O,Y),Y.F=O,Y.I=function(){s._free(O)},Y}var g=s.Tess=function(){if(!o){var O=s.cwrap;o=O("tessNewTess","number",["number"]),a=O("tessDeleteTess",null,["number"]),h=O("tessAddContour","number",["number","number","number","number","number"]),l=O("tessTesselate","number","number number number number number number".split(" ")),u=O("tessGetVertexCount","number",["number"]),c=O("tessGetVertices","number",["number"]),f=O("tessGetElementCount","number",["number"]),d=O("tessGetElements","number",["number"]),A=O("tessGetVertexIndices","number",["number"])}if(this.F=o(0),this.G=[],!this.F)throw"Unknown error, tesselator wasn't init!"};Object.assign(g.prototype,{dispose:function(){this.F&&(a(this.F),this.G.forEach(function(O){O.I&&O.I()}),this.G=[],this.F=0)},addContours:function(O,Y){if(!this.F)throw"Tessealtor wasn't be inited!";Y=Y||2;var J=this.G=[];typeof O[0]=="number"&&(O=[O]);for(var tt=0;tt<O.length;tt++){var rt=O[tt],j=rt.length,ht=Float32Array,v=s._malloc(j*ht.BYTES_PER_ELEMENT);if(!v)throw"Can't allocate a "+j;j=p(v,j,ht),j.set(rt,0),J.push(j),h(this.F,Y,j.F,Y*Float32Array.BYTES_PER_ELEMENT,rt.length/Y)}},tesselate:function(O){if(this.G.length===0)throw"Contours data is required!";if(O=Object.assign({windingRule:0,elementType:0,polySize:3,vertexSize:2,fillVertexIndices:!1},O||{}),!l(this.F,O.windingRule|0||0,O.elementType|0||0,O.polySize|0||3,O.vertexSize|0||2,0))return null;var Y=u(this.F),J=f(this.F),tt={elementCount:J,vertexCount:Y};return!Y||!J?null:(tt.vertices=p(c(this.F),Y*O.vertexSize,Float32Array),tt.elements=p(d(this.F),J*O.polySize,Uint32Array),O.fillVertexIndices&&(tt.vertexIndices=p(A(this.F),Y,Uint32Array)),tt)}});var y={},I;for(I in t)t.hasOwnProperty(I)&&(y[I]=t[I]);var E="";typeof document<"u"&&document.currentScript&&(E=document.currentScript.src),e&&(E=e),E.indexOf("blob:")!==0?E=E.substr(0,E.lastIndexOf("/")+1):E="";var w=t.printErr||console.warn.bind(console);for(I in y)y.hasOwnProperty(I)&&(t[I]=y[I]);y=null;var T=0,_;t.wasmBinary&&(_=t.wasmBinary),t.noExitRuntime&&t.noExitRuntime,typeof WebAssembly!="object"&&Ct("no native wasm support detected");var F,R=!1;function S(O){var Y=t["_"+O];return Y||Ct("Assertion failed: Cannot call unknown function "+(O+", make sure it is exported")),Y}function D(O,Y,J,tt){var rt={string:function(C){var b=0;if(C!=null&&C!==0){var P=(C.length<<2)+1;b=G(P);var Q=b,k=V;if(0<P){P=Q+P-1;for(var st=0;st<C.length;++st){var mt=C.charCodeAt(st);if(55296<=mt&&57343>=mt){var wt=C.charCodeAt(++st);mt=65536+((mt&1023)<<10)|wt&1023}if(127>=mt){if(Q>=P)break;k[Q++]=mt}else{if(2047>=mt){if(Q+1>=P)break;k[Q++]=192|mt>>6}else{if(65535>=mt){if(Q+2>=P)break;k[Q++]=224|mt>>12}else{if(Q+3>=P)break;k[Q++]=240|mt>>18,k[Q++]=128|mt>>12&63}k[Q++]=128|mt>>6&63}k[Q++]=128|mt&63}}k[Q]=0}}return b},array:function(C){var b=G(C.length);return _t.set(C,b),b}},j=S(O),ht=[];if(O=0,tt)for(var v=0;v<tt.length;v++){var m=rt[J[v]];m?(O===0&&(O=H()),ht[v]=m(tt[v])):ht[v]=tt[v]}return J=j.apply(null,ht),J=function(C){return Y==="string"?z(C):Y==="boolean"?!!C:C}(J),O!==0&&L(O),J}var $=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function z(O){if(O){for(var Y=V,J=O+NaN,tt=O;Y[tt]&&!(tt>=J);)++tt;if(16<tt-O&&Y.subarray&&$)O=$.decode(Y.subarray(O,tt));else{for(J="";O<tt;){var rt=Y[O++];if(rt&128){var j=Y[O++]&63;if((rt&224)==192)J+=String.fromCharCode((rt&31)<<6|j);else{var ht=Y[O++]&63;rt=(rt&240)==224?(rt&15)<<12|j<<6|ht:(rt&7)<<18|j<<12|ht<<6|Y[O++]&63,65536>rt?J+=String.fromCharCode(rt):(rt-=65536,J+=String.fromCharCode(55296|rt>>10,56320|rt&1023))}}else J+=String.fromCharCode(rt)}O=J}}else O="";return O}var q,_t,V;function X(){var O=F.buffer;q=O,t.HEAP8=_t=new Int8Array(O),t.HEAP16=new Int16Array(O),t.HEAP32=new Int32Array(O),t.HEAPU8=V=new Uint8Array(O),t.HEAPU16=new Uint16Array(O),t.HEAPU32=new Uint32Array(O),t.HEAPF32=new Float32Array(O),t.HEAPF64=new Float64Array(O)}var et,At=[],Z=[],N=[],W=[];function it(){var O=t.preRun.shift();At.unshift(O)}var ot=0,dt=null;t.preloadedImages={},t.preloadedAudios={};function Ct(O){throw t.onAbort&&t.onAbort(O),w(O),R=!0,O=new WebAssembly.RuntimeError("abort("+O+"). Build with -s ASSERTIONS=1 for more info."),n(O),O}function gt(O){return String.prototype.startsWith?O.startsWith("data:application/octet-stream;base64,"):O.indexOf("data:application/octet-stream;base64,")===0}var Pt="data:application/octet-stream;base64,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AAsgAyAHTA0AIAUgAyAHa0ECdBAcIANBAnRqIABBf3NBAnRqIQULIAEoAgAiASALRw0ADAILAAsDQAJAIAEtABVFDQBBACEEIAEoAggiAiEGA0AgBSAGKAIQKAIkNgIAIAQiAEEBaiEEIAVBBGohBSAGKAIMIgYgAkcNAAsgAyAETA0AIAUgAyAEa0ECdBAcIANBAnRqIABBf3NBAnRqIQULIAEoAgAiASALRw0ACwsPC0HhFUGhFUHyBEH3FRAAAAsgAEEBNgIEC9gBAQJ/IwBBMGsiASQAIAEgACkCiAE3AyggASAAKQKAATcDICABIAApAng3AxggASAAKQJwNwMQIAEgACkCaDcDCCAAKAJMEBggACgCACICBEAgAUEIaiACEC0gAEEANgIACyAAKAJUIgIEQCABKAIUIAIgASgCEBEBACAAQQA2AlQLIAAoAlgiAgRAIAEoAhQgAiABKAIQEQEAIABBADYCWAsgACgCYCICBEAgASgCFCACIAEoAhARAQAgAEEANgJgCyABKAIUIAAgASgCEBEBACABQTBqJAAL/wICA38BfiAAQYgWIAAbIgIoAgAiAEUEQCACQYgWKAIAIgA2AgALIAIoAgRFBEAgAkGMFigCADYCBAsgAigCCEUEQCACQZAWKAIANgIICyACKAIMQawCIAARAAAiAUUEQEEADwsgASACKQIANwJoIAEgAikCIDcCiAEgASACKQIYNwKAASABIAIpAhAiBDcCeCABIAIpAgg3AnAgBKdFBEAgAUGABDYCeAsgASgCfEUEQCABQYAENgJ8CyABKAKAAUUEQCABQYACNgKAAQsgASgChAFFBEAgAUGABDYChAELIAEoAogBIgBFBEAgAUGAAjYCiAFBgAIhAAsgAUHoAGohAyABQgA3AiwgAUEANgIQIAFCADcCCCABQgA3AjQgAUEANgI8QRAhAgJAIABBEE4EQEGAICECIABBgSBIDQELIAEgAjYCiAEgAiEACyADQdkVQRwgABAZIQAgAUIANwJQIAFCADcCACABIAA2AkwgAUIANwJYIAFCADcCYCABCwYAIAEQFQsIACABIAIQJQsGACABEBYLvAUCBX8CfQJAAkAgASgCCCIBKAIMIgIgAUYNACACKAIMIAFGDQADQAJAIAEoAgQoAhAiAyoCGCIHIAEoAhAiAioCGCIIXUUE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cSggdSwgdiApICYmIFRyYW5zTGVxKCB2LCB3ICkAdGVzdHJhbnNFdmFsAHRlc3RyYW5zU2lnbgBNZXNoIEVkZ2VzAE1lc2ggVmVydGljZXMATWVzaCBGYWNlcwBmLT5wcmV2ID09IGZQcmV2AHNyYy9tZXNoLmMAdGVzc01lc2hDaGVja01lc2gAZS0+U3ltICE9IGUAZS0+U3ltLT5TeW0gPT0gZQBlLT5MbmV4dC0+T25leHQtPlN5bSA9PSBlAGUtPk9uZXh0LT5TeW0tPkxuZXh0ID09IGUAZS0+TGZhY2UgPT0gZgBmLT5wcmV2ID09IGZQcmV2ICYmIGYtPmFuRWRnZSA9PSBOVUxMAHYtPnByZXYgPT0gdlByZXYAZS0+T3JnID09IHYAdi0+cHJldiA9PSB2UHJldiAmJiB2LT5hbkVkZ2UgPT0gTlVMTABlLT5TeW0tPm5leHQgPT0gZVByZXYtPlN5bQBlLT5PcmcgIT0gTlVMTABlLT5Ec3QgIT0gTlVMTABlLT5TeW0tPm5leHQgPT0gZVByZXYtPlN5bSAmJiBlLT5TeW0gPT0gJm1lc2gtPmVIZWFkU3ltICYmIGUtPlN5bS0+U3ltID09IGUgJiYgZS0+T3JnID09IE5VTEwgJiYgZS0+RHN0ID09IE5VTEwgJiYgZS0+TGZhY2UgPT0gTlVMTCAmJiBlLT5SZmFjZSA9PSBOVUxMAGZyZWUgIT0gSU5WX0hBTkRMRQBzcmMvcHJpb3JpdHlxLmMAcHFIZWFwSW5zZXJ0AGhDdXJyID49IDEgJiYgaEN1cnIgPD0gcHEtPm1heCAmJiBoW2hDdXJyXS5rZXkgIT0gTlVMTABwcUhlYXBEZWxldGUAcHEgIT0gTlVMTABwcURlbGV0ZVByaW9yaXR5UQBMRVEoICoqKGkrMSksICoqaSApAHBxSW5pdABjdXJyICE9IElOVl9IQU5ETEUAcHFJbnNlcnQAY3VyciA8IHBxLT5tYXggJiYgcHEtPmtleXNbY3Vycl0gIT0gTlVMTABwcURlbGV0ZQBjaGlsZCA8PSBwcS0+bWF4AEZsb2F0RG93bgBUT0xFUkFOQ0VfTk9OWkVSTwBzcmMvc3dlZXAuYwBDb25uZWN0TGVmdERlZ2VuZXJhdGUAcmVnLT5maXhVcHBlckVkZ2UARml4VXBwZXJFZGdlAEZBTFNFAElzV2luZGluZ0luc2lkZQByZWctPmVVcC0+d2luZGluZyA9PSAwAERlbGV0ZVJlZ2lvbgAhIFZlcnRFcSggZHN0TG8sIGRzdFVwICkAQ2hlY2tGb3JJbnRlcnNlY3QARWRnZVNpZ24oIGRzdFVwLCB0ZXNzLT5ldmVudCwgb3JnVXAgKSA8PSAwAEVkZ2VTaWduKCBkc3RMbywgdGVzcy0+ZXZlbnQsIG9yZ0xvICkgPj0gMABvcmdVcCAhPSB0ZXNzLT5ldmVudCAmJiBvcmdMbyAhPSB0ZXNzLT5ldmVudAAhIHJlZ1VwLT5maXhVcHBlckVkZ2UgJiYgISByZWdMby0+Zml4VXBwZXJFZGdlAE1JTiggb3JnVXAtPnQsIGRzdFVwLT50ICkgPD0gaXNlY3QudABpc2VjdC50IDw9IE1BWCggb3JnTG8tPnQsIGRzdExvLT50ICkATUlOKCBkc3RMby0+cywgZHN0VXAtPnMgKSA8PSBpc2VjdC5zAGlzZWN0LnMgPD0gTUFYKCBvcmdMby0+cywgb3JnVXAtPnMgKQAhIFZlcnRFcSggZVVwLT5Ec3QsIGVMby0+RHN0ICkAQ2hlY2tGb3JMZWZ0U3BsaWNlAFZlcnRMZXEoIGUtPk9yZywgZS0+RHN0ICkAQWRkUmlnaHRFZGdlcwByZWdQcmV2LT53aW5kaW5nTnVtYmVyIC0gZS0+d2luZGluZyA9PSByZWctPndpbmRpbmdOdW1iZXIARG9uZUVkZ2VEaWN0ACsrZml4ZWRFZGdlcyA9PSAxAHJlZy0+d2luZGluZ051bWJlciA9PSAwAGUtPkxuZXh0ICE9IGUAUmVtb3ZlRGVnZW5lcmF0ZUZhY2VzAHVwLT5MbmV4dCAhPSB1cCAmJiB1cC0+TG5leHQtPkxuZXh0ICE9IHVwAHNyYy90ZXNzLmMAdGVzc01lc2hUZXNzZWxsYXRlTW9ub1JlZ2lvbgBsby0+TG5leHQgIT0gdXAAUmVnaW9ucwBmYWNlVmVydHMgPD0gcG9seVNpemUAT3V0cHV0UG9seW1lc2gAQYgWCwkMAAAADQAAAA4AQbAWCwNADVA=";if(!gt(Pt)){var jt=Pt;Pt=t.locateFile?t.locateFile(jt,E):E+jt}function Xt(){try{if(_)return new Uint8Array(_);var O=Pt;if(gt(O))try{var Y=Lt(O.slice(37)),J=new Uint8Array(Y.length);for(O=0;O<Y.length;++O)J[O]=Y.charCodeAt(O);var tt=J}catch{throw Error("Converting base64 string to bytes failed.")}else tt=void 0;var rt=tt;if(rt)return rt;throw"both async and sync fetching of the wasm failed"}catch(j){Ct(j)}}function zt(){return _||typeof fetch!="function"?Promise.resolve().then(Xt):fetch(Pt,{credentials:"same-origin"}).then(function(O){if(!O.ok)throw"failed to load wasm binary file at '"+Pt+"'";return O.arrayBuffer()}).catch(function(){return Xt()})}function pt(O){for(;0<O.length;){var Y=O.shift();if(typeof Y=="function")Y(t);else{var J=Y.J;typeof J=="number"?Y.H===void 0?et.get(J)():et.get(J)(Y.H):J(Y.H===void 0?null:Y.H)}}}var Lt=typeof atob=="function"?atob:function(O){var Y="",J=0;O=O.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(O.charAt(J++)),rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(O.charAt(J++)),j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(O.charAt(J++)),ht="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(O.charAt(J++));tt=tt<<2|rt>>4,rt=(rt&15)<<4|j>>2;var v=(j&3)<<6|ht;Y+=String.fromCharCode(tt),j!==64&&(Y+=String.fromCharCode(rt)),ht!==64&&(Y+=String.fromCharCode(v))}while(J<O.length);return Y};Z.push({J:function(){U()}});var Et={a:function(O,Y,J,tt){Ct("Assertion failed: "+z(O)+", at: "+[Y?z(Y):"unknown filename",J,tt?z(tt):"unknown function"])},d:function(O,Y){throw K(O,Y||1),"longjmp"},k:function(O,Y,J){V.copyWithin(O,Y,Y+J)},l:function(O){O>>>=0;var Y=V.length;if(2147483648<O)return!1;for(var J=1;4>=J;J*=2){var tt=Y*(1+.2/J);tt=Math.min(tt,O+100663296),tt=Math.max(16777216,O,tt),0<tt%65536&&(tt+=65536-tt%65536);t:{try{F.grow(Math.min(2147483648,tt)-q.byteLength+65535>>>16),X();var rt=1;break t}catch{}rt=void 0}if(rt)return!0}return!1},c:function(){return T|0},j:Ft,g:xt,f:yt,e:vt,h:qt,i:Mt,b:function(O){T=O|0}};(function(){function O(rt){t.asm=rt.exports,F=t.asm.m,X(),et=t.asm.n,ot--,t.monitorRunDependencies&&t.monitorRunDependencies(ot),ot==0&&dt&&(rt=dt,dt=null,rt())}function Y(rt){O(rt.instance)}function J(rt){return zt().then(function(j){return WebAssembly.instantiate(j,tt)}).then(rt,function(j){w("failed to asynchronously prepare wasm: "+j),Ct(j)})}var tt={a:Et};if(ot++,t.monitorRunDependencies&&t.monitorRunDependencies(ot),t.instantiateWasm)try{return t.instantiateWasm(tt,O)}catch(rt){return w("Module.instantiateWasm callback failed with error: "+rt),!1}return function(){return _||typeof WebAssembly.instantiateStreaming!="function"||gt(Pt)||typeof fetch!="function"?J(Y):fetch(Pt,{credentials:"same-origin"}).then(function(rt){return WebAssembly.instantiateStreaming(rt,tt).then(Y,function(j){return w("wasm streaming compile failed: "+j),w("falling back to ArrayBuffer instantiation"),J(Y)})})}().catch(n),{}})();var U=t.___wasm_call_ctors=function(){return(U=t.___wasm_call_ctors=t.asm.o).apply(null,arguments)};t._malloc=function(){return(t._malloc=t.asm.p).apply(null,arguments)},t._free=function(){return(t._free=t.asm.q).apply(null,arguments)},t._tessNewTess=function(){return(t._tessNewTess=t.asm.r).apply(null,arguments)},t._tessDeleteTess=function(){return(t._tessDeleteTess=t.asm.s).apply(null,arguments)},t._tessAddContour=function(){return(t._tessAddContour=t.asm.t).apply(null,arguments)},t._tessTesselate=function(){return(t._tessTesselate=t.asm.u).apply(null,arguments)},t._tessGetVertexCount=function(){return(t._tessGetVertexCount=t.asm.v).apply(null,arguments)},t._tessGetVertices=function(){return(t._tessGetVertices=t.asm.w).apply(null,arguments)},t._tessGetVertexIndices=function(){return(t._tessGetVertexIndices=t.asm.x).apply(null,arguments)},t._tessGetElementCount=function(){return(t._tessGetElementCount=t.asm.y).apply(null,arguments)},t._tessGetElements=function(){return(t._tessGetElements=t.asm.z).apply(null,arguments)};var H=t.stackSave=function(){return(H=t.stackSave=t.asm.A).apply(null,arguments)},L=t.stackRestore=function(){return(L=t.stackRestore=t.asm.B).apply(null,arguments)},G=t.stackAlloc=function(){return(G=t.stackAlloc=t.asm.C).apply(null,arguments)},K=t._setThrew=function(){return(K=t._setThrew=t.asm.D).apply(null,arguments)};function vt(O,Y,J){var tt=H();try{et.get(O)(Y,J)}catch(rt){if(L(tt),rt!==rt+0&&rt!=="longjmp")throw rt;K(1,0)}}function yt(O,Y){var J=H();try{et.get(O)(Y)}catch(tt){if(L(J),tt!==tt+0&&tt!=="longjmp")throw tt;K(1,0)}}function Ft(O,Y){var J=H();try{return et.get(O)(Y)}catch(tt){if(L(J),tt!==tt+0&&tt!=="longjmp")throw tt;K(1,0)}}function xt(O,Y,J){var tt=H();try{return et.get(O)(Y,J)}catch(rt){if(L(tt),rt!==rt+0&&rt!=="longjmp")throw rt;K(1,0)}}function Mt(O,Y,J,tt,rt,j){var ht=H();try{et.get(O)(Y,J,tt,rt,j)}catch(v){if(L(ht),v!==v+0&&v!=="longjmp")throw v;K(1,0)}}function qt(O,Y,J,tt){var rt=H();try{et.get(O)(Y,J,tt)}catch(j){if(L(rt),j!==j+0&&j!=="longjmp")throw j;K(1,0)}}t.cwrap=function(O,Y,J,tt){J=J||[];var rt=J.every(function(j){return j==="number"});return Y!=="string"&&rt&&!tt?S(O):function(){return D(O,Y,J,arguments)}};var nt;dt=function O(){nt||at(),nt||(dt=O)};function at(){function O(){if(!nt&&(nt=!0,t.calledRun=!0,!R)){if(pt(Z),pt(N),r(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;){var Y=t.postRun.shift();W.unshift(Y)}pt(W)}}if(!(0<ot)){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)it();pt(At),0<ot||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),O()},1)):O())}}if(t.run=at,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return at(),i.ready}}();let Dh=null;const r3=async()=>{Dh=(await f_()).Tess};r3();const n3=e=>{try{const{contours:i,fillRule:t=Ur.EVENODD}=e;if(i.length<=0)return;const r=new Dh;r.addContours(i);const s={windingRule:t===Ur.EVENODD?0:1,elementType:0,polySize:3,vertexSize:2},o=r.tesselate(s);if(!o)return{elements:[],vertices:[]};const a=new Uint32Array(o.elements),h=new Float32Array(o.vertices);return r.dispose(),{elements:a,vertices:h}}catch(i){console.error(i)}},s3={build(){},triangulate(e,i){const t=()=>{const r=e.shape,n=r.contours.filter(o=>o.length>0).filter(o=>o.find(a=>isNaN(a))===void 0);if(n.length<=0)return;const s=n3({contours:n,fillRule:r.fillRule});s&&s.elements.length>0&&(s.elements.forEach(o=>{i.indices.push(o)}),s.vertices.forEach(o=>{i.points.push(o)}))};Dh?t():f_().then(async({Tess:r})=>{Dh=r,t()})}};var o3=function(i){for(var t={command:/\s*([achlmqstvz])/gi,number:/\s*([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/gi,comma:/\s*(?:(,)|\s)/g,flag:/\s*([01])/g},r={number:function(d){var A=c("number",d);return A===null?null:+A},"coordinate pair":function(d){var A=c("number",d);if(A===null&&!d)return null;c("comma");var p=c("number",!0);return{x:+A,y:+p}},"arc definition":function(d){var A=r["coordinate pair"](d);if(!A&&!d)return null;c("comma");var p=+c("number",!0);c("comma",!0);var g=!!+c("flag",!0);c("comma");var y=!!+c("flag",!0);c("comma");var I=r["coordinate pair"](!0);return{radii:A,rotation:p,large:g,clockwise:y,end:I}}},n=0,s=[];n<i.length;){var o=c("command"),a=o.toUpperCase(),h=o!==a,l;switch(a){case"M":l=f("coordinate pair").map(function(d,A){return A===1&&(o=h?"l":"L"),u({end:d})});break;case"L":case"T":l=f("coordinate pair").map(function(d){return u({end:d})});break;case"C":if(l=f("coordinate pair"),l.length%3)throw Error("Expected coordinate pair triplet at position "+n);l=l.reduce(function(d,A,p){var g=p%3;if(!g)d.push(u({cp1:A}));else{var y=d[d.length-1];y[g===1?"cp2":"end"]=A}return d},[]);break;case"Q":case"S":if(l=f("coordinate pair"),l.length&1)throw Error("Expected coordinate pair couple at position "+n);l=l.reduce(function(d,A,p){var g=p&1;if(!g)d.push(u({cp:A}));else{var y=d[d.length-1];y.end=A}return d},[]);break;case"H":case"V":l=f("number").map(function(d){return u({value:d})});break;case"A":l=f("arc definition").map(u);break;case"Z":l=[{code:"Z"}];break;default:console.warn("unparse cmd",a)}s.push.apply(s,l)}return s;function u(d){return d.code=o,d.relative=h,d}function c(d,A){t[d].lastIndex=n;var p=t[d].exec(i);if(!p||p.index!==n){if(!A)return null;throw Error("Expected "+d+" at position "+n)}return n=t[d].lastIndex,p[1]}function f(d){for(var A=[],p,g=!0;(p=r[d](g))!==null;)A.push(p),g=!!c("comma");return A}};nA.FILL_COMMANDS[Oh]=s3;class Fh extends Zn{constructor(t,r){super(t);x(this,"currentPath2");x(this,"dPath");x(this,"fillRule",Ur.NONZERO);x(this,"type",Qt.PATH);x(this,"startPoly",this.startPath);x(this,"finishPoly",this.finishPath);if(r){const n=typeof r.dPath=="string"?`d="${r.dPath}"`:"",s=new DOMParser().parseFromString(`<path ${n} />`,"image/svg+xml").documentElement;this.embedPath(s,r.fillRule),this.addHitArea(),this.parseJSON(r),this.draw()}this.interactive=!0}startPath(){this.currentPath2?this.currentPath2.points.length>0&&this.currentPath2.closeContour():this.currentPath2=new dA}finishPath(){this.currentPath2&&this.currentPath2.closeContour()}getRealPoints(t){const r=[];return this.geometry.graphicsData.forEach(s=>{const{shape:o}=s;o.contours.forEach(h=>{if(h.length>0){let l=$C(h);t&&(l=KC(l,this,t)),r.push(l)}})}),r}get currentPath(){return this.currentPath2}set currentPath(t){if(t)throw new Error("currentPath cannot be set")}closePath(){return this.currentPath2.points.push(this.currentPath2.points[0],this.currentPath2.points[1]),this.finishPath(),this}checkPath(){if(this.currentPath2.points.find(t=>isNaN(t))!==void 0)throw new Error("NaN is bad")}isCommandsValid(t){const r=o=>o.code.toUpperCase()==="M";return!t.every(r)}parseElement(t){var a,h;const r=t.getAttribute("d");if(this.dPath=r,!r)return;const n=o3(r.trim());if(!this.isCommandsValid(n))return;let s=0,o=0;for(let l=0,u=n.length;l<u;l++){const c=n[l-1],f=n[l];if(isNaN(s)||isNaN(o))throw new Error("Data corruption");switch(f.code){case"m":{this.moveTo(s+=f.end.x,o+=f.end.y);break}case"M":{this.moveTo(s=f.end.x,o=f.end.y);break}case"H":{this.lineTo(s=f.value,o);break}case"h":{this.lineTo(s+=f.value,o);break}case"V":{this.lineTo(s,o=f.value);break}case"v":{this.lineTo(s,o+=f.value);break}case"z":case"Z":{s=((a=this.currentPath2)==null?void 0:a.points[0])||0,o=((h=this.currentPath2)==null?void 0:h.points[1])||0,this.closePath();break}case"L":{this.lineTo(s=f.end.x,o=f.end.y);break}case"l":{this.lineTo(s+=f.end.x,o+=f.end.y);break}case"C":{this.bezierCurveTo(f.cp1.x,f.cp1.y,f.cp2.x,f.cp2.y,s=f.end.x,o=f.end.y);break}case"c":{const d=s,A=o;this.bezierCurveTo(d+f.cp1.x,A+f.cp1.y,d+f.cp2.x,A+f.cp2.y,s+=f.end.x,o+=f.end.y);break}case"s":case"S":{const d={x:s,y:o},A=n[l-1]?n[l-1].code:null;if(l>0&&(A==="s"||A==="S"||A==="c"||A==="C")){const g=n[l-1],y={...g.cp2||g.cp};n[l-1].relative&&(y.x+=s-g.end.x,y.y+=o-g.end.y),d.x=2*s-y.x,d.y=2*o-y.y}const p={x:f.cp.x,y:f.cp.y};f.relative?(p.x+=s,p.y+=o,s+=f.end.x,o+=f.end.y):(s=f.end.x,o=f.end.y),this.bezierCurveTo(d.x,d.y,p.x,p.y,s,o);break}case"q":{const d=s,A=o;this.quadraticCurveTo(d+f.cp.x,A+f.cp.y,s+=f.end.x,o+=f.end.y);break}case"Q":{this.quadraticCurveTo(f.cp.x,f.cp.y,s=f.end.x,o=f.end.y);break}case"A":this.ellipticArcTo(s=f.end.x,o=f.end.y,f.radii.x,f.radii.y,(f.rotation||0)*Math.PI/180,!f.clockwise,f.large);break;case"a":this.ellipticArcTo(s+=f.end.x,o+=f.end.y,f.radii.x,f.radii.y,(f.rotation||0)*Math.PI/180,!f.clockwise,f.large);break;case"t":case"T":{let d,A;if(c&&c.cp){let p=c.cp.x,g=c.cp.y;if(c.relative){const y=s-c.end.x,I=o-c.end.y;p+=y,g+=I}d=2*s-p,A=2*o-g}else d=s,A=o;f.code==="t"?this.quadraticCurveTo(d,A,s+=f.end.x,o+=f.end.y):this.quadraticCurveTo(d,A,s=f.end.x,o=f.end.y);break}default:{console.warn("[PIXI.SVG] Draw command not supported:",f.code,f);break}}}}embedPath(t,r){return this.parseElement(t),this.currentPath2&&(this.currentPath2.fillRule=r||t.getAttribute("fill-rule")||this.currentPath2.fillRule,this.fillRule=this.currentPath2.fillRule,this.drawShape(this.currentPath2),this.currentPath2=null),this}toJSON(t){const{dPath:r,x:n,y:s}=this,o=super.toJSON(t),a=this.parent.toGlobal(new M(n,s)),{x:h,y:l}=t.toLocal({x:a.x,y:a.y});return{...o,dPath:r,fillRule:this.fillRule,graphicX:h,graphicY:l}}}const qr=new Tt;class a3{constructor(i={}){this._recursive=typeof i.recursive=="boolean"?i.recursive:!0,this._toggle=i.toggle||"visible",this._targetList=new Set}add(i){return this._targetList.add(i),this}addAll(i){for(let t=0,r=i.length;t<r;t++)this._targetList.add(i[t]);return this}remove(i){return this._targetList.delete(i),this}removeAll(i){for(let t=0,r=i.length;t<r;t++)this._targetList.delete(i[t]);return this}clear(){return this._targetList.clear(),this}cull(i,t=!1){return t||this.uncull(),this._targetList.forEach(r=>{t||r.getBounds(!1,qr),this._recursive?this.cullRecursive(i,r,t):(t&&r._bounds.getRectangle(i),r[this._toggle]=qr.right>i.left&&qr.left<i.right&&qr.bottom>i.top&&qr.top<i.bottom)}),this}uncull(){return this._targetList.forEach(i=>{this._recursive?this.uncullRecursive(i):i[this._toggle]=!1}),this}cullRecursive(i,t,r){const n=r?t._bounds.getRectangle(qr):t.getBounds(!0,qr);if(t[this._toggle]=n.right>i.left&&n.left<i.right&&n.bottom>i.top&&n.top<i.bottom,!(n.left>=i.left&&n.top>=i.top&&n.right<=i.right&&n.bottom<=i.bottom)&&t[this._toggle]&&t.children&&t.children.length){const o=t.children;for(let a=0,h=o.length;a<h;a++)this.cullRecursive(i,o[a])}}uncullRecursive(i){if(i[this._toggle]=!0,i.children&&i.children.length){const t=i.children;for(let r=0,n=t.length;r<n;r++)this.uncullRecursive(t[r])}}}var Ze;(function(e){e[e.HORIZONTAL=0]="HORIZONTAL";const t=1;e[e.VERTICAL=t]="VERTICAL"})(Ze||(Ze={}));class ee{static makeArea(i,t,r){return i|t<<15|r<<30}static getOpenOffset(i){return i&(1<<15)-1}static getCloseOffset(i){return i>>15&(1<<15)-1}static getOrientation(i){return i>>30&1}static setOpenOffset(i,t){return ee.makeArea(t,ee.getCloseOffset(i),ee.getOrientation(i))}static setCloseOffset(i,t){return ee.makeArea(ee.getOpenOffset(t),t,ee.getOrientation(i))}}var Zi;(function(e){e[e.HOR=0]="HOR";const t=1;e[e.VERT=t]="VERT";const r=2;e[e.NONE=r]="NONE"})(Zi||(Zi={}));const sy=new Tt;class d_{constructor(i,t){this._width=i,this._height=t,this._root=[null,ee.makeArea(0,this._height,Ze.HORIZONTAL),!1]}allocate(i,t,r){const n=this.findArea(i,t);if(!n)return null;r||(r=new Tt),this.getFrame(n,r);const s=new Tt(r.x,r.y,i,t),o=this.split(n,r,s);return r.copyFrom(s),r.__mem_area=o,r}free(i){const t=i.__mem_area;t[2]=!1,this.merge(t)}get width(){return this._width}get height(){return this._height}getAreaField(i){return i[1]}getFrame(i,t){t||(t=new Tt);const r=this.getAreaField(i),n=this.getParent(i),s=ee.getOrientation(r),o=ee.getOpenOffset(r),a=ee.getCloseOffset(r),h=n?ee.getOpenOffset(n[1]):0,l=n?ee.getCloseOffset(n[1]):this._width;return s?(t.x=o,t.y=h,t.width=a-t.x,t.height=l-h):(t.x=h,t.y=o,t.width=l-t.x,t.height=a-t.y),t}getParent(i){return i[0]}hasChildren(i){return Array.isArray(i[2])&&i[2].length!==0}getChildren(i){if(!Array.isArray(i[2]))throw new Error("Children don't exist");return i[2]}addChild(i,...t){i[2]=Array.isArray(i[2])?i[2]:[],i[2].push(...t)}findArea(i,t){return this.findAreaRecursive(this._root,i,t)}findAreaRecursive(i,t,r){const n=this.getFrame(i,sy);if(n.width<t||n.height<r)return null;if(!this.hasChildren(i)){const h=n.width-t,l=n.height-r;return h<0||l<0||i[2]?null:i}const s=this.getChildren(i);let o=null,a=1/0;for(let h=0,l=s.length;h<l;h++){const u=this.findAreaRecursive(s[h],t,r);if(!u)continue;const c=this.getFrame(u,sy),f=c.width-t,d=c.height-r;if(f<0||d<0)continue;if(!f&&!d)return u;const A=Math.min(f,d);a>A&&(o=u,a=A)}return o}splitOrientation(i,t){if(t.width===i.width&&t.height===i.height)return Zi.NONE;if(t.width===i.width)return Zi.VERT;if(t.height===i.height)return Zi.HOR;const r=Math.abs((i.width-t.width)*i.height-t.width*(i.height-t.height)),n=Math.abs(i.width*(i.height-t.height)-(i.width-t.width)*t.height);return r>n?Zi.HOR:Zi.VERT}split(i,t,r,n=this.getParent(i)?this.splitOrientation(t,r):Zi.HOR){if(i[2]===!0)throw new Error("Cannot deallocate");return n===Zi.NONE?(i[2]=!0,i):this[n===Zi.HOR?"splitPrimaryHorizontal":"splitPrimaryVertical"](i,t,r)}splitPrimaryHorizontal(i,t,r){const n=this.getAreaField(i),s=ee.getOrientation(n),o=this.getParent(i);if(this.hasChildren(i))throw new Error("Can't split non-leaf node");const a=[i,ee.makeArea(t.left,t.x+r.width,Ze.VERTICAL),[]],h=[i,ee.makeArea(t.x+r.width,t.right,Ze.VERTICAL),!1];if(s===Ze.HORIZONTAL)this.addChild(i,a,h);else{const l=this.getChildren(o).indexOf(i);a[0]=o,h[0]=o,this.getChildren(o).splice(l,1,a,h)}if(r.height!==t.height){const l=[a,ee.makeArea(t.top,t.y+r.height,Ze.HORIZONTAL),!0],u=[a,ee.makeArea(t.y+r.height,t.bottom,Ze.HORIZONTAL),!1];return this.addChild(a,l,u),l}else a[2]=!0;return a}splitPrimaryVertical(i,t,r){const n=this.getAreaField(i),s=ee.getOrientation(n),o=this.getParent(i);if(this.hasChildren(i))throw new Error("Can't split non-leaf node");const a=[i,ee.makeArea(t.top,t.y+r.height,Ze.HORIZONTAL),[]],h=[i,ee.makeArea(t.y+r.height,t.bottom,Ze.HORIZONTAL),!1];if(s===Ze.VERTICAL)this.addChild(i,a,h);else{const l=this.getChildren(o).indexOf(i);a[0]=o,h[0]=o,this.getChildren(o).splice(l,1,a,h)}if(r.width!==t.height){const l=[a,ee.makeArea(t.left,t.x+r.width,Ze.VERTICAL),!0],u=[a,ee.makeArea(t.x+r.width,t.right,Ze.VERTICAL),!1];return this.addChild(a,l,u),l}else a[2]=!0;return a}merge(i){if(this.hasChildren(i))throw new Error("Cannot merge a non-leaf node");const t=this.getParent(i);if(!t)return;const r=this.getChildren(t),n=r.indexOf(i),s=r[n-1],o=r[n+1];o&&o[2]===!1&&(i[1]=ee.setCloseOffset(i[1],ee.getCloseOffset(o[1])),r.splice(n+1,1)),s&&s[2]===!1&&(i[1]=ee.setOpenOffset(i[1],ee.getOpenOffset(s[1])),r.splice(n-1,1)),r.length===1&&(t[2]=!1,this.merge(t))}printState(i){this.hasChildren(i)?this.getChildren(i).forEach(t=>this.printState(t)):console.log({...this.getFrame(i)},i[2])}}const Qu=new Tt;class h3{constructor(i=2048,t=2048){this.slabWidth=i,this.slabHeight=t,this.textureSlabs=[]}get maxWidth(){return this.slabWidth-2*this.calculatePadding(this.slabWidth,this.slabHeight)}get maxHeight(){return this.slabHeight-2*this.calculatePadding(this.slabWidth,this.slabHeight)}allocate(i,t,r=this.calculatePadding(i,t)){if(i+2*r>this.slabWidth||t+2*r>this.slabHeight)return null;const n=this.textureSlabs;for(let o=0,a=n.length;o<a;o++){const h=n[o],l=this.issueTexture(h,i,t,r);if(l)return l}const s=this.createSlab();return this.textureSlabs.unshift(s),this.issueTexture(s,i,t,r)}free(i){const t=i.baseTexture,r=this.textureSlabs.find(s=>s.slab===t);if(!r)throw new Error("The texture cannot be freed because its base-texture is not pooled by this allocator. This is either a bug in TextureAllocator or you tried to free a texture that was never allocated by one.");const n=r.managedTextures.find(s=>s.texture===i);if(!n)throw new Error("The texture cannot be freed because it was not found in the managed list of issued textures on its slab. This may be because you duplicated this texture or a bug in TextureAllocator");r.managedArea.free(n.area),r.managedTextures.splice(r.managedTextures.indexOf(n),1)}calculatePadding(i,t){const r=Math.max(i,t);return r<64?2:r<128?4:r<1024?8:16}createSlab(){return{managedArea:new d_(this.slabWidth,this.slabHeight),managedTextures:[],slab:new Wt(null,{width:this.slabWidth,height:this.slabHeight})}}createTexture(i,t){return new Ot(i,t)}issueTexture(i,t,r,n=0){const s=i.managedArea.allocate(t+2*n,r+2*n);if(!s)return null;Qu.copyFrom(s),Qu.pad(-n);const o=i.slab,a=this.createTexture(o,Qu.clone());return i.managedTextures.push({area:s,texture:a}),a}}class A_ extends h3{createSlab(){const i=document.createElement("canvas");return i.width=this.slabWidth,i.height=this.slabHeight,{managedArea:new d_(this.slabWidth,this.slabHeight),managedTextures:[],slab:new Wt(i,{width:this.slabWidth,height:this.slabHeight})}}}var l3={grad:.9,turn:360,rad:360/(2*Math.PI)},cr=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},Be=function(e,i,t){return i===void 0&&(i=0),t===void 0&&(t=Math.pow(10,i)),Math.round(t*e)/t+0},gi=function(e,i,t){return i===void 0&&(i=0),t===void 0&&(t=1),e>t?t:e>i?e:i},p_=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},oy=function(e){return{r:gi(e.r,0,255),g:gi(e.g,0,255),b:gi(e.b,0,255),a:gi(e.a)}},Uu=function(e){return{r:Be(e.r),g:Be(e.g),b:Be(e.b),a:Be(e.a,3)}},u3=/^#([0-9a-f]{3,8})$/i,Ka=function(e){var i=e.toString(16);return i.length<2?"0"+i:i},g_=function(e){var i=e.r,t=e.g,r=e.b,n=e.a,s=Math.max(i,t,r),o=s-Math.min(i,t,r),a=o?s===i?(t-r)/o:s===t?2+(r-i)/o:4+(i-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:n}},v_=function(e){var i=e.h,t=e.s,r=e.v,n=e.a;i=i/360*6,t/=100,r/=100;var s=Math.floor(i),o=r*(1-t),a=r*(1-(i-s)*t),h=r*(1-(1-i+s)*t),l=s%6;return{r:255*[r,a,o,o,h,r][l],g:255*[h,r,r,a,o,o][l],b:255*[o,o,h,r,r,a][l],a:n}},ay=function(e){return{h:p_(e.h),s:gi(e.s,0,100),l:gi(e.l,0,100),a:gi(e.a)}},hy=function(e){return{h:Be(e.h),s:Be(e.s),l:Be(e.l),a:Be(e.a,3)}},ly=function(e){return v_((t=(i=e).s,{h:i.h,s:(t*=((r=i.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:i.a}));var i,t,r},ro=function(e){return{h:(i=g_(e)).h,s:(n=(200-(t=i.s))*(r=i.v)/100)>0&&n<200?t*r/100/(n<=100?n:200-n)*100:0,l:n/2,a:i.a};var i,t,r,n},c3=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,f3=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,d3=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,A3=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,uy={string:[[function(e){var i=u3.exec(e);return i?(e=i[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?Be(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?Be(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var i=d3.exec(e)||A3.exec(e);return i?i[2]!==i[4]||i[4]!==i[6]?null:oy({r:Number(i[1])/(i[2]?100/255:1),g:Number(i[3])/(i[4]?100/255:1),b:Number(i[5])/(i[6]?100/255:1),a:i[7]===void 0?1:Number(i[7])/(i[8]?100:1)}):null},"rgb"],[function(e){var i=c3.exec(e)||f3.exec(e);if(!i)return null;var t,r,n=ay({h:(t=i[1],r=i[2],r===void 0&&(r="deg"),Number(t)*(l3[r]||1)),s:Number(i[3]),l:Number(i[4]),a:i[5]===void 0?1:Number(i[5])/(i[6]?100:1)});return ly(n)},"hsl"]],object:[[function(e){var i=e.r,t=e.g,r=e.b,n=e.a,s=n===void 0?1:n;return cr(i)&&cr(t)&&cr(r)?oy({r:Number(i),g:Number(t),b:Number(r),a:Number(s)}):null},"rgb"],[function(e){var i=e.h,t=e.s,r=e.l,n=e.a,s=n===void 0?1:n;if(!cr(i)||!cr(t)||!cr(r))return null;var o=ay({h:Number(i),s:Number(t),l:Number(r),a:Number(s)});return ly(o)},"hsl"],[function(e){var i=e.h,t=e.s,r=e.v,n=e.a,s=n===void 0?1:n;if(!cr(i)||!cr(t)||!cr(r))return null;var o=function(a){return{h:p_(a.h),s:gi(a.s,0,100),v:gi(a.v,0,100),a:gi(a.a)}}({h:Number(i),s:Number(t),v:Number(r),a:Number(s)});return v_(o)},"hsv"]]},cy=function(e,i){for(var t=0;t<i.length;t++){var r=i[t][0](e);if(r)return[r,i[t][1]]}return[null,void 0]},p3=function(e){return typeof e=="string"?cy(e.trim(),uy.string):typeof e=="object"&&e!==null?cy(e,uy.object):[null,void 0]},Gu=function(e,i){var t=ro(e);return{h:t.h,s:gi(t.s+100*i,0,100),l:t.l,a:t.a}},ku=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},fy=function(e,i){var t=ro(e);return{h:t.h,s:t.s,l:gi(t.l+100*i,0,100),a:t.a}},dy=function(){function e(i){this.parsed=p3(i)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return Be(ku(this.rgba),2)},e.prototype.isDark=function(){return ku(this.rgba)<.5},e.prototype.isLight=function(){return ku(this.rgba)>=.5},e.prototype.toHex=function(){return i=Uu(this.rgba),t=i.r,r=i.g,n=i.b,o=(s=i.a)<1?Ka(Be(255*s)):"","#"+Ka(t)+Ka(r)+Ka(n)+o;var i,t,r,n,s,o},e.prototype.toRgb=function(){return Uu(this.rgba)},e.prototype.toRgbString=function(){return i=Uu(this.rgba),t=i.r,r=i.g,n=i.b,(s=i.a)<1?"rgba("+t+", "+r+", "+n+", "+s+")":"rgb("+t+", "+r+", "+n+")";var i,t,r,n,s},e.prototype.toHsl=function(){return hy(ro(this.rgba))},e.prototype.toHslString=function(){return i=hy(ro(this.rgba)),t=i.h,r=i.s,n=i.l,(s=i.a)<1?"hsla("+t+", "+r+"%, "+n+"%, "+s+")":"hsl("+t+", "+r+"%, "+n+"%)";var i,t,r,n,s},e.prototype.toHsv=function(){return i=g_(this.rgba),{h:Be(i.h),s:Be(i.s),v:Be(i.v),a:Be(i.a,3)};var i},e.prototype.invert=function(){return Oi({r:255-(i=this.rgba).r,g:255-i.g,b:255-i.b,a:i.a});var i},e.prototype.saturate=function(i){return i===void 0&&(i=.1),Oi(Gu(this.rgba,i))},e.prototype.desaturate=function(i){return i===void 0&&(i=.1),Oi(Gu(this.rgba,-i))},e.prototype.grayscale=function(){return Oi(Gu(this.rgba,-1))},e.prototype.lighten=function(i){return i===void 0&&(i=.1),Oi(fy(this.rgba,i))},e.prototype.darken=function(i){return i===void 0&&(i=.1),Oi(fy(this.rgba,-i))},e.prototype.rotate=function(i){return i===void 0&&(i=15),this.hue(this.hue()+i)},e.prototype.alpha=function(i){return typeof i=="number"?Oi({r:(t=this.rgba).r,g:t.g,b:t.b,a:i}):Be(this.rgba.a,3);var t},e.prototype.hue=function(i){var t=ro(this.rgba);return typeof i=="number"?Oi({h:i,s:t.s,l:t.l,a:t.a}):Be(t.h)},e.prototype.isEqual=function(i){return this.toHex()===Oi(i).toHex()},e}(),Oi=function(e){return e instanceof dy?e:new dy(e)};class g3{static converToLayerColor(i){return i}}const y_=new wh;y_.matrix=[.33,.33,.33,0,0,0,0,0,0,0,0,0,0,0,0,.33,.33,.33,0,0];const v3=new Tt,y3=new Tt;class m3 extends Ke{render(i){}}class I3 extends Ke{constructor(t){super(t);x(this,"dirtyId");x(this,"updateId");this.dirtyId=0,this.updateId=-1}render(t){if(this.dirtyId!==this.updateId){this.texture.baseTexture.setSize(this.texture.width,this.texture.height,t.resolution),t.batch.flush();const r=t.renderTexture.current,n=v3.copyFrom(t.renderTexture.sourceFrame),s=y3.copyFrom(t.renderTexture.destinationFrame),o=this.getLocalBounds(null),a=this.children;t.renderTexture.bind(this.texture,o),t.renderTexture.clear(),t.filter.push({filterArea:o,getBounds:()=>o},[y_]);for(let h=0,l=a.length;h<l;h++){const u=a[h];u.enableTempParent(),u.updateTransform(),a[h].render(t),u.disableTempParent(this)}t.batch.flush(),t.filter.pop(),t.renderTexture.bind(r,n,s),this.updateId=this.dirtyId,this.getBounds()}}createMask(t){return new m3(this.texture)}}class C3 extends $t{constructor(){super(...arguments);x(this,"isRefExternal",!1);x(this,"_ref")}embedUse(t){t.x.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX),t.y.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX),t.width.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX),t.height.baseVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX);const r=t.x.baseVal.valueInSpecifiedUnits,n=t.y.baseVal.valueInSpecifiedUnits;this.position.set(r,n)}get ref(){return this._ref}set ref(t){if(this._ref){if(this._ref===t)return;this.removeChild(this._ref)}this._ref=t,this.addChild(this._ref)}}const _3=new kt,x3=new Tt;class Lh extends Jt{constructor(t,r,n=!0){super();x(this,"content");x(this,"root");x(this,"renderServers");x(this,"_context");x(this,"_width");x(this,"_height");x(this,"_cull");x(this,"_elementToPaint");x(this,"_elementToMask");x(this,"_transformDirty");x(this,"sortDirty",!1);x(this,"onNodeTransformDirty",()=>{this._transformDirty=!0,this.emit("transformdirty",this)});this.content=t,this.parseColor=n,this.initContext(r),this._width=t.viewBox.baseVal.width,this._height=t.viewBox.baseVal.height,this._cull=new a3({recursive:!0,toggle:"renderable"}),this._elementToPaint=new Map,this._elementToMask=new Map,this._transformDirty=!0,this.renderServers=new $t,console.log("[ this.content ] >",this.content.sheet),(!r||!r.disableRootPopulation)&&this.populateScene()}initContext(t){t=t||{},t.atlas=t.atlas||new A_(2048,2048),t.disableHrefSVGLoading=typeof t.disableHrefSVGLoading>"u"?!1:t.disableHrefSVGLoading,this._context=t}calculateBounds(){this._bounds.clear(),this._bounds.addFrameMatrix(this.worldTransform,0,0,this.content.viewBox.baseVal.width,this.content.viewBox.baseVal.height)}removeChild(){}render(t){!this.visible||!this.renderable||(this.renderServers.render(t),this._cull.cull(t.renderTexture.sourceFrame,!0),this.root.render(t),this._cull.uncull())}updateTransform(){super.updateTransform(),this.root.alpha=this.worldAlpha;const t=this.worldTransform,r=this.root.transform.worldTransform;r.a===t.a&&r.b===t.b&&r.c===t.c&&r.d===t.d&&r.tx===t.tx&&r.ty===t.ty&&r._worldID!==0&&!this._transformDirty||(this.root.enableTempParent(),this.root.transform.setFromMatrix(this.worldTransform),this.root.updateTransform(),this.root.disableTempParent(null),this.root.calculateBounds(),this._transformDirty=!1)}createNode(t){if(!t)return null;let r=null;switch(t.nodeName.toLowerCase()){case"circle":r=new uA;break;case"line":r=new Do;break;case"polyline":t.points.length===2?r=new Do:r=new Zn;break;case"ellipse":case"g":case"polygon":case"switch":case"rect":r=new Zn(this._context);break;case"image":const n=t.getAttribute("href")||t.getAttribute("xlink:href");r=yQ(n)?new Vi(n):null;break;case"mask":case"svg":r=new $t;break;case"path":r=new Fh(this._context);break;case"use":r=new C3;break;default:r=null;break}return r}createPaint(t){return t instanceof SVGElement?new Lo(t):null}createPaintServer(t){const r=oi.create({width:128,height:128});return new KG(t,r)}createMask(t){t instanceof SVGElement&&(t=this.populateSceneRecursive(t,{basePaint:this.queryInheritedPaint(t)}));const r=t.getLocalBounds();t.getBounds();const n=oi.create({width:r.width,height:r.height}),s=new I3(n);return s.addChild(t),s}queryMask(t){let r=this._elementToMask.get(t);return r||(r=this.createMask(t),this._elementToMask.set(t,r)),r}queryPaint(t){let r=this._elementToPaint.get(t);return r||(r=this.createPaint(t),this._elementToPaint.set(t,r)),r}queryInheritedPaint(t){const r=this.queryPaint(t),n=t.parentElement&&this.queryPaint(t.parentElement);return n?new X0(n,r):r}parseReference(t){if(t.startsWith("url")){let r=t.slice(4,-1);return r.startsWith("'")&&r.endsWith("'")&&(r=r.slice(1,-1)),r}return t}embedIntoNode(t,r,n={}){const{basePaint:s}=n,o=s?new X0(s,this.queryPaint(r)):this.queryPaint(r),{stroke:a,strokeDashArray:h,strokeDashOffset:l,strokeLineCap:u,strokeLineJoin:c,strokeMiterLimit:f,strokeWidth:d}=o,A=r instanceof SVGGraphicsElement?r.transform.baseVal.consolidate():null,p=_3.clone().identity();if(A&&A.matrix){const{matrix:{a:y,b:I,c:E,d:w,e:T,f:_}}=A;p.set(y,I,E,w,T,_)}if(t instanceof Zn){t.beginFill(0,0);let y;if(typeof a=="string"&&a.startsWith("url")){const E=this.parseReference(a),w=this.content.querySelector(E);if(w&&w instanceof SVGGradientElement){const T=this.createPaintServer(w),_=T.paintTexture;t.paintServers.push(T),y=_}}const I=a===null?0:typeof a=="number"?a:16777215;t.lineTextureStyle({color:I,cap:u===null?Me.SQUARE:u,dashArray:h,dashOffset:l===null?l:0,join:c===null?si.MITER:c,matrix:new kt,miterLimit:f===null?150:f,texture:y||Ot.WHITE,width:d===null?typeof a=="number"?1:0:d})}const g=getComputedStyle(r);if(t instanceof Ps&&this.parseColor){const y=g.stroke==="none"?g.fill:g.stroke;g.stroke==="none"&&g.fill==="none"&&(t.isValid=!1);let I=Oi(y).toHex();I=g3.converToLayerColor(I),I=Oi(I).toHex(),t.layerColor=I,t.layerTag=I}switch(r.nodeName.toLowerCase()){case"circle":t.embedCircle(r);break;case"ellipse":t.embedEllipse(r);break;case"image":t.embedImage(r);break;case"line":t.embedLine(r);break;case"path":t.embedPath(r,g["fill-rule"]);break;case"polyline":r.points.length,t.embedPolyline(r);break;case"polygon":t.embedPolygon(r);break;case"rect":t.embedRect(r);break;case"text":t.embedText(r);break;case"use":{const y=r,I=y.getAttribute("href")||y.getAttribute("xlink:href"),E=this.queryPaint(y);if(t.embedUse(y),I.startsWith("#")){const w=this.content.querySelector(I),T=this.populateSceneRecursive(w,{basePaint:E});T&&(t.ref=T)}else this._context.disableHrefSVGLoading||(t.isRefExternal=!0,H0(I).then(w=>[new Lh(w,{...this._context,disableRootPopulation:!0}),w.querySelector("#"+I.split("#")[1])]).then(([w,T])=>{T||console.error(`SVGScene failed to resolve ${I} and SVGUseNode is empty!`);const _=w.populateSceneRecursive(T,{basePaint:E});t.ref=_,this._transformDirty=!0,w.on("transformdirty",()=>{this._transformDirty=!0})}))}}return t.transform.updateLocalTransform(),p.append(t.transform.localTransform),t.transform.setFromMatrix(p),r instanceof SVGMaskElement&&this._elementToMask.set(r,this.createMask(t)),{paint:o}}populateSceneRecursive(t,r){const n=this.createNode(t);if(!n)return null;n.on("nodetransformdirty",this.onNodeTransformDirty);let s;(t instanceof SVGGraphicsElement||t instanceof SVGMaskElement)&&(s=this.embedIntoNode(n,t,r).paint,n instanceof Fh&&n.addHitArea());for(let o=0,a=t.children.length;o<a;o++){const h=this.populateSceneRecursive(t.children[o],{basePaint:s});h&&n.addChild(h)}if(n instanceof Zn){const o=n.getLocalBounds(x3),a=n.paintServers,{x:h,y:l,width:u,height:c}=o;n.paintServers.forEach(A=>{A.resolvePaintDimensions(o)});const f=n.geometry,d=f.graphicsData;d&&(d.forEach(A=>{const p=A.fillStyle,g=A.lineStyle;if(p.texture&&a.find(y=>y.paintTexture===p.texture)){const y=p.texture.width,I=p.texture.height;A.fillStyle.matrix.invert().scale(u/y,c/I).invert()}if(p.matrix&&p.matrix.invert().translate(h,l).invert(),g.texture&&a.find(y=>y.paintTexture===g.texture)){const y=g.texture.width,I=g.texture.height;A.lineStyle.matrix.invert().scale(u/y,c/I).invert()}g.matrix&&g.matrix.invert().translate(h,l).invert()}),f.updateBatches())}return t instanceof SVGMaskElement?null:n}populateScene(){this.root&&this._cull.remove(this.root);const t=this.populateSceneRecursive(this.content);this.root=t,this._cull.add(this.root)}get width(){return this._width}set width(t){this._width=t,this.scale.x=this._width/this.content.viewBox.baseVal.width}get height(){return this._height}set height(t){this._height=t,this.scale.y=this._height/this.content.viewBox.baseVal.height}static async from(t,r){return new Lh(await H0(t),r)}}class m_ extends Lh{constructor(i,t,r){super(i,t,r)}fitToParent(){if(!this.root)return;const{left:i,top:t}=this.root.getLocalBounds();this.root.x=-i,this.root.y=-t}}function qf(e){let i;if(typeof e=="string"&&e){const t=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]?|[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g;i=e.match(t)}return i??[]}function ir(e,i){switch(e){case Qt.CIRCLE:return new uA(i);case Qt.LINE:return new Do(i);case Qt.PEN:return new fA(i);case Qt.RECT:return new n_(i);case Qt.TEXT:return new b3(i);case Qt.PATH:const t={atlas:new A_(2048,2048),disableHrefSVGLoading:!1};return new Fh(t,i);case Qt.POLYGON:return new Ul(i);case Qt.BITMAP:const r=i;return new Vi(r.base64,r);default:return}}function Mh(e,i,t=!1,r=!0){const n=e.map(s=>{const o={...s},a=s.type;t&&(o.sourceId=o.id,o.id=ua());const h=ir(a,o);return h&&(i.addToLayer(h),Fo(h,new M(o.x,o.y),i)),h});return r&&AQ(n),n}function E3(e,i,t=0){const r=new M(0,0);e.worldTransform.applyInverse(i,r);const n=e._texture.orig.width,s=e._texture.orig.height,o=-n*e.anchor.x;let a=0;return r.x>=o-t&&r.x<o+n+t&&(a=-s*e.anchor.y,r.y>=a-t&&r.y<a+s+t)}function I_(e){let i=e.width,t=e.height;const r=e.getContext("2d"),s=r.getImageData(0,0,i,t).data,o=s.length,a={top:null,left:null,right:null,bottom:null};let h=null,l,u,c;for(l=0;l<o;l+=4)s[l+3]!==0&&(u=l/4%i,c=~~(l/4/i),a.top===null&&(a.top=c),(a.left===null||u<a.left)&&(a.left=u),(a.right===null||a.right<u+1)&&(a.right=u+1),(a.bottom===null||a.bottom<c)&&(a.bottom=c));return a.top!==null&&(i=a.right-a.left,t=a.bottom-a.top+1,h=r.getImageData(a.left,a.top,i,t)),{height:t,width:i,data:h}}const $a=72;class b3 extends Ps{constructor(t){t=uo($A({text:Mg,style:LD}),t);super();x(this,"text",Mg);x(this,"lines",[]);x(this,"style");x(this,"triggerGlyphsChange",["text","style.fontSize","style.fontFamily","style.fontSubfamily","style.fontSource"]);x(this,"triggerStyleChange",["leading","letterSpacing","align"]);x(this,"fontData");this.type=Qt.TEXT,this.interactive=!0,this.isClosePath=!0,this.parseJSON(t)}highlightBound(){this.children.forEach(r=>{r.highlightBound()})}reset(){this.children.forEach(r=>{r.reset()})}createSVGPathNode(t){const r=ir(Qt.PATH,t);return r.interactive=!1,r}end(){this.done()}done(){this.emit(Le.DRAW_DONE,this)}toJSON(t){const{width:r,height:n,text:s,isFill:o}=this,a=super.toJSON(t),h=$A(this.fontData)??null,l=this.children.map(u=>u.toJSON(t));return{...a,text:s,isFill:o,width:r,height:n,resolution:1,fillColor:this.config.fillColor,lineColor:this.config.lineColor,style:{...this.style},fontData:h,charJSONs:l}}containsPoint(t){const r=this.getLocalBounds(),n=this.toLocal(t);return r.contains(n.x,n.y)}parseJSON(t){super.parseJSON(t);const{text:r=this.text,style:n={},width:s,height:o,fillColor:a,lineColor:h,isFill:l,layerTag:u,layerColor:c}=t;this.style={...this.style,...n};let f=!1;this.text=r,Tn(t,this.triggerGlyphsChange)&&(f=!0,this.updateText()),Tn(n,this.triggerStyleChange)&&!f&&this.updateTextStyle(),s&&(this.width=s),o&&(this.height=o),Tn(t,["isFill","lineColor","fillColor","layerTag","layerColor"])&&this.parseNodeJSON({fillColor:a,lineColor:h,isFill:l,layerTag:u,layerColor:c})}parseNodeJSON(t){this.children.forEach(n=>{n.parseJSON(t)})}reDraw(){this.children.forEach(t=>{t.reDraw()})}toggleFill(t=this.isFill){this.children.forEach(n=>{n.toggleFill(t)})}destroyChildren(){const t=this.removeChildren(0,this.children.length);for(let r=0;r<t.length;++r)t[r].destroy()}transformCommit(){this.converHeightToFontSize()}converHeightToFontSize(){this.style.fontSize=$a*this.scale.y}updateText(){const{text:t,style:{fontFamily:r,fontSubfamily:n,fontSource:s,fontSize:o}}=this,a=fi.measureText({fontFamily:r,fontSubfamily:n,fontSource:s,text:t,fontSize:fi.ptToMM(Number($a))});if(!a||Cd(a)){console.warn("无法获取到对应文字信息",t,r,n);return}this.updateTextScaleByFontSize(o),this.fontData=a;const{glyphData:h={}}=a,l=fi.splitTextToLines(t);if(this.destroyChildren(),this.lines=l,!h){console.warn("loss glyphData");return}l.forEach(u=>{const c=qf(u);for(let f=0;f<c.length;f++){const d=c[f],A=h[d];if(!A)console.warn("There is no valid glyph to create display object for",d,h);else{const p=this.createSVGPathNode({dPath:A.dPath,isFill:this.isFill,layerColor:this.layerColor,layerTag:this.layerTag,...this.config});this.addChild(p)}}}),this.updateTextStyle()}updateTextScaleByFontSize(t){const r=this.scale.x,n=this.scale.y,s=Number(t)/$a;this.scale.y=s,this.scale.x=r/n*s}updateTextStyle(){fi.updateGlyphPositions(this.children,this.lines,this.fontData,{...this.style,fontSize:$a})}update(t,r){}getRealPoints(t){let r=[];for(let n=0;n<this.children.length;n++){const o=this.children[n].getRealPoints(t);r=r.concat(o)}return r}getRealBounds(){const t=new _i;for(let r=0;r<this.children.length;r++)this.children[r].getRealBounds(t);return t}isVaild(){return this.text.trim().length!==0}}var Hu=function(){function e(R,S){this.x=R,this.y=S}e.prototype.copy=function(){return new e(this.x,this.y)};function i(R,S){this.w=R,this.h=S,this.size=R*S,this.arraybuffer=new ArrayBuffer(this.size),this.data=new Int8Array(this.arraybuffer)}i.prototype.at=function(R,S){return R>=0&&R<this.w&&S>=0&&S<this.h&&this.data[this.w*S+R]===1},i.prototype.index=function(R){var S=new e;return S.y=Math.floor(R/this.w),S.x=R-S.y*this.w,S},i.prototype.flip=function(R,S){this.at(R,S)?this.data[this.w*S+R]=0:this.data[this.w*S+R]=1},i.prototype.copy=function(){var R=new i(this.w,this.h),S;for(S=0;S<this.size;S++)R.data[S]=this.data[S];return R};function t(){this.area=0,this.len=0,this.curve={},this.pt=[],this.minX=1e5,this.minY=1e5,this.maxX=-1,this.maxY=-1}function r(R){this.n=R,this.tag=new Array(R),this.c=new Array(R*3),this.alphaCurve=0,this.vertex=new Array(R),this.alpha=new Array(R),this.alpha0=new Array(R),this.beta=new Array(R)}var n=document.createElement("img"),s=document.createElement("canvas"),o=null,a=[],h,l={isReady:!1,turnpolicy:"minority",turdsize:2,optcurve:!0,alphamax:1,opttolerance:.2,color:"#FD9328"};n.onload=function(){p(),g()};function u(R,S,D){l.isReady&&w(),o=new i(S,D);var $=R.length,z,q;for(z=0,q=0;z<$;z++,q++)o.data[q]=R[z]<128?1:0;l.isReady=!0}function c(R,S,D){l.isReady&&w(),o=new i(S,D);var $=R.length,z,q,_t;for(z=0,q=0;z<$;z+=4,q++)_t=R[z+3],o.data[q]=_t<128?1:0;l.isReady=!0}function f(R){l.isReady&&w(),n.file=R;var S=new FileReader;S.onload=function(D){return function($){D.src=$.target.result}}(n),S.readAsDataURL(R)}function d(R){l.isReady&&w(),n.src=R}function A(R){var S;for(S in R)R.hasOwnProperty(S)&&(l[S]=R[S])}function p(){s.width=n.width,s.height=n.height;var R=s.getContext("2d");R.drawImage(n,0,0)}function g(){var R=s.getContext("2d");o=new i(s.width,s.height);var S=R.getImageData(0,0,o.w,o.h),D=S.data.length,$,z,q;for($=0,z=0;$<D;$+=4,z++)q=.2126*S.data[$]+.7153*S.data[$+1]+.0721*S.data[$+2],o.data[z]=q<128?1:0;l.isReady=!0}function y(){var R=o.copy(),S=new e(0,0),D;function $(V){for(var X=R.w*V.y+V.x;X<R.size&&R.data[X]!==1;)X++;return X<R.size&&R.index(X)}function z(V,X){var et,At,Z;for(et=2;et<5;et++){for(Z=0,At=-et+1;At<=et-1;At++)Z+=R.at(V+At,X+et-1)?1:-1,Z+=R.at(V+et-1,X+At-1)?1:-1,Z+=R.at(V+At-1,X-et)?1:-1,Z+=R.at(V-et,X+At)?1:-1;if(Z>0)return 1;if(Z<0)return 0}return 0}function q(V){var X=new t,et=V.x,At=V.y,Z=0,N=1,W;for(X.sign=o.at(V.x,V.y)?"+":"-";X.pt.push(new e(et,At)),et>X.maxX&&(X.maxX=et),et<X.minX&&(X.minX=et),At>X.maxY&&(X.maxY=At),At<X.minY&&(X.minY=At),X.len++,et+=Z,At+=N,X.area-=et*N,!(et===V.x&&At===V.y);){var it=R.at(et+(Z+N-1)/2,At+(N-Z-1)/2),ot=R.at(et+(Z-N-1)/2,At+(N+Z-1)/2);ot&&!it?l.turnpolicy==="right"||l.turnpolicy==="black"&&X.sign==="+"||l.turnpolicy==="white"&&X.sign==="-"||l.turnpolicy==="majority"&&z(et,At)||l.turnpolicy==="minority"&&!z(et,At)?(W=Z,Z=-N,N=W):(W=Z,Z=N,N=-W):ot?(W=Z,Z=-N,N=W):it||(W=Z,Z=N,N=-W)}return X}function _t(V){var X=V.pt[0].y,et=V.len,At,Z,N,W,it,ot;for(it=1;it<et;it++)if(At=V.pt[it].x,Z=V.pt[it].y,Z!==X){for(W=X<Z?X:Z,N=V.maxX,ot=At;ot<N;ot++)R.flip(ot,W);X=Z}}for(;S=$(S);)D=q(S),_t(D),(S.x!==0||S.y!==0)&&D.area>l.turdsize&&a.push(D)}function I(){function R(){this.data=[0,0,0,0,0,0,0,0,0]}R.prototype.at=function(U,H){return this.data[U*3+H]};function S(U,H,L,G,K){this.x=U,this.y=H,this.xy=L,this.x2=G,this.y2=K}function D(U,H){return U>=H?U%H:U>=0?U:H-1-(-1-U)%H}function $(U,H){return U.x*H.y-U.y*H.x}function z(U,H,L){return U<=L?U<=H&&H<L:U<=H||H<L}function q(U){return U>0?1:U<0?-1:0}function _t(U,H){var L=new Array(3),G,K,vt;for(L[0]=H.x,L[1]=H.y,L[2]=1,vt=0,G=0;G<3;G++)for(K=0;K<3;K++)vt+=L[G]*U.at(G,K)*L[K];return vt}function V(U,H,L){var G=new e;return G.x=H.x+U*(L.x-H.x),G.y=H.y+U*(L.y-H.y),G}function X(U,H){var L=new e;return L.y=q(H.x-U.x),L.x=-q(H.y-U.y),L}function et(U,H){var L=X(U,H);return L.y*(H.x-U.x)-L.x*(H.y-U.y)}function At(U,H,L){var G,K,vt,yt;return G=H.x-U.x,K=H.y-U.y,vt=L.x-U.x,yt=L.y-U.y,G*yt-vt*K}function Z(U,H,L,G){var K,vt,yt,Ft;return K=H.x-U.x,vt=H.y-U.y,yt=G.x-L.x,Ft=G.y-L.y,K*Ft-yt*vt}function N(U,H,L){var G,K,vt,yt;return G=H.x-U.x,K=H.y-U.y,vt=L.x-U.x,yt=L.y-U.y,G*vt+K*yt}function W(U,H,L,G){var K,vt,yt,Ft;return K=H.x-U.x,vt=H.y-U.y,yt=G.x-L.x,Ft=G.y-L.y,K*yt+vt*Ft}function it(U,H){return Math.sqrt((U.x-H.x)*(U.x-H.x)+(U.y-H.y)*(U.y-H.y))}function ot(U,H,L,G,K){var vt=1-U,yt=new e;return yt.x=vt*vt*vt*H.x+3*(vt*vt*U)*L.x+3*(U*U*vt)*G.x+U*U*U*K.x,yt.y=vt*vt*vt*H.y+3*(vt*vt*U)*L.y+3*(U*U*vt)*G.y+U*U*U*K.y,yt}function dt(U,H,L,G,K,vt){var yt,Ft,xt,Mt,qt,nt,at,O,Y,J;return yt=Z(U,H,K,vt),Ft=Z(H,L,K,vt),xt=Z(L,G,K,vt),Mt=yt-2*Ft+xt,qt=-2*yt+2*Ft,nt=yt,at=qt*qt-4*Mt*nt,Mt===0||at<0?-1:(O=Math.sqrt(at),Y=(-qt+O)/(2*Mt),J=(-qt-O)/(2*Mt),Y>=0&&Y<=1?Y:J>=0&&J<=1?J:-1)}function Ct(U){var H,L,G;U.x0=U.pt[0].x,U.y0=U.pt[0].y,U.sums=[];var K=U.sums;for(K.push(new S(0,0,0,0,0)),H=0;H<U.len;H++)L=U.pt[H].x-U.x0,G=U.pt[H].y-U.y0,K.push(new S(K[H].x+L,K[H].y+G,K[H].xy+L*G,K[H].x2+L*L,K[H].y2+G*G))}function gt(U){var H=U.len,L=U.pt,G,K=new Array(H),vt=new Array(H),yt=new Array(4);U.lon=new Array(H);var Ft=[new e,new e],xt=new e,Mt=new e,qt=new e,nt,at,O,Y,J,tt,rt,j,ht=0;for(at=H-1;at>=0;at--)L[at].x!==L[ht].x&&L[at].y!==L[ht].y&&(ht=at+1),vt[at]=ht;for(at=H-1;at>=0;at--){for(yt[0]=yt[1]=yt[2]=yt[3]=0,G=(3+3*(L[D(at+1,H)].x-L[at].x)+(L[D(at+1,H)].y-L[at].y))/2,yt[G]++,Ft[0].x=0,Ft[0].y=0,Ft[1].x=0,Ft[1].y=0,ht=vt[at],Y=at;;){if(nt=0,G=(3+3*q(L[ht].x-L[Y].x)+q(L[ht].y-L[Y].y))/2,yt[G]++,yt[0]&&yt[1]&&yt[2]&&yt[3]){K[at]=Y,nt=1;break}if(xt.x=L[ht].x-L[at].x,xt.y=L[ht].y-L[at].y,$(Ft[0],xt)<0||$(Ft[1],xt)>0||(Math.abs(xt.x)<=1&&Math.abs(xt.y)<=1||(Mt.x=xt.x+(xt.y>=0&&(xt.y>0||xt.x<0)?1:-1),Mt.y=xt.y+(xt.x<=0&&(xt.x<0||xt.y<0)?1:-1),$(Ft[0],Mt)>=0&&(Ft[0].x=Mt.x,Ft[0].y=Mt.y),Mt.x=xt.x+(xt.y<=0&&(xt.y<0||xt.x<0)?1:-1),Mt.y=xt.y+(xt.x>=0&&(xt.x>0||xt.y<0)?1:-1),$(Ft[1],Mt)<=0&&(Ft[1].x=Mt.x,Ft[1].y=Mt.y)),Y=ht,ht=vt[Y],!z(ht,at,Y)))break}nt===0&&(qt.x=q(L[ht].x-L[Y].x),qt.y=q(L[ht].y-L[Y].y),xt.x=L[Y].x-L[at].x,xt.y=L[Y].y-L[at].y,J=$(Ft[0],xt),tt=$(Ft[0],qt),rt=$(Ft[1],xt),j=$(Ft[1],qt),O=1e7,tt<0&&(O=Math.floor(J/-tt)),j>0&&(O=Math.min(O,Math.floor(-rt/j))),K[at]=D(Y+O,H))}for(O=K[H-1],U.lon[H-1]=O,at=H-2;at>=0;at--)z(at+1,K[at],O)&&(O=K[at]),U.lon[at]=O;for(at=H-1;z(D(at+1,H),O,U.lon[at]);at--)U.lon[at]=O}function Pt(U){function H(tt,rt,j){var ht=tt.len,v=tt.pt,m=tt.sums,C,b,P,Q,k,st,mt,wt,Vt,Ut,St,bt,ct,Rt,$e=0;return j>=ht&&(j-=ht,$e=1),$e===0?(C=m[j+1].x-m[rt].x,b=m[j+1].y-m[rt].y,Q=m[j+1].x2-m[rt].x2,P=m[j+1].xy-m[rt].xy,k=m[j+1].y2-m[rt].y2,st=j+1-rt):(C=m[j+1].x-m[rt].x+m[ht].x,b=m[j+1].y-m[rt].y+m[ht].y,Q=m[j+1].x2-m[rt].x2+m[ht].x2,P=m[j+1].xy-m[rt].xy+m[ht].xy,k=m[j+1].y2-m[rt].y2+m[ht].y2,st=j+1-rt+ht),St=(v[rt].x+v[j].x)/2-v[0].x,bt=(v[rt].y+v[j].y)/2-v[0].y,Rt=v[j].x-v[rt].x,ct=-(v[j].y-v[rt].y),mt=(Q-2*C*St)/st+St*St,wt=(P-C*bt-b*St)/st+St*bt,Vt=(k-2*b*bt)/st+bt*bt,Ut=ct*ct*mt+2*ct*Rt*wt+Rt*Rt*Vt,Math.sqrt(Ut)}var L,G,K,vt,yt=U.len,Ft=new Array(yt+1),xt=new Array(yt+1),Mt=new Array(yt),qt=new Array(yt+1),nt=new Array(yt+1),at=new Array(yt+1),O,Y,J;for(L=0;L<yt;L++)J=D(U.lon[D(L-1,yt)]-1,yt),J===L&&(J=D(L+1,yt)),J<L?Mt[L]=yt:Mt[L]=J;for(G=1,L=0;L<yt;L++)for(;G<=Mt[L];)qt[G]=L,G++;for(L=0,G=0;L<yt;G++)nt[G]=L,L=Mt[L];for(nt[G]=yt,K=G,L=yt,G=K;G>0;G--)at[G]=L,L=qt[L];for(at[0]=0,Ft[0]=0,G=1;G<=K;G++)for(L=at[G];L<=nt[G];L++){for(Y=-1,vt=nt[G-1];vt>=qt[L];vt--)O=H(U,vt,L)+Ft[vt],(Y<0||O<Y)&&(xt[L]=vt,Y=O);Ft[L]=Y}for(U.m=K,U.po=new Array(K),L=yt,G=K-1;L>0;G--)L=xt[L],U.po[G]=L}function jt(U){function H(mt,wt,Vt,Ut,St){for(var bt=mt.len,ct=mt.sums,Rt,$e,zr,Wr,jr,Ue,_e,ge,xe,Je,Ee,me=0;Vt>=bt;)Vt-=bt,me+=1;for(;wt>=bt;)wt-=bt,me-=1;for(;Vt<0;)Vt+=bt,me-=1;for(;wt<0;)wt+=bt,me+=1;Rt=ct[Vt+1].x-ct[wt].x+me*ct[bt].x,$e=ct[Vt+1].y-ct[wt].y+me*ct[bt].y,zr=ct[Vt+1].x2-ct[wt].x2+me*ct[bt].x2,Wr=ct[Vt+1].xy-ct[wt].xy+me*ct[bt].xy,jr=ct[Vt+1].y2-ct[wt].y2+me*ct[bt].y2,Ue=Vt+1-wt+me*bt,Ut.x=Rt/Ue,Ut.y=$e/Ue,_e=(zr-Rt*Rt/Ue)/Ue,ge=(Wr-Rt*$e/Ue)/Ue,xe=(jr-$e*$e/Ue)/Ue,Je=(_e+xe+Math.sqrt((_e-xe)*(_e-xe)+4*ge*ge))/2,_e-=Je,xe-=Je,Math.abs(_e)>=Math.abs(xe)?(Ee=Math.sqrt(_e*_e+ge*ge),Ee!==0&&(St.x=-ge/Ee,St.y=_e/Ee)):(Ee=Math.sqrt(xe*xe+ge*ge),Ee!==0&&(St.x=-xe/Ee,St.y=ge/Ee)),Ee===0&&(St.x=St.y=0)}var L=U.m,G=U.po,K=U.len,vt=U.pt,yt=U.x0,Ft=U.y0,xt=new Array(L),Mt=new Array(L),qt=new Array(L),nt=new Array(3),at,O,Y,J,tt,rt=new e;for(U.curve=new r(L),O=0;O<L;O++)Y=G[D(O+1,L)],Y=D(Y-G[O],K)+G[O],xt[O]=new e,Mt[O]=new e,H(U,G[O],Y,xt[O],Mt[O]);for(O=0;O<L;O++)if(qt[O]=new R,at=Mt[O].x*Mt[O].x+Mt[O].y*Mt[O].y,at===0)for(Y=0;Y<3;Y++)for(J=0;J<3;J++)qt[O].data[Y*3+J]=0;else for(nt[0]=Mt[O].y,nt[1]=-Mt[O].x,nt[2]=-nt[1]*xt[O].y-nt[0]*xt[O].x,tt=0;tt<3;tt++)for(J=0;J<3;J++)qt[O].data[tt*3+J]=nt[tt]*nt[J]/at;var j,ht,v,m,C,b,P,Q,k,st;for(O=0;O<L;O++){for(j=new R,ht=new e,rt.x=vt[G[O]].x-yt,rt.y=vt[G[O]].y-Ft,Y=D(O-1,L),tt=0;tt<3;tt++)for(J=0;J<3;J++)j.data[tt*3+J]=qt[Y].at(tt,J)+qt[O].at(tt,J);for(;;){if(C=j.at(0,0)*j.at(1,1)-j.at(0,1)*j.at(1,0),C!==0){ht.x=(-j.at(0,2)*j.at(1,1)+j.at(1,2)*j.at(0,1))/C,ht.y=(j.at(0,2)*j.at(1,0)-j.at(1,2)*j.at(0,0))/C;break}for(j.at(0,0)>j.at(1,1)?(nt[0]=-j.at(0,1),nt[1]=j.at(0,0)):j.at(1,1)?(nt[0]=-j.at(1,1),nt[1]=j.at(1,0)):(nt[0]=1,nt[1]=0),at=nt[0]*nt[0]+nt[1]*nt[1],nt[2]=-nt[1]*rt.y-nt[0]*rt.x,tt=0;tt<3;tt++)for(J=0;J<3;J++)j.data[tt*3+J]+=nt[tt]*nt[J]/at}if(v=Math.abs(ht.x-rt.x),m=Math.abs(ht.y-rt.y),v<=.5&&m<=.5){U.curve.vertex[O]=new e(ht.x+yt,ht.y+Ft);continue}if(b=_t(j,rt),Q=rt.x,k=rt.y,j.at(0,0)!==0)for(st=0;st<2;st++)ht.y=rt.y-.5+st,ht.x=-(j.at(0,1)*ht.y+j.at(0,2))/j.at(0,0),v=Math.abs(ht.x-rt.x),P=_t(j,ht),v<=.5&&P<b&&(b=P,Q=ht.x,k=ht.y);if(j.at(1,1)!==0)for(st=0;st<2;st++)ht.x=rt.x-.5+st,ht.y=-(j.at(1,0)*ht.x+j.at(1,2))/j.at(1,1),m=Math.abs(ht.y-rt.y),P=_t(j,ht),m<=.5&&P<b&&(b=P,Q=ht.x,k=ht.y);for(tt=0;tt<2;tt++)for(J=0;J<2;J++)ht.x=rt.x-.5+tt,ht.y=rt.y-.5+J,P=_t(j,ht),P<b&&(b=P,Q=ht.x,k=ht.y);U.curve.vertex[O]=new e(Q+yt,k+Ft)}}function Xt(U){var H=U.curve,L=H.n,G=H.vertex,K,vt,yt;for(K=0,vt=L-1;K<vt;K++,vt--)yt=G[K],G[K]=G[vt],G[vt]=yt}function zt(U){var H=U.curve.n,L=U.curve,G,K,vt,yt,Ft,xt,Mt,qt,nt;for(G=0;G<H;G++)K=D(G+1,H),vt=D(G+2,H),nt=V(1/2,L.vertex[vt],L.vertex[K]),Ft=et(L.vertex[G],L.vertex[vt]),Ft!==0?(yt=At(L.vertex[G],L.vertex[K],L.vertex[vt])/Ft,yt=Math.abs(yt),xt=yt>1?1-1/yt:0,xt=xt/.75):xt=4/3,L.alpha0[K]=xt,xt>=l.alphamax?(L.tag[K]="CORNER",L.c[3*K+1]=L.vertex[K],L.c[3*K+2]=nt):(xt<.55?xt=.55:xt>1&&(xt=1),Mt=V(.5+.5*xt,L.vertex[G],L.vertex[K]),qt=V(.5+.5*xt,L.vertex[vt],L.vertex[K]),L.tag[K]="CURVE",L.c[3*K+0]=Mt,L.c[3*K+1]=qt,L.c[3*K+2]=nt),L.alpha[K]=xt,L.beta[K]=.5;L.alphacurve=1}function pt(U){function H(){this.pen=0,this.c=[new e,new e],this.t=0,this.s=0,this.alpha=0}function L(P,Q,k,st,mt,wt,Vt){var Ut=P.curve.n,St=P.curve,bt=St.vertex,ct,Rt,$e,zr,Wr,jr,Ue,_e,ge,xe,Je,Ee,me,wr,Ln,Xl,vA,da,Mn,Aa,yA,Yl,qi;if(Q===k||(ct=Q,Wr=D(Q+1,Ut),Rt=D(ct+1,Ut),zr=wt[Rt],zr===0))return 1;for(_e=it(bt[Q],bt[Wr]),ct=Rt;ct!==k;ct=Rt)if(Rt=D(ct+1,Ut),$e=D(ct+2,Ut),wt[Rt]!==zr||q(Z(bt[Q],bt[Wr],bt[Rt],bt[$e]))!==zr||W(bt[Q],bt[Wr],bt[Rt],bt[$e])<_e*it(bt[Rt],bt[$e])*-.999847695156)return 1;if(Je=St.c[D(Q,Ut)*3+2].copy(),Ee=bt[D(Q+1,Ut)].copy(),me=bt[D(k,Ut)].copy(),wr=St.c[D(k,Ut)*3+2].copy(),jr=Vt[k]-Vt[Q],jr-=At(bt[0],St.c[Q*3+2],St.c[k*3+2])/2,Q>=k&&(jr+=Vt[Ut]),da=At(Je,Ee,me),Mn=At(Je,Ee,wr),Aa=At(Je,me,wr),yA=da+Aa-Mn,Mn===da||(qi=Aa/(Aa-yA),Yl=Mn/(Mn-da),Xl=Mn*qi/2,Xl===0))return 1;for(vA=jr/Xl,Ue=2-Math.sqrt(4-vA/.3),st.c[0]=V(qi*Ue,Je,Ee),st.c[1]=V(Yl*Ue,wr,me),st.alpha=Ue,st.t=qi,st.s=Yl,Ee=st.c[0].copy(),me=st.c[1].copy(),st.pen=0,ct=D(Q+1,Ut);ct!==k;ct=Rt){if(Rt=D(ct+1,Ut),qi=dt(Je,Ee,me,wr,bt[ct],bt[Rt]),qi<-.5||(Ln=ot(qi,Je,Ee,me,wr),_e=it(bt[ct],bt[Rt]),_e===0)||(ge=At(bt[ct],bt[Rt],Ln)/_e,Math.abs(ge)>mt)||N(bt[ct],bt[Rt],Ln)<0||N(bt[Rt],bt[ct],Ln)<0)return 1;st.pen+=ge*ge}for(ct=Q;ct!==k;ct=Rt){if(Rt=D(ct+1,Ut),qi=dt(Je,Ee,me,wr,St.c[ct*3+2],St.c[Rt*3+2]),qi<-.5||(Ln=ot(qi,Je,Ee,me,wr),_e=it(St.c[ct*3+2],St.c[Rt*3+2]),_e===0)||(ge=At(St.c[ct*3+2],St.c[Rt*3+2],Ln)/_e,xe=At(St.c[ct*3+2],St.c[Rt*3+2],bt[Rt])/_e,xe*=.75*St.alpha[Rt],xe<0&&(ge=-ge,xe=-xe),ge<xe-mt))return 1;ge<xe&&(st.pen+=(ge-xe)*(ge-xe))}return 0}var G=U.curve,K=G.n,vt=G.vertex,yt=new Array(K+1),Ft=new Array(K+1),xt=new Array(K+1),Mt=new Array(K+1),qt,nt,at,O,Y=new H,J,tt,rt,j,ht,v,m,C=new Array(K),b=new Array(K+1);for(nt=0;nt<K;nt++)G.tag[nt]==="CURVE"?C[nt]=q(At(vt[D(nt-1,K)],vt[nt],vt[D(nt+1,K)])):C[nt]=0;for(rt=0,b[0]=0,J=G.vertex[0],nt=0;nt<K;nt++)tt=D(nt+1,K),G.tag[tt]==="CURVE"&&(j=G.alpha[tt],rt+=.3*j*(4-j)*At(G.c[nt*3+2],vt[tt],G.c[tt*3+2])/2,rt+=At(J,G.c[nt*3+2],G.c[tt*3+2])/2),b[nt+1]=rt;for(yt[0]=-1,Ft[0]=0,xt[0]=0,at=1;at<=K;at++)for(yt[at]=at-1,Ft[at]=Ft[at-1],xt[at]=xt[at-1]+1,nt=at-2;nt>=0&&(O=L(U,nt,D(at,K),Y,l.opttolerance,C,b),!O);nt--)(xt[at]>xt[nt]+1||xt[at]===xt[nt]+1&&Ft[at]>Ft[nt]+Y.pen)&&(yt[at]=nt,Ft[at]=Ft[nt]+Y.pen,xt[at]=xt[nt]+1,Mt[at]=Y,Y=new H);for(qt=xt[K],ht=new r(qt),v=new Array(qt),m=new Array(qt),at=K,nt=qt-1;nt>=0;nt--)yt[at]===at-1?(ht.tag[nt]=G.tag[D(at,K)],ht.c[nt*3+0]=G.c[D(at,K)*3+0],ht.c[nt*3+1]=G.c[D(at,K)*3+1],ht.c[nt*3+2]=G.c[D(at,K)*3+2],ht.vertex[nt]=G.vertex[D(at,K)],ht.alpha[nt]=G.alpha[D(at,K)],ht.alpha0[nt]=G.alpha0[D(at,K)],ht.beta[nt]=G.beta[D(at,K)],v[nt]=m[nt]=1):(ht.tag[nt]="CURVE",ht.c[nt*3+0]=Mt[at].c[0],ht.c[nt*3+1]=Mt[at].c[1],ht.c[nt*3+2]=G.c[D(at,K)*3+2],ht.vertex[nt]=V(Mt[at].s,G.c[D(at,K)*3+2],vt[D(at,K)]),ht.alpha[nt]=Mt[at].alpha,ht.alpha0[nt]=Mt[at].alpha,v[nt]=Mt[at].s,m[nt]=Mt[at].t),at=yt[at];for(nt=0;nt<qt;nt++)tt=D(nt+1,qt),ht.beta[nt]=v[nt]/(v[nt]+m[tt]);ht.alphacurve=1,U.curve=ht}for(var Lt=0;Lt<a.length;Lt++){var Et=a[Lt];Ct(Et),gt(Et),Pt(Et),jt(Et),Et.sign==="-"&&Xt(Et),zt(Et),l.optcurve&&pt(Et)}}function E(R){if(R&&(h=R),!l.isReady){setTimeout(E,100);return}return y(),I(),typeof h=="function"&&h(),h=null,a}function w(){o=null,a=[],h=null,l.isReady=!1}function T(R,S=0,D=0,$=1,z=1,q){q&&(a=q);function _t(Z){function N(Ct){var gt="C "+(Z.c[Ct*3+0].x*R*$+S).toFixed(3)+" "+(Z.c[Ct*3+0].y*R*z+D).toFixed(3)+",";return gt+=(Z.c[Ct*3+1].x*R*$+S).toFixed(3)+" "+(Z.c[Ct*3+1].y*R*z+D).toFixed(3)+",",gt+=(Z.c[Ct*3+2].x*R*$+S).toFixed(3)+" "+(Z.c[Ct*3+2].y*R*z+D).toFixed(3)+" ",gt}function W(Ct){var gt="L "+(Z.c[Ct*3+1].x*R*$+S).toFixed(3)+" "+(Z.c[Ct*3+1].y*R*z+D).toFixed(3)+" ";return gt+=(Z.c[Ct*3+2].x*R*$+S).toFixed(3)+" "+(Z.c[Ct*3+2].y*R*z+D).toFixed(3)+" ",gt}var it=Z.n,ot,dt="M"+(Z.c[(it-1)*3+2].x*R*$+S).toFixed(3)+" "+(Z.c[(it-1)*3+2].y*R*z+D).toFixed(3)+" ";for(ot=0;ot<it;ot++)Z.tag[ot]==="CURVE"?dt+=N(ot):Z.tag[ot]==="CORNER"&&(dt+=W(ot));return dt}var V=a.length,X,et;let At="";for(et=0;et<V;et++)X=a[et].curve,At+=_t(X);return At}function _(R){l.isReady&&w(),s=R,g()}function F(R,S){function D(N){function W(gt){var Pt="C "+(N.c[gt*3+0].x*R).toFixed(3)+" "+(N.c[gt*3+0].y*R).toFixed(3)+",";return Pt+=(N.c[gt*3+1].x*R).toFixed(3)+" "+(N.c[gt*3+1].y*R).toFixed(3)+",",Pt+=(N.c[gt*3+2].x*R).toFixed(3)+" "+(N.c[gt*3+2].y*R).toFixed(3)+" ",Pt}function it(gt){var Pt="L "+(N.c[gt*3+1].x*R).toFixed(3)+" "+(N.c[gt*3+1].y*R).toFixed(3)+" ";return Pt+=(N.c[gt*3+2].x*R).toFixed(3)+" "+(N.c[gt*3+2].y*R).toFixed(3)+" ",Pt}var ot=N.n,dt,Ct="M"+(N.c[(ot-1)*3+2].x*R).toFixed(3)+" "+(N.c[(ot-1)*3+2].y*R).toFixed(3)+" ";for(dt=0;dt<ot;dt++)N.tag[dt]==="CURVE"?Ct+=W(dt):N.tag[dt]==="CORNER"&&(Ct+=it(dt));return Ct}var $=o.w*R,z=o.h*R,q=a.length,_t,V,X,et,At,Z='<svg id="svg" version="1.1" width="'+$+'" height="'+z+'" xmlns="http://www.w3.org/2000/svg">';for(Z+='<path d="',V=0;V<q;V++)_t=a[V].curve,Z+=D(_t);return S==="curve"?(X="black",et="none",At=""):(X="none",et="black",At=' fill-rule="evenodd"'),Z+='" stroke="'+X+'" fill="'+et+'"'+At+"/></svg>",Z}return{loadImageFromFile:f,loadImageFromUrl:d,loadImageFromGray:u,setParameter:A,process:E,getTransformPath:T,loadImageFromCanvas:_,loadImageFromGrayAlpha:c,getSVG:F,img:n,pathlist:a}}();const w3={fontInfo:{lineHeight:28.3765625},glyphData:{" ":{dPath:"",advanceWidth:7.056933593749999,advanceHeight:23.837304687499998},H:{dPath:"M2.03 0L2.03 -18.18L4.44 -18.18L4.44 -10.72L13.89 -10.72L13.89 -18.18L16.3 -18.18L16.3 0L13.89 0L13.89 -8.57L4.44 -8.57L4.44 0Z",advanceWidth:18.34306640625,advanceHeight:23.837304687499998},E:{dPath:"M2.01 0L2.01 -18.18L15.16 -18.18L15.16 -16.04L4.42 -16.04L4.42 -10.47L14.47 -10.47L14.47 -8.33L4.42 -8.33L4.42 -2.15L15.58 -2.15L15.58 0Z",advanceWidth:16.9416015625,advanceHeight:23.837304687499998},L:{dPath:"M1.86 0L1.86 -18.18L4.27 -18.18L4.27 -2.15L13.22 -2.15L13.22 0Z",advanceWidth:14.12626953125,advanceHeight:23.837304687499998},O:{dPath:"M1.23 -8.86Q1.23 -13.38 3.66 -15.94Q6.09 -18.5 9.93 -18.5Q12.45 -18.5 14.47 -17.3Q16.5 -16.1 17.56 -13.95Q18.62 -11.79 18.62 -9.07Q18.62 -6.3 17.5 -4.12Q16.38 -1.93 14.34 -0.81Q12.29 0.31 9.92 0.31Q7.35 0.31 5.33 -0.93Q3.31 -2.17 2.27 -4.32Q1.23 -6.46 1.23 -8.86ZM3.71 -8.82Q3.71 -5.53 5.48 -3.64Q7.24 -1.75 9.91 -1.75Q12.63 -1.75 14.38 -3.66Q16.14 -5.57 16.14 -9.08Q16.14 -11.3 15.39 -12.95Q14.63 -14.61 13.19 -15.52Q11.75 -16.43 9.95 -16.43Q7.39 -16.43 5.55 -14.68Q3.71 -12.92 3.71 -8.82Z",advanceWidth:19.75693359375,advanceHeight:23.837304687499998}}},Ay=25.4,py=72,Xu=.1;class fi{static measureText(i){return w3}static ptToMM(i){return i/py*Ay}static mmToPT(i){return i/Ay*py}static converStyleToSubFamily(i,t){const r={700:"Bold",200:"Thin"},n={italic:"Italic"};return`${r[i]||""} ${n[t]||""}`.trim()||"Regular"}static calSpaceByFontSize(i,t){return fi.ptToMM(Number(i))*t}static splitFontFamily(i){Array.isArray(i)&&(i=i[0]);const t=["Regular","Regular Italic","Italic","Oblique","Thin","Thin Italic","ExtraLight","Extra Light","ExtraLight Italic","Ultra Light","UltraLight","UltraLight Italic","Light","Light Italic","Light Oblique","Medium","Medium Italic","Medium Oblique","Semibold","SemiBold Italic","Demi","DemiBold","DemiBold Italic","Bold","Bold Italic","Bold Oblique","ExtraBold","ExtraBold Italic","UltraBold","UltraBold Italic","Black","Black Italic","Black Oblique","Heavy","Heavy Italic","Heavy Oblique","ExtraBlack","UltraBlack","Condensed","Condensed Thin","Condensed Light","Condensed Medium","Condensed Bold","Condensed ExtraBold","Condensed Black"];let r="",n=0;t.forEach(o=>{i.includes(o)&&o.length>n&&(n=o.length,r=o)});const s=i.endsWith(r);return i=s?i.replace(r,"").trim():i,{fontFamily:i,fontSubfamily:s?r:""}}static isTextNeededAdapt(i){return i.type===Qt.TEXT&&Xm(i,"style.lineSize")}static adaptMText(i){const{y:t,height:r,style:n={},scale:s,text:o=""}=i,{lineSize:a,...h}=n,l=.8,u=r*l;s.y*=l;const c=o.split(/(?:\r\n|\r|\n)/),f=fi.mmToPT(u/c.length),d=t+r*(1-l)/2,{fontFamily:A,fontSubfamily:p}=fi.splitFontFamily(n.fontFamily);return{...i,scale:{...s},style:{...h,fontSize:f,fontFamily:A,fontSubfamily:p||fi.converStyleToSubFamily(n.fontWeight,n.fontStyle)||n.fontSubfamily,letterSpacing:0,leading:0},y:d,height:u}}static converHeightToFontSize(i,t){const r=Number(i)*t.y,n=t.x;return{scale:{x:1/(t.y/n),y:1},fontSize:r}}static splitTextToLines(i){return i.split(/(?:\r\n|\r|\n)/)}static updateGlyphPositions(i,t,r,n,s={x:0,y:0}){const{glyphData:o={},fontInfo:{lineHeight:a=0}}=r,{fontSize:h,leading:l,letterSpacing:u,align:c}=n,{maxWidth:f,linesWidth:d}=A();p();function A(){const g={};let y=0;return t.forEach((I,E)=>{const w=qf(I);let T=0;for(let _=0;_<w.length;_++){const F=w[_],R=o[F];R?T+=R.advanceWidth:console.warn("There is no valid glyph to create display object for",F,o)}T+=(w.length-1)*fi.calSpaceByFontSize(h,u*Xu),g[E]=T,y=T>y?T:y}),{maxWidth:y,linesWidth:g}}function p(){let g=0,y=0;t.forEach((I,E)=>{const w=qf(I);let T=lf(c,f,d[E]);for(let _=0;_<w.length;_++){const F=w[_],R=o[F];if(!R)console.warn("There is no valid glyph to create display object for",F,o);else{const S=i[g];S&&(S.x=s.x+T,S.y=s.y+y,T+=R.advanceWidth+fi.calSpaceByFontSize(h,u*Xu)),g+=1}}y+=a+fi.calSpaceByFontSize(h,l*Xu)})}}static detectSupportTextToPath(i){return"fontData"in i&&"charJSONs"in i}static convertTextJSONToPathJSONs(i){if(!i.text||!i.fontData||!i.charJSONs)return console.warn("can not covert textJSON with an empty text, fontData or charJSONs"),[];const t=jm(i,["isFill","lockRatio","isClosePath","zOrder","lineColor","fillColor","groupTag","layerTag","layerColor"]);t.groupTag||(t.groupTag=e_());const r=[];for(const n of i.charJSONs)Object.assign(n,t),n.sourceId=i.id,r.push(n);return r}}$t.prototype.getInteractiveElements=function(){const e=["GRID","BACKDROP","SELECTOR"],i=this.children.filter(n=>!e.includes(n.name)),t=[],r=n=>{const{children:s=[],interactive:o}=n;o?t.push(n):s&&s.length>0&&s.forEach(a=>{r(a)})};return i.forEach(n=>{r(n)}),t};$t.prototype.isVaild=function(){return this.width>0||this.height>0};Jt.prototype.type=Qt.LINE;Jt.prototype._id="";Jt.prototype.lockRatio=!0;Jt.prototype.isValid=!0;Jt.prototype.isClosePath=!1;Jt.prototype.exportOption={removeSamePoint:!0};Object.defineProperty(Jt.prototype,"id",{set:function(e){this._id=e},get:function(){return this._id||(this._id=ua()),this._id}});Jt.prototype.toJSON=function(e){const{id:i,type:t,lockRatio:r,isClosePath:n,zOrder:s,sourceId:o,groupTag:a,layerTag:h,layerColor:l}=this,{x:u,y:c}=this.getLocalBounds(),f=this.toGlobal(new M(u,c)),{x:d,y:A}=e.toLocal({x:f.x,y:f.y}),p=e.worldTransform.clone();p.invert();const y=this.worldTransform.clone().append(p),I=new oa;JC(I,y);const{scale:E,skew:w,pivot:T,rotation:_}=I,F=e.toLocal(this.position,this.parent);return{id:i,type:t,x:d,y:A,angle:_*El,scale:{x:E.x,y:E.y},skew:{x:w.x,y:w.y},pivot:{x:T.x,y:T.y},localSkew:{x:this.skew.x,y:this.skew.y},offsetX:F.x,offsetY:F.y,lockRatio:r,isClosePath:n,zOrder:s,sourceId:o,groupTag:a,layerTag:h,layerColor:l}};Jt.prototype.parseJSON=function(e){const{x:i=this.x,y:t=this.y,pivot:r=this.pivot,scale:n=this.scale,angle:s=this.angle,skew:o=this.skew,id:a=this.id,type:h=this.type,lockRatio:l=this.lockRatio,isClosePath:u=this.isClosePath,layerTag:c=this.layerTag,layerColor:f=this.layerColor}=e,d=new kt;a&&(this.id=a),["groupTag","zOrder","sourceId"].forEach(g=>{this[g]=e.hasOwnProperty(g)?e[g]:this[g]}),this.type=h,this.lockRatio=l,this.isClosePath=u,this.layerTag=c,this.layerColor=f;const p=s*yi;d.setTransform(i,t,r.x,r.y,n.x,n.y,p,o.x,o.y),this.transform.setFromMatrix(d),this.emit(tC.ATTRS_CHANGED,e)};const C_=(e,i,t=[])=>{const r=Object.getOwnPropertyDescriptors(i);for(let n of t)delete r[n];Object.defineProperties(e,r)},Mo=(e,i=[e])=>{const t=Object.getPrototypeOf(e);return t===null?i:Mo(t,[...i,t])},T3=(...e)=>{if(e.length===0)return;let i;const t=e.map(r=>Mo(r));for(;t.every(r=>r.length>0);){const r=t.map(s=>s.pop()),n=r[0];if(r.every(s=>s===n))i=n;else break}return i},gy=(e,i,t=[])=>{var r;const n=(r=T3(...e))!==null&&r!==void 0?r:Object.prototype,s=Object.create(n),o=Mo(n);for(let a of e){let h=Mo(a);for(let l=h.length-1;l>=0;l--){let u=h[l];o.indexOf(u)===-1&&(C_(s,u,["constructor",...t]),o.push(u))}}return s.constructor=i,s},Zf=e=>e.filter((i,t)=>e.indexOf(i)==t),__=new Map,B3=e=>__.get(e),R3=(e,i)=>__.set(e,i),vy=(e,i)=>{var t,r;const n=Zf([...Object.getOwnPropertyNames(e),...Object.getOwnPropertyNames(i)]),s={};for(let o of n)s[o]=Zf([...(t=e==null?void 0:e[o])!==null&&t!==void 0?t:[],...(r=i==null?void 0:i[o])!==null&&r!==void 0?r:[]]);return s},yy=(e,i)=>{var t,r,n,s;return{property:vy((t=e==null?void 0:e.property)!==null&&t!==void 0?t:{},(r=i==null?void 0:i.property)!==null&&r!==void 0?r:{}),method:vy((n=e==null?void 0:e.method)!==null&&n!==void 0?n:{},(s=i==null?void 0:i.method)!==null&&s!==void 0?s:{})}},P3=(e,i)=>{var t,r,n,s,o,a;return{class:Zf([...(t=e==null?void 0:e.class)!==null&&t!==void 0?t:[],...(r=i==null?void 0:i.class)!==null&&r!==void 0?r:[]]),static:yy((n=e==null?void 0:e.static)!==null&&n!==void 0?n:{},(s=i==null?void 0:i.static)!==null&&s!==void 0?s:{}),instance:yy((o=e==null?void 0:e.instance)!==null&&o!==void 0?o:{},(a=i==null?void 0:i.instance)!==null&&a!==void 0?a:{})}},S3=new Map,N3=(...e)=>{var i;const t=new Set,r=new Set([...e]);for(;r.size>0;)for(let n of r){const s=Mo(n.prototype).map(l=>l.constructor),o=(i=B3(n))!==null&&i!==void 0?i:[],h=[...s,...o].filter(l=>!t.has(l));for(let l of h)r.add(l);t.add(n),r.delete(n)}return[...t]},O3=(...e)=>{const i=N3(...e).map(t=>S3.get(t)).filter(t=>!!t);return i.length==0?{}:i.length==1?i[0]:i.reduce((t,r)=>P3(t,r))};function D3(...e){var i,t,r;const n=e.map(a=>a.prototype);function s(...a){for(const h of e)C_(this,new h(...a))}s.prototype=gy(n,s),Object.setPrototypeOf(s,gy(e,null,["prototype"]));let o=s;{const a=O3(...e);for(let h of(i=a==null?void 0:a.class)!==null&&i!==void 0?i:[]){const l=h(o);l&&(o=l)}my((t=a==null?void 0:a.static)!==null&&t!==void 0?t:{},o),my((r=a==null?void 0:a.instance)!==null&&r!==void 0?r:{},o.prototype)}return R3(o,e),o}const my=(e,i)=>{const t=e.property,r=e.method;if(t)for(let n in t)for(let s of t[n])s(i,n);if(r)for(let n in r)for(let s of r[n])s(i,n,Object.getOwnPropertyDescriptor(i,n))};function F3(e){if(!(this._activeParentLayer&&this._activeParentLayer!==e._activeLayer)){if(!this.visible){this.displayOrder=0;return}this.displayOrder=e.incDisplayOrder(),!(this.worldAlpha<=0||!this.renderable)&&(e._activeLayer=null,this.containerRenderWebGL(e),e._activeLayer=this._activeParentLayer)}}function L3(){if(Jt.prototype.displayOrder!==void 0)return;Object.assign(Jt.prototype,{parentLayer:null,_activeParentLayer:null,parentGroup:null,zOrder:0,zIndex:0,updateOrder:0,displayOrder:0,layerableChildren:!0,isLayer:!1});const e=$t.prototype;e.containerRenderWebGL=e.render,e.render=F3}class M3{constructor(){this._tempPoint=new M,this._queue=[[],[]],this._eventDisplayOrder=0,this.worksWithLayers=!0}recursiveFindHit(i,t,r,n,s){if(!t||!t.visible)return 0;let o=0,a=n=t.interactive||n;t.hitArea&&(a=!1),t._activeParentLayer&&(s=!1);const h=t._mask;r<1/0&&h&&h.containsPoint&&!h.containsPoint(i)&&(s=!0),r<1/0&&t.filterArea&&(t.filterArea.contains(i.x,i.y)||(s=!0));const l=t.children;if(t.interactiveChildren&&l)for(let u=l.length-1;u>=0;u--){const c=l[u],f=this.recursiveFindHit(i,c,r,a,s);if(f){if(!c.parent)continue;o=f,r=f}}return n&&(s?t.interactive&&this._queueAdd(t,0):(r<t.displayOrder&&(t.hitArea?(t.worldTransform.applyInverse(i,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(o=t.displayOrder)):t.containsPoint&&t.containsPoint(i)&&(o=t.displayOrder)),t.interactive&&this._queueAdd(t,o===1/0?0:o))),o}findHit(i,t,r,n){const s=i.data.global;this._startInteractionProcess(),this.recursiveFindHit(s,t,n?0:1/0,!1,!1),this._finishInteractionProcess(i,r)}_startInteractionProcess(){this._eventDisplayOrder=1,this._queue||(this._queue=[[],[]]),this._queue[0].length=0,this._queue[1].length=0}_queueAdd(i,t){const r=this._queue;if(t<this._eventDisplayOrder)r[0].push(i);else{if(t>this._eventDisplayOrder){this._eventDisplayOrder=t;const n=r[1];for(let s=0,o=n.length;s<o;s++)r[0].push(n[s]);r[1].length=0}r[1].push(i)}}_finishInteractionProcess(i,t){const r=this._queue;let n=r[0];for(let s=0,o=n.length;s<o;s++)t&&t(i,n[s],!1);n=r[1];for(let s=0,o=n.length;s<o;s++)i.target||(i.target=n[s]),t&&t(i,n[s],!0)}}function Q3(e){return function(t,r,n,s,o){(!r||!r.renderTexture&&!r.baseTexture)&&(this._lastDisplayOrder=0),this._activeLayer=null,t.isStage&&t.updateStage(),this.plugins.interaction&&!this.plugins.interaction.search.worksWithLayers&&(this.plugins.interaction.search=new M3),e.call(this,t,r,n,s,o)}}function U3(e){const i=e.prototype;i._oldRender||(Object.assign(i,{_lastDisplayOrder:0,_activeLayer:null,incDisplayOrder(){return++this._lastDisplayOrder},_oldRender:ha.prototype.render}),i._oldRender=i.render,i.render=Q3(i.render))}class di extends je{constructor(i=0,t=!1){super(),this.useRenderTexture=!1,this.useDoubleBuffer=!1,this.sortPriority=0,this.clearColor=new Float32Array([0,0,0,0]),this.canDrawWithoutLayer=!1,this.canDrawInParentStage=!0,this._activeLayer=null,this._activeStage=null,this._activeChildren=[],this._lastUpdateId=-1,this.zIndex=i||0,this.enableSort=!!t,typeof t=="function"&&this.on("sort",t)}doSort(i,t){if(this.listeners("sort",!0))for(let r=0;r<t.length;r++)this.emit("sort",t[r]);t.sort(di.compareZIndex)}static compareZIndex(i,t){return i.zOrder<t.zOrder?-1:i.zOrder>t.zOrder?1:i.updateOrder-t.updateOrder}clear(){this._activeLayer=null,this._activeStage=null,this._activeChildren.length=0}_resolveChildDisplayObject(i,t){this.check(i),t._activeParentLayer=this._activeLayer,this._activeLayer?this._activeLayer._activeChildren.push(t):this._activeChildren.push(t)}_resolveLayer(i,t){this.check(i),this._activeLayer&&di.conflict(),this._activeLayer=t,this._activeStage=i}check(i){if(this._lastUpdateId<di._layerUpdateId)this._lastUpdateId=di._layerUpdateId,this.clear(),this._activeStage=i;else if(this.canDrawInParentStage){let t=this._activeStage;for(;t&&t!==i;)t=t._activeParentStage;this._activeStage=t,t===null&&this.clear()}}static conflict(){di._lastLayerConflict+5e3<Date.now()&&(di._lastLayerConflict=Date.now(),console.log("@pixi/layers found two layers with the same group in one stage - that's not healthy. Please place a breakpoint here and debug it"))}}di._layerUpdateId=0;di._lastLayerConflict=0;class Iy{constructor(i){this.layer=i,this.renderTexture=null,this.doubleBuffer=null,this.currentBufferIndex=0,this._tempRenderTarget=null,this._tempRenderTargetSource=new Tt,this._tempRenderTargetDestination=new Tt}init(i){const t=i?i.screen.width:100,r=i?i.screen.height:100,n=i?i.resolution:ft.RESOLUTION;this.renderTexture=oi.create({width:t,height:r,resolution:n}),this.layer.group.useDoubleBuffer&&(this.doubleBuffer=[oi.create({width:t,height:r,resolution:n}),oi.create({width:t,height:r,resolution:n})])}getRenderTexture(){return this.renderTexture||this.init(),this.renderTexture}pushTexture(i){const t=i.screen;this.renderTexture||this.init(i);const r=this.renderTexture,n=this.layer.group,s=this.doubleBuffer;if((r.width!==t.width||r.height!==t.height||r.baseTexture.resolution!==i.resolution)&&(r.baseTexture.resolution=i.resolution,r.resize(t.width,t.height),s&&(s[0].baseTexture.resolution=i.resolution,s[0].resize(t.width,t.height),s[1].baseTexture.resolution=i.resolution,s[1].resize(t.width,t.height))),s&&(s[0].framebuffer.multisample=r.framebuffer.multisample,s[1].framebuffer.multisample=r.framebuffer.multisample),this._tempRenderTarget=i.renderTexture.current,this._tempRenderTargetSource.copyFrom(i.renderTexture.sourceFrame),this._tempRenderTargetDestination.copyFrom(i.renderTexture.destinationFrame),i.batch.flush(),n.useDoubleBuffer){let a=s[this.currentBufferIndex];a.baseTexture._glTextures[i.CONTEXT_UID]||(i.renderTexture.bind(a,void 0,void 0),i.texture.bind(a),n.clearColor&&i.renderTexture.clear(n.clearColor)),i.texture.unbind(r.baseTexture),r.baseTexture._glTextures=a.baseTexture._glTextures,r.baseTexture.framebuffer=a.baseTexture.framebuffer,a=s[1-this.currentBufferIndex],i.renderTexture.bind(a,void 0,void 0)}else i.renderTexture.bind(r,void 0,void 0);n.clearColor&&i.renderTexture.clear(n.clearColor);const o=i.filter.defaultFilterStack;o.length>1&&(o[o.length-1].renderTexture=i.renderTexture.current)}popTexture(i){i.batch.flush(),i.framebuffer.blit();const t=i.filter.defaultFilterStack;t.length>1&&(t[t.length-1].renderTexture=this._tempRenderTarget),i.renderTexture.bind(this._tempRenderTarget,this._tempRenderTargetSource,this._tempRenderTargetDestination),this._tempRenderTarget=null;const r=this.renderTexture,n=this.layer.group,s=this.doubleBuffer;if(n.useDoubleBuffer){i.texture.unbind(r.baseTexture),this.currentBufferIndex=1-this.currentBufferIndex;const o=s[this.currentBufferIndex];r.baseTexture._glTextures=o.baseTexture._glTextures,r.baseTexture.framebuffer=o.baseTexture.framebuffer}}destroy(){this.renderTexture&&(this.renderTexture.destroy(),this.doubleBuffer&&(this.doubleBuffer[0].destroy(!0),this.doubleBuffer[1].destroy(!0)))}}class Qo extends $t{constructor(i=null){super(),this.isLayer=!0,this.group=null,this._activeChildren=[],this._tempChildren=null,this._activeStageParent=null,this._sortedChildren=[],this._tempLayerParent=null,this.insertChildrenBeforeActive=!0,this.insertChildrenAfterActive=!0,i?(this.group=i,this.zIndex=i.zIndex):this.group=new di(0,!1),this._tempChildren=this.children}get useRenderTexture(){return this.group.useRenderTexture}set useRenderTexture(i){this.group.useRenderTexture=i}get useDoubleBuffer(){return this.group.useDoubleBuffer}set useDoubleBuffer(i){this.group.useDoubleBuffer=i}get clearColor(){return this.group.clearColor}set clearColor(i){this.group.clearColor=i}get sortPriority(){return this.group.sortPriority}set sortPriority(i){this.group.sortPriority=i}getRenderTexture(){return this.textureCache||(this.textureCache=new Iy(this)),this.textureCache.getRenderTexture()}doSort(){this.group.doSort(this,this._sortedChildren)}destroy(i){this.textureCache&&(this.textureCache.destroy(),this.textureCache=null),super.destroy(i)}render(i){this.prerender(i)&&(this.group.useRenderTexture&&(this.textureCache||(this.textureCache=new Iy(this)),this.textureCache.pushTexture(i)),this.containerRenderWebGL(i),this.postrender(i),this.group.useRenderTexture&&this.textureCache.popTexture(i))}layerRenderCanvas(i){this.prerender(i)&&(this.containerRenderCanvas(i),this.postrender(i))}_onBeginLayerSubtreeTraversal(i){const t=this._activeChildren;this._activeStageParent=i,this.group._resolveLayer(i,this);const r=this.group._activeChildren;t.length=0;for(let n=0;n<r.length;n++)r[n]._activeParentLayer=this,t.push(r[n]);r.length=0}_onEndLayerSubtreeTraversal(){const i=this.children,t=this._activeChildren,r=this._sortedChildren;for(let n=0;n<t.length;n++)this.emit("display",t[n]);if(r.length=0,this.insertChildrenBeforeActive)for(let n=0;n<i.length;n++)r.push(i[n]);for(let n=0;n<t.length;n++)r.push(t[n]);if(!this.insertChildrenBeforeActive&&this.insertChildrenAfterActive)for(let n=0;n<i.length;n++)r.push(i[n]);this.group.enableSort&&this.doSort()}prerender(i){return this._activeParentLayer&&this._activeParentLayer!=i._activeLayer?!1:this.visible?(this.displayOrder=i.incDisplayOrder(),this.worldAlpha<=0||!this.renderable?!1:(this.children!==this._sortedChildren&&this._tempChildren!==this.children&&(this._tempChildren=this.children),this._boundsID++,this.children=this._sortedChildren,this._tempLayerParent=i._activeLayer,i._activeLayer=this,!0)):(this.displayOrder=0,!1)}postrender(i){this.children=this._tempChildren,i._activeLayer=this._tempLayerParent,this._tempLayerParent=null}}Qo.prototype.renderCanvas=Qo.prototype.layerRenderCanvas;class Uo extends Qo{constructor(){super(...arguments),this.isStage=!0,this._tempGroups=[],this._activeLayers=[],this._activeParentStage=null}clear(){this._activeLayers.length=0,this._tempGroups.length=0}destroy(i){this.clear(),super.destroy(i)}updateStage(){this._activeParentStage=null,di._layerUpdateId++,this._updateStageInner()}updateAsChildStage(i){this._activeParentStage=i,Uo._updateOrderCounter=0,this._updateStageInner()}_updateStageInner(){this.clear(),this._addRecursive(this);const i=this._activeLayers;for(let t=0;t<i.length;t++){const r=i[t];if(r.group.sortPriority){r._onEndLayerSubtreeTraversal();const n=r._sortedChildren;for(let s=0;s<n.length;s++)this._addRecursiveChildren(n[s])}}for(let t=0;t<i.length;t++){const r=i[t];r.group.sortPriority||r._onEndLayerSubtreeTraversal()}}_addRecursive(i){if(!i.visible)return;if(i.isLayer){const s=i;this._activeLayers.push(s),s._onBeginLayerSubtreeTraversal(this)}if(i!==this&&i.isStage){i.updateAsChildStage(this);return}i._activeParentLayer=null;let t=i.parentGroup;t&&t._resolveChildDisplayObject(this,i);const r=i.parentLayer;if(r&&(t=r.group,t._resolveChildDisplayObject(this,i)),i.updateOrder=++Uo._updateOrderCounter,i.alpha<=0||!i.renderable||!i.layerableChildren||t&&t.sortPriority)return;const n=i.children;if(n&&n.length)for(let s=0;s<n.length;s++)this._addRecursive(n[s])}_addRecursiveChildren(i){if(i.alpha<=0||!i.renderable||!i.layerableChildren)return;const t=i.children;if(t&&t.length)for(let r=0;r<t.length;r++)this._addRecursive(t[r])}}Uo._updateOrderCounter=0;L3();U3(ha);let G3=class{constructor(){}execute(i,t,r,n){if(t.length<1)return;this[i].call(this,t,r,n)}alignGroup(i,t,r){const{targetX:n=0,targetY:s=0,widthRate:o=0,heightRate:a=0}=r,h=this.getBounds(i),l=ce(i)?i:[i],u=n!==0?(h.x+o*h.width-n)/t.scale.x:0,c=s!==0?(h.y+a*h.height-s)/t.scale.y:0;l.forEach(f=>{const d=f.toJSON(t),A=new M(d.x-u,d.y-c);Fo(f,A,t)})}calcGroupBounds(i){const t=ri.calculateGroupOrientedBounds(i,0,null,!0),r=t.topLeft.x,n=t.topLeft.y,s=t.bottomRight.x-r,o=t.bottomRight.y-n;return new Tt(r,n,s,o)}getBounds(i){return ce(i)?this.calcGroupBounds(i):i.getBounds()}alignToLeft(i,t,r){let n=r.x;i.length>1&&(n=t.x),i.forEach(s=>{this.alignGroup(s,r,{targetX:n})})}alignToRight(i,t,r){let n=r.x+r.worldScreenWidth;i.length>1&&(n=t.x+t.width),i.forEach(s=>{this.alignGroup(s,r,{targetX:n,widthRate:1})})}alignToTop(i,t,r){let n=r.y;i.length>1&&(n=t.y),i.forEach(s=>{this.alignGroup(s,r,{targetY:n})})}alignToBottom(i,t,r){let n=r.y+r.worldScreenHeight;i.length>1&&(n=t.y+t.height),i.forEach(s=>{this.alignGroup(s,r,{targetY:n,heightRate:1})})}alignToHorizontalCenter(i,t,r){let n=r.y+r.worldScreenHeight/2;i.length>1&&(n=t.y+t.height/2),i.forEach(s=>{this.alignGroup(s,r,{targetY:n,heightRate:.5})})}alignToVerticalCenter(i,t,r){let n=r.x+r.worldScreenWidth/2;i.length>1&&(n=t.x+t.width/2),i.forEach(s=>{this.alignGroup(s,r,{targetX:n,widthRate:.5})})}horizontalDistribute(i,t,r){if(i.length<3)return;let n=0;i.forEach(u=>{const c=this.getBounds(u);n+=c.width});const s=t.width-n,o=i.length-1,a=s/o,h=i.sort((u,c)=>this.getBounds(u).x-this.getBounds(c).x);let l=0;h.forEach((u,c)=>{const f=this.getBounds(u);if(c===0){l=f.x+f.width;return}if(c===h.length-1)return;const d=l+a;this.alignGroup(u,r,{targetX:d}),l=d+f.width})}verticalDistribute(i,t,r){if(i.length<3)return;let n=0;i.forEach(u=>{const c=this.getBounds(u);n+=c.height});const s=t.height-n,o=i.length-1,a=s/o,h=i.sort((u,c)=>this.getBounds(u).y-this.getBounds(c).y);let l=0;h.forEach((u,c)=>{const f=this.getBounds(u);if(c===0){l=f.y+f.height;return}if(c===h.length-1)return;const d=l+a;this.alignGroup(u,r,{targetY:d}),l=d+f.height})}};var pr;class k3{constructor(){lt(this,pr,void 0);It(this,pr,[])}create(i,t,r,n){switch(i){case xh.LINER:return this.createLinerArrays(t,r,n);case xh.RADIAL:return this.createRadialArrays(t,r,n);default:return[]}}createLinerArrays(i,t,r){this.clearTemp(!0);const{colNum:n,colSpace:s,rowNum:o,rowSpace:a}=r,h=new Array,l=n*o;for(let u=1;u<l;u++){const c=u%n,f=Math.floor(u/n),d=[];i.forEach(A=>{const p={...A};p.x+=c*(t.width+s),p.y+=f*(t.height+a),d.push(p)}),h.push(d)}return h}createRadialArrays(i,t,r){this.clearTemp(!0);const{x:n,y:s,copies:o,start:a,step:h,rotateSelf:l}=r,u=new Array;for(let c=1;c<o+1;c++){const f=a+h*c,d=f*Math.PI/180,A=[];if(l)i.forEach(p=>{const g={...p},y=new Tt(g.x,g.y,g.width,g.height),I=oQ(y,d,{x:n,y:s});g.x=I.x,g.y=I.y,g.angle+=f,A.push(g)});else{const p={x:t.x+t.width/2,y:t.y+t.height/2},g=gf(p,d,{x:n,y:s}),y={x:g.x-p.x,y:g.y-p.y};i.forEach(I=>{const E={...I};E.x+=y.x,E.y+=y.y,A.push(E)})}u.push(A)}return u}appendToTemp(i){return i.forEach(t=>{B(this,pr).push(t)}),i}clearTemp(i){if(i){let t=B(this,pr).pop();for(;t;)Ql(t),t=B(this,pr).pop()}else It(this,pr,[])}get temp(){return B(this,pr)}}pr=new WeakMap;const H3={startDelay:1,stepInterval:16,stepDuration:16,timerMode:"timeout"};var ke,Fi,gr,kh,x_,Xo,td,Yo,ed,Hh,E_;class X3{constructor(i){lt(this,kh);lt(this,Xo);lt(this,Yo);lt(this,Hh);lt(this,ke,new Map);lt(this,Fi,null);lt(this,gr,"idle");x(this,"options");this.options=Object.assign(H3,i)}has(i){return B(this,ke).has(i)}add(i,t){if(typeof t!="function"){console.warn("action is not a function, will be ignored");return}B(this,ke).has(i)&&B(this,ke).delete(i),B(this,ke).set(i,t),Gt(this,kh,x_).call(this)}delete(i){B(this,ke).delete(i),B(this,Fi)&&!B(this,ke).size&&(Gt(this,Yo,ed).call(this),B(this,gr))}clear(){return B(this,ke).clear()}size(){return B(this,ke).size}}ke=new WeakMap,Fi=new WeakMap,gr=new WeakMap,kh=new WeakSet,x_=function(){if(B(this,gr)==="pending")return;B(this,gr)==="running"&&Gt(this,Yo,ed).call(this),It(this,gr,"pending");const i=()=>{It(this,Fi,null),Gt(this,Hh,E_).call(this,this.options.stepDuration),B(this,ke).size?Gt(this,Xo,td).call(this,i,this.options.stepInterval):It(this,gr,"idle")};Gt(this,Xo,td).call(this,()=>{It(this,gr,"running"),i()},Math.max(this.options.startDelay,1))},Xo=new WeakSet,td=function(i,t){this.options.timerMode==="idle-callback"?It(this,Fi,requestIdleCallback(i,{timeout:t})):It(this,Fi,setTimeout(i,t))},Yo=new WeakSet,ed=function(){B(this,Fi)&&(this.options.timerMode==="idle-callback"?cancelIdleCallback(B(this,Fi)):clearTimeout(B(this,Fi)),It(this,Fi,null))},Hh=new WeakSet,E_=function(i=16){const t=Date.now();let r;for(const[n,s]of B(this,ke).entries())if(r=Date.now(),r-t<=i)B(this,ke).delete(n),s(n);else break};Y3();function Y3(){globalThis.requestIdleCallback||(globalThis.requestIdleCallback=function(e,i){i=i||{};const t=1,r=i.timeout||t,n=performance.now();return setTimeout(function(){e({get didTimeout(){return i.timeout?!1:performance.now()-n-t>r},timeRemaining:function(){return Math.max(0,t+(performance.now()-n))}})},t)}),globalThis.cancelIdleCallback||(globalThis.cancelIdleCallback=function(e){clearTimeout(e)})}function b_(e,i,t){switch(e.constructor){case Do:z3(e,i,t);break;case n_:W3(e,i);break;case uA:j3(e,i);break;case Ul:K3(e,i);break;case fA:$3(e,i);break;case Fh:J3(e,i);break;case Zn:q3(e,i);break;default:V3(e,i);break}}function V3(e,i){var r;const t=(r=e.getBounds)==null?void 0:r.call(e);t&&AA(i,t)}function z3(e,i,t){i.moveTo(0,0).lineTo(e.endPoint.x,e.endPoint.y),t.fill=!1}function W3(e,i){i.addRect([0,0,e.originWidth,e.originHeight])}function j3(e,i){i.addOval([0,0,e.originWidth,e.originHeight])}function K3(e,i){e.geometry.graphicsData.forEach(t=>{AA(i,t.shape)})}function $3(e,i){return b_(e.lineGraphics,i)}function J3(e,i){i.addFromSVGPathD(e.dPath)}function q3(e,i){e.geometry.graphicsData.forEach(t=>{AA(i,t.shape)})}function AA(e,i){switch(i.type){case ne.POLY:return Z3(e,i);case ne.RECT:return tk(e,i);case ne.RREC:return ek(e,i);case ne.CIRC:return ik(e,i);case ne.ELIP:return rk(e,i);default:return}}function Z3(e,i){const t=i.points;for(let r=0;r<t.length;r+=2){const n={x:t[r],y:t[r+1]};r===0?e.moveTo(n.x,n.y):e.lineTo(n.x,n.y)}i.closeStroke&&e.close()}function tk(e,i){e.addRect([i.x,i.y,i.x+i.width,i.y+i.height])}function ek(e,i){e.addRRect([i.x,i.y,i.x+i.width,i.y+i.height,i.radius,i.radius,i.radius,i.radius,i.radius,i.radius,i.radius,i.radius])}function ik(e,i){e.addOval([i.x,i.y,i.radius,i.radius])}function rk(e,i){e.addOval([i.x,i.x,i.x+i.width,i.x+i.height])}var un;(function(e){e.ADD_HIT_AREA="addHitArea",e.REMOVE_HIT_AREA="removeHitArea",e.UPDATE_HIT_AREA="updateHitArea"})(un||(un={}));const nk={enabled:!1,expansion:{mode:"stroke",padding:6,defaultFill:!1},zoomDebounceDelay:500,painter:{enabled:!1,mode:"listener"},excludeFn:e=>e.type===Qt.TEXT||e.type===Qt.BITMAP};var gn;class w_ extends je{constructor(t){super();x(this,"options");x(this,"viewport");x(this,"transformer");x(this,"painter");lt(this,gn,new WeakMap);x(this,"updateHitAreaTasks");x(this,"debouncedHandle");this.options=uo(nk,t),this.updateHitAreaTasks=new X3(this.options.updateTask)}get events(){return un}get hitAreaManager(){return this}init(t,r){console.log("[ HitAreaManager ] enabled:",this.options.enabled),this.options.enabled!==!1&&(this.viewport=t,this.transformer=r,this.debouncedHandle=Zu((n,s)=>{s.call(n)},this.options.zoomDebounceDelay,{trailing:!0}),JM().then(()=>{this.initEvents(),this.viewport.getInteractiveElements().forEach(s=>{this.addHitAreaFor(s)}),this.hitAreaManager.initPainter()}))}initEvents(){this.viewport.displayLayer.on("childAdded",t=>{t.updateTransform(),this.addHitAreaFor(t)}),this.viewport.on("zoomed",Zu(()=>{this.viewport.localTransform.a!==this.viewport.scale.x&&this.viewport.updateTransform(),this.viewport.displayLayer.children.forEach(t=>{this.hitAreaManager.updateHitAreaFor(t)})},this.options.zoomDebounceDelay)),this.transformer.on(Ye.TRANSFORM_COMMIT,({type:t=""}={})=>{(!t||t==="scale")&&this.requestUpdateHitAreaForDisplays(this.transformer.selected)}),this.transformer.on(Ye.TRANSFORM_CHANGE,t=>{this.handleDisplaysAttrsChanged(this.transformer.selected,t)})}handleDisplaysAttrsChanged(t,r){Tn(r,["width","height","isFill"])&&this.requestUpdateHitAreaForDisplays(t)}async initPainter(){try{if(this.options.painter.enabled||sk()){const{HitAreaDebugPainter:t}=await df(()=>import("./hitareadebugpainter-3df15b70.js"),[],import.meta.url);console.log("%c[ DebugPainter ] init success","font-weight: bold"),this.painter=new t(this,this.options.painter),this.viewport.addChild(this.painter.container)}}catch{console.warn("[ DebugPainter ] init failed")}}updateConfig(t){this.options=uo(this.options,t)}_addHitArea(t){let r;B(this,gn).has(t)?r=B(this,gn).get(t):(r=jM(),B(this,gn).set(t,r),t.on(tC.ATTRS_CHANGED,n=>{this.handleDisplaysAttrsChanged([t],n)}),t.on("destroyed",()=>{this.updateHitAreaTasks.delete(t),KM(r),B(this,gn).delete(t),t.hitArea=null}),t.on("removed",()=>{this.updateHitAreaTasks.delete(t),this.emit(un.REMOVE_HIT_AREA,t)})),t.hitArea=r,this._updateHitArea(t),this.emit(un.ADD_HIT_AREA,t)}_updateHitArea(t){if(Af(t.hitArea)){const{a:r,b:n,c:s,d:o}=t.worldTransform,a=Math.sqrt(r*r+n*n),h=Math.sqrt(s*s+o*o),l=this.options.expansion,u={mode:l.mode,width:1+l.padding*2,fill:t.isFill??l.defaultFill,sx:a,sy:h,viewportScale:this.viewport.scale.x},c=t.hitArea;c.rewind(),b_(t,c,u),c.style(u)}}_addUpdateHitAreaTask(t){this.updateHitAreaTasks.add(t,r=>{r.destroyed||(this._updateHitArea(r),r.hitArea&&this.emit(un.UPDATE_HIT_AREA,r))})}traverseDisplay(t,r){const n=new Set,s=o=>{if(!o||n.has(o))return;n.add(o),r(o)!==!1&&Array.isArray(o.children)&&o.children.forEach(s)};s(t)}addHitAreaFor(t){this.traverseDisplay(t,r=>{var n,s;return(s=(n=this.options).excludeFn)!=null&&s.call(n,r)?!1:(r.interactive&&(Af(r.hitArea)?this._addUpdateHitAreaTask(r):this._addHitArea(r)),!0)})}updateHitAreaFor(t){this.traverseDisplay(t,r=>{var n,s;return(s=(n=this.options).excludeFn)!=null&&s.call(n,r)?!1:(this._addUpdateHitAreaTask(r),!0)})}requestUpdateHitAreaForDisplays(t){t.forEach(r=>{this.updateHitAreaFor(r)})}}gn=new WeakMap,x(w_,"events",un);function sk(){try{return globalThis.sessionStorage.getItem("HIT_AREA_DEBUG_PAINT")==="true"||new URLSearchParams(window.location.hash.split("?").slice(-1)[0]).get("HIT_AREA_DEBUG_PAINT")==="true"}catch{}return!1}var vn,Py;let T_=(Py=class{constructor(){lt(this,vn,void 0)}setOptions(i){It(this,vn,i)}clip(i){const{canvas:t,ctx:r}=B(this,vn),{minLocalPoint:n,rtLocalPoint:s,maxLocalPoint:o,lbLocalPoint:a}=i,h=document.createElement("canvas");h.width=t.width,h.height=t.height;const l=h.getContext("2d");l.beginPath(),l.moveTo(n.x,n.y),l.lineTo(a.x,a.y),l.lineTo(o.x,o.y),l.lineTo(s.x,s.y),l.clip(),l.drawImage(t,0,0),r.clearRect(0,0,t.width,t.height),t.width=o.x-n.x,t.height=o.y-n.y,r.drawImage(h,Math.round(n.x),Math.round(n.y),Math.floor(o.x-n.x),Math.floor(o.y-n.y),0,0,t.width,t.height)}erasing(i){const{ctx:t}=B(this,vn),{radius:r,isCurveTo:n,beginPoint:s,controlPoint:o,endPoint:a}=i;t.globalCompositeOperation="destination-out",t.lineJoin=t.lineCap="round",t.lineWidth=r,t.beginPath(),t.moveTo(s.x,s.y),n?t.quadraticCurveTo(o.x,o.y,a.x,a.y):t.lineTo(s.x+.01,s.y+.01),t.closePath(),t.stroke(),t.globalCompositeOperation="source-over"}magicSelect(i,t){const{canvas:r,ctx:n}=B(this,vn),s=n.getImageData(0,0,r.width,r.height);EG(s.data,s.width,s.height,Number(i.x.toFixed(0)),Number(i.y.toFixed(0)),t),n.putImageData(s,0,0)}},vn=new WeakMap,Py);class pA{constructor(){x(this,"deltaX");x(this,"deltaY");x(this,"deltaTime");x(this,"distance");x(this,"angle");x(this,"velocityX");x(this,"velocityY");x(this,"velocity");x(this,"overallVelocityX");x(this,"overallVelocityY");x(this,"overallVelocity");x(this,"direction");x(this,"offsetDirection");x(this,"scale");x(this,"deltaScale");x(this,"rotation");x(this,"center");x(this,"srcEvent");x(this,"interactionEvent");x(this,"displayObject");x(this,"pointerType");x(this,"eventType");x(this,"pointers");x(this,"changedPointers");x(this,"maxPointers");x(this,"timeStamp")}get isFirst(){const i=this.pointers.length,t=this.changedPointers.length;return this.eventType&1&&i-t===0}get isFinal(){const i=this.pointers.length,t=this.changedPointers.length;return this.eventType&12&&i-t===0}}const ok=25,ak=new Map([["pointerdown",1],["pointermove",2],["pointerup",4],["pointercancel",8],["pointerout",8],["pointerleave",8],["pointerover",8]]);function hk(e,i,t){if(e.indexOf&&!t)return e.indexOf(i);{let r=0;for(;r<e.length;){if(t&&e[r][t]===i||!t&&e[r]===i)return r;r++}return-1}}function Cy(e){const i=[];let t=0;for(;t<e.pointers.length;)i[t]={clientX:Math.round(e.pointers[t].clientX),clientY:Math.round(e.pointers[t].clientY)},t++;const r=new pA;return r.pointers=i,r.timeStamp=Date.now(),r.center=B_(i),r.deltaX=e.deltaX,r.deltaY=e.deltaY,r}function B_(e){const i=e.length;if(i===1)return{x:Math.round(e[0].clientX),y:Math.round(e[0].clientY)};let t=0,r=0,n=0;for(;n<i;)t+=e[n].clientX,r+=e[n].clientY,n++;return{x:Math.round(t/i),y:Math.round(r/i)}}function lk(e,i){const t=i.x-e.x,r=i.y-e.y;return Math.atan2(r,t)*180/Math.PI}function _y(e,i){const t=i.clientX-e.clientX,r=i.clientY-e.clientY;return Math.atan2(r,t)*180/Math.PI}function uk(e,i){const t=i.x-e.x,r=i.y-e.y;return Math.sqrt(t*t+r*r)}function xy(e,i){const t=i.clientX-e.clientX,r=i.clientY-e.clientY;return Math.sqrt(t*t+r*r)}function R_(e,i){return e===i?1:Math.abs(e)>=Math.abs(i)?e<0?2:4:i<0?8:16}function P_(e,i,t){return{x:i/e||0,y:t/e||0}}function ck(e,i){return!e||!i||e.length<2||i.length<2?1:xy(i[0],i[1])/xy(e[0],e[1])}function fk(e,i){return!e||!i||e.length<2||i.length<2?0:_y(i[1],i[0])+_y(e[1],e[0])}function dk(e){const i=e.type.toLowerCase().replace("ms","");return ak.get(i)}function Bn(e){const{data:{originalEvent:i}}=e;let t=!0;if(window.TouchEvent&&i instanceof TouchEvent){const{touches:r,type:n}=i;n!=="touchend"?r.length!==1&&(t=!1):r.length!==0&&(t=!1)}return t}function no(e){const{data:{originalEvent:i}}=e;let t=null;if(window.TouchEvent&&i instanceof TouchEvent){const{changedTouches:r}=i;r.length===1&&(t=r[0].identifier)}if(i instanceof PointerEvent){const{pointerId:r}=i;t=r}return t}function id(e){const{data:{originalEvent:i}}=e,t=[];if(window.TouchEvent&&i instanceof TouchEvent){const{changedTouches:r}=i;for(let n=0;n<r.length;n++){const s=r[n];t.push(s.identifier)}}if(i instanceof PointerEvent){const{pointerId:r}=i;t.push(r)}return t}function Ak(e,i){const t=i.pointers.length,r=i.pointers;e.firstInput||(e.firstInput=Cy(i)),t>1&&!e.firstMultiple?e.firstMultiple=Cy(i):t===1&&(e.firstMultiple=null);const{firstInput:n,firstMultiple:s}=e;i.timeStamp=Date.now(),i.deltaTime=i.timeStamp-n.timeStamp;const o=s!==null?s.center:n.center,a=i.center=B_(r);i.angle=lk(o,a),i.distance=uk(o,a),pk(e,i),i.offsetDirection=R_(i.deltaX,i.deltaY);const h=P_(i.deltaTime,i.deltaX,i.deltaY);i.overallVelocityX=h.x,i.overallVelocityY=h.y,i.overallVelocity=Math.abs(h.x)>Math.abs(h.y)?h.x:h.y,i.scale=ck(s?s.pointers:void 0,r);const l=e.prevScale??i.scale;i.deltaScale=i.scale-l,e.prevScale=i.scale,i.rotation=fk(s?s.pointers:void 0,r),i.maxPointers=e.prevInput?i.pointers.length>e.prevInput.maxPointers?i.pointers.length:e.prevInput.maxPointers:i.pointers.length,gk(e,i)}function pk(e,i){const{center:t}=i;let r=e.offsetDelta||{x:0,y:0},n=e.prevDelta||{x:0,y:0};const s=e.prevInput||new pA;(i.eventType===1||s.eventType===4)&&(n=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},r=e.offsetDelta={x:t.x,y:t.y}),i.deltaX=n.x+(t.x-r.x),i.deltaY=n.y+(t.y-r.y)}function gk(e,i){const t=e.lastInterval||i,r=i.timeStamp-t.timeStamp;let n,s,o,a;if(i.eventType!==8&&(r>ok||t.velocity===void 0)){const h=i.deltaX-t.deltaX,l=i.deltaY-t.deltaY,u=P_(r,h,l);s=u.x,o=u.y,n=Math.abs(u.x)>Math.abs(u.y)?u.x:u.y,a=R_(h,l),e.lastInterval=i}else n=t.velocity,s=t.velocityX,o=t.velocityY,a=t.direction;i.velocity=n,i.velocityX=s,i.velocityY=o,i.direction=a}function vk(e){return e&16?"cancel":e&8?"end":e&4?"move":e&2?"start":""}class fa{constructor(){x(this,"state",1);x(this,"options")}recognize(i){const t=Object.create(i);this.state&56&&(this.state=1),this.state=this.process(t),this.state&30&&this.emit(t)}emit(i){if(!i.displayObject)return;const{state:t}=this;i.displayObject.emit(this.options.event+"-"+vk(t),i.interactionEvent,i),t&8&&i.displayObject.emit(this.options.event,i.interactionEvent,i)}}class yk extends fa{constructor(){super();x(this,"preTimeStamp",0);this.options={event:be.DOUBLE_CLICK,pointers:2,lt:300,gte:50}}process(t){const{options:r}=this,n=t.timeStamp-this.preTimeStamp<r.lt&&t.timeStamp-this.preTimeStamp>r.gte;return t.eventType&1&&(this.preTimeStamp=t.timeStamp,n)?8:32}reset(){}}class mk extends fa{constructor(){super(),this.options={event:be.LONG_PRESS,pointers:1,time:1e3,threshold:9}}process(i){const{options:t}=this,r=i.pointers.length===t.pointers,n=i.distance<t.threshold,s=i.deltaTime>=t.time;return i.eventType&1&&n&&r?2:i.isFinal&&i.maxPointers===t.pointers&&s?8:32}reset(){}}class Ik extends fa{constructor(){super();x(this,"changing",!1);x(this,"count",0);this.options={event:be.PAN,pointers:2,angle:5,distance:5,dithering:5}}process(t){const{options:r}=this,n=t.pointers.length===r.pointers,s=Math.abs(t.angle)<r.angle||Math.abs(t.angle-90)<r.angle||Math.abs(t.angle+90)<r.angle||Math.abs(t.angle+180)<r.angle;if(n){if(t.eventType&2&&s&&t.distance>r.distance&&(this.count++,this.count>=r.dithering))return this.count===r.dithering?2:(this.changing=!0,4)}else if(t.eventType&4&&t.isFinal)return this.changing?(this.changing=!1,this.count=0,8):(this.changing=!1,this.count=0,32);return 32}reset(){}}let Ck=class extends fa{constructor(){super();x(this,"changing",!1);x(this,"count",0);this.options={event:be.PINCH,pointers:2,angle:20,distance:5,dithering:5}}process(t){const{options:r}=this,n=t.pointers.length===r.pointers,o=!(Math.abs(t.angle)<r.angle||Math.abs(t.angle-90)<r.angle||Math.abs(t.angle+90)<r.angle||Math.abs(t.angle+180)<r.angle);if(n){if(t.eventType&2&&o&&t.distance>r.distance&&(this.count++,this.count>=r.dithering))return this.count===r.dithering?2:(this.changing=!0,4)}else if(t.eventType&4&&t.isFinal)return this.changing?(this.changing=!1,this.count=0,8):(this.changing=!1,this.count=0,32);return 32}reset(){}};class _k extends fa{constructor(){super(),this.options={event:be.TWO_FINGER_TAP,pointers:2,time:300,threshold:9}}process(i){const{options:t}=this,r=i.pointers.length===t.pointers,n=i.distance<t.threshold,s=i.deltaTime<t.time,o=Math.abs(i.deltaX)<t.threshold&&Math.abs(i.deltaY)<t.threshold;return i.eventType&1&&n&&s&&r?2:i.isFinal&&i.maxPointers===t.pointers&&o&&s?8:32}reset(){}}class xk{constructor(){x(this,"firstInput");x(this,"firstMultiple");x(this,"prevInput");x(this,"prevScale");x(this,"offsetDelta");x(this,"prevDelta");x(this,"lastInterval")}}class Ek{constructor(){x(this,"pointers",[]);x(this,"session");x(this,"recognizers",[]);this.addRecognizers()}processPointer(i,t){const r=i.data.originalEvent,n=dk(r),s=r.pointerType,o=s==="touch";let a=hk(this.pointers,r.pointerId,"pointerId"),h=!1;if(n&1&&(r.button===0||o)?a<0&&(this.pointers.push(r),a=this.pointers.length-1):n&12&&(h=!0),a<0)return;this.pointers[a]=r;const l=new pA;l.pointers=this.pointers,l.changedPointers=[r],l.pointerType=s,l.eventType=n,l.srcEvent=r,l.interactionEvent=i,l.interactionEvent.currentTarget=t,l.interactionEvent.target=t,l.displayObject=t,this.processInput(l),h&&this.pointers.splice(a,1)}processInput(i){i.isFirst&&(this.session=new xk),Ak(this.session,i),this.recognize(i),this.session.prevInput=i}recognize(i){const{recognizers:t}=this;let r=0,n;for(;r<t.length;)n=t[r],n.recognize(i),r++}addRecognizers(){const i=new _k,t=new mk,r=new yk,n=new Ck,s=new Ik;this.recognizers.push(i),this.recognizers.push(t),this.recognizers.push(r),this.recognizers.push(n),this.recognizers.push(s)}}class bk extends eA{constructor(t,r){super(t,r);x(this,"pointerManager");this.pointerManager=new Ek,this.passEvents()}passEvents(){this.supportsPointerEvents?(this.interactionDOMElement.addEventListener("pointerdown",this.passPointerDownEvent.bind(this),this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointermove",this.passPointerMoveEvent.bind(this),this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerup",this.passPointerUpEvent.bind(this),this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointercancel",this.passPointerUpEvent.bind(this),this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.passPointerOutEvent.bind(this),this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.passPointerOverEvent.bind(this),this._eventListenerOptions)):(window.MouseEvent&&(this.interactionDOMElement.addEventListener("mousedown",this.passPointerDownEvent.bind(this),this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousemove",this.passPointerMoveEvent.bind(this),this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseup",this.passPointerUpEvent.bind(this),this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.passPointerOutEvent.bind(this),this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.passPointerOverEvent.bind(this),this._eventListenerOptions)),window.TouchEvent&&(this.interactionDOMElement.addEventListener("touchstart",this.passPointerDownEvent.bind(this),this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.passPointerMoveEvent.bind(this),this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.passPointerUpEvent.bind(this),this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.passPointerUpEvent.bind(this),this._eventListenerOptions)))}passPointerDownEvent(t){const r=this.normalizeToPointerData(t);this.autoPreventDefault&&r[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault(),this.passPointerComplete(r,t,this.processPointer.bind(this))}passPointerMoveEvent(t){const r=this.normalizeToPointerData(t);(r[0].pointerType==="mouse"||r[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null),this.passPointerComplete(r,t,this.processPointer.bind(this))}passPointerUpEvent(t){const r=this.normalizeToPointerData(t);this.passPointerComplete(r,t,this.processPointer.bind(this))}passPointerComplete(t,r,n){const s=t.length;for(let o=0;o<s;o++){const a=t[o],h=this.getInteractionDataForPointerId(a),l=this.configureInteractionEventForDOMEvent(this.eventData,a,h);l.data.originalEvent=r,n(l)}}passPointerOutEvent(t){const n=this.normalizeToPointerData(t)[0];n.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));const s=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,s);o.data.originalEvent=n,this.processPointer(o),n.pointerType==="mouse"||n.pointerType==="pen"||this.releaseInteractionDataForPointerId(s.identifier)}passPointerOverEvent(t){const n=this.normalizeToPointerData(t)[0],s=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,s);o.data.originalEvent=n,n.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.processPointer(o)}processPointer(t){this.processInteractive(t,this.lastObjectRendered,this.hitPointer.bind(this),!0)}hitPointer(t,r,n){n&&this.pointerManager.processPointer(t,r)}}class wk{constructor(i){x(this,"prev");x(this,"next");x(this,"value");this.prev=null,this.next=null,this.value=i}}class Qh{constructor(){x(this,"head");x(this,"end");x(this,"length",0);this.head=null,this.end=null}static createNode(i){return new wk(i)}static create(i){const t=new Qh;if(i)for(let r=0;r<=i.length-1;r++)t.insert(Qh.createNode(i[r]));return t}insert(i){i.next=null,i.prev=this.head,this.head&&(this.head.next=i),this.end||(this.end=i),this.head=i,this.length+=1}insertPrev(i,t){const r=i.prev;t.prev=r,t.next=i,i.prev=t,r?r.next=t:this.end=t,this.length+=1}moveToNext(i,t){t===this.head||i===t||(this.delete(t),this.insertNext(i,t))}moveToPrev(i,t){t===this.end||i===t||(this.delete(t),this.insertPrev(i,t))}insertNext(i,t){const r=i.next;i.next=t,t.next=r,t.prev=i,r?r.prev=t:this.head=t,this.length+=1}search(i){let t=this.head;for(;t!==null&&t.value!==i;)t=t.prev;return t}delete(i){const{prev:t,next:r}=i;delete i.prev,delete i.next,i===this.head&&(this.head=t),i===this.end&&(this.end=r),t&&(t.next=r),r&&(r.prev=t),this.length-=1}forEach(i){let t=this.end,r=0;for(i(t,r);t.next;)t=t.next,r++,i(t,r)}}var cn;(function(e){e[e.DESC=0]="DESC",e[e.ESC=1]="ESC"})(cn||(cn={}));class Tk{changeLayer(i,t,r){const n=Qh.create(i),s=[...t];return s.sort((a,h)=>h.displayOrder-a.displayOrder),{[pn.UP]:this.moveUp,[pn.DOWN]:this.moveDown,[pn.TOP]:this.moveToTop,[pn.END]:this.moveToEnd}[r].bind(this)(n,s),n}moveDown(i,t){const r=t[t.length-1],n=i.search(r.id);let s=n.prev||n;s=this.findFirstDiffEleInListByOrderedArr(i,t,s,cn.ESC),s&&this.moveToPrev(i,t,s)}moveToTop(i,t){const r=this.findFirstDiffEleInListByOrderedArr(i,t,i.head);r&&this.moveToNext(i,t,r)}moveUp(i,t){const r=t[0],n=i.search(r.id);let s=n.next||n;s=this.findFirstDiffEleInListByOrderedArr(i,t,s),s&&this.moveToNext(i,t,s)}moveToEnd(i,t){const r=this.findFirstDiffEleInListByOrderedArr(i,t,i.end,cn.ESC);r&&this.moveToPrev(i,t,r)}moveToPrev(i,t,r){if(r){const n=[...t];n.sort((s,o)=>s.displayOrder-o.displayOrder),n.forEach(s=>{const o=i.search(s.id);o&&i.moveToPrev(r,o)})}}moveToNext(i,t,r){r&&t.forEach(n=>{const s=i.search(n.id);s&&i.moveToNext(r,s)})}updateOrder(i,t){i.forEach((r,n)=>{const s=t.find(o=>r.value===o.id);s&&(s.zOrder=n+1)})}findFirstDiffEleInListByOrderedArr(i,t,r,n=cn.DESC){let s=r;t=n===cn.DESC?t:t.reverse();for(const o in t){const a=i.search(t[o].id);if(s=s||i.head,a!==s)break;if(Number(o)===t.length-1){s=null;break}s=s[n===cn.DESC?"prev":"next"]}return s}}var ti,vr,Vo,zo,is;class S_ extends je{constructor(t=Number.MAX_VALUE){super();lt(this,ti,[]);lt(this,vr,[]);lt(this,Vo,!1);lt(this,zo,!1);lt(this,is,void 0);x(this,"initOperation");It(this,is,t)}get undoStack(){return B(this,ti)}get redoStack(){return B(this,vr)}get canUndo(){return B(this,ti).length>0}get canRedo(){return B(this,vr).length>0}get top(){const t=B(this,ti).length;return t<1?this.initOperation?this.initOperation:void 0:B(this,ti)[t-1]}push(t){B(this,ti).push(t),B(this,is)!==Number.MAX_VALUE&&B(this,ti).length>B(this,is)&&B(this,ti).shift(),It(this,vr,[]),this.emitCanDoEvent()}undo(){if(!this.canUndo)return;const t=B(this,ti).pop();B(this,vr).push(t),this.emitCanDoEvent()}redo(){if(!this.canRedo)return;const t=B(this,vr).pop();B(this,ti).push(t),this.emitCanDoEvent()}clear(){It(this,ti,[]),It(this,vr,[]),this.emitCanDoEvent()}emitCanDoEvent(){(B(this,zo)!==this.canRedo||B(this,Vo)!==this.canUndo)&&this.emit(Ir.CAN_DO_CHANGE,this.canUndo,this.canRedo),this.updateCanDo()}updateCanDo(){It(this,zo,this.canRedo),It(this,Vo,this.canUndo)}}ti=new WeakMap,vr=new WeakMap,Vo=new WeakMap,zo=new WeakMap,is=new WeakMap;var yn,Wo;class Bk extends je{constructor(){super(...arguments);lt(this,yn,Ml);lt(this,Wo,void 0)}get displayConfig(){return B(this,yn)}set displayConfig(t){It(this,yn,{...B(this,yn),...t}),this.emit(Dc.DISPLAY_CONFIG_CHANGE,B(this,yn))}get imageProcessConfig(){return B(this,Wo)}set imageProcessConfig(t){It(this,Wo,t)}}yn=new WeakMap,Wo=new WeakMap;var Sr;class Rk extends je{constructor(){super(...arguments);lt(this,Sr,ue.SELECT)}get curMode(){return B(this,Sr)}set curMode(t){if(B(this,Sr)===t)return;const r=B(this,Sr);It(this,Sr,t),this.emit(Eo.CHANGE,r,B(this,Sr))}}Sr=new WeakMap;function N_(...e){const i=[];return e.forEach(t=>{t.getInteractiveElements().forEach(n=>{i.push(n)})}),i}function Pk(e,i,t,r={texture:!0}){const n=N_(...i),s=new Set;n.forEach(l=>{s.add(l.id)});const{curIDs:o,curAttributes:a}=O_(e,t,r);return o.forEach(l=>{s.add(l)}),{allIDs:s,curIDs:o,curAttributes:a}}function O_(e,i,t={texture:!0}){const r=new Map,n=new Set;return e.forEach(s=>{n.add(s.id),s.transform.updateLocalTransform(),s.updateTransform();const o=s.toJSON(i,t),a=pf(s.transform.worldTransform.clone(),i.transform.worldTransform.clone());r.set(s.id,{...o,matrixByViewport:a})}),{curIDs:n,curAttributes:r}}var ai,rs,mn;class Sk{constructor(i){lt(this,ai,void 0);x(this,"mask");x(this,"axis");lt(this,rs,void 0);lt(this,mn,void 0);x(this,"onDragStart",i=>{It(this,rs,i.data),this.axis.width=FD,this.axis.alpha=.5,It(this,mn,!0)});x(this,"onDragMove",()=>{if(B(this,mn)){const i=B(this,rs).getLocalPosition(this.axis.parent),t=this.mask.parent.toLocal(new M(i.x,0));t.x<0?(i.x=this.mask.parent.toGlobal(new M(0,0)).x,t.x=0):t.x>B(this,ai).worldWidth&&(i.x=this.mask.parent.toGlobal(new M(B(this,ai).worldWidth,0)).x,t.x=B(this,ai).worldWidth),this.axis.position.x=i.x,this.mask.width=t.x}});x(this,"onDragEnd",()=>{B(this,mn)&&(this.axis.width=Lg,this.axis.alpha=1,It(this,rs,null),It(this,mn,!1),B(this,ai).onUpdate())});It(this,ai,i),this.clear(),this.drawMask(),this.drawAxis()}drawMask(){this.mask=new Kt().beginFill(0,.5).drawRect(0,0,B(this,ai).viewportX,B(this,ai).worldHeight).endFill(),this.mask.name="AXIS_MASK"}drawAxis(){this.axis=new Kt().beginFill(2670148,1).drawRect(0,0,Lg,B(this,ai).stageHeight).endFill(),this.axis.x=B(this,ai).stageX,this.axis.interactive=!0,this.axis.cursor="ew-resize",this.axis.name="CENTRAL_AXIS",this.axis.on("pointerdown",this.onDragStart),this.axis.on("pointermove",this.onDragMove),this.axis.on("pointerup",this.onDragEnd),this.axis.on("pointerupoutside",this.onDragEnd);const i=new $t;i.position.set(0,0),i.addChild(this.axis)}resize(i){const{worldHeight:t,stageHeight:r}=i;this.mask.height=t,this.axis.height=r}clear(){var i,t;(i=this.axis)==null||i.destroy(!0),(t=this.mask)==null||t.destroy(!0)}}ai=new WeakMap,rs=new WeakMap,mn=new WeakMap;var Pr;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(Pr||(Pr={}));const Zr=3,Nk=.1;var hi;class Ok{constructor(i){x(this,"pointerdown");x(this,"container");x(this,"dValue");x(this,"selected");x(this,"unSelected");x(this,"transformer");lt(this,hi,void 0);this.pointerdown=!1,this.container=new $t,this.container.name="GUIDELINE",this.dValue={x:0,y:0},this.selected=[],this.unSelected=[],It(this,hi,Object.assign({},OD,i))}onTransformSelected(i){this.selected=i.selected,this.unSelected=i.unSelected,this.transformer=i}onPointerdown(i){if(this.pointerdown=!0,this.transformer){const t=this.transformer.worldGroupBounds,{x:r,y:n,scale:s}=this.transformer.viewport,o=t.minX-Number((i.data.global.x-r)/s.x),a=t.minY-Number((i.data.global.y-n)/s.y);this.dValue={x:o,y:a}}}onPointerup(){this.pointerdown=!1,this.container.removeChildren()}onObjectMoving(i){if(this.pointerdown){if(this.selected){if(this.selected.length===0)return}else return;this.container.children.length>0&&this.correctPosition(i),this.container.removeChildren(),B(this,hi).enableAdsorb&&this.compareWithUnselected()}}compareWithUnselected(){const i=[],t=[];if(this.transformer){const r=this.transformer.worldGroupBounds,n=this.handleBounds(r.minX,r.maxX),s=this.handleBounds(r.minY,r.maxY),o=this.unSelected||[];let a=Zr,h=Zr;o.forEach(d=>{const A=this.toLocal(d.getBounds());let p=[0,0,0];p=this.handleBounds(A.left,A.right);const g=this.compareCoordinate(n,p);g.coordinateArr.forEach(I=>{i.push({coordinate:I,min:A.top,max:A.bottom})}),a=Math.abs(g.min)<Math.abs(a)?g.min:a,p=this.handleBounds(A.top,A.bottom);const y=this.compareCoordinate(s,p);y.coordinateArr.forEach(I=>{t.push({coordinate:I,min:A.left,max:A.right})}),h=Math.abs(y.min)<Math.abs(h)?y.min:h});const{worldHeight:l,worldWidth:u}=this.transformer.viewport,c=this.compareCoordinate(n,[u/2]);a=Math.abs(c.min)<Math.abs(a)?c.min:a,c.coordinateArr.forEach(d=>{i.push({coordinate:d,min:0,max:l})});const f=this.compareCoordinate(s,[l/2]);if(h=Math.abs(f.min)<Math.abs(h)?f.min:h,f.coordinateArr.forEach(d=>{t.push({coordinate:d,min:0,max:u})}),Math.abs(a)<Zr&&a!==0||Math.abs(h)<Zr&&h!==0)this.moveSelectedGraphical(a,h);else{if(i.length>0){const d=this.handleCoordinate(i,s);this.creatGuideLineCoordinate(d,Pr.VERTICAL)}if(t.length>0){const d=this.handleCoordinate(t,n);this.creatGuideLineCoordinate(d,Pr.HORIZONTAL)}}}}correctPosition(i){const{x:t,y:r}=i.data.global,n=this.transformer.viewport;if(this.transformer){const s=this.transformer.viewport,o={x:Number((t-s.x)/s.scale.x)+this.dValue.x,y:Number((r-s.y)/s.scale.y)+this.dValue.y},a={x:o.x-this.transformer.worldGroupBounds.minX,y:o.y-this.transformer.worldGroupBounds.minY};this.selected.forEach(h=>{const l=h.toJSON(n),u=new M(l.x+a.x,l.y+a.y);Fo(h,u,n)})}}handleCoordinate(i,t){const r=t[0],n=t[2],s=[];return Array.isArray(i)&&i.forEach(o=>{if(s.filter(h=>h.coordinate===o.coordinate).length===0){const h={coordinate:o.coordinate,middleMin:r,middleMax:n};o.min>n?(h.largeNear=o.min,h.large=o.max):o.max<r?(h.littleNear=o.max,h.little=o.min):(o.max>n&&(h.large=o.max),o.min<r&&(h.little=o.min)),s.push(h)}else s.forEach(h=>{h.coordinate===o.coordinate&&(o.min>n?(h.largeNear=h.largeNear!==void 0?Math.min(h.largeNear,o.min):o.min,h.large=h.large!==void 0?Math.max(h.large,o.max):o.max):o.max<r?(h.littleNear=h.littleNear!==void 0?Math.max(h.littleNear,o.max):o.max,h.little=h.little!==void 0?Math.min(h.little,o.min):o.min):(o.max>n&&(h.large=h.large!==void 0?Math.max(h.large,o.max):o.max),o.min<r&&(h.little=h.little!==void 0?Math.min(h.little,o.min):o.min)))})}),s}handleBounds(i,t){return[i,(i+t)/2,t]}compareCoordinate(i,t){let r=Zr;const n=[];return Array.isArray(i)&&Array.isArray(t)&&i.forEach(s=>{t.forEach(o=>{Math.abs(s-o)<Nk?(n.push(s),r=0):Math.abs(o-s)<Math.abs(r)&&(r=o-s)})}),{coordinateArr:n,min:r}}createLine(i,t){const{distanceLineColor:r}=B(this,hi);if(Array.isArray(i)){const n=new Kt;i.forEach(s=>{if(s.color===r&&this.distanceText(s.min,s.max,s.coordinate,t),t===Pr.HORIZONTAL){const o={x:s.min,y:s.coordinate},a={x:s.max,y:s.coordinate};n.lineStyle({width:1,color:s.color,native:!0}).moveTo(o.x,o.y).lineTo(a.x,a.y)}else if(t===Pr.VERTICAL){const o={x:s.coordinate,y:s.min},a={x:s.coordinate,y:s.max};n.lineStyle({width:1,color:s.color,native:!0}).moveTo(o.x,o.y).lineTo(a.x,a.y)}}),this.container.addChild(n)}}creatGuideLineCoordinate(i,t){const{alignLineColor:r,distanceLineColor:n}=B(this,hi);if(Array.isArray(i)){const s=[],o=[],a=[];i.forEach(h=>{h.little!==void 0&&(h.littleNear!==void 0&&!s.includes(h.littleNear)?(a.push({min:h.little,max:h.littleNear,coordinate:h.coordinate,color:r}),a.push({min:h.littleNear,max:h.middleMin,coordinate:h.coordinate,color:n}),s.push(h.littleNear)):a.push({min:h.little,max:h.middleMin,coordinate:h.coordinate,color:r})),h.large!==void 0&&(h.largeNear!==void 0&&!o.includes(h.largeNear)?(a.push({min:h.largeNear,max:h.large,coordinate:h.coordinate,color:r}),a.push({min:h.middleMax,max:h.largeNear,coordinate:h.coordinate,color:n}),o.push(h.largeNear)):a.push({min:h.middleMax,max:h.large,coordinate:h.coordinate,color:r})),a.push({min:h.middleMin,max:h.middleMax,coordinate:h.coordinate,color:r})}),this.createLine(a,t)}}updateTextScale(i){const t=Math.max(i,.25);this.container.children.forEach(r=>{r instanceof Is&&(r.scale.x=1/t,r.scale.y=1/t)})}distanceText(i,t,r,n){const{fractionDigits:s,unit:o,pixelPerUnit:a}=B(this,hi),h=new Is(`${((t-i)/a).toFixed(s)} ${o}`,{fontSize:B(this,hi).fontSize,fill:B(this,hi).fontColor});if(h.resolution=2,h.scale.x=1/this.transformer.viewport.scaled,h.scale.y=1/this.transformer.viewport.scaled,n===Pr.HORIZONTAL){const l={x:(t+i)/2,y:r};h.position.set(l.x,l.y),h.anchor.set(.5,1)}else if(n===Pr.VERTICAL){const l={x:r,y:(i+t)/2};h.position.set(l.x,l.y),h.anchor.set(1,.5)}this.container.addChild(h)}moveSelectedGraphical(i,t){const r=this.transformer.viewport;i=Math.abs(i)<Zr?i:0,t=Math.abs(t)<Zr?t:0,this.selected.forEach(n=>{const s=n.toJSON(r),o=new M(s.x+i,s.y+t);Fo(n,o,r)}),this.compareWithUnselected()}toLocal(i){if(this.transformer){const{x:t,y:r,scale:n}=this.transformer.viewport;return{left:Number((i.left-t)/n.x),right:Number((i.right-t)/n.x),top:Number((i.top-r)/n.y),bottom:Number((i.bottom-r)/n.y)}}else return{left:0,right:0,top:0,bottom:0}}updateOptions(i){Object.assign(B(this,hi),i)}get options(){return B(this,hi)}}hi=new WeakMap;const De={zero:0,min:.01,half:.5,full:1};var Go;(function(e){e.light="light",e.dark="dark"})(Go||(Go={}));var Uh;(function(e){e.square="square",e.ellipse="ellipse"})(Uh||(Uh={}));var ko;(function(e){e.left="left",e.center="center",e.right="right"})(ko||(ko={}));var fn;(function(e){e.horizontal="horizontal",e.vertical="vertical"})(fn||(fn={}));var Ho;(function(e){e.default="default",e.checkbox="checkbox"})(Ho||(Ho={}));var so;(function(e){e.start="start",e.end="end",e.center="center"})(so||(so={}));const Yu={margin:6,padding:2,radius:4,fast:.25,normal:.5,slow:1,primaryColor:0,color1:0,color2:16777215,fill:0,fillAlpha:1,fillActive:0,fillActiveAlpha:1,stroke:16777215,strokeWidth:.6,strokeAlpha:1,strokeActive:16777215,strokeActiveWidth:.6,strokeActiveAlpha:1,iconSize:0,iconColor:16777215,iconColorActive:0,background:0},Ey={fontFamily:'"Avenir Next", "Open Sans", "Segoe UI", "Roboto", "Helvetica Neue", -apple-system, system-ui, BlinkMacSystemFont, Arial, sans-serif !default',fontWeight:500,fontSize:16,fill:16777215,stroke:0,strokeThickness:0,miterLimit:1,lineJoin:"round"},Dk={color1:16185078,color2:2631720},Fk={color1:16185078,color2:2631720},by={[Go.light]:Dk,[Go.dark]:Fk};function Lk(e=Go.light){if(!by[e])return Yu;const{color1:i,color2:t}=by[e];return{...Yu,fill:i,fillActive:i,background:i,stroke:t,strokeActive:t,iconColor:t,textStyle:{...Ey,fill:t,stroke:i},textActiveStyle:{...Ey,fill:Yu.primaryColor}}}const D_={getThemeConfig:Lk};function Ja(e,i){if(e instanceof Jt)return e;{const t=Ot.from(new Wt(e)),r=new Ke(t);return r.width=i,r.height=i,r}}class Mk extends $t{constructor(t={}){super();x(this,"options");x(this,"layout");x(this,"content");x(this,"text");x(this,"icon");x(this,"iconInactive");x(this,"iconActive");x(this,"iconHover");x(this,"iconActiveHover");x(this,"theme");x(this,"buttonActive");x(this,"isButtonHover");x(this,"isButtonDisabled");x(this,"isClickDown",!1);x(this,"buttonWidth");x(this,"buttonHeight");this.init(t),this.setupLayout(),this.setupEvent()}get isActive(){return this.buttonActive}set isActive(t){this.buttonActive=t,this.renderContent()}get isHover(){return this.isButtonHover}set isHover(t){this.isButtonHover=t,this.renderContent()}get isDisabled(){return this.isButtonDisabled}set isDisabled(t){this.isButtonDisabled=t,this.isButtonDisabled?(this.interactive=!1,this.layout.alpha=De.half,this.icon&&(this.icon.alpha=De.half),this.text&&(this.text.alpha=De.half)):(this.layout.interactive=!0,this.layout.alpha=De.full,this.icon&&(this.icon.alpha=De.full),this.text&&(this.text.alpha=De.full))}init(t){const{theme:r,icon:n,iconHover:s,iconActive:o,iconActiveHover:a,...h}=t;this.theme=D_.getThemeConfig(r),this.options={label:null,x:0,y:0,padding:this.theme.padding,shape:Uh.square,icon:n||o,iconHover:s||n,iconActive:o||n,iconActiveHover:a||o||n,iconPosition:ko.left,iconColor:this.theme.iconColor,iconColorActive:this.theme.iconColorActive,fill:this.theme.fill,fillAlpha:this.theme.fillAlpha,fillActive:this.theme.fillActive,fillActiveAlpha:this.theme.fillActiveAlpha,stroke:this.theme.stroke,strokeWidth:this.theme.strokeWidth,strokeAlpha:this.theme.strokeAlpha,strokeActive:this.theme.strokeActive,strokeActiveWidth:this.theme.strokeActiveWidth,strokeActiveAlpha:this.theme.strokeActiveAlpha,textStyle:this.theme.textStyle,textActiveStyle:this.theme.textActiveStyle,radius:this.theme.radius,disabled:!1,active:!1,visible:!0,action:null,type:Ho.default,...h},this.interactive=!0,this.cursor="pointer",this.visible=this.options.visible,this.text=null,this.layout=null,this.content=null}setupLayout(){this.layout=new Kt,this.addChild(this.layout),this.content=new $t,this.addChild(this.content),this.options.label&&(this.text=new Is(this.options.label,this.options.textStyle));let t=20;this.text&&(t=this.text.height),this.options.icon&&(this.iconInactive=Ja(this.options.icon,this.options.iconSize||t),this.iconHover=this.iconInactive,this.iconActive=this.iconInactive,this.iconActiveHover=this.iconInactive),this.options.icon!==this.options.iconHover&&(this.iconHover=Ja(this.options.iconHover,this.options.iconSize||t)),this.options.icon!==this.options.iconActive&&(this.iconActive=Ja(this.options.iconActive,this.options.iconSize||t)),this.options.icon!==this.options.iconActiveHover&&(this.iconActiveHover=Ja(this.options.iconActiveHover,this.options.iconSize||t)),this.isActive=this.options.active,this.isDisabled=this.options.disabled,this.position.set(this.options.x,this.options.y)}setupEvent(){this.on("pointerover",()=>{this.isHover=!0}),this.on("pointerout",()=>{this.isHover=!1}),this.on("pointerdown",()=>{this.isClickDown=!0}),this.on("pointerup",t=>{this.isClickDown&&(this.options.type===Ho.checkbox&&(this.isActive=!this.isActive),this.options.action&&typeof this.options.action=="function"&&this.options.action(t),this.isClickDown=!1)})}renderContent(){this.removeChild(this.content),this.content=new $t,this.addChild(this.content),this.isActive?this.icon=this.isHover?this.iconActiveHover:this.iconActive:this.icon=this.isHover?this.iconHover:this.iconInactive,this.text&&(this.text.position.set(0,0),this.text.style=this.isActive?this.options.textActiveStyle:this.options.textStyle);let t=0;this.icon&&this.text?t=this.icon.width+this.text.width+3*this.options.padding:this.icon?t=this.icon.width+2*this.options.padding:this.text&&(t=this.text.width+2*this.options.padding);let r=0;this.icon?r=this.icon.height+2*this.options.padding:this.text&&(r=this.text.height+2*this.options.padding),this.icon&&!this.text&&(t=r=Math.max(t,r)),this.buttonWidth=t,this.buttonHeight=r,this.icon&&this.text?(this.options.iconPosition===ko.right?this.icon.x=this.text.width+this.options.padding:this.text.x=this.icon.width+this.options.padding,this.content.addChild(this.icon,this.text)):this.icon?this.content.addChild(this.icon):this.text&&this.content.addChild(this.text),this.content.x=(this.buttonWidth-this.content.width)/2,this.content.y=(this.buttonHeight-this.content.height)/2;for(const n of this.content.children)n.y=this.content.height/2-n.height/2;this.draw()}draw(){this.layout.clear(),this.isActive?(this.layout.lineStyle(this.options.strokeActiveWidth,this.options.strokeActive,this.options.strokeActiveAlpha),this.layout.beginFill(this.options.fillActive,this.options.fillActiveAlpha)):(this.layout.lineStyle(this.options.strokeWidth,this.options.stroke,this.options.strokeAlpha),this.layout.beginFill(this.options.fill,this.options.fillAlpha)),this.options.shape===Uh.ellipse?this.layout.drawEllipse(this.buttonWidth/2,this.buttonHeight/2,this.buttonWidth/2,this.buttonHeight/2):this.layout.drawRoundedRect(0,0,this.buttonWidth,this.buttonHeight,this.options.radius),this.layout.endFill()}show(){this.options.strokeAlpha=De.full,this.options.strokeActiveAlpha=De.full,this.options.fillAlpha=De.full,this.options.fillActiveAlpha=De.full,this.renderContent()}hide(){this.options.strokeAlpha=De.min,this.options.strokeActiveAlpha=De.min,this.options.fillAlpha=De.min,this.options.fillActiveAlpha=De.min,this.renderContent()}}class Qk extends Kt{constructor(t={}){super();x(this,"options");x(this,"theme");x(this,"buttons",[]);x(this,"isGroupDisabled",!1);this.init(t),this.setupLayout(),this.renderContent()}get isDisabled(){return this.isGroupDisabled}set isDisabled(t){this.isGroupDisabled=t,this.buttons.forEach(r=>r.isDisabled=t)}init(t){const{theme:r,...n}=t;this.theme=D_.getThemeConfig(r),this.options={x:0,y:0,padding:this.theme.padding,iconPosition:ko.left,iconColor:this.theme.iconColor,iconColorActive:this.theme.iconColorActive,fill:this.theme.fill,fillAlpha:this.theme.fillAlpha,fillActive:this.theme.fillActive,fillActiveAlpha:this.theme.fillActiveAlpha,stroke:this.theme.stroke,strokeWidth:this.theme.strokeWidth,strokeAlpha:this.theme.strokeAlpha,strokeActive:this.theme.strokeActive,strokeActiveWidth:this.theme.strokeActiveWidth,strokeActiveAlpha:this.theme.strokeActiveAlpha,textStyle:this.theme.textStyle,textActiveStyle:this.theme.textActiveStyle,radius:this.theme.radius,disabled:null,visible:!0,type:Ho.default,orientation:fn.horizontal,space:0,...n},this.buttons=[],this.interactive=!0}setupLayout(){let t=0;for(const r of this.options.buttons){delete r.x,delete r.y,this.options.orientation===fn.horizontal?r.x=t:r.y=t,r.theme=r.theme||this.options.theme,r.padding=r.padding||this.options.padding,r.iconPosition=r.iconPosition||this.options.iconPosition,r.iconColor=r.iconColor||this.options.iconColor,r.iconColorActive=r.iconColorActive||this.options.iconColorActive,r.fill=r.fill||this.options.fill,r.fillAlpha=r.fillAlpha||this.options.fillAlpha,r.fillActive=r.fillActive||this.options.fillActive,r.fillActiveAlpha=r.fillActiveAlpha||this.options.fillActiveAlpha,r.stroke=r.stroke||this.options.stroke,r.strokeWidth=r.strokeWidth??this.options.strokeWidth,r.strokeAlpha=r.strokeAlpha??this.options.strokeAlpha,r.strokeActive=r.strokeActive||this.options.strokeActive,r.strokeActiveWidth=r.strokeActiveWidth??this.options.strokeActiveWidth,r.strokeActiveAlpha=r.strokeActiveAlpha??this.options.strokeActiveAlpha,r.textStyle=r.textStyle||this.options.textStyle,r.textActiveStyle=r.textActiveStyle||this.options.textActiveStyle,r.radius=r.radius??this.options.radius;const n=new Mk(r);this.addChild(n),this.buttons.push(n),t+=this.options.orientation===fn.horizontal?n.width:n.height,this.options.separate&&(t+=this.options.space)}if(this.options.orientation===fn.vertical){const r=this.buttons.map(s=>s.width),n=Math.max(...r);this.buttons.forEach(s=>{s.width=n,s.renderContent()})}this.options.disabled!==null&&(this.isDisabled=this.options.disabled),this.position.set(this.options.x,this.options.y)}renderContent(){this.options.separate||this.draw()}draw(){this.buttons.forEach(t=>t.hide()),this.clear(),this.lineStyle(this.options.strokeWidth,this.options.stroke,this.options.strokeAlpha),this.beginFill(this.options.fill,this.options.fillAlpha),this.drawRoundedRect(0,0,this.width,this.height,this.options.radius),this.lineStyle(this.options.strokeWidth,this.options.stroke,this.options.strokeAlpha/2),this.buttons.forEach((t,r)=>{r>0&&(this.moveTo(t.x,t.y),this.options.orientation===fn.horizontal?this.lineTo(t.x,t.height):this.lineTo(t.width,t.y))}),this.endFill()}show(){this.alpha=De.full}hide(){this.alpha=De.min}}var li,oe,Xh,F_,Yh,L_,Vh,M_,zh,Q_,jo,rd,Wh,U_;class Uk extends $t{constructor(t){super();lt(this,Xh);lt(this,Yh);lt(this,Vh);lt(this,zh);lt(this,jo);lt(this,Wh);x(this,"config");x(this,"addToContainer");x(this,"isPointerDown");lt(this,li,void 0);lt(this,oe,void 0);x(this,"buttonGroup");x(this,"display");x(this,"viewportScale");x(this,"viewportWorldWidth");x(this,"viewportWorldHeight");x(this,"onRecord");x(this,"selectDisplay");x(this,"processController");x(this,"imageProcessConfig");x(this,"start",t=>{B(this,li).visible||(this.isPointerDown=!0,Gt(this,Vh,M_).call(this),B(this,oe).clear().lineStyle(nr).drawRect(0,0,1,1).endFill(),B(this,oe).position.set(t.x,t.y))});x(this,"update",t=>{if(this.isPointerDown){const{x:r,y:n}=B(this,oe).position,{x:s,y:o}=t;B(this,oe).clear().lineStyle(nr).drawRect(0,0,s-r,o-n)}});x(this,"end",(t,r)=>{if(!this.isPointerDown)return;this.isPointerDown=!1;const{position:{x:n,y:s}}=B(this,oe),{x:o,y:a}=t,h=n.toFixed()===o.toFixed(),l=s.toFixed()===a.toFixed();if(h&&l){B(this,oe).clear();return}o<n&&(B(this,oe).position.x=o),a<s&&(B(this,oe).position.y=a);const u=Math.abs(o-n),c=Math.abs(a-s);if(u<=1||c<=1){B(this,oe).clear();return}B(this,oe).clear().beginFill(0,1).lineStyle(nr).drawRect(0,0,u,c).endFill(),this.interactive=!0,this.selectDisplay([B(this,oe)]),B(this,oe).blendMode=Nt.ERASE,B(this,li).visible=!0,this.filters=[new YC.AlphaFilter],this.display=r,Gt(this,zh,Q_).call(this)});x(this,"confirm",()=>{B(this,li).visible&&(Gt(this,Xh,F_).call(this),this.cancel())});x(this,"cancel",()=>{var t;B(this,li).visible&&(B(this,li).visible=!1,B(this,oe).destroy(),(t=this.buttonGroup)==null||t.destroy(),It(this,oe,null),this.buttonGroup=null,this.filters=[],this.selectDisplay([]),this.interactive=!1)});this.config=RD,this.name=kr.CUTTER,this.cursor=kr.CUTTER,this.addToContainer=!0,this.isPointerDown=!1,this.viewportScale=t.viewportScale,this.viewportWorldWidth=t.viewportWorldWidth,this.viewportWorldHeight=t.viewportWorldHeight,this.onRecord=t.onRecord,this.selectDisplay=t.selectDisplay,this.processController=t.processController,this.imageProcessConfig=t.imageProcessConfig,Gt(this,Yh,L_).call(this)}calIsNotIntersect(t){const{x:r,y:n,width:s,height:o}=this.display.getBounds(),a=new M(r,n),h=new M(r+s,n+o),l=new M(h.x,a.y),u=new M(a.x,h.y),f=[a,l,h,u].every(A=>!B(this,oe).containsPoint(A)),d=t.every(A=>!E3(this.display,A));return f&&d}updateBounds(t,r){const{x:n,y:s,width:o,height:a}=this.display.getBounds(),h=n+o,l=s+a;t.x<n?t.x=n:t.x>h&&(t.x=h),t.y<s?t.y=s:t.y>l&&(t.y=l),r.x<n?r.x=n:r.x>h&&(r.x=h),r.y<s?r.y=s:r.y>l&&(r.y=l)}updateAttr(){}}li=new WeakMap,oe=new WeakMap,Xh=new WeakSet,F_=function(){const{display:t}=this,{x:r,y:n,width:s,height:o}=B(this,oe).getBounds(),a=new M(r,n),h=new M(r+s,n+o);this.updateBounds(a,h);const l=Math.abs(h.x-a.x),u=Math.abs(h.y-a.y);if(l<=1||u<=1)return;const c=new M(h.x,a.y),f=new M(a.x,h.y);if(this.calIsNotIntersect([a,c,h,f]))return;const A=t.toLocal(a),p=t.toLocal(c),g=t.toLocal(h),y=t.toLocal(f),I={minLocalPoint:A,rtLocalPoint:p,maxLocalPoint:g,lbLocalPoint:y};if(this.processController.clip(I),t.angle%360===0){const E=t.parent.toLocal(a);t.x=E.x,t.y=E.y}else if(t.angle%360===90){const E=t.parent.toLocal(c);t.x=E.x,t.y=E.y}this.display.texture.update(),this.onRecord()},Yh=new WeakSet,L_=function(){const{viewportWorldWidth:t,viewportWorldHeight:r}=this;It(this,li,new Kt().beginFill(0,.6).drawRect(0,0,t,r).endFill()),B(this,li).name="SHADOW",B(this,li).visible=!1,this.addChild(B(this,li))},Vh=new WeakSet,M_=function(){It(this,oe,new Kt),B(this,oe).lockRatio=!1,B(this,oe).name="SELECTOR",B(this,oe).transformUpdate=()=>{Gt(this,jo,rd).call(this)},this.addChild(B(this,oe))},zh=new WeakSet,Q_=function(){const t=this.imageProcessConfig.cutter,{confirm:r,cancel:n,groupConfig:s}=t,o=new Qk({...s,buttons:[{iconSize:16,...n,icon:(n==null?void 0:n.icon)||"cancel",iconHover:(n==null?void 0:n.iconHover)||"cancel_hover",action:this.cancel},{iconSize:16,...r,icon:(r==null?void 0:r.icon)||"cancel",iconHover:(r==null?void 0:r.iconHover)||"confirm_hover",action:this.confirm}],stroke:9610137,strokeAlpha:.3});this.addChild(o),this.buttonGroup=o,Gt(this,jo,rd).call(this)},jo=new WeakSet,rd=function(){const t=Gt(this,Wh,U_).call(this);this.buttonGroup.position.set(t.x,t.y)},Wh=new WeakSet,U_=function(){var o,a,h,l;const t=((a=(o=this.imageProcessConfig.cutter)==null?void 0:o.groupConfig)==null?void 0:a.margin)??0,r=((l=(h=this.imageProcessConfig.cutter)==null?void 0:h.groupConfig)==null?void 0:l.align)||"end",n=B(this,oe).getBounds();return{[so.start]:()=>{const u=this.toLocal(new M(n.x,n.height+n.y));return{x:u.x,y:u.y+t}},[so.center]:()=>{const u=this.toLocal(new M(n.x+n.width/2,n.height+n.y));return{x:u.x-this.buttonGroup.width/2,y:u.y+t}},[so.end]:()=>{const u=this.toLocal(new M(n.x+n.width,n.height+n.y));return{x:u.x-this.buttonGroup.width,y:u.y+t}}}[r]()};var In,ui,Ko,nd,ns,hh;class Gk extends Kt{constructor(t){super();lt(this,Ko);lt(this,ns);x(this,"size");x(this,"addToContainer");x(this,"isPointerDown");x(this,"viewportWorldWidth");x(this,"viewportWorldHeight");lt(this,In,void 0);lt(this,ui,void 0);x(this,"onRecord");x(this,"processController");x(this,"start",(t,r)=>{this.size!==0&&(It(this,In,t),B(this,ui).push(t),this.isPointerDown=!0,Gt(this,ns,hh).call(this,r))});x(this,"update",(t,r)=>{if(this.updateCursorVisible(t),!!this.isPointerDown&&this.size!==0&&(B(this,ui).push(t),B(this,ui).length>3)){const n=B(this,ui).slice(-2),s=n[0],o=new M((n[0].x+n[1].x)/2,(n[0].y+n[1].y)/2);Gt(this,ns,hh).call(this,r,s,o),It(this,In,o)}});x(this,"end",(t,r)=>{if(this.isPointerDown&&this.size!==0){if(B(this,ui).push(t),B(this,ui).length>3){const n=B(this,ui).slice(-2),s=n[0],o=n[1];Gt(this,ns,hh).call(this,r,s,o)}It(this,In,null),this.isPointerDown=!1,It(this,ui,[]),this.onRecord()}});this.name=kr.ERASER,this.cursor="none",this.size=0,It(this,ui,[]),this.viewportWorldHeight=t.viewportWorldHeight,this.viewportWorldWidth=t.viewportWorldWidth,this.processController=t.processController,this.onRecord=t.onRecord,this.visible=!1,this.addToContainer=!0,this.isPointerDown=!1,Gt(this,Ko,nd).call(this)}updateAttr(t){"size"in t&&(this.size=Number(t.size)||0,Gt(this,Ko,nd).call(this))}updateCursorVisible(t){this.x=t.x,this.y=t.y,this.visible=t.x>=0&&t.x<=this.viewportWorldWidth&&t.y>=0&&t.y<=this.viewportWorldHeight}unactived(){this.visible=!1}}In=new WeakMap,ui=new WeakMap,Ko=new WeakSet,nd=function(t=new M(0,0)){this.clear().lineStyle(nr);const r=this.size||1;this.drawEllipse(t.x,t.y,r/2,r/2)},ns=new WeakSet,hh=function(t,r,n){const s=this.size/t.scale.x,o=t.parent.parent.toGlobal(B(this,In)),a=t.toLocal(o);let h,l,u=!1;if(r&&n){const c=t.parent.parent.toGlobal(r);h=t.toLocal(c);const f=t.parent.parent.toGlobal(n);l=t.toLocal(f),u=!0}this.processController.erasing({isCurveTo:u,radius:s,beginPoint:a,controlPoint:h,endPoint:l})};class kk{constructor(i){x(this,"aberration");x(this,"name");x(this,"isPointerDown");x(this,"cursor");x(this,"onRecord");x(this,"processController");x(this,"start",()=>{this.isPointerDown=!0});x(this,"update",()=>{});x(this,"end",(i,t)=>{if(!this.isPointerDown||(this.isPointerDown=!1,this.aberration===0))return;const r=t.parent.parent.toGlobal(i);if(!t.containsPoint(r))return;const s=t.toLocal(r);this.processController.magicSelect(s,this.aberration),this.onRecord()});this.isPointerDown=!1,this.name=kr.MAGIC_WAND,this.cursor=kr.MAGIC_WAND,this.aberration=0,this.onRecord=i.onRecord,this.processController=i.processController}updateAttr(i){"aberration"in i&&(this.aberration=Number(i.aberration)||0)}}const Hk=[Uk,kk,Gk];var we,ie,Te,Li,ss,Cn,_n,$o,Jo,qo,jh,G_,os,lh,Kh,k_,$h,H_,Jh,X_,qh,Y_,as,uh,Zh,Zo,tl,el,V_,il,ta,sd,ea,od,rl,z_,nl,W_,sl,j_;class Xk{constructor(i){lt(this,jh);lt(this,os);lt(this,Kh);lt(this,$h);lt(this,Jh);lt(this,qh);lt(this,as);lt(this,el);lt(this,ta);lt(this,ea);lt(this,rl);lt(this,nl);lt(this,sl);lt(this,we,void 0);x(this,"container");x(this,"newDisplay");lt(this,ie,void 0);lt(this,Te,void 0);lt(this,Li,void 0);lt(this,ss,void 0);lt(this,Cn,void 0);x(this,"operationStack");x(this,"rect");lt(this,_n,void 0);x(this,"ratio");lt(this,$o,!1);x(this,"destroyed",!1);lt(this,Jo,void 0);lt(this,qo,void 0);lt(this,Zh,i=>{var t;Bn(i)&&(It(this,Cn,!0),(t=B(this,ie))==null||t.start(Gt(this,as,uh).call(this,i),this.newDisplay),this.newDisplay.texture.update())});lt(this,Zo,i=>{var t;B(this,Cn)&&(It(this,Cn,!1),(t=B(this,ie))==null||t.end(Gt(this,as,uh).call(this,i),this.newDisplay),this.newDisplay.texture.update())});lt(this,tl,i=>{var t;Bn(i)&&((t=B(this,ie))==null||t.update(Gt(this,as,uh).call(this,i),this.newDisplay),this.newDisplay.texture.update())});lt(this,il,()=>{if(this.locking)return;const i=B(this,Li).getImageData(0,0,B(this,Te).width,B(this,Te).height);this.asyncModeEnabled?(this.locking=!0,Gt(this,nl,W_).call(this,i).then(t=>{Gt(this,ta,sd).call(this,t)},console.warn).finally(()=>{this.locking=!1})):Gt(this,ta,sd).call(this,i)});It(this,Cn,!1),It(this,we,i),It(this,_n,new T_),this.operationStack=new S_,Gt(this,jh,G_).call(this),Gt(this,Kh,k_).call(this),Gt(this,$h,H_).call(this),B(this,we).addViewportChild(this.container),Gt(this,Jh,X_).call(this),Gt(this,qh,Y_).call(this,i.tool,i),Gt(this,el,V_).call(this),this.asyncModeEnabled&&(console.log("[ ImageProcess ] asyncMode",this.asyncModeEnabled),Gt(this,rl,z_).call(this,i.imageProcessConfig.asyncMode))}get locking(){return this.asyncModeEnabled?B(this,$o):!1}set locking(i){this.asyncModeEnabled&&It(this,$o,i)}get asyncModeEnabled(){var i,t,r;return((r=(t=(i=B(this,we))==null?void 0:i.imageProcessConfig)==null?void 0:t.asyncMode)==null?void 0:r.enabled)??!1}updateTool(i,t){var r;if(er(B(this,ie).cancel)&&B(this,ie).cancel(),this[`#${i}`]){const n=B(this,ie);(r=n.unactived)==null||r.call(n),It(this,ie,this[`#${i}`]),this.container.cursor=B(this,ie).cursor,B(this,ie).updateAttr&&t&&B(this,ie).updateAttr(t)}}cancel(){B(this,ie)&&er(B(this,ie).cancel)&&B(this,ie).cancel()}confirm(){B(this,ie)&&er(B(this,ie).confirm)&&B(this,ie).confirm()}destroyAll(){er(B(this,ie).cancel)&&B(this,ie).cancel(),this.container.children.forEach(i=>{i.destroy(!0)}),this.container.destroy(),this.container=null,this.newDisplay=null,It(this,Te,null),It(this,Li,null),It(this,ss,null),It(this,_n,null),this.destroyed=!0}setFinalDisplay(){const{width:i,height:t,data:r}=I_(B(this,Te));if(!r){this.newDisplay=null;return}const n=B(this,we).display;B(this,Te).width=i,B(this,Te).height=t,B(this,Li).putImageData(r,0,0),this.newDisplay.texture.update(),this.newDisplay.width*=this.ratio.x,this.newDisplay.height*=this.ratio.y,this.newDisplay.interactive=!0,this.newDisplay.lockRatio=!0,B(this,we).isBackground||(this.newDisplay.id=n.id),this.newDisplay.grayValue=Zs.GRAY_VALUE,this.newDisplay.sharpness=Zs.SHARPNESS,this.newDisplay.anchor.set(0,0),this.newDisplay.x=B(this,we).finalPosition.x,this.newDisplay.y=B(this,we).finalPosition.y,this.newDisplay.updateOriginDatasource(B(this,Te),B(this,Li)),this.newDisplay.layerColor=n.layerColor,this.newDisplay.layerTag=n.layerTag}getOriginalDisplay(){var i;return(i=B(this,we))==null?void 0:i.display}getResult(){var i;return this.setFinalDisplay(),B(this,we).isBackground||B(this,we).display.destroy(!0),(i=this.newDisplay)==null||i.emit(Le.DRAW_DONE,this.newDisplay),this.operationStack.clear(),this.newDisplay}get canUndo(){return this.operationStack.canUndo}get canRedo(){return this.operationStack.canRedo}undo(){this.locking||(this.operationStack.undo(),this.redraw())}redo(){this.locking||(this.operationStack.redo(),this.redraw())}redraw(){if(this.locking)return;const{curImageData:i}=this.operationStackTop;this.asyncModeEnabled?(this.locking=!0,Gt(this,sl,j_).call(this,i).then(t=>{Gt(this,ea,od).call(this,t)},console.warn).finally(()=>{this.locking=!1})):Gt(this,ea,od).call(this,i)}get operationStackTop(){return this.operationStack.top||B(this,ss)}}we=new WeakMap,ie=new WeakMap,Te=new WeakMap,Li=new WeakMap,ss=new WeakMap,Cn=new WeakMap,_n=new WeakMap,$o=new WeakMap,Jo=new WeakMap,qo=new WeakMap,jh=new WeakSet,G_=function(){const{viewportWorldWidth:i,viewportWorldHeight:t}=B(this,we),r=new $t;r.width=i,r.height=t,r.position.set(0,0),r.interactive=!0,r==null||r.on("pointerdown",Gt(this,os,lh).call(this,B(this,Zh))),r==null||r.on("pointermove",B(this,tl)),r==null||r.on("pointerup",Gt(this,os,lh).call(this,B(this,Zo))),r==null||r.on("pointerupoutside",Gt(this,os,lh).call(this,B(this,Zo))),this.container=r},os=new WeakSet,lh=function(i){return this.asyncModeEnabled?(...t)=>{if(!this.locking)return i(...t)}:i},Kh=new WeakSet,k_=function(){const{viewportWorldWidth:i,viewportWorldHeight:t,imageProcessConfig:r}=B(this,we),n=new Image;n.src=r.backdrop;const s=Ot.from(n),o=new PC(s,i,t);o.name="ALPHA_BG",o.interactive=!1,this.container.addChild(o)},$h=new WeakSet,H_=function(){const{newDisplay:i}=B(this,we);It(this,Te,i.texture.baseTexture.resource.source),It(this,Li,B(this,Te).getContext("2d")),B(this,_n).setOptions({canvas:B(this,Te),ctx:B(this,Li)}),this.newDisplay=i,this.container.addChild(this.newDisplay)},Jh=new WeakSet,X_=function(){const{viewportScale:i,viewportPosition:t,viewportWorldWidth:r,viewportWorldHeight:n,setDisplayPosition:s,finalPosition:o}=B(this,we),{width:a,height:h}=ca(this.newDisplay.width,this.newDisplay.height,r,n);this.newDisplay.width=a,this.newDisplay.height=h,this.ratio={x:o.width/a,y:o.height/h};const l=this.newDisplay.getBounds(),u=t.x+r*i.x/2,c=t.y+n*i.y/2,f=(l.x+l.width/2-u)/i.x,d=(l.y+l.height/2-c)/i.y,A=new M(this.newDisplay.x-f,this.newDisplay.y-d);s(this.newDisplay,A)},qh=new WeakSet,Y_=function(i=kr.MAGIC_WAND,t){Hk.forEach(r=>{const{viewportWorldWidth:n,viewportWorldHeight:s,viewportScale:o,selectDisplay:a,imageProcessConfig:h}=B(this,we),l=new r({viewportWorldWidth:n,viewportWorldHeight:s,viewportScale:o,onRecord:B(this,il),processController:B(this,_n),selectDisplay:a,imageProcessConfig:h}),u=l.name;this[`#${u}`]=l,this[`#${u}`].addToContainer&&this.container.addChild(this[`#${u}`]),i===u&&(It(this,ie,this[`#${u}`]),B(this,ie).updateAttr(t),this.container.cursor=B(this,ie).cursor)})},as=new WeakSet,uh=function(i){return i.data.getLocalPosition(this.container)},Zh=new WeakMap,Zo=new WeakMap,tl=new WeakMap,el=new WeakSet,V_=function(){const{width:i,height:t}=B(this,Te),{x:r,y:n}=this.newDisplay,s=B(this,Li).getImageData(0,0,i,t);It(this,ss,{curTool:B(this,ie).name,curImageData:s,curCanvasWidth:i,curCanvasHeight:t,curDisplayX:r,curDisplayY:n})},il=new WeakMap,ta=new WeakSet,sd=function(i){if(this.destroyed)return;const t={curTool:B(this,ie).name,curCanvasWidth:B(this,Te).width,curCanvasHeight:B(this,Te).height,curDisplayX:this.newDisplay.x,curDisplayY:this.newDisplay.y,curImageData:i};this.operationStack.push(t)},ea=new WeakSet,od=function(i){if(this.destroyed)return;if(!(i instanceof ImageData))throw TypeError("imageData not valid");const{curCanvasWidth:t,curCanvasHeight:r,curDisplayX:n,curDisplayY:s}=this.operationStackTop;B(this,Te).width=t,B(this,Te).height=r,B(this,Li).putImageData(i,0,0),this.newDisplay.x=n,this.newDisplay.y=s,this.newDisplay.texture.update()},rl=new WeakSet,z_=function(i){if(typeof i.saveImageData!="function"||typeof i.loadImageData!="function")throw TypeError("saveImageData and loadImageData must be a function");It(this,Jo,i.saveImageData),It(this,qo,i.loadImageData)},nl=new WeakSet,W_=async function(i){try{const t=await B(this,Jo).call(this,i);return t===void 0&&console.error("saveImageDataFn must return a not empty value"),t??i}catch(t){return console.error(t),i}},sl=new WeakSet,j_=async function(i){if(i instanceof ImageData)return i;try{const t=await B(this,qo).call(this,i);return t===void 0&&console.error("loadImageDataFn must return a not empty value"),t??i}catch(t){return console.error(t),i}};const wy={minX:NaN,minY:NaN,maxX:NaN,maxY:NaN};class Yk extends Kt{constructor(t){super();x(this,"ruler");x(this,"params",wy);this.ruler=t}draw(){this.clear();const{positions:t,markColor:r,markAlpha:n}=this.ruler.options;this.beginFill(r,n),t.forEach(s=>{const{x:o,y:a,w:h,h:l}=this.getDrawOptions(s);this.drawRect(o,a,h,l)}),this.endFill()}update(t){this.params=t,this.draw()}getDrawOptions(t){const{stageWidth:r,stageHeight:n,stageScale:s,offset:o,size:a}=this.ruler,{minX:h,maxX:l,minY:u,maxY:c}=this.params;return{[Ve.TOP]:{x:h*s+o.x,y:0,w:(l-h)*s,h:a},[Ve.BOTTOM]:{x:h*s+o.x,y:n-a,w:(l-h)*s,h:a},[Ve.LEFT]:{x:0,y:u*s+o.y,w:a,h:(c-u)*s},[Ve.RIGHT]:{x:r-a,y:u*s+o.y,w:a,h:(c-u)*s}}[t]}clean(){this.clear(),this.params=wy}}var xn,Se,ol,K_,al,$_,hl,J_,ll,q_,ul,Z_,cl,tx,fl,ex;class Vk extends Kt{constructor(t,r){super();lt(this,ol);lt(this,al);lt(this,hl);lt(this,ll);lt(this,ul);lt(this,cl);lt(this,fl);x(this,"size",20);lt(this,xn,1);lt(this,Se,void 0);x(this,"stageWidth");x(this,"stageHeight");x(this,"stageScale",1);x(this,"offset",{x:0,y:0});x(this,"scales");x(this,"mark");this.stageWidth=t.width,this.stageHeight=t.height,It(this,Se,Object.assign({},SD,r)),this.scales=new Kt,this.mark=new Yk(this),this.addChild(this.scales,this.mark),It(this,xn,window.devicePixelRatio)}get sparsity(){const t=this.stageWidth,r=this.stageScale,n=B(this,Se).pixelPerUnit,s=t/r/n;return s<=20?1:s<=200?10:s<=2e3?100:s<=1e4?500:1e4}get options(){return B(this,Se)}zoom(t,r,n){this.stageScale=t,this.offset.x=r,this.offset.y=n,this.draw()}resize(t,r){this.stageWidth=t,this.stageHeight=r,this.draw()}highlight(t){this.mark.update(t)}unHighlight(){this.mark.clean()}updateOptions(t){It(this,Se,Object.assign({},B(this,Se),t)),this.draw()}draw(){this.clearScale(),B(this,Se).positions.forEach(t=>{const{canvasOption:{w:r,h:n},position:{x:s,y:o},offset:a,scaleTopWard:h,reverse:l}=Gt(this,ul,Z_).call(this,t),u=Gt(this,cl,tx).call(this,r,n,a,h,l),c=new Ke(Ot.from(u));this.scales.addChild(c),u.remove(),c.x=s,c.y=o,c.scale.x=1/B(this,xn),c.scale.y=1/B(this,xn),l&&(c.angle=-90)}),this.mark.draw()}getRGBAFromHex(t,r){const n=t>>16&255,s=t>>8&255,o=t&255;return`rgba(${n},${s},${o},${r})`}clearScale(){this.scales.removeChildren().forEach(r=>{r.destroy(!0)})}}xn=new WeakMap,Se=new WeakMap,ol=new WeakSet,K_=function(t){return t==="-0"?"0":t},al=new WeakSet,$_=function(t){const r=String(t).indexOf("."),n=String(t).length;return r<0?0:n-r-1},hl=new WeakSet,J_=function(t,r){const n=document.createElement("canvas"),s=n.getContext("2d");return n.width=t,n.height=r,s.fillStyle=this.getRGBAFromHex(B(this,Se).backgroundColor,1),s.fillRect(0,0,t,r),{canvas:n,ctx:s}},ll=new WeakSet,q_=function(t,r,n,s){t.lineWidth=1,t.strokeStyle=this.getRGBAFromHex(B(this,Se).borderColor,B(this,Se).borderAlpha),t.beginPath(),s?(t.moveTo(0,0),t.lineTo(r,0)):(t.moveTo(0,n),t.lineTo(r,n)),t.closePath(),t.stroke()},ul=new WeakSet,Z_=function(t){const{stageWidth:r,stageHeight:n,size:s,offset:o}=this;return{[Ve.TOP]:{canvasOption:{w:r,h:s},position:{x:0,y:0},offset:-o.x,scaleTopWard:!1,reverse:!1},[Ve.BOTTOM]:{canvasOption:{w:r,h:s},position:{x:0,y:n-s},offset:-o.x,scaleTopWard:!0,reverse:!1},[Ve.LEFT]:{canvasOption:{w:n,h:s},position:{x:0,y:n},offset:-o.y,scaleTopWard:!1,reverse:!0},[Ve.RIGHT]:{canvasOption:{w:n,h:s},position:{x:r-s,y:n},offset:-o.y,scaleTopWard:!0,reverse:!0}}[t]},cl=new WeakSet,tx=function(t,r,n,s,o){const a=B(this,Se).pixelPerUnit,h=B(this,xn),{stageScale:l,sparsity:u}=this;t=t*h,r=r*h,n=n*h;const{canvas:c,ctx:f}=Gt(this,hl,J_).call(this,t,r);Gt(this,ll,q_).call(this,f,t,r,s);const d=a*l*u*h,A=d/10,p=Gt(this,al,$_).call(this,u);let g=n%A>0?A-n%A:-n%A;f.lineWidth=1*h,f.strokeStyle=this.getRGBAFromHex(B(this,Se).scaleColor,B(this,Se).scaleAlpha),f.font=`normal ${B(this,Se).fontSize*h}px v-sans, system-ui, -apple-system, BlinkMacSystemFont, sans-serif`,f.fillStyle=this.getRGBAFromHex(B(this,Se).fontColor,1);do{const y=(n+g)/d*u,I=o?t-g:g;Gt(this,fl,ex).call(this,y/u)?(f.moveTo(I,r),f.lineTo(I,0),f.fillText(Gt(this,ol,K_).call(this,y.toFixed(p)),I+4.5,r*(s?.65:.5))):(f.moveTo(I,s?0:r*.75),f.lineTo(I,s?r*.25:r)),g+=A}while(g<t);return f.closePath(),f.stroke(),c},fl=new WeakSet,ex=function(t){return Math.abs(t-Math.round(t))<1e-7};class zk extends Kt{constructor(t=BD){super();x(this,"config");this.config=t,this.visible=!1,this.name="SELECTOR"}start(t){this.visible=!0,this.scale.set(.01,.01),this.clear(),this.beginFill(this.config.fillColor,this.config.fillAlpha).drawRect(0,0,1,1).endFill(),this.position.set(t.x,t.y)}update(t){if(this.visible){const{x:r,y:n}=this.position,{x:s,y:o}=t;this.scale.set(s-r,o-n)}}end(t,r){if(this.visible){const{width:s,height:o}=this.getBounds();Math.abs(s)>5&&Math.abs(o)>5&&this.emit(ZI.SELECT_VIEWPORT_ELEMENTS,new M(this.position.x,this.position.y),t,r)}this.done()}done(){this.visible=!1,this.scale.set(.01,.01)}}class Wk extends $t{constructor(){super()}}class jk extends ri{constructor(t,r){const n=Object.assign(DD,r);super(n);x(this,"viewport");x(this,"enableEmit",!0);x(this,"elementMinWidth");x(this,"isPointDown");x(this,"pointerId");this.elementMinWidth=n.elementMinWidth,this.viewport=t,this.initEvent()}scaleGroup(t,r){var n;super.scaleGroup(t,r,this.elementMinWidth,((n=this.viewport)==null?void 0:n.scale.x)||1)}clear(){this.selected.length>0&&(this.selected=[])}initEvent(){this.on(Ye.TRANSFORM_CHANGE,()=>{this.update()}),this.on(Ye.TRANSFORM_COMMIT,()=>{this.commit(),this.onUpdateState({lockRatio:this.groupJSON.lockRatio})})}translateSelected(t){const{deltaX:r=0,deltaY:n=0}=t;this.selected.forEach(s=>{s.x+=r,s.y+=n}),this.emit(Ye.TRANSFORM_CHANGE)}flipSelected(t){const{flipX:r=!1,flipY:n=!1}=t,s=r?-1:1,o=n?-1:1,a=kt.IDENTITY,l=ri.calculateGroupOrientedBounds(this.selected,0).center;a.translate(-l.x,-l.y).scale(s,o).translate(l.x,l.y),this.updateSelectedTransform(a)}rotateSelected(t){if(Fe(t)){const r=this.groupBounds,n=kt.IDENTITY,s=r.center;n.translate(-s.x,-s.y).rotate(t*yi-r.rotation).translate(s.x,s.y),this.updateSelectedTransform(n),this.groupBounds.rotation=t*yi}}updateSelectedTransform(t){this.selected.forEach(r=>{qC(r,t)}),this.emit(Ye.TRANSFORM_CHANGE)}updateGroupSize(t,r,n=this.lockAspectRatio){if(Fe(t)||Fe(r)){this.groupBounds.rotation!==0&&this.updateGroupBounds(0);const{minX:s,maxX:o,minY:a,maxY:h}=this.worldGroupBounds,l=o-s,u=h-a,c=u/l;let f=Fe(t)?t:l,d=Fe(r)?r:u;n&&(t&&(d=f*c),r&&(f=d/c));const A=f-l,p=d-u,g=new M(o+A,h+p),y=this.viewport.toGlobal(g);this.scaleGroup("bottomRight",y)}}updateGroupPosition(t,r){if(Fe(t)||Fe(r)){const{minX:n,minY:s}=this.worldGroupBounds;t=Fe(t)?t:n,r=Fe(r)?r:s;const o=this.viewport.toGlobal(new M(n,s)),a=this.viewport.toGlobal(new M(t,r)),h=new M(a.x-o.x,a.y-o.y);this.translateGroup(h)}}set selectedIDs(t){const n=this.viewport.getInteractiveElements().filter(s=>t.includes(s.id));this.selected=n}get selectedIDs(){return this.selected.map(t=>t.id)}get selected(){return this.group}set selected(t){Array.isArray(t)&&(this.setSelection(t),this.updateLockRatio(),this.emit(Ye.SELECT)),this.onUpdateState({lockRatio:this.groupJSON.lockRatio})}updateLockRatio(){const r=this.selected.some(n=>n.lockRatio);this.lockAspectRatio=r}changeMode(t){super.changeMode(t),this.onUpdateState({lockRatio:this.groupJSON.lockRatio})}update(){this.group.forEach(r=>{r.transformUpdate&&r.transformUpdate()}),this.updateLockRatio(),this.onUpdateState({lockRatio:this.groupJSON.lockRatio})}commit(){this.group.forEach(r=>{r.transformCommit&&r.transformCommit()})}get worldGroupBounds(){const t=ri.calculateGroupOrientedBounds(this.group,0),r=new _i,n=this.viewport.toLocal(t.topLeft),s=this.viewport.toLocal(t.bottomRight);return r.minX=n.x,r.minY=n.y,r.maxX=s.x,r.maxY=s.y,r}get worldGroupBoundsCenter(){const t=this.worldGroupBounds.getRectangle(),r=t.x+t.width/2,n=t.y+t.height/2;return new M(r,n)}get groupJSON(){const{x:t,y:r,width:n,height:s}=this.worldGroupBounds.getRectangle(),o=this.groupBounds.rotation*El,a="GROUP",h=ua();return{x:t,y:r,width:n,height:s,id:h,type:a,angle:o,lockRatio:this.lockAspectRatio}}removeSelected(){const t=this.selected;t==null||t.forEach(r=>{Ql(r)}),this.clear()}get unSelected(){const t=this.viewport.getInteractiveElements()||[],r=this.selected,n=[];return Array.isArray(t)&&t.length>0&&(t==null||t.forEach(s=>{r.includes(s)||n.push(s)})),n}onPointerMove(t){Bn(t)&&this.pointerId===no(t)&&super.onPointerMove(t)}onPointerDown(t){Bn(t)&&(this.pointerId=no(t),super.onPointerDown(t))}onPointerUp(t){id(t).includes(this.pointerId)&&super.onPointerUp(t)}}class bi{constructor(i){this.parent=i,this.paused=!1}destroy(){}down(i){return!1}move(i){return!1}up(i){return!1}wheel(i){return!1}update(i){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}var Kk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $k(e,i,t){return t={path:i,exports:{},require:function(r,n){return Jk(r,n??t.path)}},e(t,t.exports),t.exports}function Jk(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Ty=$k(function(e,i){(function(){var t,r;r=function(n){return e.exports=n},t={linear:function(n,s,o,a){return o*n/a+s},easeInQuad:function(n,s,o,a){return o*(n/=a)*n+s},easeOutQuad:function(n,s,o,a){return-o*(n/=a)*(n-2)+s},easeInOutQuad:function(n,s,o,a){return(n/=a/2)<1?o/2*n*n+s:-o/2*(--n*(n-2)-1)+s},easeInCubic:function(n,s,o,a){return o*(n/=a)*n*n+s},easeOutCubic:function(n,s,o,a){return o*((n=n/a-1)*n*n+1)+s},easeInOutCubic:function(n,s,o,a){return(n/=a/2)<1?o/2*n*n*n+s:o/2*((n-=2)*n*n+2)+s},easeInQuart:function(n,s,o,a){return o*(n/=a)*n*n*n+s},easeOutQuart:function(n,s,o,a){return-o*((n=n/a-1)*n*n*n-1)+s},easeInOutQuart:function(n,s,o,a){return(n/=a/2)<1?o/2*n*n*n*n+s:-o/2*((n-=2)*n*n*n-2)+s},easeInQuint:function(n,s,o,a){return o*(n/=a)*n*n*n*n+s},easeOutQuint:function(n,s,o,a){return o*((n=n/a-1)*n*n*n*n+1)+s},easeInOutQuint:function(n,s,o,a){return(n/=a/2)<1?o/2*n*n*n*n*n+s:o/2*((n-=2)*n*n*n*n+2)+s},easeInSine:function(n,s,o,a){return-o*Math.cos(n/a*(Math.PI/2))+o+s},easeOutSine:function(n,s,o,a){return o*Math.sin(n/a*(Math.PI/2))+s},easeInOutSine:function(n,s,o,a){return-o/2*(Math.cos(Math.PI*n/a)-1)+s},easeInExpo:function(n,s,o,a){return n===0?s:o*Math.pow(2,10*(n/a-1))+s},easeOutExpo:function(n,s,o,a){return n===a?s+o:o*(-Math.pow(2,-10*n/a)+1)+s},easeInOutExpo:function(n,s,o,a){return(n/=a/2)<1?o/2*Math.pow(2,10*(n-1))+s:o/2*(-Math.pow(2,-10*--n)+2)+s},easeInCirc:function(n,s,o,a){return-o*(Math.sqrt(1-(n/=a)*n)-1)+s},easeOutCirc:function(n,s,o,a){return o*Math.sqrt(1-(n=n/a-1)*n)+s},easeInOutCirc:function(n,s,o,a){return(n/=a/2)<1?-o/2*(Math.sqrt(1-n*n)-1)+s:o/2*(Math.sqrt(1-(n-=2)*n)+1)+s},easeInElastic:function(n,s,o,a){var h,l,u;return u=1.70158,l=0,h=o,n===0||(n/=a),l||(l=a*.3),h<Math.abs(o)?(h=o,u=l/4):u=l/(2*Math.PI)*Math.asin(o/h),-(h*Math.pow(2,10*(n-=1))*Math.sin((n*a-u)*(2*Math.PI)/l))+s},easeOutElastic:function(n,s,o,a){var h,l,u;return u=1.70158,l=0,h=o,n===0||(n/=a),l||(l=a*.3),h<Math.abs(o)?(h=o,u=l/4):u=l/(2*Math.PI)*Math.asin(o/h),h*Math.pow(2,-10*n)*Math.sin((n*a-u)*(2*Math.PI)/l)+o+s},easeInOutElastic:function(n,s,o,a){var h,l,u;return u=1.70158,l=0,h=o,n===0||(n/=a/2),l||(l=a*(.3*1.5)),h<Math.abs(o)?(h=o,u=l/4):u=l/(2*Math.PI)*Math.asin(o/h),n<1?-.5*(h*Math.pow(2,10*(n-=1))*Math.sin((n*a-u)*(2*Math.PI)/l))+s:h*Math.pow(2,-10*(n-=1))*Math.sin((n*a-u)*(2*Math.PI)/l)*.5+o+s},easeInBack:function(n,s,o,a,h){return h===void 0&&(h=1.70158),o*(n/=a)*n*((h+1)*n-h)+s},easeOutBack:function(n,s,o,a,h){return h===void 0&&(h=1.70158),o*((n=n/a-1)*n*((h+1)*n+h)+1)+s},easeInOutBack:function(n,s,o,a,h){return h===void 0&&(h=1.70158),(n/=a/2)<1?o/2*(n*n*(((h*=1.525)+1)*n-h))+s:o/2*((n-=2)*n*(((h*=1.525)+1)*n+h)+2)+s},easeInBounce:function(n,s,o,a){var h;return h=t.easeOutBounce(a-n,0,o,a),o-h+s},easeOutBounce:function(n,s,o,a){return(n/=a)<1/2.75?o*(7.5625*n*n)+s:n<2/2.75?o*(7.5625*(n-=1.5/2.75)*n+.75)+s:n<2.5/2.75?o*(7.5625*(n-=2.25/2.75)*n+.9375)+s:o*(7.5625*(n-=2.625/2.75)*n+.984375)+s},easeInOutBounce:function(n,s,o,a){var h;return n<a/2?(h=t.easeInBounce(n*2,0,o,a),h*.5+s):(h=t.easeOutBounce(n*2-a,0,o,a),h*.5+o*.5+s)}},r(t)}).call(Kk)});function Hl(e,i){if(e){if(typeof e=="function")return e;if(typeof e=="string")return Ty[e]}else return Ty[i]}const qk={removeOnInterrupt:!1,ease:"linear",time:1e3};class dr extends bi{__init(){this.startWidth=null}__init2(){this.startHeight=null}__init3(){this.deltaWidth=null}__init4(){this.deltaHeight=null}__init5(){this.width=null}__init6(){this.height=null}__init7(){this.time=0}constructor(i,t={}){super(i),dr.prototype.__init.call(this),dr.prototype.__init2.call(this),dr.prototype.__init3.call(this),dr.prototype.__init4.call(this),dr.prototype.__init5.call(this),dr.prototype.__init6.call(this),dr.prototype.__init7.call(this),this.options=Object.assign({},qk,t),this.options.ease=Hl(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),this.keepCenter||this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(i){if(this.paused)return;this.time+=i;const t=new M(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const r=this.parent.width,n=this.parent.height;this.complete(),(r!==this.parent.width||n!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:t,type:"animate"})}else{const r=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null){const n=this.startWidth,s=this.deltaWidth;this.parent.fitWidth(n+s*r,this.keepCenter,this.height===null)}if(this.height!==null){const n=this.startHeight,s=this.deltaHeight;this.parent.fitHeight(n+s*r,this.keepCenter,this.width===null)}if(this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const n=this.startX,s=this.startY,o=this.deltaX,a=this.deltaY,h=new M(this.parent.x,this.parent.y);this.parent.moveCenter(n+o*r,s+a*r),this.parent.emit("moved",{viewport:this.parent,original:h,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:t,type:"animate"})}}}function qa(e){let i,t=e[0],r=1;for(;r<e.length;){const n=e[r],s=e[r+1];if(r+=2,(n==="optionalAccess"||n==="optionalCall")&&t==null)return;n==="access"||n==="optionalAccess"?(i=t,t=s(t)):(n==="call"||n==="optionalCall")&&(t=s((...o)=>t.call(i,...o)),i=void 0)}return t}const Zk={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class tH extends bi{constructor(i,t={}){super(i),this.options=Object.assign({},Zk,t),this.ease=Hl(this.options.ease,"easeInOutSine"),this.options.sides?this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?(this.right=this.left=!0,this.top=this.bottom=!1):this.options.sides==="vertical"?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1):this.left=this.top=this.right=this.bottom=!1;const r=this.options.underflow.toLowerCase();r==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=r.indexOf("left")!==-1?-1:r.indexOf("right")!==-1?1:0,this.underflowY=r.indexOf("top")!==-1?-1:r.indexOf("bottom")!==-1?1:0),this.reset()}isActive(){return this.toX!==null||this.toY!==null}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(i){if(!this.paused){if(this.bounce(),this.toX){const t=this.toX;t.time+=i,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),t.time>=this.options.time?(this.parent.x=t.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(t.time,t.start,t.delta,this.options.time)}if(this.toY){const t=this.toY;t.time+=i,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),t.time>=this.options.time?(this.parent.y=t.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(t.time,t.start,t.delta,this.options.time)}}}calcUnderflowX(){let i;switch(this.underflowX){case-1:i=0;break;case 1:i=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:i=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return i}calcUnderflowY(){let i;switch(this.underflowY){case-1:i=0;break;case 1:i=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:i=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return i}oob(){const i=this.options.bounceBox;if(i){const t=typeof i.x>"u"?0:i.x,r=typeof i.y>"u"?0:i.y,n=typeof i.width>"u"?this.parent.worldWidth:i.width,s=typeof i.height>"u"?this.parent.worldHeight:i.height;return{left:this.parent.left<t,right:this.parent.right>n,top:this.parent.top<r,bottom:this.parent.bottom>s,topLeft:new M(t*this.parent.scale.x,r*this.parent.scale.y),bottomRight:new M(n*this.parent.scale.x-this.parent.screenWidth,s*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new M(0,0),bottomRight:new M(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){if(this.paused)return;let i,t=this.parent.plugins.get("decelerate",!0);t&&(t.x||t.y)&&(t.x&&t.percentChangeX===qa([t,"access",s=>s.options,"optionalAccess",s=>s.friction])||t.y&&t.percentChangeY===qa([t,"access",s=>s.options,"optionalAccess",s=>s.friction]))&&(i=this.oob(),(i.left&&this.left||i.right&&this.right)&&(t.percentChangeX=this.options.friction),(i.top&&this.top||i.bottom&&this.bottom)&&(t.percentChangeY=this.options.friction));const r=this.parent.plugins.get("drag",!0)||{},n=this.parent.plugins.get("pinch",!0)||{};if(t=t||{},!qa([r,"optionalAccess",s=>s.active])&&!qa([n,"optionalAccess",s=>s.active])&&(!this.toX||!this.toY)&&(!t.x||!t.y)){i=i||this.oob();const s=i.topLeft,o=i.bottomRight;if(!this.toX&&!t.x){let a=null;i.left&&this.left?a=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-s.x:i.right&&this.right&&(a=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-o.x),a!==null&&this.parent.x!==a&&(this.toX={time:0,start:this.parent.x,delta:a-this.parent.x,end:a},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!t.y){let a=null;i.top&&this.top?a=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-s.y:i.bottom&&this.bottom&&(a=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-o.y),a!==null&&this.parent.y!==a&&(this.toY={time:0,start:this.parent.y,delta:a-this.parent.y,end:a},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const eH={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class iH extends bi{constructor(i,t={}){super(i),this.options=Object.assign({},eH,t),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const i=this.options.underflow.toLowerCase();i==="none"?this.noUnderflow=!0:i==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=i.indexOf("left")!==-1?-1:i.indexOf("right")!==-1?1:0,this.underflowY=i.indexOf("top")!==-1?-1:i.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const i={x:this.parent.x,y:this.parent.y},t=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,r=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,r=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,r=!0)}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,t.x=0,r=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,t.x=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:i,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,r=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,r=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,r=!0)}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,t.y=0,r=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,t.y=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:i,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const rH={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class nH extends bi{constructor(i,t={}){super(i),this.options=Object.assign({},rH,t),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused){if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let i=this.parent.worldScreenWidth,t=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&i<this.options.minWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,i=this.parent.worldScreenWidth,t=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&i>this.options.maxWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,i=this.parent.worldScreenWidth,t=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&t<this.options.minHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,i=this.parent.worldScreenWidth,t=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&t>this.options.maxHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const i={x:null,y:null},t={x:null,y:null};if(typeof this.options.minScale=="number")i.x=this.options.minScale,i.y=this.options.minScale;else if(this.options.minScale!==null){const s=this.options.minScale;i.x=typeof s.x>"u"?null:s.x,i.y=typeof s.y>"u"?null:s.y}if(typeof this.options.maxScale=="number")t.x=this.options.maxScale,t.y=this.options.maxScale;else if(this.options.maxScale!==null){const s=this.options.maxScale;t.x=typeof s.x>"u"?null:s.x,t.y=typeof s.y>"u"?null:s.y}let r=this.parent.scale.x,n=this.parent.scale.y;i.x!==null&&r<i.x&&(r=i.x),t.x!==null&&r>t.x&&(r=t.x),i.y!==null&&n<i.y&&(n=i.y),t.y!==null&&n>t.y&&(n=t.y),(r!==this.parent.scale.x||n!==this.parent.scale.y)&&(this.parent.scale.set(r,n),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}reset(){this.clamp()}}const sH={friction:.98,bounce:.8,minSpeed:.01},Br=16;class oH extends bi{constructor(i,t={}){super(i),this.options=Object.assign({},sH,t),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",r=>this.moved(r))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!!(this.x||this.y)}move(){if(this.paused)return!1;const i=this.parent.input.count();return(i===1||i>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}moved(i){if(this.saved.length){const t=this.saved[this.saved.length-1];i.type==="clamp-x"?t.x===i.original.x&&(t.x=this.parent.x):i.type==="clamp-y"&&t.y===i.original.y&&(t.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){const i=performance.now();for(const t of this.saved)if(t.time>=i-100){const r=i-t.time;this.x=(this.parent.x-t.x)/r,this.y=(this.parent.y-t.y)/r,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(i){i=i||{},typeof i.x<"u"&&(this.x=i.x,this.percentChangeX=this.options.friction),typeof i.y<"u"&&(this.y=i.y,this.percentChangeY=this.options.friction)}update(i){if(this.paused)return;const t=this.x||this.y,r=this.timeSinceRelease,n=this.timeSinceRelease+i;if(this.x){const s=this.percentChangeX,o=Math.log(s);this.parent.x+=this.x*Br/o*(Math.pow(s,n/Br)-Math.pow(s,r/Br)),this.x*=Math.pow(this.percentChangeX,i/Br)}if(this.y){const s=this.percentChangeY,o=Math.log(s);this.parent.y+=this.y*Br/o*(Math.pow(s,n/Br)-Math.pow(s,r/Br)),this.y*=Math.pow(this.percentChangeY,i/Br)}this.timeSinceRelease+=i,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),t&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const aH={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class ix extends bi{constructor(i,t={}){super(i),this.options=Object.assign({},aH,t),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(i){window.addEventListener("keydown",t=>{i.includes(t.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",t=>{i.includes(t.code)&&(this.keyIsPressed=!1)})}mouseButtons(i){!i||i==="all"?this.mouse=[!0,!0,!0]:this.mouse=[i.indexOf("left")!==-1,i.indexOf("middle")!==-1,i.indexOf("right")!==-1]}parseUnderflow(){const i=this.options.underflow.toLowerCase();i==="center"?(this.underflowX=0,this.underflowY=0):(i.includes("left")?this.underflowX=-1:i.includes("right")?this.underflowX=1:this.underflowX=0,i.includes("top")?this.underflowY=-1:i.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(i){const t=i.data.pointerType==="mouse",r=this.parent.input.count();return!!((r===1||r>1&&!this.parent.plugins.get("pinch",!0))&&(!t||this.mouse[i.data.button]))}checkKeyPress(i){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&i.data.pointerType==="touch"}down(i){return this.paused||!this.options.pressDrag?!1:this.checkButtons(i)&&this.checkKeyPress(i)?(this.last={x:i.data.global.x,y:i.data.global.y},this.current=i.data.pointerId,!0):(this.last=null,!1)}get active(){return this.moved}move(i){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===i.data.pointerId){const t=i.data.global.x,r=i.data.global.y,n=this.parent.input.count();if(n===1||n>1&&!this.parent.plugins.get("pinch",!0)){const s=t-this.last.x,o=r-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(s)||this.yDirection&&this.parent.input.checkThreshold(o)){const a={x:t,y:r};return this.xDirection&&(this.parent.x+=(a.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(a.y-this.last.y)*this.options.factor),this.last=a,this.moved||this.parent.emit("drag-start",{event:i,screen:new M(this.last.x,this.last.y),world:this.parent.toWorld(new M(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}return!1}up(i){if(this.paused)return!1;const t=this.parent.input.touches;if(t.length===1){const r=t[0];return r.last&&(this.last={x:r.last.x,y:r.last.y},this.current=r.id),this.moved=!1,!0}else if(this.last&&this.moved){const r=new M(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:i,screen:r,world:this.parent.toWorld(r),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(i){if(this.paused)return!1;if(this.options.wheel){const t=this.parent.plugins.get("wheel",!0);if(!t||!t.options.wheelZoom&&!i.ctrlKey){const r=i.deltaMode?this.options.lineHeight:1,n=[i.deltaX,i.deltaY],[s,o]=this.options.wheelSwapAxes?n.reverse():n;return this.xDirection&&(this.parent.x+=s*r*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=o*r*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||i.preventDefault(),this.parent.options.stopPropagation&&i.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const i=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,i.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,i.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,i.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,i.y=0)}}const hH={speed:0,acceleration:null,radius:null};class lH extends bi{constructor(i,t,r={}){super(i),this.target=t,this.options=Object.assign({},hH,r),this.velocity={x:0,y:0}}update(i){if(this.paused)return;const t=this.parent.center;let r=this.target.x,n=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-t.y,2)+Math.pow(this.target.x-t.x,2))>this.options.radius){const h=Math.atan2(this.target.y-t.y,this.target.x-t.x);r=this.target.x-Math.cos(h)*this.options.radius,n=this.target.y-Math.sin(h)*this.options.radius}else return;const s=r-t.x,o=n-t.y;if(s||o)if(this.options.speed)if(this.options.acceleration){const a=Math.atan2(n-t.y,r-t.x),h=Math.sqrt(Math.pow(s,2)+Math.pow(o,2));if(h){const l=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);h>l?this.velocity={x:Math.min(this.velocity.x+this.options.acceleration*i,this.options.speed),y:Math.min(this.velocity.y+this.options.acceleration*i,this.options.speed)}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const u=Math.cos(a)*this.velocity.x,c=Math.sin(a)*this.velocity.y,f=Math.abs(u)>Math.abs(s)?r:t.x+u,d=Math.abs(c)>Math.abs(o)?n:t.y+c;this.parent.moveCenter(f,d),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const a=Math.atan2(n-t.y,r-t.x),h=Math.cos(a)*this.options.speed,l=Math.sin(a)*this.options.speed,u=Math.abs(h)>Math.abs(s)?r:t.x+h,c=Math.abs(l)>Math.abs(o)?n:t.y+l;this.parent.moveCenter(u,c),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(r,n),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const uH={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class cH extends bi{constructor(i,t={}){super(i),this.options=Object.assign({},uH,t),this.reverse=this.options.reverse?1:-1,this.radiusSquared=typeof this.options.radius=="number"?Math.pow(this.options.radius,2):null,this.resize()}resize(){const i=this.options.distance;i!==null?(this.left=i,this.top=i,this.right=this.parent.screenWidth-i,this.bottom=this.parent.screenHeight-i):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.screenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(i){if(this.paused||i.data.pointerType!=="mouse"&&i.data.identifier!==1||!this.options.allowButtons&&i.data.buttons!==0)return!1;const t=i.data.global.x,r=i.data.global.y;if(this.radiusSquared){const n=this.parent.toScreen(this.parent.center);if(Math.pow(n.x-t,2)+Math.pow(n.y-r,2)>=this.radiusSquared){const o=Math.atan2(n.y-r,n.x-t);this.options.linear?(this.horizontal=Math.round(Math.cos(o))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(o))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(o)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(o)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&t<this.left?this.horizontal=Number(this.reverse)*this.options.speed*(60/1e3):this.right!==null&&t>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&r<this.top?this.vertical=Number(this.reverse)*this.options.speed*(60/1e3):this.bottom!==null&&r>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const i=this.parent.plugins.get("decelerate",!0);this.horizontal&&i&&!this.options.noDecelerate&&i.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const i=this.parent.plugins.get("decelerate",!0);this.vertical&&i&&!this.options.noDecelerate&&i.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const i=this.parent.center;this.horizontal&&(i.x+=this.horizontal*this.options.speed),this.vertical&&(i.y+=this.vertical*this.options.speed),this.parent.moveCenter(i),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const fH={noDrag:!1,percent:1,center:null,factor:1,axis:"all"};class oo extends bi{__init(){this.active=!1}__init2(){this.pinching=!1}__init3(){this.moved=!1}constructor(i,t={}){super(i),oo.prototype.__init.call(this),oo.prototype.__init2.call(this),oo.prototype.__init3.call(this),this.options=Object.assign({},fH,t)}down(){return this.parent.input.count()>=2?(this.active=!0,!0):!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(i){if(this.paused||!this.active)return!1;const t=i.data.global.x,r=i.data.global.y,n=this.parent.input.touches;if(n.length>=2){const s=n[0],o=n[1],a=s.last&&o.last?Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2)):null;if(s.id===i.data.pointerId?s.last={x:t,y:r,data:i.data}:o.id===i.data.pointerId&&(o.last={x:t,y:r,data:i.data}),a){let h;const l={x:s.last.x+(o.last.x-s.last.x)/2,y:s.last.y+(o.last.y-s.last.y)/2};this.options.center||(h=this.parent.toLocal(l));let u=Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2));u=u===0?u=1e-10:u;const c=(1-a/u)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=c),this.isAxisY()&&(this.parent.scale.y+=c),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:l});const f=this.parent.plugins.get("clamp-zoom",!0);if(f&&f.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const d=this.parent.toGlobal(h);this.parent.x+=(l.x-d.x)*this.options.factor,this.parent.y+=(l.y-d.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(l.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(l.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=l,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return this.pinching&&this.parent.input.touches.length<=1?(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0):!1}}const dH={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class AH extends bi{constructor(i,t,r,n={}){super(i),this.options=Object.assign({},dH,n),this.ease=Hl(n.ease,"easeInOutSine"),this.x=t,this.y=r,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const i=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-i.x,this.deltaY=this.y-i.y,this.startX=i.x,this.startY=i.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(this.parent.input.count()===0){const i=this.parent.plugins.get("decelerate",!0);i&&(i.x||i.y)&&(i.percentChangeX=i.percentChangeY=this.options.friction)}return!1}update(i){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){const t=this.snapping;t.time+=i;let r,n,s;const o=this.startX,a=this.startY,h=this.deltaX,l=this.deltaY;if(t.time>this.options.time)r=!0,n=o+h,s=a+l;else{const u=this.ease(t.time,0,1,this.options.time);n=o+h*u,s=a+l*u}this.options.topLeft?this.parent.moveCorner(n,s):this.parent.moveCenter(n,s),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),r&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const t=this.options.topLeft?this.parent.corner:this.parent.center;(t.x!==this.x||t.y!==this.y)&&this.snapStart()}}}const pH={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class gH extends bi{constructor(i,t={}){super(i),this.options=Object.assign({},pH,t),this.ease=Hl(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=i.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=i.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(i.container.scale.x=this.xScale,i.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):t.forceStart&&this.createSnapping()}createSnapping(){const i=this.parent.worldScreenWidth,t=this.parent.worldScreenHeight,r=this.parent.screenWidth/this.xScale,n=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:i,startY:t,deltaX:r-i,deltaY:n-t},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(i){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let t;if(!this.options.center&&!this.options.noMove&&(t=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){const r=this.snapping;if(r.time+=i,r.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const s=this.snapping,o=this.ease(s.time,s.startX,s.deltaX,this.options.time),a=this.ease(s.time,s.startY,s.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/o,this.parent.scale.y=this.parent.screenHeight/a}const n=this.parent.plugins.get("clamp-zoom",!0);n&&n.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(t))}}resume(){this.snapping=null,super.resume()}}const vH={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class yH extends bi{constructor(i,t={}){super(i),this.options=Object.assign({},vH,t),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(i){window.addEventListener("keydown",t=>{i.includes(t.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",t=>{i.includes(t.code)&&(this.keyIsPressed=!1)})}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const i=this.smoothingCenter,t=this.smoothing;let r;this.options.center||(r=this.parent.toLocal(i)),this.isAxisX()&&(this.parent.scale.x+=t.x),this.isAxisY()&&(this.parent.scale.y+=t.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const n=this.parent.plugins.get("clamp-zoom",!0);if(n&&n.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const s=this.parent.toGlobal(r);this.parent.x+=i.x-s.x,this.parent.y+=i.y-s.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(i){if(this.paused)return;const t=this.parent.input.getPointerPosition(i),r=-i.deltaY*(i.deltaMode?this.options.lineHeight:1)/200,n=Math.pow(2,(1+this.options.percent)*r);let s;this.options.center||(s=this.parent.toLocal(t)),this.isAxisX()&&(this.parent.scale.x*=n),this.isAxisY()&&(this.parent.scale.y*=n),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=t.x-a.x,this.parent.y+=t.y-a.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel",{wheel:{dx:i.deltaX,dy:i.deltaY,dz:i.deltaZ},event:i,viewport:this.parent})}wheel(i){if(this.paused||!this.checkKeyPress())return!1;if(i.ctrlKey&&this.options.trackpadPinch)this.pinch(i);else if(this.options.wheelZoom){const t=this.parent.input.getPointerPosition(i),n=(this.options.reverse?-1:1)*-i.deltaY*(i.deltaMode?this.options.lineHeight:1)/500,s=Math.pow(2,(1+this.options.percent)*n);if(this.options.smooth){const o={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+o.x)*s-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+o.y)*s-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=t}else{let o;this.options.center||(o=this.parent.toLocal(t)),this.isAxisX()&&(this.parent.scale.x*=s),this.isAxisY()&&(this.parent.scale.y*=s),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const a=this.parent.plugins.get("clamp-zoom",!0);if(a&&a.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const h=this.parent.toGlobal(o);this.parent.x+=t.x-h.x,this.parent.y+=t.y-h.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel",{wheel:{dx:i.deltaX,dy:i.deltaY,dz:i.deltaZ},event:i,viewport:this.parent})}return!this.parent.options.passiveWheel}}class mH{constructor(i){this.viewport=i,this.touches=[],this.addListeners()}addListeners(){this.viewport.interactive=!0,this.viewport.forceHitArea||(this.viewport.hitArea=new Tt(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.on("pointerout",this.up,this),this.wheelFunction=i=>this.handleWheel(i),this.viewport.options.divWheel.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){this.viewport.options.divWheel.removeEventListener("wheel",this.wheelFunction)}down(i){if(this.viewport.pause||!this.viewport.worldVisible)return;if(i.data.pointerType==="mouse"?this.isMouseDown=!0:this.get(i.data.pointerId)||this.touches.push({id:i.data.pointerId,last:null}),this.count()===1){this.last=i.data.global.clone();const r=this.viewport.plugins.get("decelerate",!0),n=this.viewport.plugins.get("bounce",!0);(!r||!r.isActive())&&(!n||!n.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(i)&&this.viewport.options.stopPropagation&&i.stopPropagation()}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(i){return Math.abs(i)>=this.viewport.threshold}move(i){if(this.viewport.pause||!this.viewport.worldVisible)return;const t=this.viewport.plugins.move(i);if(this.clickedAvailable&&this.last){const r=i.data.global.x-this.last.x,n=i.data.global.y-this.last.y;(this.checkThreshold(r)||this.checkThreshold(n))&&(this.clickedAvailable=!1)}t&&this.viewport.options.stopPropagation&&i.stopPropagation()}up(i){if(this.viewport.pause||!this.viewport.worldVisible)return;i.data.pointerType==="mouse"&&(this.isMouseDown=!1),i.data.pointerType!=="mouse"&&this.remove(i.data.pointerId);const t=this.viewport.plugins.up(i);this.clickedAvailable&&this.count()===0&&this.last&&(this.viewport.emit("clicked",{event:i,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this}),this.clickedAvailable=!1),t&&this.viewport.options.stopPropagation&&i.stopPropagation()}getPointerPosition(i){const t=new M;if(this.viewport.options.interaction)this.viewport.options.interaction.mapPositionToPoint(t,i.clientX,i.clientY);else if(this.viewport.options.useDivWheelForInputManager&&this.viewport.options.divWheel){const r=this.viewport.options.divWheel.getBoundingClientRect();t.x=i.clientX-r.left,t.y=i.clientY-r.top}else t.x=i.clientX,t.y=i.clientY;return t}handleWheel(i){if(this.viewport.pause||!this.viewport.worldVisible||this.viewport.options.interaction&&this.viewport.options.interaction.interactionDOMElement!==i.target)return;const t=this.viewport.toLocal(this.getPointerPosition(i));this.viewport.left<=t.x&&t.x<=this.viewport.right&&this.viewport.top<=t.y&&t.y<=this.viewport.bottom&&this.viewport.plugins.wheel(i)&&!this.viewport.options.passiveWheel&&i.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(i){for(const t of this.touches)if(t.id===i)return t;return null}remove(i){for(let t=0;t<this.touches.length;t++)if(this.touches[t].id===i){this.touches.splice(t,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}}function Vu(e){let i,t=e[0],r=1;for(;r<e.length;){const n=e[r],s=e[r+1];if(r+=2,(n==="optionalAccess"||n==="optionalCall")&&t==null)return;n==="access"||n==="optionalAccess"?(i=t,t=s(t)):(n==="call"||n==="optionalCall")&&(t=s((...o)=>t.call(i,...o)),i=void 0)}return t}const Hs=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class IH{constructor(i){this.viewport=i,this.list=[],this.plugins={}}add(i,t,r=Hs.length){this.plugins[i]=t;const n=Hs.indexOf(i);n!==-1&&Hs.splice(n,1),Hs.splice(r,0,i),this.sort()}get(i,t){return t&&Vu([this,"access",r=>r.plugins,"access",r=>r[i],"optionalAccess",r=>r.paused])?null:this.plugins[i]}update(i){for(const t of this.list)t.update(i)}resize(){for(const i of this.list)i.resize()}reset(){for(const i of this.list)i.reset()}removeAll(){this.plugins={},this.sort()}remove(i){this.plugins[i]&&(delete this.plugins[i],this.viewport.emit(`${i}-remove`),this.sort())}pause(i){Vu([this,"access",t=>t.plugins,"access",t=>t[i],"optionalAccess",t=>t.pause,"call",t=>t()])}resume(i){Vu([this,"access",t=>t.plugins,"access",t=>t[i],"optionalAccess",t=>t.resume,"call",t=>t()])}sort(){this.list=[];for(const i of Hs)this.plugins[i]&&this.list.push(this.plugins[i])}down(i){let t=!1;for(const r of this.list)r.down(i)&&(t=!0);return t}move(i){let t=!1;for(const r of this.viewport.plugins.list)r.move(i)&&(t=!0);return t}up(i){let t=!1;for(const r of this.list)r.up(i)&&(t=!0);return t}wheel(i){let t=!1;for(const r of this.list)r.wheel(i)&&(t=!0);return t}}const CH={screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,interaction:null,disableOnContextMenu:!1,ticker:ye.shared};class gA extends $t{__init(){this._disableOnContextMenu=i=>i.preventDefault()}constructor(i={}){super(),gA.prototype.__init.call(this),this.options=Object.assign({},{divWheel:document.body},CH,i),this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.divWheel=this.options.divWheel||document.body,this.options.disableOnContextMenu&&this.options.divWheel.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new mH(this),this.plugins=new IH(this)}destroy(i){!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&this.options.divWheel.removeEventListener("contextmenu",this._disableOnContextMenu),this.input.destroy(),super.destroy(i)}update(i){this.pause||(this.plugins.update(i),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new Tt(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(i=window.innerWidth,t=window.innerHeight,r,n){this.screenWidth=i,this.screenHeight=t,typeof r<"u"&&(this._worldWidth=r),typeof n<"u"&&(this._worldHeight=n),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(i){this._worldWidth=i,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(i){this._worldHeight=i,this.plugins.resize()}getVisibleBounds(){return new Tt(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(i,t){return arguments.length===2?this.toLocal(new M(i,t)):this.toLocal(i)}toScreen(i,t){return arguments.length===2?this.toGlobal(new M(i,t)):this.toGlobal(i)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new M(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(i){this.moveCenter(i)}moveCenter(...i){let t,r;typeof i[0]=="number"?(t=i[0],r=i[1]):(t=i[0].x,r=i[0].y);const n=(this.worldScreenWidth/2-t)*this.scale.x,s=(this.worldScreenHeight/2-r)*this.scale.y;return(this.x!==n||this.y!==s)&&(this.position.set(n,s),this.plugins.reset(),this.dirty=!0),this}get corner(){return new M(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(i){this.moveCorner(i)}moveCorner(...i){let t,r;return i.length===1?(t=-i[0].x*this.scale.x,r=-i[0].y*this.scale.y):(t=-i[0]*this.scale.x,r=-i[1]*this.scale.y),(t!==this.x||r!==this.y)&&(this.position.set(t,r),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(i){return this.screenWidth/i}findFitHeight(i){return this.screenHeight/i}findFit(i,t){const r=this.screenWidth/i,n=this.screenHeight/t;return Math.min(r,n)}findCover(i,t){const r=this.screenWidth/i,n=this.screenHeight/t;return Math.max(r,n)}fitWidth(i=this.worldWidth,t,r=!0,n){let s;t&&(s=this.center),this.scale.x=this.screenWidth/i,r&&(this.scale.y=this.scale.x);const o=this.plugins.get("clamp-zoom",!0);return!n&&o&&o.clamp(),t&&s&&this.moveCenter(s),this}fitHeight(i=this.worldHeight,t,r=!0,n){let s;t&&(s=this.center),this.scale.y=this.screenHeight/i,r&&(this.scale.x=this.scale.y);const o=this.plugins.get("clamp-zoom",!0);return!n&&o&&o.clamp(),t&&s&&this.moveCenter(s),this}fitWorld(i){let t;i&&(t=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),i&&t&&this.moveCenter(t),this}fit(i,t=this.worldWidth,r=this.worldHeight){let n;i&&(n=this.center),this.scale.x=this.screenWidth/t,this.scale.y=this.screenHeight/r,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const s=this.plugins.get("clamp-zoom",!0);return s&&s.clamp(),i&&n&&this.moveCenter(n),this}setZoom(i,t){let r;t&&(r=this.center),this.scale.set(i);const n=this.plugins.get("clamp-zoom",!0);return n&&n.clamp(),t&&r&&this.moveCenter(r),this}zoomPercent(i,t){return this.setZoom(this.scale.x+this.scale.x*i,t)}zoom(i,t){return this.fitWidth(i+this.worldScreenWidth,t),this}get scaled(){return this.scale.x}set scaled(i){this.setZoom(i,!0)}snapZoom(i){return this.plugins.add("snap-zoom",new gH(this,i)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new M(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(i){this.x=-i*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(i){this.x=-i*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(i){this.y=-i*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(i){this.y=-i*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(i){this._dirty=i}get forceHitArea(){return this._forceHitArea}set forceHitArea(i){i?(this._forceHitArea=i,this.hitArea=i):(this._forceHitArea=null,this.hitArea=new Tt(0,0,this.worldWidth,this.worldHeight))}drag(i){return this.plugins.add("drag",new ix(this,i)),this}clamp(i){return this.plugins.add("clamp",new iH(this,i)),this}decelerate(i){return this.plugins.add("decelerate",new oH(this,i)),this}bounce(i){return this.plugins.add("bounce",new tH(this,i)),this}pinch(i){return this.plugins.add("pinch",new oo(this,i)),this}snap(i,t,r){return this.plugins.add("snap",new AH(this,i,t,r)),this}follow(i,t){return this.plugins.add("follow",new lH(this,i,t)),this}wheel(i){return this.plugins.add("wheel",new yH(this,i)),this}animate(i){return this.plugins.add("animate",new dr(this,i)),this}clampZoom(i){return this.plugins.add("clamp-zoom",new nH(this,i)),this}mouseEdges(i){return this.plugins.add("mouse-edges",new cH(this,i)),this}get pause(){return!!this._pause}set pause(i){this._pause=i,this.lastViewport=null,this.moving=!1,this.zooming=!1,i&&this.input.pause()}ensureVisible(i,t,r,n,s){s&&(r>this.worldScreenWidth||n>this.worldScreenHeight)&&(this.fit(!0,r,n),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let o=!1;i<this.left?(this.left=i,o=!0):i+r>this.right&&(this.right=i+r,o=!0),t<this.top?(this.top=t,o=!0):t+n>this.bottom&&(this.bottom=t+n,o=!0),o&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}var Nr;class _H extends Kt{constructor(t){super();lt(this,Nr,void 0);this.name="GRID",this.interactive=!1,this.x=0,this.y=0,It(this,Nr,Object.assign({},ND,t)),this.draw()}draw(){const{cellSize:t,lineNative:r,lineWidth:n,lineColor:s,lineAlpha:o,cellSize2:a,lineNative2:h,lineWidth2:l,lineColor2:u,lineAlpha2:c}=B(this,Nr);this.drawGridLines(t,n,s,o,r),this.drawGridLines(a,l,u,c,h),this.endFill()}redraw(){this.clear(),this.draw()}drawGridLines(t,r,n,s,o){if(!Fe(t)||t<=0)return;const{width:a,height:h}=B(this,Nr),l={width:r,color:n,alpha:s,native:o};this.lineStyle(l),this.horizontalLines(a,h,t),this.verticalLines(a,h,t)}updateOptions(t){It(this,Nr,uo(B(this,Nr),t))}horizontalLines(t,r,n){let s=n;const o=t,a=r;if(r>n)do this.moveTo(0,s),this.lineTo(o,s),s+=n;while(s<a)}verticalLines(t,r,n){let s=n;const o=r,a=t;if(t>n)do this.moveTo(s,0),this.lineTo(s,o),s+=n;while(s<a)}}Nr=new WeakMap;class xH extends Kt{constructor(){super(...arguments);x(this,"ele",new Kt)}setup(t,r,n){const{width:s=100,height:o=100,x:a=0,y:h=0,color:l=255,angle:u=0,alpha:c=1,offsetX:f=0,offsetY:d=0,showStar:A=!0,icon:p,limitBounds:g}=n;if(this.ele.x=a||this.ele.x,this.ele.y=h||this.ele.y,this.ele.beginFill(l,c),this.ele.drawRect(0,0,s,o),this.ele.endFill(),A&&(this.ele.lineStyle(1,16711680),this.ele.moveTo(-f-5,-d),this.ele.lineTo(-f+5,-d),this.ele.moveTo(-f,-d-5),this.ele.lineTo(-f,-d+5)),p){const R=Ke.from(p.url);p.width&&(R.width=p.width),p.height&&(R.height=p.height),R.angle=p.angle||0,R.x=p.x,R.y=p.y,this.ele.addChild(R)}this.ele.angle=u,this.ele.interactive=!0,this.addChild(this.ele);const{topLeft:y={x:0,y:0},bottomRight:I={x:t,y:r}}=g||{},E=new Kt;E.beginFill(0),E.drawRect(y.x,y.y,I.x-y.x,I.y-y.y),E.endFill(),this.addChild(E);const w=R=>{this.ele.cursor=null;const S=R.data.getLocalPosition(this);this.ele.x=S.x+f,this.ele.y=S.y+d,this.ele.x<y.x&&(this.ele.cursor="none",this.ele.x=y.x),this.ele.y<y.y&&(this.ele.cursor="none",this.ele.y=y.y),this.ele.x+this.ele.width>I.x&&(this.ele.cursor="none",this.ele.x=I.x-this.ele.width),this.ele.y+this.ele.height>I.y&&(this.ele.cursor="none",this.ele.y=I.y-this.ele.height)},T=()=>{this.ele.clear(),this.ele.children.forEach(R=>{R.destroy()}),F(),this.ele.parent&&this.ele.parent.removeChild(this.ele),E.parent&&E.destroy()},_=R=>{const{button:S,buttons:D}=R.data;S===0&&D===1&&(R.stopPropagation(),F(),this.parent.emit(bo.GET_POSITION,{x:this.ele.x,y:this.ele.y}),console.log("拍摄点：",a,h))},F=()=>{this.parent.off("pointermove",w),this.parent.off("pointerdown",_)};return this.parent.on("pointermove",w),this.parent.on("pointerdown",_),{clearFn:T,mask:E}}}class EH extends ix{wheel(i){return this.options.wheelSwapAxes=i.shiftKey,super.wheel(i)}}const bH=(e,i,t)=>{const{backgroundColor:r,backgroundAlpha:n,outlineColor:s,outlineAlpha:o,outlineWidth:a,outlineNative:h}=t,l=new Kt;return l.name="BACKDROP",l.lineStyle({width:a,native:h,color:s,alpha:o,alignment:0}).beginFill(r,n).drawRect(0,0,e,i).endFill(),l};var En,He,Ne,Mi,ia,Or,Dr,hs,ei,ls,us,cs,fs;class wH extends gA{constructor(t){super(t);lt(this,En,void 0);lt(this,He,void 0);lt(this,Ne,void 0);lt(this,Mi,new $t);lt(this,ia,new Kt);lt(this,Or,new $t);x(this,"bgLayer",new $t);lt(this,Dr,new Kt);lt(this,hs,void 0);lt(this,ei,void 0);x(this,"displayGroup",new di(0,!0));x(this,"displayLayer");lt(this,ls,void 0);lt(this,us,void 0);lt(this,cs,void 0);lt(this,fs,void 0);const{worldWidth:r,worldHeight:n,minScale:s,maxScale:o,fitOffsetRatio:a,align:h=qs.CENTER,offsetX:l=0,offsetY:u=0}=t;It(this,En,bH(r||0,n||0,t)),It(this,ls,a),It(this,cs,l),It(this,fs,u),It(this,us,h),this.pinch({factor:1,noDrag:!1}),this.clampZoom({minScale:s,maxScale:o}),It(this,ei,new _H(Object.assign({width:r||0,height:n||0},t.grid))),this.addChild(this.bgLayer,B(this,ei)),It(this,hs,new xH),this.addChild(B(this,hs)),this.sortableChildren=!0,this.bgLayer.zIndex=-1,this.bgLayer.addChild(B(this,En),B(this,Or),B(this,Dr)),this.setupLocalBgContainer(),this.align(h),this.setupDisplayLayer(),this.setupBgContainer()}setupLocalBgContainer(){B(this,Or).addChild(B(this,Mi)),B(this,Mi).addChild(B(this,ia)),B(this,Mi).name="localBgContainer",B(this,Mi).visible=!1}setupBgContainer(){B(this,Dr).beginFill(0,.5).drawRect(0,0,this.worldWidth,this.worldHeight).endFill(),B(this,Or).mask=B(this,Dr)}setupDisplayLayer(){this.displayLayer=new Qo(this.displayGroup),this.displayLayer.name="displayLayer";const t=new $t;t.name="layerContainer",t.addChild(this.displayLayer),this.displayLayer.addChild(new Qo),this.addChild(t)}toWheelMode(){var r;this.cursor="default";const t={pressDrag:!1,ignoreKeyToPressOnTouch:!0};((r=globalThis.navigator)==null?void 0:r.platform)==="Win32"?this.plugins.add("drag",new EH(this,t)):this.drag(t),this.wheel({wheelZoom:!1,trackpadPinch:!0})}toDragMode(){this.cursor="grab",this.drag({wheel:!1,pressDrag:!0})}toZoomMode(){}toFitCenter(){const{worldWidth:t,worldHeight:r}=this,[n,s]=[t/2,r/2];this.moveCenter(n,s)}addToLayer(t){return t.parentGroup=this.displayGroup,this.displayLayer.addChild(t)}clearLayer(){this.getInteractiveElements().forEach(r=>{Ql(r)})}setupAssistantEle(t){const{clearFn:r,mask:n}=B(this,hs).setup(this.worldWidth,this.worldHeight,t),s=this.getChildByName("AXIS_MASK"),o=s?s.mask:null,a=B(this,ei).mask,h=this.bgLayer.mask;return s&&(s.mask=n),B(this,ei).mask=n,this.bgLayer.mask=n,()=>{B(this,ei).mask=a,this.bgLayer.mask=h,s&&(s.mask=o),r()}}setLocalBackgroundImage(t,r){var n;if((n=B(this,Ne))==null||n.destroy({texture:!0}),It(this,Ne,null),B(this,Mi).visible=!1,t&&t instanceof HTMLImageElement){const s=new Vi(t);s.filters=[],s.interactive=!1;const{x:o=0,y:a=0,angle:h=0,width:l=140,height:u=100,boundColor:c=16711680,boundAlpha:f=.5}=r;s.width=l,s.height=u,this._redrawLocalBgBounds(this.worldWidth,this.worldHeight,c,f),s.x=o,s.y=a,s.angle=h,It(this,Ne,s),B(this,Mi).addChild(s),B(this,Mi).visible=!0}}updateLocalBackgroundImage(t){if(B(this,Ne)){const{x:r=B(this,Ne).x,y:n=B(this,Ne).y,angle:s=B(this,Ne).angle,width:o=B(this,Ne).width,height:a=B(this,Ne).height,boundColor:h=16711680,boundAlpha:l=.5}=t;B(this,Ne).x=r,B(this,Ne).y=n,B(this,Ne).angle=s,B(this,Ne).width=o,B(this,Ne).height=a,this._redrawLocalBgBounds(this.worldWidth,this.worldHeight,h,l)}}setLocalBackdropVisible(t){B(this,Mi).visible=t}_redrawLocalBgBounds(t,r,n=16777215,s=.5){const o=B(this,ia);o.clear(),o.beginFill(n,s),o.drawRect(0,0,t,r),o.endFill()}set backgroundImage(t){var r;if((r=B(this,He))==null||r.destroy({texture:!0}),It(this,He,null),t&&t instanceof HTMLImageElement){const n=new Vi(t);n.filters=[],n.interactive=!1,It(this,He,n),B(this,Or).addChildAt(n,0)}}get backgroundSprite(){return B(this,He)}get bgContainer(){return B(this,Or)}get backgroundImageData(){const t=cQ(B(this,He),B(this,He).width,B(this,He).height);if(!t)return null;const{canvas:r,ctx:n}=t;return n.getImageData(0,0,r.width,r.height)}align(t=B(this,us)){const{worldWidth:r,worldHeight:n}=this;switch(this.fit(!0,r+B(this,ls),n+B(this,ls)),t){case qs.TOP_LEFT:this.position.set(B(this,cs),B(this,fs));break;case qs.CENTER:default:this.toFitCenter();break}this.emit(Oc.ZOOMED,{viewport:this})}destroyBackgroundImage(){var t;(t=B(this,He))==null||t.destroy({texture:!0}),It(this,He,null)}updateBackgroundImage(t,r){r&&(this.backgroundImage=r);const n=B(this,He);if(t&&n){this.fitBGToCenter();const{align:s=hn.TOP_LEFT,offsetX:o,offsetY:a,width:h=n.width,height:l=n.height}=t;n.width=h,n.height=l,n.parseJSON(t);const{angle:u=n.angle}=t;let c=h-this.worldWidth,f=l-this.worldHeight;(u%360===90||u%360===270)&&(c=l-this.worldWidth,f=h-this.worldHeight);const A={[hn.TOP_LEFT]:{x:c/2,y:f/2},[hn.BOTTOM_LEFT]:{x:c/2,y:-f/2},[hn.TOP_RIGHT]:{x:-c/2,y:f/2},[hn.BOTTOM_RIGHT]:{x:-c/2,y:-f/2}}[s];A&&(n.position.x+=A.x,n.position.y+=A.y),Fe(o)&&(n.position.x+=o),Fe(a)&&(n.position.y+=a)}}fitBGToCenter(){const t=B(this,He);t&&(t.anchor.set(.5,.5),t.position.x=this.worldWidth/2,t.position.y=this.worldHeight/2)}isOutSide(t,r){const{minX:n,minY:s,maxX:o,maxY:a}=Rh(t,this);let h=!1;const{x:l=0,y:u=0,width:c=this.worldWidth,height:f=this.worldHeight}=r||{};return h=o<l||a<u||n>l+c||s>u+f,h}getInteractiveElements(t={excludeOutSide:!1}){if(!this.displayLayer.visible)return[];const{excludeOutSide:r,outSideRange:n}=t,s=this.displayLayer.children,o=[],a=h=>{const{children:l=[],interactive:u}=h;u?r&&this.isOutSide(h,n)||o.push(h):l&&l.length>0&&l.forEach(c=>{a(c)})};return s.forEach(h=>{a(h)}),o}resize(t,r,n,s,o){super.resize(t-B(this,cs),r-B(this,fs),n,s),B(this,ei).updateOptions({...o,width:n,height:s}),B(this,ei).redraw(),this.align(B(this,us)),B(this,En).width=n,B(this,En).height=s,B(this,Dr).width=n,B(this,Dr).height=s}updateGrid(t){B(this,ei).updateOptions(t),B(this,ei).redraw()}getPointClickElements(t){const r=this.getInteractiveElements(),n=[],s=this.toGlobal(t);return r.forEach(o=>{const a=o.worldTransform.applyInverse(s);if(o.hitArea)o.hitArea.contains(a.x,a.y)&&n.push(o);else{let h=!1;if(o instanceof Vi?h=o.hitTest(a):o.containsPoint&&(h=o.containsPoint(s)),h){n.push(o);return}}}),n}getRegionalElements(t,r){const{x:n,y:s}=t,{x:o,y:a}=r,h=this.getInteractiveElements(),l=new Js(Math.min(n,o),Math.min(s,a),Math.abs(n-o),Math.abs(s-a)),u=l.hull,c=[];return h.forEach(f=>{let d;f.hitArea&&f.hitArea.type!==void 0?(d=pQ(f,f.hitArea),d=d.map(y=>this.toLocal(y))):f instanceof fA||f instanceof Do?d=f.getRealPoints(this)[0]:(d=ri.calculateTransformedCorners(f),d=d.map(y=>this.toLocal(y)));let A=d.some(y=>l.contains(y));if(A){console.debug("选框包含元素顶点"),c.push(f);return}const p=[];for(let y=0;y<d.length;y++)y===d.length-1?p.push([d[y],d[0]]):p.push([d[y],d[y+1]]);const g=[[u[0],u[1]],[u[1],u[2]],[u[2],u[3]],[u[3],u[0]]];if(A=vQ(p,g),A){console.debug("选框与元素边框相交"),c.push(f);return}}),c}set gridVisible(t){B(this,ei).visible=t}set displayLayerVisible(t){this.displayLayer.visible=t}addToContainer(t,r){switch(r){case"bgLayer":this.bgLayer.addChild(t);break;case"displayLayer":this.displayLayer.addChild(t);break;default:this.addChild(t);break}}updateInteractivedDisplay(t){this.getInteractiveElements().forEach(n=>{n.parseJSON({...t})})}}En=new WeakMap,He=new WeakMap,Ne=new WeakMap,Mi=new WeakMap,ia=new WeakMap,Or=new WeakMap,Dr=new WeakMap,hs=new WeakMap,ei=new WeakMap,ls=new WeakMap,us=new WeakMap,cs=new WeakMap,fs=new WeakMap;$i.add({name:"interaction",type:Zt.RendererPlugin,ref:bk});xi.minSegments=50;class Vr extends je{constructor(){super(...arguments);x(this,"plugins",[]);x(this,"app");x(this,"viewport");x(this,"transformer");x(this,"tempLayer");x(this,"selector");x(this,"centralAxis");x(this,"imageProcess");x(this,"operationStack",new S_);x(this,"curDisplayObject");x(this,"modeManager",new Rk);x(this,"configManager",new Bk);x(this,"layerManager",new Tk);x(this,"batchCreate",new k3);x(this,"alignController",new G3);x(this,"centralAxisCb");x(this,"isDragMode",!1);x(this,"enableSelectElements",!0);x(this,"canvasOptions");x(this,"tempOutline",null);x(this,"hitAreaManager");x(this,"contextInfo");x(this,"elementsFillMap",{})}get view(){return this.app.view}get currentState(){return{hasBackground:!!this.viewport.backgroundSprite,backgroundVisible:this.backgroundVisible(),enableCombine:!!this.selectedPathsClosed,scaled:this.viewport.scaled,enableMoveBack:!1,enableMoveForward:!1,enableRedo:this.canRedo,enableUndo:this.canUndo,enableSelectElements:this.enableSelectElements,viewportWidth:this.viewport.worldWidth,viewportHeight:this.viewport.worldHeight,...this.getSelectedData()}}get curMaxZOrder(){return Q2(this.getInteractiveElements().map(({zOrder:t})=>t))||0}addDisplayToViewport(t,r=!0){this.viewport.addToLayer(t),t.interactive&&r&&(this.selected=[t])}initApp(t){const r=Object.assign({resolution:window.devicePixelRatio,antialias:!0,autoStart:!1,autoDensity:!0,backgroundColor:PD},t);this.app=new lA(r),this.app.view.style.width="100%",this.app.view.style.height="100%",this.app.stage=new Uo,this.app.stage.sortableChildren=!0,this.app.ticker.maxFPS=30,this.app.renderer.on("resize",(n,s)=>{var o;this.resizeViewport({width:n,height:s}),this.plugins.forEach(a=>{a.resize&&a.resize(n,s)}),(o=this.centralAxis)==null||o.resize({worldHeight:this.viewport.worldHeight,stageHeight:s})})}initViewport(t){const{offsetX:r=0,offsetY:n=0}=t||{},s=Object.assign({screenWidth:this.app.screen.width-r,screenHeight:this.app.screen.height-n,worldWidth:Ti.worldWidth,worldHeight:Ti.worldHeight,interaction:this.app.renderer.plugins.interaction,disableOnContextMenu:!0,passiveWheel:!1,stopPropagation:!0,minScale:Ti.minScale,maxScale:Ti.maxScale,fitOffsetRatio:Ti.fitOffsetRatio,backgroundColor:Ti.backgroundColor,backgroundAlpha:Ti.backgroundAlpha,outlineNative:Ti.outlineNative,outlineWidth:Ti.outlineWidth,outlineColor:Ti.outlineColor,outlineAlpha:Ti.outlineAlpha},t);this.viewport=new wH(s),this.viewport.toWheelMode(),this.app.stage.addChild(this.viewport)}initTransformer(t){this.transformer=new jk(this.viewport,t),this.app.stage.addChild(this.transformer)}initEnv(){var s;const r=this.app.renderer.gl;let n=-1;r&&(n=(s=r.getParameter)==null?void 0:s.call(r,r.MAX_TEXTURE_SIZE)),this.contextInfo={version:ft.PREFER_ENV,max_texture_size:n},console.log("[ canvas context Info ] >",this.contextInfo)}initHitAreaManager(t){this.hitAreaManager=new w_(t),this.hitAreaManager.init(this.viewport,this.transformer)}init(t){const{cursorConfig:r,imageProcessConfig:n}=t||{};this.initViews(t),this.initCursor(r),this.configManager.imageProcessConfig=n,this.canvasOptions=t}initTempLayer(){this.tempLayer=new Wk,this.viewport.addChild(this.tempLayer)}initSelector(t){this.selector=new zk(t),this.viewport.addChild(this.selector)}initViews(t){const{appConfig:r,viewportConfig:n,selectorConfig:s,transformerConfig:o,hitAreaConfig:a}=t||{};this.initApp(r),this.initViewport(n),this.initTransformer(o),this.initTempLayer(),this.initSelector(s),this.initHitAreaManager(a),this.initEnv()}initCursor(t){t==null||t.forEach(r=>{const n=`url(${r.url}) ${r.style}`;this.app.renderer.plugins.interaction.cursorStyles[r.name]=n})}getPointByViewport(t){const{data:r}=t;return r.getLocalPosition(this.viewport)}handleDrawDisplayDone(t){this.curDisplayObject=void 0;const r=t.getBounds();r.width<Fg&&r.height<Fg?t.destroy(!0):(this.addDisplayToViewport(t),this.recordOperationLog(t)),this.emit(Ui.DRAW_DISPLAY_DONE)}finishCurMode(){this.curDisplayObject&&this.curDisplayObject.done&&this.curDisplayObject.done(),this.imageProcess&&this.closeImageProcess(),this.curDisplayObject=void 0}executeSelect(t){this.transformer.selected=t}getSelectedData(){const t=this.exportSelectedJSON();let r=this.transformer.groupJSON;if(this.selected.length===1){const{x:n,y:s,width:o,height:a,angle:h,...l}=t[0];r={...r,...l}}return{selectedJSON:t,isGroup:this.isSelectGroup(),selectedLength:yf(this.transformer.selected).length,groupJSON:r}}createSVG(t){const r=new m_(t);if(r.root){this.addDisplayToViewport(r.root,!1);const n=t_(r.root,this.viewport.displayGroup,this.configManager.displayConfig);this.selected=n}return this.recordOperationLog(...this.selected),r}findSameGroupElements(t){const r=this.getElementsByGroupTag(t.groupTag);return r.length===0&&r.push(t),r}getElementsByGroupTag(t){const r=this.viewport.getInteractiveElements(),n=[];return r.forEach(s=>{s.groupTag&&s.groupTag===t&&n.push(s)}),n}getMinAreaElementByPoint(t){var n;const r=((n=this.viewport)==null?void 0:n.getPointClickElements(t))||[];return r.length>0?(r.sort(this.sortByZOrder),this.getMinAreaElement(r)):null}sortByZOrder(t,r){return t.zOrder-r.zOrder}getMinAreaElement(t,r=!0){let n=t.pop();if(r&&n.isFill)return n;for(let s=t.length-1;s>=0;s--){const o=t[s],a=o.width*o.height;if(n.width*n.height>a&&(n=o),r&&o.isFill)break}return n}invertSelect(t,r){const n=this.findSameGroupElements(t);if(r.includes(t))r=r.filter(s=>!n.includes(s));else{const s=new Set(r);n.forEach(o=>{s.has(o)||r.push(o)})}return r}existDuplicateGroupTag(t,r){return t.groupTag?r.includes(t.groupTag)?!0:(r.push(t.groupTag),!1):!1}selectAreaElements(t,r,n){var l;const s=((l=this.viewport)==null?void 0:l.getRegionalElements(t,r))||[];if(s.length<=0){this.transformer.selected.length>0&&(console.log(" 没有找到元素"),this.executeSelect([]));return}const o=hQ(this.viewport.toGlobal(t),this.viewport.toGlobal(r),s);let a;const h=[];if(n)a=this.transformer.selected.slice(),o.forEach(u=>{this.existDuplicateGroupTag(u,h)||(a=this.invertSelect(u,a))});else{const u=[];o.forEach(c=>{if(this.existDuplicateGroupTag(c,h))return;const f=this.findSameGroupElements(c);u.push(...f)}),a=Array.from(new Set(o.concat(u)))}this.executeSelect(a)}changeSelectedLayer(t){const n=[...this.getInteractiveElements()];n.sort((h,l)=>h.displayOrder-l.displayOrder);const s=n.map(h=>h.id),o=this.layerManager.changeLayer(s,this.selected,t),a=this.transformer.viewport.getInteractiveElements();this.layerManager.updateOrder(o,a),this.recordOperationLog(...a)}getTextWeldInfo(t=an.UNION,r){if(!r){const o=this.transformer.selected;o.length===1&&(r=o[0])}if(!r||r.type!==Qt.TEXT)return;const n=this.getBoolEleInfo(t,r.children.filter(o=>o==null?void 0:o.dPath)),s=jm(r,["isFill","lockRatio","isClosePath","zOrder","groupTag","layerTag","layerColor"]);return s.fillColor=r.config.fillColor,s.lineColor=r.config.lineColor,s.sourceId=r.id,s.id=ua(),{info:n,pathJSON:s}}getBoolEleInfo(t,r=this.transformer.selected){if(r.some(c=>c.type===Qt.BITMAP))return{};const s=[],o=[];r.forEach(c=>{const f=c.getRealPoints(this.viewport);s.push(f),o.push(c.id)});const a=this.judgeIsFill(t,this.transformer.selected),h=r.reduce((c,f,d)=>r[c].displayOrder>f.displayOrder?d:c,r.length-1),{layerTag:l,layerColor:u}=r[h];return{pointsList:s,selectedIds:o,isFill:a,bottomIndex:h,layerTag:l,layerColor:u}}drawBoolResult(t,r,n={}){if(["M0,0",""].includes(r)){this.recordOperationLog();return}n.isFill===void 0&&(n.isFill=this.judgeIsFill(t,this.transformer.selected));const s=this.configManager.displayConfig,o=ir(Qt.PATH,{dPath:r,graphicX:0,graphicY:0,fillColor:s.fillColor,lineColor:s.lineColor,...n});n.isClosePath===void 0&&(o.isClosePath=cA(o)),this.addDisplayToViewport(o),this.recordOperationLog(o)}removeElements(t,r=!1,n=!0){let s=this.transformer.selected;if((t==null?void 0:t.length)>0&&(s=this.viewport.getInteractiveElements().filter(f=>t.includes(f.id))),s.length<=0){console.warn("没有元素可以被销毁");return}const{curIDs:o,curAttributes:a}=O_(s,this.viewport,{texture:!0}),h=this.getMultiDisplayJSON(s);s.forEach(c=>{this.removeElement(c)}),this.transformer.selected=this.transformer.selected.filter(c=>!t.includes(c.id));const l=new Set;if((t==null?void 0:t.length)>0){const c=this.viewport.getInteractiveElements();s=c.filter(f=>t.includes(f.id)),c.forEach(f=>{l.add(f.id)})}const u={allIDs:l,curIDs:o,curAttributes:a};r&&this.operationStack.push(u),n&&this.emit(Ui.DISPLAYS_REMOVED,h)}judgeIsFill(t,r){const n=r.reduce((s,o,a)=>r[s].displayOrder>o.displayOrder?a:s,0);switch(t){case an.UNION:case an.INTERSECTION:case an.XOR:return(r.filter(s=>s.isFill)||[]).length===r.length;case an.DIFFERENCE:return r[n].isFill;default:return!1}}align(t){const r=this.transformer.selected,n=yf(r);this.alignController.execute(t,n,this.transformer.getGroupBounds(!0).innerBounds,this.viewport),this.recordOperationLog(...this.selected)}resizeViewport(t={}){const{screen:r}=this.app,{worldWidth:n,worldHeight:s}=this.viewport,{width:o=r.width,height:a=r.height,viewportWidth:h=n,viewportHeight:l=s,gridOption:u}=t;this.viewport.resize(o,a,h,l,u)}fitImageToViewport(t){const{worldWidth:r,worldHeight:n}=this.viewport||{},{width:s,height:o}=t,{width:a,height:h}=ca(s,o,r,n);t.width=a,t.height=h}updateBackdrop(t,r){this.viewport&&(this.viewport.updateBackgroundImage(t,r),(!r||r instanceof HTMLImageElement)&&this.emit(Ui.UPDATE_BACKDROP_RESULT,!!this.viewport.backgroundSprite))}destroyBackdrop(){this.viewport&&this.viewport.destroyBackgroundImage()}setLocalBackdrop(t,r){this.viewport&&this.viewport.setLocalBackgroundImage(t,r)}setLocalBackdropVisible(t){this.viewport&&this.viewport.setLocalBackdropVisible(t)}updateLocalBackgroundImage(t){this.viewport&&this.viewport.updateLocalBackgroundImage(t)}destroy(){var s,o,a,h;const t=this.app.renderer;ft.PREFER_ENV===Wi.WEBGL2&&((a=(o=(s=t.gl)==null?void 0:s.getExtension("WEBGL_lose_context"))==null?void 0:o.loseContext)==null||a.call(o));const r=this.plugins.slice(0);r.reverse();const n={children:!0,texture:!0,baseTexture:!0};r.forEach(l=>{l.destroy&&l.destroy(n)}),(h=this.app)==null||h.destroy(!0,n)}updateSelectedAttributes(t){const{width:r,height:n,x:s,y:o,angle:a,...h}=t;this.transformer.updateGroupSize(r,n),this.transformer.updateGroupPosition(s,o),this.transformer.rotateSelected(a),Tn(t,["width","height","x","y","angle"])&&this.transformer.commit(),this.transformer.selected.forEach(u=>{ZC(u,h,this.viewport)}),this.transformer.emit(Ye.TRANSFORM_CHANGE,t),this.recordOperationLog(...this.selected),this.emitTransformerCommit()}updateLockAspectRatio(){const t=!this.transformer.lockAspectRatio;return this.updateSelectedAttributes({lockRatio:t}),t}updateTransformHandleMode(t){this.transformer.changeMode(t)}updateEditMode(t){this.finishCurMode(),this.modeManager.curMode=t,t===ue.DRAG?this.toDragMode():this.toWheelMode(),this.updateEditModeCursor(t),ue.SELECT!==t&&(this.selected=[])}updateEditModeCursor(t){const{RECT:r,CIRCLE:n,LINE:s,PEN:o,DRAG:a}=ue;[r,n,s].includes(t)?this.viewport.cursor="crosshair":t===o?this.viewport.cursor="pen":t===a?this.viewport.cursor="grab":this.viewport.cursor="default"}updateDisplayConfig(t){const{updateCanvasDisplay:r=!0}=t;this.configManager.displayConfig=t,r&&this.viewport.updateInteractivedDisplay(t)}updateMultiDisplayConfig(t){const r=this.viewport.getInteractiveElements();t.forEach(n=>{const s=r.find(o=>o.id===n.id);s&&s.parseJSON({...n.config})})}removeSelected(){this.removeElements(this.transformer.selectedIDs,!0,!0)}removeElement(t,r=!0){t&&(r?Ql(t):t.destroy(),this.elementsFillMap[t.id]=t.isFill)}get selected(){return this.transformer.selected}set selected(t){this.transformer.selected=t}selectAll(){const t=this.getInteractiveElements()||[];this.executeSelect(t)}selectSpecDisplays(t){this.transformer.selectedIDs=t}clearSelected(){this.selected=[]}getInteractiveElements(){return this.viewport.getInteractiveElements()}resizeCanvasTo(t){this.app.resizeTo=t}exportSelectedJSON(t={texture:!1}){const r=this.transformer.selected;return this.getMultiDisplayJSON(r,t)}getDisplayJSON(t,r={texture:!1}){return t.toJSON(this.viewport,r)}getMultiDisplayJSON(t,r){return t.map(n=>this.getDisplayJSON(n,r))}getDisplayRenderData(t,r=1,n=0,s){const o=t.parentGroup;t.parentGroup=null,this.app.renderer.render(this.app.stage);const a=uQ(this.app.renderer.plugins.extract,t,r,n,s,this.contextInfo.max_texture_size);return t.parentGroup=o,a}set gridVisible(t){this.viewport.gridVisible=t}toWheelMode(){this.isDragMode=!1,this.viewport.toWheelMode(),this.updateEditModeCursor(this.modeManager.curMode)}toDragMode(){this.isDragMode||(this.isDragMode=!0,this.viewport.toDragMode())}toZoomMode(){this.viewport.toZoomMode()}setViewportToFit(){this.viewport.align(),this.viewport.input.clear()}get viewportScaled(){return this.viewport.scaled}setZoom(t,r=!0){this.viewport.setZoom(t,r),this.viewport.emit("zoomed",{viewport:this.viewport,type:"manual"})}zoomPercent(t,r=!0){this.viewport.zoomPercent(t,r),this.viewport.emit("zoomed",{viewport:this.viewport,type:"manual"})}flipSelected(t){this.transformer.flipSelected(t),this.recordOperationLog(...this.selected)}getPathPoints(t){return GM(t)}getSelectAreaViewport(t){const{start:r,end:n}=t,s=r.x.toFixed()===n.x.toFixed(),o=r.y.toFixed()===n.y.toFixed();if(s&&o)return null;const a=this.viewport.bgLayer,h=this.getDisplayRenderData(a),l=document.createElement("canvas");l.width=h.width,l.height=h.height;const u=l.getContext("2d");u.putImageData(h,0,0);const c={minLocalPoint:r,rtLocalPoint:new M(n.x,r.y),maxLocalPoint:n,lbLocalPoint:new M(r.x,n.y)},f=new T_;if(f.setOptions({canvas:l,ctx:u}),f.clip(c),l.width===0||l.height===0)return null;const{width:d,height:A,data:p}=I_(l);return l.width=d,l.height=A,u.putImageData(p,0,0),l}translateSelected(t){this.transformer.translateSelected(t),this.recordOperationLog(...this.selected)}get selectedPathsClosed(){return this.selected.length<2?!1:!this.selected.some(t=>!t.isClosePath)}get selectedGroupBoundCenter(){return this.transformer.worldGroupBoundsCenter}clientPointToViewportPoint(t,r){const{top:n,left:s}=this.view.getBoundingClientRect(),o={x:t.x-s,y:t.y-n};return this.viewport.toLocal(o,null,r)}isSelectGroup(t=this.selected){if(t.length>1){let r;for(let n=1;n<t.length;n++){const s=t[n-1],o=t[n];if(s.groupTag&&s.groupTag===o.groupTag){r=!0;continue}else{r=!1;break}}return r}return!1}createGroup(t=this.selected){i_(t),this.selected=t,this.changeSelectedLayer(pn.TOP)}breakGroup(t=this.selected){t.forEach(r=>{r.groupTag=void 0}),this.selected=t,this.recordOperationLog(...this.selected)}stop(){this.app.stop()}start(){this.app.start()}render(){this.app.render()}showBackground(){this.viewport.bgContainer.visible=!0}hideBackground(){this.viewport.bgContainer.visible=!1}backgroundVisible(){return this.viewport.bgContainer.visible}setupAssistantEle(t){var r;return(r=this.viewport)==null?void 0:r.setupAssistantEle(t)}setEnableSelectElements(t){this.enableSelectElements=t}updateNewElesOrder(t){let r=this.curMaxZOrder;t.filter(n=>!n.zOrder).forEach(n=>{n.zOrder=++r})}}class TH extends Vr{batchCreateOnTemp(i,t){this.batchCreate.create(i,this.exportSelectedJSON({texture:!0}),this.transformer.worldGroupBounds.getRectangle(),t).forEach(n=>{const s=Mh(n,this.viewport,!0);this.batchCreate.appendToTemp(s)})}finishBatchCreate(i=!0){let t=[];if(!i){this.recordOperationLog(...this.batchCreate.temp);const r=this.batchCreate.temp;t=this.getMultiDisplayJSON(r,{texture:!1})}return this.batchCreate.clearTemp(i),t}getShapeMatchData(){if(this.selected.length===0)return{};const i=this.viewport.bgLayer,{width:t,height:r,data:n}=this.getDisplayRenderData(i),{x:s,y:o}=this.transformer.worldGroupBoundsCenter,a={x:s,y:o,bitmap:n,w:t,h:r};return{displaysJSON:this.exportSelectedJSON({texture:!0}),options:a}}addShapeMatchResult(i){if(i.length>0){const t=[];return i.forEach(n=>{const s=Mh(n,this.viewport,!0);t.push(...s)}),this.recordOperationLog(...t),this.getMultiDisplayJSON(t,{texture:!1})}return[]}}class BH extends Vr{createCentralAxis(i){var h,l;this.centralAxis&&this.destroyCentralAxis(),this.centralAxisCb=()=>{const u=this.viewport.toGlobal(new M(this.centralAxis.mask.width,0));this.centralAxis.axis.x=u.x};const{worldHeight:t,worldWidth:r}=this.viewport,{height:n,width:s}=this.app.screen,o=this.viewport.toGlobal(new M(i,0)),a=()=>{this.emit(Ui.UPDATE_CENTRAL_AXIS,this.centralAxis.mask.width)};this.centralAxis=new Sk({viewportX:i,stageX:o.x,stageWidth:s,stageHeight:n,worldWidth:r,worldHeight:t,onUpdate:a}),this.app.stage.addChild(this.centralAxis.axis),this.viewport.addChild(this.centralAxis.mask),(h=this.viewport)==null||h.on("moved",this.centralAxisCb),(l=this.viewport)==null||l.on("zoomed",this.centralAxisCb)}get centralAxisPosition(){var i;return((i=this.centralAxis)==null?void 0:i.mask.width)||0}destroyCentralAxis(){var i,t,r;this.centralAxisCb&&((i=this.viewport)==null||i.off("moved",this.centralAxisCb),(t=this.viewport)==null||t.off("zoomed",this.centralAxisCb)),(r=this.centralAxis)==null||r.clear(),this.centralAxis=void 0,this.centralAxisCb=void 0}}var Gh;(function(e){e.Shift="shiftKey",e.Control="ctrlKey",e.Alt="altKey",e.Win="metaKey",e.Command="metaKey"})(Gh||(Gh={}));class RH extends Vr{constructor(){super(...arguments);x(this,"currentPointerOverTargets",[]);x(this,"manualSelect");x(this,"multiKey")}setupEvents(){var r;this.setupViewportEvent(),this.setupTransformEvent(),this.setupSelectorEvent(),this.setupModeEvent(),this.setupOperationStackEvent();const t=(r=this.canvasOptions.shortcutKeyConfig)==null?void 0:r.multiSelectKey;this.multiKey=Gh[t]||Gh.Shift}isMultiSelectKeyDown({data:t}){const{originalEvent:r}=t;return r[this.multiKey]}setupViewportEvent(){var c,f,d,A,p,g,y,I,E;let t,r=!0;const n=sp(({viewport:w})=>{this.plugins.forEach(T=>{T.onViewportMove&&T.onViewportMove(w)})},60,{trailing:!0}),s=sp(({viewport:w})=>{const{minScale:T,maxScale:_}=w.plugins.get("clamp-zoom").options;w.scaled>=T&&w.scaled<=_&&(this.plugins.forEach(F=>{F.onViewportScale&&F.onViewportScale(w)}),this.emit(Ui.ZOOMED,w.scaled))},30,{trailing:!0}),o=()=>this.modeManager.curMode===ue.SELECT?this.selector:this.curDisplayObject,a=(w,T)=>{var _;if(!this.imageProcess){if(!Bn(w)){r=!1,(_=this.selector)==null||_.done();return}if(!T){if(r=!0,t=no(w),!this.isDragMode){const F=this.modeManager.curMode;F===ue.SELECT&&this.handleSelectModePointerDown(w),Ng[F]&&this.handleEditModePointerDown(w)}this.plugins.forEach(F=>{F.onViewportPointerDown&&F.onViewportPointerDown(w,this.viewport)})}}},h=(w,T)=>{var F,R;if(T||!Bn(w))return;const{data:{originalEvent:_}}=w;if(!this.isDragMode){const S=this.getPointByViewport(w);if(t?t===no(w)&&((F=o())==null||F.update(S,w)):(R=o())==null||R.update(S,w),this.modeManager.curMode===ue.SELECT&&w.target&&w.target!==w.currentTarget){const{minX:$,minY:z,maxX:q,maxY:_t}=this.transformer.worldGroupBounds;if(new Tt($,z,q-$,_t-z).contains(S.x,S.y))this.resetPointerOverTarget();else{const X=this.getPenetrableElement(w);X?_ instanceof MouseEvent&&l(X):this.resetPointerOverTarget()}}else this.resetPointerOverTarget()}this.plugins.forEach(S=>{S.onViewportPointerMove&&S.onViewportPointerMove(w,this.viewport)})},l=w=>{if(!this.currentPointerOverTargets.includes(w)){const T=this.findSameGroupElements(w);this.resetPointerOverTarget(),this.currentPointerOverTargets.push(...T),this.highlightPointerOverTarget()}},u=(w,T)=>{var F;if(T||!id(w).includes(t))return;t=null;const{data:{originalEvent:_}}=w;w.target&&w.target===w.currentTarget&&_ instanceof TouchEvent&&r&&(console.log("[ clear, 手势触发取消选中 ] >"),this.transformer.clear()),this.isDragMode||((F=o())==null||F.end(this.getPointByViewport(w),w),this.transformer.emit("pointerup",w)),this.selector.done(),this.plugins.forEach(R=>{R.onViewportPointerUp&&R.onViewportPointerUp(w,this.viewport)})};(c=this.viewport)==null||c.on("pointerdown",a),(f=this.viewport)==null||f.on("pointermove",h),(d=this.viewport)==null||d.on("pointerup",u),(A=this.viewport)==null||A.on("moved",n),(p=this.viewport)==null||p.on("zoomed",s),(g=this.viewport)==null||g.on(bo.GET_POSITION,w=>{this.emit(bo.GET_POSITION,w)}),(y=this.viewport)==null||y.on(be.DOUBLE_CLICK,()=>{}),(I=this.viewport)==null||I.on("pointerupoutside",w=>{var T;this.isDragMode||(T=o())==null||T.end(this.getPointByViewport(w),w),this.plugins.forEach(_=>{_.onViewportPointerupoutside&&_.onViewportPointerupoutside(w,this.viewport)})}),(E=this.viewport.displayLayer)==null||E.on("childAdded",w=>{const T=fQ(w);this.updateNewElesOrder(T),this.emit(Ui.NEW_DISPLAYS_ADDED,this.getMultiDisplayJSON(T,{texture:!1}))})}resetPointerOverTarget(){this.currentPointerOverTargets.forEach(t=>{t&&t&&t.parent&&t.reset&&t.reset()}),this.currentPointerOverTargets=[]}highlightPointerOverTarget(){this.currentPointerOverTargets.forEach(t=>{t&&er(t.highlightBound)&&t.highlightBound()})}emitTransformerCommit(){this.emit(Ui.SELECTED_TRANSFORM_COMMIT,{getData:()=>({...this.getSelectedData(),enableRedo:this.canRedo,enableUndo:this.canUndo})})}setupTransformEvent(){var n,s,o,a,h,l,u,c,f,d,A;this.transformer.on(Ye.SELECT,()=>{this.transformer.enableEmit&&this.emit(Ui.SELECT_OBJECT,{...this.getSelectedData(),enableCombine:!!this.selectedPathsClosed,enableRedo:this.canRedo,enableUndo:this.canUndo}),this.plugins.forEach(p=>{p.onTransformerSelect&&p.onTransformerSelect(this.transformer)})});const t=p=>{this.transformer.enableEmit&&this.emit(Ui.SELECT_OBJECT_TRANSFORMERED,{getData:()=>({...this.getSelectedData(),enableRedo:this.canRedo,enableUndo:this.canUndo})},p),this.plugins.forEach(g=>{g.onTransformerChange&&g.onTransformerChange(this.transformer)})};this.transformer.on(Ye.TRANSFORM_CHANGE,t),(n=this.transformer)==null||n.on(be.DOUBLE_CLICK,p=>{if(console.log(be.DOUBLE_CLICK),this.selected.length!==1)return;const g=this.selected[0];g.type===Qt.PEN&&(g.enterEditMode&&(g.enterEditMode(p),this.transformer.clear()),this.updateEditMode(ue.PEN),this.curDisplayObject=g,this.moveDisplayToTempLayer(g),this.curDisplayObject.once(Le.DRAW_DONE,()=>{this.updateEditMode(ue.SELECT),this.addDisplayToViewport(g),this.recordOperationLog(g)}))}),(s=this.transformer)==null||s.on(be.PINCH_START,()=>{console.log(be.PINCH_START)}),(o=this.transformer)==null||o.on(be.PINCH_CHANGE,(p,g)=>{if(console.log(be.PINCH_CHANGE,p,g),this.selected.length!==1)return;const y=this.selected[0];y.scale.x+=p,y.scale.y+=p}),(a=this.transformer)==null||a.on(be.PINCH_END,()=>{console.log(be.PINCH_END)}),(h=this.transformer)==null||h.on(be.TWO_FINGER_TAP,()=>{console.log(be.TWO_FINGER_TAP)}),(l=this.transformer)==null||l.on(be.LONG_PRESS,()=>{console.log(be.LONG_PRESS)}),(u=this.transformer)==null||u.on(Ye.TRANSFORM_COMMIT,()=>{this.transformer.enableEmit&&(this.recordOperationLog(...this.selected),this.emitTransformerCommit())}),(c=this.transformer)==null||c.on("pointerdown",p=>{if(this.viewport.emit("pointerdown",p,!0),this.transformer.isPointDown=!0,this.plugins.forEach(g=>{g.onTransformerPointerDown&&g.onTransformerPointerDown(p)}),this.manualSelect){this.manualSelect=!1;return}if(this.isMultiSelectKeyDown(p)){const g=this.getPenetrableElement(p);g&&g!==this.transformer&&(this.multiSelect(g),this.transformer.emit("pointerup",p))}}),(f=this.transformer)==null||f.on("pointermove",p=>{this.viewport.emit("pointermove",p,!0),Bn(p)&&this.transformer.pointerId===no(p)&&this.plugins.forEach(g=>{g.onTransformerPointerMove&&g.onTransformerPointerMove(p)})});const r=p=>{this.viewport.emit("pointerup",p,!0),id(p).includes(this.transformer.pointerId)&&this.transformer.isPointDown&&(this.transformer.isPointDown=!1,this.transformer.pointerId=null,this.plugins.forEach(g=>{g.onTransformerPointerUp&&g.onTransformerPointerUp(p)}))};(d=this.transformer)==null||d.on("pointerup",r),(A=this.transformer)==null||A.on("pointerupoutside",r)}moveDisplayToTempLayer(t){this.viewport.removeChild(t),this.tempLayer.addChild(t)}setupOperationStackEvent(){this.operationStack.on(Ir.CAN_DO_CHANGE,(t,r)=>{this.emit(Ir.CAN_DO_CHANGE,t,r)})}setupSelectorEvent(){this.selector.on(ZI.SELECT_VIEWPORT_ELEMENTS,(t,r,n)=>{t&&r&&this.enableSelectElements?this.selectAreaElements(t,r,this.isMultiSelectKeyDown(n)):(console.log("[ 框选区域取消选择 ] >"),this.executeSelect([]))})}setupModeEvent(){this.modeManager.on(Eo.CHANGE,()=>{this.emit(Eo.CHANGE,this.modeManager.curMode)})}handleSelectModePointerDown(t){const{data:{originalEvent:r}}=t,n=this.selected,{validDisplays:s,invalidData:o}=ah(n);this.selected.length!==s.length&&(this.selected=s,this.emit(Ui.DISPLAYS_REMOVED,o)),t.target&&t.target!==t.currentTarget?this.pierceSelect(t):t.target&&t.target===t.currentTarget&&(this.isMultiSelectKeyDown(t)||r instanceof MouseEvent&&this.transformer.clear(),this.selector.start(this.getPointByViewport(t)))}getPenetrableElement(t){const r=this.getPointByViewport(t);return this.getMinAreaElementByPoint(r)}pierceSelect(t){const r=this.getPenetrableElement(t);r?this.isMultiSelectKeyDown(t)?(this.multiSelect(r),this.resetPointerOverTarget()):(this.selectSameGroup(r),this.manualSelect=!0,this.resetPointerOverTarget(),this.transformer.emit("pointerdown",t)):this.transformer.clear()}multiSelect(t){this.selected=this.invertSelect(t,this.selected)}selectSameGroup(t){const r=this.findSameGroupElements(t);this.selected=r}handleEditModePointerDown(t){if(!this.curDisplayObject){const r=this.modeManager.curMode,n=Ng[r],s=ir(n);s&&(s.parseJSON(this.configManager.displayConfig),this.executeSelect([])),this.curDisplayObject=s,this.curDisplayObject&&(this.curDisplayObject.once(Le.DRAW_BEGIN,o=>{this.tempLayer.addChild(o)}),this.curDisplayObject.on(Le.DRAW_UPDATE,o=>{this.recordOperationLog(o)}),this.curDisplayObject.once(Le.DRAW_DONE,o=>{this.handleDrawDisplayDone(o)}))}if(this.curDisplayObject&&this.curDisplayObject.editing&&t.target&&t.target===t.currentTarget){this.selected=[this.curDisplayObject],this.updateEditMode(ue.SELECT);return}this.curDisplayObject.start(this.getPointByViewport(t),t)}}class PH extends Vr{get canUndo(){return this.imageProcess?this.imageProcess.canUndo:this.operationStack.canUndo}get canRedo(){return this.imageProcess?this.imageProcess.canRedo:this.operationStack.canRedo}undo(){var r;if((r=this.imageProcess)!=null&&r.canUndo){this.imageProcess.undo();return}if(!this.canUndo)return;this.transformer.clear();const i=this.operationStack.top,{curIDs:t}=i;this.operationStack.undo(),this.redraw(t,!1)}redo(){var r;if((r=this.imageProcess)!=null&&r.canRedo){this.imageProcess.redo();return}if(!this.canRedo)return;this.transformer.clear(),this.operationStack.redo();const i=this.operationStack.top,{curIDs:t}=i;this.redraw(t,!0)}redraw(i,t){const r=this.operationStack.top,n=N_(this.viewport,this.tempLayer);if(!r){n.forEach(a=>{this.removeElement(a,!1)}),this.updateEditMode(ue.SELECT),this.curDisplayObject=void 0,this.transformer.emit(Ye.TRANSFORM_CHANGE,"all");return}n.forEach(a=>{r.allIDs.has(a.id)||(this.removeElement(a,!1),this.updateEditMode(ue.SELECT))});const s=a=>{if(r.curAttributes.has(a))return r.curAttributes.get(a);const h=this.operationStack.undoStack;for(let u=h.length-1;u>=0;u--){const c=h[u];if(c.curAttributes.has(a))return c.curAttributes.get(a)}const l=this.operationStack.initOperation;if(l&&l.curAttributes.has(a))return l.curAttributes.get(a)};(a=>{a.forEach(h=>{const l=n.filter(u=>u.id===h);if(l.length===1){const u=l[0];if(u&&!u.destroyed){const c=s(u.id);c&&(delete c.isFill,u.updateData&&u.updateData(c,t),ZC(u,c,this.viewport))}}else l.length>1&&console.log("find redundant elements",h)})})(i),r.allIDs.forEach(a=>{if(n.filter(l=>l.id===a).length<1){const l=s(a);l.isFill=this.elementsFillMap[l.id],l?Mh([l],this.viewport,!1,!1):console.log("can not find attributes for",a)}}),this.transformer.emit(Ye.TRANSFORM_CHANGE,"all")}recordOperationLog(...i){const t=this.createOperationLogOnViewport(i);this.operationStack.push(t)}createOperationLogOnViewport(i){return Pk(i,[this.viewport,this.tempLayer],this.viewport,{texture:!0})}}class SH extends Vr{closeImageProcess(i){var t,r,n;this.imageProcess&&(!i&&this.imageProcess&&(i=this.imageProcess.getOriginalDisplay()),this.toggleTransformer(!0),(t=this.imageProcess)==null||t.destroyAll(),this.imageProcess=null,this.emit(Ir.CAN_DO_CHANGE,this.canUndo,this.canRedo),this.centralAxis&&(this.centralAxis.mask.visible=!0,this.centralAxis.axis.visible=!0),i&&i.interactive&&(this.transformer.selected=[i]),(n=(r=this.configManager.imageProcessConfig.lifecycle)==null?void 0:r.onClose)==null||n.call(r))}updateImageProcessTool(i,t){var r;(r=this.imageProcess)==null||r.updateTool(i,t)}saveImageProcess(){var t,r,n;if(!this.imageProcess)return;if(this.imageProcess.locking)throw Error("failed to save imageProcess when it is locking");this.toggleTransformer(!0);const i=(t=this.imageProcess)==null?void 0:t.getResult();i?(this.addDisplayToViewport(i),this.recordOperationLog(i)):this.recordOperationLog(),(n=(r=this.configManager.imageProcessConfig.lifecycle)==null?void 0:r.onSave)==null||n.call(r),this.closeImageProcess(i)}toggleTransformer(i){this.viewport.displayLayerVisible=i,this.transformer.enableEmit=i,this.transformer.rotateEnabled=i}processImage(i){var r,n;let t=this.selected[0];if(i&&(t=this.viewport.backgroundSprite),!!t){if(this.finishCurMode(),this.transformer.selected=[],!this.imageProcess){(n=(r=this.configManager.imageProcessConfig.lifecycle)==null?void 0:r.onOpen)==null||n.call(r);const s=this.cloneImageProcessDisplay(t),o=Rh(t,this.viewport),a={x:o.minX,y:o.minY,width:o.maxX-o.minX,height:o.maxY-o.minY},h=(c,f)=>{Fo(c,f,this.viewport)},l=c=>{this.viewport.addChild(c)},u=c=>{this.selected=c};this.imageProcess=new Xk({viewportWorldWidth:this.viewport.worldWidth,viewportWorldHeight:this.viewport.worldHeight,viewportHeight:this.viewport.height,viewportWidth:this.viewport.width,viewportPosition:this.viewport.position,viewportScale:this.viewport.scale,display:t,newDisplay:s,finalPosition:a,isBackground:i,setDisplayPosition:h,addViewportChild:l,selectDisplay:u,imageProcessConfig:this.configManager.imageProcessConfig}),this.setUpImageProcessOperationStackEvent(),this.emit(Ir.CAN_DO_CHANGE,this.imageProcess.canUndo,this.imageProcess.canRedo)}this.emit(Ui.UPDATE_IMAGE_PROCESS_VISIBLE,!0),this.toggleTransformer(!1),this.centralAxis&&(this.centralAxis.mask.visible=!1,this.centralAxis.axis.visible=!1)}}cloneImageProcessDisplay(i){const t=this.getDisplayRenderData(i.cloneWithoutCompress(this.viewport)),r=document.createElement("canvas");r.width=t.width,r.height=t.height,r.getContext("2d").putImageData(t,0,0);const n=new Vi(r),s=i.getBounds();return n.width=s.width/this.viewport.scale.x,n.height=s.height/this.viewport.scale.y,n.interactive=!1,n}setUpImageProcessOperationStackEvent(){this.imageProcess.operationStack.on(Ir.CAN_DO_CHANGE,(i,t)=>{this.emit(Ir.CAN_DO_CHANGE,i,t)})}cancelImageProcessTool(){var i;(i=this.imageProcess)==null||i.cancel()}confirmImageProcessTool(){var i;(i=this.imageProcess)==null||i.confirm()}}const NH=e=>{const{source:i,parseColor:t}=e;i.style.visibility="hidden",document.body.appendChild(i);try{console.time("parse svg");const r=new m_(i,null,t);return console.timeEnd("parse svg"),r.fitToParent(),r.root}catch(r){console.log(r)}finally{document.body.removeChild(i)}return null},OH=e=>{const{source:i,width:t,height:r}=e,n=new Vi(i);return t&&(n.width=t),r&&(n.height=r),n},By={svg:NH,bitmap:OH},DH=(e,i)=>{if(e in By)return By[e](i)};class FH extends Vr{importDisplayJSON(i,t){const{createNewID:r=!1,needRecord:n=!0,autoSelected:s=!0}=t||{};if(ce(i)&&!Cd(i)){let o=Mh(i,this.viewport,r);const{validDisplays:a}=ah(o);return o=a,n?this.recordOperationLog(...o):this.operationStack.initOperation=this.createOperationLogOnViewport(o),s&&(this.selected=o),this.getMultiDisplayJSON(o,{texture:!1})}return[]}exportCanvasJSON(i={texture:!0}){const r=this.getInteractiveElements().sort((n,s)=>n.displayOrder-s.displayOrder);return this.getMultiDisplayJSON(r,i)}getDisplayLayerBounds(){return this.viewport.displayLayer.getLocalBounds()}getDisplaysBounds(i){const t=ri.calculateGroupOrientedBounds(i,0),r=new _i,n=this.viewport.displayLayer.toLocal(t.topLeft),s=this.viewport.displayLayer.toLocal(t.bottomRight);return r.minX=n.x,r.minY=n.y,r.maxX=s.x,r.maxY=s.y,r.getRectangle()}async getSelectedShot(i){const t=Du(this.selected,i);return await this.getDisplaysShot(t,this.transformer.worldGroupBounds.getRectangle(),i==null?void 0:i.scaleNum)}async getAllDisplaysShot(i){const t=Du(this.viewport.getInteractiveElements(),i);return await this.getDisplaysShot(t,this.getDisplayLayerBounds(),i==null?void 0:i.scaleNum)}async getSpecifiedDisplaysShot(i){return await this.getDisplaysShot(i.targetDisplays,this.getDisplaysBounds(i.targetDisplays),i.scaleNum)}async getSpecifiedDisplaysShotById(i){const r=this.viewport.getInteractiveElements().filter(d=>i.displayIds.includes(d.id)),{x:n,y:s}=this.getDisplaysBounds(r);if(r.length===0)return null;const o=i!=null&&i.scaleNum?i==null?void 0:i.scaleNum:du,a=[];for(let d=0;d<r.length;d++){const A=r[d];let p;if(A instanceof Vi)p=A.cloneWithoutCompress(this.viewport),p.scale.x=A.scale.x,p.scale.y=A.scale.y;else{const g=A.toJSON(this.viewport);g.x=g.offsetX,g.y=g.offsetY,ic(i.tintColor)||(g.layerColor=i.tintColor),p=ir(g.type,g)}a.push(p)}const h=new $t;h.addChild(...a);const{width:l,height:u}=h.getLocalBounds(),c=this.getDisplayRenderData(h,o,1);return{canvas:O0(c),width:l,height:u,oWidth:c.width,oHeight:c.height,x:n,y:s}}async getDisplayLayerShot(i){var s,o;const{include:t,exclude:r}=i||{};let{scaleNum:n=du}=i||{};if(r||t){const a=this.viewport.getInteractiveElements(),h=Du(a,i),l=this.getDisplayLayerBounds(),u=await this.getDisplaysShot(h,l,n),{canvas:c,...f}=u;return{url:vf(c),...f}}else{const a=this.viewport.displayLayer,h=this.getDisplayLayerBounds();n=F0({srcWidth:h.width,srcHeight:h.height,scaleNum:n,maxWidth:((s=this.contextInfo)==null?void 0:s.max_texture_size)||4096,maxHeight:((o=this.contextInfo)==null?void 0:o.max_texture_size)||4096}),console.log("[ 缩略图最终放大尺寸 ] >",n);const l=this.getDisplayRenderData(a,n,1);return{canvas:O0(l),scaleNum:n}}}async getDisplaysShot(i,t,r){r=r||du;const{x:n,y:s,width:o,height:a}=t,h=document.createElement("canvas");h.width=Math.round(Number((o*r).toFixed(3))),h.height=Math.round(Number((a*r).toFixed(3)));const l=h.getContext("2d");for(let u=0;u<i.length;u++){const c=i[u];let f;if(c instanceof Vi)f=c.cloneWithoutCompress(this.viewport),f.scale.x=c.scale.x*r,f.scale.y=c.scale.y*r;else{const y=c.toJSON(this.viewport);f=ir(y.type,y),f.scale.x*=r,f.scale.y*=r}const d=this.getDisplayRenderData(f),{minX:A,minY:p}=Rh(i[u],this.viewport),g=await createImageBitmap(d);l.drawImage(g,(A-n)*r,(p-s)*r)}return{canvas:h,width:o,height:a,oWidth:h.width,oHeight:h.height}}async getCanvasData(i=TD){console.time("getCanvasData");const{imageData:t=!0,path:r=!0,excludeOutSide:n=!0,outSideRange:s}=i;let o=this.viewport.getInteractiveElements({excludeOutSide:n,outSideRange:s});this.transformer.clear();const{validDisplays:a}=ah(o);o=a;const h=[];for(let l=0;l<o.length;l++){const u=o[l],c=u.toJSON(this.viewport),f=Rh(u,this.viewport);let d=f;u.getRealBounds&&(d=u.getRealBounds(),d=rQ(this.viewport,d));const{minX:A,minY:p,maxX:g,maxY:y}=d;let I={};c.isFill?t&&(I=await this.configDisplayBitMap(i,u,d,f)):r&&(I=await this.configDisplayDPath(i,u)),h.push({...c,...I,x:A,y:p,width:g-A,height:y-p})}return window.canvas_debug.logGetCanvasData&&console.log("[Canvas-getCanvasData]",h),console.timeEnd("getCanvasData"),h}async configDisplayBitMap(i,t,r,n){let s=t;const{minX:o,minY:a,maxX:h,maxY:l}=r;let u=null;if(t.type===Qt.BITMAP)s=t.cloneWithoutCompress(this.viewport);else{const p=t.toJSON(this.viewport);s=ir(p.type,p);let g=i.vectorScaleNum;(h-o)*(l-a)<100*100?g=30:g=10,g=F0({srcWidth:h-o,srcHeight:l-a,scaleNum:g,maxWidth:this.contextInfo.max_texture_size,maxHeight:this.contextInfo.max_texture_size}),s.scale.x*=g,s.scale.y*=g,u=(()=>{const I=r.minX-n.minX,E=r.minY-n.minY,w=r.maxX-r.minX,T=r.maxY-r.minY;return new Tt(I*g,E*g,w*g,T*g)})()}const c=this.getDisplayRenderData(s,1,0,u),{data:f,width:d,height:A}=c;if(i.dataImageExport){const p=await i.dataImageExport(f);return{oWidth:d,oHeight:A,extraPath:p}}return{imgData:f,oWidth:d,oHeight:A}}async configDisplayDPath(i,t){const r=lQ(t,this.viewport);return i.dataPathExport?{extraPath:await i.dataPathExport(r)}:{path:r}}loadResToViewport(i,t,r={fitToViewPort:!1,offsetX:0,offsetY:0}){this.finishCurMode(),console.time("loadResToViewport");const n=DH(i,t);if(!n)throw new Error("load res error, loader name: ${loaderName}.");const{width:s,height:o}=t,a=t_(n,this.viewport.displayGroup,this.configManager.displayConfig),{validDisplays:h}=ah(a);return this.addDisplayToViewport(n,!1),this.selected=h,this.placeSelectedToViewport({width:s,height:o,...r}),console.timeEnd("loadResToViewport"),this.getMultiDisplayJSON(h,{texture:!1})}placeSelectedToViewport(i){const t=this.transformer.worldGroupBounds.getRectangle();let{width:r,height:n}=i;const{fitToViewPort:s=!1,fitViewportRatio:o=1}=i;!r&&!n?(r=t.width,n=t.height):r?n||(n=r/t.width*t.height):r=n/t.height*t.width,s&&({width:r,height:n}=ca(r,n,this.viewport.worldWidth*o,this.viewport.worldHeight*o)),(r!==t.width||n!==t.height)&&this.transformer.updateGroupSize(r,null,!0);const{offsetX:a=0,offsetY:h=0}=i;let l=a,u=h;Fe(a)||(l=lf(a,this.viewport.worldWidth,r)),Fe(h)||(u=lf(h,this.viewport.worldHeight,n)),this.transformer.updateGroupPosition(l,u),this.transformer.emit(Ye.TRANSFORM_COMMIT)}addTextToViewport(i,t){const r=ir(Qt.TEXT);r.parseJSON(uo({...this.configManager.displayConfig},t)),this.addDisplayToViewport(r,!0),this.placeSelectedToViewport(i)}}class LH extends Vr{constructor(){super(...arguments);x(this,"potraceOutline",(t,r,n,s=0,o=0)=>new Promise(a=>{Hu.loadImageFromGrayAlpha(t,r,n);const h=()=>{const l=Hu.getTransformPath(1,s,o);a(l)};Hu.process(h)}));x(this,"getPotracePath",async t=>{const{canvas:r}=t,s=r.getContext("2d").getImageData(0,0,r.width,r.height),{data:o,width:a,height:h}=this.marginalize(s);return await this.potraceOutline(o,a,h,-Vn,-Vn)})}marginalize(t){const r=document.createElement("canvas");r.width=t.width+Vn*2,r.height=t.height+Vn*2;const n=r.getContext("2d");return n.putImageData(t,Vn,Vn),n.getImageData(0,0,r.width,r.height)}async getOutlineBitmapData(t,r=!0,n=fr.SELECTED){var u,c;const s={[fr.SELECTED]:{getShot:()=>this.getSelectedShot({include:[Qt.BITMAP],scaleNum:La}),displaysBounds:()=>this.transformer.worldGroupBounds.getRectangle()},[fr.ALL]:{getShot:()=>this.getAllDisplaysShot({include:[Qt.BITMAP],scaleNum:La}),displaysBounds:this.getDisplayLayerBounds},[fr.SPECIFIED]:{getShot:()=>this.getSpecifiedDisplaysShot({targetDisplays:t,scaleNum:La}),displaysBounds:()=>this.getDisplaysBounds(t)}},o=(u=s[n])==null?void 0:u.displaysBounds.bind(this)(),a=await((c=s[n])==null?void 0:c.getShot.bind(this)()),h=await this.getPotracePath(a),l={displaysBounds:o,bitmapScale:La,bitmapShot:a};return r?l.pathPointsList=this.getPathPoints(h):l.potracePath=h,l}async getOutlineVectorData(t,r){if(r!==0){const n=[],s=[];return t.forEach(o=>{o.getRealPoints(this.viewport).forEach(h=>{o.isClosePath?n.push(h):s.push(h)})}),{closePathPointsList:n,openPathPointsList:s}}else{const n=[];return t.forEach(s=>{if(s.type===Qt.PATH){const o=s.toGlobal(new M(0,0)),{x:a,y:h}=this.viewport.toLocal({x:o.x,y:o.y}),l=s.toJSON(this.viewport);n.push({type:s.type,dPath:s.dPath,pivot:l.pivot,scale:l.scale,angle:l.angle,skew:l.skew,x:a,y:h})}else{const o=s.getRealPoints(this.viewport);n.push({type:s.type,realPointList:o})}}),{vectorDisplays:n}}}async getSelectedOutlineEleInfo(t){const r=this.selected;return await this.getOutlineEleInfo(r,{type:fr.SELECTED,offset:t})}async getAllOutlineEleInfo(t){const r=this.viewport.getInteractiveElements();return await this.getOutlineEleInfo(r,{type:fr.ALL,offset:t})}async getSpecifiedOutlineEleInfo(t,r=[]){if(r.length===0)return null;const s=this.viewport.getInteractiveElements().filter(a=>r.includes(a.id));return s.length===0?null:await this.getOutlineEleInfo(s,{type:fr.SPECIFIED,offset:t})}async getOutlineEleInfo(t,r){const n={};if(t.length===0)return n;const s=[],o=[];if(t.forEach(a=>{a.type!==Qt.BITMAP?o.push(a):s.push(a)}),s.length>0){const a=(r==null?void 0:r.offset)!==0;n.bitmapData=await this.getOutlineBitmapData(s,a,r==null?void 0:r.type)}return o.length>0&&(n.vectorData=await this.getOutlineVectorData(o,r==null?void 0:r.offset)),n}drawOutline(t){if(this.tempOutline&&this.clearOutline(),!t||t==="M0,0")return;const{fillColor:r,lineColor:n,layerColor:s,layerTag:o}=this.configManager.displayConfig,a=ir(Qt.PATH,{dPath:t,graphicX:0,graphicY:0,fillColor:r,lineColor:n,layerColor:s,layerTag:o,isFill:!1});this.tempOutline=a,a&&(this.tempLayer.addChild(a),a.isClosePath=cA(a))}clearOutline(t=!0){var r;t?(r=this.tempOutline)==null||r.destroy(!0):this.tempOutline&&(this.selected=[this.tempOutline],this.viewport.addToLayer(this.tempOutline),this.recordOperationLog(this.tempOutline)),this.tempOutline=null}}function Ry(e,i){const t=ir(e,i);return t&&(t.interactive=!1,t.interactiveChildren=!1),t}class MH extends Vr{registerPlugin(i){if(!this.plugins.find(t=>t.name===i.name)){if(this.plugins.push(i),i.getDisplayObject){const t=i.getDisplayObject();t&&this.app.stage.addChild(t)}if(i.init&&(i.init(this.viewport,this.transformer),i.initStageDisplay&&this.app.stage.addChild(i.initStageDisplay(Ry)),i.initViewportDisplay)){const t=i.initViewportDisplay(Ry);if(t instanceof Jt)this.viewport.addChild(t);else{const{display:r,targetContainer:n}=t;this.viewport.addToContainer(r,n)}}}}unRegisterPlugin(i){const t=this.plugins.indexOf(i,0);t>-1&&(i==null||i.destroy(),this.plugins.splice(t,1))}unRegisterPluginByName(i){const t=this.plugins.find(r=>r.name===i);t&&this.unRegisterPlugin(t)}getPluginByName(i){return this.plugins.find(r=>r.name===i)}unRegisterPluginByType(i){const t=this.plugins.find(r=>r.type===i);t&&this.unRegisterPlugin(t)}}class A4 extends D3(PH,RH,SH,BH,TH,FH,LH,MH){constructor(i){super(),this.init(i),this.setupEvents()}}window.__PIXI_INSPECTOR_GLOBAL_HOOK__&&window.__PIXI_INSPECTOR_GLOBAL_HOOK__.register({PIXI:eM});window.canvas_debug={};var Qi;class p4{constructor(i){lt(this,Qi,void 0);x(this,"name","guideLine");x(this,"type",rx);It(this,Qi,new Ok(i))}init(i){i.addChild(B(this,Qi).container)}destroy(){}updateConfig(i){B(this,Qi).updateOptions(i)}onTransformerSelect(i){B(this,Qi).onTransformSelected(i)}onTransformerChange(){}onTransformerPointerDown(i){B(this,Qi).onPointerdown(i)}onTransformerPointerUp(){B(this,Qi).onPointerup()}onTransformerPointerMove(i){B(this,Qi).onObjectMoving(i)}onViewportScale(i){B(this,Qi).updateTextScale(i.scaled)}}Qi=new WeakMap;var ii;class g4{constructor(i,t){lt(this,ii,void 0);x(this,"name","ruler");x(this,"type",rx);It(this,ii,new Vk(i,t))}getDisplayObject(){return B(this,ii)}init(i){var t;(t=B(this,ii))==null||t.zoom(i.scaled,i.x,i.y)}destroy(i){var t;(t=B(this,ii))==null||t.destroy(i)}updateConfig(i){var t;(t=B(this,ii))==null||t.updateOptions(i)}resize(i,t){B(this,ii).resize(i,t)}onViewportMove(i){var t;(t=B(this,ii))==null||t.zoom(i.scaled,i.x,i.y)}onViewportScale(i){var t;(t=B(this,ii))==null||t.zoom(i.scaled,i.x,i.y)}onTransformerSelect(i){var t;(t=B(this,ii))==null||t.highlight(i.worldGroupBounds)}onTransformerChange(i){var t;(t=B(this,ii))==null||t.highlight(i.worldGroupBounds)}}ii=new WeakMap;const rx="build-in";export{kr as $,YH as A,WH as B,i4 as C,JH as D,Ui as E,Mk as F,so as G,h4 as H,l4 as I,g3 as J,Oi as K,Qt as L,A4 as M,ZH as N,XH as O,ue as P,Mg as Q,an as R,Uh as S,fi as T,LD as U,qs as V,Qe as W,uo as X,kH as Y,Sg as Z,df as _,KH as a,zH as a0,Q2 as a1,g4 as a2,Ve as a3,p4 as a4,Eo as a5,Ir as a6,ca as a7,$y as a8,sp as a9,jH as aa,$H as ab,UH as ac,s4 as ad,$t as ae,ye as af,Ye as ag,kt as ah,ir as ai,e4 as aj,Cd as b,GH as c,Zu as d,$A as e,VH as f,zb as g,Xm as h,ic as i,ep as j,Hr as k,HH as l,Fe as m,Ky as n,b2 as o,jm as p,er as q,ce as r,t4 as s,qH as t,$s as u,ua as v,u4 as w,r4 as x,bR as y,n4 as z};
