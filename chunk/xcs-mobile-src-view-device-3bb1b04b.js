import{u,s as b,c as I,b as C,B,j as p}from"../assets/index-83a10b2e.js";import{N as P}from"./index-36e5bf24.js";import{D as S}from"./index-efc3e601.js";import{k as v,f,D as h,I as U,Z as F,u as i,H as N,w as R,c as T,E as G,j as m,G as s,K as _,J as M,a0 as j,a1 as A,a4 as E,a5 as V,y as $}from"./xcs-vue-family-70642f71.js";import"./index-55948043.js";import"./xcs-canvas-5c2592d6.js";import"./index-ac8ea00e.js";import"./datasource-5dbe607a.js";import"./constant-2a798a0e.js";import"./systemback-e5f1562f.js";const q=v({__name:"DeviceSetting",setup(w){const o=u(),c=f(()=>{var e;const n=S[((e=o.ext)==null?void 0:e.id)||""];return n?n.DeviceSetting:""});return(n,e)=>(h(),U(F(i(c))))}}),L={class:"device-detail"},z={class:"device-container"},H={class:"device-header"},J=["src"],K={class:"device-text"},O={class:"device-btn"},ie=v({__name:"Device",setup(w){const{t:o}=N(),c=E(),n=V(),e=u(),{info:d}=b(e);R(()=>e.connected,t=>{t||n.back()});const g=f(()=>{const t=e.ext;return{info:e.info,ext:t,checkUpdateFirmware:x,updateDeviceSettingInfo:e.updateDeviceSettingInfo,isInProcessing:e.isInProcessing}});T(()=>{e.updateDeviceInfo()});const k=()=>history.back(),y=async()=>{var t,r;if(window.MeApi&&await I())try{if(!await((t=window.MeApi.permission)==null?void 0:t.isGrantedInternetPermission())){await C({title:o("mobile.common.local_network_title"),message:o("mobile.common.local_network_tip"),confirmButtonText:o("mobile.common.go_to_setting"),cancelButtonText:o("mobile.common.not_yet")}),(r=window.MeApi.permission)==null||r.openLocationPage();return}}catch(a){console.log(a);return}n.push({path:"/connect",query:c.query})},x=async()=>{try{await e.checkUpdateFirmware()===!1?p(o("device.firmware.latest_firmware")):e.deviceFirmware=Object.assign(e.deviceFirmware,{manualCheckUpdate:!0})}catch(t){console.log("checkUpdateFirmware",t),p(o("setting.check_update_fail"))}};return(t,r)=>{var l;const a=P,D=B;return h(),G("div",L,[m(a,{"left-arrow":"",fixed:"",placeholder:"",title:t.$t("mobile.device.device_details"),onClickLeft:k},null,8,["title"]),s("div",z,[s("div",H,[s("img",{class:"device-img",src:(l=i(d))==null?void 0:l.cover},null,8,J),s("div",K,_(i(d).name),1),s("div",O,[m(D,{type:"primary",onClick:y},{default:M(()=>[$(_(t.$t("device.setting.change")),1)]),_:1})])]),m(i(q),j(A(i(g))),null,16)])])}}});export{ie as default};
