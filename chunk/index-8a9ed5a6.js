import{t as I,R as L,w as R,an as M,v as y,ao as O,ap as _,aq as j,ar as q,as as z,at as A,au as F,y as V}from"../assets/index-83a10b2e.js";import{k as X,b as m,r as $,f as x,j as v}from"./xcs-vue-family-70642f71.js";const[G,p]=I("swipe-cell"),J={name:L(""),disabled:Boolean,leftWidth:R,rightWidth:R,beforeClose:Function,stopPropagation:Boolean};var K=X({name:G,props:J,emits:["open","close","click"],setup(t,{emit:i,slots:r}){let n,l,f;const u=m(),C=m(),k=m(),a=$({offset:0,dragging:!1}),c=M(),w=e=>e.value?q(e).width:0,d=x(()=>y(t.leftWidth)?+t.leftWidth:w(C)),g=x(()=>y(t.rightWidth)?+t.rightWidth:w(k)),T=e=>{a.offset=e==="left"?d.value:-g.value,n||(n=!0,i("open",{name:t.name,position:e}))},h=e=>{a.offset=0,n&&(n=!1,i("close",{name:t.name,position:e}))},D=e=>{const o=Math.abs(a.offset),s=.15,B=n?1-s:s,E=e==="left"?d.value:g.value;E&&o>E*B?T(e):h(e)},H=e=>{t.disabled||(f=a.offset,c.start(e))},N=e=>{if(t.disabled)return;const{deltaX:o}=c;c.move(e),c.isHorizontal()&&(l=!0,a.dragging=!0,(!n||o.value*f<0)&&z(e,t.stopPropagation),a.offset=A(o.value+f,-g.value,d.value))},W=()=>{a.dragging&&(a.dragging=!1,D(a.offset>0?"left":"right"),setTimeout(()=>{l=!1},0))},b=(e="outside")=>{i("click",e),n&&!l&&F(t.beforeClose,{args:[{name:t.name,position:e}],done:()=>h(e)})},P=(e,o)=>s=>{o&&s.stopPropagation(),b(e)},S=(e,o)=>{const s=r[e];if(s)return v("div",{ref:o,class:p(e),onClick:P(e,!0)},[s()])};return O({open:T,close:h}),_(u,()=>b("outside"),{eventName:"touchstart"}),j("touchmove",N,{target:u}),()=>{var e;const o={transform:`translate3d(${a.offset}px, 0, 0)`,transitionDuration:a.dragging?"0s":".6s"};return v("div",{ref:u,class:p(),onClick:P("cell",l),onTouchstartPassive:H,onTouchend:W,onTouchcancel:W},[v("div",{class:p("wrapper"),style:o},[S("left",C),(e=r.default)==null?void 0:e.call(r),S("right",k)])])}}});const Y=V(K);export{Y as S};
